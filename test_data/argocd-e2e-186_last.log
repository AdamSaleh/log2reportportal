STEP-RUN-ARGOCD-E2E-TESTS

+ failed=0
++ date +%Y.%m.%d-%H.%M.%S
+ timestamp=2023.11.03-12.47.23
++ echo admin
++ tr -s '[:upper:]' '[:lower:]'
+ [[ admin == admin ]]
+ echo -e 'Logging in as admin user'
Logging in as admin user
++ cat /install-dir/psi-413/auth/kubeadmin-password
++ cat /install-dir/psi-413/auth/api-url
+ oc login -u kubeadmin -p AbsYZ-mcBvy-4GRMM-xCfsA https://api.psi-413.ocp-gitops-qe.com:6443 --insecure-skip-tls-verify=true
WARNING: Using insecure TLS client config. Setting this option is not supported!

Login successful.

You have access to 71 projects, the list has been suppressed. You can list all projects with 'oc projects'

Using project "default".
Welcome! See 'oc help' to get started.
+ [[ -z '' ]]
++ grep '^argocd'
++ sed -e 's/+.*//' -e 's/argocd: v//'
+++ oc get pods -n openshift-gitops
+++ grep openshift-gitops-server
+++ cut '-d ' -f 1
++ oc exec -it openshift-gitops-server-594cc7cfff-74jph argocd version -n openshift-gitops
+ export ARGOCD_VERSION=2.6.15
+ ARGOCD_VERSION=2.6.15
+ trap clean EXIT
+ git config --global user.name 'FIRST_NAME LAST_NAME'
+ git config --global user.email MY_NAME@example.com
+ export PATH=/usr/local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/local/go/bin
+ PATH=/usr/local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/local/go/bin
+ make argocd-e2e-tests
echo "Running argocd E2E tests..."
Running argocd E2E tests...
. ./scripts/argocd-e2e-test.sh
+++ oc get deployment openshift-gitops-operator-controller-manager -n openshift-gitops-operator -o 'jsonpath={.metadata.namespace}' --ignore-not-found
++ operator_namespace=
++ operator_namespace=openshift-operators
+++ oc get deployment -n openshift-operators -o 'jsonpath={range .items[*]}{.metadata.name}{"\n"}{end}'
+++ grep gitops
++ operator_deploy=gitops-operator-controller-manager
+++ oc get subscription -n openshift-operators openshift-gitops-operator --ignore-not-found
++ olm_subscription='NAME                        PACKAGE                     SOURCE       CHANNEL
openshift-gitops-operator   openshift-gitops-operator   iib-asaleh   gitops-1.8'
++ [[ -z NAME                        PACKAGE                     SOURCE       CHANNEL
openshift-gitops-operator   openshift-gitops-operator   iib-asaleh   gitops-1.8 ]]
++ oc patch subscription -n openshift-operators openshift-gitops-operator --type merge -p '{"spec":{"config": {"env":[{"name":"DISABLE_DEFAULT_ARGOCD_INSTANCE","value":"true"}]}}}'
subscription.operators.coreos.com/openshift-gitops-operator patched
++ [[ argocd-e2e == scripts ]]
++ ROOT_DIR=/argocd-e2e
++ [[ -z 2.6.15 ]]
++ [[ 2.6.15 == \s\t\a\b\l\e ]]
++ export ARGOCD_VERSION_TAG=v2.6.15
++ ARGOCD_VERSION_TAG=v2.6.15
++ cd /argocd-e2e
++ git clone https://github.com/argoproj/argo-cd.git
Cloning into 'argo-cd'...
Updating files:  16% (520/3244)
Updating files:  17% (552/3244)
Updating files:  18% (584/3244)
Updating files:  19% (617/3244)
Updating files:  20% (649/3244)
Updating files:  21% (682/3244)
Updating files:  22% (714/3244)
Updating files:  23% (747/3244)
Updating files:  24% (779/3244)
Updating files:  25% (811/3244)
Updating files:  26% (844/3244)
Updating files:  27% (876/3244)
Updating files:  28% (909/3244)
Updating files:  29% (941/3244)
Updating files:  30% (974/3244)
Updating files:  31% (1006/3244)
Updating files:  32% (1039/3244)
Updating files:  33% (1071/3244)
Updating files:  34% (1103/3244)
Updating files:  35% (1136/3244)
Updating files:  36% (1168/3244)
Updating files:  37% (1201/3244)
Updating files:  38% (1233/3244)
Updating files:  38% (1260/3244)
Updating files:  39% (1266/3244)
Updating files:  40% (1298/3244)
Updating files:  41% (1331/3244)
Updating files:  42% (1363/3244)
Updating files:  43% (1395/3244)
Updating files:  44% (1428/3244)
Updating files:  45% (1460/3244)
Updating files:  46% (1493/3244)
Updating files:  47% (1525/3244)
Updating files:  48% (1558/3244)
Updating files:  49% (1590/3244)
Updating files:  50% (1622/3244)
Updating files:  51% (1655/3244)
Updating files:  52% (1687/3244)
Updating files:  53% (1720/3244)
Updating files:  54% (1752/3244)
Updating files:  55% (1785/3244)
Updating files:  56% (1817/3244)
Updating files:  57% (1850/3244)
Updating files:  58% (1882/3244)
Updating files:  58% (1887/3244)
Updating files:  59% (1914/3244)
Updating files:  60% (1947/3244)
Updating files:  61% (1979/3244)
Updating files:  62% (2012/3244)
Updating files:  63% (2044/3244)
Updating files:  64% (2077/3244)
Updating files:  65% (2109/3244)
Updating files:  66% (2142/3244)
Updating files:  67% (2174/3244)
Updating files:  68% (2206/3244)
Updating files:  69% (2239/3244)
Updating files:  70% (2271/3244)
Updating files:  71% (2304/3244)
Updating files:  72% (2336/3244)
Updating files:  73% (2369/3244)
Updating files:  74% (2401/3244)
Updating files:  75% (2433/3244)
Updating files:  76% (2466/3244)
Updating files:  77% (2498/3244)
Updating files:  78% (2531/3244)
Updating files:  78% (2546/3244)
Updating files:  79% (2563/3244)
Updating files:  80% (2596/3244)
Updating files:  81% (2628/3244)
Updating files:  82% (2661/3244)
Updating files:  83% (2693/3244)
Updating files:  84% (2725/3244)
Updating files:  85% (2758/3244)
Updating files:  86% (2790/3244)
Updating files:  87% (2823/3244)
Updating files:  88% (2855/3244)
Updating files:  89% (2888/3244)
Updating files:  90% (2920/3244)
Updating files:  91% (2953/3244)
Updating files:  92% (2985/3244)
Updating files:  93% (3017/3244)
Updating files:  94% (3050/3244)
Updating files:  95% (3082/3244)
Updating files:  96% (3115/3244)
Updating files:  97% (3147/3244)
Updating files:  98% (3180/3244)
Updating files:  99% (3212/3244)
Updating files:  99% (3227/3244)
Updating files: 100% (3244/3244)
Updating files: 100% (3244/3244), done.
++ export ARGOCD_CHECKOUT=master
++ ARGOCD_CHECKOUT=master
++ [[ 2.6.15 == \m\a\s\t\e\r ]]
++ cd /argocd-e2e/argo-cd
++ git rev-parse -q --verify refs/tags/v2.6.15
++ export ARGOCD_CHECKOUT=tags/v2.6.15
++ ARGOCD_CHECKOUT=tags/v2.6.15
++ trap cleanup INT TERM EXIT
++ cd /argocd-e2e
++ oc new-project argocd-e2e-external
Now using project "argocd-e2e-external" on server "https://api.psi-413.ocp-gitops-qe.com:6443".

You can add applications to this project with the 'new-app' command. For example, try:

    oc new-app rails-postgresql-example

to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application:

    kubectl create deployment hello-node --image=registry.k8s.io/e2e-test-images/agnhost:2.43 -- /agnhost serve-hostname

++ oc new-project argocd-e2e
Now using project "argocd-e2e" on server "https://api.psi-413.ocp-gitops-qe.com:6443".

You can add applications to this project with the 'new-app' command. For example, try:

    oc new-app rails-postgresql-example

to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application:

    kubectl create deployment hello-node --image=registry.k8s.io/e2e-test-images/agnhost:2.43 -- /agnhost serve-hostname

++ oc apply -f config/YAMLs/argocd-test.yaml
argocd.argoproj.io/argocd-test created
++ [[ -z NAME                        PACKAGE                     SOURCE       CHANNEL
openshift-gitops-operator   openshift-gitops-operator   iib-asaleh   gitops-1.8 ]]
++ oc patch -n openshift-operators subscription openshift-gitops-operator --type merge --patch '{"spec": {"config": {"env": [{"name": "ARGOCD_CLUSTER_CONFIG_NAMESPACES", "value": "openshift-gitops, argocd-e2e"}]}}}'
subscription.operators.coreos.com/openshift-gitops-operator patched
+++ oc get argocd argocd-test -n argocd-e2e -o 'jsonpath={.status.phase}'
++ [[ Pending == \A\v\a\i\l\a\b\l\e ]]
++ echo 'Argo CD instance is reconcilling...'
Argo CD instance is reconcilling...
++ sleep 10
+++ oc get argocd argocd-test -n argocd-e2e -o 'jsonpath={.status.phase}'
++ [[ Available == \A\v\a\i\l\a\b\l\e ]]
++ echo 'Reconcilation Finished'
Reconcilation Finished
Argo CD instance is up and available.
++ break
++ echo 'Argo CD instance is up and available.'
++ cd /argocd-e2e/argo-cd
++ git fetch --tags -f
++ git checkout -f tags/v2.6.15
Note: switching to 'tags/v2.6.15'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by switching back to a branch.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -c with the switch command. Example:

  git switch -c <new-branch-name>

Or undo this operation with:

  git switch -

Turn off this advice by setting config variable advice.detachedHead to false

HEAD is now at 2f7922be9 Bump version to 2.6.15
++ export NAMESPACE=argocd-e2e
++ NAMESPACE=argocd-e2e
++ export ARGOCD_E2E_NAME_PREFIX=argocd-test
++ ARGOCD_E2E_NAME_PREFIX=argocd-test
++ cd /argocd-e2e/argo-cd/test/remote
++ sh generate-permissions.sh
++ oc apply -f -
clusterrole.rbac.authorization.k8s.io/argocd-test-argocd-application-controller created
clusterrolebinding.rbac.authorization.k8s.io/argocd-test-argocd-application-controller created
++ sudo make -C /argocd-e2e/argo-cd install-test-tools-local
sudo: unable to send audit message: Operation not permitted
make: Entering directory '/argocd-e2e/argo-cd'
make: go: Command not found
make: go: Command not found
which: no go in (/sbin:/bin:/usr/sbin:/usr/bin)
/bin/sh: go: command not found
which: no go in (/sbin:/bin:/usr/sbin:/usr/bin)
/bin/sh: go: command not found
./hack/install.sh kustomize
+ export DOWNLOADS=/tmp/dl
+ DOWNLOADS=/tmp/dl
+ export BIN=/usr/local/bin
+ BIN=/usr/local/bin
+ mkdir -p /tmp/dl
+ ARCHITECTURE=
+ case $(uname -m) in
++ uname -m
+ ARCHITECTURE=amd64
+ INSTALL_OS=
++ uname -s
+ unameOut=Linux
+ case "${unameOut}" in
+ INSTALL_OS=linux
+ for product in $*
++ dirname ./hack/install.sh
+ ARCHITECTURE=amd64
+ INSTALL_OS=linux
+ ./hack/installers/install-kustomize.sh
++ dirname ./hack/installers/install-kustomize.sh
+ . ./hack/installers/../tool-versions.sh
++ helm3_version=3.10.3
++ kubectl_version=1.17.8
++ kubectx_version=0.6.3
++ kustomize4_version=4.5.7
++ protoc_version=3.17.3
+++ dirname ./hack/installers/install-kustomize.sh
++ cd ./hack/installers/../..
++ pwd
+ PROJECT_ROOT=/argocd-e2e/argo-cd
+ INSTALL_PATH=/argocd-e2e/argo-cd/dist
+ PATH=/argocd-e2e/argo-cd/dist:/sbin:/bin:/usr/sbin:/usr/bin:/hack
+ '[' -d /argocd-e2e/argo-cd/dist ']'
+ mkdir -p /argocd-e2e/argo-cd/dist
+ KUSTOMIZE_VERSION=4.5.7
+ '[' -z linux ']'
+ case $ARCHITECTURE in
+ case $KUSTOMIZE_VERSION in
+ export TARGET_FILE=kustomize_4.5.7_linux_amd64.tar.gz
+ TARGET_FILE=kustomize_4.5.7_linux_amd64.tar.gz
+ URL=https://github.com/kubernetes-sigs/kustomize/releases/download/kustomize/v4.5.7/kustomize_v4.5.7_linux_amd64.tar.gz
+ BINNAME=kustomize
+ '[' -e /tmp/dl/kustomize_4.5.7_linux_amd64.tar.gz ']'
+ curl -sLf --retry 3 -o /tmp/dl/kustomize_4.5.7_linux_amd64.tar.gz https://github.com/kubernetes-sigs/kustomize/releases/download/kustomize/v4.5.7/kustomize_v4.5.7_linux_amd64.tar.gz
++ dirname ./hack/installers/install-kustomize.sh
+ ./hack/installers/compare-chksum.sh
+ test kustomize_4.5.7_linux_amd64.tar.gz = ''
+++ dirname ./hack/installers/compare-chksum.sh
++ cd ./hack/installers
++ pwd
+ CHKSUM_FILE=/argocd-e2e/argo-cd/hack/installers/checksums/kustomize_4.5.7_linux_amd64.tar.gz.sha256
+ cd /tmp/dl
+ test -f kustomize_4.5.7_linux_amd64.tar.gz
+ grep -q kustomize_4.5.7_linux_amd64.tar.gz /argocd-e2e/argo-cd/hack/installers/checksums/kustomize_4.5.7_linux_amd64.tar.gz.sha256
+ shasum -a 256 -c /argocd-e2e/argo-cd/hack/installers/checksums/kustomize_4.5.7_linux_amd64.tar.gz.sha256
kustomize_4.5.7_linux_amd64.tar.gz: OK
+ tar -C /tmp -xf /tmp/dl/kustomize_4.5.7_linux_amd64.tar.gz
+ sudo install -m 0755 /tmp/kustomize /argocd-e2e/argo-cd/dist/kustomize
sudo: unable to send audit message: Operation not permitted
+ kustomize version
{Version:kustomize/v4.5.7 GitCommit:56d82a8378dfc8dc3b3b1085e5a6e67b82966bd7 BuildDate:2022-08-02T16:35:54Z GoOs:linux GoArch:amd64}
./hack/install.sh helm-linux
+ export DOWNLOADS=/tmp/dl
+ DOWNLOADS=/tmp/dl
+ export BIN=/usr/local/bin
+ BIN=/usr/local/bin
+ mkdir -p /tmp/dl
+ ARCHITECTURE=
+ case $(uname -m) in
++ uname -m
+ ARCHITECTURE=amd64
+ INSTALL_OS=
++ uname -s
+ unameOut=Linux
+ case "${unameOut}" in
+ INSTALL_OS=linux
+ for product in $*
++ dirname ./hack/install.sh
+ ARCHITECTURE=amd64
+ INSTALL_OS=linux
+ ./hack/installers/install-helm-linux.sh
++ dirname ./hack/installers/install-helm-linux.sh
+ . ./hack/installers/../tool-versions.sh
++ helm3_version=3.10.3
++ kubectl_version=1.17.8
++ kubectx_version=0.6.3
++ kustomize4_version=4.5.7
++ protoc_version=3.17.3
+ export TARGET_FILE=helm-v3.10.3-linux-amd64.tar.gz
+ TARGET_FILE=helm-v3.10.3-linux-amd64.tar.gz
+ '[' -e /tmp/dl/helm-v3.10.3-linux-amd64.tar.gz ']'
+ curl -sLf --retry 3 -o /tmp/dl/helm-v3.10.3-linux-amd64.tar.gz https://get.helm.sh/helm-v3.10.3-linux-amd64.tar.gz
++ dirname ./hack/installers/install-helm-linux.sh
+ ./hack/installers/compare-chksum.sh
+ test helm-v3.10.3-linux-amd64.tar.gz = ''
+++ dirname ./hack/installers/compare-chksum.sh
++ cd ./hack/installers
++ pwd
+ CHKSUM_FILE=/argocd-e2e/argo-cd/hack/installers/checksums/helm-v3.10.3-linux-amd64.tar.gz.sha256
+ cd /tmp/dl
+ test -f helm-v3.10.3-linux-amd64.tar.gz
+ grep -q helm-v3.10.3-linux-amd64.tar.gz /argocd-e2e/argo-cd/hack/installers/checksums/helm-v3.10.3-linux-amd64.tar.gz.sha256
+ shasum -a 256 -c /argocd-e2e/argo-cd/hack/installers/checksums/helm-v3.10.3-linux-amd64.tar.gz.sha256
helm-v3.10.3-linux-amd64.tar.gz: OK
+ mkdir -p /tmp/helm
+ tar -C /tmp/helm -xf /tmp/dl/helm-v3.10.3-linux-amd64.tar.gz
+ sudo install -m 0755 /tmp/helm/linux-amd64/helm /usr/local/bin/helm
sudo: unable to send audit message: Operation not permitted
+ helm version --client
./hack/installers/install-helm-linux.sh: line 12: helm: command not found
make: *** [Makefile:547: install-test-tools-local] Error 127
make: Leaving directory '/argocd-e2e/argo-cd'
++ true
++ cd /argocd-e2e/argo-cd/test/remote
++ export IMAGE_NAMESPACE=quay.io/redhat-developer
++ IMAGE_NAMESPACE=quay.io/redhat-developer
++ make manifests
++ oc -n argocd-e2e adm policy add-scc-to-user privileged -z default
clusterrole.rbac.authorization.k8s.io/system:openshift:scc:privileged added: "default"
++ oc -n argocd-e2e apply -f /tmp/e2e-repositories.yaml
service/argocd-e2e-server created
deployment.apps/argocd-e2e-cluster created
++ sleep 60
++ PORT_FWD_PID=694
++ sleep 2
++ oc -n argocd-e2e port-forward service/argocd-e2e-server 9081:9081
Forwarding from 127.0.0.1:9081 -> 9081
Forwarding from [::1]:9081 -> 9081
++ oc -n openshift-operators scale deployment --replicas=0 gitops-operator-controller-manager
deployment.apps/gitops-operator-controller-manager scaled
+++ oc -n argocd-e2e get routes argocd-test-server -o 'jsonpath={.spec.host}'
++ export ARGOCD_SERVER=argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com
++ ARGOCD_SERVER=argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com
+++ oc -n argocd-e2e get secrets argocd-test-cluster -o 'jsonpath={.data.admin\.password}'
+++ base64 -d
++ export ARGOCD_E2E_ADMIN_PASSWORD=J3QcnyLs6kwTxhd50emMGrHPfBOUl2pj
++ ARGOCD_E2E_ADMIN_PASSWORD=J3QcnyLs6kwTxhd50emMGrHPfBOUl2pj
++ export ARGOCD_OPTS=--grpc-web
++ ARGOCD_OPTS=--grpc-web
++ oc patch secrets argocd-test-default-cluster-config -n argocd-e2e -p '{"data":{"namespaces":""}}'
secret/argocd-test-default-cluster-config patched
++ cd /argocd-e2e/argo-cd
++ sed -i 's/fixture.DefaultTestUserPassword, \"--plaintext\"/fixture.DefaultTestUserPassword/' test/e2e/fixture/account/actions.go
++ cd /argocd-e2e/argo-cd/
++ [[ -f test/e2e/custom_tool_test.go ]]
++ echo 'Patching CMP related tests to use MkdirAll instead of Mkdir'
Patching CMP related tests to use MkdirAll instead of Mkdir
++ sed -i s/os.Mkdir/os.MkdirAll/g test/e2e/custom_tool_test.go
++ cd /argocd-e2e
++ sh scripts/skip-unsupported-tests.sh
++ sleep 5
++ cd /argocd-e2e/argo-cd/hack/
++ sed -i s/-failfast//g test.sh
++ oc apply -f /argocd-e2e/config/YAMLs/appset_cluster_role_bindings.yaml
clusterrolebinding.rbac.authorization.k8s.io/full-admin-argocd-test-argocd-application-controller created
clusterrolebinding.rbac.authorization.k8s.io/full-admin-argocd-test-applicationset-controller created
+++ oc get subscription/openshift-gitops-operator -n openshift-operators -o 'jsonpath={.status.installedCSV}' --ignore-not-found
++ OPERATOR_NAME_VERSION=openshift-gitops-operator.v1.8.6
++ [[ ! -z openshift-gitops-operator.v1.8.6 ]]
+++ oc get csv/openshift-gitops-operator.v1.8.6 -n openshift-operators -o 'jsonpath={.spec.version}' --ignore-not-found
++ OPERATOR_VERSION=1.8.6
++ [[ -z 1.8.6 ]]
+++ echo 1.8.6
+++ awk -F '[ .]' '{print $1}'
++ OPERATOR_MAJOR_VERSION=1
+++ echo 1.8.6
+++ awk -F '[ .]' '{print $2}'
++ OPERATOR_MINOR_VERSION=8
++ '[' 1 -ge 1 ']'
++ '[' 8 -ge 6 ']'
++ sed -i 's/\bTestSimpleGitFilesPreserveResourcesOnDeletion\b/DontRunMeTestSimpleGitFilesPreserveResourcesOnDeletion/' /argocd-e2e/argo-cd/test/e2e/applicationset_test.go
++ oc apply -f https://raw.githubusercontent.com/open-cluster-management/api/a6845f2ebcb186ec26b832f60c988537a58f3859/cluster/v1alpha1/0000_04_clusters.open-cluster-management.io_placementdecisions.crd.yaml
customresourcedefinition.apiextensions.k8s.io/placementdecisions.cluster.open-cluster-management.io created
++ oc scale deployments argocd-test-applicationset-controller -n argocd-e2e --replicas=0
deployment.apps/argocd-test-applicationset-controller scaled
++ oc set env deploy/argocd-test-applicationset-controller -n argocd-e2e -c argocd-applicationset-controller ARGOCD_APPLICATIONSET_CONTROLLER_ALLOWED_SCM_PROVIDERS=https://github.com/
deployment.apps/argocd-test-applicationset-controller updated
++ oc set env deploy/argocd-test-applicationset-controller -n argocd-e2e -c argocd-applicationset-controller ARGOCD_APPLICATIONSET_CONTROLLER_NAMESPACES=argocd-e2e-external,argocd-e2e
deployment.apps/argocd-test-applicationset-controller updated
++ oc scale deployments argocd-test-applicationset-controller -n argocd-e2e --replicas=1
deployment.apps/argocd-test-applicationset-controller scaled
++ cd /argocd-e2e/argo-cd/test/remote
++ sh run-e2e-remote.sh make -C /argocd-e2e/argo-cd test-e2e-local ARGOCD_E2E_SKIP_GPG=true ARGOCD_E2E_SKIP_HELM2=true ARGOCD_E2E_SKIP_OPENSHIFT=true ARGOCD_E2E_SKIP_KSONNET=true ARGOCD_E2E_RECORD=/argocd-e2e/argocd_e2e_record
make[1]: Entering directory '/argocd-e2e/argo-cd'
find /argocd-e2e/argo-cd -name debug.test -exec rm -f {} +
CGO_ENABLED=0 go build -v -ldflags '-X github.com/argoproj/argo-cd/v2/common.version=2.6.15 -X github.com/argoproj/argo-cd/v2/common.buildDate=2023-11-03T12:49:39Z -X github.com/argoproj/argo-cd/v2/common.gitCommit=2f7922be9c8f364fec435eec4860b49279be77da -X github.com/argoproj/argo-cd/v2/common.gitTreeState=dirty -X github.com/argoproj/argo-cd/v2/common.kubectlVersion=v0.24.2 -extldflags "-static"' -o /argocd-e2e/argo-cd/dist/argocd ./cmd
go: downloading github.com/spf13/cobra v1.7.0
go: downloading google.golang.org/protobuf v1.28.1
go: downloading github.com/go-redis/redis/v8 v8.11.5
go: downloading github.com/prometheus/client_golang v1.14.0
go: downloading google.golang.org/grpc v1.51.0
go: downloading go.opentelemetry.io/otel/sdk v1.11.1
go: downloading go.opentelemetry.io/otel v1.11.1
go: downloading k8s.io/apimachinery v0.24.2
go: downloading github.com/aws/aws-sdk-go v1.44.290
go: downloading github.com/cyphar/filepath-securejoin v0.2.3
go: downloading github.com/argoproj/pkg v0.13.7-0.20230627120311-a4dd357b057e
go: downloading sigs.k8s.io/yaml v1.3.0
go: downloading k8s.io/client-go v0.24.2
go: downloading github.com/gogo/protobuf v1.3.2
go: downloading github.com/ghodss/yaml v1.0.0
go: downloading github.com/sirupsen/logrus v1.9.3
go: downloading github.com/google/shlex v0.0.0-20191202100458-e7afc7fbc510
go: downloading github.com/spf13/pflag v1.0.5
go: downloading github.com/argoproj/gitops-engine v0.7.1-0.20230512020822-b4dd8b8c3976
go: downloading go.opentelemetry.io/otel/exporters/otlp/otlptrace/otlptracegrpc v1.11.1
go: downloading github.com/grpc-ecosystem/go-grpc-middleware v1.3.0
go: downloading k8s.io/utils v0.0.0-20220210201930-3a6ce19ff2f9
go: downloading sigs.k8s.io/controller-runtime v0.11.0
go: downloading go.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc v0.31.0
go: downloading github.com/gorilla/mux v1.8.0
go: downloading github.com/grpc-ecosystem/go-grpc-prometheus v1.2.0
go: downloading github.com/grpc-ecosystem/grpc-gateway v1.16.0
go: downloading k8s.io/klog/v2 v2.70.1
go: downloading golang.org/x/oauth2 v0.0.0-20220608161450-d0670ef3b1eb
go: downloading golang.org/x/term v0.9.0
go: downloading github.com/pkg/errors v0.9.1
go: downloading github.com/improbable-eng/grpc-web v0.0.0-20181111100011-16092bd1d58a
go: downloading github.com/soheilhy/cmux v0.1.5
go: downloading k8s.io/kubectl v0.24.2
go: downloading github.com/argoproj/notifications-engine v0.4.1-0.20230228182525-f754726f03da
go: downloading github.com/gorilla/handlers v1.5.1
go: downloading github.com/golang/protobuf v1.4.2
go: downloading k8s.io/api v0.24.2
go: downloading github.com/mattn/go-zglob v0.0.4
go: downloading github.com/golang-jwt/jwt/v4 v4.4.3
go: downloading gopkg.in/yaml.v2 v2.4.0
go: downloading github.com/google/uuid v1.3.0
go: downloading github.com/fsnotify/fsnotify v1.5.1
go: downloading github.com/bombsimon/logrusr/v2 v2.0.1
go: downloading github.com/go-logr/logr v1.2.3
go: downloading github.com/go-git/go-git/v5 v5.4.2
go: downloading github.com/go-redis/cache/v8 v8.4.2
go: downloading github.com/patrickmn/go-cache v2.1.0+incompatible
go: downloading google.golang.org/genproto v0.0.0-20220107163113-42d7afdf6368
go: downloading go.opentelemetry.io/otel/exporters/otlp/otlptrace v1.11.1
go: downloading github.com/Masterminds/semver/v3 v3.2.0
go: downloading gopkg.in/go-playground/webhooks.v5 v5.17.0
go: downloading github.com/r3labs/diff v1.1.0
go: downloading github.com/TomOnTime/utfutil v0.0.0-20180511104225-09c41003ee1d
go: downloading github.com/evanphx/json-patch v5.6.0+incompatible
go: downloading github.com/google/go-jsonnet v0.19.1
go: downloading golang.org/x/sync v0.1.0
go: downloading github.com/kballard/go-shellquote v0.0.0-20180428030007-95032a82bc51
go: downloading github.com/bradleyfalzon/ghinstallation/v2 v2.1.0
go: downloading golang.org/x/crypto v0.10.0
go: downloading github.com/Masterminds/sprig/v3 v3.2.3
go: downloading github.com/valyala/fasttemplate v1.2.2
go: downloading github.com/gogits/go-gogs-client v0.0.0-20190616193657-5a05380e4bc2
go: downloading github.com/go-openapi/runtime v0.25.0
go: downloading github.com/gosimple/slug v1.13.1
go: downloading github.com/jeremywohl/flatten v1.0.1
go: downloading github.com/imdario/mergo v0.3.13
go: downloading github.com/hashicorp/go-retryablehttp v0.7.0
go: downloading github.com/coreos/go-oidc v2.2.1+incompatible
go: downloading github.com/google/go-cmp v0.5.9
go: downloading github.com/robfig/cron/v3 v3.0.1
go: downloading k8s.io/apiextensions-apiserver v0.24.2
go: downloading k8s.io/kube-openapi v0.0.0-20220627174259-011e075b9cb8
go: downloading github.com/Knetic/govaluate v3.0.1-0.20171022003610-9aa49832a739+incompatible
go: downloading github.com/casbin/casbin/v2 v2.60.0
go: downloading github.com/dustin/go-humanize v1.0.1
go: downloading github.com/mattn/go-isatty v0.0.16
go: downloading github.com/skratchdot/open-golang v0.0.0-20160302144031-75fb7ed4208c
go: downloading github.com/gorilla/websocket v1.4.2
go: downloading github.com/felixge/httpsnoop v1.0.3
go: downloading golang.org/x/sys v0.9.0
go: downloading github.com/klauspost/compress v1.16.5
go: downloading github.com/vmihailenco/go-tinylfu v0.2.1
go: downloading github.com/vmihailenco/msgpack/v5 v5.3.4
go: downloading golang.org/x/exp v0.0.0-20210901193431-a062eea981d2
go: downloading golang.org/x/net v0.11.0
go: downloading go.opentelemetry.io/otel/trace v1.11.1
go: downloading github.com/gobwas/glob v0.2.3
go: downloading golang.org/x/text v0.10.0
go: downloading github.com/google/go-github/v45 v45.2.0
go: downloading cloud.google.com/go v0.99.0
go: downloading github.com/cespare/xxhash/v2 v2.1.2
go: downloading github.com/dgryski/go-rendezvous v0.0.0-20200823014737-9f7001d12a5f
go: downloading gopkg.in/yaml.v3 v3.0.1
go: downloading github.com/PagerDuty/go-pagerduty v1.6.0
go: downloading github.com/RocketChat/Rocket.Chat.Go.SDK v0.0.0-20210112200207-10ab4d695d60
go: downloading github.com/google/go-github/v41 v41.0.0
go: downloading gomodules.xyz/notify v0.1.1
go: downloading github.com/valyala/bytebufferpool v1.0.0
go: downloading github.com/Masterminds/goutils v1.1.1
go: downloading golang.org/x/time v0.0.0-20220210224613-90d013bbcef8
go: downloading github.com/go-telegram-bot-api/telegram-bot-api/v5 v5.5.1
go: downloading github.com/shopspring/decimal v1.2.0
go: downloading github.com/opsgenie/opsgenie-go-sdk-v2 v1.0.5
go: downloading github.com/slack-go/slack v0.12.1
go: downloading github.com/huandu/xstrings v1.3.3
go: downloading github.com/gregdel/pushover v1.1.0
go: downloading github.com/mitchellh/copystructure v1.0.0
go: downloading github.com/whilp/git-urls v0.0.0-20191001220047-6db9661140c0
go: downloading github.com/spf13/cast v1.4.1
go: downloading github.com/yuin/gopher-lua v0.0.0-20220504180219-658193537a64
go: downloading layeh.com/gopher-json v0.0.0-20190114024228-97fed8db8427
go: downloading github.com/prometheus/client_model v0.3.0
go: downloading github.com/prometheus/common v0.37.0
go: downloading github.com/beorn7/perks v1.0.1
go: downloading github.com/prometheus/procfs v0.8.0
go: downloading go.opentelemetry.io/otel/exporters/otlp/internal/retry v1.11.1
go: downloading go.opentelemetry.io/proto/otlp v0.19.0
go: downloading github.com/rs/cors v1.8.0
go: downloading github.com/antonmedv/expr v1.9.0
go: downloading k8s.io/cli-runtime v0.24.2
go: downloading sigs.k8s.io/structured-merge-diff/v4 v4.2.3
go: downloading k8s.io/kube-aggregator v0.24.2
go: downloading code.gitea.io/sdk/gitea v0.15.1
go: downloading github.com/gfleury/go-bitbucket-v1 v0.0.0-20220301131131-8e7ed04b843e
go: downloading github.com/xanzy/go-gitlab v0.60.0
go: downloading github.com/google/go-github/v35 v35.3.0
go: downloading github.com/ktrysmt/go-bitbucket v0.9.55
go: downloading github.com/microsoft/azure-devops-go-api/azuredevops v1.0.0-b5
go: downloading github.com/gosimple/unidecode v1.0.1
go: downloading github.com/hashicorp/go-cleanhttp v0.5.2
go: downloading github.com/pquerna/cachecontrol v0.1.0
go: downloading gopkg.in/square/go-jose.v2 v2.6.0
go: downloading github.com/alicebob/miniredis/v2 v2.23.1
go: downloading github.com/go-openapi/analysis v0.21.4
go: downloading github.com/go-openapi/errors v0.20.2
go: downloading github.com/go-openapi/loads v0.21.2
go: downloading github.com/go-openapi/spec v0.20.6
go: downloading github.com/go-openapi/strfmt v0.21.3
go: downloading github.com/go-openapi/swag v0.21.1
go: downloading github.com/go-openapi/validate v0.21.0
go: downloading github.com/ProtonMail/go-crypto v0.0.0-20210428141323-04723f9f07d7
go: downloading github.com/go-git/go-billy/v5 v5.3.1
go: downloading github.com/sergi/go-diff v1.1.0
go: downloading github.com/mitchellh/go-homedir v1.1.0
go: downloading github.com/xanzy/ssh-agent v0.3.0
go: downloading github.com/kevinburke/ssh_config v0.0.0-20201106050909-4977a11b4351
go: downloading github.com/jbenet/go-context v0.0.0-20150711004518-d14ea06fba99
go: downloading github.com/google/gofuzz v1.1.0
go: downloading github.com/vmihailenco/tagparser/v2 v2.0.0
go: downloading k8s.io/kubernetes v1.24.2
go: downloading gopkg.in/inf.v0 v0.9.1
go: downloading github.com/itchyny/gojq v0.12.9
go: downloading github.com/go-logr/stdr v1.2.2
go: downloading gomodules.xyz/envconfig v1.3.1-0.20190308184047-426f31af0d45
go: downloading github.com/mitchellh/reflectwalk v1.0.0
go: downloading gopkg.in/gomail.v2 v2.0.0-20160411212932-81ebce5c23df
go: downloading github.com/cenkalti/backoff/v4 v4.1.3
go: downloading github.com/grpc-ecosystem/grpc-gateway/v2 v2.7.0
go: downloading github.com/google/go-querystring v1.1.0
go: downloading github.com/matttproud/golang_protobuf_extensions v1.0.2-0.20181231171920-c182affec369
go: downloading github.com/json-iterator/go v1.1.12
go: downloading github.com/liggitt/tabwriter v0.0.0-20181228230101-89fcab3d43de
go: downloading github.com/google/gnostic v0.5.7-v3refs
go: downloading sigs.k8s.io/kustomize/api v0.11.4
go: downloading sigs.k8s.io/kustomize/kyaml v0.13.6
go: downloading github.com/mitchellh/mapstructure v1.4.3
go: downloading github.com/hashicorp/go-version v1.2.1
go: downloading sigs.k8s.io/json v0.0.0-20211208200746-9f7c6b3444d2
go: downloading github.com/alicebob/gopher-json v0.0.0-20200520072559-a9ecdc9d1d3a
go: downloading github.com/emirpasic/gods v1.12.0
go: downloading github.com/go-git/gcfg v1.5.0
go: downloading github.com/mailru/easyjson v0.7.7
go: downloading github.com/emicklei/go-restful/v3 v3.8.0
go: downloading github.com/go-openapi/jsonreference v0.20.0
go: downloading github.com/asaskevich/govalidator v0.0.0-20210307081110-f21760c49a8d
go: downloading github.com/oklog/ulid v1.3.1
go: downloading go.mongodb.org/mongo-driver v1.10.0
go: downloading github.com/mitchellh/go-wordwrap v1.0.0
go: downloading github.com/moby/term v0.0.0-20210619224110-3f7ff695adc6
go: downloading github.com/jonboulle/clockwork v0.2.2
go: downloading k8s.io/component-helpers v0.24.2
go: downloading k8s.io/component-base v0.24.2
go: downloading github.com/davecgh/go-spew v1.1.1
go: downloading github.com/itchyny/timefmt-go v0.1.4
go: downloading github.com/go-openapi/jsonpointer v0.19.5
go: downloading gomodules.xyz/jsonpatch/v2 v2.2.0
go: downloading github.com/modern-go/concurrent v0.0.0-20180306012644-bacd9c7ef1dd
go: downloading github.com/modern-go/reflect2 v1.0.2
go: downloading gopkg.in/warnings.v0 v0.1.2
go: downloading github.com/josharian/intern v1.0.0
go: downloading github.com/chai2010/gettext-go v0.0.0-20170215093142-bf70f2a70fb1
go: downloading github.com/exponent-io/jsonpath v0.0.0-20151013193312-d6023ce2651d
go: downloading github.com/MakeNowJust/heredoc v0.0.0-20170808103936-bb23615498cd
go: downloading github.com/russross/blackfriday v1.5.2
go: downloading github.com/fatih/camelcase v1.0.0
go: downloading github.com/fvbommel/sortorder v1.0.1
go: downloading github.com/monochromegane/go-gitignore v0.0.0-20200626010858-205db1a8cc00
go: downloading github.com/stretchr/testify v1.8.4
go: downloading github.com/xlab/treeprint v0.0.0-20181112141820-a009c3971eca
go: downloading github.com/go-errors/errors v1.0.1
go: downloading go.starlark.net v0.0.0-20200306205701-8dd3e2ee1dd5
go: downloading github.com/pmezard/go-difflib v1.0.0
go: downloading github.com/golang/groupcache v0.0.0-20210331224755-41bb18bfe9da
go: downloading github.com/Azure/go-autorest/autorest v0.11.18
go: downloading github.com/gregjones/httpcache v0.0.0-20190611155906-901d90724c79
go: downloading github.com/Azure/go-autorest/autorest/adal v0.9.13
go: downloading github.com/peterbourgon/diskv v2.0.1+incompatible
go: downloading github.com/moby/spdystream v0.2.0
go: downloading github.com/munnerz/goautoneg v0.0.0-20191010083416-a7dc8b61c822
go: downloading github.com/google/btree v1.0.1
go: downloading github.com/Azure/go-autorest v14.2.0+incompatible
go: downloading github.com/Azure/go-autorest/tracing v0.6.0
go: downloading github.com/Azure/go-autorest/logger v0.2.1
go: downloading github.com/Azure/go-autorest/autorest/date v0.3.0
go: downloading github.com/form3tech-oss/jwt-go v3.2.3+incompatible
go: downloading k8s.io/apiserver v0.24.2
go: downloading github.com/docker/distribution v2.8.1+incompatible
go: downloading github.com/opencontainers/go-digest v1.0.0
go: downloading github.com/jmespath/go-jmespath v0.4.0
github.com/dgryski/go-rendezvous
golang.org/x/text/internal/utf8internal
google.golang.org/protobuf/internal/set
go.mongodb.org/mongo-driver/bson/bsontype
google.golang.org/protobuf/internal/flags
github.com/fatih/camelcase
github.com/argoproj/argo-cd/v2/pkg/apis/application
k8s.io/apimachinery/pkg/selection
github.com/gobwas/glob/util/runes
golang.org/x/crypto/internal/alias
github.com/ProtonMail/go-crypto/internal/byteutil
github.com/go-git/go-git/v5/plumbing/color
k8s.io/utils/strings/slices
k8s.io/apimachinery/pkg/types
github.com/argoproj/gitops-engine/pkg/utils/text
github.com/golang/groupcache/lru
sigs.k8s.io/kustomize/kyaml/sliceutil
github.com/argoproj/gitops-engine/pkg/utils/json
sigs.k8s.io/kustomize/kyaml/sets
github.com/vmihailenco/msgpack/v5/msgpcode
sigs.k8s.io/kustomize/kyaml/ext
github.com/vmihailenco/tagparser/v2/internal
golang.org/x/text/encoding/internal/identifier
github.com/google/go-cmp/cmp/internal/flags
sigs.k8s.io/kustomize/kyaml/yaml/internal/k8sgen/pkg/selection
github.com/fvbommel/sortorder
google.golang.org/grpc/serviceconfig
github.com/casbin/casbin/v2/constant
go.opentelemetry.io/otel/sdk/instrumentation
k8s.io/utils/buffer
go.opentelemetry.io/otel/internal
github.com/aws/aws-sdk-go/internal/sdkmath
github.com/alicebob/miniredis/v2/geohash
github.com/slack-go/slack/internal/errorsx
k8s.io/utils/integer
k8s.io/client-go/util/exec
github.com/microsoft/azure-devops-go-api/azuredevops/system
google.golang.org/grpc/attributes
gomodules.xyz/notify
go.mongodb.org/mongo-driver/bson/bsonoptions
github.com/aws/aws-sdk-go/aws/client/metadata
google.golang.org/protobuf/internal/pragma
github.com/gogo/protobuf/sortkeys
github.com/argoproj/pkg/sync
golang.org/x/text/transform
github.com/go-redis/redis/v8/internal/rand
k8s.io/klog/v2/internal/dbg
golang.org/x/crypto/cast5
github.com/ProtonMail/go-crypto/openpgp/errors
k8s.io/kubectl/pkg/cmd/util/editor/crlf
github.com/liggitt/tabwriter
github.com/jonboulle/clockwork
k8s.io/klog/v2/internal/clock
k8s.io/apimachinery/pkg/util/rand
google.golang.org/grpc/internal/buffer
github.com/valyala/bytebufferpool
k8s.io/utils/clock
plugin
github.com/josharian/intern
github.com/mitchellh/go-wordwrap
github.com/go-redis/redis/v8/internal/util
golang.org/x/crypto/openpgp/errors
google.golang.org/grpc/backoff
k8s.io/kube-openapi/pkg/internal/handler
google.golang.org/grpc/internal/grpcsync
github.com/go-logr/logr
sigs.k8s.io/kustomize/api/konfig/builtinpluginconsts
github.com/beorn7/perks/quantile
golang.org/x/net/context
k8s.io/kubectl/pkg/util/slice
golang.org/x/crypto/blowfish
k8s.io/klog/v2/internal/severity
github.com/gobwas/glob/util/strings
github.com/munnerz/goautoneg
github.com/kballard/go-shellquote
go.starlark.net/internal/spell
github.com/chai2010/gettext-go/gettext/plural
sigs.k8s.io/structured-merge-diff/v4/schema
sigs.k8s.io/kustomize/kyaml/yaml/internal/k8sgen/pkg/util/sets
google.golang.org/grpc/internal/grpcrand
google.golang.org/grpc/keepalive
google.golang.org/grpc/tap
github.com/argoproj/argo-cd/v2/util/text
github.com/grpc-ecosystem/go-grpc-middleware/util/backoffutils
github.com/modern-go/reflect2
github.com/argoproj/argo-cd/v2/util/collections
k8s.io/apimachinery/pkg/util/sets
github.com/prometheus/common/internal/bitbucket.org/ww/goautoneg
go.opentelemetry.io/otel/internal/baggage
github.com/argoproj/argo-cd/v2/util/stats
go.opentelemetry.io/otel/internal/attribute
golang.org/x/sync/semaphore
golang.org/x/crypto/chacha20
golang.org/x/crypto/curve25519/internal/field
github.com/ProtonMail/go-crypto/eax
golang.org/x/crypto/internal/poly1305
github.com/cespare/xxhash/v2
github.com/go-git/go-git/v5/internal/url
github.com/google/go-cmp/cmp/internal/function
crypto/sha1
sigs.k8s.io/kustomize/api/image
k8s.io/apimachinery/pkg/version
golang.org/x/exp/rand
golang.org/x/sys/unix
github.com/vmihailenco/tagparser/v2/internal/parser
google.golang.org/protobuf/internal/detrand
github.com/cenkalti/backoff/v4
google.golang.org/grpc/codes
google.golang.org/protobuf/internal/version
github.com/pkg/errors
github.com/argoproj/gitops-engine/pkg/utils/io
github.com/google/go-querystring/query
net
github.com/ProtonMail/go-crypto/openpgp/aes/keywrap
github.com/ProtonMail/go-crypto/ocb
golang.org/x/crypto/ed25519
github.com/argoproj/pkg/rand
golang.org/x/crypto/openpgp/elgamal
github.com/ProtonMail/go-crypto/bitcurves
github.com/ProtonMail/go-crypto/brainpool
github.com/ProtonMail/go-crypto/openpgp/elgamal
github.com/go-git/go-billy/v5
github.com/go-git/gcfg/token
github.com/go-git/gcfg/types
gopkg.in/warnings.v0
github.com/mitchellh/go-homedir
github.com/go-git/go-git/v5/internal/revision
github.com/go-git/go-git/v5/plumbing/filemode
github.com/emirpasic/gods/utils
github.com/sergi/go-diff/diffmatchpatch
github.com/go-git/go-git/v5/utils/merkletrie/noder
github.com/go-git/go-git/v5/plumbing/format/pktline
golang.org/x/sys/execabs
github.com/go-git/go-git/v5/plumbing/protocol/packp/capability
os/user
github.com/imdario/mergo
github.com/patrickmn/go-cache
golang.org/x/oauth2/jws
github.com/google/gofuzz
gopkg.in/inf.v0
k8s.io/apimachinery/third_party/forked/golang/reflect
github.com/gogo/protobuf/proto
k8s.io/apimachinery/pkg/fields
github.com/ProtonMail/go-crypto/openpgp/armor
github.com/ProtonMail/go-crypto/openpgp/internal/encoding
k8s.io/klog/v2/internal/buffer
k8s.io/apimachinery/pkg/conversion/queryparams
k8s.io/apimachinery/pkg/util/naming
sigs.k8s.io/json/internal/golang/encoding/json
gopkg.in/yaml.v2
golang.org/x/text/unicode/bidi
golang.org/x/net/http2/hpack
github.com/gobwas/glob/match
github.com/modern-go/concurrent
github.com/gobwas/glob/syntax/lexer
github.com/go-redis/redis/v8/internal/hashtag
github.com/Masterminds/semver/v3
golang.org/x/crypto/openpgp/s2k
github.com/go-redis/redis/v8/internal/hscan
golang.org/x/crypto/openpgp/armor
golang.org/x/text/unicode/norm
github.com/jbenet/go-context/io
github.com/go-redis/redis/v8/internal/proto
golang.org/x/sync/singleflight
github.com/go-redis/redis/v8/internal
github.com/davecgh/go-spew/spew
github.com/klauspost/compress/s2
k8s.io/apimachinery/pkg/util/framer
k8s.io/utils/pointer
github.com/opencontainers/go-digest
k8s.io/apimachinery/third_party/forked/golang/json
gopkg.in/yaml.v3
golang.org/x/sync/errgroup
github.com/argoproj/gitops-engine/pkg/utils/tracing
golang.org/x/crypto/ssh/internal/bcrypt_pbkdf
k8s.io/klog/v2/internal/serialize
k8s.io/apimachinery/pkg/util/duration
k8s.io/client-go/third_party/forked/golang/template
golang.org/x/text/encoding
golang.org/x/text/runes
k8s.io/client-go/tools/metrics
golang.org/x/time/rate
k8s.io/utils/clock/testing
k8s.io/client-go/pkg/version
github.com/emicklei/go-restful/v3/log
github.com/mailru/easyjson/jlexer
github.com/go-openapi/jsonreference/internal
github.com/go-errors/errors
sigs.k8s.io/kustomize/kyaml/yaml/internal/k8sgen/pkg/util/errors
sigs.k8s.io/kustomize/kyaml/internal/forked/github.com/go-yaml/yaml
sigs.k8s.io/kustomize/kyaml/openapi/kustomizationapi
sigs.k8s.io/kustomize/kyaml/openapi/kubernetesapi/v1212
github.com/monochromegane/go-gitignore
google.golang.org/protobuf/internal/errors
github.com/pmezard/go-difflib/difflib
github.com/xlab/treeprint
github.com/vmihailenco/tagparser/v2
github.com/argoproj/argo-cd/v2/resource_customizations
sigs.k8s.io/kustomize/api/internal/kusterr
github.com/go-git/go-billy/v5/helper/polyfill
github.com/go-git/go-billy/v5/util
github.com/google/shlex
go.starlark.net/syntax
sigs.k8s.io/kustomize/api/provenance
github.com/argoproj/pkg/time
github.com/evanphx/json-patch
sigs.k8s.io/kustomize/kyaml/filesys
github.com/google/btree
github.com/ProtonMail/go-crypto/openpgp/internal/algorithm
k8s.io/client-go/util/homedir
k8s.io/component-base/version
github.com/chai2010/gettext-go/gettext/mo
github.com/go-git/go-git/v5/utils/merkletrie/internal/frame
github.com/chai2010/gettext-go/gettext/po
github.com/emirpasic/gods/containers
github.com/MakeNowJust/heredoc
github.com/russross/blackfriday
github.com/go-git/go-git/v5/plumbing/protocol/packp/sideband
github.com/go-git/gcfg/scanner
k8s.io/apimachinery/third_party/forked/golang/netutil
k8s.io/kubectl/pkg/util/interrupt
github.com/exponent-io/jsonpath
k8s.io/utils/exec
github.com/ProtonMail/go-crypto/openpgp/internal/ecc
k8s.io/apimachinery/pkg/util/cache
github.com/google/go-cmp/cmp/internal/diff
github.com/google/go-cmp/cmp/internal/value
github.com/robfig/cron/v3
golang.org/x/net/internal/timeseries
github.com/kevinburke/ssh_config
k8s.io/apimachinery/pkg/util/errors
archive/tar
google.golang.org/grpc/internal/grpclog
google.golang.org/grpc/metadata
google.golang.org/grpc/internal/envconfig
github.com/go-git/go-git/v5/utils/ioutil
google.golang.org/grpc/internal/backoff
go.opentelemetry.io/otel/codes
github.com/grpc-ecosystem/grpc-gateway/utilities
go.opentelemetry.io/otel/attribute
k8s.io/apimachinery/pkg/conversion
github.com/go-logr/logr/funcr
go.opentelemetry.io/otel/baggage
github.com/argoproj/argo-cd/v2/util
golang.org/x/crypto/pbkdf2
golang.org/x/crypto/bcrypt
github.com/argoproj/argo-cd/v2/util/text/label
github.com/r3labs/diff
github.com/gobwas/glob/syntax/ast
github.com/prometheus/procfs/internal/fs
k8s.io/klog/v2
github.com/prometheus/common/model
github.com/prometheus/procfs/internal/util
github.com/docker/distribution/digestset
github.com/yuin/gopher-lua/pm
github.com/yuin/gopher-lua/ast
github.com/itchyny/timefmt-go
github.com/argoproj/argo-cd/v2/util/rand
go.opentelemetry.io/otel/exporters/otlp/internal/retry
github.com/grpc-ecosystem/grpc-gateway/v2/utilities
github.com/argoproj/argo-cd/v2/applicationset/services/github_app_auth
github.com/hashicorp/go-version
github.com/go-git/go-git/v5/utils/diff
github.com/Masterminds/goutils
google.golang.org/protobuf/encoding/protowire
github.com/mitchellh/reflectwalk
sigs.k8s.io/kustomize/kyaml/errors
golang.org/x/text/encoding/internal
github.com/huandu/xstrings
sigs.k8s.io/kustomize/kyaml/yaml/internal/k8sgen/pkg/util/validation/field
k8s.io/client-go/util/flowcontrol
github.com/shopspring/decimal
github.com/go-git/go-billy/v5/helper/chroot
github.com/emirpasic/gods/lists
github.com/emirpasic/gods/trees
github.com/spf13/cast
github.com/valyala/fasttemplate
github.com/vmihailenco/msgpack/v5
sigs.k8s.io/controller-runtime/pkg/log
github.com/go-git/go-git/v5/utils/merkletrie
github.com/jeremywohl/flatten
sigs.k8s.io/controller-runtime/pkg/reconcile
github.com/gosimple/unidecode
github.com/ProtonMail/go-crypto/openpgp/s2k
gomodules.xyz/jsonpatch/v2
sigs.k8s.io/kustomize/kyaml/openapi/kubernetesapi
sigs.k8s.io/controller-runtime/pkg/ratelimiter
sigs.k8s.io/controller-runtime/pkg/manager/signals
k8s.io/client-go/util/jsonpath
golang.org/x/crypto/curve25519
github.com/vmihailenco/go-tinylfu
github.com/argoproj/argo-cd/v2/util/buffered_context
github.com/cyphar/filepath-securejoin
github.com/argoproj/gitops-engine/internal/kubernetes_vendor/pkg/util/hash
github.com/mattn/go-zglob/fastwalk
github.com/argoproj/argo-cd/v2/assets
github.com/peterbourgon/diskv
github.com/Knetic/govaluate
github.com/go-git/gcfg
github.com/casbin/casbin/v2/effector
golang.org/x/text/secure/bidirule
github.com/casbin/casbin/v2/errors
github.com/casbin/casbin/v2/log
github.com/casbin/casbin/v2/config
github.com/casbin/casbin/v2/persist/cache
gopkg.in/square/go-jose.v2/cipher
gopkg.in/square/go-jose.v2/json
github.com/google/go-jsonnet/ast
github.com/aws/aws-sdk-go/aws/awserr
k8s.io/apimachinery/pkg/util/validation/field
github.com/aws/aws-sdk-go/internal/shareddefaults
github.com/aws/aws-sdk-go/internal/sync/singleflight
golang.org/x/crypto/scrypt
github.com/aws/aws-sdk-go/internal/sdkio
google.golang.org/grpc/grpclog
github.com/argoproj/argo-cd/v2/util/password
github.com/jmespath/go-jmespath
golang.org/x/crypto/openpgp/packet
github.com/go-git/go-git/v5/plumbing
github.com/aws/aws-sdk-go/internal/sdkrand
github.com/aws/aws-sdk-go/internal/strings
github.com/chai2010/gettext-go/gettext
google.golang.org/grpc/internal/grpcutil
google.golang.org/grpc/internal/balancerload
github.com/google/go-cmp/cmp
github.com/docker/distribution/reference
github.com/grpc-ecosystem/go-grpc-middleware/util/metautils
github.com/aws/aws-sdk-go/internal/sdkuri
github.com/argoproj/notifications-engine/pkg/util/text
github.com/gobwas/glob/syntax
github.com/gobwas/glob/compiler
github.com/whilp/git-urls
github.com/argoproj/argo-cd/v2/util/notification/expression/strings
github.com/grpc-ecosystem/grpc-gateway/v2/internal/httprule
github.com/argoproj/argo-cd/v2/util/notification/expression/time
github.com/yuin/gopher-lua/parse
github.com/slack-go/slack/internal/backoff
github.com/emirpasic/gods/lists/arraylist
github.com/slack-go/slack/slackutilsx
github.com/slack-go/slack/internal/timex
github.com/RocketChat/Rocket.Chat.Go.SDK/models
github.com/mitchellh/copystructure
sigs.k8s.io/json
google.golang.org/protobuf/reflect/protoreflect
golang.org/x/text/encoding/unicode
gomodules.xyz/envconfig
github.com/argoproj/argo-cd/v2/util/hash
github.com/antonmedv/expr/file
github.com/go-openapi/analysis/internal/debug
go.opentelemetry.io/otel/trace
github.com/argoproj/argo-cd/v2/ui
github.com/oklog/ulid
go.mongodb.org/mongo-driver/bson/primitive
github.com/alicebob/miniredis/v2/metro
github.com/go-openapi/runtime/logger
github.com/Azure/go-autorest/autorest/date
sigs.k8s.io/controller-runtime/pkg/internal/log
golang.org/x/crypto/pkcs12/internal/rc2
github.com/gosimple/slug
github.com/ProtonMail/go-crypto/openpgp/ecdh
github.com/go-logr/stdr
go.starlark.net/resolve
github.com/argoproj/argo-cd/v2/util/templates
github.com/skratchdot/open-golang/open
github.com/dustin/go-humanize
github.com/argoproj/argo-cd/v2/util/assets
github.com/itchyny/gojq
golang.org/x/net/idna
github.com/mattn/go-zglob
github.com/aws/aws-sdk-go/internal/ini
github.com/argoproj/argo-cd/v2/util/crypto
github.com/aws/aws-sdk-go/aws/endpoints
github.com/casbin/casbin/v2/rbac
k8s.io/klog/v2/klogr
k8s.io/utils/trace
github.com/gregjones/httpcache/diskcache
google.golang.org/grpc/encoding
github.com/go-git/go-git/v5/plumbing/format/config
google.golang.org/grpc/connectivity
github.com/go-git/go-git/v5/utils/binary
github.com/go-git/go-git/v5/utils/merkletrie/filesystem
github.com/go-git/go-git/v5/plumbing/cache
github.com/go-git/go-git/v5/plumbing/format/diff
github.com/emirpasic/gods/trees/binaryheap
sigs.k8s.io/yaml
github.com/ghodss/yaml
k8s.io/apimachinery/pkg/util/json
github.com/gobwas/glob
k8s.io/kubernetes/pkg/util/parsers
k8s.io/kubectl/pkg/util/i18n
github.com/antonmedv/expr/vm
github.com/antonmedv/expr/parser/lexer
github.com/antonmedv/expr/ast
github.com/google/go-jsonnet/internal/errors
github.com/TomOnTime/utfutil
github.com/alicebob/miniredis/v2/hyperloglog
github.com/google/go-jsonnet/astgen
github.com/aws/aws-sdk-go/aws/awsutil
github.com/google/gnostic/jsonschema
go.mongodb.org/mongo-driver/x/bsonx/bsoncore
github.com/go-git/go-git/v5/plumbing/format/index
github.com/ProtonMail/go-crypto/openpgp/packet
github.com/go-git/go-git/v5/plumbing/format/idxfile
google.golang.org/protobuf/internal/descfmt
google.golang.org/protobuf/internal/descopts
google.golang.org/protobuf/internal/encoding/messageset
google.golang.org/protobuf/internal/order
google.golang.org/protobuf/internal/strs
google.golang.org/grpc/encoding/gzip
google.golang.org/protobuf/runtime/protoiface
github.com/google/go-jsonnet/internal/parser
google.golang.org/protobuf/internal/genid
github.com/go-git/go-git/v5/plumbing/format/gitignore
go.starlark.net/internal/compile
github.com/yuin/gopher-lua
github.com/go-git/go-billy/v5/osfs
golang.org/x/term
github.com/sirupsen/logrus
github.com/mattn/go-isatty
github.com/fsnotify/fsnotify
github.com/moby/term
golang.org/x/crypto/openpgp
k8s.io/apimachinery/pkg/util/yaml
k8s.io/apimachinery/pkg/util/mergepatch
crypto/x509
net/textproto
vendor/golang.org/x/net/http/httpproxy
k8s.io/utils/internal/third_party/forked/golang/net
github.com/casbin/casbin/v2/util
github.com/google/uuid
sigs.k8s.io/kustomize/kyaml/yaml/internal/k8sgen/pkg/util/validation
golang.org/x/net/internal/socks
k8s.io/client-go/util/connrotation
google.golang.org/grpc/internal/syscall
github.com/mailru/easyjson/buffer
google.golang.org/grpc/stats
github.com/mitchellh/mapstructure
github.com/antonmedv/expr/parser
github.com/go-redis/redis/v8/internal/pool
github.com/json-iterator/go
github.com/aws/aws-sdk-go/aws/credentials
github.com/spf13/pflag
github.com/argoproj/notifications-engine/pkg/util/misc
google.golang.org/protobuf/reflect/protoregistry
github.com/prometheus/procfs
google.golang.org/protobuf/internal/encoding/json
google.golang.org/protobuf/internal/encoding/text
github.com/go-git/go-git/v5/plumbing/storer
github.com/go-git/go-git/v5/utils/merkletrie/index
k8s.io/apimachinery/pkg/util/jsonmergepatch
k8s.io/utils/net
github.com/mailru/easyjson/jwriter
github.com/casbin/casbin/v2/rbac/default-role-manager
github.com/casbin/casbin/v2/model
vendor/golang.org/x/net/http/httpguts
mime/multipart
net/mail
golang.org/x/net/http/httpguts
k8s.io/apimachinery/pkg/util/diff
github.com/go-git/go-git/v5/config
sigs.k8s.io/kustomize/kyaml/yaml/internal/k8sgen/pkg/labels
github.com/aws/aws-sdk-go/aws/credentials/processcreds
k8s.io/apimachinery/pkg/util/uuid
golang.org/x/net/proxy
google.golang.org/protobuf/proto
github.com/go-git/go-git/v5/plumbing/format/packfile
go.starlark.net/starlark
k8s.io/apimachinery/pkg/util/validation
github.com/argoproj/argo-cd/v2/util/env
github.com/bombsimon/logrusr/v2
github.com/argoproj/pkg/exec
go.mongodb.org/mongo-driver/bson/bsonrw
github.com/argoproj/pkg/stats
github.com/argoproj/argo-cd/v2/util/glob
github.com/argoproj/argo-cd/v2/util/io/path
github.com/argoproj/argo-cd/v2/util/io
github.com/argoproj/argo-cd/v2/util/errors
github.com/argoproj/argo-cd/v2/util/io/files
google.golang.org/protobuf/internal/encoding/defval
github.com/google/go-jsonnet/internal/program
k8s.io/apimachinery/pkg/api/resource
github.com/gogo/protobuf/protoc-gen-gogo/descriptor
k8s.io/apimachinery/pkg/runtime/schema
github.com/argoproj/argo-cd/v2/server/settings/oidc
k8s.io/apimachinery/pkg/util/intstr
github.com/antonmedv/expr/conf
github.com/gogo/protobuf/types
github.com/argoproj/argo-cd/v2/util/security
github.com/casbin/casbin/v2/persist
github.com/go-git/go-git/v5/storage
k8s.io/apimachinery/pkg/labels
github.com/ProtonMail/go-crypto/openpgp
github.com/antonmedv/expr/compiler
github.com/antonmedv/expr/checker
github.com/antonmedv/expr/optimizer
github.com/go-git/go-git/v5/storage/memory
k8s.io/kubectl/pkg/apps
github.com/argoproj/argo-cd/v2/util/app/path
github.com/casbin/casbin/v2/persist/file-adapter
github.com/argoproj/argo-cd/v2/util/tgzstream
google.golang.org/protobuf/internal/filedesc
crypto/tls
k8s.io/kubectl/pkg/util/certificate
k8s.io/client-go/util/keyutil
google.golang.org/protobuf/encoding/prototext
github.com/golang-jwt/jwt/v4
github.com/asaskevich/govalidator
golang.org/x/crypto/pkcs12
gopkg.in/square/go-jose.v2
github.com/form3tech-oss/jwt-go
github.com/Masterminds/sprig/v3
golang.org/x/crypto/ssh
github.com/go-git/go-git/v5/plumbing/format/objfile
github.com/go-git/go-git/v5/plumbing/protocol/packp
github.com/antonmedv/expr
github.com/casbin/casbin/v2
k8s.io/component-base/featuregate
github.com/spf13/cobra
github.com/argoproj/notifications-engine/pkg/triggers
github.com/go-git/go-git/v5/storage/filesystem/dotgit
github.com/gogo/protobuf/gogoproto
github.com/go-git/go-git/v5/plumbing/object
k8s.io/apiserver/pkg/util/feature
sigs.k8s.io/structured-merge-diff/v4/value
go.mongodb.org/mongo-driver/bson/bsoncodec
github.com/argoproj/argo-cd/v2/util/jwt
github.com/go-git/go-git/v5/plumbing/transport
github.com/go-git/go-git/v5/plumbing/transport/internal/common
github.com/go-git/go-git/v5/storage/filesystem
google.golang.org/protobuf/internal/encoding/tag
google.golang.org/protobuf/encoding/protojson
go.starlark.net/starlarkstruct
layeh.com/gopher-json
github.com/go-git/go-git/v5/plumbing/transport/git
github.com/alicebob/gopher-json
google.golang.org/protobuf/internal/impl
github.com/go-git/go-git/v5/plumbing/revlist
sigs.k8s.io/kustomize/kyaml/internal/forked/github.com/qri-io/starlib/util
github.com/go-git/go-git/v5/plumbing/transport/server
sigs.k8s.io/structured-merge-diff/v4/fieldpath
github.com/go-git/go-git/v5/plumbing/transport/file
github.com/gogo/protobuf/jsonpb
go.mongodb.org/mongo-driver/bson
net/http/httptrace
net/smtp
github.com/argoproj/argo-cd/v2/util/tls
go.opentelemetry.io/otel/exporters/otlp/internal/envconfig
github.com/alicebob/miniredis/v2/server
sigs.k8s.io/controller-runtime/pkg/certwatcher
google.golang.org/grpc/internal/credentials
k8s.io/client-go/util/cert
k8s.io/component-base/cli/flag
github.com/go-redis/redis/v8
golang.org/x/crypto/ssh/knownhosts
golang.org/x/crypto/ssh/agent
net/http
sigs.k8s.io/structured-merge-diff/v4/typed
gopkg.in/gomail.v2
github.com/alicebob/miniredis/v2
github.com/xanzy/ssh-agent
github.com/go-git/go-git/v5/plumbing/transport/ssh
gomodules.xyz/notify/smtp
sigs.k8s.io/structured-merge-diff/v4/merge
k8s.io/client-go/applyconfigurations/internal
google.golang.org/protobuf/internal/filetype
google.golang.org/protobuf/runtime/protoimpl
google.golang.org/protobuf/types/known/durationpb
google.golang.org/protobuf/types/known/timestamppb
go.opentelemetry.io/proto/otlp/common/v1
google.golang.org/protobuf/types/descriptorpb
github.com/golang/protobuf/proto
google.golang.org/protobuf/types/known/wrapperspb
google.golang.org/protobuf/types/known/fieldmaskpb
google.golang.org/protobuf/types/known/emptypb
google.golang.org/protobuf/types/known/anypb
github.com/golang/protobuf/ptypes/timestamp
github.com/golang/protobuf/ptypes/empty
github.com/golang/protobuf/ptypes/duration
google.golang.org/genproto/googleapis/rpc/errdetails
google.golang.org/genproto/protobuf/field_mask
github.com/golang/protobuf/ptypes/wrappers
google.golang.org/genproto/googleapis/rpc/status
github.com/golang/protobuf/ptypes/any
google.golang.org/genproto/googleapis/api/httpbody
go.opentelemetry.io/proto/otlp/resource/v1
go.opentelemetry.io/proto/otlp/trace/v1
github.com/golang/protobuf/protoc-gen-go/descriptor
google.golang.org/protobuf/reflect/protodesc
google.golang.org/genproto/googleapis/api/annotations
github.com/google/go-jsonnet
google.golang.org/grpc/credentials
github.com/golang/protobuf/ptypes
google.golang.org/grpc/encoding/proto
github.com/grpc-ecosystem/grpc-gateway/internal
github.com/prometheus/client_model/go
github.com/golang/protobuf/jsonpb
google.golang.org/grpc/binarylog/grpc_binarylog_v1
github.com/matttproud/golang_protobuf_extensions/pbutil
google.golang.org/grpc/credentials/insecure
google.golang.org/grpc/internal/channelz
google.golang.org/grpc/peer
google.golang.org/grpc/internal/status
github.com/google/gnostic/extensions
google.golang.org/grpc/status
github.com/prometheus/client_golang/prometheus/internal
github.com/argoproj/argo-cd/v2/common
github.com/grpc-ecosystem/go-grpc-middleware/logging
google.golang.org/grpc/internal/binarylog
github.com/golang/protobuf/descriptor
google.golang.org/grpc/internal/pretty
google.golang.org/grpc/channelz
google.golang.org/grpc/resolver
github.com/argoproj/argo-cd/v2/util/log
github.com/argoproj/argo-cd/v2/util/cert
github.com/argoproj/argo-cd/v2/util/exec
google.golang.org/grpc/balancer/grpclb/state
google.golang.org/grpc/internal/metadata
google.golang.org/grpc/internal/resolver/passthrough
google.golang.org/grpc/internal
google.golang.org/grpc/internal/transport/networktype
google.golang.org/grpc/internal/resolver/unix
google.golang.org/grpc/internal/resolver/dns
google.golang.org/grpc/balancer
google.golang.org/grpc/internal/serviceconfig
github.com/argoproj/argo-cd/v2/util/proxy
golang.org/x/net/context/ctxhttp
google.golang.org/grpc/balancer/base
github.com/go-git/go-git/v5/plumbing/transport/http
cloud.google.com/go/compute/metadata
k8s.io/apimachinery/pkg/util/runtime
github.com/argoproj/argo-cd/v2/util/config
net/http/httptest
net/http/httputil
k8s.io/apimachinery/pkg/util/httpstream
github.com/google/gnostic/compiler
go.opentelemetry.io/otel/semconv/internal
github.com/moby/spdystream/spdy
golang.org/x/net/trace
github.com/pquerna/cachecontrol/cacheobject
github.com/emicklei/go-restful/v3
github.com/microsoft/azure-devops-go-api/azuredevops
net/http/pprof
net/http/cookiejar
expvar
github.com/hashicorp/go-cleanhttp
github.com/go-openapi/swag
github.com/grpc-ecosystem/grpc-gateway/runtime
sigs.k8s.io/controller-runtime/pkg/healthz
sigs.k8s.io/controller-runtime/pkg/internal/httpserver
golang.org/x/net/http2
github.com/argoproj/argo-cd/v2/util/healthz
gopkg.in/go-playground/webhooks.v5/bitbucket-server
github.com/felixge/httpsnoop
github.com/Azure/go-autorest/logger
gopkg.in/go-playground/webhooks.v5/github
github.com/prometheus/common/expfmt
gopkg.in/go-playground/webhooks.v5/bitbucket
gopkg.in/go-playground/webhooks.v5/gitlab
go.opentelemetry.io/otel/propagation
github.com/Azure/go-autorest/tracing
github.com/go-openapi/runtime/middleware/denco
github.com/go-openapi/runtime/middleware/header
github.com/gorilla/websocket
github.com/RocketChat/Rocket.Chat.Go.SDK/rest
github.com/go-telegram-bot-api/telegram-bot-api/v5
github.com/go-openapi/errors
github.com/gregdel/pushover
github.com/rs/cors
github.com/gorilla/mux
github.com/grpc-ecosystem/grpc-gateway/v2/runtime
github.com/gogits/go-gogs-client
code.gitea.io/sdk/gitea
github.com/google/go-github/v45/github
github.com/PagerDuty/go-pagerduty
github.com/google/go-github/v35/github
github.com/google/go-github/v41/github
google.golang.org/grpc/internal/resolver
github.com/hashicorp/go-retryablehttp
golang.org/x/oauth2/internal
github.com/argoproj/argo-cd/v2/util/localconfig
google.golang.org/grpc/internal/balancer/gracefulswitch
google.golang.org/grpc/balancer/roundrobin
go.opentelemetry.io/otel/internal/global
github.com/moby/spdystream
k8s.io/apiserver/pkg/features
k8s.io/apimachinery/pkg/util/wait
go.opentelemetry.io/otel/semconv/v1.6.1
go.opentelemetry.io/otel/semconv/v1.7.0
github.com/argoproj/argo-cd/v2/util/profile
github.com/pquerna/cachecontrol
github.com/Azure/go-autorest/autorest/adal
k8s.io/client-go/util/workqueue
go.opentelemetry.io/otel/semconv/v1.12.0
k8s.io/apimachinery/pkg/runtime
github.com/go-git/go-git/v5/plumbing/transport/client
github.com/microsoft/azure-devops-go-api/azuredevops/webapi
github.com/microsoft/azure-devops-go-api/azuredevops/operations
github.com/google/gnostic/openapiv2
github.com/google/gnostic/openapiv3
k8s.io/kubernetes/pkg/features
github.com/go-openapi/strfmt
go.opentelemetry.io/otel/sdk/internal/env
go.opentelemetry.io/otel
golang.org/x/oauth2
github.com/stretchr/testify/assert
github.com/gregjones/httpcache
github.com/argoproj/argo-cd/v2/util/http
github.com/gorilla/handlers
github.com/argoproj/notifications-engine/pkg/util/http
github.com/go-git/go-git/v5
github.com/go-openapi/jsonpointer
github.com/microsoft/azure-devops-go-api/azuredevops/policy
github.com/microsoft/azure-devops-go-api/azuredevops/delegatedauthorization
gopkg.in/go-playground/webhooks.v5/gogs
github.com/opsgenie/opsgenie-go-sdk-v2/client
golang.org/x/oauth2/authhandler
golang.org/x/oauth2/jwt
golang.org/x/oauth2/bitbucket
golang.org/x/oauth2/clientcredentials
go.opentelemetry.io/otel/sdk/internal
github.com/coreos/go-oidc
go.opentelemetry.io/otel/exporters/otlp/internal
golang.org/x/oauth2/google/internal/externalaccount
github.com/gfleury/go-bitbucket-v1
github.com/prometheus/client_golang/prometheus
github.com/go-openapi/jsonreference
go.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc/internal
github.com/microsoft/azure-devops-go-api/azuredevops/identity
github.com/slack-go/slack
github.com/xanzy/go-gitlab
github.com/argoproj/pkg/grpc/http
github.com/ktrysmt/go-bitbucket
go.opentelemetry.io/otel/sdk/resource
github.com/go-openapi/spec
github.com/Azure/go-autorest/autorest
github.com/opsgenie/opsgenie-go-sdk-v2/alert
golang.org/x/oauth2/google
github.com/aws/aws-sdk-go/aws
github.com/microsoft/azure-devops-go-api/azuredevops/core
github.com/go-openapi/runtime
k8s.io/apimachinery/pkg/runtime/serializer/recognizer
k8s.io/apimachinery/pkg/runtime/serializer/streaming
sigs.k8s.io/controller-runtime/pkg/conversion
k8s.io/kubectl/pkg/generate
k8s.io/client-go/tools/clientcmd/api
go.opentelemetry.io/otel/sdk/trace
github.com/stretchr/testify/require
k8s.io/apimachinery/pkg/runtime/serializer/json
github.com/microsoft/azure-devops-go-api/azuredevops/git
github.com/aws/aws-sdk-go/aws/request
github.com/go-openapi/runtime/security
k8s.io/client-go/tools/clientcmd/api/v1
github.com/Azure/go-autorest/autorest/azure
github.com/soheilhy/cmux
k8s.io/apimachinery/pkg/util/net
google.golang.org/grpc/internal/transport
github.com/go-openapi/analysis/internal/flatten/normalize
github.com/go-openapi/analysis/internal/flatten/schutils
github.com/go-openapi/analysis/internal/flatten/operations
github.com/go-openapi/analysis/internal/flatten/replace
github.com/aws/aws-sdk-go/aws/csm
github.com/aws/aws-sdk-go/aws/corehandlers
github.com/aws/aws-sdk-go/private/protocol
github.com/aws/aws-sdk-go/aws/client
go.opentelemetry.io/otel/exporters/otlp/otlptrace/internal/tracetransform
github.com/prometheus/client_golang/prometheus/promhttp
github.com/prometheus/client_golang/prometheus/collectors
github.com/go-openapi/analysis/internal/flatten/sortref
go.opentelemetry.io/otel/exporters/otlp/otlptrace
github.com/aws/aws-sdk-go/aws/ec2metadata
github.com/aws/aws-sdk-go/private/protocol/rest
github.com/aws/aws-sdk-go/private/protocol/query/queryutil
github.com/aws/aws-sdk-go/private/protocol/json/jsonutil
github.com/aws/aws-sdk-go/private/protocol/xml/xmlutil
k8s.io/apimachinery/pkg/watch
k8s.io/client-go/transport
github.com/go-openapi/analysis
github.com/aws/aws-sdk-go/aws/credentials/ec2rolecreds
github.com/aws/aws-sdk-go/aws/credentials/endpointcreds
k8s.io/apimachinery/pkg/apis/meta/v1
github.com/aws/aws-sdk-go/private/protocol/jsonrpc
github.com/aws/aws-sdk-go/aws/signer/v4
github.com/aws/aws-sdk-go/private/protocol/query
github.com/aws/aws-sdk-go/aws/defaults
github.com/aws/aws-sdk-go/private/protocol/restjson
github.com/go-redis/cache/v8
github.com/argoproj/argo-cd/v2/server/metrics
github.com/argoproj/argo-cd/v2/util/cache
github.com/go-openapi/loads
github.com/aws/aws-sdk-go/service/sts
github.com/aws/aws-sdk-go/service/sso
github.com/go-openapi/runtime/middleware/untyped
github.com/go-openapi/validate
github.com/argoproj/notifications-engine/pkg/util/slack
google.golang.org/grpc
github.com/argoproj/argo-cd/v2/util/helm
github.com/aws/aws-sdk-go/service/sso/ssoiface
github.com/aws/aws-sdk-go/aws/credentials/ssocreds
github.com/aws/aws-sdk-go/service/sts/stsiface
github.com/aws/aws-sdk-go/aws/credentials/stscreds
k8s.io/kube-openapi/pkg/util/proto
k8s.io/kube-openapi/pkg/validation/spec
github.com/aws/aws-sdk-go/aws/session
k8s.io/kube-openapi/pkg/schemaconv
k8s.io/kube-openapi/pkg/util/proto/validation
github.com/go-openapi/runtime/middleware
k8s.io/kube-openapi/pkg/schemamutation
k8s.io/kube-openapi/pkg/spec3
sigs.k8s.io/kustomize/kyaml/yaml
k8s.io/kube-openapi/pkg/builder3/util
k8s.io/kube-openapi/pkg/openapiconv
google.golang.org/grpc/health/grpc_health_v1
go.opentelemetry.io/proto/otlp/collector/trace/v1
google.golang.org/grpc/reflection/grpc_reflection_v1alpha
go.opentelemetry.io/otel/exporters/otlp/otlptrace/internal/otlpconfig
github.com/grpc-ecosystem/go-grpc-middleware
github.com/improbable-eng/grpc-web/go/grpcweb
github.com/grpc-ecosystem/go-grpc-middleware/retry
github.com/argoproj/argo-cd/v2/pkg/apiclient/version
github.com/argoproj/argo-cd/v2/pkg/apiclient/session
go.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc
github.com/grpc-ecosystem/go-grpc-prometheus
github.com/argoproj/argo-cd/v2/pkg/apiclient/notification
github.com/argoproj/argo-cd/v2/pkg/apiclient/account
k8s.io/kube-openapi/pkg/common
github.com/argoproj/argo-cd/v2/util/swagger
github.com/grpc-ecosystem/go-grpc-middleware/auth
github.com/grpc-ecosystem/go-grpc-middleware/tags
k8s.io/kube-openapi/pkg/handler3
sigs.k8s.io/kustomize/api/filters/filtersutil
sigs.k8s.io/kustomize/kyaml/order
sigs.k8s.io/kustomize/api/hasher
sigs.k8s.io/kustomize/kyaml/openapi
sigs.k8s.io/kustomize/kyaml/kio/kioutil
google.golang.org/grpc/reflection
google.golang.org/grpc/health
github.com/grpc-ecosystem/go-grpc-middleware/logging/logrus/ctxlogrus
go.opentelemetry.io/otel/exporters/otlp/otlptrace/otlptracegrpc
github.com/grpc-ecosystem/go-grpc-middleware/tags/logrus
github.com/grpc-ecosystem/go-grpc-middleware/logging/logrus
sigs.k8s.io/kustomize/kyaml/kio
k8s.io/apimachinery/pkg/runtime/serializer/protobuf
k8s.io/apimachinery/pkg/apis/meta/v1/unstructured
k8s.io/apimachinery/pkg/api/errors
k8s.io/kubernetes/pkg/apis/imagepolicy
k8s.io/kubernetes/pkg/apis/coordination
k8s.io/api/authentication/v1beta1
k8s.io/api/policy/v1
k8s.io/api/flowcontrol/v1beta1
k8s.io/apimachinery/pkg/apis/meta/v1/validation
k8s.io/api/apiserverinternal/v1alpha1
k8s.io/apimachinery/pkg/api/equality
k8s.io/kubernetes/pkg/apis/admissionregistration
k8s.io/api/coordination/v1
k8s.io/component-base/config
k8s.io/kubernetes/pkg/apis/rbac
k8s.io/client-go/pkg/apis/clientauthentication
k8s.io/api/authorization/v1beta1
k8s.io/kube-aggregator/pkg/apis/apiregistration
k8s.io/apimachinery/pkg/apis/meta/v1beta1
k8s.io/api/rbac/v1beta1
k8s.io/api/flowcontrol/v1beta2
k8s.io/api/flowcontrol/v1alpha1
k8s.io/apimachinery/pkg/util/remotecommand
k8s.io/kubernetes/pkg/apis/authorization
k8s.io/apimachinery/pkg/api/meta
k8s.io/client-go/rest/watch
k8s.io/apiextensions-apiserver/pkg/apis/apiextensions
k8s.io/kubernetes/pkg/apis/authentication
k8s.io/api/authorization/v1
k8s.io/api/coordination/v1beta1
sigs.k8s.io/controller-runtime/pkg/scheme
k8s.io/kubernetes/pkg/apis/flowcontrol
k8s.io/api/authentication/v1
k8s.io/api/imagepolicy/v1alpha1
k8s.io/api/admissionregistration/v1
k8s.io/api/rbac/v1
k8s.io/api/rbac/v1alpha1
k8s.io/api/admissionregistration/v1beta1
k8s.io/api/core/v1
github.com/bradleyfalzon/ghinstallation/v2
sigs.k8s.io/kustomize/kyaml/resid
sigs.k8s.io/kustomize/kyaml/yaml/schema
sigs.k8s.io/kustomize/kyaml/fieldmeta
github.com/argoproj/argo-cd/v2/util/trace
k8s.io/component-base/config/v1alpha1
k8s.io/client-go/util/retry
github.com/argoproj/argo-cd/v2/util/grpc
k8s.io/client-go/pkg/apis/clientauthentication/v1
k8s.io/client-go/pkg/apis/clientauthentication/v1beta1
k8s.io/kube-aggregator/pkg/apis/apiregistration/v1
k8s.io/kube-aggregator/pkg/apis/apiregistration/v1beta1
k8s.io/kubernetes/pkg/apis/admission
k8s.io/apimachinery/pkg/apis/meta/internalversion
sigs.k8s.io/kustomize/kyaml/yaml/walk
sigs.k8s.io/kustomize/api/types
github.com/argoproj/argo-cd/v2/util/git
github.com/argoproj/notifications-engine/pkg/services
github.com/argoproj/argo-cd/v2/applicationset/services/internal/github_app
k8s.io/kubernetes/pkg/apis/coordination/v1
github.com/argoproj/gitops-engine/pkg/sync/resource
k8s.io/apimachinery/pkg/runtime/serializer/versioning
github.com/argoproj/argo-cd/v2/util/resource
github.com/argoproj/argo-cd/v2/util/argo/managedfields
k8s.io/apimachinery/pkg/util/strategicpatch
k8s.io/apiextensions-apiserver/pkg/apis/apiextensions/v1
k8s.io/apiextensions-apiserver/pkg/apis/apiextensions/v1beta1
k8s.io/kubernetes/pkg/apis/coordination/v1beta1
k8s.io/kubernetes/pkg/apis/authentication/v1beta1
k8s.io/kubernetes/pkg/apis/imagepolicy/v1alpha1
k8s.io/client-go/pkg/apis/clientauthentication/install
github.com/argoproj/argo-cd/v2/cmd/argocd-k8s-auth/commands
sigs.k8s.io/kustomize/api/filters/patchjson6902
sigs.k8s.io/kustomize/api/filters/valueadd
sigs.k8s.io/controller-runtime/pkg/config/v1alpha1
k8s.io/kubernetes/pkg/apis/core
k8s.io/client-go/tools/clientcmd/api/latest
k8s.io/apimachinery/pkg/runtime/serializer
k8s.io/apimachinery/pkg/apis/meta/v1/unstructured/unstructuredscheme
sigs.k8s.io/kustomize/kyaml/yaml/merge2
sigs.k8s.io/kustomize/kyaml/comments
sigs.k8s.io/kustomize/kyaml/yaml/merge3
k8s.io/kubernetes/pkg/apis/authentication/v1
k8s.io/api/admission/v1beta1
k8s.io/api/admission/v1
k8s.io/kubectl/pkg/util/fieldpath
k8s.io/client-go/tools/pager
k8s.io/apimachinery/pkg/util/managedfields
k8s.io/apimachinery/pkg/api/validation
k8s.io/cli-runtime/pkg/printers
k8s.io/kubectl/pkg/util/prune
sigs.k8s.io/kustomize/api/konfig
sigs.k8s.io/kustomize/api/ifc
sigs.k8s.io/kustomize/api/filters/iampolicygenerator
k8s.io/kubernetes/pkg/apis/admissionregistration/v1beta1
k8s.io/kubernetes/pkg/apis/admissionregistration/v1
github.com/argoproj/argo-cd/v2/reposerver/askpass
github.com/argoproj/argo-cd/v2/reposerver/metrics
sigs.k8s.io/kustomize/kyaml/fn/runtime/runtimeutil
k8s.io/kubernetes/pkg/apis/rbac/v1alpha1
k8s.io/kubectl/pkg/util/rbac
k8s.io/component-helpers/auth/rbac/validation
k8s.io/kubernetes/pkg/apis/rbac/v1
k8s.io/kubernetes/pkg/api/legacyscheme
k8s.io/apimachinery/pkg/util/httpstream/spdy
sigs.k8s.io/kustomize/api/internal/validate
k8s.io/apimachinery/pkg/apis/meta/internalversion/scheme
sigs.k8s.io/kustomize/api/internal/generators
sigs.k8s.io/kustomize/api/internal/plugins/builtinconfig
sigs.k8s.io/kustomize/api/kv
sigs.k8s.io/controller-runtime/pkg/config
k8s.io/client-go/plugin/pkg/client/auth/exec
k8s.io/kubernetes/pkg/apis/authorization/v1beta1
sigs.k8s.io/kustomize/api/internal/utils
k8s.io/kubernetes/pkg/apis/rbac/v1beta1
sigs.k8s.io/kustomize/api/filters/patchstrategicmerge
sigs.k8s.io/kustomize/kyaml/kio/filters
k8s.io/kubernetes/pkg/apis/coordination/install
k8s.io/kubernetes/pkg/apis/imagepolicy/install
k8s.io/kubernetes/pkg/apis/authentication/install
k8s.io/kubernetes/pkg/apis/flowcontrol/v1alpha1
github.com/argoproj/gitops-engine/pkg/diff/internal/fieldmanager
sigs.k8s.io/kustomize/api/filters/fieldspec
sigs.k8s.io/kustomize/api/internal/git
sigs.k8s.io/kustomize/kyaml/fn/runtime/exec
k8s.io/kubernetes/pkg/apis/authorization/v1
github.com/argoproj/argo-cd/v2/cmd/argocd-git-ask-pass/commands
k8s.io/kubernetes/pkg/apis/flowcontrol/v1beta2
k8s.io/kubernetes/pkg/apis/admission/v1
k8s.io/kubernetes/pkg/apis/admission/v1beta1
github.com/argoproj/notifications-engine/pkg/templates
github.com/argoproj/notifications-engine/pkg/subscriptions
sigs.k8s.io/kustomize/api/filters/fsslice
sigs.k8s.io/kustomize/api/filters/replicacount
sigs.k8s.io/kustomize/api/filters/refvar
sigs.k8s.io/kustomize/api/filters/suffix
sigs.k8s.io/kustomize/api/filters/prefix
k8s.io/kubernetes/pkg/apis/flowcontrol/v1beta1
sigs.k8s.io/kustomize/kyaml/fn/runtime/container
sigs.k8s.io/kustomize/kyaml/fn/runtime/starlark
k8s.io/client-go/rest
k8s.io/kubernetes/pkg/apis/rbac/install
k8s.io/kubernetes/pkg/apis/admissionregistration/install
sigs.k8s.io/kustomize/api/loader
sigs.k8s.io/kustomize/api/resource
sigs.k8s.io/kustomize/api/filters/annotations
sigs.k8s.io/kustomize/api/filters/namespace
sigs.k8s.io/kustomize/api/filters/labels
sigs.k8s.io/kustomize/api/filters/imagetag
k8s.io/kubernetes/pkg/apis/authorization/install
k8s.io/kubernetes/pkg/apis/admission/install
sigs.k8s.io/kustomize/kyaml/runfn
k8s.io/kubernetes/pkg/apis/flowcontrol/install
sigs.k8s.io/kustomize/api/filters/replacement
sigs.k8s.io/kustomize/api/provider
sigs.k8s.io/kustomize/api/resmap
k8s.io/client-go/dynamic
k8s.io/client-go/openapi
k8s.io/client-go/tools/auth
k8s.io/client-go/transport/spdy
github.com/argoproj/pkg/kubeclientmetrics
k8s.io/client-go/plugin/pkg/client/auth/gcp
k8s.io/client-go/metadata
k8s.io/client-go/rest/fake
k8s.io/client-go/plugin/pkg/client/auth/azure
k8s.io/client-go/plugin/pkg/client/auth/oidc
k8s.io/client-go/testing
k8s.io/client-go/tools/cache
sigs.k8s.io/kustomize/api/internal/builtins
sigs.k8s.io/kustomize/api/internal/plugins/utils
sigs.k8s.io/kustomize/api/filters/nameref
k8s.io/client-go/tools/clientcmd
sigs.k8s.io/kustomize/api/internal/plugins/execplugin
sigs.k8s.io/kustomize/api/internal/plugins/fnplugin
k8s.io/client-go/openapi/cached
sigs.k8s.io/kustomize/api/internal/accumulator
sigs.k8s.io/kustomize/api/internal/plugins/builtinhelpers
k8s.io/client-go/discovery/fake
sigs.k8s.io/kustomize/api/internal/plugins/loader
k8s.io/apiextensions-apiserver/pkg/client/clientset/clientset/scheme
sigs.k8s.io/controller-runtime/pkg/webhook/conversion
k8s.io/apiextensions-apiserver/pkg/client/clientset/clientset/typed/apiextensions/v1beta1
k8s.io/apiextensions-apiserver/pkg/client/clientset/clientset/typed/apiextensions/v1
sigs.k8s.io/controller-runtime/pkg/client/config
sigs.k8s.io/kustomize/api/internal/target
k8s.io/kubernetes/pkg/apis/events
k8s.io/kubernetes/pkg/apis/discovery
k8s.io/kubernetes/pkg/apis/batch
k8s.io/kubernetes/pkg/apis/node
k8s.io/kubernetes/pkg/apis/certificates
k8s.io/kubernetes/pkg/apis/autoscaling
k8s.io/kubernetes/pkg/apis/policy
k8s.io/kubernetes/pkg/apis/networking
k8s.io/kubernetes/pkg/apis/scheduling
k8s.io/kubernetes/pkg/apis/storage
k8s.io/client-go/tools/watch
sigs.k8s.io/controller-runtime/pkg/metrics
sigs.k8s.io/kustomize/api/krusty
k8s.io/kubernetes/pkg/apis/policy/v1
k8s.io/kubernetes/pkg/apis/apps
sigs.k8s.io/controller-runtime/pkg/webhook/internal/metrics
sigs.k8s.io/controller-runtime/pkg/internal/controller/metrics
k8s.io/kubernetes/pkg/apis/extensions
github.com/argoproj/gitops-engine/internal/kubernetes_vendor/pkg/api/v1/endpoints
k8s.io/client-go/tools/reference
k8s.io/kubectl/pkg/cmd/util/podcmd
k8s.io/kubectl/pkg/util/event
k8s.io/kubectl/pkg/util/resource
k8s.io/kubectl/pkg/util/qos
k8s.io/client-go/tools/record/util
k8s.io/kubectl/pkg/util/podutils
k8s.io/kubectl/pkg/util/hash
k8s.io/kubectl/pkg/util/storage
k8s.io/client-go/tools/portforward
k8s.io/api/certificates/v1beta1
k8s.io/api/scheduling/v1alpha1
k8s.io/api/batch/v1
k8s.io/api/events/v1
k8s.io/api/node/v1
k8s.io/api/scheduling/v1
k8s.io/api/scheduling/v1beta1
k8s.io/api/certificates/v1
k8s.io/api/node/v1beta1
k8s.io/api/autoscaling/v1
k8s.io/api/apps/v1
k8s.io/api/discovery/v1
k8s.io/api/autoscaling/v2
k8s.io/kubectl/pkg/util
k8s.io/api/autoscaling/v2beta2
k8s.io/client-go/tools/remotecommand
k8s.io/api/autoscaling/v2beta1
k8s.io/api/discovery/v1beta1
k8s.io/api/networking/v1
k8s.io/api/storage/v1
k8s.io/api/apps/v1beta1
k8s.io/api/storage/v1beta1
k8s.io/api/events/v1beta1
k8s.io/api/storage/v1alpha1
k8s.io/api/policy/v1beta1
k8s.io/api/node/v1alpha1
k8s.io/api/networking/v1beta1
k8s.io/api/apps/v1beta2
k8s.io/kubernetes/pkg/apis/core/v1
k8s.io/client-go/listers/core/v1
k8s.io/client-go/tools/record
k8s.io/kubectl/pkg/util/term
k8s.io/kubernetes/pkg/apis/scheduling/v1
k8s.io/kubernetes/pkg/apis/scheduling/v1alpha1
k8s.io/kubernetes/pkg/apis/scheduling/v1beta1
k8s.io/kubernetes/pkg/apis/node/v1beta1
k8s.io/kubernetes/pkg/apis/node/v1
k8s.io/kubernetes/pkg/apis/certificates/v1beta1
k8s.io/kubernetes/pkg/apis/node/v1alpha1
k8s.io/kubernetes/pkg/apis/discovery/v1beta1
k8s.io/kubernetes/pkg/apis/scheduling/install
k8s.io/kubernetes/pkg/apis/certificates/v1
github.com/argoproj/argo-cd/v2/util/cli
k8s.io/kubectl/pkg/util/templates
sigs.k8s.io/controller-runtime/pkg/recorder
k8s.io/kubernetes/pkg/apis/discovery/v1
k8s.io/kubernetes/pkg/apis/node/install
github.com/argoproj/notifications-engine/pkg/api
k8s.io/kubernetes/pkg/apis/certificates/install
k8s.io/kubernetes/pkg/apis/discovery/install
github.com/argoproj/argo-cd/v2/cmd/argocd/commands/initialize
k8s.io/api/batch/v1beta1
github.com/argoproj/argo-cd/v2/server/notification
github.com/argoproj/notifications-engine/pkg/controller
k8s.io/kubernetes/pkg/apis/autoscaling/v2
k8s.io/kubernetes/pkg/apis/autoscaling/v2beta1
k8s.io/kubernetes/pkg/apis/autoscaling/v1
k8s.io/client-go/scale/scheme
k8s.io/kubernetes/pkg/apis/policy/v1beta1
k8s.io/client-go/scale/scheme/autoscalingv1
k8s.io/kubernetes/pkg/apis/autoscaling/v2beta2
k8s.io/client-go/scale/scheme/appsv1beta1
k8s.io/api/extensions/v1beta1
k8s.io/kubernetes/pkg/apis/policy/install
k8s.io/kubernetes/pkg/apis/autoscaling/install
k8s.io/client-go/scale/scheme/appsint
k8s.io/client-go/scale/scheme/appsv1beta2
k8s.io/kubernetes/pkg/apis/core/install
k8s.io/kubernetes/pkg/apis/events/v1
k8s.io/kubernetes/pkg/apis/storage/v1alpha1
k8s.io/kubernetes/pkg/apis/batch/v1
k8s.io/kubernetes/pkg/apis/events/v1beta1
k8s.io/kubernetes/pkg/apis/storage/v1beta1
k8s.io/kubernetes/pkg/apis/networking/v1beta1
k8s.io/kubernetes/pkg/apis/storage/v1
k8s.io/kubernetes/pkg/apis/networking/v1
k8s.io/kubernetes/pkg/apis/apps/v1beta1
k8s.io/kubernetes/pkg/apis/apps/v1beta2
k8s.io/kubernetes/pkg/apis/apps/v1
k8s.io/kubernetes/pkg/apis/events/install
k8s.io/kubernetes/pkg/apis/networking/install
k8s.io/kubernetes/pkg/apis/batch/v1beta1
k8s.io/kubernetes/pkg/apis/storage/install
k8s.io/kubernetes/pkg/apis/apps/install
k8s.io/kubernetes/pkg/apis/batch/install
k8s.io/client-go/kubernetes/scheme
k8s.io/client-go/scale/scheme/extensionsint
k8s.io/client-go/scale/scheme/extensionsv1beta1
k8s.io/kubernetes/pkg/apis/extensions/v1beta1
k8s.io/kubectl/pkg/scheme
k8s.io/client-go/discovery
k8s.io/client-go/kubernetes/typed/authentication/v1
k8s.io/client-go/kubernetes/typed/authentication/v1beta1
k8s.io/client-go/kubernetes/typed/authorization/v1beta1
k8s.io/client-go/kubernetes/typed/authorization/v1
k8s.io/client-go/kubernetes/typed/authentication/v1/fake
k8s.io/client-go/kubernetes/typed/authorization/v1/fake
k8s.io/client-go/kubernetes/typed/authentication/v1beta1/fake
k8s.io/client-go/kubernetes/typed/authorization/v1beta1/fake
k8s.io/apiextensions-apiserver/pkg/client/clientset/clientset
k8s.io/client-go/discovery/cached/disk
k8s.io/client-go/restmapper
k8s.io/kubectl/pkg/util/openapi
k8s.io/client-go/scale
k8s.io/client-go/applyconfigurations/meta/v1
k8s.io/kubectl/pkg/util/openapi/validation
k8s.io/kubernetes/pkg/apis/extensions/install
k8s.io/client-go/applyconfigurations/admissionregistration/v1beta1
k8s.io/client-go/applyconfigurations/coordination/v1
k8s.io/client-go/applyconfigurations/certificates/v1
k8s.io/client-go/applyconfigurations/coordination/v1beta1
k8s.io/client-go/applyconfigurations/scheduling/v1beta1
k8s.io/client-go/applyconfigurations/apiserverinternal/v1alpha1
k8s.io/client-go/applyconfigurations/scheduling/v1alpha1
k8s.io/client-go/applyconfigurations/scheduling/v1
k8s.io/client-go/applyconfigurations/certificates/v1beta1
k8s.io/client-go/applyconfigurations/policy/v1
k8s.io/client-go/applyconfigurations/autoscaling/v1
k8s.io/client-go/applyconfigurations/admissionregistration/v1
k8s.io/client-go/applyconfigurations/autoscaling/v2
k8s.io/client-go/applyconfigurations/rbac/v1beta1
k8s.io/client-go/applyconfigurations/rbac/v1
k8s.io/client-go/applyconfigurations/rbac/v1alpha1
k8s.io/client-go/applyconfigurations/autoscaling/v2beta1
k8s.io/client-go/applyconfigurations/flowcontrol/v1alpha1
k8s.io/client-go/applyconfigurations/flowcontrol/v1beta2
k8s.io/client-go/applyconfigurations/autoscaling/v2beta2
k8s.io/client-go/applyconfigurations/flowcontrol/v1beta1
sigs.k8s.io/controller-runtime/pkg/client/apiutil
k8s.io/cli-runtime/pkg/resource
github.com/argoproj/gitops-engine/pkg/utils/kube/scheme
k8s.io/client-go/applyconfigurations/core/v1
k8s.io/client-go/kubernetes/typed/coordination/v1
k8s.io/client-go/kubernetes/typed/apiserverinternal/v1alpha1
k8s.io/client-go/kubernetes/typed/coordination/v1beta1
k8s.io/client-go/kubernetes/typed/scheduling/v1
k8s.io/client-go/kubernetes/typed/certificates/v1beta1
k8s.io/client-go/kubernetes/typed/scheduling/v1alpha1
k8s.io/client-go/kubernetes/typed/scheduling/v1beta1
k8s.io/client-go/kubernetes/typed/autoscaling/v1
github.com/argoproj/gitops-engine/pkg/diff
k8s.io/client-go/kubernetes/typed/certificates/v1
k8s.io/client-go/kubernetes/typed/admissionregistration/v1beta1
k8s.io/client-go/kubernetes/typed/policy/v1
k8s.io/client-go/kubernetes/typed/admissionregistration/v1
k8s.io/client-go/kubernetes/typed/flowcontrol/v1beta1
k8s.io/client-go/kubernetes/typed/autoscaling/v2beta1
sigs.k8s.io/controller-runtime/pkg/internal/objectutil
k8s.io/client-go/kubernetes/typed/rbac/v1beta1
k8s.io/client-go/kubernetes/typed/rbac/v1alpha1
k8s.io/client-go/kubernetes/typed/flowcontrol/v1alpha1
k8s.io/client-go/kubernetes/typed/rbac/v1
k8s.io/client-go/kubernetes/typed/autoscaling/v2
k8s.io/client-go/kubernetes/typed/autoscaling/v2beta2
k8s.io/client-go/kubernetes/typed/coordination/v1/fake
k8s.io/client-go/kubernetes/typed/flowcontrol/v1beta2
k8s.io/client-go/kubernetes/typed/autoscaling/v1/fake
sigs.k8s.io/controller-runtime/pkg/client
k8s.io/client-go/kubernetes/typed/scheduling/v1/fake
k8s.io/client-go/kubernetes/typed/apiserverinternal/v1alpha1/fake
k8s.io/client-go/kubernetes/typed/scheduling/v1beta1/fake
k8s.io/client-go/kubernetes/typed/coordination/v1beta1/fake
k8s.io/client-go/kubernetes/typed/certificates/v1beta1/fake
k8s.io/client-go/kubernetes/typed/scheduling/v1alpha1/fake
k8s.io/client-go/kubernetes/typed/certificates/v1/fake
k8s.io/client-go/kubernetes/typed/autoscaling/v2beta1/fake
k8s.io/client-go/kubernetes/typed/admissionregistration/v1beta1/fake
k8s.io/client-go/kubernetes/typed/policy/v1/fake
k8s.io/client-go/kubernetes/typed/admissionregistration/v1/fake
k8s.io/client-go/kubernetes/typed/rbac/v1beta1/fake
k8s.io/client-go/kubernetes/typed/flowcontrol/v1beta1/fake
k8s.io/client-go/kubernetes/typed/flowcontrol/v1beta2/fake
k8s.io/client-go/kubernetes/typed/autoscaling/v2beta2/fake
k8s.io/client-go/kubernetes/typed/autoscaling/v2/fake
k8s.io/client-go/kubernetes/typed/flowcontrol/v1alpha1/fake
k8s.io/client-go/kubernetes/typed/rbac/v1/fake
k8s.io/client-go/kubernetes/typed/rbac/v1alpha1/fake
k8s.io/kubectl/pkg/validation
k8s.io/cli-runtime/pkg/genericclioptions
sigs.k8s.io/controller-runtime/pkg/event
sigs.k8s.io/controller-runtime/pkg/controller/controllerutil
sigs.k8s.io/controller-runtime/pkg/cache/internal
sigs.k8s.io/controller-runtime/pkg/predicate
sigs.k8s.io/controller-runtime/pkg/cache
k8s.io/kubectl/pkg/rawhttp
sigs.k8s.io/controller-runtime/pkg/runtime/inject
k8s.io/client-go/applyconfigurations/events/v1
k8s.io/client-go/applyconfigurations/events/v1beta1
k8s.io/client-go/applyconfigurations/node/v1beta1
k8s.io/client-go/applyconfigurations/node/v1
k8s.io/client-go/applyconfigurations/node/v1alpha1
k8s.io/client-go/applyconfigurations/discovery/v1beta1
k8s.io/client-go/applyconfigurations/discovery/v1
k8s.io/client-go/applyconfigurations/storage/v1alpha1
k8s.io/client-go/applyconfigurations/batch/v1
k8s.io/client-go/applyconfigurations/networking/v1beta1
k8s.io/client-go/applyconfigurations/storage/v1
sigs.k8s.io/controller-runtime/pkg/handler
k8s.io/client-go/applyconfigurations/apps/v1beta1
k8s.io/client-go/applyconfigurations/storage/v1beta1
k8s.io/client-go/applyconfigurations/policy/v1beta1
k8s.io/client-go/applyconfigurations/apps/v1beta2
k8s.io/client-go/applyconfigurations/networking/v1
sigs.k8s.io/controller-runtime/pkg/webhook/admission
k8s.io/client-go/kubernetes/typed/core/v1
k8s.io/client-go/applyconfigurations/apps/v1
k8s.io/client-go/applyconfigurations/extensions/v1beta1
sigs.k8s.io/controller-runtime/pkg/source/internal
k8s.io/client-go/kubernetes/typed/node/v1beta1
k8s.io/client-go/kubernetes/typed/discovery/v1
k8s.io/client-go/kubernetes/typed/discovery/v1beta1
k8s.io/client-go/kubernetes/typed/node/v1
k8s.io/client-go/kubernetes/typed/events/v1
k8s.io/client-go/kubernetes/typed/events/v1beta1
sigs.k8s.io/controller-runtime/pkg/source
k8s.io/client-go/kubernetes/typed/node/v1alpha1
k8s.io/client-go/kubernetes/typed/storage/v1alpha1
k8s.io/client-go/kubernetes/typed/networking/v1beta1
k8s.io/client-go/kubernetes/typed/discovery/v1/fake
k8s.io/client-go/kubernetes/typed/policy/v1beta1
sigs.k8s.io/controller-runtime/pkg/internal/controller
k8s.io/client-go/kubernetes/typed/storage/v1beta1
k8s.io/client-go/kubernetes/typed/node/v1beta1/fake
k8s.io/client-go/applyconfigurations/batch/v1beta1
k8s.io/client-go/kubernetes/typed/networking/v1
k8s.io/client-go/kubernetes/typed/batch/v1
k8s.io/client-go/kubernetes/typed/storage/v1
k8s.io/client-go/kubernetes/typed/discovery/v1beta1/fake
k8s.io/client-go/kubernetes/typed/node/v1alpha1/fake
k8s.io/client-go/kubernetes/typed/apps/v1beta1
k8s.io/client-go/kubernetes/typed/events/v1beta1/fake
k8s.io/client-go/kubernetes/typed/events/v1/fake
sigs.k8s.io/controller-runtime/pkg/webhook
k8s.io/client-go/kubernetes/typed/node/v1/fake
k8s.io/client-go/kubernetes/typed/apps/v1beta2
k8s.io/client-go/kubernetes/typed/storage/v1alpha1/fake
k8s.io/client-go/kubernetes/typed/networking/v1beta1/fake
k8s.io/client-go/kubernetes/typed/apps/v1
k8s.io/client-go/kubernetes/typed/policy/v1beta1/fake
k8s.io/client-go/kubernetes/typed/extensions/v1beta1
k8s.io/client-go/kubernetes/typed/batch/v1/fake
k8s.io/client-go/kubernetes/typed/batch/v1beta1
k8s.io/client-go/kubernetes/typed/storage/v1beta1/fake
k8s.io/client-go/kubernetes/typed/networking/v1/fake
k8s.io/client-go/kubernetes/typed/storage/v1/fake
k8s.io/client-go/kubernetes/typed/apps/v1beta1/fake
k8s.io/client-go/kubernetes/typed/apps/v1beta2/fake
sigs.k8s.io/controller-runtime/pkg/internal/recorder
k8s.io/component-helpers/auth/rbac/reconciliation
k8s.io/client-go/kubernetes/typed/core/v1/fake
k8s.io/client-go/kubernetes/typed/batch/v1beta1/fake
k8s.io/kubectl/pkg/util/deployment
k8s.io/client-go/kubernetes/typed/apps/v1/fake
k8s.io/client-go/kubernetes
k8s.io/client-go/kubernetes/typed/extensions/v1beta1/fake
sigs.k8s.io/controller-runtime/pkg/cluster
k8s.io/client-go/informers/internalinterfaces
k8s.io/client-go/util/certificate/csr
k8s.io/client-go/kubernetes/fake
k8s.io/client-go/tools/leaderelection/resourcelock
github.com/argoproj/argo-cd/v2/util/clusterauth
k8s.io/kubectl/pkg/cmd/util
sigs.k8s.io/controller-runtime/pkg/leaderelection
k8s.io/client-go/tools/leaderelection
k8s.io/client-go/informers/core/v1
k8s.io/kubectl/pkg/describe
sigs.k8s.io/controller-runtime/pkg/manager
sigs.k8s.io/controller-runtime/pkg/controller
sigs.k8s.io/controller-runtime/pkg/builder
k8s.io/kubectl/pkg/cmd/util/editor
k8s.io/kubectl/pkg/cmd/apiresources
k8s.io/kubectl/pkg/cmd/get
sigs.k8s.io/controller-runtime
github.com/argoproj/argo-cd/v2/util/rbac
github.com/argoproj/notifications-engine/pkg/cmd
github.com/argoproj/argo-cd/v2/util/notification/k8s
k8s.io/kubectl/pkg/cmd/wait
k8s.io/kubectl/pkg/cmd/auth
k8s.io/kubectl/pkg/polymorphichelpers
k8s.io/kubectl/pkg/util/completion
k8s.io/kubectl/pkg/cmd/delete
k8s.io/kubectl/pkg/cmd/create
k8s.io/kubectl/pkg/cmd/replace
k8s.io/kubectl/pkg/cmd/apply
github.com/argoproj/gitops-engine/pkg/utils/kube
github.com/argoproj/gitops-engine/pkg/sync/common
github.com/argoproj/gitops-engine/pkg/health
github.com/argoproj/argo-cd/v2/util/kube
github.com/argoproj/gitops-engine/pkg/sync/hook/helm
github.com/argoproj/gitops-engine/pkg/sync/syncwaves
github.com/argoproj/gitops-engine/pkg/sync/hook
github.com/argoproj/gitops-engine/pkg/sync/ignore
github.com/argoproj/gitops-engine/pkg/cache
github.com/argoproj/gitops-engine/pkg/sync
github.com/argoproj/argo-cd/v2/pkg/apis/application/v1alpha1
github.com/argoproj/argo-cd/v2/controller/sharding
github.com/argoproj/argo-cd/v2/util/cache/appstate
github.com/argoproj/argo-cd/v2/util/gpg
github.com/argoproj/argo-cd/v2/util/kustomize
github.com/argoproj/argo-cd/v2/pkg/apiclient/applicationset
github.com/argoproj/argo-cd/v2/pkg/apiclient/gpgkey
github.com/argoproj/argo-cd/v2/util/lua
github.com/argoproj/argo-cd/v2/pkg/apiclient/certificate
github.com/argoproj/argo-cd/v2/pkg/apiclient/cluster
github.com/argoproj/argo-cd/v2/pkg/apiclient/repocreds
github.com/argoproj/argo-cd/v2/pkg/client/listers/application/v1alpha1
github.com/argoproj/argo-cd/v2/pkg/client/clientset/versioned/scheme
github.com/argoproj/argo-cd/v2/pkg/apiclient/settings
github.com/argoproj/argo-cd/v2/util/argo/normalizers
github.com/argoproj/argo-cd/v2/reposerver/apiclient
github.com/argoproj/argo-cd/v2/util/settings
github.com/argoproj/argo-cd/v2/applicationset/utils
github.com/argoproj/argo-cd/v2/pkg/client/clientset/versioned/typed/application/v1alpha1
github.com/argoproj/argo-cd/v2/server/cache
github.com/argoproj/argo-cd/v2/server/rbacpolicy
github.com/argoproj/argo-cd/v2/controller/metrics
github.com/argoproj/argo-cd/v2/pkg/client/clientset/versioned
github.com/argoproj/argo-cd/v2/pkg/client/informers/externalversions/internalinterfaces
github.com/argoproj/argo-cd/v2/pkg/client/informers/externalversions/application/v1alpha1
github.com/argoproj/argo-cd/v2/applicationset/services/pull_request
github.com/argoproj/argo-cd/v2/applicationset/services/scm_provider
github.com/argoproj/argo-cd/v2/util/notification/expression/shared
github.com/argoproj/argo-cd/v2/cmpserver/apiclient
github.com/argoproj/argo-cd/v2/pkg/apiclient/repository
github.com/argoproj/argo-cd/v2/pkg/apiclient/application
github.com/argoproj/argo-cd/v2/util/dex
github.com/argoproj/argo-cd/v2/util/db
github.com/argoproj/argo-cd/v2/pkg/client/informers/externalversions/application
github.com/argoproj/argo-cd/v2/util/oidc
github.com/argoproj/argo-cd/v2/pkg/client/informers/externalversions
github.com/argoproj/argo-cd/v2/util/cmp
github.com/argoproj/argo-cd/v2/util/session
github.com/argoproj/argo-cd/v2/util/app/discovery
github.com/argoproj/argo-cd/v2/cmpserver/plugin
github.com/argoproj/argo-cd/v2/applicationset/services
github.com/argoproj/argo-cd/v2/util/github_app
github.com/argoproj/argo-cd/v2/server/certificate
github.com/argoproj/argo-cd/v2/server/gpgkey
github.com/argoproj/argo-cd/v2/util/notification/argocd
github.com/argoproj/argo-cd/v2/util/argo
github.com/argoproj/argo-cd/v2/server/settings
github.com/argoproj/argo-cd/v2/server/logout
github.com/argoproj/argo-cd/v2/server/account
github.com/argoproj/argo-cd/v2/server/session
github.com/argoproj/argo-cd/v2/applicationset/generators
github.com/argoproj/argo-cd/v2/util/notification/expression/repo
github.com/argoproj/argo-cd/v2/util/manifeststream
github.com/argoproj/argo-cd/v2/server/extension
github.com/argoproj/argo-cd/v2/pkg/apiclient/project
github.com/argoproj/argo-cd/v2/server/deeplinks
github.com/argoproj/argo-cd/v2/util/notification/expression
github.com/argoproj/argo-cd/v2/server/version
github.com/argoproj/argo-cd/v2/util/notification/settings
github.com/argoproj/argo-cd/v2/controller/cache
github.com/argoproj/argo-cd/v2/reposerver/cache
github.com/argoproj/argo-cd/v2/server/repocreds
github.com/argoproj/argo-cd/v2/server/applicationset
github.com/argoproj/argo-cd/v2/server/badge
github.com/argoproj/argo-cd/v2/server/cluster
github.com/argoproj/argo-cd/v2/cmd/util
github.com/argoproj/argo-cd/v2/server/repository
github.com/argoproj/argo-cd/v2/util/argo/diff
github.com/argoproj/argo-cd/v2/cmpserver
github.com/argoproj/argo-cd/v2/server/application
github.com/argoproj/argo-cd/v2/applicationset/controllers
github.com/argoproj/argo-cd/v2/applicationset/webhook
github.com/argoproj/argo-cd/v2/notification_controller/controller
github.com/argoproj/argo-cd/v2/reposerver/repository
github.com/argoproj/argo-cd/v2/util/webhook
github.com/argoproj/argo-cd/v2/cmd/argocd-cmp-server/commands
github.com/argoproj/argo-cd/v2/cmd/argocd-dex/commands
github.com/argoproj/argo-cd/v2/pkg/apiclient
github.com/argoproj/argo-cd/v2/server/project
github.com/argoproj/argo-cd/v2/controller
github.com/argoproj/argo-cd/v2/cmd/argocd-notification/commands
github.com/argoproj/argo-cd/v2/reposerver
github.com/argoproj/argo-cd/v2/cmd/argocd-repo-server/commands
github.com/argoproj/argo-cd/v2/server
github.com/argoproj/argo-cd/v2/cmd/argocd-applicationset-controller/commands
github.com/argoproj/argo-cd/v2/cmd/argocd-application-controller/commands
github.com/argoproj/argo-cd/v2/cmd/argocd-server/commands
github.com/argoproj/argo-cd/v2/cmd/argocd/commands/headless
github.com/argoproj/argo-cd/v2/cmd/argocd/commands/admin
github.com/argoproj/argo-cd/v2/cmd/argocd/commands
github.com/argoproj/argo-cd/v2/cmd
# NO_PROXY ensures all tests don't go out through a proxy if one is configured on the test system
export GO111MODULE=off
ARGOCD_E2E_RECORD=/argocd-e2e/argocd_e2e_record ARGOCD_GPG_ENABLED=true NO_PROXY=* ./hack/test.sh -timeout 2h -v ./test/e2e
+ which go-junit-report
/usr/local/bin/go-junit-report
+ TEST_RESULTS=test-results
+ TEST_FLAGS=
+ test '' '!=' ''
+ test '' '!=' ''
+ mkdir -p test-results
+ trap report EXIT
+ go test -timeout 2h -v ./test/e2e
+ tee test-results/test.out
time="2023-11-03T13:09:46Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:09:47Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:09:47Z" level=info msg=initialized apiServerAddress=argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com
=== RUN   TestCreateAndUseAccount
time="2023-11-03T13:09:47Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=0b433
time="2023-11-03T13:09:47Z" level=debug msg="No resources found\n" duration=206.315582ms execID=0b433
time="2023-11-03T13:09:47Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=b5b80
time="2023-11-03T13:09:48Z" level=debug msg="No resources found\n" duration=452.141443ms execID=b5b80
time="2023-11-03T13:09:48Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=93312
time="2023-11-03T13:09:48Z" level=debug msg="No resources found\n" duration=243.40655ms execID=93312
time="2023-11-03T13:09:49Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:09:49Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzM4OSwibmJmIjoxNjk5MDE2OTg5LCJpYXQiOjE2OTkwMTY5ODksImp0aSI6ImI5Nzc5NDMyLTkyZWUtNDhiZC1hYjFhLWI5YTUzZTNkZWQ5NSJ9.z2Zr7dzbwBNP43cYrS7f6wSRiLJKZ6wEzp-3eaGQNR0 --insecure" dir= execID=11010
time="2023-11-03T13:09:49Z" level=debug duration=324.58795ms execID=11010
time="2023-11-03T13:09:49Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=11a46
time="2023-11-03T13:09:49Z" level=debug duration=2.096603ms execID=11a46
time="2023-11-03T13:09:49Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=11734
time="2023-11-03T13:09:49Z" level=debug duration=1.60939ms execID=11734
time="2023-11-03T13:09:49Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=8b559
time="2023-11-03T13:09:49Z" level=debug duration=1.392485ms execID=8b559
time="2023-11-03T13:09:49Z" level=info msg="pkill -9 gpg-agent" dir= execID=bf413
time="2023-11-03T13:09:49Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=5cfab
time="2023-11-03T13:09:49Z" level=debug duration=16.452863ms execID=5cfab
time="2023-11-03T13:09:49Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=d7322
time="2023-11-03T13:09:49Z" level=debug duration=122.137987ms execID=d7322
time="2023-11-03T13:09:49Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=f4bbe
time="2023-11-03T13:09:49Z" level=debug duration=1.927588ms execID=f4bbe
time="2023-11-03T13:09:49Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=a249d
time="2023-11-03T13:09:49Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.310033ms execID=a249d
time="2023-11-03T13:09:49Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=7accc
time="2023-11-03T13:09:49Z" level=debug duration=25.260416ms execID=7accc
time="2023-11-03T13:09:49Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=4db6f
time="2023-11-03T13:09:49Z" level=debug duration=20.310203ms execID=4db6f
time="2023-11-03T13:09:49Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=911d8
time="2023-11-03T13:09:49Z" level=debug duration=1.952989ms execID=911d8
time="2023-11-03T13:09:49Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=497bf
Handling connection for 9081
time="2023-11-03T13:09:49Z" level=debug duration=74.610912ms execID=497bf
time="2023-11-03T13:09:49Z" level=info msg="kubectl create ns argocd-e2e--test-create-and-use-account-ycezs" dir= execID=b9205
time="2023-11-03T13:09:50Z" level=debug msg="namespace/argocd-e2e--test-create-and-use-account-ycezs created\n" duration=162.942669ms execID=b9205
time="2023-11-03T13:09:50Z" level=info msg="kubectl label ns argocd-e2e--test-create-and-use-account-ycezs e2e.argoproj.io=true" dir= execID=07730
time="2023-11-03T13:09:50Z" level=debug msg="namespace/argocd-e2e--test-create-and-use-account-ycezs labeled\n" duration=287.882285ms execID=07730
time="2023-11-03T13:09:50Z" level=info msg="clean state" duration=2.701480651s id=TestCreateAndUseAccount-ycezs name=TestCreateAndUseAccount password=password username=admin
time="2023-11-03T13:09:51Z" level=info msg="../../dist/argocd account update-password --account test --current-password J3QcnyLs6kwTxhd50emMGrHPfBOUl2pj --new-password password --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzM4OSwibmJmIjoxNjk5MDE2OTg5LCJpYXQiOjE2OTkwMTY5ODksImp0aSI6ImI5Nzc5NDMyLTkyZWUtNDhiZC1hYjFhLWI5YTUzZTNkZWQ5NSJ9.z2Zr7dzbwBNP43cYrS7f6wSRiLJKZ6wEzp-3eaGQNR0 --insecure" dir= execID=bdb14
time="2023-11-03T13:09:52Z" level=debug msg="Password updated\n" duration=954.165405ms execID=bdb14
time="2023-11-03T13:09:53Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:09:53Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCreateAndUseAccount (5.56s)
=== RUN   TestCanIGetLogsAllowNoSwitch
time="2023-11-03T13:09:53Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=720ee
time="2023-11-03T13:09:53Z" level=debug msg="namespace \"argocd-e2e--test-create-and-use-account-ycezs\" deleted\n" duration=204.413432ms execID=720ee
time="2023-11-03T13:09:53Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=47bbd
time="2023-11-03T13:09:53Z" level=debug msg="No resources found\n" duration=395.779384ms execID=47bbd
time="2023-11-03T13:09:53Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=550a1
time="2023-11-03T13:09:54Z" level=debug msg="No resources found\n" duration=203.047728ms execID=550a1
time="2023-11-03T13:09:54Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:09:54Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzM5NCwibmJmIjoxNjk5MDE2OTk0LCJpYXQiOjE2OTkwMTY5OTQsImp0aSI6ImI3Zjk3MjA2LTYwZmYtNDkyNy04ODQ5LWM2NDQzOWY2ODk0ZiJ9.QbDNidfLnOoz7p9F9aRa-IHnryBY0Pwm_lP_2m0TFGo --insecure" dir= execID=c023c
time="2023-11-03T13:09:54Z" level=debug duration=89.121148ms execID=c023c
time="2023-11-03T13:09:54Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=91b5a
time="2023-11-03T13:09:54Z" level=debug duration=2.066607ms execID=91b5a
time="2023-11-03T13:09:54Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=52c6e
time="2023-11-03T13:09:54Z" level=debug duration=1.611993ms execID=52c6e
time="2023-11-03T13:09:54Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=31563
time="2023-11-03T13:09:54Z" level=debug duration=1.59623ms execID=31563
time="2023-11-03T13:09:54Z" level=info msg="pkill -9 gpg-agent" dir= execID=fcf53
time="2023-11-03T13:09:54Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=89683
time="2023-11-03T13:09:54Z" level=debug duration=9.676948ms execID=89683
time="2023-11-03T13:09:54Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=779d7
time="2023-11-03T13:09:54Z" level=debug duration=31.390152ms execID=779d7
time="2023-11-03T13:09:54Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=0b106
time="2023-11-03T13:09:54Z" level=debug duration=1.714858ms execID=0b106
time="2023-11-03T13:09:54Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=bd6d3
time="2023-11-03T13:09:54Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.748223ms execID=bd6d3
time="2023-11-03T13:09:54Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=bc2dd
time="2023-11-03T13:09:54Z" level=debug duration=35.747231ms execID=bc2dd
time="2023-11-03T13:09:54Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=285e5
time="2023-11-03T13:09:54Z" level=debug duration=20.864679ms execID=285e5
time="2023-11-03T13:09:54Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=e2064
time="2023-11-03T13:09:54Z" level=debug duration=2.386841ms execID=e2064
time="2023-11-03T13:09:54Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=80501
Handling connection for 9081
time="2023-11-03T13:09:54Z" level=debug duration=81.933537ms execID=80501
time="2023-11-03T13:09:54Z" level=info msg="kubectl create ns argocd-e2e--test-can-i-get-logs-allow-no-switch-qffgm" dir= execID=512fa
time="2023-11-03T13:09:55Z" level=debug msg="namespace/argocd-e2e--test-can-i-get-logs-allow-no-switch-qffgm created\n" duration=122.26547ms execID=512fa
time="2023-11-03T13:09:55Z" level=info msg="kubectl label ns argocd-e2e--test-can-i-get-logs-allow-no-switch-qffgm e2e.argoproj.io=true" dir= execID=02089
time="2023-11-03T13:09:55Z" level=debug msg="namespace/argocd-e2e--test-can-i-get-logs-allow-no-switch-qffgm labeled\n" duration=358.323543ms execID=02089
time="2023-11-03T13:09:55Z" level=info msg="clean state" duration=2.212476801s id=TestCanIGetLogsAllowNoSwitch-qffgm name=TestCanIGetLogsAllowNoSwitch password=password username=admin
time="2023-11-03T13:09:56Z" level=info msg="../../dist/argocd account update-password --account test --current-password J3QcnyLs6kwTxhd50emMGrHPfBOUl2pj --new-password password --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzM5NCwibmJmIjoxNjk5MDE2OTk0LCJpYXQiOjE2OTkwMTY5OTQsImp0aSI6ImI3Zjk3MjA2LTYwZmYtNDkyNy04ODQ5LWM2NDQzOWY2ODk0ZiJ9.QbDNidfLnOoz7p9F9aRa-IHnryBY0Pwm_lP_2m0TFGo --insecure" dir= execID=fb597
time="2023-11-03T13:09:57Z" level=debug msg="Password updated\n" duration=880.978617ms execID=fb597
time="2023-11-03T13:09:58Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:09:58Z" level=info msg="../../dist/argocd account can-i get logs /* --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJ0ZXN0OmxvZ2luIiwiZXhwIjoxNjk5MTAzMzk4LCJuYmYiOjE2OTkwMTY5OTgsImlhdCI6MTY5OTAxNjk5OCwianRpIjoiMzdlOWU0ZWMtZGI3OC00ZDUyLWFiYzAtZjZiYzM0ZWUyNjk3In0._A3BohyT4REb056VNvJ2Cuyrl4eXX1stP-g2_DTXN7w --insecure" dir= execID=498d9
time="2023-11-03T13:09:58Z" level=debug msg="yes\n" duration=85.355427ms execID=498d9
time="2023-11-03T13:09:58Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCanIGetLogsAllowNoSwitch (5.11s)
=== RUN   TestCanIGetLogsDenySwitchOn
time="2023-11-03T13:09:58Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=c0d57
time="2023-11-03T13:09:58Z" level=debug msg="namespace \"argocd-e2e--test-can-i-get-logs-allow-no-switch-qffgm\" deleted\n" duration=258.230826ms execID=c0d57
time="2023-11-03T13:09:58Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=e9d76
time="2023-11-03T13:09:59Z" level=debug msg="No resources found\n" duration=375.307717ms execID=e9d76
time="2023-11-03T13:09:59Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=2f216
time="2023-11-03T13:09:59Z" level=debug msg="No resources found\n" duration=224.133599ms execID=2f216
time="2023-11-03T13:10:00Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:10:00Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQwMCwibmJmIjoxNjk5MDE3MDAwLCJpYXQiOjE2OTkwMTcwMDAsImp0aSI6ImE2YWU5YmUxLWIxOWEtNDBiNC1hZWM3LTIxNzIwN2ZlZGY4ZCJ9.M1Ycy1MbKCPXaZUiAMbtO5sLiNXfcimaTBcR1J6G_JA --insecure" dir= execID=46f8a
time="2023-11-03T13:10:00Z" level=debug duration=76.825127ms execID=46f8a
time="2023-11-03T13:10:00Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=f5f87
time="2023-11-03T13:10:00Z" level=debug duration=2.021225ms execID=f5f87
time="2023-11-03T13:10:00Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=e6506
time="2023-11-03T13:10:00Z" level=debug duration=1.615519ms execID=e6506
time="2023-11-03T13:10:00Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=0bcd8
time="2023-11-03T13:10:00Z" level=debug duration=1.550744ms execID=0bcd8
time="2023-11-03T13:10:00Z" level=info msg="pkill -9 gpg-agent" dir= execID=c597c
time="2023-11-03T13:10:00Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=724f9
time="2023-11-03T13:10:00Z" level=debug duration=10.062924ms execID=724f9
time="2023-11-03T13:10:00Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=b9523
time="2023-11-03T13:10:00Z" level=debug duration=51.500902ms execID=b9523
time="2023-11-03T13:10:00Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=20990
time="2023-11-03T13:10:00Z" level=debug duration=1.959606ms execID=20990
time="2023-11-03T13:10:00Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=1b13c
time="2023-11-03T13:10:00Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.023353ms execID=1b13c
time="2023-11-03T13:10:00Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=3438f
time="2023-11-03T13:10:00Z" level=debug duration=27.677058ms execID=3438f
time="2023-11-03T13:10:00Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=b301f
time="2023-11-03T13:10:00Z" level=debug duration=21.542166ms execID=b301f
time="2023-11-03T13:10:00Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=6b948
time="2023-11-03T13:10:00Z" level=debug duration=2.254192ms execID=6b948
time="2023-11-03T13:10:00Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=b150d
Handling connection for 9081
time="2023-11-03T13:10:00Z" level=debug duration=68.142734ms execID=b150d
time="2023-11-03T13:10:00Z" level=info msg="kubectl create ns argocd-e2e--test-can-i-get-logs-deny-switch-on-dtnqc" dir= execID=e29fe
time="2023-11-03T13:10:00Z" level=debug msg="namespace/argocd-e2e--test-can-i-get-logs-deny-switch-on-dtnqc created\n" duration=145.960411ms execID=e29fe
time="2023-11-03T13:10:00Z" level=info msg="kubectl label ns argocd-e2e--test-can-i-get-logs-deny-switch-on-dtnqc e2e.argoproj.io=true" dir= execID=beb32
time="2023-11-03T13:10:00Z" level=debug msg="namespace/argocd-e2e--test-can-i-get-logs-deny-switch-on-dtnqc labeled\n" duration=297.303184ms execID=beb32
time="2023-11-03T13:10:00Z" level=info msg="clean state" duration=2.497472883s id=TestCanIGetLogsDenySwitchOn-dtnqc name=TestCanIGetLogsDenySwitchOn password=password username=admin
time="2023-11-03T13:10:01Z" level=info msg="../../dist/argocd account update-password --account test --current-password J3QcnyLs6kwTxhd50emMGrHPfBOUl2pj --new-password password --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQwMCwibmJmIjoxNjk5MDE3MDAwLCJpYXQiOjE2OTkwMTcwMDAsImp0aSI6ImE2YWU5YmUxLWIxOWEtNDBiNC1hZWM3LTIxNzIwN2ZlZGY4ZCJ9.M1Ycy1MbKCPXaZUiAMbtO5sLiNXfcimaTBcR1J6G_JA --insecure" dir= execID=f6e76
time="2023-11-03T13:10:02Z" level=debug msg="Password updated\n" duration=1.080359357s execID=f6e76
time="2023-11-03T13:10:03Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:10:03Z" level=info msg="../../dist/argocd account can-i get logs /* --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJ0ZXN0OmxvZ2luIiwiZXhwIjoxNjk5MTAzNDAzLCJuYmYiOjE2OTkwMTcwMDMsImlhdCI6MTY5OTAxNzAwMywianRpIjoiMTc4MWNiNzktMzgxMi00NmNkLWJjNjgtY2VlZTg2MzA0ODAzIn0.eiXRZgUGa3h9yT5vnN0_JPHXlpBHiRGCeLi9D4-BBYk --insecure" dir= execID=9658d
time="2023-11-03T13:10:03Z" level=debug msg="no\n" duration=59.525212ms execID=9658d
time="2023-11-03T13:10:03Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCanIGetLogsDenySwitchOn (5.24s)
=== RUN   TestCanIGetLogsAllowSwitchOn
time="2023-11-03T13:10:03Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=7eeb2
time="2023-11-03T13:10:03Z" level=debug msg="namespace \"argocd-e2e--test-can-i-get-logs-deny-switch-on-dtnqc\" deleted\n" duration=246.106562ms execID=7eeb2
time="2023-11-03T13:10:03Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=49716
time="2023-11-03T13:10:04Z" level=debug msg="No resources found\n" duration=444.270291ms execID=49716
time="2023-11-03T13:10:04Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=b2373
time="2023-11-03T13:10:04Z" level=debug msg="No resources found\n" duration=319.726007ms execID=b2373
time="2023-11-03T13:10:05Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:10:05Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQwNSwibmJmIjoxNjk5MDE3MDA1LCJpYXQiOjE2OTkwMTcwMDUsImp0aSI6IjliZWMyZjY4LWNjMTYtNGUwNS04YWJjLWIzOWRlZjBhM2M2ZiJ9.4QUM4N8eFgW-9VPh0DT-yKrx1uWUZ88mW0DbpK8ReL8 --insecure" dir= execID=5ad06
time="2023-11-03T13:10:05Z" level=debug duration=71.849559ms execID=5ad06
time="2023-11-03T13:10:05Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=585b8
time="2023-11-03T13:10:05Z" level=debug duration=1.908604ms execID=585b8
time="2023-11-03T13:10:05Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=d22d6
time="2023-11-03T13:10:05Z" level=debug duration=1.581644ms execID=d22d6
time="2023-11-03T13:10:05Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=8510f
time="2023-11-03T13:10:05Z" level=debug duration=1.513502ms execID=8510f
time="2023-11-03T13:10:05Z" level=info msg="pkill -9 gpg-agent" dir= execID=8ce7a
time="2023-11-03T13:10:05Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=2ff19
time="2023-11-03T13:10:05Z" level=debug duration=9.985702ms execID=2ff19
time="2023-11-03T13:10:05Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=48808
time="2023-11-03T13:10:05Z" level=debug duration=56.31211ms execID=48808
time="2023-11-03T13:10:05Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=84787
time="2023-11-03T13:10:05Z" level=debug duration=1.901967ms execID=84787
time="2023-11-03T13:10:05Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=53ce5
time="2023-11-03T13:10:05Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.447937ms execID=53ce5
time="2023-11-03T13:10:05Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=e070c
time="2023-11-03T13:10:05Z" level=debug duration=26.835094ms execID=e070c
time="2023-11-03T13:10:05Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=d3329
time="2023-11-03T13:10:05Z" level=debug duration=34.534342ms execID=d3329
time="2023-11-03T13:10:05Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=ba69b
time="2023-11-03T13:10:05Z" level=debug duration=2.584298ms execID=ba69b
time="2023-11-03T13:10:05Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=e7dd6
Handling connection for 9081
time="2023-11-03T13:10:05Z" level=debug duration=98.579224ms execID=e7dd6
time="2023-11-03T13:10:05Z" level=info msg="kubectl create ns argocd-e2e--test-can-i-get-logs-allow-switch-on-lnydq" dir= execID=d56f0
time="2023-11-03T13:10:05Z" level=debug msg="namespace/argocd-e2e--test-can-i-get-logs-allow-switch-on-lnydq created\n" duration=154.438725ms execID=d56f0
time="2023-11-03T13:10:05Z" level=info msg="kubectl label ns argocd-e2e--test-can-i-get-logs-allow-switch-on-lnydq e2e.argoproj.io=true" dir= execID=9ada2
time="2023-11-03T13:10:06Z" level=debug msg="namespace/argocd-e2e--test-can-i-get-logs-allow-switch-on-lnydq labeled\n" duration=269.346254ms execID=9ada2
time="2023-11-03T13:10:06Z" level=info msg="clean state" duration=2.685207278s id=TestCanIGetLogsAllowSwitchOn-lnydq name=TestCanIGetLogsAllowSwitchOn password=password username=admin
time="2023-11-03T13:10:07Z" level=info msg="../../dist/argocd account update-password --account test --current-password J3QcnyLs6kwTxhd50emMGrHPfBOUl2pj --new-password password --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQwNSwibmJmIjoxNjk5MDE3MDA1LCJpYXQiOjE2OTkwMTcwMDUsImp0aSI6IjliZWMyZjY4LWNjMTYtNGUwNS04YWJjLWIzOWRlZjBhM2M2ZiJ9.4QUM4N8eFgW-9VPh0DT-yKrx1uWUZ88mW0DbpK8ReL8 --insecure" dir= execID=8d425
time="2023-11-03T13:10:08Z" level=debug msg="Password updated\n" duration=1.153535836s execID=8d425
time="2023-11-03T13:10:09Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:10:09Z" level=info msg="../../dist/argocd account can-i get logs argo-project/* --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJ0ZXN0OmxvZ2luIiwiZXhwIjoxNjk5MTAzNDA5LCJuYmYiOjE2OTkwMTcwMDksImlhdCI6MTY5OTAxNzAwOSwianRpIjoiYWM4Zjg3MTctZWNhZC00YTZjLTkxNjEtZmUxMzM1ZTM4M2M2In0.WElsZIbuHt1s33Lm3HAowrqU8sOBY-ZyOUQRAFPRVRk --insecure" dir= execID=88690
time="2023-11-03T13:10:09Z" level=debug msg="yes\n" duration=95.440364ms execID=88690
time="2023-11-03T13:10:09Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCanIGetLogsAllowSwitchOn (5.76s)
=== RUN   TestCanIGetLogsAllowSwitchOff
time="2023-11-03T13:10:09Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=f8cd7
time="2023-11-03T13:10:09Z" level=debug msg="namespace \"argocd-e2e--test-can-i-get-logs-allow-switch-on-lnydq\" deleted\n" duration=259.957892ms execID=f8cd7
time="2023-11-03T13:10:09Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=92c86
time="2023-11-03T13:10:10Z" level=debug msg="No resources found\n" duration=507.052712ms execID=92c86
time="2023-11-03T13:10:10Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=fd540
time="2023-11-03T13:10:10Z" level=debug msg="No resources found\n" duration=220.030406ms execID=fd540
time="2023-11-03T13:10:11Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:10:11Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQxMSwibmJmIjoxNjk5MDE3MDExLCJpYXQiOjE2OTkwMTcwMTEsImp0aSI6ImVkNjZiMTMyLWJlODEtNDIzNy1iYjMxLTViZThlNzdjNTFhYSJ9.MOLti3hV9TEhWCaODr7Uce0h_T25TdbbosFstXjBpQQ --insecure" dir= execID=fcc2b
time="2023-11-03T13:10:11Z" level=debug duration=113.021043ms execID=fcc2b
time="2023-11-03T13:10:11Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=a5aed
time="2023-11-03T13:10:11Z" level=debug duration=2.002207ms execID=a5aed
time="2023-11-03T13:10:11Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=8ee23
time="2023-11-03T13:10:11Z" level=debug duration=1.593094ms execID=8ee23
time="2023-11-03T13:10:11Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=7cbf2
time="2023-11-03T13:10:11Z" level=debug duration=1.475902ms execID=7cbf2
time="2023-11-03T13:10:11Z" level=info msg="pkill -9 gpg-agent" dir= execID=f30f2
time="2023-11-03T13:10:11Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=e8ee0
time="2023-11-03T13:10:11Z" level=debug duration=9.801772ms execID=e8ee0
time="2023-11-03T13:10:11Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=6b702
time="2023-11-03T13:10:11Z" level=debug duration=71.331977ms execID=6b702
time="2023-11-03T13:10:11Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=63a03
time="2023-11-03T13:10:11Z" level=debug duration=2.111492ms execID=63a03
time="2023-11-03T13:10:11Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=01a41
time="2023-11-03T13:10:11Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.132849ms execID=01a41
time="2023-11-03T13:10:11Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=053c2
time="2023-11-03T13:10:11Z" level=debug duration=27.583875ms execID=053c2
time="2023-11-03T13:10:11Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=41dd6
time="2023-11-03T13:10:11Z" level=debug duration=21.251647ms execID=41dd6
time="2023-11-03T13:10:11Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=0c035
time="2023-11-03T13:10:11Z" level=debug duration=2.021991ms execID=0c035
time="2023-11-03T13:10:11Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=4f435
Handling connection for 9081
time="2023-11-03T13:10:11Z" level=debug duration=84.379074ms execID=4f435
time="2023-11-03T13:10:11Z" level=info msg="kubectl create ns argocd-e2e--test-can-i-get-logs-allow-switch-off-msfwv" dir= execID=9338e
time="2023-11-03T13:10:11Z" level=debug msg="namespace/argocd-e2e--test-can-i-get-logs-allow-switch-off-msfwv created\n" duration=134.725303ms execID=9338e
time="2023-11-03T13:10:11Z" level=info msg="kubectl label ns argocd-e2e--test-can-i-get-logs-allow-switch-off-msfwv e2e.argoproj.io=true" dir= execID=69c70
time="2023-11-03T13:10:12Z" level=debug msg="namespace/argocd-e2e--test-can-i-get-logs-allow-switch-off-msfwv labeled\n" duration=317.311033ms execID=69c70
time="2023-11-03T13:10:12Z" level=info msg="clean state" duration=2.82104771s id=TestCanIGetLogsAllowSwitchOff-msfwv name=TestCanIGetLogsAllowSwitchOff password=password username=admin
time="2023-11-03T13:10:13Z" level=info msg="../../dist/argocd account update-password --account test --current-password J3QcnyLs6kwTxhd50emMGrHPfBOUl2pj --new-password password --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQxMSwibmJmIjoxNjk5MDE3MDExLCJpYXQiOjE2OTkwMTcwMTEsImp0aSI6ImVkNjZiMTMyLWJlODEtNDIzNy1iYjMxLTViZThlNzdjNTFhYSJ9.MOLti3hV9TEhWCaODr7Uce0h_T25TdbbosFstXjBpQQ --insecure" dir= execID=51614
time="2023-11-03T13:10:13Z" level=debug msg="Password updated\n" duration=772.237574ms execID=51614
time="2023-11-03T13:10:14Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:10:14Z" level=info msg="../../dist/argocd account can-i get logs /* --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJ0ZXN0OmxvZ2luIiwiZXhwIjoxNjk5MTAzNDE0LCJuYmYiOjE2OTkwMTcwMTQsImlhdCI6MTY5OTAxNzAxNCwianRpIjoiODU2ZWJiZTEtYjAzYS00OWNmLTllZDAtMGRkODUzOWE3MzQ1In0.Fs9ACOYKw34S9T0HLMS4FzmmtRKYdAd3AH4c1GePYHs --insecure" dir= execID=e0618
time="2023-11-03T13:10:14Z" level=debug msg="yes\n" duration=101.170848ms execID=e0618
time="2023-11-03T13:10:14Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCanIGetLogsAllowSwitchOff (5.42s)
=== RUN   TestCreateAndUseAccountCLI
time="2023-11-03T13:10:14Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=ee61a
time="2023-11-03T13:10:15Z" level=debug msg="namespace \"argocd-e2e--test-can-i-get-logs-allow-switch-off-msfwv\" deleted\n" duration=267.820524ms execID=ee61a
time="2023-11-03T13:10:15Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=11381
time="2023-11-03T13:10:15Z" level=debug msg="No resources found\n" duration=487.816688ms execID=11381
time="2023-11-03T13:10:15Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=65e03
time="2023-11-03T13:10:15Z" level=debug msg="No resources found\n" duration=302.112677ms execID=65e03
time="2023-11-03T13:10:16Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:10:16Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQxNiwibmJmIjoxNjk5MDE3MDE2LCJpYXQiOjE2OTkwMTcwMTYsImp0aSI6Ijk4NzE4ZDFjLWNmMmMtNGUyMS1hMTczLTk5NDBlYWRkYmI2OCJ9.8_1D6AABjWHALYCGGj_toCBTwmW1NbZVooToQt-AAh4 --insecure" dir= execID=178f7
time="2023-11-03T13:10:16Z" level=debug duration=91.484381ms execID=178f7
time="2023-11-03T13:10:16Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=5cabc
time="2023-11-03T13:10:16Z" level=debug duration=1.904048ms execID=5cabc
time="2023-11-03T13:10:16Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=cebd7
time="2023-11-03T13:10:16Z" level=debug duration=1.52602ms execID=cebd7
time="2023-11-03T13:10:16Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=d1f3d
time="2023-11-03T13:10:16Z" level=debug duration=1.464519ms execID=d1f3d
time="2023-11-03T13:10:16Z" level=info msg="pkill -9 gpg-agent" dir= execID=2b101
time="2023-11-03T13:10:16Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=3f36d
time="2023-11-03T13:10:16Z" level=debug duration=10.037239ms execID=3f36d
time="2023-11-03T13:10:16Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=70e6b
time="2023-11-03T13:10:16Z" level=debug duration=38.532284ms execID=70e6b
time="2023-11-03T13:10:16Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=86040
time="2023-11-03T13:10:16Z" level=debug duration=1.89414ms execID=86040
time="2023-11-03T13:10:16Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=94702
time="2023-11-03T13:10:16Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.107389ms execID=94702
time="2023-11-03T13:10:16Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=e3144
time="2023-11-03T13:10:16Z" level=debug duration=26.610198ms execID=e3144
time="2023-11-03T13:10:16Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=d6e8c
time="2023-11-03T13:10:16Z" level=debug duration=23.167948ms execID=d6e8c
time="2023-11-03T13:10:16Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=da98e
time="2023-11-03T13:10:16Z" level=debug duration=2.355434ms execID=da98e
time="2023-11-03T13:10:16Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=fa795
Handling connection for 9081
time="2023-11-03T13:10:17Z" level=debug duration=72.576208ms execID=fa795
time="2023-11-03T13:10:17Z" level=info msg="kubectl create ns argocd-e2e--test-create-and-use-account-cli-yguax" dir= execID=0599a
time="2023-11-03T13:10:17Z" level=debug msg="namespace/argocd-e2e--test-create-and-use-account-cli-yguax created\n" duration=157.301719ms execID=0599a
time="2023-11-03T13:10:17Z" level=info msg="kubectl label ns argocd-e2e--test-create-and-use-account-cli-yguax e2e.argoproj.io=true" dir= execID=8c586
time="2023-11-03T13:10:17Z" level=debug msg="namespace/argocd-e2e--test-create-and-use-account-cli-yguax labeled\n" duration=297.061484ms execID=8c586
time="2023-11-03T13:10:17Z" level=info msg="clean state" duration=2.78112773s id=TestCreateAndUseAccountCLI-yguax name=TestCreateAndUseAccountCLI password=password username=admin
time="2023-11-03T13:10:17Z" level=info msg="../../dist/argocd account list --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQxNiwibmJmIjoxNjk5MDE3MDE2LCJpYXQiOjE2OTkwMTcwMTYsImp0aSI6Ijk4NzE4ZDFjLWNmMmMtNGUyMS1hMTczLTk5NDBlYWRkYmI2OCJ9.8_1D6AABjWHALYCGGj_toCBTwmW1NbZVooToQt-AAh4 --insecure" dir= execID=93405
time="2023-11-03T13:10:17Z" level=debug msg="NAME   ENABLED  CAPABILITIES\nadmin  true     login\n" duration=117.864128ms execID=93405
time="2023-11-03T13:10:17Z" level=info msg="../../dist/argocd account list --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQxNiwibmJmIjoxNjk5MDE3MDE2LCJpYXQiOjE2OTkwMTcwMTYsImp0aSI6Ijk4NzE4ZDFjLWNmMmMtNGUyMS1hMTczLTk5NDBlYWRkYmI2OCJ9.8_1D6AABjWHALYCGGj_toCBTwmW1NbZVooToQt-AAh4 --insecure" dir= execID=7ed6e
time="2023-11-03T13:10:17Z" level=debug msg="NAME   ENABLED  CAPABILITIES\nadmin  true     login\ntest   true     login, apiKey\n" duration=105.024117ms execID=7ed6e
time="2023-11-03T13:10:17Z" level=info msg="../../dist/argocd account generate-token --account test --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQxNiwibmJmIjoxNjk5MDE3MDE2LCJpYXQiOjE2OTkwMTcwMTYsImp0aSI6Ijk4NzE4ZDFjLWNmMmMtNGUyMS1hMTczLTk5NDBlYWRkYmI2OCJ9.8_1D6AABjWHALYCGGj_toCBTwmW1NbZVooToQt-AAh4 --insecure" dir= execID=c948e
time="2023-11-03T13:10:17Z" level=debug msg="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJ0ZXN0OmFwaUtleSIsIm5iZiI6MTY5OTAxNzAxNywiaWF0IjoxNjk5MDE3MDE3LCJqdGkiOiI3ZGU2MGM5Ni0zYTBiLTRjNzItYTU0NC0xYmVlMjQ5N2M5ZjQifQ.fbQde1LssuZLLcQ4NDCh6U_I1_6A3UheiwjUnx6D_FA\n" duration=213.685771ms execID=c948e
time="2023-11-03T13:10:17Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:10:17Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCreateAndUseAccountCLI (3.25s)
=== RUN   TestLoginBadCredentials
time="2023-11-03T13:10:18Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=acb91
time="2023-11-03T13:10:18Z" level=debug msg="namespace \"argocd-e2e--test-create-and-use-account-cli-yguax\" deleted\n" duration=286.214867ms execID=acb91
time="2023-11-03T13:10:18Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=30516
time="2023-11-03T13:10:18Z" level=debug msg="No resources found\n" duration=460.668997ms execID=30516
time="2023-11-03T13:10:18Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=14b6c
time="2023-11-03T13:10:19Z" level=debug msg="No resources found\n" duration=245.352291ms execID=14b6c
time="2023-11-03T13:10:19Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:10:19Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQxOSwibmJmIjoxNjk5MDE3MDE5LCJpYXQiOjE2OTkwMTcwMTksImp0aSI6IjA4YTk4NGNiLWVkMmUtNDA1Zi04MGE1LWZiNzRmODcyMmZmYiJ9.Kxo574johvMZMJ_hRKDlhaUhrYQYe6PXpb-p02IeDWw --insecure" dir= execID=507b1
time="2023-11-03T13:10:19Z" level=debug duration=112.66745ms execID=507b1
time="2023-11-03T13:10:19Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=7d2d6
time="2023-11-03T13:10:19Z" level=debug duration=1.963052ms execID=7d2d6
time="2023-11-03T13:10:19Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=31376
time="2023-11-03T13:10:19Z" level=debug duration=1.780368ms execID=31376
time="2023-11-03T13:10:19Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=acf30
time="2023-11-03T13:10:19Z" level=debug duration=1.649798ms execID=acf30
time="2023-11-03T13:10:19Z" level=info msg="pkill -9 gpg-agent" dir= execID=b12c5
time="2023-11-03T13:10:19Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=da858
time="2023-11-03T13:10:19Z" level=debug duration=9.898358ms execID=da858
time="2023-11-03T13:10:19Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=9ac6a
time="2023-11-03T13:10:19Z" level=debug duration=36.118988ms execID=9ac6a
time="2023-11-03T13:10:19Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=14595
time="2023-11-03T13:10:19Z" level=debug duration=1.946112ms execID=14595
time="2023-11-03T13:10:19Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=c3f93
time="2023-11-03T13:10:19Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.015328ms execID=c3f93
time="2023-11-03T13:10:19Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=eae69
time="2023-11-03T13:10:19Z" level=debug duration=29.955555ms execID=eae69
time="2023-11-03T13:10:19Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=282a3
time="2023-11-03T13:10:19Z" level=debug duration=23.320639ms execID=282a3
time="2023-11-03T13:10:19Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=52e44
time="2023-11-03T13:10:19Z" level=debug duration=2.885347ms execID=52e44
time="2023-11-03T13:10:19Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=1d707
Handling connection for 9081
time="2023-11-03T13:10:19Z" level=debug duration=81.74052ms execID=1d707
time="2023-11-03T13:10:19Z" level=info msg="kubectl create ns argocd-e2e--test-login-bad-credentials-lapsz" dir= execID=18f68
time="2023-11-03T13:10:20Z" level=debug msg="namespace/argocd-e2e--test-login-bad-credentials-lapsz created\n" duration=172.06328ms execID=18f68
time="2023-11-03T13:10:20Z" level=info msg="kubectl label ns argocd-e2e--test-login-bad-credentials-lapsz e2e.argoproj.io=true" dir= execID=5a755
time="2023-11-03T13:10:20Z" level=debug msg="namespace/argocd-e2e--test-login-bad-credentials-lapsz labeled\n" duration=230.76599ms execID=5a755
time="2023-11-03T13:10:20Z" level=info msg="clean state" duration=2.358432863s id=TestLoginBadCredentials-lapsz name=TestLoginBadCredentials password=password username=admin
time="2023-11-03T13:10:21Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestLoginBadCredentials (3.62s)
=== RUN   TestNSAutoSyncSelfHealDisabled
time="2023-11-03T13:10:21Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=24ac3
time="2023-11-03T13:10:21Z" level=debug msg="namespace \"argocd-e2e--test-login-bad-credentials-lapsz\" deleted\n" duration=183.185865ms execID=24ac3
time="2023-11-03T13:10:21Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=5abf0
time="2023-11-03T13:10:22Z" level=debug msg="No resources found\n" duration=595.128147ms execID=5abf0
time="2023-11-03T13:10:22Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=22ee4
time="2023-11-03T13:10:22Z" level=debug msg="No resources found\n" duration=219.016063ms execID=22ee4
time="2023-11-03T13:10:23Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:10:23Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQyMywibmJmIjoxNjk5MDE3MDIzLCJpYXQiOjE2OTkwMTcwMjMsImp0aSI6IjI5NmI1ZGRhLWE3ZjgtNGE5Ny1iY2NiLWJiYTIzODE3MzRlZCJ9.Kk5RFaJoezz_ubEb18yue2qQ3If8JxpOgawWrZepACs --insecure" dir= execID=bae78
time="2023-11-03T13:10:23Z" level=debug duration=73.847698ms execID=bae78
time="2023-11-03T13:10:23Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=29d4f
time="2023-11-03T13:10:23Z" level=debug duration=1.90182ms execID=29d4f
time="2023-11-03T13:10:23Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=b99ae
time="2023-11-03T13:10:23Z" level=debug duration=1.762228ms execID=b99ae
time="2023-11-03T13:10:23Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=06679
time="2023-11-03T13:10:23Z" level=debug duration=1.433355ms execID=06679
time="2023-11-03T13:10:23Z" level=info msg="pkill -9 gpg-agent" dir= execID=bd839
time="2023-11-03T13:10:23Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=5ae79
time="2023-11-03T13:10:23Z" level=debug duration=10.099588ms execID=5ae79
time="2023-11-03T13:10:23Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=e3b0c
time="2023-11-03T13:10:23Z" level=debug duration=79.783412ms execID=e3b0c
time="2023-11-03T13:10:23Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=ab2ce
time="2023-11-03T13:10:23Z" level=debug duration=2.03101ms execID=ab2ce
time="2023-11-03T13:10:23Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=cf3dc
time="2023-11-03T13:10:23Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.176372ms execID=cf3dc
time="2023-11-03T13:10:23Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=ac1e5
time="2023-11-03T13:10:23Z" level=debug duration=26.980078ms execID=ac1e5
time="2023-11-03T13:10:23Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=4ba5d
time="2023-11-03T13:10:23Z" level=debug duration=23.12531ms execID=4ba5d
time="2023-11-03T13:10:23Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=33572
time="2023-11-03T13:10:23Z" level=debug duration=2.215839ms execID=33572
time="2023-11-03T13:10:23Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=2e4b1
Handling connection for 9081
time="2023-11-03T13:10:23Z" level=debug duration=76.197408ms execID=2e4b1
time="2023-11-03T13:10:23Z" level=info msg="kubectl create ns argocd-e2e--test-ns-auto-sync-self-heal-disabled-fuqwe" dir= execID=fa6c9
time="2023-11-03T13:10:23Z" level=debug msg="namespace/argocd-e2e--test-ns-auto-sync-self-heal-disabled-fuqwe created\n" duration=156.207011ms execID=fa6c9
time="2023-11-03T13:10:23Z" level=info msg="kubectl label ns argocd-e2e--test-ns-auto-sync-self-heal-disabled-fuqwe e2e.argoproj.io=true" dir= execID=2c4bb
time="2023-11-03T13:10:24Z" level=debug msg="namespace/argocd-e2e--test-ns-auto-sync-self-heal-disabled-fuqwe labeled\n" duration=308.02072ms execID=2c4bb
time="2023-11-03T13:10:24Z" level=info msg="clean state" duration=2.531487769s id=TestNSAutoSyncSelfHealDisabled-fuqwe name=TestNSAutoSyncSelfHealDisabled password=password username=admin
time="2023-11-03T13:10:25Z" level=info msg="../../dist/argocd app create -f /tmp/4056650997 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQyMywibmJmIjoxNjk5MDE3MDIzLCJpYXQiOjE2OTkwMTcwMjMsImp0aSI6IjI5NmI1ZGRhLWE3ZjgtNGE5Ny1iY2NiLWJiYTIzODE3MzRlZCJ9.Kk5RFaJoezz_ubEb18yue2qQ3If8JxpOgawWrZepACs --insecure" dir= execID=9ab83
time="2023-11-03T13:10:25Z" level=debug msg="application 'test-ns-auto-sync-self-heal-disabled' created\n" duration=264.079766ms execID=9ab83
time="2023-11-03T13:10:25Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:10:25Z" level=info msg="pending: sync status to be Synced, is "
time="2023-11-03T13:10:28Z" level=info msg="pending: sync status to be Synced, is "
time="2023-11-03T13:10:31Z" level=info msg="pending: sync status to be Synced, is OutOfSync"
time="2023-11-03T13:10:34Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:10:34Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/spec/revisionHistoryLimit\", \"value\": 1}]" path=guestbook/guestbook-ui-deployment.yaml
time="2023-11-03T13:10:34Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:10:34Z" level=info msg=JSON bytes="{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"test\":\"true\"},\"name\":\"guestbook-ui\"},\"spec\":{\"replicas\":0,\"revisionHistoryLimit\":3,\"selector\":{\"matchLabels\":{\"app\":\"guestbook-ui\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"guestbook-ui\"}},\"spec\":{\"containers\":[{\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"guestbook-ui\",\"ports\":[{\"containerPort\":80}]}]}}}}"
time="2023-11-03T13:10:34Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:10:34Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=ab8f2
time="2023-11-03T13:10:34Z" level=debug msg="diff --git a/guestbook/guestbook-ui-deployment.yaml b/guestbook/guestbook-ui-deployment.yaml\nindex bf33756..505a656 100644\n--- a/guestbook/guestbook-ui-deployment.yaml\n+++ b/guestbook/guestbook-ui-deployment.yaml\n@@ -1,12 +1,12 @@\n apiVersion: apps/v1\n kind: Deployment\n metadata:\n-  name: guestbook-ui\n   labels:\n     test: \"true\"\n+  name: guestbook-ui\n spec:\n   replicas: 0\n-  revisionHistoryLimit: 3\n+  revisionHistoryLimit: 1\n   selector:\n     matchLabels:\n       app: guestbook-ui\n" duration=5.049815ms execID=ab8f2
time="2023-11-03T13:10:34Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=f353a
time="2023-11-03T13:10:34Z" level=debug msg="[master 5e88c1b] patch\n 1 file changed, 2 insertions(+), 2 deletions(-)\n" duration=12.559835ms execID=f353a
time="2023-11-03T13:10:34Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=dd5e4
Handling connection for 9081
time="2023-11-03T13:10:34Z" level=debug duration=38.938743ms execID=dd5e4
time="2023-11-03T13:10:34Z" level=info msg="../../dist/argocd app get argocd-e2e-external/test-ns-auto-sync-self-heal-disabled --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQyMywibmJmIjoxNjk5MDE3MDIzLCJpYXQiOjE2OTkwMTcwMjMsImp0aSI6IjI5NmI1ZGRhLWE3ZjgtNGE5Ny1iY2NiLWJiYTIzODE3MzRlZCJ9.Kk5RFaJoezz_ubEb18yue2qQ3If8JxpOgawWrZepACs --insecure" dir= execID=ae5d6
time="2023-11-03T13:10:34Z" level=debug msg="Name:               argocd-e2e-external/test-ns-auto-sync-self-heal-disabled\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-ns-auto-sync-self-heal-disabled-fuqwe\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-ns-auto-sync-self-heal-disabled\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        Automated\nSync Status:        OutOfSync from  (5e88c1b)\nHealth Status:      Healthy\n\nGROUP  KIND        NAMESPACE                                               NAME          STATUS     HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-ns-auto-sync-self-heal-disabled-fuqwe  guestbook-ui  Synced     Healthy        \napps   Deployment  argocd-e2e--test-ns-auto-sync-self-heal-disabled-fuqwe  guestbook-ui  OutOfSync  Healthy        \n" duration=320.463147ms execID=ae5d6
time="2023-11-03T13:10:34Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:10:34Z" level=info msg="pending: sync status to be Synced, is OutOfSync"
time="2023-11-03T13:10:37Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:10:37Z" level=info msg="pending: sync status to be OutOfSync, is Synced"
time="2023-11-03T13:10:40Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:10:40Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNSAutoSyncSelfHealDisabled (19.26s)
=== RUN   TestNSAutoSyncSelfHealEnabled
time="2023-11-03T13:10:40Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=a51db
time="2023-11-03T13:10:41Z" level=debug msg="namespace \"argocd-e2e--test-ns-auto-sync-self-heal-disabled-fuqwe\" deleted\n" duration=227.715291ms execID=a51db
time="2023-11-03T13:10:41Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=91a0f
time="2023-11-03T13:10:41Z" level=debug msg="No resources found\n" duration=439.6788ms execID=91a0f
time="2023-11-03T13:10:41Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=0da54
time="2023-11-03T13:10:41Z" level=debug msg="No resources found\n" duration=271.36569ms execID=0da54
time="2023-11-03T13:10:42Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:10:42Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQ0MiwibmJmIjoxNjk5MDE3MDQyLCJpYXQiOjE2OTkwMTcwNDIsImp0aSI6ImQzMzgwZDBiLTYwMGEtNDljOS05NWU1LTAwZTEwYmYwMjlkNSJ9.t_Ng9AdWwMSMzkftTkN4nVSMU9lC-wCmotvqAsH34BY --insecure" dir= execID=9ebe4
time="2023-11-03T13:10:43Z" level=debug duration=100.234899ms execID=9ebe4
time="2023-11-03T13:10:43Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=713fa
time="2023-11-03T13:10:43Z" level=debug duration=2.112785ms execID=713fa
time="2023-11-03T13:10:43Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=87aff
time="2023-11-03T13:10:43Z" level=debug duration=1.465215ms execID=87aff
time="2023-11-03T13:10:43Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=f2961
time="2023-11-03T13:10:43Z" level=debug duration=1.543115ms execID=f2961
time="2023-11-03T13:10:43Z" level=info msg="pkill -9 gpg-agent" dir= execID=2a58b
time="2023-11-03T13:10:43Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=afd77
time="2023-11-03T13:10:43Z" level=debug duration=10.649156ms execID=afd77
time="2023-11-03T13:10:43Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=a20bd
time="2023-11-03T13:10:43Z" level=debug duration=35.263107ms execID=a20bd
time="2023-11-03T13:10:43Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=4c435
time="2023-11-03T13:10:43Z" level=debug duration=1.904675ms execID=4c435
time="2023-11-03T13:10:43Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=951e1
time="2023-11-03T13:10:43Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.997965ms execID=951e1
time="2023-11-03T13:10:43Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=21260
time="2023-11-03T13:10:43Z" level=debug duration=35.964121ms execID=21260
time="2023-11-03T13:10:43Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=760f3
time="2023-11-03T13:10:43Z" level=debug duration=24.152034ms execID=760f3
time="2023-11-03T13:10:43Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=01ede
time="2023-11-03T13:10:43Z" level=debug duration=2.779729ms execID=01ede
time="2023-11-03T13:10:43Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=f1760
Handling connection for 9081
time="2023-11-03T13:10:43Z" level=debug duration=86.01624ms execID=f1760
time="2023-11-03T13:10:43Z" level=info msg="kubectl create ns argocd-e2e--test-ns-auto-sync-self-heal-enabled-avwch" dir= execID=ffd88
time="2023-11-03T13:10:43Z" level=debug msg="namespace/argocd-e2e--test-ns-auto-sync-self-heal-enabled-avwch created\n" duration=125.819074ms execID=ffd88
time="2023-11-03T13:10:43Z" level=info msg="kubectl label ns argocd-e2e--test-ns-auto-sync-self-heal-enabled-avwch e2e.argoproj.io=true" dir= execID=5a790
time="2023-11-03T13:10:43Z" level=debug msg="namespace/argocd-e2e--test-ns-auto-sync-self-heal-enabled-avwch labeled\n" duration=253.996842ms execID=5a790
time="2023-11-03T13:10:43Z" level=info msg="clean state" duration=2.749906729s id=TestNSAutoSyncSelfHealEnabled-avwch name=TestNSAutoSyncSelfHealEnabled password=password username=admin
time="2023-11-03T13:10:44Z" level=info msg="../../dist/argocd app create -f /tmp/564726000 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQ0MiwibmJmIjoxNjk5MDE3MDQyLCJpYXQiOjE2OTkwMTcwNDIsImp0aSI6ImQzMzgwZDBiLTYwMGEtNDljOS05NWU1LTAwZTEwYmYwMjlkNSJ9.t_Ng9AdWwMSMzkftTkN4nVSMU9lC-wCmotvqAsH34BY --insecure" dir= execID=8df26
time="2023-11-03T13:10:44Z" level=debug msg="application 'test-ns-auto-sync-self-heal-enabled' created\n" duration=206.285069ms execID=8df26
time="2023-11-03T13:10:44Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:10:44Z" level=info msg="pending: operation phase should be Succeeded, is Running"
time="2023-11-03T13:10:47Z" level=info msg="pending: operation phase should be Succeeded, is Running"
time="2023-11-03T13:10:50Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:10:50Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:10:50Z" level=info msg="../../dist/argocd app get argocd-e2e-external/test-ns-auto-sync-self-heal-enabled --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQ0MiwibmJmIjoxNjk5MDE3MDQyLCJpYXQiOjE2OTkwMTcwNDIsImp0aSI6ImQzMzgwZDBiLTYwMGEtNDljOS05NWU1LTAwZTEwYmYwMjlkNSJ9.t_Ng9AdWwMSMzkftTkN4nVSMU9lC-wCmotvqAsH34BY --insecure" dir= execID=c25b7
time="2023-11-03T13:10:51Z" level=debug msg="Name:               argocd-e2e-external/test-ns-auto-sync-self-heal-enabled\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-ns-auto-sync-self-heal-enabled-avwch\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-ns-auto-sync-self-heal-enabled\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        Automated\nSync Status:        OutOfSync from  (e3a7741)\nHealth Status:      Healthy\n\nGROUP  KIND        NAMESPACE                                              NAME          STATUS     HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-ns-auto-sync-self-heal-enabled-avwch  guestbook-ui  Synced     Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-ns-auto-sync-self-heal-enabled-avwch  guestbook-ui  OutOfSync  Healthy        deployment.apps/guestbook-ui created\n" duration=171.153039ms execID=c25b7
time="2023-11-03T13:10:51Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:10:51Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:10:51Z" level=info msg="pending: sync status to be Synced, is OutOfSync"
time="2023-11-03T13:10:54Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:10:54Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/spec/revisionHistoryLimit\", \"value\": \"badValue\"}]" path=guestbook/guestbook-ui-deployment.yaml
time="2023-11-03T13:10:54Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:10:54Z" level=info msg=JSON bytes="{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"test\":\"true\"},\"name\":\"guestbook-ui\"},\"spec\":{\"replicas\":0,\"revisionHistoryLimit\":3,\"selector\":{\"matchLabels\":{\"app\":\"guestbook-ui\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"guestbook-ui\"}},\"spec\":{\"containers\":[{\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"guestbook-ui\",\"ports\":[{\"containerPort\":80}]}]}}}}"
time="2023-11-03T13:10:54Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:10:54Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=22024
time="2023-11-03T13:10:54Z" level=debug msg="diff --git a/guestbook/guestbook-ui-deployment.yaml b/guestbook/guestbook-ui-deployment.yaml\nindex bf33756..64d0a4d 100644\n--- a/guestbook/guestbook-ui-deployment.yaml\n+++ b/guestbook/guestbook-ui-deployment.yaml\n@@ -1,12 +1,12 @@\n apiVersion: apps/v1\n kind: Deployment\n metadata:\n-  name: guestbook-ui\n   labels:\n     test: \"true\"\n+  name: guestbook-ui\n spec:\n   replicas: 0\n-  revisionHistoryLimit: 3\n+  revisionHistoryLimit: badValue\n   selector:\n     matchLabels:\n       app: guestbook-ui\n" duration=4.599387ms execID=22024
time="2023-11-03T13:10:54Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=bcbbb
time="2023-11-03T13:10:54Z" level=debug msg="[master 980c596] patch\n 1 file changed, 2 insertions(+), 2 deletions(-)\n" duration=10.984502ms execID=bcbbb
time="2023-11-03T13:10:54Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=a02af
Handling connection for 9081
time="2023-11-03T13:10:54Z" level=debug duration=35.436093ms execID=a02af
time="2023-11-03T13:10:54Z" level=info msg="../../dist/argocd app get argocd-e2e-external/test-ns-auto-sync-self-heal-enabled --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQ0MiwibmJmIjoxNjk5MDE3MDQyLCJpYXQiOjE2OTkwMTcwNDIsImp0aSI6ImQzMzgwZDBiLTYwMGEtNDljOS05NWU1LTAwZTEwYmYwMjlkNSJ9.t_Ng9AdWwMSMzkftTkN4nVSMU9lC-wCmotvqAsH34BY --insecure" dir= execID=40643
time="2023-11-03T13:10:54Z" level=debug msg="Name:               argocd-e2e-external/test-ns-auto-sync-self-heal-enabled\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-ns-auto-sync-self-heal-enabled-avwch\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-ns-auto-sync-self-heal-enabled\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        Automated\nSync Status:        OutOfSync from  (980c596)\nHealth Status:      Healthy\n\nGROUP  KIND        NAMESPACE                                              NAME          STATUS     HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-ns-auto-sync-self-heal-enabled-avwch  guestbook-ui  Synced     Healthy        \napps   Deployment  argocd-e2e--test-ns-auto-sync-self-heal-enabled-avwch  guestbook-ui  OutOfSync  Healthy        \n" duration=270.972197ms execID=40643
time="2023-11-03T13:10:54Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:10:54Z" level=info msg="pending: operation phase should be Failed, is Running"
time="2023-11-03T13:10:57Z" level=info msg="expectation succeeded: operation phase should be Failed, is Failed"
time="2023-11-03T13:10:57Z" level=info msg="../../dist/argocd app get argocd-e2e-external/test-ns-auto-sync-self-heal-enabled --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQ0MiwibmJmIjoxNjk5MDE3MDQyLCJpYXQiOjE2OTkwMTcwNDIsImp0aSI6ImQzMzgwZDBiLTYwMGEtNDljOS05NWU1LTAwZTEwYmYwMjlkNSJ9.t_Ng9AdWwMSMzkftTkN4nVSMU9lC-wCmotvqAsH34BY --insecure" dir= execID=c1a38
time="2023-11-03T13:10:57Z" level=debug msg="Name:               argocd-e2e-external/test-ns-auto-sync-self-heal-enabled\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-ns-auto-sync-self-heal-enabled-avwch\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-ns-auto-sync-self-heal-enabled\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        Automated\nSync Status:        OutOfSync from  (980c596)\nHealth Status:      Healthy\n\nCONDITION  MESSAGE                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            LAST TRANSITION\nSyncError  Failed sync attempt to 980c596ff449d1b5a087a73ab81cb2e8fdb8f931: one or more objects failed to apply, reason:  \"\" is invalid: patch: Invalid value: \"map[metadata:map[annotations:map[kubectl.kubernetes.io/last-applied-configuration:{\\\"apiVersion\\\":\\\"apps/v1\\\",\\\"kind\\\":\\\"Deployment\\\",\\\"metadata\\\":{\\\"annotations\\\":{\\\"argocd.argoproj.io/tracking-id\\\":\\\"argocd-e2e-external_test-ns-auto-sync-self-heal-enabled:apps/Deployment:argocd-e2e--test-ns-auto-sync-self-heal-enabled-avwch/guestbook-ui\\\"},\\\"labels\\\":{\\\"test\\\":\\\"true\\\"},\\\"name\\\":\\\"guestbook-ui\\\",\\\"namespace\\\":\\\"argocd-e2e--test-ns-auto-sync-self-heal-enabled-avwch\\\"},\\\"spec\\\":{\\\"replicas\\\":0,\\\"revisionHistoryLimit\\\":\\\"badValue\\\",\\\"selector\\\":{\\\"matchLabels\\\":{\\\"app\\\":\\\"guestbook-ui\\\"}},\\\"template\\\":{\\\"metadata\\\":{\\\"labels\\\":{\\\"app\\\":\\\"guestbook-ui\\\"}},\\\"spec\\\":{\\\"containers\\\":[{\\\"image\\\":\\\"quay.io/argoprojlabs/argocd-e2e-container:0.2\\\",\\\"imagePullPolicy\\\":\\\"IfNotPresent\\\",\\\"name\\\":\\\"guestbook-ui\\\",\\\"ports\\\":[{\\\"containerPort\\\":80}]}]}}}}\\n]] spec:map[revisionHistoryLimit:badValue]]\": unrecognized type: int32  2023-11-03 13:10:54 +0000 UTC\n\n\nGROUP  KIND        NAMESPACE                                              NAME          STATUS     HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-ns-auto-sync-self-heal-enabled-avwch  guestbook-ui  Synced     Healthy        service/guestbook-ui unchanged\napps   Deployment  argocd-e2e--test-ns-auto-sync-self-heal-enabled-avwch  guestbook-ui  OutOfSync  Healthy         \"\" is invalid: patch: Invalid value: \"map[metadata:map[annotations:map[kubectl.kubernetes.io/last-applied-configuration:{\\\"apiVersion\\\":\\\"apps/v1\\\",\\\"kind\\\":\\\"Deployment\\\",\\\"metadata\\\":{\\\"annotations\\\":{\\\"argocd.argoproj.io/tracking-id\\\":\\\"argocd-e2e-external_test-ns-auto-sync-self-heal-enabled:apps/Deployment:argocd-e2e--test-ns-auto-sync-self-heal-enabled-avwch/guestbook-ui\\\"},\\\"labels\\\":{\\\"test\\\":\\\"true\\\"},\\\"name\\\":\\\"guestbook-ui\\\",\\\"namespace\\\":\\\"argocd-e2e--test-ns-auto-sync-self-heal-enabled-avwch\\\"},\\\"spec\\\":{\\\"replicas\\\":0,\\\"revisionHistoryLimit\\\":\\\"badValue\\\",\\\"selector\\\":{\\\"matchLabels\\\":{\\\"app\\\":\\\"guestbook-ui\\\"}},\\\"template\\\":{\\\"metadata\\\":{\\\"labels\\\":{\\\"app\\\":\\\"guestbook-ui\\\"}},\\\"spec\\\":{\\\"containers\\\":[{\\\"image\\\":\\\"quay.io/argoprojlabs/argocd-e2e-container:0.2\\\",\\\"imagePullPolicy\\\":\\\"IfNotPresent\\\",\\\"name\\\":\\\"guestbook-ui\\\",\\\"ports\\\":[{\\\"containerPort\\\":80}]}]}}}}\\n]] spec:map[revisionHistoryLimit:badValue]]\": unrecognized type: int32\n" duration=131.799156ms execID=c1a38
time="2023-11-03T13:10:57Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:10:57Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:10:57Z" level=info msg="expectation succeeded: condition {SyncError Failed sync attempt} in [{SyncError Failed sync attempt to 980c596ff449d1b5a087a73ab81cb2e8fdb8f931: one or more objects failed to apply, reason:  \"\" is invalid: patch: Invalid value: \"map[metadata:map[annotations:map[kubectl.kubernetes.io/last-applied-configuration:{\\\"apiVersion\\\":\\\"apps/v1\\\",\\\"kind\\\":\\\"Deployment\\\",\\\"metadata\\\":{\\\"annotations\\\":{\\\"argocd.argoproj.io/tracking-id\\\":\\\"argocd-e2e-external_test-ns-auto-sync-self-heal-enabled:apps/Deployment:argocd-e2e--test-ns-auto-sync-self-heal-enabled-avwch/guestbook-ui\\\"},\\\"labels\\\":{\\\"test\\\":\\\"true\\\"},\\\"name\\\":\\\"guestbook-ui\\\",\\\"namespace\\\":\\\"argocd-e2e--test-ns-auto-sync-self-heal-enabled-avwch\\\"},\\\"spec\\\":{\\\"replicas\\\":0,\\\"revisionHistoryLimit\\\":\\\"badValue\\\",\\\"selector\\\":{\\\"matchLabels\\\":{\\\"app\\\":\\\"guestbook-ui\\\"}},\\\"template\\\":{\\\"metadata\\\":{\\\"labels\\\":{\\\"app\\\":\\\"guestbook-ui\\\"}},\\\"spec\\\":{\\\"containers\\\":[{\\\"image\\\":\\\"quay.io/argoprojlabs/argocd-e2e-container:0.2\\\",\\\"imagePullPolicy\\\":\\\"IfNotPresent\\\",\\\"name\\\":\\\"guestbook-ui\\\",\\\"ports\\\":[{\\\"containerPort\\\":80}]}]}}}}\\n]] spec:map[revisionHistoryLimit:badValue]]\": unrecognized type: int32 2023-11-03 13:10:54 +0000 UTC}]"
time="2023-11-03T13:10:57Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/spec/revisionHistoryLimit\", \"value\": 1}]" path=guestbook/guestbook-ui-deployment.yaml
time="2023-11-03T13:10:57Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:10:57Z" level=info msg=JSON bytes="{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"test\":\"true\"},\"name\":\"guestbook-ui\"},\"spec\":{\"replicas\":0,\"revisionHistoryLimit\":\"badValue\",\"selector\":{\"matchLabels\":{\"app\":\"guestbook-ui\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"guestbook-ui\"}},\"spec\":{\"containers\":[{\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"guestbook-ui\",\"ports\":[{\"containerPort\":80}]}]}}}}"
time="2023-11-03T13:10:57Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:10:57Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=7ee7a
time="2023-11-03T13:10:57Z" level=debug msg="diff --git a/guestbook/guestbook-ui-deployment.yaml b/guestbook/guestbook-ui-deployment.yaml\nindex 64d0a4d..505a656 100644\n--- a/guestbook/guestbook-ui-deployment.yaml\n+++ b/guestbook/guestbook-ui-deployment.yaml\n@@ -6,7 +6,7 @@ metadata:\n   name: guestbook-ui\n spec:\n   replicas: 0\n-  revisionHistoryLimit: badValue\n+  revisionHistoryLimit: 1\n   selector:\n     matchLabels:\n       app: guestbook-ui\n" duration=3.703629ms execID=7ee7a
time="2023-11-03T13:10:57Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=a06c2
time="2023-11-03T13:10:57Z" level=debug msg="[master 63cb0cc] patch\n 1 file changed, 1 insertion(+), 1 deletion(-)\n" duration=7.873488ms execID=a06c2
time="2023-11-03T13:10:57Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=4a64f
Handling connection for 9081
time="2023-11-03T13:10:57Z" level=debug duration=39.720656ms execID=4a64f
time="2023-11-03T13:10:57Z" level=info msg="../../dist/argocd app get argocd-e2e-external/test-ns-auto-sync-self-heal-enabled --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQ0MiwibmJmIjoxNjk5MDE3MDQyLCJpYXQiOjE2OTkwMTcwNDIsImp0aSI6ImQzMzgwZDBiLTYwMGEtNDljOS05NWU1LTAwZTEwYmYwMjlkNSJ9.t_Ng9AdWwMSMzkftTkN4nVSMU9lC-wCmotvqAsH34BY --insecure" dir= execID=385e6
time="2023-11-03T13:10:57Z" level=debug msg="Name:               argocd-e2e-external/test-ns-auto-sync-self-heal-enabled\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-ns-auto-sync-self-heal-enabled-avwch\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-ns-auto-sync-self-heal-enabled\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        Automated\nSync Status:        OutOfSync from  (63cb0cc)\nHealth Status:      Healthy\n\nGROUP  KIND        NAMESPACE                                              NAME          STATUS     HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-ns-auto-sync-self-heal-enabled-avwch  guestbook-ui  Synced     Healthy        \napps   Deployment  argocd-e2e--test-ns-auto-sync-self-heal-enabled-avwch  guestbook-ui  OutOfSync  Healthy        \n" duration=286.464604ms execID=385e6
time="2023-11-03T13:10:57Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:10:57Z" level=info msg="pending: operation phase should be Succeeded, is Running"
time="2023-11-03T13:11:00Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:11:00Z" level=info msg="../../dist/argocd app get argocd-e2e-external/test-ns-auto-sync-self-heal-enabled --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQ0MiwibmJmIjoxNjk5MDE3MDQyLCJpYXQiOjE2OTkwMTcwNDIsImp0aSI6ImQzMzgwZDBiLTYwMGEtNDljOS05NWU1LTAwZTEwYmYwMjlkNSJ9.t_Ng9AdWwMSMzkftTkN4nVSMU9lC-wCmotvqAsH34BY --insecure" dir= execID=48846
time="2023-11-03T13:11:01Z" level=debug msg="Name:               argocd-e2e-external/test-ns-auto-sync-self-heal-enabled\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-ns-auto-sync-self-heal-enabled-avwch\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-ns-auto-sync-self-heal-enabled\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        Automated\nSync Status:        Synced to  (63cb0cc)\nHealth Status:      Healthy\n\nGROUP  KIND        NAMESPACE                                              NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-ns-auto-sync-self-heal-enabled-avwch  guestbook-ui  Synced  Healthy        service/guestbook-ui unchanged\napps   Deployment  argocd-e2e--test-ns-auto-sync-self-heal-enabled-avwch  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui configured\n" duration=148.412808ms execID=48846
time="2023-11-03T13:11:01Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:11:01Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:11:01Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNSAutoSyncSelfHealEnabled (20.18s)
=== RUN   TestAutoSyncSelfHealDisabled
time="2023-11-03T13:11:01Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=bc6a4
time="2023-11-03T13:11:01Z" level=debug msg="namespace \"argocd-e2e--test-ns-auto-sync-self-heal-enabled-avwch\" deleted\n" duration=227.450199ms execID=bc6a4
time="2023-11-03T13:11:01Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=ffe28
time="2023-11-03T13:11:01Z" level=debug msg="No resources found\n" duration=385.533065ms execID=ffe28
time="2023-11-03T13:11:01Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=869f2
time="2023-11-03T13:11:01Z" level=debug msg="No resources found\n" duration=209.987099ms execID=869f2
time="2023-11-03T13:11:02Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:11:02Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQ2MiwibmJmIjoxNjk5MDE3MDYyLCJpYXQiOjE2OTkwMTcwNjIsImp0aSI6IjUxZjM2MDk5LWUyOTktNDlmNy1iZjg4LTJmNDcwOTU4OGZhZSJ9.luhRXYrqzalxoLcLlrPwzAw2vctZ3ghHZ0E2ZRI0RPQ --insecure" dir= execID=edd5a
time="2023-11-03T13:11:02Z" level=debug duration=82.781209ms execID=edd5a
time="2023-11-03T13:11:02Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=46c54
time="2023-11-03T13:11:02Z" level=debug duration=1.971999ms execID=46c54
time="2023-11-03T13:11:02Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=bac74
time="2023-11-03T13:11:02Z" level=debug duration=1.622507ms execID=bac74
time="2023-11-03T13:11:02Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=14f51
time="2023-11-03T13:11:02Z" level=debug duration=1.560374ms execID=14f51
time="2023-11-03T13:11:02Z" level=info msg="pkill -9 gpg-agent" dir= execID=4e1ac
time="2023-11-03T13:11:02Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=3673f
time="2023-11-03T13:11:02Z" level=debug duration=10.138317ms execID=3673f
time="2023-11-03T13:11:02Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=fff65
time="2023-11-03T13:11:02Z" level=debug duration=36.991366ms execID=fff65
time="2023-11-03T13:11:02Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=f54d3
time="2023-11-03T13:11:02Z" level=debug duration=10.821555ms execID=f54d3
time="2023-11-03T13:11:02Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=f046e
time="2023-11-03T13:11:02Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.004132ms execID=f046e
time="2023-11-03T13:11:02Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=1e61c
time="2023-11-03T13:11:02Z" level=debug duration=27.088608ms execID=1e61c
time="2023-11-03T13:11:02Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=a0444
time="2023-11-03T13:11:02Z" level=debug duration=22.083619ms execID=a0444
time="2023-11-03T13:11:02Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=2ce3d
time="2023-11-03T13:11:02Z" level=debug duration=2.321181ms execID=2ce3d
time="2023-11-03T13:11:02Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=4d024
Handling connection for 9081
time="2023-11-03T13:11:02Z" level=debug duration=84.130062ms execID=4d024
time="2023-11-03T13:11:02Z" level=info msg="kubectl create ns argocd-e2e--test-auto-sync-self-heal-disabled-gfsgp" dir= execID=a82ae
time="2023-11-03T13:11:03Z" level=debug msg="namespace/argocd-e2e--test-auto-sync-self-heal-disabled-gfsgp created\n" duration=110.910206ms execID=a82ae
time="2023-11-03T13:11:03Z" level=info msg="kubectl label ns argocd-e2e--test-auto-sync-self-heal-disabled-gfsgp e2e.argoproj.io=true" dir= execID=409f8
time="2023-11-03T13:11:03Z" level=debug msg="namespace/argocd-e2e--test-auto-sync-self-heal-disabled-gfsgp labeled\n" duration=251.807892ms execID=409f8
time="2023-11-03T13:11:03Z" level=info msg="clean state" duration=2.273924687s id=TestAutoSyncSelfHealDisabled-gfsgp name=TestAutoSyncSelfHealDisabled password=password username=admin
time="2023-11-03T13:11:04Z" level=info msg="../../dist/argocd app create -f /tmp/2220313686 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQ2MiwibmJmIjoxNjk5MDE3MDYyLCJpYXQiOjE2OTkwMTcwNjIsImp0aSI6IjUxZjM2MDk5LWUyOTktNDlmNy1iZjg4LTJmNDcwOTU4OGZhZSJ9.luhRXYrqzalxoLcLlrPwzAw2vctZ3ghHZ0E2ZRI0RPQ --insecure" dir= execID=482d6
time="2023-11-03T13:11:04Z" level=debug msg="application 'test-auto-sync-self-heal-disabled' created\n" duration=277.653642ms execID=482d6
time="2023-11-03T13:11:04Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:11:04Z" level=info msg="pending: sync status to be Synced, is "
time="2023-11-03T13:11:07Z" level=info msg="pending: sync status to be Synced, is "
time="2023-11-03T13:11:10Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:11:10Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/spec/revisionHistoryLimit\", \"value\": 1}]" path=guestbook/guestbook-ui-deployment.yaml
time="2023-11-03T13:11:10Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:11:10Z" level=info msg=JSON bytes="{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"test\":\"true\"},\"name\":\"guestbook-ui\"},\"spec\":{\"replicas\":0,\"revisionHistoryLimit\":3,\"selector\":{\"matchLabels\":{\"app\":\"guestbook-ui\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"guestbook-ui\"}},\"spec\":{\"containers\":[{\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"guestbook-ui\",\"ports\":[{\"containerPort\":80}]}]}}}}"
time="2023-11-03T13:11:10Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:11:10Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=c1370
time="2023-11-03T13:11:10Z" level=debug msg="diff --git a/guestbook/guestbook-ui-deployment.yaml b/guestbook/guestbook-ui-deployment.yaml\nindex bf33756..505a656 100644\n--- a/guestbook/guestbook-ui-deployment.yaml\n+++ b/guestbook/guestbook-ui-deployment.yaml\n@@ -1,12 +1,12 @@\n apiVersion: apps/v1\n kind: Deployment\n metadata:\n-  name: guestbook-ui\n   labels:\n     test: \"true\"\n+  name: guestbook-ui\n spec:\n   replicas: 0\n-  revisionHistoryLimit: 3\n+  revisionHistoryLimit: 1\n   selector:\n     matchLabels:\n       app: guestbook-ui\n" duration=5.006145ms execID=c1370
time="2023-11-03T13:11:10Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=fff21
time="2023-11-03T13:11:10Z" level=debug msg="[master 5a5ef8d] patch\n 1 file changed, 2 insertions(+), 2 deletions(-)\n" duration=12.146229ms execID=fff21
time="2023-11-03T13:11:10Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=6ac0e
Handling connection for 9081
time="2023-11-03T13:11:10Z" level=debug duration=37.032133ms execID=6ac0e
time="2023-11-03T13:11:10Z" level=info msg="../../dist/argocd app get test-auto-sync-self-heal-disabled --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQ2MiwibmJmIjoxNjk5MDE3MDYyLCJpYXQiOjE2OTkwMTcwNjIsImp0aSI6IjUxZjM2MDk5LWUyOTktNDlmNy1iZjg4LTJmNDcwOTU4OGZhZSJ9.luhRXYrqzalxoLcLlrPwzAw2vctZ3ghHZ0E2ZRI0RPQ --insecure" dir= execID=82748
time="2023-11-03T13:11:10Z" level=debug msg="Name:               argocd-e2e/test-auto-sync-self-heal-disabled\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-auto-sync-self-heal-disabled-gfsgp\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-auto-sync-self-heal-disabled\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        Automated\nSync Status:        OutOfSync from  (5a5ef8d)\nHealth Status:      Healthy\n\nGROUP  KIND        NAMESPACE                                            NAME          STATUS     HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-auto-sync-self-heal-disabled-gfsgp  guestbook-ui  Synced     Healthy        \napps   Deployment  argocd-e2e--test-auto-sync-self-heal-disabled-gfsgp  guestbook-ui  OutOfSync  Healthy        \n" duration=295.953865ms execID=82748
time="2023-11-03T13:11:10Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:11:10Z" level=info msg="pending: sync status to be Synced, is OutOfSync"
time="2023-11-03T13:11:13Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:11:14Z" level=info msg="../../dist/argocd app get test-auto-sync-self-heal-disabled --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQ2MiwibmJmIjoxNjk5MDE3MDYyLCJpYXQiOjE2OTkwMTcwNjIsImp0aSI6IjUxZjM2MDk5LWUyOTktNDlmNy1iZjg4LTJmNDcwOTU4OGZhZSJ9.luhRXYrqzalxoLcLlrPwzAw2vctZ3ghHZ0E2ZRI0RPQ --insecure" dir= execID=17658
time="2023-11-03T13:11:14Z" level=debug msg="Name:               argocd-e2e/test-auto-sync-self-heal-disabled\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-auto-sync-self-heal-disabled-gfsgp\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-auto-sync-self-heal-disabled\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        Automated\nSync Status:        OutOfSync from  (5a5ef8d)\nHealth Status:      Healthy\n\nGROUP  KIND        NAMESPACE                                            NAME          STATUS     HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-auto-sync-self-heal-disabled-gfsgp  guestbook-ui  Synced     Healthy        service/guestbook-ui unchanged\napps   Deployment  argocd-e2e--test-auto-sync-self-heal-disabled-gfsgp  guestbook-ui  OutOfSync  Healthy        deployment.apps/guestbook-ui configured\n" duration=144.511997ms execID=17658
time="2023-11-03T13:11:14Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:11:14Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:11:14Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestAutoSyncSelfHealDisabled (13.10s)
=== RUN   TestAutoSyncSelfHealEnabled
time="2023-11-03T13:11:14Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=0ae3f
time="2023-11-03T13:11:14Z" level=debug msg="namespace \"argocd-e2e--test-auto-sync-self-heal-disabled-gfsgp\" deleted\n" duration=255.878906ms execID=0ae3f
time="2023-11-03T13:11:14Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=de24e
time="2023-11-03T13:11:14Z" level=debug msg="No resources found\n" duration=332.81469ms execID=de24e
time="2023-11-03T13:11:14Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=f6fed
time="2023-11-03T13:11:14Z" level=debug msg="No resources found\n" duration=160.174995ms execID=f6fed
time="2023-11-03T13:11:15Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:11:15Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQ3NSwibmJmIjoxNjk5MDE3MDc1LCJpYXQiOjE2OTkwMTcwNzUsImp0aSI6IjZkZTY1ZGYzLWU3ODYtNGZmNy1iMWY5LWNhY2E3MTc0M2MyZiJ9.hnKzRdt0qA1y_LM0OhHzUk__pyooi-u_ZZLkcMaZ6qM --insecure" dir= execID=ecedc
time="2023-11-03T13:11:15Z" level=debug duration=97.326569ms execID=ecedc
time="2023-11-03T13:11:15Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=54d33
time="2023-11-03T13:11:15Z" level=debug duration=1.856661ms execID=54d33
time="2023-11-03T13:11:15Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=3e07a
time="2023-11-03T13:11:15Z" level=debug duration=1.286235ms execID=3e07a
time="2023-11-03T13:11:15Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=7b7d5
time="2023-11-03T13:11:15Z" level=debug duration=1.311584ms execID=7b7d5
time="2023-11-03T13:11:15Z" level=info msg="pkill -9 gpg-agent" dir= execID=3d5db
time="2023-11-03T13:11:15Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=66421
time="2023-11-03T13:11:15Z" level=debug duration=9.834001ms execID=66421
time="2023-11-03T13:11:15Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=4d556
time="2023-11-03T13:11:15Z" level=debug duration=33.633331ms execID=4d556
time="2023-11-03T13:11:15Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=79e52
time="2023-11-03T13:11:15Z" level=debug duration=1.742672ms execID=79e52
time="2023-11-03T13:11:15Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=4c3b7
time="2023-11-03T13:11:15Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=16.14552ms execID=4c3b7
time="2023-11-03T13:11:15Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=6bc6c
time="2023-11-03T13:11:15Z" level=debug duration=28.982034ms execID=6bc6c
time="2023-11-03T13:11:15Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=7a120
time="2023-11-03T13:11:15Z" level=debug duration=22.583267ms execID=7a120
time="2023-11-03T13:11:15Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=ed712
time="2023-11-03T13:11:15Z" level=debug duration=2.822751ms execID=ed712
time="2023-11-03T13:11:15Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=edb56
Handling connection for 9081
time="2023-11-03T13:11:15Z" level=debug duration=76.832288ms execID=edb56
time="2023-11-03T13:11:15Z" level=info msg="kubectl create ns argocd-e2e--test-auto-sync-self-heal-enabled-htqnv" dir= execID=3c47f
time="2023-11-03T13:11:16Z" level=debug msg="namespace/argocd-e2e--test-auto-sync-self-heal-enabled-htqnv created\n" duration=165.711269ms execID=3c47f
time="2023-11-03T13:11:16Z" level=info msg="kubectl label ns argocd-e2e--test-auto-sync-self-heal-enabled-htqnv e2e.argoproj.io=true" dir= execID=19ea7
time="2023-11-03T13:11:16Z" level=debug msg="namespace/argocd-e2e--test-auto-sync-self-heal-enabled-htqnv labeled\n" duration=300.74046ms execID=19ea7
time="2023-11-03T13:11:16Z" level=info msg="clean state" duration=2.275063752s id=TestAutoSyncSelfHealEnabled-htqnv name=TestAutoSyncSelfHealEnabled password=password username=admin
time="2023-11-03T13:11:17Z" level=info msg="../../dist/argocd app create -f /tmp/202261963 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQ3NSwibmJmIjoxNjk5MDE3MDc1LCJpYXQiOjE2OTkwMTcwNzUsImp0aSI6IjZkZTY1ZGYzLWU3ODYtNGZmNy1iMWY5LWNhY2E3MTc0M2MyZiJ9.hnKzRdt0qA1y_LM0OhHzUk__pyooi-u_ZZLkcMaZ6qM --insecure" dir= execID=a8c26
time="2023-11-03T13:11:17Z" level=debug msg="application 'test-auto-sync-self-heal-enabled' created\n" duration=235.837768ms execID=a8c26
time="2023-11-03T13:11:17Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:11:17Z" level=info msg="pending: operation phase should be Succeeded, is Running"
time="2023-11-03T13:11:20Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:11:20Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:11:20Z" level=info msg="../../dist/argocd app get test-auto-sync-self-heal-enabled --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQ3NSwibmJmIjoxNjk5MDE3MDc1LCJpYXQiOjE2OTkwMTcwNzUsImp0aSI6IjZkZTY1ZGYzLWU3ODYtNGZmNy1iMWY5LWNhY2E3MTc0M2MyZiJ9.hnKzRdt0qA1y_LM0OhHzUk__pyooi-u_ZZLkcMaZ6qM --insecure" dir= execID=56366
time="2023-11-03T13:11:20Z" level=debug msg="Name:               argocd-e2e/test-auto-sync-self-heal-enabled\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-auto-sync-self-heal-enabled-htqnv\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-auto-sync-self-heal-enabled\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        Automated\nSync Status:        OutOfSync from  (3e39602)\nHealth Status:      Healthy\n\nGROUP  KIND        NAMESPACE                                           NAME          STATUS     HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-auto-sync-self-heal-enabled-htqnv  guestbook-ui  Synced     Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-auto-sync-self-heal-enabled-htqnv  guestbook-ui  OutOfSync  Healthy        deployment.apps/guestbook-ui created\n" duration=142.913156ms execID=56366
time="2023-11-03T13:11:20Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:11:20Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:11:20Z" level=info msg="pending: sync status to be Synced, is OutOfSync"
time="2023-11-03T13:11:23Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:11:23Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/spec/revisionHistoryLimit\", \"value\": \"badValue\"}]" path=guestbook/guestbook-ui-deployment.yaml
time="2023-11-03T13:11:23Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:11:23Z" level=info msg=JSON bytes="{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"test\":\"true\"},\"name\":\"guestbook-ui\"},\"spec\":{\"replicas\":0,\"revisionHistoryLimit\":3,\"selector\":{\"matchLabels\":{\"app\":\"guestbook-ui\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"guestbook-ui\"}},\"spec\":{\"containers\":[{\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"guestbook-ui\",\"ports\":[{\"containerPort\":80}]}]}}}}"
time="2023-11-03T13:11:23Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:11:23Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=b62af
time="2023-11-03T13:11:23Z" level=debug msg="diff --git a/guestbook/guestbook-ui-deployment.yaml b/guestbook/guestbook-ui-deployment.yaml\nindex bf33756..64d0a4d 100644\n--- a/guestbook/guestbook-ui-deployment.yaml\n+++ b/guestbook/guestbook-ui-deployment.yaml\n@@ -1,12 +1,12 @@\n apiVersion: apps/v1\n kind: Deployment\n metadata:\n-  name: guestbook-ui\n   labels:\n     test: \"true\"\n+  name: guestbook-ui\n spec:\n   replicas: 0\n-  revisionHistoryLimit: 3\n+  revisionHistoryLimit: badValue\n   selector:\n     matchLabels:\n       app: guestbook-ui\n" duration=5.190738ms execID=b62af
time="2023-11-03T13:11:23Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=6c947
time="2023-11-03T13:11:23Z" level=debug msg="[master 8866cc7] patch\n 1 file changed, 2 insertions(+), 2 deletions(-)\n" duration=12.707089ms execID=6c947
time="2023-11-03T13:11:23Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=13a00
Handling connection for 9081
time="2023-11-03T13:11:23Z" level=debug duration=35.481098ms execID=13a00
time="2023-11-03T13:11:23Z" level=info msg="../../dist/argocd app get test-auto-sync-self-heal-enabled --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQ3NSwibmJmIjoxNjk5MDE3MDc1LCJpYXQiOjE2OTkwMTcwNzUsImp0aSI6IjZkZTY1ZGYzLWU3ODYtNGZmNy1iMWY5LWNhY2E3MTc0M2MyZiJ9.hnKzRdt0qA1y_LM0OhHzUk__pyooi-u_ZZLkcMaZ6qM --insecure" dir= execID=bbf16
time="2023-11-03T13:11:24Z" level=debug msg="Name:               argocd-e2e/test-auto-sync-self-heal-enabled\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-auto-sync-self-heal-enabled-htqnv\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-auto-sync-self-heal-enabled\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        Automated\nSync Status:        OutOfSync from  (8866cc7)\nHealth Status:      Healthy\n\nGROUP  KIND        NAMESPACE                                           NAME          STATUS     HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-auto-sync-self-heal-enabled-htqnv  guestbook-ui  Synced     Healthy        \napps   Deployment  argocd-e2e--test-auto-sync-self-heal-enabled-htqnv  guestbook-ui  OutOfSync  Healthy        \n" duration=273.531608ms execID=bbf16
time="2023-11-03T13:11:24Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:11:24Z" level=info msg="pending: operation phase should be Failed, is Running"
time="2023-11-03T13:11:27Z" level=info msg="expectation succeeded: operation phase should be Failed, is Failed"
time="2023-11-03T13:11:27Z" level=info msg="../../dist/argocd app get test-auto-sync-self-heal-enabled --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQ3NSwibmJmIjoxNjk5MDE3MDc1LCJpYXQiOjE2OTkwMTcwNzUsImp0aSI6IjZkZTY1ZGYzLWU3ODYtNGZmNy1iMWY5LWNhY2E3MTc0M2MyZiJ9.hnKzRdt0qA1y_LM0OhHzUk__pyooi-u_ZZLkcMaZ6qM --insecure" dir= execID=bf1cd
time="2023-11-03T13:11:27Z" level=debug msg="Name:               argocd-e2e/test-auto-sync-self-heal-enabled\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-auto-sync-self-heal-enabled-htqnv\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-auto-sync-self-heal-enabled\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        Automated\nSync Status:        OutOfSync from  (8866cc7)\nHealth Status:      Healthy\n\nCONDITION  MESSAGE                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            LAST TRANSITION\nSyncError  Failed sync attempt to 8866cc7052113e0ddc8177ade71c6061d4311119: one or more objects failed to apply, reason:  \"\" is invalid: patch: Invalid value: \"map[metadata:map[annotations:map[kubectl.kubernetes.io/last-applied-configuration:{\\\"apiVersion\\\":\\\"apps/v1\\\",\\\"kind\\\":\\\"Deployment\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"labels\\\":{\\\"app.kubernetes.io/instance\\\":\\\"test-auto-sync-self-heal-enabled\\\",\\\"test\\\":\\\"true\\\"},\\\"name\\\":\\\"guestbook-ui\\\",\\\"namespace\\\":\\\"argocd-e2e--test-auto-sync-self-heal-enabled-htqnv\\\"},\\\"spec\\\":{\\\"replicas\\\":0,\\\"revisionHistoryLimit\\\":\\\"badValue\\\",\\\"selector\\\":{\\\"matchLabels\\\":{\\\"app\\\":\\\"guestbook-ui\\\"}},\\\"template\\\":{\\\"metadata\\\":{\\\"labels\\\":{\\\"app\\\":\\\"guestbook-ui\\\"}},\\\"spec\\\":{\\\"containers\\\":[{\\\"image\\\":\\\"quay.io/argoprojlabs/argocd-e2e-container:0.2\\\",\\\"imagePullPolicy\\\":\\\"IfNotPresent\\\",\\\"name\\\":\\\"guestbook-ui\\\",\\\"ports\\\":[{\\\"containerPort\\\":80}]}]}}}}\\n]] spec:map[revisionHistoryLimit:badValue]]\": unrecognized type: int32  2023-11-03 13:11:24 +0000 UTC\n\n\nGROUP  KIND        NAMESPACE                                           NAME          STATUS     HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-auto-sync-self-heal-enabled-htqnv  guestbook-ui  Synced     Healthy        service/guestbook-ui unchanged\napps   Deployment  argocd-e2e--test-auto-sync-self-heal-enabled-htqnv  guestbook-ui  OutOfSync  Healthy         \"\" is invalid: patch: Invalid value: \"map[metadata:map[annotations:map[kubectl.kubernetes.io/last-applied-configuration:{\\\"apiVersion\\\":\\\"apps/v1\\\",\\\"kind\\\":\\\"Deployment\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"labels\\\":{\\\"app.kubernetes.io/instance\\\":\\\"test-auto-sync-self-heal-enabled\\\",\\\"test\\\":\\\"true\\\"},\\\"name\\\":\\\"guestbook-ui\\\",\\\"namespace\\\":\\\"argocd-e2e--test-auto-sync-self-heal-enabled-htqnv\\\"},\\\"spec\\\":{\\\"replicas\\\":0,\\\"revisionHistoryLimit\\\":\\\"badValue\\\",\\\"selector\\\":{\\\"matchLabels\\\":{\\\"app\\\":\\\"guestbook-ui\\\"}},\\\"template\\\":{\\\"metadata\\\":{\\\"labels\\\":{\\\"app\\\":\\\"guestbook-ui\\\"}},\\\"spec\\\":{\\\"containers\\\":[{\\\"image\\\":\\\"quay.io/argoprojlabs/argocd-e2e-container:0.2\\\",\\\"imagePullPolicy\\\":\\\"IfNotPresent\\\",\\\"name\\\":\\\"guestbook-ui\\\",\\\"ports\\\":[{\\\"containerPort\\\":80}]}]}}}}\\n]] spec:map[revisionHistoryLimit:badValue]]\": unrecognized type: int32\n" duration=167.66847ms execID=bf1cd
time="2023-11-03T13:11:27Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:11:27Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:11:27Z" level=info msg="expectation succeeded: condition {SyncError Failed sync attempt} in [{SyncError Failed sync attempt to 8866cc7052113e0ddc8177ade71c6061d4311119: one or more objects failed to apply, reason:  \"\" is invalid: patch: Invalid value: \"map[metadata:map[annotations:map[kubectl.kubernetes.io/last-applied-configuration:{\\\"apiVersion\\\":\\\"apps/v1\\\",\\\"kind\\\":\\\"Deployment\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"labels\\\":{\\\"app.kubernetes.io/instance\\\":\\\"test-auto-sync-self-heal-enabled\\\",\\\"test\\\":\\\"true\\\"},\\\"name\\\":\\\"guestbook-ui\\\",\\\"namespace\\\":\\\"argocd-e2e--test-auto-sync-self-heal-enabled-htqnv\\\"},\\\"spec\\\":{\\\"replicas\\\":0,\\\"revisionHistoryLimit\\\":\\\"badValue\\\",\\\"selector\\\":{\\\"matchLabels\\\":{\\\"app\\\":\\\"guestbook-ui\\\"}},\\\"template\\\":{\\\"metadata\\\":{\\\"labels\\\":{\\\"app\\\":\\\"guestbook-ui\\\"}},\\\"spec\\\":{\\\"containers\\\":[{\\\"image\\\":\\\"quay.io/argoprojlabs/argocd-e2e-container:0.2\\\",\\\"imagePullPolicy\\\":\\\"IfNotPresent\\\",\\\"name\\\":\\\"guestbook-ui\\\",\\\"ports\\\":[{\\\"containerPort\\\":80}]}]}}}}\\n]] spec:map[revisionHistoryLimit:badValue]]\": unrecognized type: int32 2023-11-03 13:11:24 +0000 UTC}]"
time="2023-11-03T13:11:27Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/spec/revisionHistoryLimit\", \"value\": 1}]" path=guestbook/guestbook-ui-deployment.yaml
time="2023-11-03T13:11:27Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:11:27Z" level=info msg=JSON bytes="{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"test\":\"true\"},\"name\":\"guestbook-ui\"},\"spec\":{\"replicas\":0,\"revisionHistoryLimit\":\"badValue\",\"selector\":{\"matchLabels\":{\"app\":\"guestbook-ui\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"guestbook-ui\"}},\"spec\":{\"containers\":[{\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"guestbook-ui\",\"ports\":[{\"containerPort\":80}]}]}}}}"
time="2023-11-03T13:11:27Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:11:27Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=69804
time="2023-11-03T13:11:27Z" level=debug msg="diff --git a/guestbook/guestbook-ui-deployment.yaml b/guestbook/guestbook-ui-deployment.yaml\nindex 64d0a4d..505a656 100644\n--- a/guestbook/guestbook-ui-deployment.yaml\n+++ b/guestbook/guestbook-ui-deployment.yaml\n@@ -6,7 +6,7 @@ metadata:\n   name: guestbook-ui\n spec:\n   replicas: 0\n-  revisionHistoryLimit: badValue\n+  revisionHistoryLimit: 1\n   selector:\n     matchLabels:\n       app: guestbook-ui\n" duration=3.41191ms execID=69804
time="2023-11-03T13:11:27Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=46570
time="2023-11-03T13:11:27Z" level=debug msg="[master 4e46e88] patch\n 1 file changed, 1 insertion(+), 1 deletion(-)\n" duration=8.348464ms execID=46570
time="2023-11-03T13:11:27Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=5414c
Handling connection for 9081
time="2023-11-03T13:11:27Z" level=debug duration=37.911023ms execID=5414c
time="2023-11-03T13:11:27Z" level=info msg="../../dist/argocd app get test-auto-sync-self-heal-enabled --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQ3NSwibmJmIjoxNjk5MDE3MDc1LCJpYXQiOjE2OTkwMTcwNzUsImp0aSI6IjZkZTY1ZGYzLWU3ODYtNGZmNy1iMWY5LWNhY2E3MTc0M2MyZiJ9.hnKzRdt0qA1y_LM0OhHzUk__pyooi-u_ZZLkcMaZ6qM --insecure" dir= execID=6128a
time="2023-11-03T13:11:27Z" level=debug msg="Name:               argocd-e2e/test-auto-sync-self-heal-enabled\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-auto-sync-self-heal-enabled-htqnv\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-auto-sync-self-heal-enabled\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        Automated\nSync Status:        OutOfSync from  (4e46e88)\nHealth Status:      Healthy\n\nGROUP  KIND        NAMESPACE                                           NAME          STATUS     HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-auto-sync-self-heal-enabled-htqnv  guestbook-ui  Synced     Healthy        \napps   Deployment  argocd-e2e--test-auto-sync-self-heal-enabled-htqnv  guestbook-ui  OutOfSync  Healthy        \n" duration=258.652677ms execID=6128a
time="2023-11-03T13:11:27Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:11:27Z" level=info msg="pending: operation phase should be Succeeded, is Running"
time="2023-11-03T13:11:30Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:11:30Z" level=info msg="../../dist/argocd app get test-auto-sync-self-heal-enabled --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQ3NSwibmJmIjoxNjk5MDE3MDc1LCJpYXQiOjE2OTkwMTcwNzUsImp0aSI6IjZkZTY1ZGYzLWU3ODYtNGZmNy1iMWY5LWNhY2E3MTc0M2MyZiJ9.hnKzRdt0qA1y_LM0OhHzUk__pyooi-u_ZZLkcMaZ6qM --insecure" dir= execID=262d7
time="2023-11-03T13:11:30Z" level=debug msg="Name:               argocd-e2e/test-auto-sync-self-heal-enabled\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-auto-sync-self-heal-enabled-htqnv\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-auto-sync-self-heal-enabled\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        Automated\nSync Status:        Synced to  (4e46e88)\nHealth Status:      Healthy\n\nGROUP  KIND        NAMESPACE                                           NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-auto-sync-self-heal-enabled-htqnv  guestbook-ui  Synced  Healthy        service/guestbook-ui unchanged\napps   Deployment  argocd-e2e--test-auto-sync-self-heal-enabled-htqnv  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui configured\n" duration=133.455664ms execID=262d7
time="2023-11-03T13:11:30Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:11:30Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:11:30Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestAutoSyncSelfHealEnabled (16.68s)
=== RUN   TestDeletingAppStuckInSync
time="2023-11-03T13:11:30Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=728c4
time="2023-11-03T13:11:31Z" level=debug msg="namespace \"argocd-e2e--test-auto-sync-self-heal-enabled-htqnv\" deleted\n" duration=168.1703ms execID=728c4
time="2023-11-03T13:11:31Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=d0dfe
time="2023-11-03T13:11:31Z" level=debug msg="No resources found\n" duration=354.584759ms execID=d0dfe
time="2023-11-03T13:11:31Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=7fc40
time="2023-11-03T13:11:31Z" level=debug msg="No resources found\n" duration=159.63904ms execID=7fc40
time="2023-11-03T13:11:32Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:11:32Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQ5MiwibmJmIjoxNjk5MDE3MDkyLCJpYXQiOjE2OTkwMTcwOTIsImp0aSI6ImMwNjU2ZGVjLTI5ZmEtNDMzYi04MzkwLTk0OTg2OGE4MDQzMCJ9.9aUf7EMUjKCHQv04vmh35rNBYaeCrp02C63VxZGOYbY --insecure" dir= execID=32e5f
time="2023-11-03T13:11:32Z" level=debug duration=90.818454ms execID=32e5f
time="2023-11-03T13:11:32Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=26efd
time="2023-11-03T13:11:32Z" level=debug duration=1.9987ms execID=26efd
time="2023-11-03T13:11:32Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=42f26
time="2023-11-03T13:11:32Z" level=debug duration=1.633636ms execID=42f26
time="2023-11-03T13:11:32Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=cd625
time="2023-11-03T13:11:32Z" level=debug duration=1.486417ms execID=cd625
time="2023-11-03T13:11:32Z" level=info msg="pkill -9 gpg-agent" dir= execID=b3b4d
time="2023-11-03T13:11:32Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=ecac2
time="2023-11-03T13:11:32Z" level=debug duration=9.789985ms execID=ecac2
time="2023-11-03T13:11:32Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=63e64
time="2023-11-03T13:11:32Z" level=debug duration=33.397726ms execID=63e64
time="2023-11-03T13:11:32Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=e8725
time="2023-11-03T13:11:32Z" level=debug duration=2.060436ms execID=e8725
time="2023-11-03T13:11:32Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=4fc55
time="2023-11-03T13:11:32Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=19.011205ms execID=4fc55
time="2023-11-03T13:11:32Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=de0ca
time="2023-11-03T13:11:32Z" level=debug duration=27.217475ms execID=de0ca
time="2023-11-03T13:11:32Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=3118b
time="2023-11-03T13:11:32Z" level=debug duration=22.093366ms execID=3118b
time="2023-11-03T13:11:32Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=180ab
time="2023-11-03T13:11:32Z" level=debug duration=2.832744ms execID=180ab
time="2023-11-03T13:11:32Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=f1786
Handling connection for 9081
time="2023-11-03T13:11:32Z" level=debug duration=88.053021ms execID=f1786
time="2023-11-03T13:11:32Z" level=info msg="kubectl create ns argocd-e2e--test-deleting-app-stuck-in-sync-jcvor" dir= execID=9c3ed
time="2023-11-03T13:11:33Z" level=debug msg="namespace/argocd-e2e--test-deleting-app-stuck-in-sync-jcvor created\n" duration=156.651663ms execID=9c3ed
time="2023-11-03T13:11:33Z" level=info msg="kubectl label ns argocd-e2e--test-deleting-app-stuck-in-sync-jcvor e2e.argoproj.io=true" dir= execID=1f985
time="2023-11-03T13:11:33Z" level=debug msg="namespace/argocd-e2e--test-deleting-app-stuck-in-sync-jcvor labeled\n" duration=202.513031ms execID=1f985
time="2023-11-03T13:11:33Z" level=info msg="clean state" duration=2.392640635s id=TestDeletingAppStuckInSync-jcvor name=TestDeletingAppStuckInSync password=password username=admin
time="2023-11-03T13:11:34Z" level=info msg="../../dist/argocd app create test-deleting-app-stuck-in-sync --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path hook-custom-health --project default --dest-namespace argocd-e2e--test-deleting-app-stuck-in-sync-jcvor --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQ5MiwibmJmIjoxNjk5MDE3MDkyLCJpYXQiOjE2OTkwMTcwOTIsImp0aSI6ImMwNjU2ZGVjLTI5ZmEtNDMzYi04MzkwLTk0OTg2OGE4MDQzMCJ9.9aUf7EMUjKCHQv04vmh35rNBYaeCrp02C63VxZGOYbY --insecure" dir= execID=fc220
time="2023-11-03T13:11:34Z" level=debug msg="application 'test-deleting-app-stuck-in-sync' created\n" duration=246.476254ms execID=fc220
time="2023-11-03T13:11:34Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:11:34Z" level=info msg="../../dist/argocd app sync test-deleting-app-stuck-in-sync --timeout 30 --async --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQ5MiwibmJmIjoxNjk5MDE3MDkyLCJpYXQiOjE2OTkwMTcwOTIsImp0aSI6ImMwNjU2ZGVjLTI5ZmEtNDMzYi04MzkwLTk0OTg2OGE4MDQzMCJ9.9aUf7EMUjKCHQv04vmh35rNBYaeCrp02C63VxZGOYbY --insecure" dir= execID=5ee3b
time="2023-11-03T13:11:34Z" level=debug duration=101.105484ms execID=5ee3b
time="2023-11-03T13:11:34Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:11:34Z" level=info msg="expectation succeeded: operation phase should be Running, is Running"
time="2023-11-03T13:11:34Z" level=info msg="pending: sync status to be OutOfSync, is "
time="2023-11-03T13:11:37Z" level=info msg="pending: sync status to be OutOfSync, is "
time="2023-11-03T13:11:40Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:11:40Z" level=info msg="../../dist/argocd app delete test-deleting-app-stuck-in-sync --cascade=true --yes --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQ5MiwibmJmIjoxNjk5MDE3MDkyLCJpYXQiOjE2OTkwMTcwOTIsImp0aSI6ImMwNjU2ZGVjLTI5ZmEtNDMzYi04MzkwLTk0OTg2OGE4MDQzMCJ9.9aUf7EMUjKCHQv04vmh35rNBYaeCrp02C63VxZGOYbY --insecure" dir= execID=63977
time="2023-11-03T13:11:40Z" level=debug duration=100.01019ms execID=63977
time="2023-11-03T13:11:40Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:11:40Z" level=info msg="expectation succeeded: operation phase should be Running, is Running"
time="2023-11-03T13:11:40Z" level=info msg="../../dist/argocd app terminate-op test-deleting-app-stuck-in-sync --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzQ5MiwibmJmIjoxNjk5MDE3MDkyLCJpYXQiOjE2OTkwMTcwOTIsImp0aSI6ImMwNjU2ZGVjLTI5ZmEtNDMzYi04MzkwLTk0OTg2OGE4MDQzMCJ9.9aUf7EMUjKCHQv04vmh35rNBYaeCrp02C63VxZGOYbY --insecure" dir= execID=60f72
time="2023-11-03T13:11:40Z" level=debug msg="Application 'test-deleting-app-stuck-in-sync' operation terminating\n" duration=95.336473ms execID=60f72
time="2023-11-03T13:11:40Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:11:40Z" level=info msg="pending: app should not exist"
time="2023-11-03T13:11:43Z" level=info msg="expectation succeeded: app does not exist"
time="2023-11-03T13:11:43Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestDeletingAppStuckInSync (13.01s)
=== RUN   TestDeletingAppByLabel
time="2023-11-03T13:11:43Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=add06
time="2023-11-03T13:11:44Z" level=debug msg="namespace \"argocd-e2e--test-deleting-app-stuck-in-sync-jcvor\" deleted\n" duration=246.337427ms execID=add06
time="2023-11-03T13:11:44Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=e5f58
time="2023-11-03T13:11:44Z" level=debug msg="No resources found\n" duration=453.080092ms execID=e5f58
time="2023-11-03T13:11:44Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=cc6e6
time="2023-11-03T13:11:44Z" level=debug msg="No resources found\n" duration=170.596742ms execID=cc6e6
time="2023-11-03T13:11:45Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:11:45Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzUwNSwibmJmIjoxNjk5MDE3MTA1LCJpYXQiOjE2OTkwMTcxMDUsImp0aSI6IjU4NzgxODI0LTRjZjEtNGNmZS1iYjk2LWUyMmMyMGVlNzY2NiJ9.WK4_X_ANsNfaiin_u3lzKSZB3E2UlfctolU5N5lW5QM --insecure" dir= execID=1ed07
time="2023-11-03T13:11:45Z" level=debug duration=123.701512ms execID=1ed07
time="2023-11-03T13:11:45Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=e88f8
time="2023-11-03T13:11:45Z" level=debug duration=2.041407ms execID=e88f8
time="2023-11-03T13:11:45Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=11b3e
time="2023-11-03T13:11:45Z" level=debug duration=1.645673ms execID=11b3e
time="2023-11-03T13:11:45Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=a9cef
time="2023-11-03T13:11:45Z" level=debug duration=1.504796ms execID=a9cef
time="2023-11-03T13:11:45Z" level=info msg="pkill -9 gpg-agent" dir= execID=130f1
time="2023-11-03T13:11:45Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=81ad7
time="2023-11-03T13:11:45Z" level=debug duration=9.618073ms execID=81ad7
time="2023-11-03T13:11:45Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=8208c
time="2023-11-03T13:11:45Z" level=debug duration=33.718618ms execID=8208c
time="2023-11-03T13:11:45Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=62803
time="2023-11-03T13:11:45Z" level=debug duration=1.720341ms execID=62803
time="2023-11-03T13:11:45Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=a08f5
time="2023-11-03T13:11:45Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.068387ms execID=a08f5
time="2023-11-03T13:11:45Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=c2839
time="2023-11-03T13:11:45Z" level=debug duration=28.889808ms execID=c2839
time="2023-11-03T13:11:45Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=c6caf
time="2023-11-03T13:11:45Z" level=debug duration=21.65021ms execID=c6caf
time="2023-11-03T13:11:45Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=2f9c6
time="2023-11-03T13:11:45Z" level=debug duration=2.908505ms execID=2f9c6
time="2023-11-03T13:11:45Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=f2a1f
Handling connection for 9081
time="2023-11-03T13:11:45Z" level=debug duration=82.450404ms execID=f2a1f
time="2023-11-03T13:11:45Z" level=info msg="kubectl create ns argocd-e2e--test-deleting-app-by-label-zfmlo" dir= execID=3f6e2
time="2023-11-03T13:11:45Z" level=debug msg="namespace/argocd-e2e--test-deleting-app-by-label-zfmlo created\n" duration=125.873965ms execID=3f6e2
time="2023-11-03T13:11:45Z" level=info msg="kubectl label ns argocd-e2e--test-deleting-app-by-label-zfmlo e2e.argoproj.io=true" dir= execID=2ed98
time="2023-11-03T13:11:46Z" level=debug msg="namespace/argocd-e2e--test-deleting-app-by-label-zfmlo labeled\n" duration=266.53572ms execID=2ed98
time="2023-11-03T13:11:46Z" level=info msg="clean state" duration=2.396203746s id=TestDeletingAppByLabel-zfmlo name=TestDeletingAppByLabel password=password username=admin
time="2023-11-03T13:11:47Z" level=info msg="../../dist/argocd app create test-deleting-app-by-label --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --label=foo=bar --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-deleting-app-by-label-zfmlo --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzUwNSwibmJmIjoxNjk5MDE3MTA1LCJpYXQiOjE2OTkwMTcxMDUsImp0aSI6IjU4NzgxODI0LTRjZjEtNGNmZS1iYjk2LWUyMmMyMGVlNzY2NiJ9.WK4_X_ANsNfaiin_u3lzKSZB3E2UlfctolU5N5lW5QM --insecure" dir= execID=b7e99
time="2023-11-03T13:11:47Z" level=debug msg="application 'test-deleting-app-by-label' created\n" duration=225.161452ms execID=b7e99
time="2023-11-03T13:11:47Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:11:47Z" level=info msg="../../dist/argocd app sync test-deleting-app-by-label --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzUwNSwibmJmIjoxNjk5MDE3MTA1LCJpYXQiOjE2OTkwMTcxMDUsImp0aSI6IjU4NzgxODI0LTRjZjEtNGNmZS1iYjk2LWUyMmMyMGVlNzY2NiJ9.WK4_X_ANsNfaiin_u3lzKSZB3E2UlfctolU5N5lW5QM --insecure" dir= execID=88325
time="2023-11-03T13:11:51Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:11:51+00:00            Service  argocd-e2e--test-deleting-app-by-label-zfmlo          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:11:51+00:00   apps  Deployment  argocd-e2e--test-deleting-app-by-label-zfmlo          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:11:51+00:00            Service  argocd-e2e--test-deleting-app-by-label-zfmlo          guestbook-ui    Synced  Healthy              \n\nName:               argocd-e2e/test-deleting-app-by-label\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-deleting-app-by-label-zfmlo\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-deleting-app-by-label\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (fdd6970)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      fdd6970180dc093e74a5145ff7da584578212011\nPhase:              Succeeded\nStart:              2023-11-03 13:11:47 +0000 UTC\nFinished:           2023-11-03 13:11:51 +0000 UTC\nDuration:           4s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                     NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-deleting-app-by-label-zfmlo  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-deleting-app-by-label-zfmlo  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=4.199517058s execID=88325
time="2023-11-03T13:11:51Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:11:51Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:11:51Z" level=info msg="../../dist/argocd app delete --selector=foo=baz --yes --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzUwNSwibmJmIjoxNjk5MDE3MTA1LCJpYXQiOjE2OTkwMTcxMDUsImp0aSI6IjU4NzgxODI0LTRjZjEtNGNmZS1iYjk2LWUyMmMyMGVlNzY2NiJ9.WK4_X_ANsNfaiin_u3lzKSZB3E2UlfctolU5N5lW5QM --insecure" dir= execID=4feaf
time="2023-11-03T13:11:51Z" level=debug duration=59.75466ms execID=4feaf
time="2023-11-03T13:11:51Z" level=error msg="`../../dist/argocd app delete --selector=foo=baz --yes --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzUwNSwibmJmIjoxNjk5MDE3MTA1LCJpYXQiOjE2OTkwMTcxMDUsImp0aSI6IjU4NzgxODI0LTRjZjEtNGNmZS1iYjk2LWUyMmMyMGVlNzY2NiJ9.WK4_X_ANsNfaiin_u3lzKSZB3E2UlfctolU5N5lW5QM --insecure` failed exit status 20: time=\"2023-11-03T13:11:51Z\" level=fatal msg=\"no apps match selector foo=baz\"" execID=4feaf
time="2023-11-03T13:11:51Z" level=info msg="../../dist/argocd app delete --selector=foo=bar --yes --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzUwNSwibmJmIjoxNjk5MDE3MTA1LCJpYXQiOjE2OTkwMTcxMDUsImp0aSI6IjU4NzgxODI0LTRjZjEtNGNmZS1iYjk2LWUyMmMyMGVlNzY2NiJ9.WK4_X_ANsNfaiin_u3lzKSZB3E2UlfctolU5N5lW5QM --insecure" dir= execID=8f7ae
time="2023-11-03T13:11:51Z" level=debug duration=162.734379ms execID=8f7ae
time="2023-11-03T13:11:51Z" level=info msg="pending: app should not exist"
time="2023-11-03T13:11:54Z" level=info msg="expectation succeeded: app does not exist"
time="2023-11-03T13:11:54Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestDeletingAppByLabel (11.10s)
=== RUN   TestNamespacedGetLogsAllowNoSwitch
--- PASS: TestNamespacedGetLogsAllowNoSwitch (0.00s)
=== RUN   TestNamespacedGetLogsDenySwitchOn
    fixture.go:901: 
--- SKIP: TestNamespacedGetLogsDenySwitchOn (0.00s)
=== RUN   TestNamespacedGetLogsAllowSwitchOnNS
    fixture.go:901: 
--- SKIP: TestNamespacedGetLogsAllowSwitchOnNS (0.00s)
=== RUN   TestNamespacedGetLogsAllowSwitchOff
    fixture.go:901: 
--- SKIP: TestNamespacedGetLogsAllowSwitchOff (0.00s)
=== RUN   TestNamespacedSyncToUnsignedCommit
    fixture.go:901: 
--- SKIP: TestNamespacedSyncToUnsignedCommit (0.00s)
=== RUN   TestNamespacedSyncToSignedCommitWKK
    fixture.go:901: 
--- SKIP: TestNamespacedSyncToSignedCommitWKK (0.00s)
=== RUN   TestNamespacedSyncToSignedCommitKWKK
    fixture.go:901: 
--- SKIP: TestNamespacedSyncToSignedCommitKWKK (0.00s)
=== RUN   TestNamespacedAppCreation
time="2023-11-03T13:11:54Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=40677
time="2023-11-03T13:11:55Z" level=debug msg="namespace \"argocd-e2e--test-deleting-app-by-label-zfmlo\" deleted\n" duration=177.276674ms execID=40677
time="2023-11-03T13:11:55Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=da932
time="2023-11-03T13:11:55Z" level=debug msg="No resources found\n" duration=390.655234ms execID=da932
time="2023-11-03T13:11:55Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=26052
time="2023-11-03T13:11:55Z" level=debug msg="No resources found\n" duration=218.100914ms execID=26052
time="2023-11-03T13:11:56Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:11:56Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzUxNiwibmJmIjoxNjk5MDE3MTE2LCJpYXQiOjE2OTkwMTcxMTYsImp0aSI6ImI4MWExZmExLTZmNDUtNDQ3NC1iNGNjLTY5OTJlYjVhMTRlMyJ9.PSyL3NBskG2vQS6Vn7U0nrNiZhJwWty8ekAT6EppbXk --insecure" dir= execID=f361e
time="2023-11-03T13:11:56Z" level=debug duration=70.314471ms execID=f361e
time="2023-11-03T13:11:56Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=1b420
time="2023-11-03T13:11:56Z" level=debug duration=1.828805ms execID=1b420
time="2023-11-03T13:11:56Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=a3c37
time="2023-11-03T13:11:56Z" level=debug duration=1.591865ms execID=a3c37
time="2023-11-03T13:11:56Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=89e44
time="2023-11-03T13:11:56Z" level=debug duration=1.606576ms execID=89e44
time="2023-11-03T13:11:56Z" level=info msg="pkill -9 gpg-agent" dir= execID=0dadc
time="2023-11-03T13:11:56Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=70dd0
time="2023-11-03T13:11:56Z" level=debug duration=9.465184ms execID=70dd0
time="2023-11-03T13:11:56Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=ad318
time="2023-11-03T13:11:56Z" level=debug duration=34.869464ms execID=ad318
time="2023-11-03T13:11:56Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=6d5fd
time="2023-11-03T13:11:56Z" level=debug duration=1.671628ms execID=6d5fd
time="2023-11-03T13:11:56Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=30c35
time="2023-11-03T13:11:56Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.816471ms execID=30c35
time="2023-11-03T13:11:56Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=ce539
time="2023-11-03T13:11:56Z" level=debug duration=25.543132ms execID=ce539
time="2023-11-03T13:11:56Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=5597e
time="2023-11-03T13:11:56Z" level=debug duration=32.32937ms execID=5597e
time="2023-11-03T13:11:56Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=ba949
time="2023-11-03T13:11:56Z" level=debug duration=2.421074ms execID=ba949
time="2023-11-03T13:11:56Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=f5012
Handling connection for 9081
time="2023-11-03T13:11:56Z" level=debug duration=59.91852ms execID=f5012
time="2023-11-03T13:11:56Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-app-creation-usqho" dir= execID=bac66
time="2023-11-03T13:11:56Z" level=debug msg="namespace/argocd-e2e--test-namespaced-app-creation-usqho created\n" duration=150.805571ms execID=bac66
time="2023-11-03T13:11:56Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-app-creation-usqho e2e.argoproj.io=true" dir= execID=c92ad
time="2023-11-03T13:11:57Z" level=debug msg="namespace/argocd-e2e--test-namespaced-app-creation-usqho labeled\n" duration=266.025725ms execID=c92ad
time="2023-11-03T13:11:57Z" level=info msg="clean state" duration=2.284450268s id=TestNamespacedAppCreation-usqho name=TestNamespacedAppCreation password=password username=admin
time="2023-11-03T13:11:58Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-app-creation --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-namespaced-app-creation-usqho --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzUxNiwibmJmIjoxNjk5MDE3MTE2LCJpYXQiOjE2OTkwMTcxMTYsImp0aSI6ImI4MWExZmExLTZmNDUtNDQ3NC1iNGNjLTY5OTJlYjVhMTRlMyJ9.PSyL3NBskG2vQS6Vn7U0nrNiZhJwWty8ekAT6EppbXk --insecure" dir= execID=ddd61
time="2023-11-03T13:11:58Z" level=debug msg="application 'test-namespaced-app-creation' created\n" duration=224.644569ms execID=ddd61
time="2023-11-03T13:11:58Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:11:58Z" level=info msg="pending: sync status to be OutOfSync, is "
time="2023-11-03T13:12:01Z" level=info msg="pending: sync status to be OutOfSync, is "
time="2023-11-03T13:12:04Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:12:04Z" level=info msg="expectation succeeded: found event with reason=ResourceCreated; message=create"
time="2023-11-03T13:12:04Z" level=info msg="../../dist/argocd app list --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzUxNiwibmJmIjoxNjk5MDE3MTE2LCJpYXQiOjE2OTkwMTcxMTYsImp0aSI6ImI4MWExZmExLTZmNDUtNDQ3NC1iNGNjLTY5OTJlYjVhMTRlMyJ9.PSyL3NBskG2vQS6Vn7U0nrNiZhJwWty8ekAT6EppbXk --insecure" dir= execID=a658c
time="2023-11-03T13:12:04Z" level=debug msg="NAME                                              CLUSTER                         NAMESPACE                                       PROJECT  STATUS     HEALTH   SYNCPOLICY  CONDITIONS  REPO                                                 PATH       TARGET\nargocd-e2e-external/test-namespaced-app-creation  https://kubernetes.default.svc  argocd-e2e--test-namespaced-app-creation-usqho  default  OutOfSync  Missing  <none>      <none>      http://argocd-e2e-server:9081/argo-e2e/testdata.git  guestbook  \n" duration=58.620049ms execID=a658c
time="2023-11-03T13:12:04Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-app-creation --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-namespaced-app-creation-usqho --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzUxNiwibmJmIjoxNjk5MDE3MTE2LCJpYXQiOjE2OTkwMTcxMTYsImp0aSI6ImI4MWExZmExLTZmNDUtNDQ3NC1iNGNjLTY5OTJlYjVhMTRlMyJ9.PSyL3NBskG2vQS6Vn7U0nrNiZhJwWty8ekAT6EppbXk --insecure" dir= execID=5fe4c
time="2023-11-03T13:12:04Z" level=debug msg="application 'test-namespaced-app-creation' created\n" duration=170.208749ms execID=5fe4c
time="2023-11-03T13:12:04Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:12:05Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-app-creation --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --upsert --dest-server https://kubernetes.default.svc --path guestbook --project default --revision master --dest-namespace argocd-e2e--test-namespaced-app-creation-usqho --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzUxNiwibmJmIjoxNjk5MDE3MTE2LCJpYXQiOjE2OTkwMTcxMTYsImp0aSI6ImI4MWExZmExLTZmNDUtNDQ3NC1iNGNjLTY5OTJlYjVhMTRlMyJ9.PSyL3NBskG2vQS6Vn7U0nrNiZhJwWty8ekAT6EppbXk --insecure" dir= execID=9770a
time="2023-11-03T13:12:05Z" level=debug msg="application 'test-namespaced-app-creation' created\n" duration=150.927285ms execID=9770a
time="2023-11-03T13:12:05Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:12:05Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedAppCreation (10.95s)
=== RUN   TestNamespacedAppCreationWithoutForceUpdate
time="2023-11-03T13:12:05Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=6a317
time="2023-11-03T13:12:06Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-app-creation-usqho\" deleted\n" duration=212.330214ms execID=6a317
time="2023-11-03T13:12:06Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=b257f
time="2023-11-03T13:12:06Z" level=debug msg="No resources found\n" duration=425.878876ms execID=b257f
time="2023-11-03T13:12:06Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=42ff6
time="2023-11-03T13:12:06Z" level=debug msg="No resources found\n" duration=261.483841ms execID=42ff6
time="2023-11-03T13:12:07Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:12:07Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzUyNywibmJmIjoxNjk5MDE3MTI3LCJpYXQiOjE2OTkwMTcxMjcsImp0aSI6IjljZDczYTRmLTE0MjMtNDQxMS04ZWQ2LWZiMTA0MTZjZmE3NyJ9.RLeoeTdrDKy-Dvv_BsC-_OmZf_1S7CngV2LpZnjiKl8 --insecure" dir= execID=bd999
time="2023-11-03T13:12:07Z" level=debug duration=74.800044ms execID=bd999
time="2023-11-03T13:12:07Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=51bda
time="2023-11-03T13:12:07Z" level=debug duration=2.099811ms execID=51bda
time="2023-11-03T13:12:07Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=2eca8
time="2023-11-03T13:12:07Z" level=debug duration=1.884401ms execID=2eca8
time="2023-11-03T13:12:07Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=70b51
time="2023-11-03T13:12:07Z" level=debug duration=1.625941ms execID=70b51
time="2023-11-03T13:12:07Z" level=info msg="pkill -9 gpg-agent" dir= execID=6e2ae
time="2023-11-03T13:12:07Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=eeb73
time="2023-11-03T13:12:07Z" level=debug duration=9.984085ms execID=eeb73
time="2023-11-03T13:12:07Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=7e819
time="2023-11-03T13:12:07Z" level=debug duration=35.787358ms execID=7e819
time="2023-11-03T13:12:07Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=fec6c
time="2023-11-03T13:12:07Z" level=debug duration=1.821903ms execID=fec6c
time="2023-11-03T13:12:07Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=ece9a
time="2023-11-03T13:12:07Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.880045ms execID=ece9a
time="2023-11-03T13:12:07Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=0ba53
time="2023-11-03T13:12:07Z" level=debug duration=35.542936ms execID=0ba53
time="2023-11-03T13:12:07Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=334e9
time="2023-11-03T13:12:07Z" level=debug duration=23.155554ms execID=334e9
time="2023-11-03T13:12:07Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=7b551
time="2023-11-03T13:12:07Z" level=debug duration=2.512405ms execID=7b551
time="2023-11-03T13:12:07Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=4395d
Handling connection for 9081
time="2023-11-03T13:12:07Z" level=debug duration=60.797174ms execID=4395d
time="2023-11-03T13:12:07Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-app-creation-without-force-up-vozzo" dir= execID=86fcd
time="2023-11-03T13:12:07Z" level=debug msg="namespace/argocd-e2e--test-namespaced-app-creation-without-force-up-vozzo created\n" duration=160.556696ms execID=86fcd
time="2023-11-03T13:12:07Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-app-creation-without-force-up-vozzo e2e.argoproj.io=true" dir= execID=223b2
time="2023-11-03T13:12:08Z" level=debug msg="namespace/argocd-e2e--test-namespaced-app-creation-without-force-up-vozzo labeled\n" duration=287.927687ms execID=223b2
time="2023-11-03T13:12:08Z" level=info msg="clean state" duration=2.369525838s id=TestNamespacedAppCreationWithoutForceUpdate-vozzo name=TestNamespacedAppCreationWithoutForceUpdate password=password username=admin
time="2023-11-03T13:12:09Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-app-creation-without-force-update --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-name in-cluster --path guestbook --project default --dest-namespace argocd-e2e--test-namespaced-app-creation-without-force-up-vozzo --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzUyNywibmJmIjoxNjk5MDE3MTI3LCJpYXQiOjE2OTkwMTcxMjcsImp0aSI6IjljZDczYTRmLTE0MjMtNDQxMS04ZWQ2LWZiMTA0MTZjZmE3NyJ9.RLeoeTdrDKy-Dvv_BsC-_OmZf_1S7CngV2LpZnjiKl8 --insecure" dir= execID=f853c
time="2023-11-03T13:12:09Z" level=debug msg="application 'test-namespaced-app-creation-without-force-update' created\n" duration=224.800791ms execID=f853c
time="2023-11-03T13:12:09Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:12:09Z" level=info msg="pending: sync status to be OutOfSync, is "
time="2023-11-03T13:12:12Z" level=info msg="pending: sync status to be OutOfSync, is "
time="2023-11-03T13:12:15Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:12:15Z" level=info msg="expectation succeeded: found event with reason=ResourceCreated; message=create"
time="2023-11-03T13:12:15Z" level=info msg="../../dist/argocd app list --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzUyNywibmJmIjoxNjk5MDE3MTI3LCJpYXQiOjE2OTkwMTcxMjcsImp0aSI6IjljZDczYTRmLTE0MjMtNDQxMS04ZWQ2LWZiMTA0MTZjZmE3NyJ9.RLeoeTdrDKy-Dvv_BsC-_OmZf_1S7CngV2LpZnjiKl8 --insecure" dir= execID=d02d3
time="2023-11-03T13:12:15Z" level=debug msg="NAME                                                                   CLUSTER     NAMESPACE                                                        PROJECT  STATUS     HEALTH   SYNCPOLICY  CONDITIONS  REPO                                                 PATH       TARGET\nargocd-e2e-external/test-namespaced-app-creation-without-force-update  in-cluster  argocd-e2e--test-namespaced-app-creation-without-force-up-vozzo  default  OutOfSync  Missing  <none>      <none>      http://argocd-e2e-server:9081/argo-e2e/testdata.git  guestbook  \n" duration=101.606289ms execID=d02d3
time="2023-11-03T13:12:15Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-app-creation-without-force-update --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-name in-cluster --path guestbook --project default --dest-namespace argocd-e2e--test-namespaced-app-creation-without-force-up-vozzo --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzUyNywibmJmIjoxNjk5MDE3MTI3LCJpYXQiOjE2OTkwMTcxMjcsImp0aSI6IjljZDczYTRmLTE0MjMtNDQxMS04ZWQ2LWZiMTA0MTZjZmE3NyJ9.RLeoeTdrDKy-Dvv_BsC-_OmZf_1S7CngV2LpZnjiKl8 --insecure" dir= execID=efe0e
time="2023-11-03T13:12:15Z" level=debug duration=173.293611ms execID=efe0e
time="2023-11-03T13:12:15Z" level=error msg="`../../dist/argocd app create argocd-e2e-external/test-namespaced-app-creation-without-force-update --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-name in-cluster --path guestbook --project default --dest-namespace argocd-e2e--test-namespaced-app-creation-without-force-up-vozzo --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzUyNywibmJmIjoxNjk5MDE3MTI3LCJpYXQiOjE2OTkwMTcxMjcsImp0aSI6IjljZDczYTRmLTE0MjMtNDQxMS04ZWQ2LWZiMTA0MTZjZmE3NyJ9.RLeoeTdrDKy-Dvv_BsC-_OmZf_1S7CngV2LpZnjiKl8 --insecure` failed exit status 20: time=\"2023-11-03T13:12:15Z\" level=fatal msg=\"rpc error: code = InvalidArgument desc = existing application spec is different, use upsert flag to force update\"" execID=efe0e
time="2023-11-03T13:12:15Z" level=info msg="expectation succeeded: error ''"
time="2023-11-03T13:12:15Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedAppCreationWithoutForceUpdate (9.91s)
=== RUN   TestNamespacedDeleteAppResource
time="2023-11-03T13:12:15Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=0b060
time="2023-11-03T13:12:16Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-app-creation-without-force-up-vozzo\" deleted\n" duration=197.646272ms execID=0b060
time="2023-11-03T13:12:16Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=6c5e4
time="2023-11-03T13:12:16Z" level=debug msg="No resources found\n" duration=412.307118ms execID=6c5e4
time="2023-11-03T13:12:16Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=70477
time="2023-11-03T13:12:16Z" level=debug msg="No resources found\n" duration=209.213375ms execID=70477
time="2023-11-03T13:12:17Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:12:17Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzUzNywibmJmIjoxNjk5MDE3MTM3LCJpYXQiOjE2OTkwMTcxMzcsImp0aSI6IjkzZGI4MDliLWNmMzItNDE2ZC04OTQ0LTk2NGMyZTM5YzgyYyJ9.H0AYATYxxO3RC0G99EGZ9gmKpef9EER9wO1VCVpa9b4 --insecure" dir= execID=d4411
time="2023-11-03T13:12:17Z" level=debug duration=104.684388ms execID=d4411
time="2023-11-03T13:12:17Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=c0d50
time="2023-11-03T13:12:17Z" level=debug duration=2.29811ms execID=c0d50
time="2023-11-03T13:12:17Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=115eb
time="2023-11-03T13:12:17Z" level=debug duration=1.654497ms execID=115eb
time="2023-11-03T13:12:17Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=41992
time="2023-11-03T13:12:17Z" level=debug duration=1.399573ms execID=41992
time="2023-11-03T13:12:17Z" level=info msg="pkill -9 gpg-agent" dir= execID=a4837
time="2023-11-03T13:12:17Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=81d8e
time="2023-11-03T13:12:17Z" level=debug duration=10.124496ms execID=81d8e
time="2023-11-03T13:12:17Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=e15c5
time="2023-11-03T13:12:17Z" level=debug duration=79.456564ms execID=e15c5
time="2023-11-03T13:12:17Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=d63fe
time="2023-11-03T13:12:17Z" level=debug duration=1.917047ms execID=d63fe
time="2023-11-03T13:12:17Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=af801
time="2023-11-03T13:12:17Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.66692ms execID=af801
time="2023-11-03T13:12:17Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=ad71d
time="2023-11-03T13:12:17Z" level=debug duration=24.557957ms execID=ad71d
time="2023-11-03T13:12:17Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=677f8
time="2023-11-03T13:12:17Z" level=debug duration=22.156441ms execID=677f8
time="2023-11-03T13:12:17Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=f58d1
time="2023-11-03T13:12:17Z" level=debug duration=2.627263ms execID=f58d1
time="2023-11-03T13:12:17Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=51420
Handling connection for 9081
time="2023-11-03T13:12:17Z" level=debug duration=81.940818ms execID=51420
time="2023-11-03T13:12:17Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-delete-app-resource-gcrqa" dir= execID=7de1c
time="2023-11-03T13:12:17Z" level=debug msg="namespace/argocd-e2e--test-namespaced-delete-app-resource-gcrqa created\n" duration=138.68636ms execID=7de1c
time="2023-11-03T13:12:17Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-delete-app-resource-gcrqa e2e.argoproj.io=true" dir= execID=c7bd6
time="2023-11-03T13:12:18Z" level=debug msg="namespace/argocd-e2e--test-namespaced-delete-app-resource-gcrqa labeled\n" duration=228.412715ms execID=c7bd6
time="2023-11-03T13:12:18Z" level=info msg="clean state" duration=2.250418166s id=TestNamespacedDeleteAppResource-gcrqa name=TestNamespacedDeleteAppResource password=password username=admin
time="2023-11-03T13:12:19Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-delete-app-resource --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-namespaced-delete-app-resource-gcrqa --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzUzNywibmJmIjoxNjk5MDE3MTM3LCJpYXQiOjE2OTkwMTcxMzcsImp0aSI6IjkzZGI4MDliLWNmMzItNDE2ZC04OTQ0LTk2NGMyZTM5YzgyYyJ9.H0AYATYxxO3RC0G99EGZ9gmKpef9EER9wO1VCVpa9b4 --insecure" dir= execID=29f91
time="2023-11-03T13:12:19Z" level=debug msg="application 'test-namespaced-delete-app-resource' created\n" duration=226.216983ms execID=29f91
time="2023-11-03T13:12:19Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:12:19Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-delete-app-resource --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzUzNywibmJmIjoxNjk5MDE3MTM3LCJpYXQiOjE2OTkwMTcxMzcsImp0aSI6IjkzZGI4MDliLWNmMzItNDE2ZC04OTQ0LTk2NGMyZTM5YzgyYyJ9.H0AYATYxxO3RC0G99EGZ9gmKpef9EER9wO1VCVpa9b4 --insecure" dir= execID=4c7e1
time="2023-11-03T13:12:23Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:12:23+00:00            Service  argocd-e2e--test-namespaced-delete-app-resource-gcrqa          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:12:23+00:00   apps  Deployment  argocd-e2e--test-namespaced-delete-app-resource-gcrqa          guestbook-ui  OutOfSync  Missing              \n\nName:               argocd-e2e-external/test-namespaced-delete-app-resource\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-delete-app-resource-gcrqa\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-delete-app-resource\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (721ed9e)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      721ed9e99c90e82bf3e4a508ac3a858b4f691659\nPhase:              Succeeded\nStart:              2023-11-03 13:12:19 +0000 UTC\nFinished:           2023-11-03 13:12:23 +0000 UTC\nDuration:           4s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                              NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-namespaced-delete-app-resource-gcrqa  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-namespaced-delete-app-resource-gcrqa  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=4.511187466s execID=4c7e1
time="2023-11-03T13:12:23Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:12:23Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:12:23Z" level=info msg="../../dist/argocd app delete-resource argocd-e2e-external/test-namespaced-delete-app-resource --kind Service --resource-name guestbook-ui --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzUzNywibmJmIjoxNjk5MDE3MTM3LCJpYXQiOjE2OTkwMTcxMzcsImp0aSI6IjkzZGI4MDliLWNmMzItNDE2ZC04OTQ0LTk2NGMyZTM5YzgyYyJ9.H0AYATYxxO3RC0G99EGZ9gmKpef9EER9wO1VCVpa9b4 --insecure" dir= execID=90d3d
time="2023-11-03T13:12:23Z" level=debug duration=110.340676ms execID=90d3d
time="2023-11-03T13:12:23Z" level=info msg="pending: sync status to be OutOfSync, is Synced"
time="2023-11-03T13:12:26Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:12:26Z" level=info msg="expectation succeeded: health to should Missing, is Missing"
time="2023-11-03T13:12:26Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedDeleteAppResource (11.14s)
=== RUN   TestNamespacedImmutableChange
    fixture.go:901: 
--- SKIP: TestNamespacedImmutableChange (0.00s)
=== RUN   TestNamespacedInvalidAppProject
time="2023-11-03T13:12:26Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=7a84a
time="2023-11-03T13:12:27Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-delete-app-resource-gcrqa\" deleted\n" duration=205.769661ms execID=7a84a
time="2023-11-03T13:12:27Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=c1908
time="2023-11-03T13:12:27Z" level=debug msg="No resources found\n" duration=321.903639ms execID=c1908
time="2023-11-03T13:12:27Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=c4039
time="2023-11-03T13:12:27Z" level=debug msg="No resources found\n" duration=233.211168ms execID=c4039
time="2023-11-03T13:12:28Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:12:28Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU0OCwibmJmIjoxNjk5MDE3MTQ4LCJpYXQiOjE2OTkwMTcxNDgsImp0aSI6IjFmOTBiZjViLTRmNjYtNDY2NC1iOTYxLTA0NmJjNTNkMmRkNiJ9.H2eD0Nmq1f-97P-lQuNROnWE8uBaVBq6FS504B6hr7k --insecure" dir= execID=27437
time="2023-11-03T13:12:28Z" level=debug duration=111.86644ms execID=27437
time="2023-11-03T13:12:28Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=fa204
time="2023-11-03T13:12:28Z" level=debug duration=1.985251ms execID=fa204
time="2023-11-03T13:12:28Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=5759a
time="2023-11-03T13:12:28Z" level=debug duration=1.774291ms execID=5759a
time="2023-11-03T13:12:28Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=738a8
time="2023-11-03T13:12:28Z" level=debug duration=2.021108ms execID=738a8
time="2023-11-03T13:12:28Z" level=info msg="pkill -9 gpg-agent" dir= execID=1d4b1
time="2023-11-03T13:12:28Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=e09dd
time="2023-11-03T13:12:28Z" level=debug duration=9.703003ms execID=e09dd
time="2023-11-03T13:12:28Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=cd77c
time="2023-11-03T13:12:28Z" level=debug duration=43.544222ms execID=cd77c
time="2023-11-03T13:12:28Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=4564a
time="2023-11-03T13:12:28Z" level=debug duration=1.902097ms execID=4564a
time="2023-11-03T13:12:28Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=da28e
time="2023-11-03T13:12:28Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.9555ms execID=da28e
time="2023-11-03T13:12:28Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=04b13
time="2023-11-03T13:12:28Z" level=debug duration=27.537553ms execID=04b13
time="2023-11-03T13:12:28Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=8c3b2
time="2023-11-03T13:12:29Z" level=debug duration=21.575305ms execID=8c3b2
time="2023-11-03T13:12:29Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=23671
time="2023-11-03T13:12:29Z" level=debug duration=2.202678ms execID=23671
time="2023-11-03T13:12:29Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=f3209
Handling connection for 9081
time="2023-11-03T13:12:29Z" level=debug duration=77.366137ms execID=f3209
time="2023-11-03T13:12:29Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-invalid-app-project-zjuso" dir= execID=14a57
time="2023-11-03T13:12:29Z" level=debug msg="namespace/argocd-e2e--test-namespaced-invalid-app-project-zjuso created\n" duration=163.539103ms execID=14a57
time="2023-11-03T13:12:29Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-invalid-app-project-zjuso e2e.argoproj.io=true" dir= execID=7f9ea
time="2023-11-03T13:12:29Z" level=debug msg="namespace/argocd-e2e--test-namespaced-invalid-app-project-zjuso labeled\n" duration=300.576547ms execID=7f9ea
time="2023-11-03T13:12:29Z" level=info msg="clean state" duration=2.603804212s id=TestNamespacedInvalidAppProject-zjuso name=TestNamespacedInvalidAppProject password=password username=admin
time="2023-11-03T13:12:30Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-invalid-app-project --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project does-not-exist --dest-namespace argocd-e2e--test-namespaced-invalid-app-project-zjuso --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU0OCwibmJmIjoxNjk5MDE3MTQ4LCJpYXQiOjE2OTkwMTcxNDgsImp0aSI6IjFmOTBiZjViLTRmNjYtNDY2NC1iOTYxLTA0NmJjNTNkMmRkNiJ9.H2eD0Nmq1f-97P-lQuNROnWE8uBaVBq6FS504B6hr7k --insecure" dir= execID=0e014
time="2023-11-03T13:12:30Z" level=debug duration=69.452053ms execID=0e014
time="2023-11-03T13:12:30Z" level=error msg="`../../dist/argocd app create argocd-e2e-external/test-namespaced-invalid-app-project --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project does-not-exist --dest-namespace argocd-e2e--test-namespaced-invalid-app-project-zjuso --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU0OCwibmJmIjoxNjk5MDE3MTQ4LCJpYXQiOjE2OTkwMTcxNDgsImp0aSI6IjFmOTBiZjViLTRmNjYtNDY2NC1iOTYxLTA0NmJjNTNkMmRkNiJ9.H2eD0Nmq1f-97P-lQuNROnWE8uBaVBq6FS504B6hr7k --insecure` failed exit status 20: time=\"2023-11-03T13:12:30Z\" level=fatal msg=\"rpc error: code = PermissionDenied desc = permission denied\"" execID=0e014
time="2023-11-03T13:12:30Z" level=info msg="expectation succeeded: error ''"
time="2023-11-03T13:12:30Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedInvalidAppProject (3.68s)
=== RUN   TestNamespacedAppDeletion
time="2023-11-03T13:12:30Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=2ebab
time="2023-11-03T13:12:30Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-invalid-app-project-zjuso\" deleted\n" duration=266.977844ms execID=2ebab
time="2023-11-03T13:12:30Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=cd987
time="2023-11-03T13:12:31Z" level=debug msg="No resources found\n" duration=368.553235ms execID=cd987
time="2023-11-03T13:12:31Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=af8b1
time="2023-11-03T13:12:31Z" level=debug msg="No resources found\n" duration=223.656231ms execID=af8b1
time="2023-11-03T13:12:32Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:12:32Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU1MiwibmJmIjoxNjk5MDE3MTUyLCJpYXQiOjE2OTkwMTcxNTIsImp0aSI6IjQ4MWExNmUxLTI3YzYtNDQyZC1iNDJiLTkxYjFhMmFiYzgxYyJ9.ow-OzXr5sBqSOZdSVyFyEyBe0XAoNwVtQEcMBYmCf7Q --insecure" dir= execID=99e72
time="2023-11-03T13:12:32Z" level=debug duration=65.649819ms execID=99e72
time="2023-11-03T13:12:32Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=0186a
time="2023-11-03T13:12:32Z" level=debug duration=2.071274ms execID=0186a
time="2023-11-03T13:12:32Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=da328
time="2023-11-03T13:12:32Z" level=debug duration=1.604521ms execID=da328
time="2023-11-03T13:12:32Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=7c2e3
time="2023-11-03T13:12:32Z" level=debug duration=1.590277ms execID=7c2e3
time="2023-11-03T13:12:32Z" level=info msg="pkill -9 gpg-agent" dir= execID=dad96
time="2023-11-03T13:12:32Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=5f61f
time="2023-11-03T13:12:32Z" level=debug duration=9.971927ms execID=5f61f
time="2023-11-03T13:12:32Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=238a6
time="2023-11-03T13:12:32Z" level=debug duration=52.235306ms execID=238a6
time="2023-11-03T13:12:32Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=19845
time="2023-11-03T13:12:32Z" level=debug duration=1.896825ms execID=19845
time="2023-11-03T13:12:32Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=d345b
time="2023-11-03T13:12:32Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.406229ms execID=d345b
time="2023-11-03T13:12:32Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=4c4f4
time="2023-11-03T13:12:32Z" level=debug duration=26.807653ms execID=4c4f4
time="2023-11-03T13:12:32Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=3b8f6
time="2023-11-03T13:12:32Z" level=debug duration=21.019156ms execID=3b8f6
time="2023-11-03T13:12:32Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=b7625
time="2023-11-03T13:12:32Z" level=debug duration=2.195289ms execID=b7625
time="2023-11-03T13:12:32Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=e5980
Handling connection for 9081
time="2023-11-03T13:12:32Z" level=debug duration=63.37636ms execID=e5980
time="2023-11-03T13:12:32Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-app-deletion-bfxzq" dir= execID=0acaf
time="2023-11-03T13:12:32Z" level=debug msg="namespace/argocd-e2e--test-namespaced-app-deletion-bfxzq created\n" duration=155.793607ms execID=0acaf
time="2023-11-03T13:12:32Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-app-deletion-bfxzq e2e.argoproj.io=true" dir= execID=6f529
time="2023-11-03T13:12:32Z" level=debug msg="namespace/argocd-e2e--test-namespaced-app-deletion-bfxzq labeled\n" duration=234.855932ms execID=6f529
time="2023-11-03T13:12:32Z" level=info msg="clean state" duration=2.330707017s id=TestNamespacedAppDeletion-bfxzq name=TestNamespacedAppDeletion password=password username=admin
time="2023-11-03T13:12:33Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-app-deletion --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-namespaced-app-deletion-bfxzq --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU1MiwibmJmIjoxNjk5MDE3MTUyLCJpYXQiOjE2OTkwMTcxNTIsImp0aSI6IjQ4MWExNmUxLTI3YzYtNDQyZC1iNDJiLTkxYjFhMmFiYzgxYyJ9.ow-OzXr5sBqSOZdSVyFyEyBe0XAoNwVtQEcMBYmCf7Q --insecure" dir= execID=4fab7
time="2023-11-03T13:12:34Z" level=debug msg="application 'test-namespaced-app-deletion' created\n" duration=226.914775ms execID=4fab7
time="2023-11-03T13:12:34Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:12:34Z" level=info msg="pending: sync status to be OutOfSync, is "
time="2023-11-03T13:12:37Z" level=info msg="pending: sync status to be OutOfSync, is "
time="2023-11-03T13:12:40Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:12:40Z" level=info msg="../../dist/argocd app delete argocd-e2e-external/test-namespaced-app-deletion --cascade=true --yes --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU1MiwibmJmIjoxNjk5MDE3MTUyLCJpYXQiOjE2OTkwMTcxNTIsImp0aSI6IjQ4MWExNmUxLTI3YzYtNDQyZC1iNDJiLTkxYjFhMmFiYzgxYyJ9.ow-OzXr5sBqSOZdSVyFyEyBe0XAoNwVtQEcMBYmCf7Q --insecure" dir= execID=c8fca
time="2023-11-03T13:12:40Z" level=debug duration=93.034069ms execID=c8fca
time="2023-11-03T13:12:40Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:12:40Z" level=info msg="expectation succeeded: app does not exist"
time="2023-11-03T13:12:40Z" level=info msg="expectation succeeded: found event with reason=ResourceDeleted; message=delete"
time="2023-11-03T13:12:40Z" level=info msg="../../dist/argocd app list --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU1MiwibmJmIjoxNjk5MDE3MTUyLCJpYXQiOjE2OTkwMTcxNTIsImp0aSI6IjQ4MWExNmUxLTI3YzYtNDQyZC1iNDJiLTkxYjFhMmFiYzgxYyJ9.ow-OzXr5sBqSOZdSVyFyEyBe0XAoNwVtQEcMBYmCf7Q --insecure" dir= execID=5940f
time="2023-11-03T13:12:40Z" level=debug msg="NAME  CLUSTER  NAMESPACE  PROJECT  STATUS  HEALTH  SYNCPOLICY  CONDITIONS  REPO  PATH  TARGET\n" duration=113.656977ms execID=5940f
time="2023-11-03T13:12:40Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedAppDeletion (9.80s)
=== RUN   TestNamespacedAppLabels
time="2023-11-03T13:12:40Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=1a343
time="2023-11-03T13:12:40Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-app-deletion-bfxzq\" deleted\n" duration=285.563928ms execID=1a343
time="2023-11-03T13:12:40Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=db9f4
time="2023-11-03T13:12:41Z" level=debug msg="No resources found\n" duration=437.067984ms execID=db9f4
time="2023-11-03T13:12:41Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=63e4e
time="2023-11-03T13:12:41Z" level=debug msg="No resources found\n" duration=162.830599ms execID=63e4e
time="2023-11-03T13:12:42Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:12:42Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU2MiwibmJmIjoxNjk5MDE3MTYyLCJpYXQiOjE2OTkwMTcxNjIsImp0aSI6Ijc2YTUyODNjLWU0OTUtNDFkNi1iMGJmLTFmMmQwOTBiYzM1ZCJ9.NoKPJp2hEtXzbymuFTu6HWM65c4ChfvXidiZQBZQjw4 --insecure" dir= execID=a2c11
time="2023-11-03T13:12:42Z" level=debug duration=99.210693ms execID=a2c11
time="2023-11-03T13:12:42Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=740ff
time="2023-11-03T13:12:42Z" level=debug duration=2.006158ms execID=740ff
time="2023-11-03T13:12:42Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=59dd7
time="2023-11-03T13:12:42Z" level=debug duration=1.726012ms execID=59dd7
time="2023-11-03T13:12:42Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=4f8e2
time="2023-11-03T13:12:42Z" level=debug duration=1.519064ms execID=4f8e2
time="2023-11-03T13:12:42Z" level=info msg="pkill -9 gpg-agent" dir= execID=d02cd
time="2023-11-03T13:12:42Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=4714d
time="2023-11-03T13:12:42Z" level=debug duration=9.783843ms execID=4714d
time="2023-11-03T13:12:42Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=a5fa2
time="2023-11-03T13:12:42Z" level=debug duration=33.161171ms execID=a5fa2
time="2023-11-03T13:12:42Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=5606e
time="2023-11-03T13:12:42Z" level=debug duration=1.741709ms execID=5606e
time="2023-11-03T13:12:42Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=578f6
time="2023-11-03T13:12:42Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.751167ms execID=578f6
time="2023-11-03T13:12:42Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=97c89
time="2023-11-03T13:12:42Z" level=debug duration=37.652288ms execID=97c89
time="2023-11-03T13:12:42Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=a6b6f
time="2023-11-03T13:12:42Z" level=debug duration=22.075053ms execID=a6b6f
time="2023-11-03T13:12:42Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=c4fdb
time="2023-11-03T13:12:42Z" level=debug duration=2.29065ms execID=c4fdb
time="2023-11-03T13:12:42Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=cf213
Handling connection for 9081
time="2023-11-03T13:12:42Z" level=debug duration=79.885453ms execID=cf213
time="2023-11-03T13:12:42Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-app-labels-aofiz" dir= execID=c4221
time="2023-11-03T13:12:42Z" level=debug msg="namespace/argocd-e2e--test-namespaced-app-labels-aofiz created\n" duration=125.918007ms execID=c4221
time="2023-11-03T13:12:42Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-app-labels-aofiz e2e.argoproj.io=true" dir= execID=8b4de
time="2023-11-03T13:12:42Z" level=debug msg="namespace/argocd-e2e--test-namespaced-app-labels-aofiz labeled\n" duration=269.049957ms execID=8b4de
time="2023-11-03T13:12:42Z" level=info msg="clean state" duration=2.520414882s id=TestNamespacedAppLabels-aofiz name=TestNamespacedAppLabels password=password username=admin
time="2023-11-03T13:12:43Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-app-labels --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git -l foo=bar --dest-server https://kubernetes.default.svc --path config-map --project default --dest-namespace argocd-e2e--test-namespaced-app-labels-aofiz --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU2MiwibmJmIjoxNjk5MDE3MTYyLCJpYXQiOjE2OTkwMTcxNjIsImp0aSI6Ijc2YTUyODNjLWU0OTUtNDFkNi1iMGJmLTFmMmQwOTBiYzM1ZCJ9.NoKPJp2hEtXzbymuFTu6HWM65c4ChfvXidiZQBZQjw4 --insecure" dir= execID=4e39f
time="2023-11-03T13:12:44Z" level=debug msg="application 'test-namespaced-app-labels' created\n" duration=216.391143ms execID=4e39f
time="2023-11-03T13:12:44Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:12:44Z" level=info msg="../../dist/argocd app list --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU2MiwibmJmIjoxNjk5MDE3MTYyLCJpYXQiOjE2OTkwMTcxNjIsImp0aSI6Ijc2YTUyODNjLWU0OTUtNDFkNi1iMGJmLTFmMmQwOTBiYzM1ZCJ9.NoKPJp2hEtXzbymuFTu6HWM65c4ChfvXidiZQBZQjw4 --insecure" dir= execID=9e642
time="2023-11-03T13:12:44Z" level=debug msg="NAME                                            CLUSTER                         NAMESPACE                                     PROJECT  STATUS  HEALTH  SYNCPOLICY  CONDITIONS  REPO                                                 PATH        TARGET\nargocd-e2e-external/test-namespaced-app-labels  https://kubernetes.default.svc  argocd-e2e--test-namespaced-app-labels-aofiz  default                  <none>      <none>      http://argocd-e2e-server:9081/argo-e2e/testdata.git  config-map  \n" duration=67.535126ms execID=9e642
time="2023-11-03T13:12:44Z" level=info msg="../../dist/argocd app list -l foo=bar --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU2MiwibmJmIjoxNjk5MDE3MTYyLCJpYXQiOjE2OTkwMTcxNjIsImp0aSI6Ijc2YTUyODNjLWU0OTUtNDFkNi1iMGJmLTFmMmQwOTBiYzM1ZCJ9.NoKPJp2hEtXzbymuFTu6HWM65c4ChfvXidiZQBZQjw4 --insecure" dir= execID=a1b5a
time="2023-11-03T13:12:44Z" level=debug msg="NAME                                            CLUSTER                         NAMESPACE                                     PROJECT  STATUS  HEALTH  SYNCPOLICY  CONDITIONS  REPO                                                 PATH        TARGET\nargocd-e2e-external/test-namespaced-app-labels  https://kubernetes.default.svc  argocd-e2e--test-namespaced-app-labels-aofiz  default                  <none>      <none>      http://argocd-e2e-server:9081/argo-e2e/testdata.git  config-map  \n" duration=111.754927ms execID=a1b5a
time="2023-11-03T13:12:44Z" level=info msg="../../dist/argocd app list -l foo=rubbish --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU2MiwibmJmIjoxNjk5MDE3MTYyLCJpYXQiOjE2OTkwMTcxNjIsImp0aSI6Ijc2YTUyODNjLWU0OTUtNDFkNi1iMGJmLTFmMmQwOTBiYzM1ZCJ9.NoKPJp2hEtXzbymuFTu6HWM65c4ChfvXidiZQBZQjw4 --insecure" dir= execID=840a5
time="2023-11-03T13:12:44Z" level=debug msg="NAME  CLUSTER  NAMESPACE  PROJECT  STATUS  HEALTH  SYNCPOLICY  CONDITIONS  REPO  PATH  TARGET\n" duration=107.925317ms execID=840a5
time="2023-11-03T13:12:45Z" level=info msg="../../dist/argocd app sync -l foo=rubbish --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU2MiwibmJmIjoxNjk5MDE3MTYyLCJpYXQiOjE2OTkwMTcxNjIsImp0aSI6Ijc2YTUyODNjLWU0OTUtNDFkNi1iMGJmLTFmMmQwOTBiYzM1ZCJ9.NoKPJp2hEtXzbymuFTu6HWM65c4ChfvXidiZQBZQjw4 --insecure" dir= execID=7fb3c
time="2023-11-03T13:12:45Z" level=debug duration=104.310992ms execID=7fb3c
time="2023-11-03T13:12:45Z" level=error msg="`../../dist/argocd app sync -l foo=rubbish --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU2MiwibmJmIjoxNjk5MDE3MTYyLCJpYXQiOjE2OTkwMTcxNjIsImp0aSI6Ijc2YTUyODNjLWU0OTUtNDFkNi1iMGJmLTFmMmQwOTBiYzM1ZCJ9.NoKPJp2hEtXzbymuFTu6HWM65c4ChfvXidiZQBZQjw4 --insecure` failed exit status 1: time=\"2023-11-03T13:12:45Z\" level=fatal msg=\"No matching apps found for filter: selector foo=rubbish\"" execID=7fb3c
time="2023-11-03T13:12:45Z" level=info msg="expectation succeeded: error ''"
time="2023-11-03T13:12:46Z" level=info msg="../../dist/argocd app sync -l foo=bar --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU2MiwibmJmIjoxNjk5MDE3MTYyLCJpYXQiOjE2OTkwMTcxNjIsImp0aSI6Ijc2YTUyODNjLWU0OTUtNDFkNi1iMGJmLTFmMmQwOTBiYzM1ZCJ9.NoKPJp2hEtXzbymuFTu6HWM65c4ChfvXidiZQBZQjw4 --insecure" dir= execID=c2ee9
time="2023-11-03T13:12:48Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:12:47+00:00          ConfigMap  argocd-e2e--test-namespaced-app-labels-aofiz                my-map  OutOfSync  Missing              \n2023-11-03T13:12:48+00:00          ConfigMap  argocd-e2e--test-namespaced-app-labels-aofiz                my-map  OutOfSync  Missing              configmap/my-map created\n2023-11-03T13:12:48+00:00          ConfigMap  argocd-e2e--test-namespaced-app-labels-aofiz                my-map    Synced  Missing              configmap/my-map created\n\nName:               argocd-e2e-external/test-namespaced-app-labels\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-app-labels-aofiz\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-app-labels\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               config-map\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (5d5ee88)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      5d5ee8872793ec380402946f264ce1129af4dbf7\nPhase:              Succeeded\nStart:              2023-11-03 13:12:46 +0000 UTC\nFinished:           2023-11-03 13:12:48 +0000 UTC\nDuration:           2s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                     NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-namespaced-app-labels-aofiz  my-map  Synced                configmap/my-map created\n" duration=1.697216441s execID=c2ee9
time="2023-11-03T13:12:48Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:12:48Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedAppLabels (7.84s)
=== RUN   TestNamespacedTrackAppStateAndSyncApp
time="2023-11-03T13:12:48Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=ae6ef
time="2023-11-03T13:12:48Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-app-labels-aofiz\" deleted\n" duration=244.38113ms execID=ae6ef
time="2023-11-03T13:12:48Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=5cb63
time="2023-11-03T13:12:48Z" level=debug msg="No resources found\n" duration=332.818301ms execID=5cb63
time="2023-11-03T13:12:48Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=de99d
time="2023-11-03T13:12:49Z" level=debug msg="No resources found\n" duration=235.011292ms execID=de99d
time="2023-11-03T13:12:49Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:12:49Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU2OSwibmJmIjoxNjk5MDE3MTY5LCJpYXQiOjE2OTkwMTcxNjksImp0aSI6ImYxYzdjMDBiLTFmOWQtNGJjYi05YjVlLWNiZjI2ZTkzOWIxMyJ9.084nhn0qR5fNE87hEsQ7pjuXTMxsxnsknr3co_nKS4o --insecure" dir= execID=d337a
time="2023-11-03T13:12:50Z" level=debug duration=89.923059ms execID=d337a
time="2023-11-03T13:12:50Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=17405
time="2023-11-03T13:12:50Z" level=debug duration=2.067008ms execID=17405
time="2023-11-03T13:12:50Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=50f73
time="2023-11-03T13:12:50Z" level=debug duration=1.72455ms execID=50f73
time="2023-11-03T13:12:50Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=4b711
time="2023-11-03T13:12:50Z" level=debug duration=1.62668ms execID=4b711
time="2023-11-03T13:12:50Z" level=info msg="pkill -9 gpg-agent" dir= execID=b822f
time="2023-11-03T13:12:50Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=d92e9
time="2023-11-03T13:12:50Z" level=debug duration=9.590366ms execID=d92e9
time="2023-11-03T13:12:50Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=9713b
time="2023-11-03T13:12:50Z" level=debug duration=32.99998ms execID=9713b
time="2023-11-03T13:12:50Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=a2ddc
time="2023-11-03T13:12:50Z" level=debug duration=1.716563ms execID=a2ddc
time="2023-11-03T13:12:50Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=840ce
time="2023-11-03T13:12:50Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=11.905151ms execID=840ce
time="2023-11-03T13:12:50Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=c51ca
time="2023-11-03T13:12:50Z" level=debug duration=26.689303ms execID=c51ca
time="2023-11-03T13:12:50Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=05997
time="2023-11-03T13:12:50Z" level=debug duration=21.471123ms execID=05997
time="2023-11-03T13:12:50Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=96186
time="2023-11-03T13:12:50Z" level=debug duration=2.202533ms execID=96186
time="2023-11-03T13:12:50Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=47f6d
Handling connection for 9081
time="2023-11-03T13:12:50Z" level=debug duration=77.938583ms execID=47f6d
time="2023-11-03T13:12:50Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-track-app-state-and-sync-app-jvbxn" dir= execID=c8da1
time="2023-11-03T13:12:50Z" level=debug msg="namespace/argocd-e2e--test-namespaced-track-app-state-and-sync-app-jvbxn created\n" duration=170.514271ms execID=c8da1
time="2023-11-03T13:12:50Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-track-app-state-and-sync-app-jvbxn e2e.argoproj.io=true" dir= execID=79d28
time="2023-11-03T13:12:50Z" level=debug msg="namespace/argocd-e2e--test-namespaced-track-app-state-and-sync-app-jvbxn labeled\n" duration=317.89165ms execID=79d28
time="2023-11-03T13:12:50Z" level=info msg="clean state" duration=2.472019357s id=TestNamespacedTrackAppStateAndSyncApp-jvbxn name=TestNamespacedTrackAppStateAndSyncApp password=password username=admin
time="2023-11-03T13:12:51Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-track-app-state-and-sync-app --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-namespaced-track-app-state-and-sync-app-jvbxn --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU2OSwibmJmIjoxNjk5MDE3MTY5LCJpYXQiOjE2OTkwMTcxNjksImp0aSI6ImYxYzdjMDBiLTFmOWQtNGJjYi05YjVlLWNiZjI2ZTkzOWIxMyJ9.084nhn0qR5fNE87hEsQ7pjuXTMxsxnsknr3co_nKS4o --insecure" dir= execID=6efeb
time="2023-11-03T13:12:52Z" level=debug msg="application 'test-namespaced-track-app-state-and-sync-app' created\n" duration=246.794903ms execID=6efeb
time="2023-11-03T13:12:52Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:12:52Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-track-app-state-and-sync-app --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU2OSwibmJmIjoxNjk5MDE3MTY5LCJpYXQiOjE2OTkwMTcxNjksImp0aSI6ImYxYzdjMDBiLTFmOWQtNGJjYi05YjVlLWNiZjI2ZTkzOWIxMyJ9.084nhn0qR5fNE87hEsQ7pjuXTMxsxnsknr3co_nKS4o --insecure" dir= execID=fdbfe
time="2023-11-03T13:12:56Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:12:55+00:00            Service  argocd-e2e--test-namespaced-track-app-state-and-sync-app-jvbxn          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:12:55+00:00   apps  Deployment  argocd-e2e--test-namespaced-track-app-state-and-sync-app-jvbxn          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:12:56+00:00            Service  argocd-e2e--test-namespaced-track-app-state-and-sync-app-jvbxn          guestbook-ui  OutOfSync  Missing              service/guestbook-ui created\n2023-11-03T13:12:56+00:00   apps  Deployment  argocd-e2e--test-namespaced-track-app-state-and-sync-app-jvbxn          guestbook-ui  OutOfSync  Missing              deployment.apps/guestbook-ui created\n2023-11-03T13:12:56+00:00            Service  argocd-e2e--test-namespaced-track-app-state-and-sync-app-jvbxn          guestbook-ui    Synced  Healthy              service/guestbook-ui created\n2023-11-03T13:12:56+00:00   apps  Deployment  argocd-e2e--test-namespaced-track-app-state-and-sync-app-jvbxn          guestbook-ui    Synced  Healthy              deployment.apps/guestbook-ui created\n\nName:               argocd-e2e-external/test-namespaced-track-app-state-and-sync-app\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-track-app-state-and-sync-app-jvbxn\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-track-app-state-and-sync-app\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (f67052f)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      f67052f89aff678e8d7e9a84cc6e54a407e63112\nPhase:              Succeeded\nStart:              2023-11-03 13:12:52 +0000 UTC\nFinished:           2023-11-03 13:12:56 +0000 UTC\nDuration:           4s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                                       NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-namespaced-track-app-state-and-sync-app-jvbxn  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-namespaced-track-app-state-and-sync-app-jvbxn  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=4.316059199s execID=fdbfe
time="2023-11-03T13:12:56Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:12:56Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:12:56Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:12:56Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:12:56Z" level=info msg="expectation succeeded: no error and output contained 'Service     argocd-e2e--test-namespaced-track-app-state-and-sync-app-jvbxn  guestbook-ui  Synced '"
time="2023-11-03T13:12:56Z" level=info msg="expectation succeeded: no error and output contained 'apps   Deployment  argocd-e2e--test-namespaced-track-app-state-and-sync-app-jvbxn  guestbook-ui  Synced'"
time="2023-11-03T13:12:56Z" level=info msg="expectation succeeded: found event with reason=ResourceUpdated; message=sync"
time="2023-11-03T13:12:56Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedTrackAppStateAndSyncApp (8.07s)
=== RUN   TestNamespacedAppRollbackSuccessful
time="2023-11-03T13:12:56Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=144ba
time="2023-11-03T13:12:56Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-track-app-state-and-sync-app-jvbxn\" deleted\n" duration=255.127776ms execID=144ba
time="2023-11-03T13:12:56Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=a040f
time="2023-11-03T13:12:56Z" level=debug msg="No resources found\n" duration=344.147503ms execID=a040f
time="2023-11-03T13:12:56Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=90952
time="2023-11-03T13:12:57Z" level=debug msg="No resources found\n" duration=236.397386ms execID=90952
time="2023-11-03T13:12:57Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:12:57Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU3NywibmJmIjoxNjk5MDE3MTc3LCJpYXQiOjE2OTkwMTcxNzcsImp0aSI6IjNkMDQ1MzRlLWNiMGQtNDU3MC05YjNlLWIzZDE0ZWI1NTBiYiJ9.vELv4blJjw9Ib_z6bQZQgXy8jd7sAbkaOid8p6U6eNg --insecure" dir= execID=6391b
time="2023-11-03T13:12:57Z" level=debug duration=73.78679ms execID=6391b
time="2023-11-03T13:12:58Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=53a87
time="2023-11-03T13:12:58Z" level=debug duration=2.170518ms execID=53a87
time="2023-11-03T13:12:58Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=6333c
time="2023-11-03T13:12:58Z" level=debug duration=1.667774ms execID=6333c
time="2023-11-03T13:12:58Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=86a5b
time="2023-11-03T13:12:58Z" level=debug duration=1.421393ms execID=86a5b
time="2023-11-03T13:12:58Z" level=info msg="pkill -9 gpg-agent" dir= execID=bf7c1
time="2023-11-03T13:12:58Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=76c21
time="2023-11-03T13:12:58Z" level=debug duration=9.678838ms execID=76c21
time="2023-11-03T13:12:58Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=ba3ac
time="2023-11-03T13:12:58Z" level=debug duration=37.027801ms execID=ba3ac
time="2023-11-03T13:12:58Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=8da7d
time="2023-11-03T13:12:58Z" level=debug duration=1.825152ms execID=8da7d
time="2023-11-03T13:12:58Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=a1c91
time="2023-11-03T13:12:58Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.825361ms execID=a1c91
time="2023-11-03T13:12:58Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=f00ed
time="2023-11-03T13:12:58Z" level=debug duration=26.232147ms execID=f00ed
time="2023-11-03T13:12:58Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=dcecc
time="2023-11-03T13:12:58Z" level=debug duration=29.374868ms execID=dcecc
time="2023-11-03T13:12:58Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=f0031
time="2023-11-03T13:12:58Z" level=debug duration=2.514987ms execID=f0031
time="2023-11-03T13:12:58Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=1904e
Handling connection for 9081
time="2023-11-03T13:12:58Z" level=debug duration=62.552924ms execID=1904e
time="2023-11-03T13:12:58Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-app-rollback-successful-xdixa" dir= execID=a0723
time="2023-11-03T13:12:58Z" level=debug msg="namespace/argocd-e2e--test-namespaced-app-rollback-successful-xdixa created\n" duration=140.692579ms execID=a0723
time="2023-11-03T13:12:58Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-app-rollback-successful-xdixa e2e.argoproj.io=true" dir= execID=b3cf4
time="2023-11-03T13:12:58Z" level=debug msg="namespace/argocd-e2e--test-namespaced-app-rollback-successful-xdixa labeled\n" duration=302.960419ms execID=b3cf4
time="2023-11-03T13:12:58Z" level=info msg="clean state" duration=2.312121893s id=TestNamespacedAppRollbackSuccessful-xdixa name=TestNamespacedAppRollbackSuccessful password=password username=admin
time="2023-11-03T13:12:59Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-app-rollback-successful --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-namespaced-app-rollback-successful-xdixa --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU3NywibmJmIjoxNjk5MDE3MTc3LCJpYXQiOjE2OTkwMTcxNzcsImp0aSI6IjNkMDQ1MzRlLWNiMGQtNDU3MC05YjNlLWIzZDE0ZWI1NTBiYiJ9.vELv4blJjw9Ib_z6bQZQgXy8jd7sAbkaOid8p6U6eNg --insecure" dir= execID=4974a
time="2023-11-03T13:12:59Z" level=debug msg="application 'test-namespaced-app-rollback-successful' created\n" duration=219.323499ms execID=4974a
time="2023-11-03T13:12:59Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:12:59Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-app-rollback-successful --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU3NywibmJmIjoxNjk5MDE3MTc3LCJpYXQiOjE2OTkwMTcxNzcsImp0aSI6IjNkMDQ1MzRlLWNiMGQtNDU3MC05YjNlLWIzZDE0ZWI1NTBiYiJ9.vELv4blJjw9Ib_z6bQZQgXy8jd7sAbkaOid8p6U6eNg --insecure" dir= execID=826d5
time="2023-11-03T13:13:04Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:13:04+00:00            Service  argocd-e2e--test-namespaced-app-rollback-successful-xdixa          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:13:04+00:00   apps  Deployment  argocd-e2e--test-namespaced-app-rollback-successful-xdixa          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:13:04+00:00            Service  argocd-e2e--test-namespaced-app-rollback-successful-xdixa          guestbook-ui    Synced  Healthy              \n\nName:               argocd-e2e-external/test-namespaced-app-rollback-successful\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-app-rollback-successful-xdixa\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-app-rollback-successful\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (922f74e)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      922f74e49a86fc5b5f73b193108a9be85303728a\nPhase:              Succeeded\nStart:              2023-11-03 13:13:00 +0000 UTC\nFinished:           2023-11-03 13:13:04 +0000 UTC\nDuration:           4s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                                  NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-namespaced-app-rollback-successful-xdixa  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-namespaced-app-rollback-successful-xdixa  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=5.062803362s execID=826d5
time="2023-11-03T13:13:04Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:13:04Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:13:04Z" level=info msg="../../dist/argocd app rollback argocd-e2e-external/test-namespaced-app-rollback-successful 1 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU3NywibmJmIjoxNjk5MDE3MTc3LCJpYXQiOjE2OTkwMTcxNzcsImp0aSI6IjNkMDQ1MzRlLWNiMGQtNDU3MC05YjNlLWIzZDE0ZWI1NTBiYiJ9.vELv4blJjw9Ib_z6bQZQgXy8jd7sAbkaOid8p6U6eNg --insecure" dir= execID=c3022
time="2023-11-03T13:13:05Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                                 NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:13:05+00:00            Service  argocd-e2e--test-namespaced-app-rollback-successful-xdixa          guestbook-ui    Synced  Healthy              \n2023-11-03T13:13:05+00:00   apps  Deployment  argocd-e2e--test-namespaced-app-rollback-successful-xdixa          guestbook-ui    Synced  Healthy              \n2023-11-03T13:13:05+00:00            Service  argocd-e2e--test-namespaced-app-rollback-successful-xdixa          guestbook-ui    Synced  Healthy              service/guestbook-ui unchanged\n2023-11-03T13:13:05+00:00   apps  Deployment  argocd-e2e--test-namespaced-app-rollback-successful-xdixa          guestbook-ui    Synced  Healthy              deployment.apps/guestbook-ui unchanged\n\nName:               argocd-e2e-external/test-namespaced-app-rollback-successful\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-app-rollback-successful-xdixa\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-app-rollback-successful\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (922f74e)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      922f74e49a86fc5b5f73b193108a9be85303728a\nPhase:              Succeeded\nStart:              2023-11-03 13:13:05 +0000 UTC\nFinished:           2023-11-03 13:13:05 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                                  NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-namespaced-app-rollback-successful-xdixa  guestbook-ui  Synced  Healthy        service/guestbook-ui unchanged\napps   Deployment  argocd-e2e--test-namespaced-app-rollback-successful-xdixa  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui unchanged\n" duration=693.115724ms execID=c3022
time="2023-11-03T13:13:05Z" level=info msg="expectation succeeded: found event with reason=OperationStarted; message=rollback"
time="2023-11-03T13:13:05Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:13:05Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedAppRollbackSuccessful (9.35s)
=== RUN   TestNamespacedComparisonFailsIfClusterNotAdded
time="2023-11-03T13:13:05Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=f189f
time="2023-11-03T13:13:05Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-app-rollback-successful-xdixa\" deleted\n" duration=208.678531ms execID=f189f
time="2023-11-03T13:13:05Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=14c88
time="2023-11-03T13:13:06Z" level=debug msg="No resources found\n" duration=451.30779ms execID=14c88
time="2023-11-03T13:13:06Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=af83f
time="2023-11-03T13:13:06Z" level=debug msg="No resources found\n" duration=155.980759ms execID=af83f
time="2023-11-03T13:13:07Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:13:07Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU4NywibmJmIjoxNjk5MDE3MTg3LCJpYXQiOjE2OTkwMTcxODcsImp0aSI6ImIwZmZlMDQ2LWJlMjctNGQyMS1iODU3LTU5NmZhYWMxZmM5YSJ9.TkMFwmZYtPKkIoHIZ8o5wPv2uoAoJBoMvjI4FY82hA8 --insecure" dir= execID=18e3e
time="2023-11-03T13:13:07Z" level=debug duration=69.595048ms execID=18e3e
time="2023-11-03T13:13:07Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=8dafb
time="2023-11-03T13:13:07Z" level=debug duration=2.059007ms execID=8dafb
time="2023-11-03T13:13:07Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=5e333
time="2023-11-03T13:13:07Z" level=debug duration=1.697416ms execID=5e333
time="2023-11-03T13:13:07Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=6d4d1
time="2023-11-03T13:13:07Z" level=debug duration=1.62236ms execID=6d4d1
time="2023-11-03T13:13:07Z" level=info msg="pkill -9 gpg-agent" dir= execID=2ff8a
time="2023-11-03T13:13:07Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=7d41c
time="2023-11-03T13:13:07Z" level=debug duration=9.904789ms execID=7d41c
time="2023-11-03T13:13:07Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=6327a
time="2023-11-03T13:13:07Z" level=debug duration=34.157541ms execID=6327a
time="2023-11-03T13:13:07Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=0b000
time="2023-11-03T13:13:07Z" level=debug duration=1.729494ms execID=0b000
time="2023-11-03T13:13:07Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=f392f
time="2023-11-03T13:13:07Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.655471ms execID=f392f
time="2023-11-03T13:13:07Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=992ae
time="2023-11-03T13:13:07Z" level=debug duration=24.818542ms execID=992ae
time="2023-11-03T13:13:07Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=129d6
time="2023-11-03T13:13:07Z" level=debug duration=31.112992ms execID=129d6
time="2023-11-03T13:13:07Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=1f67a
time="2023-11-03T13:13:07Z" level=debug duration=2.339279ms execID=1f67a
time="2023-11-03T13:13:07Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=b9849
Handling connection for 9081
time="2023-11-03T13:13:07Z" level=debug duration=65.130406ms execID=b9849
time="2023-11-03T13:13:07Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-comparison-fails-if-cluster-n-uonxm" dir= execID=1e768
time="2023-11-03T13:13:07Z" level=debug msg="namespace/argocd-e2e--test-namespaced-comparison-fails-if-cluster-n-uonxm created\n" duration=143.461321ms execID=1e768
time="2023-11-03T13:13:07Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-comparison-fails-if-cluster-n-uonxm e2e.argoproj.io=true" dir= execID=97ec9
time="2023-11-03T13:13:08Z" level=debug msg="namespace/argocd-e2e--test-namespaced-comparison-fails-if-cluster-n-uonxm labeled\n" duration=292.213181ms execID=97ec9
time="2023-11-03T13:13:08Z" level=info msg="clean state" duration=2.350793539s id=TestNamespacedComparisonFailsIfClusterNotAdded-uonxm name=TestNamespacedComparisonFailsIfClusterNotAdded password=password username=admin
time="2023-11-03T13:13:09Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-comparison-fails-if-cluster-not-added --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://not-registered-cluster/api --path guestbook --project default --dest-namespace argocd-e2e--test-namespaced-comparison-fails-if-cluster-n-uonxm --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU4NywibmJmIjoxNjk5MDE3MTg3LCJpYXQiOjE2OTkwMTcxODcsImp0aSI6ImIwZmZlMDQ2LWJlMjctNGQyMS1iODU3LTU5NmZhYWMxZmM5YSJ9.TkMFwmZYtPKkIoHIZ8o5wPv2uoAoJBoMvjI4FY82hA8 --insecure" dir= execID=1527e
time="2023-11-03T13:13:09Z" level=debug duration=167.170454ms execID=1527e
time="2023-11-03T13:13:09Z" level=error msg="`../../dist/argocd app create argocd-e2e-external/test-namespaced-comparison-fails-if-cluster-not-added --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://not-registered-cluster/api --path guestbook --project default --dest-namespace argocd-e2e--test-namespaced-comparison-fails-if-cluster-n-uonxm --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU4NywibmJmIjoxNjk5MDE3MTg3LCJpYXQiOjE2OTkwMTcxODcsImp0aSI6ImIwZmZlMDQ2LWJlMjctNGQyMS1iODU3LTU5NmZhYWMxZmM5YSJ9.TkMFwmZYtPKkIoHIZ8o5wPv2uoAoJBoMvjI4FY82hA8 --insecure` failed exit status 20: time=\"2023-11-03T13:13:09Z\" level=fatal msg=\"rpc error: code = InvalidArgument desc = application spec for test-namespaced-comparison-fails-if-cluster-not-added is invalid: InvalidSpecError: Unable to get cluster: rpc error: code = NotFound desc = cluster \\\"https://not-registered-cluster/api\\\" not found\"" execID=1527e
time="2023-11-03T13:13:09Z" level=info msg="expectation succeeded: app does not exist"
time="2023-11-03T13:13:09Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedComparisonFailsIfClusterNotAdded (3.53s)
=== RUN   TestNamespacedCannotSetInvalidPath
time="2023-11-03T13:13:09Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=080bf
time="2023-11-03T13:13:09Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-comparison-fails-if-cluster-n-uonxm\" deleted\n" duration=157.588404ms execID=080bf
time="2023-11-03T13:13:09Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=eda14
time="2023-11-03T13:13:09Z" level=debug msg="No resources found\n" duration=364.985891ms execID=eda14
time="2023-11-03T13:13:09Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=0ae3c
time="2023-11-03T13:13:09Z" level=debug msg="No resources found\n" duration=162.637354ms execID=0ae3c
time="2023-11-03T13:13:10Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:13:11Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU5MCwibmJmIjoxNjk5MDE3MTkwLCJpYXQiOjE2OTkwMTcxOTAsImp0aSI6IjQ3N2Y3ZjM0LTFhMDctNGY2OC04ZWEyLTM0M2JjZmVmNGRkYyJ9.1zzQr8i3gShYU8zxZ0LCSYHZ2BYDXt7iB6yHUVeyUFc --insecure" dir= execID=a5e3e
time="2023-11-03T13:13:11Z" level=debug duration=104.4872ms execID=a5e3e
time="2023-11-03T13:13:11Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=9d8b5
time="2023-11-03T13:13:11Z" level=debug duration=2.001527ms execID=9d8b5
time="2023-11-03T13:13:11Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=bb9e6
time="2023-11-03T13:13:11Z" level=debug duration=1.667361ms execID=bb9e6
time="2023-11-03T13:13:11Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=69a03
time="2023-11-03T13:13:11Z" level=debug duration=1.566301ms execID=69a03
time="2023-11-03T13:13:11Z" level=info msg="pkill -9 gpg-agent" dir= execID=ec1ed
time="2023-11-03T13:13:11Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=b8b99
time="2023-11-03T13:13:11Z" level=debug duration=9.867102ms execID=b8b99
time="2023-11-03T13:13:11Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=00f3d
time="2023-11-03T13:13:11Z" level=debug duration=33.064533ms execID=00f3d
time="2023-11-03T13:13:11Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=ca9e4
time="2023-11-03T13:13:11Z" level=debug duration=1.823426ms execID=ca9e4
time="2023-11-03T13:13:11Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=1b935
time="2023-11-03T13:13:11Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.019802ms execID=1b935
time="2023-11-03T13:13:11Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=2cfda
time="2023-11-03T13:13:11Z" level=debug duration=35.470789ms execID=2cfda
time="2023-11-03T13:13:11Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=c96a6
time="2023-11-03T13:13:11Z" level=debug duration=20.876209ms execID=c96a6
time="2023-11-03T13:13:11Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=0d47c
time="2023-11-03T13:13:11Z" level=debug duration=2.003484ms execID=0d47c
time="2023-11-03T13:13:11Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=89c4c
Handling connection for 9081
time="2023-11-03T13:13:11Z" level=debug duration=77.176633ms execID=89c4c
time="2023-11-03T13:13:11Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-cannot-set-invalid-path-owmjl" dir= execID=c0222
time="2023-11-03T13:13:11Z" level=debug msg="namespace/argocd-e2e--test-namespaced-cannot-set-invalid-path-owmjl created\n" duration=138.285494ms execID=c0222
time="2023-11-03T13:13:11Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-cannot-set-invalid-path-owmjl e2e.argoproj.io=true" dir= execID=142dd
time="2023-11-03T13:13:11Z" level=debug msg="namespace/argocd-e2e--test-namespaced-cannot-set-invalid-path-owmjl labeled\n" duration=342.994847ms execID=142dd
time="2023-11-03T13:13:11Z" level=info msg="clean state" duration=2.59567099s id=TestNamespacedCannotSetInvalidPath-owmjl name=TestNamespacedCannotSetInvalidPath password=password username=admin
time="2023-11-03T13:13:12Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-cannot-set-invalid-path --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-namespaced-cannot-set-invalid-path-owmjl --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU5MCwibmJmIjoxNjk5MDE3MTkwLCJpYXQiOjE2OTkwMTcxOTAsImp0aSI6IjQ3N2Y3ZjM0LTFhMDctNGY2OC04ZWEyLTM0M2JjZmVmNGRkYyJ9.1zzQr8i3gShYU8zxZ0LCSYHZ2BYDXt7iB6yHUVeyUFc --insecure" dir= execID=5728e
time="2023-11-03T13:13:13Z" level=debug msg="application 'test-namespaced-cannot-set-invalid-path' created\n" duration=225.582864ms execID=5728e
time="2023-11-03T13:13:13Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:13:13Z" level=info msg="../../dist/argocd app set argocd-e2e-external/test-namespaced-cannot-set-invalid-path --path garbage --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU5MCwibmJmIjoxNjk5MDE3MTkwLCJpYXQiOjE2OTkwMTcxOTAsImp0aSI6IjQ3N2Y3ZjM0LTFhMDctNGY2OC04ZWEyLTM0M2JjZmVmNGRkYyJ9.1zzQr8i3gShYU8zxZ0LCSYHZ2BYDXt7iB6yHUVeyUFc --insecure" dir= execID=53876
time="2023-11-03T13:13:13Z" level=debug duration=234.528454ms execID=53876
time="2023-11-03T13:13:13Z" level=error msg="`../../dist/argocd app set argocd-e2e-external/test-namespaced-cannot-set-invalid-path --path garbage --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU5MCwibmJmIjoxNjk5MDE3MTkwLCJpYXQiOjE2OTkwMTcxOTAsImp0aSI6IjQ3N2Y3ZjM0LTFhMDctNGY2OC04ZWEyLTM0M2JjZmVmNGRkYyJ9.1zzQr8i3gShYU8zxZ0LCSYHZ2BYDXt7iB6yHUVeyUFc --insecure` failed exit status 20: time=\"2023-11-03T13:13:13Z\" level=fatal msg=\"rpc error: code = InvalidArgument desc = application spec for test-namespaced-cannot-set-invalid-path is invalid: InvalidSpecError: Unable to generate manifests in garbage: rpc error: code = Unknown desc = garbage: app path does not exist\"" execID=53876
time="2023-11-03T13:13:13Z" level=info msg="expectation succeeded: error ''"
time="2023-11-03T13:13:13Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedCannotSetInvalidPath (4.09s)
=== RUN   TestNamespacedManipulateApplicationResources
time="2023-11-03T13:13:13Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=612e7
time="2023-11-03T13:13:13Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-cannot-set-invalid-path-owmjl\" deleted\n" duration=205.056907ms execID=612e7
time="2023-11-03T13:13:13Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=83f34
time="2023-11-03T13:13:14Z" level=debug msg="No resources found\n" duration=465.672528ms execID=83f34
time="2023-11-03T13:13:14Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=c2353
time="2023-11-03T13:13:14Z" level=debug msg="No resources found\n" duration=216.319638ms execID=c2353
time="2023-11-03T13:13:15Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:13:15Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU5NSwibmJmIjoxNjk5MDE3MTk1LCJpYXQiOjE2OTkwMTcxOTUsImp0aSI6IjhkNmMyNTUyLTFhY2EtNGRlOS1hNTI2LTkzYTg1ZmM4NWEwMyJ9.8mvHn-YVluC4Nhv9MIWrxptpaipKiPavmX5634aCStg --insecure" dir= execID=921a2
time="2023-11-03T13:13:15Z" level=debug duration=143.089315ms execID=921a2
time="2023-11-03T13:13:15Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=98c4d
time="2023-11-03T13:13:15Z" level=debug duration=1.994193ms execID=98c4d
time="2023-11-03T13:13:15Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=ea81b
time="2023-11-03T13:13:15Z" level=debug duration=1.631559ms execID=ea81b
time="2023-11-03T13:13:15Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=514b0
time="2023-11-03T13:13:15Z" level=debug duration=1.446284ms execID=514b0
time="2023-11-03T13:13:15Z" level=info msg="pkill -9 gpg-agent" dir= execID=d4eb1
time="2023-11-03T13:13:15Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=96c85
time="2023-11-03T13:13:15Z" level=debug duration=10.565528ms execID=96c85
time="2023-11-03T13:13:15Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=a1010
time="2023-11-03T13:13:15Z" level=debug duration=33.468337ms execID=a1010
time="2023-11-03T13:13:15Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=0c620
time="2023-11-03T13:13:15Z" level=debug duration=1.634808ms execID=0c620
time="2023-11-03T13:13:15Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=a0a45
time="2023-11-03T13:13:15Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.632147ms execID=a0a45
time="2023-11-03T13:13:15Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=56861
time="2023-11-03T13:13:15Z" level=debug duration=29.933824ms execID=56861
time="2023-11-03T13:13:15Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=83581
time="2023-11-03T13:13:15Z" level=debug duration=22.570579ms execID=83581
time="2023-11-03T13:13:15Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=7829e
time="2023-11-03T13:13:15Z" level=debug duration=2.995752ms execID=7829e
time="2023-11-03T13:13:15Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=34e3a
Handling connection for 9081
time="2023-11-03T13:13:15Z" level=debug duration=80.854714ms execID=34e3a
time="2023-11-03T13:13:15Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-manipulate-application-resour-yxbza" dir= execID=6a5c0
time="2023-11-03T13:13:15Z" level=debug msg="namespace/argocd-e2e--test-namespaced-manipulate-application-resour-yxbza created\n" duration=171.338701ms execID=6a5c0
time="2023-11-03T13:13:15Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-manipulate-application-resour-yxbza e2e.argoproj.io=true" dir= execID=32c19
time="2023-11-03T13:13:15Z" level=debug msg="namespace/argocd-e2e--test-namespaced-manipulate-application-resour-yxbza labeled\n" duration=303.135121ms execID=32c19
time="2023-11-03T13:13:15Z" level=info msg="clean state" duration=2.606980565s id=TestNamespacedManipulateApplicationResources-yxbza name=TestNamespacedManipulateApplicationResources password=password username=admin
time="2023-11-03T13:13:16Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-manipulate-application-resources --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-namespaced-manipulate-application-resour-yxbza --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU5NSwibmJmIjoxNjk5MDE3MTk1LCJpYXQiOjE2OTkwMTcxOTUsImp0aSI6IjhkNmMyNTUyLTFhY2EtNGRlOS1hNTI2LTkzYTg1ZmM4NWEwMyJ9.8mvHn-YVluC4Nhv9MIWrxptpaipKiPavmX5634aCStg --insecure" dir= execID=4323b
time="2023-11-03T13:13:17Z" level=debug msg="application 'test-namespaced-manipulate-application-resources' created\n" duration=239.14129ms execID=4323b
time="2023-11-03T13:13:17Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:13:17Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-manipulate-application-resources --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU5NSwibmJmIjoxNjk5MDE3MTk1LCJpYXQiOjE2OTkwMTcxOTUsImp0aSI6IjhkNmMyNTUyLTFhY2EtNGRlOS1hNTI2LTkzYTg1ZmM4NWEwMyJ9.8mvHn-YVluC4Nhv9MIWrxptpaipKiPavmX5634aCStg --insecure" dir= execID=5151e
time="2023-11-03T13:13:25Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:13:24+00:00            Service  argocd-e2e--test-namespaced-manipulate-application-resour-yxbza          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:13:24+00:00   apps  Deployment  argocd-e2e--test-namespaced-manipulate-application-resour-yxbza          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:13:25+00:00            Service  argocd-e2e--test-namespaced-manipulate-application-resour-yxbza          guestbook-ui    Synced  Healthy              \n2023-11-03T13:13:25+00:00            Service  argocd-e2e--test-namespaced-manipulate-application-resour-yxbza          guestbook-ui    Synced   Healthy              service/guestbook-ui created\n2023-11-03T13:13:25+00:00   apps  Deployment  argocd-e2e--test-namespaced-manipulate-application-resour-yxbza          guestbook-ui  OutOfSync  Missing              deployment.apps/guestbook-ui created\n2023-11-03T13:13:25+00:00   apps  Deployment  argocd-e2e--test-namespaced-manipulate-application-resour-yxbza          guestbook-ui    Synced  Progressing              deployment.apps/guestbook-ui created\n\nName:               argocd-e2e-external/test-namespaced-manipulate-application-resources\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-manipulate-application-resour-yxbza\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-manipulate-application-resources\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (0771d66)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      0771d66ae431ef33d6cdce27eef9b9a0b1bfe3cc\nPhase:              Succeeded\nStart:              2023-11-03 13:13:17 +0000 UTC\nFinished:           2023-11-03 13:13:25 +0000 UTC\nDuration:           8s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                                        NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-namespaced-manipulate-application-resour-yxbza  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-namespaced-manipulate-application-resour-yxbza  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=8.415931022s execID=5151e
time="2023-11-03T13:13:25Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:13:25Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:13:25Z" level=info msg="../../dist/argocd app manifests argocd-e2e-external/test-namespaced-manipulate-application-resources --source live --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzU5NSwibmJmIjoxNjk5MDE3MTk1LCJpYXQiOjE2OTkwMTcxOTUsImp0aSI6IjhkNmMyNTUyLTFhY2EtNGRlOS1hNTI2LTkzYTg1ZmM4NWEwMyJ9.8mvHn-YVluC4Nhv9MIWrxptpaipKiPavmX5634aCStg --insecure" dir= execID=cabb9
time="2023-11-03T13:13:25Z" level=debug msg="---\napiVersion: v1\nkind: Service\nmetadata:\n  annotations:\n    argocd.argoproj.io/tracking-id: argocd-e2e-external_test-namespaced-manipulate-application-resources:/Service:argocd-e2e--test-namespaced-manipulate-application-resour-yxbza/guestbook-ui\n    kubectl.kubernetes.io/last-applied-configuration: |\n      {\"apiVersion\":\"v1\",\"kind\":\"Service\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/tracking-id\":\"argocd-e2e-external_test-namespaced-manipulate-application-resources:/Service:argocd-e2e--test-namespaced-manipulate-application-resour-yxbza/guestbook-ui\"},\"name\":\"guestbook-ui\",\"namespace\":\"argocd-e2e--test-namespaced-manipulate-application-resour-yxbza\"},\"spec\":{\"ports\":[{\"port\":80,\"targetPort\":80}],\"selector\":{\"app\":\"guestbook-ui\"}}}\n  creationTimestamp: \"2023-11-03T13:13:25Z\"\n  managedFields:\n  - apiVersion: v1\n    fieldsType: FieldsV1\n    fieldsV1:\n      f:metadata:\n        f:annotations:\n          .: {}\n          f:argocd.argoproj.io/tracking-id: {}\n          f:kubectl.kubernetes.io/last-applied-configuration: {}\n      f:spec:\n        f:internalTrafficPolicy: {}\n        f:ports:\n          .: {}\n          k:{\"port\":80,\"protocol\":\"TCP\"}:\n            .: {}\n            f:port: {}\n            f:protocol: {}\n            f:targetPort: {}\n        f:selector: {}\n        f:sessionAffinity: {}\n        f:type: {}\n    manager: argocd-controller\n    operation: Update\n    time: \"2023-11-03T13:13:25Z\"\n  name: guestbook-ui\n  namespace: argocd-e2e--test-namespaced-manipulate-application-resour-yxbza\n  resourceVersion: \"36246440\"\n  uid: e4e4c0c8-bed5-4385-bb2e-06d425135b1c\nspec:\n  clusterIP: 172.30.222.162\n  clusterIPs:\n  - 172.30.222.162\n  internalTrafficPolicy: Cluster\n  ipFamilies:\n  - IPv4\n  ipFamilyPolicy: SingleStack\n  ports:\n  - port: 80\n    protocol: TCP\n    targetPort: 80\n  selector:\n    app: guestbook-ui\n  sessionAffinity: None\n  type: ClusterIP\nstatus:\n  loadBalancer: {}\n\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  annotations:\n    argocd.argoproj.io/tracking-id: argocd-e2e-external_test-namespaced-manipulate-application-resources:apps/Deployment:argocd-e2e--test-namespaced-manipulate-application-resour-yxbza/guestbook-ui\n    deployment.kubernetes.io/revision: \"1\"\n    kubectl.kubernetes.io/last-applied-configuration: |\n      {\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/tracking-id\":\"argocd-e2e-external_test-namespaced-manipulate-application-resources:apps/Deployment:argocd-e2e--test-namespaced-manipulate-application-resour-yxbza/guestbook-ui\"},\"labels\":{\"test\":\"true\"},\"name\":\"guestbook-ui\",\"namespace\":\"argocd-e2e--test-namespaced-manipulate-application-resour-yxbza\"},\"spec\":{\"replicas\":0,\"revisionHistoryLimit\":3,\"selector\":{\"matchLabels\":{\"app\":\"guestbook-ui\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"guestbook-ui\"}},\"spec\":{\"containers\":[{\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"guestbook-ui\",\"ports\":[{\"containerPort\":80}]}]}}}}\n  creationTimestamp: \"2023-11-03T13:13:25Z\"\n  generation: 1\n  labels:\n    test: \"true\"\n  managedFields:\n  - apiVersion: apps/v1\n    fieldsType: FieldsV1\n    fieldsV1:\n      f:metadata:\n        f:annotations:\n          .: {}\n          f:argocd.argoproj.io/tracking-id: {}\n          f:kubectl.kubernetes.io/last-applied-configuration: {}\n        f:labels:\n          .: {}\n          f:test: {}\n      f:spec:\n        f:progressDeadlineSeconds: {}\n        f:replicas: {}\n        f:revisionHistoryLimit: {}\n        f:selector: {}\n        f:strategy:\n          f:rollingUpdate:\n            .: {}\n            f:maxSurge: {}\n            f:maxUnavailable: {}\n          f:type: {}\n        f:template:\n          f:metadata:\n            f:labels:\n              .: {}\n              f:app: {}\n          f:spec:\n            f:containers:\n              k:{\"name\":\"guestbook-ui\"}:\n                .: {}\n                f:image: {}\n                f:imagePullPolicy: {}\n                f:name: {}\n                f:ports:\n                  .: {}\n                  k:{\"containerPort\":80,\"protocol\":\"TCP\"}:\n                    .: {}\n                    f:containerPort: {}\n                    f:protocol: {}\n                f:resources: {}\n                f:terminationMessagePath: {}\n                f:terminationMessagePolicy: {}\n            f:dnsPolicy: {}\n            f:restartPolicy: {}\n            f:schedulerName: {}\n            f:securityContext: {}\n            f:terminationGracePeriodSeconds: {}\n    manager: argocd-controller\n    operation: Update\n    time: \"2023-11-03T13:13:25Z\"\n  - apiVersion: apps/v1\n    fieldsType: FieldsV1\n    fieldsV1:\n      f:metadata:\n        f:annotations:\n          f:deployment.kubernetes.io/revision: {}\n      f:status:\n        f:conditions:\n          .: {}\n          k:{\"type\":\"Available\"}:\n            .: {}\n            f:lastTransitionTime: {}\n            f:lastUpdateTime: {}\n            f:message: {}\n            f:reason: {}\n            f:status: {}\n            f:type: {}\n          k:{\"type\":\"Progressing\"}:\n            .: {}\n            f:lastTransitionTime: {}\n            f:lastUpdateTime: {}\n            f:message: {}\n            f:reason: {}\n            f:status: {}\n            f:type: {}\n        f:observedGeneration: {}\n    manager: kube-controller-manager\n    operation: Update\n    subresource: status\n    time: \"2023-11-03T13:13:25Z\"\n  name: guestbook-ui\n  namespace: argocd-e2e--test-namespaced-manipulate-application-resour-yxbza\n  resourceVersion: \"36246450\"\n  uid: 501d852e-6da8-4bb6-92c5-eb68dd9ab63e\nspec:\n  progressDeadlineSeconds: 600\n  replicas: 0\n  revisionHistoryLimit: 3\n  selector:\n    matchLabels:\n      app: guestbook-ui\n  strategy:\n    rollingUpdate:\n      maxSurge: 25%\n      maxUnavailable: 25%\n    type: RollingUpdate\n  template:\n    metadata:\n      creationTimestamp: null\n      labels:\n        app: guestbook-ui\n    spec:\n      containers:\n      - image: quay.io/argoprojlabs/argocd-e2e-container:0.2\n        imagePullPolicy: IfNotPresent\n        name: guestbook-ui\n        ports:\n        - containerPort: 80\n          protocol: TCP\n        resources: {}\n        terminationMessagePath: /dev/termination-log\n        terminationMessagePolicy: File\n      dnsPolicy: ClusterFirst\n      restartPolicy: Always\n      schedulerName: default-scheduler\n      securityContext: {}\n      terminationGracePeriodSeconds: 30\nstatus:\n  conditions:\n  - lastTransitionTime: \"2023-11-03T13:13:25Z\"\n    lastUpdateTime: \"2023-11-03T13:13:25Z\"\n    message: Deployment has minimum availability.\n    reason: MinimumReplicasAvailable\n    status: \"True\"\n    type: Available\n  - lastTransitionTime: \"2023-11-03T13:13:25Z\"\n    lastUpdateTime: \"2023-11-03T13:13:25Z\"\n    message: ReplicaSet \"guestbook-ui-864887c49c\" has successfully progressed.\n    reason: NewReplicaSetAvailable\n    status: \"True\"\n    type: Progressing\n  observedGeneration: 1\n\n" duration=68.431347ms execID=cabb9
time="2023-11-03T13:13:25Z" level=info msg="pending: sync status to be OutOfSync, is Synced"
time="2023-11-03T13:13:28Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:13:28Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedManipulateApplicationResources (15.44s)
=== RUN   TestNamespacedAppWithSecrets
time="2023-11-03T13:13:28Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=57cd4
time="2023-11-03T13:13:29Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-manipulate-application-resour-yxbza\" deleted\n" duration=250.152651ms execID=57cd4
time="2023-11-03T13:13:29Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=19e9e
time="2023-11-03T13:13:29Z" level=debug msg="No resources found\n" duration=398.911158ms execID=19e9e
time="2023-11-03T13:13:29Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=8e2d0
time="2023-11-03T13:13:29Z" level=debug msg="No resources found\n" duration=197.80513ms execID=8e2d0
time="2023-11-03T13:13:30Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:13:30Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzYxMCwibmJmIjoxNjk5MDE3MjEwLCJpYXQiOjE2OTkwMTcyMTAsImp0aSI6IjNmNDQ5ZWYxLTVlMGItNGQwYi1iYjc5LWIzMmQ4ZDhlMWRhZiJ9.eCp4KKqQo7yGqbAnJStdM0QFnWFPkPDp7aSEJbgHH2o --insecure" dir= execID=ea0d7
time="2023-11-03T13:13:30Z" level=debug duration=107.357711ms execID=ea0d7
time="2023-11-03T13:13:30Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=2168c
time="2023-11-03T13:13:30Z" level=debug duration=1.99394ms execID=2168c
time="2023-11-03T13:13:30Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=479a7
time="2023-11-03T13:13:30Z" level=debug duration=1.667397ms execID=479a7
time="2023-11-03T13:13:30Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=c7194
time="2023-11-03T13:13:30Z" level=debug duration=1.514404ms execID=c7194
time="2023-11-03T13:13:30Z" level=info msg="pkill -9 gpg-agent" dir= execID=bb8b9
time="2023-11-03T13:13:30Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=7b1a7
time="2023-11-03T13:13:30Z" level=debug duration=9.737351ms execID=7b1a7
time="2023-11-03T13:13:30Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=94b9a
time="2023-11-03T13:13:30Z" level=debug duration=34.301846ms execID=94b9a
time="2023-11-03T13:13:30Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=ba959
time="2023-11-03T13:13:30Z" level=debug duration=1.708816ms execID=ba959
time="2023-11-03T13:13:30Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=03fe2
time="2023-11-03T13:13:30Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=19.068861ms execID=03fe2
time="2023-11-03T13:13:30Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=30cc7
time="2023-11-03T13:13:30Z" level=debug duration=28.373774ms execID=30cc7
time="2023-11-03T13:13:30Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=3a5ad
time="2023-11-03T13:13:30Z" level=debug duration=22.184706ms execID=3a5ad
time="2023-11-03T13:13:30Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=bf85d
time="2023-11-03T13:13:30Z" level=debug duration=2.222512ms execID=bf85d
time="2023-11-03T13:13:30Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=613ef
Handling connection for 9081
time="2023-11-03T13:13:30Z" level=debug duration=80.567547ms execID=613ef
time="2023-11-03T13:13:30Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-app-with-secrets-tbcuv" dir= execID=9d764
time="2023-11-03T13:13:31Z" level=debug msg="namespace/argocd-e2e--test-namespaced-app-with-secrets-tbcuv created\n" duration=165.695891ms execID=9d764
time="2023-11-03T13:13:31Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-app-with-secrets-tbcuv e2e.argoproj.io=true" dir= execID=38444
time="2023-11-03T13:13:31Z" level=debug msg="namespace/argocd-e2e--test-namespaced-app-with-secrets-tbcuv labeled\n" duration=222.853742ms execID=38444
time="2023-11-03T13:13:31Z" level=info msg="clean state" duration=2.48460361s id=TestNamespacedAppWithSecrets-tbcuv name=TestNamespacedAppWithSecrets password=password username=admin
time="2023-11-03T13:13:32Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-app-with-secrets --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path secrets --project default --dest-namespace argocd-e2e--test-namespaced-app-with-secrets-tbcuv --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzYxMCwibmJmIjoxNjk5MDE3MjEwLCJpYXQiOjE2OTkwMTcyMTAsImp0aSI6IjNmNDQ5ZWYxLTVlMGItNGQwYi1iYjc5LWIzMmQ4ZDhlMWRhZiJ9.eCp4KKqQo7yGqbAnJStdM0QFnWFPkPDp7aSEJbgHH2o --insecure" dir= execID=02200
time="2023-11-03T13:13:32Z" level=debug msg="application 'test-namespaced-app-with-secrets' created\n" duration=196.557113ms execID=02200
time="2023-11-03T13:13:32Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:13:32Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-app-with-secrets --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzYxMCwibmJmIjoxNjk5MDE3MjEwLCJpYXQiOjE2OTkwMTcyMTAsImp0aSI6IjNmNDQ5ZWYxLTVlMGItNGQwYi1iYjc5LWIzMmQ4ZDhlMWRhZiJ9.eCp4KKqQo7yGqbAnJStdM0QFnWFPkPDp7aSEJbgHH2o --insecure" dir= execID=89928
time="2023-11-03T13:13:38Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:13:37+00:00             Secret  argocd-e2e--test-namespaced-app-with-secrets-tbcuv           test-secret  OutOfSync  Missing              \n2023-11-03T13:13:37+00:00             Secret  argocd-e2e--test-namespaced-app-with-secrets-tbcuv          test-secret2  OutOfSync  Missing              \n2023-11-03T13:13:38+00:00             Secret  argocd-e2e--test-namespaced-app-with-secrets-tbcuv          test-secret2  OutOfSync  Missing              secret/test-secret2 created\n2023-11-03T13:13:38+00:00             Secret  argocd-e2e--test-namespaced-app-with-secrets-tbcuv           test-secret  OutOfSync  Missing              secret/test-secret created\n2023-11-03T13:13:38+00:00             Secret  argocd-e2e--test-namespaced-app-with-secrets-tbcuv          test-secret2    Synced  Missing              secret/test-secret2 created\n2023-11-03T13:13:38+00:00             Secret  argocd-e2e--test-namespaced-app-with-secrets-tbcuv           test-secret    Synced  Missing              secret/test-secret created\n\nName:               argocd-e2e-external/test-namespaced-app-with-secrets\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-app-with-secrets-tbcuv\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-app-with-secrets\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               secrets\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (f88de47)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      f88de47764aba5c6d17e5f01da72778909c3b1ca\nPhase:              Succeeded\nStart:              2023-11-03 13:13:32 +0000 UTC\nFinished:           2023-11-03 13:13:38 +0000 UTC\nDuration:           6s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND    NAMESPACE                                           NAME          STATUS  HEALTH  HOOK  MESSAGE\n       Secret  argocd-e2e--test-namespaced-app-with-secrets-tbcuv  test-secret2  Synced                secret/test-secret2 created\n       Secret  argocd-e2e--test-namespaced-app-with-secrets-tbcuv  test-secret   Synced                secret/test-secret created\n" duration=5.772641881s execID=89928
time="2023-11-03T13:13:38Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:13:38Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:13:38Z" level=info msg="../../dist/argocd app diff argocd-e2e-external/test-namespaced-app-with-secrets --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzYxMCwibmJmIjoxNjk5MDE3MjEwLCJpYXQiOjE2OTkwMTcyMTAsImp0aSI6IjNmNDQ5ZWYxLTVlMGItNGQwYi1iYjc5LWIzMmQ4ZDhlMWRhZiJ9.eCp4KKqQo7yGqbAnJStdM0QFnWFPkPDp7aSEJbgHH2o --insecure" dir= execID=bad4c
time="2023-11-03T13:13:38Z" level=debug duration=82.240566ms execID=bad4c
time="2023-11-03T13:13:38Z" level=info msg="../../dist/argocd app patch-resource argocd-e2e-external/test-namespaced-app-with-secrets --resource-name test-secret --kind Secret --patch {\"op\": \"add\", \"path\": \"/data\", \"value\": \"hello\"}' --patch-type application/json-patch+json --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzYxMCwibmJmIjoxNjk5MDE3MjEwLCJpYXQiOjE2OTkwMTcyMTAsImp0aSI6IjNmNDQ5ZWYxLTVlMGItNGQwYi1iYjc5LWIzMmQ4ZDhlMWRhZiJ9.eCp4KKqQo7yGqbAnJStdM0QFnWFPkPDp7aSEJbgHH2o --insecure" dir= execID=780e4
time="2023-11-03T13:13:38Z" level=debug duration=109.049536ms execID=780e4
time="2023-11-03T13:13:38Z" level=error msg="`../../dist/argocd app patch-resource argocd-e2e-external/test-namespaced-app-with-secrets --resource-name test-secret --kind Secret --patch {\"op\": \"add\", \"path\": \"/data\", \"value\": \"hello\"}' --patch-type application/json-patch+json --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzYxMCwibmJmIjoxNjk5MDE3MjEwLCJpYXQiOjE2OTkwMTcyMTAsImp0aSI6IjNmNDQ5ZWYxLTVlMGItNGQwYi1iYjc5LWIzMmQ4ZDhlMWRhZiJ9.eCp4KKqQo7yGqbAnJStdM0QFnWFPkPDp7aSEJbgHH2o --insecure` failed exit status 20: time=\"2023-11-03T13:13:38Z\" level=fatal msg=\"rpc error: code = Unknown desc = failed to patch Secret argocd-e2e--test-namespaced-app-with-secrets-tbcuv/test-secret\"" execID=780e4
time="2023-11-03T13:13:38Z" level=info msg="../../dist/argocd app get argocd-e2e-external/test-namespaced-app-with-secrets --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzYxMCwibmJmIjoxNjk5MDE3MjEwLCJpYXQiOjE2OTkwMTcyMTAsImp0aSI6IjNmNDQ5ZWYxLTVlMGItNGQwYi1iYjc5LWIzMmQ4ZDhlMWRhZiJ9.eCp4KKqQo7yGqbAnJStdM0QFnWFPkPDp7aSEJbgHH2o --insecure" dir= execID=c3527
time="2023-11-03T13:13:38Z" level=debug msg="Name:               argocd-e2e-external/test-namespaced-app-with-secrets\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-app-with-secrets-tbcuv\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-namespaced-app-with-secrets\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               secrets\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (f88de47)\nHealth Status:      Healthy\n\nGROUP  KIND    NAMESPACE                                           NAME          STATUS     HEALTH  HOOK  MESSAGE\n       Secret  argocd-e2e--test-namespaced-app-with-secrets-tbcuv  test-secret2  Synced                   secret/test-secret2 created\n       Secret  argocd-e2e--test-namespaced-app-with-secrets-tbcuv  test-secret   OutOfSync                secret/test-secret created\n" duration=243.326814ms execID=c3527
time="2023-11-03T13:13:38Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:13:38Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:13:38Z" level=info msg="../../dist/argocd app diff argocd-e2e-external/test-namespaced-app-with-secrets --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzYxMCwibmJmIjoxNjk5MDE3MjEwLCJpYXQiOjE2OTkwMTcyMTAsImp0aSI6IjNmNDQ5ZWYxLTVlMGItNGQwYi1iYjc5LWIzMmQ4ZDhlMWRhZiJ9.eCp4KKqQo7yGqbAnJStdM0QFnWFPkPDp7aSEJbgHH2o --insecure" dir= execID=80681
time="2023-11-03T13:13:38Z" level=debug msg="\n===== /Secret argocd-e2e--test-namespaced-app-with-secrets-tbcuv/test-secret ======\n" duration=137.919694ms execID=80681
time="2023-11-03T13:13:38Z" level=error msg="`../../dist/argocd app diff argocd-e2e-external/test-namespaced-app-with-secrets --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzYxMCwibmJmIjoxNjk5MDE3MjEwLCJpYXQiOjE2OTkwMTcyMTAsImp0aSI6IjNmNDQ5ZWYxLTVlMGItNGQwYi1iYjc5LWIzMmQ4ZDhlMWRhZiJ9.eCp4KKqQo7yGqbAnJStdM0QFnWFPkPDp7aSEJbgHH2o --insecure` failed exit status 1" execID=80681
    app_management_ns_test.go:690: 
        	Error Trace:	/argocd-e2e/argo-cd/test/e2e/app_management_ns_test.go:690
        	            				/argocd-e2e/argo-cd/test/e2e/fixture/app/consequences.go:47
        	            				/argocd-e2e/argo-cd/test/e2e/app_management_ns_test.go:687
        	Error:      	"\n===== /Secret argocd-e2e--test-namespaced-app-with-secrets-tbcuv/test-secret ======" does not contain "username: ++++++++"
        	Test:       	TestNamespacedAppWithSecrets
    app_management_ns_test.go:691: 
        	Error Trace:	/argocd-e2e/argo-cd/test/e2e/app_management_ns_test.go:691
        	            				/argocd-e2e/argo-cd/test/e2e/fixture/app/consequences.go:47
        	            				/argocd-e2e/argo-cd/test/e2e/app_management_ns_test.go:687
        	Error:      	"\n===== /Secret argocd-e2e--test-namespaced-app-with-secrets-tbcuv/test-secret ======" does not contain "password: ++++++++++++"
        	Test:       	TestNamespacedAppWithSecrets
time="2023-11-03T13:13:38Z" level=info msg="../../dist/argocd app diff argocd-e2e-external/test-namespaced-app-with-secrets --local testdata/secrets --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzYxMCwibmJmIjoxNjk5MDE3MjEwLCJpYXQiOjE2OTkwMTcyMTAsImp0aSI6IjNmNDQ5ZWYxLTVlMGItNGQwYi1iYjc5LWIzMmQ4ZDhlMWRhZiJ9.eCp4KKqQo7yGqbAnJStdM0QFnWFPkPDp7aSEJbgHH2o --insecure" dir= execID=f9fcf
time="2023-11-03T13:13:39Z" level=debug duration=178.150736ms execID=f9fcf
time="2023-11-03T13:13:39Z" level=info msg="../../dist/argocd app get argocd-e2e-external/test-namespaced-app-with-secrets --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzYxMCwibmJmIjoxNjk5MDE3MjEwLCJpYXQiOjE2OTkwMTcyMTAsImp0aSI6IjNmNDQ5ZWYxLTVlMGItNGQwYi1iYjc5LWIzMmQ4ZDhlMWRhZiJ9.eCp4KKqQo7yGqbAnJStdM0QFnWFPkPDp7aSEJbgHH2o --insecure" dir= execID=2739d
time="2023-11-03T13:13:39Z" level=debug msg="Name:               argocd-e2e-external/test-namespaced-app-with-secrets\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-app-with-secrets-tbcuv\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-namespaced-app-with-secrets\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               secrets\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (f88de47)\nHealth Status:      Healthy\n\nGROUP  KIND    NAMESPACE                                           NAME          STATUS  HEALTH  HOOK  MESSAGE\n       Secret  argocd-e2e--test-namespaced-app-with-secrets-tbcuv  test-secret2  Synced                secret/test-secret2 created\n       Secret  argocd-e2e--test-namespaced-app-with-secrets-tbcuv  test-secret   Synced                secret/test-secret created\n" duration=145.845985ms execID=2739d
time="2023-11-03T13:13:39Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:13:39Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:13:39Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:13:39Z" level=info msg="../../dist/argocd app diff argocd-e2e-external/test-namespaced-app-with-secrets --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzYxMCwibmJmIjoxNjk5MDE3MjEwLCJpYXQiOjE2OTkwMTcyMTAsImp0aSI6IjNmNDQ5ZWYxLTVlMGItNGQwYi1iYjc5LWIzMmQ4ZDhlMWRhZiJ9.eCp4KKqQo7yGqbAnJStdM0QFnWFPkPDp7aSEJbgHH2o --insecure" dir= execID=28942
time="2023-11-03T13:13:39Z" level=debug duration=169.059585ms execID=28942
time="2023-11-03T13:13:39Z" level=info msg=adding path=secrets/secret3.yaml
time="2023-11-03T13:13:39Z" level=info msg="../../dist/argocd app diff argocd-e2e-external/test-namespaced-app-with-secrets --local testdata/secrets --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzYxMCwibmJmIjoxNjk5MDE3MjEwLCJpYXQiOjE2OTkwMTcyMTAsImp0aSI6IjNmNDQ5ZWYxLTVlMGItNGQwYi1iYjc5LWIzMmQ4ZDhlMWRhZiJ9.eCp4KKqQo7yGqbAnJStdM0QFnWFPkPDp7aSEJbgHH2o --insecure" dir= execID=8d887
time="2023-11-03T13:13:39Z" level=debug duration=148.108054ms execID=8d887
--- FAIL: TestNamespacedAppWithSecrets (10.83s)
=== RUN   TestNamespacedResourceDiffing
time="2023-11-03T13:13:39Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=0b3cf
time="2023-11-03T13:13:39Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-app-with-secrets-tbcuv\" deleted\n" duration=186.730919ms execID=0b3cf
time="2023-11-03T13:13:39Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=d4758
time="2023-11-03T13:13:40Z" level=debug msg="No resources found\n" duration=442.823608ms execID=d4758
time="2023-11-03T13:13:40Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=7db81
time="2023-11-03T13:13:40Z" level=debug msg="No resources found\n" duration=230.750923ms execID=7db81
time="2023-11-03T13:13:41Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:13:41Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzYyMSwibmJmIjoxNjk5MDE3MjIxLCJpYXQiOjE2OTkwMTcyMjEsImp0aSI6IjgxOGIwN2M1LTdmM2QtNDE3ZS1hNWJjLWYyNGZmNzRmNDc0NCJ9.X0tkJLM5pJFPMZ_l1cBz4TGXzpA1yH8ZiGFOcDIl5no --insecure" dir= execID=04e6c
time="2023-11-03T13:13:41Z" level=debug duration=85.764711ms execID=04e6c
time="2023-11-03T13:13:41Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=d01c6
time="2023-11-03T13:13:41Z" level=debug duration=2.028913ms execID=d01c6
time="2023-11-03T13:13:41Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=cf331
time="2023-11-03T13:13:41Z" level=debug duration=1.467605ms execID=cf331
time="2023-11-03T13:13:41Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=37bc9
time="2023-11-03T13:13:41Z" level=debug duration=1.385684ms execID=37bc9
time="2023-11-03T13:13:41Z" level=info msg="pkill -9 gpg-agent" dir= execID=90d5f
time="2023-11-03T13:13:41Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=bfe58
time="2023-11-03T13:13:41Z" level=debug duration=10.027716ms execID=bfe58
time="2023-11-03T13:13:41Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=b3289
time="2023-11-03T13:13:41Z" level=debug duration=35.275898ms execID=b3289
time="2023-11-03T13:13:41Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=0a0d3
time="2023-11-03T13:13:41Z" level=debug duration=1.841821ms execID=0a0d3
time="2023-11-03T13:13:41Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=7e677
time="2023-11-03T13:13:41Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.993933ms execID=7e677
time="2023-11-03T13:13:41Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=0070b
time="2023-11-03T13:13:41Z" level=debug duration=30.000396ms execID=0070b
time="2023-11-03T13:13:41Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=bc943
time="2023-11-03T13:13:41Z" level=debug duration=22.531774ms execID=bc943
time="2023-11-03T13:13:41Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=ff569
time="2023-11-03T13:13:41Z" level=debug duration=2.309862ms execID=ff569
time="2023-11-03T13:13:41Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=1a1ce
Handling connection for 9081
time="2023-11-03T13:13:41Z" level=debug duration=88.502129ms execID=1a1ce
time="2023-11-03T13:13:41Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-resource-diffing-qjtzh" dir= execID=9bcd0
time="2023-11-03T13:13:41Z" level=debug msg="namespace/argocd-e2e--test-namespaced-resource-diffing-qjtzh created\n" duration=169.81353ms execID=9bcd0
time="2023-11-03T13:13:41Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-resource-diffing-qjtzh e2e.argoproj.io=true" dir= execID=82cb2
time="2023-11-03T13:13:42Z" level=debug msg="namespace/argocd-e2e--test-namespaced-resource-diffing-qjtzh labeled\n" duration=299.969953ms execID=82cb2
time="2023-11-03T13:13:42Z" level=info msg="clean state" duration=2.529487984s id=TestNamespacedResourceDiffing-qjtzh name=TestNamespacedResourceDiffing password=password username=admin
time="2023-11-03T13:13:43Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-resource-diffing --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-namespaced-resource-diffing-qjtzh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzYyMSwibmJmIjoxNjk5MDE3MjIxLCJpYXQiOjE2OTkwMTcyMjEsImp0aSI6IjgxOGIwN2M1LTdmM2QtNDE3ZS1hNWJjLWYyNGZmNzRmNDc0NCJ9.X0tkJLM5pJFPMZ_l1cBz4TGXzpA1yH8ZiGFOcDIl5no --insecure" dir= execID=c6698
time="2023-11-03T13:13:43Z" level=debug msg="application 'test-namespaced-resource-diffing' created\n" duration=224.067527ms execID=c6698
time="2023-11-03T13:13:43Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:13:43Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-resource-diffing --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzYyMSwibmJmIjoxNjk5MDE3MjIxLCJpYXQiOjE2OTkwMTcyMjEsImp0aSI6IjgxOGIwN2M1LTdmM2QtNDE3ZS1hNWJjLWYyNGZmNzRmNDc0NCJ9.X0tkJLM5pJFPMZ_l1cBz4TGXzpA1yH8ZiGFOcDIl5no --insecure" dir= execID=9d5c1
time="2023-11-03T13:13:47Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:13:47+00:00            Service  argocd-e2e--test-namespaced-resource-diffing-qjtzh          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:13:47+00:00   apps  Deployment  argocd-e2e--test-namespaced-resource-diffing-qjtzh          guestbook-ui  OutOfSync  Missing              \n\nName:               argocd-e2e-external/test-namespaced-resource-diffing\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-resource-diffing-qjtzh\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-resource-diffing\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (73ea6f9)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      73ea6f97bbacb6994a0222cf9d02245275961fca\nPhase:              Succeeded\nStart:              2023-11-03 13:13:43 +0000 UTC\nFinished:           2023-11-03 13:13:47 +0000 UTC\nDuration:           4s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                           NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-namespaced-resource-diffing-qjtzh  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-namespaced-resource-diffing-qjtzh  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=4.558885168s execID=9d5c1
time="2023-11-03T13:13:47Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:13:47Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:13:47Z" level=info msg="../../dist/argocd app get argocd-e2e-external/test-namespaced-resource-diffing --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzYyMSwibmJmIjoxNjk5MDE3MjIxLCJpYXQiOjE2OTkwMTcyMjEsImp0aSI6IjgxOGIwN2M1LTdmM2QtNDE3ZS1hNWJjLWYyNGZmNzRmNDc0NCJ9.X0tkJLM5pJFPMZ_l1cBz4TGXzpA1yH8ZiGFOcDIl5no --insecure" dir= execID=b0156
time="2023-11-03T13:13:48Z" level=debug msg="Name:               argocd-e2e-external/test-namespaced-resource-diffing\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-resource-diffing-qjtzh\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-namespaced-resource-diffing\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (73ea6f9)\nHealth Status:      Healthy\n\nGROUP  KIND        NAMESPACE                                           NAME          STATUS     HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-namespaced-resource-diffing-qjtzh  guestbook-ui  Synced     Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-namespaced-resource-diffing-qjtzh  guestbook-ui  OutOfSync  Healthy        deployment.apps/guestbook-ui created\n" duration=180.256247ms execID=b0156
time="2023-11-03T13:13:48Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:13:48Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:13:48Z" level=info msg="../../dist/argocd app diff argocd-e2e-external/test-namespaced-resource-diffing --local testdata/guestbook --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzYyMSwibmJmIjoxNjk5MDE3MjIxLCJpYXQiOjE2OTkwMTcyMjEsImp0aSI6IjgxOGIwN2M1LTdmM2QtNDE3ZS1hNWJjLWYyNGZmNzRmNDc0NCJ9.X0tkJLM5pJFPMZ_l1cBz4TGXzpA1yH8ZiGFOcDIl5no --insecure" dir= execID=22347
time="2023-11-03T13:13:48Z" level=debug msg="\n===== apps/Deployment argocd-e2e--test-namespaced-resource-diffing-qjtzh/guestbook-ui ======\n" duration=180.671366ms execID=22347
time="2023-11-03T13:13:48Z" level=error msg="`../../dist/argocd app diff argocd-e2e-external/test-namespaced-resource-diffing --local testdata/guestbook --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzYyMSwibmJmIjoxNjk5MDE3MjIxLCJpYXQiOjE2OTkwMTcyMjEsImp0aSI6IjgxOGIwN2M1LTdmM2QtNDE3ZS1hNWJjLWYyNGZmNzRmNDc0NCJ9.X0tkJLM5pJFPMZ_l1cBz4TGXzpA1yH8ZiGFOcDIl5no --insecure` failed exit status 1: Warning: local diff without --server-side-generate is deprecated and does not work with plugins. Server-side generation will be the default in v2.7.time=\"2023-11-03T13:13:48Z\" level=info msg=\"kustomize build testdata/guestbook\" dir= execID=c5fe3\ntime=\"2023-11-03T13:13:48Z\" level=info msg=Trace args=\"[kustomize build testdata/guestbook]\" dir= operation_name=\"exec kustomize\" time_ms=14.522672" execID=22347
time="2023-11-03T13:13:49Z" level=info msg="../../dist/argocd app get argocd-e2e-external/test-namespaced-resource-diffing --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzYyMSwibmJmIjoxNjk5MDE3MjIxLCJpYXQiOjE2OTkwMTcyMjEsImp0aSI6IjgxOGIwN2M1LTdmM2QtNDE3ZS1hNWJjLWYyNGZmNzRmNDc0NCJ9.X0tkJLM5pJFPMZ_l1cBz4TGXzpA1yH8ZiGFOcDIl5no --insecure" dir= execID=56935
time="2023-11-03T13:13:54Z" level=debug msg="Name:               argocd-e2e-external/test-namespaced-resource-diffing\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-resource-diffing-qjtzh\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-namespaced-resource-diffing\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (73ea6f9)\nHealth Status:      Healthy\n\nGROUP  KIND        NAMESPACE                                           NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-namespaced-resource-diffing-qjtzh  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-namespaced-resource-diffing-qjtzh  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=5.516043208s execID=56935
time="2023-11-03T13:13:54Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:13:54Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:13:54Z" level=info msg="../../dist/argocd app diff argocd-e2e-external/test-namespaced-resource-diffing --local testdata/guestbook --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzYyMSwibmJmIjoxNjk5MDE3MjIxLCJpYXQiOjE2OTkwMTcyMjEsImp0aSI6IjgxOGIwN2M1LTdmM2QtNDE3ZS1hNWJjLWYyNGZmNzRmNDc0NCJ9.X0tkJLM5pJFPMZ_l1cBz4TGXzpA1yH8ZiGFOcDIl5no --insecure" dir= execID=fbcc9
time="2023-11-03T13:13:55Z" level=debug duration=156.973386ms execID=fbcc9
time="2023-11-03T13:13:56Z" level=info msg="../../dist/argocd app patch argocd-e2e-external/test-namespaced-resource-diffing --patch [{\n\t\t\t\"op\": \"add\",\n\t\t\t\"path\": \"/spec/syncPolicy\",\n\t\t\t\"value\": { \"syncOptions\": [\"ServerSideApply=true\"] }\n\t\t\t}] --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzYyMSwibmJmIjoxNjk5MDE3MjIxLCJpYXQiOjE2OTkwMTcyMjEsImp0aSI6IjgxOGIwN2M1LTdmM2QtNDE3ZS1hNWJjLWYyNGZmNzRmNDc0NCJ9.X0tkJLM5pJFPMZ_l1cBz4TGXzpA1yH8ZiGFOcDIl5no --insecure" dir= execID=485e2
time="2023-11-03T13:13:56Z" level=debug msg="metadata:\n  creationTimestamp: \"2023-11-03T13:13:43Z\"\n  generation: 14\n  managedFields:\n  - apiVersion: argoproj.io/v1alpha1\n    fieldsType: FieldsV1\n    fieldsV1:\n      f:status:\n        f:health:\n          f:status: {}\n        f:history: {}\n        f:operationState:\n          .: {}\n          f:finishedAt: {}\n          f:message: {}\n          f:operation:\n            .: {}\n            f:initiatedBy:\n              .: {}\n              f:username: {}\n            f:retry: {}\n            f:sync:\n              .: {}\n              f:prune: {}\n              f:revision: {}\n              f:syncStrategy:\n                .: {}\n                f:hook: {}\n          f:phase: {}\n          f:startedAt: {}\n          f:syncResult:\n            .: {}\n            f:resources: {}\n            f:revision: {}\n            f:source:\n              .: {}\n              f:path: {}\n              f:repoURL: {}\n        f:reconciledAt: {}\n        f:resources: {}\n        f:sourceType: {}\n        f:sync:\n          f:comparedTo:\n            f:destination:\n              f:namespace: {}\n              f:server: {}\n            f:source:\n              f:path: {}\n              f:repoURL: {}\n          f:revision: {}\n          f:status: {}\n    manager: argocd-application-controller\n    operation: Update\n    time: \"2023-11-03T13:13:54Z\"\n  - apiVersion: argoproj.io/v1alpha1\n    fieldsType: FieldsV1\n    fieldsV1:\n      f:spec:\n        .: {}\n        f:destination:\n          .: {}\n          f:namespace: {}\n          f:server: {}\n        f:project: {}\n        f:source:\n          .: {}\n          f:path: {}\n          f:repoURL: {}\n        f:syncPolicy:\n          .: {}\n          f:syncOptions: {}\n      f:status:\n        .: {}\n        f:health: {}\n        f:summary: {}\n        f:sync:\n          .: {}\n          f:comparedTo:\n            .: {}\n            f:destination: {}\n            f:source: {}\n    manager: argocd-server\n    operation: Update\n    time: \"2023-11-03T13:13:56Z\"\n  name: test-namespaced-resource-diffing\n  namespace: argocd-e2e-external\n  resourceVersion: \"36246967\"\n  uid: 48422413-9c9b-43ee-a12f-6b5f8aa0039d\nspec:\n  destination:\n    namespace: argocd-e2e--test-namespaced-resource-diffing-qjtzh\n    server: https://kubernetes.default.svc\n  project: default\n  source:\n    path: guestbook\n    repoURL: http://argocd-e2e-server:9081/argo-e2e/testdata.git\n  syncPolicy:\n    syncOptions:\n    - ServerSideApply=true\nstatus:\n  health:\n    status: Healthy\n  history:\n  - deployStartedAt: \"2023-11-03T13:13:43Z\"\n    deployedAt: \"2023-11-03T13:13:47Z\"\n    id: 0\n    revision: 73ea6f97bbacb6994a0222cf9d02245275961fca\n    source:\n      path: guestbook\n      repoURL: http://argocd-e2e-server:9081/argo-e2e/testdata.git\n  operationState:\n    finishedAt: \"2023-11-03T13:13:47Z\"\n    message: successfully synced (all tasks run)\n    operation:\n      initiatedBy:\n        username: admin\n      retry: {}\n      sync:\n        prune: true\n        revision: 73ea6f97bbacb6994a0222cf9d02245275961fca\n        syncStrategy:\n          hook: {}\n    phase: Succeeded\n    startedAt: \"2023-11-03T13:13:43Z\"\n    syncResult:\n      resources:\n      - group: \"\"\n        hookPhase: Running\n        kind: Service\n        message: service/guestbook-ui created\n        name: guestbook-ui\n        namespace: argocd-e2e--test-namespaced-resource-diffing-qjtzh\n        status: Synced\n        syncPhase: Sync\n        version: v1\n      - group: apps\n        hookPhase: Running\n        kind: Deployment\n        message: deployment.apps/guestbook-ui created\n        name: guestbook-ui\n        namespace: argocd-e2e--test-namespaced-resource-diffing-qjtzh\n        status: Synced\n        syncPhase: Sync\n        version: v1\n      revision: 73ea6f97bbacb6994a0222cf9d02245275961fca\n      source:\n        path: guestbook\n        repoURL: http://argocd-e2e-server:9081/argo-e2e/testdata.git\n  reconciledAt: \"2023-11-03T13:13:49Z\"\n  resources:\n  - health:\n      status: Healthy\n    kind: Service\n    name: guestbook-ui\n    namespace: argocd-e2e--test-namespaced-resource-diffing-qjtzh\n    status: Synced\n    version: v1\n  - group: apps\n    health:\n      status: Healthy\n    kind: Deployment\n    name: guestbook-ui\n    namespace: argocd-e2e--test-namespaced-resource-diffing-qjtzh\n    status: Synced\n    version: v1\n  sourceType: Kustomize\n  summary: {}\n  sync:\n    comparedTo:\n      destination:\n        namespace: argocd-e2e--test-namespaced-resource-diffing-qjtzh\n        server: https://kubernetes.default.svc\n      source:\n        path: guestbook\n        repoURL: http://argocd-e2e-server:9081/argo-e2e/testdata.git\n    revision: 73ea6f97bbacb6994a0222cf9d02245275961fca\n    status: Synced\n\n" duration=121.037735ms execID=485e2
time="2023-11-03T13:13:56Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:13:56Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-resource-diffing --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzYyMSwibmJmIjoxNjk5MDE3MjIxLCJpYXQiOjE2OTkwMTcyMjEsImp0aSI6IjgxOGIwN2M1LTdmM2QtNDE3ZS1hNWJjLWYyNGZmNzRmNDc0NCJ9.X0tkJLM5pJFPMZ_l1cBz4TGXzpA1yH8ZiGFOcDIl5no --insecure" dir= execID=2a1be
time="2023-11-03T13:13:57Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                          NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:13:56+00:00            Service  argocd-e2e--test-namespaced-resource-diffing-qjtzh          guestbook-ui    Synced  Healthy              \n2023-11-03T13:13:56+00:00   apps  Deployment  argocd-e2e--test-namespaced-resource-diffing-qjtzh          guestbook-ui    Synced  Healthy              \n2023-11-03T13:13:56+00:00            Service  argocd-e2e--test-namespaced-resource-diffing-qjtzh          guestbook-ui    Synced  Healthy              service/guestbook-ui serverside-applied\n2023-11-03T13:13:56+00:00   apps  Deployment  argocd-e2e--test-namespaced-resource-diffing-qjtzh          guestbook-ui    Synced  Healthy              deployment.apps/guestbook-ui serverside-applied\n2023-11-03T13:13:56+00:00   apps  Deployment  argocd-e2e--test-namespaced-resource-diffing-qjtzh          guestbook-ui    Synced  Progressing              deployment.apps/guestbook-ui serverside-applied\n\nName:               argocd-e2e-external/test-namespaced-resource-diffing\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-resource-diffing-qjtzh\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-resource-diffing\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (73ea6f9)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      73ea6f97bbacb6994a0222cf9d02245275961fca\nPhase:              Succeeded\nStart:              2023-11-03 13:13:56 +0000 UTC\nFinished:           2023-11-03 13:13:56 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                           NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-namespaced-resource-diffing-qjtzh  guestbook-ui  Synced  Healthy        service/guestbook-ui serverside-applied\napps   Deployment  argocd-e2e--test-namespaced-resource-diffing-qjtzh  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui serverside-applied\n" duration=897.496602ms execID=2a1be
time="2023-11-03T13:13:57Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:13:57Z" level=info msg="kubectl apply -n argocd-e2e--test-namespaced-resource-diffing-qjtzh --server-side=true --field-manager=revision-history-manager --validate=false --force-conflicts -f -" dir= execID=3eadc
time="2023-11-03T13:13:58Z" level=debug msg="deployment.apps/guestbook-ui serverside-applied\n" duration=1.468563042s execID=3eadc
time="2023-11-03T13:13:58Z" level=info msg="../../dist/argocd app get argocd-e2e-external/test-namespaced-resource-diffing --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzYyMSwibmJmIjoxNjk5MDE3MjIxLCJpYXQiOjE2OTkwMTcyMjEsImp0aSI6IjgxOGIwN2M1LTdmM2QtNDE3ZS1hNWJjLWYyNGZmNzRmNDc0NCJ9.X0tkJLM5pJFPMZ_l1cBz4TGXzpA1yH8ZiGFOcDIl5no --insecure" dir= execID=a97e3
time="2023-11-03T13:13:58Z" level=debug msg="Name:               argocd-e2e-external/test-namespaced-resource-diffing\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-resource-diffing-qjtzh\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-namespaced-resource-diffing\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (73ea6f9)\nHealth Status:      Healthy\n\nGROUP  KIND        NAMESPACE                                           NAME          STATUS     HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-namespaced-resource-diffing-qjtzh  guestbook-ui  Synced     Healthy        service/guestbook-ui serverside-applied\napps   Deployment  argocd-e2e--test-namespaced-resource-diffing-qjtzh  guestbook-ui  OutOfSync  Healthy        deployment.apps/guestbook-ui serverside-applied\n" duration=191.491287ms execID=a97e3
time="2023-11-03T13:13:58Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:13:58Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:13:59Z" level=info msg="../../dist/argocd app get argocd-e2e-external/test-namespaced-resource-diffing --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzYyMSwibmJmIjoxNjk5MDE3MjIxLCJpYXQiOjE2OTkwMTcyMjEsImp0aSI6IjgxOGIwN2M1LTdmM2QtNDE3ZS1hNWJjLWYyNGZmNzRmNDc0NCJ9.X0tkJLM5pJFPMZ_l1cBz4TGXzpA1yH8ZiGFOcDIl5no --insecure" dir= execID=7f1d0
time="2023-11-03T13:14:05Z" level=debug msg="Name:               argocd-e2e-external/test-namespaced-resource-diffing\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-resource-diffing-qjtzh\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-namespaced-resource-diffing\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (73ea6f9)\nHealth Status:      Healthy\n\nGROUP  KIND        NAMESPACE                                           NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-namespaced-resource-diffing-qjtzh  guestbook-ui  Synced  Healthy        service/guestbook-ui serverside-applied\napps   Deployment  argocd-e2e--test-namespaced-resource-diffing-qjtzh  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui serverside-applied\n" duration=5.403935307s execID=7f1d0
time="2023-11-03T13:14:05Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:14:05Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:14:06Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-resource-diffing --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzYyMSwibmJmIjoxNjk5MDE3MjIxLCJpYXQiOjE2OTkwMTcyMjEsImp0aSI6IjgxOGIwN2M1LTdmM2QtNDE3ZS1hNWJjLWYyNGZmNzRmNDc0NCJ9.X0tkJLM5pJFPMZ_l1cBz4TGXzpA1yH8ZiGFOcDIl5no --insecure" dir= execID=88e0d
time="2023-11-03T13:14:06Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                          NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:14:06+00:00            Service  argocd-e2e--test-namespaced-resource-diffing-qjtzh          guestbook-ui    Synced  Healthy              \n2023-11-03T13:14:06+00:00   apps  Deployment  argocd-e2e--test-namespaced-resource-diffing-qjtzh          guestbook-ui    Synced  Healthy              \n2023-11-03T13:14:06+00:00            Service  argocd-e2e--test-namespaced-resource-diffing-qjtzh          guestbook-ui    Synced  Healthy              service/guestbook-ui serverside-applied\n2023-11-03T13:14:06+00:00   apps  Deployment  argocd-e2e--test-namespaced-resource-diffing-qjtzh          guestbook-ui    Synced  Healthy              deployment.apps/guestbook-ui serverside-applied\n2023-11-03T13:14:06+00:00   apps  Deployment  argocd-e2e--test-namespaced-resource-diffing-qjtzh          guestbook-ui    Synced  Progressing              deployment.apps/guestbook-ui serverside-applied\n\nName:               argocd-e2e-external/test-namespaced-resource-diffing\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-resource-diffing-qjtzh\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-resource-diffing\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (73ea6f9)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      73ea6f97bbacb6994a0222cf9d02245275961fca\nPhase:              Succeeded\nStart:              2023-11-03 13:14:06 +0000 UTC\nFinished:           2023-11-03 13:14:06 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                           NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-namespaced-resource-diffing-qjtzh  guestbook-ui  Synced  Healthy        service/guestbook-ui serverside-applied\napps   Deployment  argocd-e2e--test-namespaced-resource-diffing-qjtzh  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui serverside-applied\n" duration=761.538164ms execID=88e0d
time="2023-11-03T13:14:06Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:14:06Z" level=info msg="../../dist/argocd app patch argocd-e2e-external/test-namespaced-resource-diffing --patch [{\n\t\t\t\"op\": \"add\",\n\t\t\t\"path\": \"/spec/syncPolicy\",\n\t\t\t\"value\": { \"syncOptions\": [\"RespectIgnoreDifferences=true\"] }\n\t\t\t}] --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzYyMSwibmJmIjoxNjk5MDE3MjIxLCJpYXQiOjE2OTkwMTcyMjEsImp0aSI6IjgxOGIwN2M1LTdmM2QtNDE3ZS1hNWJjLWYyNGZmNzRmNDc0NCJ9.X0tkJLM5pJFPMZ_l1cBz4TGXzpA1yH8ZiGFOcDIl5no --insecure" dir= execID=644e0
time="2023-11-03T13:14:07Z" level=debug msg="metadata:\n  creationTimestamp: \"2023-11-03T13:13:43Z\"\n  generation: 31\n  managedFields:\n  - apiVersion: argoproj.io/v1alpha1\n    fieldsType: FieldsV1\n    fieldsV1:\n      f:status:\n        f:health:\n          f:status: {}\n        f:history: {}\n        f:operationState:\n          .: {}\n          f:finishedAt: {}\n          f:message: {}\n          f:operation:\n            .: {}\n            f:initiatedBy:\n              .: {}\n              f:username: {}\n            f:retry: {}\n            f:sync:\n              .: {}\n              f:prune: {}\n              f:revision: {}\n              f:syncOptions: {}\n              f:syncStrategy:\n                .: {}\n                f:hook: {}\n          f:phase: {}\n          f:startedAt: {}\n          f:syncResult:\n            .: {}\n            f:resources: {}\n            f:revision: {}\n            f:source:\n              .: {}\n              f:path: {}\n              f:repoURL: {}\n        f:reconciledAt: {}\n        f:resources: {}\n        f:sourceType: {}\n        f:sync:\n          f:comparedTo:\n            f:destination:\n              f:namespace: {}\n              f:server: {}\n            f:source:\n              f:path: {}\n              f:repoURL: {}\n          f:revision: {}\n          f:status: {}\n    manager: argocd-application-controller\n    operation: Update\n    time: \"2023-11-03T13:14:06Z\"\n  - apiVersion: argoproj.io/v1alpha1\n    fieldsType: FieldsV1\n    fieldsV1:\n      f:spec:\n        .: {}\n        f:destination:\n          .: {}\n          f:namespace: {}\n          f:server: {}\n        f:project: {}\n        f:source:\n          .: {}\n          f:path: {}\n          f:repoURL: {}\n        f:syncPolicy:\n          .: {}\n          f:syncOptions: {}\n      f:status:\n        .: {}\n        f:health: {}\n        f:summary: {}\n        f:sync:\n          .: {}\n          f:comparedTo:\n            .: {}\n            f:destination: {}\n            f:source: {}\n    manager: argocd-server\n    operation: Update\n    time: \"2023-11-03T13:14:07Z\"\n  name: test-namespaced-resource-diffing\n  namespace: argocd-e2e-external\n  resourceVersion: \"36247113\"\n  uid: 48422413-9c9b-43ee-a12f-6b5f8aa0039d\nspec:\n  destination:\n    namespace: argocd-e2e--test-namespaced-resource-diffing-qjtzh\n    server: https://kubernetes.default.svc\n  project: default\n  source:\n    path: guestbook\n    repoURL: http://argocd-e2e-server:9081/argo-e2e/testdata.git\n  syncPolicy:\n    syncOptions:\n    - RespectIgnoreDifferences=true\nstatus:\n  health:\n    status: Healthy\n  history:\n  - deployStartedAt: \"2023-11-03T13:13:43Z\"\n    deployedAt: \"2023-11-03T13:13:47Z\"\n    id: 0\n    revision: 73ea6f97bbacb6994a0222cf9d02245275961fca\n    source:\n      path: guestbook\n      repoURL: http://argocd-e2e-server:9081/argo-e2e/testdata.git\n  - deployStartedAt: \"2023-11-03T13:13:56Z\"\n    deployedAt: \"2023-11-03T13:13:56Z\"\n    id: 1\n    revision: 73ea6f97bbacb6994a0222cf9d02245275961fca\n    source:\n      path: guestbook\n      repoURL: http://argocd-e2e-server:9081/argo-e2e/testdata.git\n  - deployStartedAt: \"2023-11-03T13:14:06Z\"\n    deployedAt: \"2023-11-03T13:14:06Z\"\n    id: 2\n    revision: 73ea6f97bbacb6994a0222cf9d02245275961fca\n    source:\n      path: guestbook\n      repoURL: http://argocd-e2e-server:9081/argo-e2e/testdata.git\n  operationState:\n    finishedAt: \"2023-11-03T13:14:06Z\"\n    message: successfully synced (all tasks run)\n    operation:\n      initiatedBy:\n        username: admin\n      retry: {}\n      sync:\n        prune: true\n        revision: 73ea6f97bbacb6994a0222cf9d02245275961fca\n        syncOptions:\n        - ServerSideApply=true\n        syncStrategy:\n          hook: {}\n    phase: Succeeded\n    startedAt: \"2023-11-03T13:14:06Z\"\n    syncResult:\n      resources:\n      - group: \"\"\n        hookPhase: Running\n        kind: Service\n        message: service/guestbook-ui serverside-applied\n        name: guestbook-ui\n        namespace: argocd-e2e--test-namespaced-resource-diffing-qjtzh\n        status: Synced\n        syncPhase: Sync\n        version: v1\n      - group: apps\n        hookPhase: Running\n        kind: Deployment\n        message: deployment.apps/guestbook-ui serverside-applied\n        name: guestbook-ui\n        namespace: argocd-e2e--test-namespaced-resource-diffing-qjtzh\n        status: Synced\n        syncPhase: Sync\n        version: v1\n      revision: 73ea6f97bbacb6994a0222cf9d02245275961fca\n      source:\n        path: guestbook\n        repoURL: http://argocd-e2e-server:9081/argo-e2e/testdata.git\n  reconciledAt: \"2023-11-03T13:14:06Z\"\n  resources:\n  - health:\n      status: Healthy\n    kind: Service\n    name: guestbook-ui\n    namespace: argocd-e2e--test-namespaced-resource-diffing-qjtzh\n    status: Synced\n    version: v1\n  - group: apps\n    health:\n      status: Healthy\n    kind: Deployment\n    name: guestbook-ui\n    namespace: argocd-e2e--test-namespaced-resource-diffing-qjtzh\n    status: Synced\n    version: v1\n  sourceType: Kustomize\n  summary: {}\n  sync:\n    comparedTo:\n      destination:\n        namespace: argocd-e2e--test-namespaced-resource-diffing-qjtzh\n        server: https://kubernetes.default.svc\n      source:\n        path: guestbook\n        repoURL: http://argocd-e2e-server:9081/argo-e2e/testdata.git\n    revision: 73ea6f97bbacb6994a0222cf9d02245275961fca\n    status: Synced\n\n" duration=167.61615ms execID=644e0
time="2023-11-03T13:14:07Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:14:07Z" level=info msg="kubectl apply -n argocd-e2e--test-namespaced-resource-diffing-qjtzh --server-side=true --field-manager=revision-history-manager --validate=false --force-conflicts -f -" dir= execID=febf9
time="2023-11-03T13:14:08Z" level=debug msg="deployment.apps/guestbook-ui serverside-applied\n" duration=1.118263852s execID=febf9
time="2023-11-03T13:14:08Z" level=info msg="../../dist/argocd app get argocd-e2e-external/test-namespaced-resource-diffing --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzYyMSwibmJmIjoxNjk5MDE3MjIxLCJpYXQiOjE2OTkwMTcyMjEsImp0aSI6IjgxOGIwN2M1LTdmM2QtNDE3ZS1hNWJjLWYyNGZmNzRmNDc0NCJ9.X0tkJLM5pJFPMZ_l1cBz4TGXzpA1yH8ZiGFOcDIl5no --insecure" dir= execID=0e432
time="2023-11-03T13:14:08Z" level=debug msg="Name:               argocd-e2e-external/test-namespaced-resource-diffing\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-resource-diffing-qjtzh\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-namespaced-resource-diffing\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (73ea6f9)\nHealth Status:      Healthy\n\nGROUP  KIND        NAMESPACE                                           NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-namespaced-resource-diffing-qjtzh  guestbook-ui  Synced  Healthy        service/guestbook-ui serverside-applied\napps   Deployment  argocd-e2e--test-namespaced-resource-diffing-qjtzh  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui serverside-applied\n" duration=205.206507ms execID=0e432
time="2023-11-03T13:14:08Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:14:08Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:14:08Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-resource-diffing --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzYyMSwibmJmIjoxNjk5MDE3MjIxLCJpYXQiOjE2OTkwMTcyMjEsImp0aSI6IjgxOGIwN2M1LTdmM2QtNDE3ZS1hNWJjLWYyNGZmNzRmNDc0NCJ9.X0tkJLM5pJFPMZ_l1cBz4TGXzpA1yH8ZiGFOcDIl5no --insecure" dir= execID=72375
time="2023-11-03T13:14:09Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                          NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:14:08+00:00            Service  argocd-e2e--test-namespaced-resource-diffing-qjtzh          guestbook-ui    Synced  Healthy              \n2023-11-03T13:14:08+00:00   apps  Deployment  argocd-e2e--test-namespaced-resource-diffing-qjtzh          guestbook-ui    Synced  Healthy              \n2023-11-03T13:14:09+00:00            Service  argocd-e2e--test-namespaced-resource-diffing-qjtzh          guestbook-ui    Synced  Healthy              service/guestbook-ui unchanged\n2023-11-03T13:14:09+00:00   apps  Deployment  argocd-e2e--test-namespaced-resource-diffing-qjtzh          guestbook-ui    Synced  Healthy              deployment.apps/guestbook-ui configured. Warning: resource deployments/guestbook-ui is missing the kubectl.kubernetes.io/last-applied-configuration annotation which is required by  apply.  apply should only be used on resources created declaratively by either  create --save-config or  apply. The missing annotation will be patched automatically.\n\nName:               argocd-e2e-external/test-namespaced-resource-diffing\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-resource-diffing-qjtzh\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-resource-diffing\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (73ea6f9)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      73ea6f97bbacb6994a0222cf9d02245275961fca\nPhase:              Succeeded\nStart:              2023-11-03 13:14:08 +0000 UTC\nFinished:           2023-11-03 13:14:09 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                           NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-namespaced-resource-diffing-qjtzh  guestbook-ui  Synced  Healthy        service/guestbook-ui unchanged\napps   Deployment  argocd-e2e--test-namespaced-resource-diffing-qjtzh  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui configured. Warning: resource deployments/guestbook-ui is missing the kubectl.kubernetes.io/last-applied-configuration annotation which is required by  apply.  apply should only be used on resources created declaratively by either  create --save-config or  apply. The missing annotation will be patched automatically.\n" duration=917.046182ms execID=72375
time="2023-11-03T13:14:09Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:14:09Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:14:09Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedResourceDiffing (29.79s)
=== RUN   TestNamespacedKnownTypesInCRDDiffing
time="2023-11-03T13:14:09Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=46aba
time="2023-11-03T13:14:09Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-resource-diffing-qjtzh\" deleted\n" duration=299.190286ms execID=46aba
time="2023-11-03T13:14:09Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=f7f2e
time="2023-11-03T13:14:10Z" level=debug msg="No resources found\n" duration=422.262664ms execID=f7f2e
time="2023-11-03T13:14:10Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=4e1ad
time="2023-11-03T13:14:10Z" level=debug msg="No resources found\n" duration=203.907135ms execID=4e1ad
time="2023-11-03T13:14:11Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:14:11Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzY1MSwibmJmIjoxNjk5MDE3MjUxLCJpYXQiOjE2OTkwMTcyNTEsImp0aSI6IjgxMzQ1NGYwLTc5NmItNDAxMi1hYTBkLWRkOWYzYmQ3Yjg3YyJ9.MrGVxCyjDj6jeD6cMzaevgnv74hSJ_hOQLKx4kjBdmU --insecure" dir= execID=ac891
time="2023-11-03T13:14:11Z" level=debug duration=71.160109ms execID=ac891
time="2023-11-03T13:14:11Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=718c7
time="2023-11-03T13:14:11Z" level=debug duration=1.947844ms execID=718c7
time="2023-11-03T13:14:11Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=ab75c
time="2023-11-03T13:14:11Z" level=debug duration=1.701107ms execID=ab75c
time="2023-11-03T13:14:11Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=c3400
time="2023-11-03T13:14:11Z" level=debug duration=1.628111ms execID=c3400
time="2023-11-03T13:14:11Z" level=info msg="pkill -9 gpg-agent" dir= execID=88bb7
time="2023-11-03T13:14:11Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=08902
time="2023-11-03T13:14:11Z" level=debug duration=34.122589ms execID=08902
time="2023-11-03T13:14:11Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=ce8d3
time="2023-11-03T13:14:11Z" level=debug duration=39.350999ms execID=ce8d3
time="2023-11-03T13:14:11Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=0cde1
time="2023-11-03T13:14:11Z" level=debug duration=1.901968ms execID=0cde1
time="2023-11-03T13:14:11Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=48580
time="2023-11-03T13:14:11Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.921413ms execID=48580
time="2023-11-03T13:14:11Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=f680c
time="2023-11-03T13:14:11Z" level=debug duration=24.823043ms execID=f680c
time="2023-11-03T13:14:11Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=b82ff
time="2023-11-03T13:14:11Z" level=debug duration=22.531293ms execID=b82ff
time="2023-11-03T13:14:11Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=cc5f9
time="2023-11-03T13:14:11Z" level=debug duration=2.399756ms execID=cc5f9
time="2023-11-03T13:14:11Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=c4d9e
Handling connection for 9081
time="2023-11-03T13:14:11Z" level=debug duration=61.900146ms execID=c4d9e
time="2023-11-03T13:14:11Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-known-types-in-crd-diffing-buenj" dir= execID=c8a91
time="2023-11-03T13:14:11Z" level=debug msg="namespace/argocd-e2e--test-namespaced-known-types-in-crd-diffing-buenj created\n" duration=151.374095ms execID=c8a91
time="2023-11-03T13:14:11Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-known-types-in-crd-diffing-buenj e2e.argoproj.io=true" dir= execID=d3dcf
time="2023-11-03T13:14:11Z" level=debug msg="namespace/argocd-e2e--test-namespaced-known-types-in-crd-diffing-buenj labeled\n" duration=221.201806ms execID=d3dcf
time="2023-11-03T13:14:11Z" level=info msg="clean state" duration=2.581151408s id=TestNamespacedKnownTypesInCRDDiffing-buenj name=TestNamespacedKnownTypesInCRDDiffing password=password username=admin
time="2023-11-03T13:14:12Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-known-types-in-crd-diffing --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path crd-creation --project default --dest-namespace argocd-e2e--test-namespaced-known-types-in-crd-diffing-buenj --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzY1MSwibmJmIjoxNjk5MDE3MjUxLCJpYXQiOjE2OTkwMTcyNTEsImp0aSI6IjgxMzQ1NGYwLTc5NmItNDAxMi1hYTBkLWRkOWYzYmQ3Yjg3YyJ9.MrGVxCyjDj6jeD6cMzaevgnv74hSJ_hOQLKx4kjBdmU --insecure" dir= execID=f7e77
time="2023-11-03T13:14:13Z" level=debug msg="application 'test-namespaced-known-types-in-crd-diffing' created\n" duration=281.564984ms execID=f7e77
time="2023-11-03T13:14:13Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:14:13Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-known-types-in-crd-diffing --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzY1MSwibmJmIjoxNjk5MDE3MjUxLCJpYXQiOjE2OTkwMTcyNTEsImp0aSI6IjgxMzQ1NGYwLTc5NmItNDAxMi1hYTBkLWRkOWYzYmQ3Yjg3YyJ9.MrGVxCyjDj6jeD6cMzaevgnv74hSJ_hOQLKx4kjBdmU --insecure" dir= execID=59324
time="2023-11-03T13:14:23Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:14:17+00:00  argoproj.io                Dummy                argocd-e2e--test-namespaced-known-types-in-crd-diffing-buenj    dummy-crd-instance        OutOfSync  Missing              \n2023-11-03T13:14:17+00:00  argoproj.io                Dummy                kube-system                                                     dummy-crd-instance        OutOfSync  Missing              \n2023-11-03T13:14:17+00:00  apiextensions.k8s.io  CustomResourceDefinition                                                                clusterdummies.argoproj.io  OutOfSync  Missing              \n2023-11-03T13:14:17+00:00  apiextensions.k8s.io  CustomResourceDefinition                                                                 dummies.argoproj.io        OutOfSync  Missing              \n2023-11-03T13:14:17+00:00  argoproj.io           ClusterDummy              argocd-e2e--test-namespaced-known-types-in-crd-diffing-buenj  cluster-dummy-crd-instance  OutOfSync  Missing              \n2023-11-03T13:14:21+00:00  argoproj.io                Dummy                argocd-e2e--test-namespaced-known-types-in-crd-diffing-buenj    dummy-crd-instance        OutOfSync  Missing              dummy.argoproj.io/dummy-crd-instance created\n2023-11-03T13:14:21+00:00  apiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-namespaced-known-types-in-crd-diffing-buenj  clusterdummies.argoproj.io   Running    Synced              customresourcedefinition.apiextensions.k8s.io/clusterdummies.argoproj.io created\n2023-11-03T13:14:21+00:00  apiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-namespaced-known-types-in-crd-diffing-buenj   dummies.argoproj.io         Running    Synced              customresourcedefinition.apiextensions.k8s.io/dummies.argoproj.io created\n2023-11-03T13:14:21+00:00  argoproj.io           ClusterDummy              argocd-e2e--test-namespaced-known-types-in-crd-diffing-buenj  cluster-dummy-crd-instance  OutOfSync  Missing              clusterdummy.argoproj.io/cluster-dummy-crd-instance created\n2023-11-03T13:14:21+00:00  argoproj.io                Dummy                kube-system                                                     dummy-crd-instance        OutOfSync  Missing              dummy.argoproj.io/dummy-crd-instance created\n\nName:               argocd-e2e-external/test-namespaced-known-types-in-crd-diffing\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-known-types-in-crd-diffing-buenj\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-known-types-in-crd-diffing\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               crd-creation\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (251c3a0)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      251c3a06f380cf1e7a68e6d13b3c75028e2bf95e\nPhase:              Succeeded\nStart:              2023-11-03 13:14:13 +0000 UTC\nFinished:           2023-11-03 13:14:21 +0000 UTC\nDuration:           8s\nMessage:            successfully synced (all tasks run)\n\nGROUP                 KIND                      NAMESPACE                                                     NAME                        STATUS   HEALTH  HOOK  MESSAGE\napiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-namespaced-known-types-in-crd-diffing-buenj  clusterdummies.argoproj.io  Running  Synced        customresourcedefinition.apiextensions.k8s.io/clusterdummies.argoproj.io created\napiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-namespaced-known-types-in-crd-diffing-buenj  dummies.argoproj.io         Running  Synced        customresourcedefinition.apiextensions.k8s.io/dummies.argoproj.io created\nargoproj.io           ClusterDummy              argocd-e2e--test-namespaced-known-types-in-crd-diffing-buenj  cluster-dummy-crd-instance  Running  Synced        clusterdummy.argoproj.io/cluster-dummy-crd-instance created\nargoproj.io           Dummy                     kube-system                                                   dummy-crd-instance          Synced                 dummy.argoproj.io/dummy-crd-instance created\nargoproj.io           Dummy                     argocd-e2e--test-namespaced-known-types-in-crd-diffing-buenj  dummy-crd-instance          Synced                 dummy.argoproj.io/dummy-crd-instance created\napiextensions.k8s.io  CustomResourceDefinition                                                                clusterdummies.argoproj.io  Synced                 \napiextensions.k8s.io  CustomResourceDefinition                                                                dummies.argoproj.io         Synced                 \nargoproj.io           ClusterDummy                                                                            cluster-dummy-crd-instance  Synced                 \n" duration=10.673943968s execID=59324
time="2023-11-03T13:14:23Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:14:23Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:14:23Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:14:23Z" level=info msg="../../dist/argocd app get argocd-e2e-external/test-namespaced-known-types-in-crd-diffing --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzY1MSwibmJmIjoxNjk5MDE3MjUxLCJpYXQiOjE2OTkwMTcyNTEsImp0aSI6IjgxMzQ1NGYwLTc5NmItNDAxMi1hYTBkLWRkOWYzYmQ3Yjg3YyJ9.MrGVxCyjDj6jeD6cMzaevgnv74hSJ_hOQLKx4kjBdmU --insecure" dir= execID=474ab
time="2023-11-03T13:14:24Z" level=debug msg="Name:               argocd-e2e-external/test-namespaced-known-types-in-crd-diffing\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-known-types-in-crd-diffing-buenj\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-namespaced-known-types-in-crd-diffing\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               crd-creation\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (251c3a0)\nHealth Status:      Healthy\n\nGROUP                 KIND                      NAMESPACE                                                     NAME                        STATUS     HEALTH  HOOK  MESSAGE\napiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-namespaced-known-types-in-crd-diffing-buenj  clusterdummies.argoproj.io  Running    Synced        customresourcedefinition.apiextensions.k8s.io/clusterdummies.argoproj.io created\napiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-namespaced-known-types-in-crd-diffing-buenj  dummies.argoproj.io         Running    Synced        customresourcedefinition.apiextensions.k8s.io/dummies.argoproj.io created\nargoproj.io           ClusterDummy              argocd-e2e--test-namespaced-known-types-in-crd-diffing-buenj  cluster-dummy-crd-instance  Running    Synced        clusterdummy.argoproj.io/cluster-dummy-crd-instance created\nargoproj.io           Dummy                     kube-system                                                   dummy-crd-instance          Synced                   dummy.argoproj.io/dummy-crd-instance created\nargoproj.io           Dummy                     argocd-e2e--test-namespaced-known-types-in-crd-diffing-buenj  dummy-crd-instance          OutOfSync                dummy.argoproj.io/dummy-crd-instance created\napiextensions.k8s.io  CustomResourceDefinition                                                                clusterdummies.argoproj.io  Synced                   \napiextensions.k8s.io  CustomResourceDefinition                                                                dummies.argoproj.io         Synced                   \nargoproj.io           ClusterDummy                                                                            cluster-dummy-crd-instance  Synced                   \n" duration=179.602174ms execID=474ab
time="2023-11-03T13:14:24Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:14:24Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:14:24Z" level=info msg="../../dist/argocd app get argocd-e2e-external/test-namespaced-known-types-in-crd-diffing --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzY1MSwibmJmIjoxNjk5MDE3MjUxLCJpYXQiOjE2OTkwMTcyNTEsImp0aSI6IjgxMzQ1NGYwLTc5NmItNDAxMi1hYTBkLWRkOWYzYmQ3Yjg3YyJ9.MrGVxCyjDj6jeD6cMzaevgnv74hSJ_hOQLKx4kjBdmU --insecure" dir= execID=84647
time="2023-11-03T13:14:29Z" level=debug msg="Name:               argocd-e2e-external/test-namespaced-known-types-in-crd-diffing\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-known-types-in-crd-diffing-buenj\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-namespaced-known-types-in-crd-diffing\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               crd-creation\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (251c3a0)\nHealth Status:      Healthy\n\nGROUP                 KIND                      NAMESPACE                                                     NAME                        STATUS   HEALTH  HOOK  MESSAGE\napiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-namespaced-known-types-in-crd-diffing-buenj  clusterdummies.argoproj.io  Running  Synced        customresourcedefinition.apiextensions.k8s.io/clusterdummies.argoproj.io created\napiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-namespaced-known-types-in-crd-diffing-buenj  dummies.argoproj.io         Running  Synced        customresourcedefinition.apiextensions.k8s.io/dummies.argoproj.io created\nargoproj.io           ClusterDummy              argocd-e2e--test-namespaced-known-types-in-crd-diffing-buenj  cluster-dummy-crd-instance  Running  Synced        clusterdummy.argoproj.io/cluster-dummy-crd-instance created\nargoproj.io           Dummy                     kube-system                                                   dummy-crd-instance          Synced                 dummy.argoproj.io/dummy-crd-instance created\nargoproj.io           Dummy                     argocd-e2e--test-namespaced-known-types-in-crd-diffing-buenj  dummy-crd-instance          Synced                 dummy.argoproj.io/dummy-crd-instance created\napiextensions.k8s.io  CustomResourceDefinition                                                                clusterdummies.argoproj.io  Synced                 \napiextensions.k8s.io  CustomResourceDefinition                                                                dummies.argoproj.io         Synced                 \nargoproj.io           ClusterDummy                                                                            cluster-dummy-crd-instance  Synced                 \n" duration=5.503622084s execID=84647
time="2023-11-03T13:14:29Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:14:29Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:14:29Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedKnownTypesInCRDDiffing (20.31s)
=== RUN   TestNamespacedConfigMap
time="2023-11-03T13:14:29Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=e6e71
time="2023-11-03T13:14:29Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-known-types-in-crd-diffing-buenj\" deleted\n" duration=208.317284ms execID=e6e71
time="2023-11-03T13:14:29Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=e0542
time="2023-11-03T13:14:30Z" level=debug msg="No resources found\n" duration=415.778831ms execID=e0542
time="2023-11-03T13:14:30Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=cc097
time="2023-11-03T13:14:30Z" level=debug msg="No resources found\n" duration=263.468433ms execID=cc097
time="2023-11-03T13:14:31Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:14:31Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzY3MSwibmJmIjoxNjk5MDE3MjcxLCJpYXQiOjE2OTkwMTcyNzEsImp0aSI6ImRhYjcxZDRiLTJjNWItNDg4NS1hOTdkLThiMTJiZTcwMmE3OSJ9.s3x2cPU1hBzyhEbAXYk92WOhljncdE3TZUNsPOUdzT0 --insecure" dir= execID=90b8e
time="2023-11-03T13:14:31Z" level=debug duration=71.35597ms execID=90b8e
time="2023-11-03T13:14:31Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=fb942
time="2023-11-03T13:14:31Z" level=debug duration=2.102645ms execID=fb942
time="2023-11-03T13:14:31Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=46a8f
time="2023-11-03T13:14:31Z" level=debug duration=1.707205ms execID=46a8f
time="2023-11-03T13:14:31Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=f5b29
time="2023-11-03T13:14:31Z" level=debug duration=1.632348ms execID=f5b29
time="2023-11-03T13:14:31Z" level=info msg="pkill -9 gpg-agent" dir= execID=c3e1a
time="2023-11-03T13:14:31Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=53291
time="2023-11-03T13:14:31Z" level=debug duration=10.049776ms execID=53291
time="2023-11-03T13:14:31Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=26203
time="2023-11-03T13:14:31Z" level=debug duration=34.157223ms execID=26203
time="2023-11-03T13:14:31Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=91b52
time="2023-11-03T13:14:31Z" level=debug duration=1.892173ms execID=91b52
time="2023-11-03T13:14:31Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=5dd36
time="2023-11-03T13:14:31Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.116892ms execID=5dd36
time="2023-11-03T13:14:31Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=6abdc
time="2023-11-03T13:14:31Z" level=debug duration=33.179741ms execID=6abdc
time="2023-11-03T13:14:31Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=dd182
time="2023-11-03T13:14:31Z" level=debug duration=22.21134ms execID=dd182
time="2023-11-03T13:14:31Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=9024f
time="2023-11-03T13:14:31Z" level=debug duration=2.820733ms execID=9024f
time="2023-11-03T13:14:31Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=efbfa
Handling connection for 9081
time="2023-11-03T13:14:31Z" level=debug duration=61.004827ms execID=efbfa
time="2023-11-03T13:14:31Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-config-map-xalbd" dir= execID=fee1d
time="2023-11-03T13:14:31Z" level=debug msg="namespace/argocd-e2e--test-namespaced-config-map-xalbd created\n" duration=158.331574ms execID=fee1d
time="2023-11-03T13:14:31Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-config-map-xalbd e2e.argoproj.io=true" dir= execID=b5da8
time="2023-11-03T13:14:32Z" level=debug msg="namespace/argocd-e2e--test-namespaced-config-map-xalbd labeled\n" duration=273.488254ms execID=b5da8
time="2023-11-03T13:14:32Z" level=info msg="clean state" duration=2.455657441s id=TestNamespacedConfigMap-xalbd name=TestNamespacedConfigMap password=password username=admin
time="2023-11-03T13:14:33Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-config-map --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path config-map --project default --dest-namespace argocd-e2e--test-namespaced-config-map-xalbd --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzY3MSwibmJmIjoxNjk5MDE3MjcxLCJpYXQiOjE2OTkwMTcyNzEsImp0aSI6ImRhYjcxZDRiLTJjNWItNDg4NS1hOTdkLThiMTJiZTcwMmE3OSJ9.s3x2cPU1hBzyhEbAXYk92WOhljncdE3TZUNsPOUdzT0 --insecure" dir= execID=81ae9
time="2023-11-03T13:14:33Z" level=debug msg="application 'test-namespaced-config-map' created\n" duration=215.992089ms execID=81ae9
time="2023-11-03T13:14:33Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:14:33Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-config-map --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzY3MSwibmJmIjoxNjk5MDE3MjcxLCJpYXQiOjE2OTkwMTcyNzEsImp0aSI6ImRhYjcxZDRiLTJjNWItNDg4NS1hOTdkLThiMTJiZTcwMmE3OSJ9.s3x2cPU1hBzyhEbAXYk92WOhljncdE3TZUNsPOUdzT0 --insecure" dir= execID=3b8f1
time="2023-11-03T13:14:41Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:14:38+00:00          ConfigMap  argocd-e2e--test-namespaced-config-map-xalbd                my-map  OutOfSync  Missing              \n2023-11-03T13:14:41+00:00          ConfigMap  argocd-e2e--test-namespaced-config-map-xalbd                my-map  OutOfSync  Missing              configmap/my-map created\n2023-11-03T13:14:41+00:00          ConfigMap  argocd-e2e--test-namespaced-config-map-xalbd                my-map    Synced  Missing              configmap/my-map created\n\nName:               argocd-e2e-external/test-namespaced-config-map\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-config-map-xalbd\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-config-map\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               config-map\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (962d05c)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      962d05c5281f36a2bcfd374dd410a5762ec74032\nPhase:              Succeeded\nStart:              2023-11-03 13:14:33 +0000 UTC\nFinished:           2023-11-03 13:14:41 +0000 UTC\nDuration:           8s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                     NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-namespaced-config-map-xalbd  my-map  Synced                configmap/my-map created\n" duration=8.064209844s execID=3b8f1
time="2023-11-03T13:14:41Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:14:41Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:14:41Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:14:41Z" level=info msg="expectation succeeded: no error and output contained 'my-map  Synced                configmap/my-map created'"
time="2023-11-03T13:14:41Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:14:41Z" level=info msg="../../dist/argocd app diff argocd-e2e-external/test-namespaced-config-map --local testdata/config-map --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzY3MSwibmJmIjoxNjk5MDE3MjcxLCJpYXQiOjE2OTkwMTcyNzEsImp0aSI6ImRhYjcxZDRiLTJjNWItNDg4NS1hOTdkLThiMTJiZTcwMmE3OSJ9.s3x2cPU1hBzyhEbAXYk92WOhljncdE3TZUNsPOUdzT0 --insecure" dir= execID=da646
time="2023-11-03T13:14:41Z" level=debug duration=253.100219ms execID=da646
time="2023-11-03T13:14:41Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedConfigMap (12.02s)
=== RUN   TestNamespacedResourceAction
time="2023-11-03T13:14:41Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=e35e2
time="2023-11-03T13:14:41Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-config-map-xalbd\" deleted\n" duration=170.108212ms execID=e35e2
time="2023-11-03T13:14:41Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=88e6e
time="2023-11-03T13:14:42Z" level=debug msg="No resources found\n" duration=376.493955ms execID=88e6e
time="2023-11-03T13:14:42Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=cf066
time="2023-11-03T13:14:42Z" level=debug msg="No resources found\n" duration=246.81855ms execID=cf066
time="2023-11-03T13:14:43Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:14:43Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzY4MywibmJmIjoxNjk5MDE3MjgzLCJpYXQiOjE2OTkwMTcyODMsImp0aSI6ImVhMmIwNDEwLWZjNGEtNDU4Ni04MDIwLTJlZWFjZDU0ZjQ0MyJ9.HlTwSgY0pvzq9HHjgq6SpHkQbfMn28ucWXmTtGiFFE8 --insecure" dir= execID=1a53e
time="2023-11-03T13:14:43Z" level=debug duration=92.333425ms execID=1a53e
time="2023-11-03T13:14:43Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=d3177
time="2023-11-03T13:14:43Z" level=debug duration=2.020736ms execID=d3177
time="2023-11-03T13:14:43Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=c2357
time="2023-11-03T13:14:43Z" level=debug duration=1.711985ms execID=c2357
time="2023-11-03T13:14:43Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=eb6bc
time="2023-11-03T13:14:43Z" level=debug duration=1.528044ms execID=eb6bc
time="2023-11-03T13:14:43Z" level=info msg="pkill -9 gpg-agent" dir= execID=3cc78
time="2023-11-03T13:14:43Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=e3efb
time="2023-11-03T13:14:43Z" level=debug duration=9.772755ms execID=e3efb
time="2023-11-03T13:14:43Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=fc4d8
time="2023-11-03T13:14:43Z" level=debug duration=36.918007ms execID=fc4d8
time="2023-11-03T13:14:43Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=48f23
time="2023-11-03T13:14:43Z" level=debug duration=1.866639ms execID=48f23
time="2023-11-03T13:14:43Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=43a19
time="2023-11-03T13:14:43Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=9.207184ms execID=43a19
time="2023-11-03T13:14:43Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=cbbbb
time="2023-11-03T13:14:43Z" level=debug duration=29.101453ms execID=cbbbb
time="2023-11-03T13:14:43Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=0cf83
time="2023-11-03T13:14:43Z" level=debug duration=23.041369ms execID=0cf83
time="2023-11-03T13:14:43Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=671c7
time="2023-11-03T13:14:43Z" level=debug duration=2.794595ms execID=671c7
time="2023-11-03T13:14:43Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=5f025
Handling connection for 9081
time="2023-11-03T13:14:43Z" level=debug duration=84.788759ms execID=5f025
time="2023-11-03T13:14:43Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-resource-action-jblgs" dir= execID=d42ff
time="2023-11-03T13:14:43Z" level=debug msg="namespace/argocd-e2e--test-namespaced-resource-action-jblgs created\n" duration=163.950056ms execID=d42ff
time="2023-11-03T13:14:43Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-resource-action-jblgs e2e.argoproj.io=true" dir= execID=0c406
time="2023-11-03T13:14:44Z" level=debug msg="namespace/argocd-e2e--test-namespaced-resource-action-jblgs labeled\n" duration=295.538879ms execID=0c406
time="2023-11-03T13:14:44Z" level=info msg="clean state" duration=2.516756338s id=TestNamespacedResourceAction-jblgs name=TestNamespacedResourceAction password=password username=admin
time="2023-11-03T13:14:45Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-resource-action --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-namespaced-resource-action-jblgs --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzY4MywibmJmIjoxNjk5MDE3MjgzLCJpYXQiOjE2OTkwMTcyODMsImp0aSI6ImVhMmIwNDEwLWZjNGEtNDU4Ni04MDIwLTJlZWFjZDU0ZjQ0MyJ9.HlTwSgY0pvzq9HHjgq6SpHkQbfMn28ucWXmTtGiFFE8 --insecure" dir= execID=3ce65
time="2023-11-03T13:14:45Z" level=debug msg="application 'test-namespaced-resource-action' created\n" duration=236.060102ms execID=3ce65
time="2023-11-03T13:14:45Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:14:45Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-resource-action --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzY4MywibmJmIjoxNjk5MDE3MjgzLCJpYXQiOjE2OTkwMTcyODMsImp0aSI6ImVhMmIwNDEwLWZjNGEtNDU4Ni04MDIwLTJlZWFjZDU0ZjQ0MyJ9.HlTwSgY0pvzq9HHjgq6SpHkQbfMn28ucWXmTtGiFFE8 --insecure" dir= execID=28d30
time="2023-11-03T13:14:49Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:14:49+00:00            Service  argocd-e2e--test-namespaced-resource-action-jblgs          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:14:49+00:00   apps  Deployment  argocd-e2e--test-namespaced-resource-action-jblgs          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:14:49+00:00            Service  argocd-e2e--test-namespaced-resource-action-jblgs          guestbook-ui    Synced  Healthy              \n\nName:               argocd-e2e-external/test-namespaced-resource-action\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-resource-action-jblgs\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-resource-action\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (64f40a4)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      64f40a40b948ca5cccdd311def9693477739b4df\nPhase:              Succeeded\nStart:              2023-11-03 13:14:45 +0000 UTC\nFinished:           2023-11-03 13:14:49 +0000 UTC\nDuration:           4s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                          NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-namespaced-resource-action-jblgs  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-namespaced-resource-action-jblgs  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=4.420102648s execID=28d30
time="2023-11-03T13:14:49Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:14:49Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedResourceAction (8.28s)
=== RUN   TestNamespacedSyncResourceByLabel
time="2023-11-03T13:14:50Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=561cd
time="2023-11-03T13:14:50Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-resource-action-jblgs\" deleted\n" duration=210.53668ms execID=561cd
time="2023-11-03T13:14:50Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=a12c8
time="2023-11-03T13:14:50Z" level=debug msg="No resources found\n" duration=453.299495ms execID=a12c8
time="2023-11-03T13:14:50Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=11569
time="2023-11-03T13:14:50Z" level=debug msg="No resources found\n" duration=222.92924ms execID=11569
time="2023-11-03T13:14:51Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:14:51Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzY5MSwibmJmIjoxNjk5MDE3MjkxLCJpYXQiOjE2OTkwMTcyOTEsImp0aSI6ImExYmQzZjQ0LTkyYjctNDNlOC05NTI2LWQ3ODA4ZWNmOWZkZSJ9.VcCm9GMxh7RxqoLbayECMJAERDjHIAuSnaVNBPvvmRQ --insecure" dir= execID=6c219
time="2023-11-03T13:14:52Z" level=debug duration=81.006628ms execID=6c219
time="2023-11-03T13:14:52Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=1401b
time="2023-11-03T13:14:52Z" level=debug duration=2.159632ms execID=1401b
time="2023-11-03T13:14:52Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=02ce4
time="2023-11-03T13:14:52Z" level=debug duration=1.5414ms execID=02ce4
time="2023-11-03T13:14:52Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=a78fd
time="2023-11-03T13:14:52Z" level=debug duration=1.672745ms execID=a78fd
time="2023-11-03T13:14:52Z" level=info msg="pkill -9 gpg-agent" dir= execID=65a62
time="2023-11-03T13:14:52Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=3b4c6
time="2023-11-03T13:14:52Z" level=debug duration=9.646062ms execID=3b4c6
time="2023-11-03T13:14:52Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=056a1
time="2023-11-03T13:14:52Z" level=debug duration=37.088697ms execID=056a1
time="2023-11-03T13:14:52Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=5d645
time="2023-11-03T13:14:52Z" level=debug duration=1.986627ms execID=5d645
time="2023-11-03T13:14:52Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=1a86d
time="2023-11-03T13:14:52Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.989836ms execID=1a86d
time="2023-11-03T13:14:52Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=d6154
time="2023-11-03T13:14:52Z" level=debug duration=27.694465ms execID=d6154
time="2023-11-03T13:14:52Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=ad03f
time="2023-11-03T13:14:52Z" level=debug duration=23.33002ms execID=ad03f
time="2023-11-03T13:14:52Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=8d2f3
time="2023-11-03T13:14:52Z" level=debug duration=2.21493ms execID=8d2f3
time="2023-11-03T13:14:52Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=2afc1
Handling connection for 9081
time="2023-11-03T13:14:52Z" level=debug duration=87.655395ms execID=2afc1
time="2023-11-03T13:14:52Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-sync-resource-by-label-qptvq" dir= execID=6c48c
time="2023-11-03T13:14:52Z" level=debug msg="namespace/argocd-e2e--test-namespaced-sync-resource-by-label-qptvq created\n" duration=141.064278ms execID=6c48c
time="2023-11-03T13:14:52Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-sync-resource-by-label-qptvq e2e.argoproj.io=true" dir= execID=088a2
time="2023-11-03T13:14:52Z" level=debug msg="namespace/argocd-e2e--test-namespaced-sync-resource-by-label-qptvq labeled\n" duration=227.061598ms execID=088a2
time="2023-11-03T13:14:52Z" level=info msg="clean state" duration=2.668448215s id=TestNamespacedSyncResourceByLabel-qptvq name=TestNamespacedSyncResourceByLabel password=password username=admin
time="2023-11-03T13:14:53Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-sync-resource-by-label --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-namespaced-sync-resource-by-label-qptvq --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzY5MSwibmJmIjoxNjk5MDE3MjkxLCJpYXQiOjE2OTkwMTcyOTEsImp0aSI6ImExYmQzZjQ0LTkyYjctNDNlOC05NTI2LWQ3ODA4ZWNmOWZkZSJ9.VcCm9GMxh7RxqoLbayECMJAERDjHIAuSnaVNBPvvmRQ --insecure" dir= execID=47c62
time="2023-11-03T13:14:53Z" level=debug msg="application 'test-namespaced-sync-resource-by-label' created\n" duration=173.967701ms execID=47c62
time="2023-11-03T13:14:53Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:14:53Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-sync-resource-by-label --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzY5MSwibmJmIjoxNjk5MDE3MjkxLCJpYXQiOjE2OTkwMTcyOTEsImp0aSI6ImExYmQzZjQ0LTkyYjctNDNlOC05NTI2LWQ3ODA4ZWNmOWZkZSJ9.VcCm9GMxh7RxqoLbayECMJAERDjHIAuSnaVNBPvvmRQ --insecure" dir= execID=2a93b
time="2023-11-03T13:15:00Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:14:59+00:00            Service  argocd-e2e--test-namespaced-sync-resource-by-label-qptvq          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:14:59+00:00   apps  Deployment  argocd-e2e--test-namespaced-sync-resource-by-label-qptvq          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:14:59+00:00            Service  argocd-e2e--test-namespaced-sync-resource-by-label-qptvq          guestbook-ui    Synced  Healthy              \n\nName:               argocd-e2e-external/test-namespaced-sync-resource-by-label\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-sync-resource-by-label-qptvq\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-sync-resource-by-label\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (3bf4da8)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      3bf4da893eeeb56992792448db56d98a6c884e16\nPhase:              Succeeded\nStart:              2023-11-03 13:14:53 +0000 UTC\nFinished:           2023-11-03 13:14:59 +0000 UTC\nDuration:           6s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                                 NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-namespaced-sync-resource-by-label-qptvq  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-namespaced-sync-resource-by-label-qptvq  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=6.272171205s execID=2a93b
time="2023-11-03T13:15:00Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:15:00Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-sync-resource-by-label --label app.kubernetes.io/instance=test-namespaced-sync-resource-by-label --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzY5MSwibmJmIjoxNjk5MDE3MjkxLCJpYXQiOjE2OTkwMTcyOTEsImp0aSI6ImExYmQzZjQ0LTkyYjctNDNlOC05NTI2LWQ3ODA4ZWNmOWZkZSJ9.VcCm9GMxh7RxqoLbayECMJAERDjHIAuSnaVNBPvvmRQ --insecure" dir= execID=c39f9
time="2023-11-03T13:15:00Z" level=debug duration=113.747248ms execID=c39f9
time="2023-11-03T13:15:00Z" level=error msg="`../../dist/argocd app sync argocd-e2e-external/test-namespaced-sync-resource-by-label --label app.kubernetes.io/instance=test-namespaced-sync-resource-by-label --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzY5MSwibmJmIjoxNjk5MDE3MjkxLCJpYXQiOjE2OTkwMTcyOTEsImp0aSI6ImExYmQzZjQ0LTkyYjctNDNlOC05NTI2LWQ3ODA4ZWNmOWZkZSJ9.VcCm9GMxh7RxqoLbayECMJAERDjHIAuSnaVNBPvvmRQ --insecure` failed exit status 1: time=\"2023-11-03T13:15:00Z\" level=fatal msg=\"No matching resources found for labels: [app.kubernetes.io/instance=test-namespaced-sync-resource-by-label]\"" execID=c39f9
time="2023-11-03T13:15:00Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:15:00Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-sync-resource-by-label --label this-label=does-not-exist --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzY5MSwibmJmIjoxNjk5MDE3MjkxLCJpYXQiOjE2OTkwMTcyOTEsImp0aSI6ImExYmQzZjQ0LTkyYjctNDNlOC05NTI2LWQ3ODA4ZWNmOWZkZSJ9.VcCm9GMxh7RxqoLbayECMJAERDjHIAuSnaVNBPvvmRQ --insecure" dir= execID=d8213
time="2023-11-03T13:15:00Z" level=debug duration=146.89569ms execID=d8213
time="2023-11-03T13:15:00Z" level=error msg="`../../dist/argocd app sync argocd-e2e-external/test-namespaced-sync-resource-by-label --label this-label=does-not-exist --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzY5MSwibmJmIjoxNjk5MDE3MjkxLCJpYXQiOjE2OTkwMTcyOTEsImp0aSI6ImExYmQzZjQ0LTkyYjctNDNlOC05NTI2LWQ3ODA4ZWNmOWZkZSJ9.VcCm9GMxh7RxqoLbayECMJAERDjHIAuSnaVNBPvvmRQ --insecure` failed exit status 1: time=\"2023-11-03T13:15:00Z\" level=fatal msg=\"No matching resources found for labels: [this-label=does-not-exist]\"" execID=d8213
time="2023-11-03T13:15:00Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedSyncResourceByLabel (10.40s)
=== RUN   TestNamespacedLocalManifestSync
time="2023-11-03T13:15:00Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=db514
time="2023-11-03T13:15:00Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-sync-resource-by-label-qptvq\" deleted\n" duration=283.614241ms execID=db514
time="2023-11-03T13:15:00Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=87ed5
time="2023-11-03T13:15:01Z" level=debug msg="No resources found\n" duration=367.743732ms execID=87ed5
time="2023-11-03T13:15:01Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=56797
time="2023-11-03T13:15:01Z" level=debug msg="No resources found\n" duration=253.453188ms execID=56797
time="2023-11-03T13:15:02Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:15:02Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzcwMiwibmJmIjoxNjk5MDE3MzAyLCJpYXQiOjE2OTkwMTczMDIsImp0aSI6IjE1M2VmOTg5LWI4YTItNDRiYS1iYTAxLTFhNTQ1MzAxOTZkNyJ9.B41jdt_c64HFVi0KL7-g52b3ndQXGDvcb6Rszsgmask --insecure" dir= execID=44db8
time="2023-11-03T13:15:02Z" level=debug duration=74.897815ms execID=44db8
time="2023-11-03T13:15:02Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=2607d
time="2023-11-03T13:15:02Z" level=debug duration=2.162667ms execID=2607d
time="2023-11-03T13:15:02Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=3959b
time="2023-11-03T13:15:02Z" level=debug duration=1.74012ms execID=3959b
time="2023-11-03T13:15:02Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=6ffcb
time="2023-11-03T13:15:02Z" level=debug duration=1.653429ms execID=6ffcb
time="2023-11-03T13:15:02Z" level=info msg="pkill -9 gpg-agent" dir= execID=4d73c
time="2023-11-03T13:15:02Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=d5c4f
time="2023-11-03T13:15:02Z" level=debug duration=10.031675ms execID=d5c4f
time="2023-11-03T13:15:02Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=cb41c
time="2023-11-03T13:15:02Z" level=debug duration=39.316789ms execID=cb41c
time="2023-11-03T13:15:02Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=fd57a
time="2023-11-03T13:15:02Z" level=debug duration=1.751435ms execID=fd57a
time="2023-11-03T13:15:02Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=ee4df
time="2023-11-03T13:15:02Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.927455ms execID=ee4df
time="2023-11-03T13:15:02Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=3d7d3
time="2023-11-03T13:15:02Z" level=debug duration=31.09747ms execID=3d7d3
time="2023-11-03T13:15:02Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=825db
time="2023-11-03T13:15:02Z" level=debug duration=21.637358ms execID=825db
time="2023-11-03T13:15:02Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=18b29
time="2023-11-03T13:15:02Z" level=debug duration=2.862023ms execID=18b29
time="2023-11-03T13:15:02Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=898ef
Handling connection for 9081
time="2023-11-03T13:15:02Z" level=debug duration=63.628468ms execID=898ef
time="2023-11-03T13:15:02Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-local-manifest-sync-yxhpk" dir= execID=9ad6e
time="2023-11-03T13:15:02Z" level=debug msg="namespace/argocd-e2e--test-namespaced-local-manifest-sync-yxhpk created\n" duration=162.405528ms execID=9ad6e
time="2023-11-03T13:15:02Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-local-manifest-sync-yxhpk e2e.argoproj.io=true" dir= execID=3cf9e
time="2023-11-03T13:15:03Z" level=debug msg="namespace/argocd-e2e--test-namespaced-local-manifest-sync-yxhpk labeled\n" duration=280.847557ms execID=3cf9e
time="2023-11-03T13:15:03Z" level=info msg="clean state" duration=2.676687798s id=TestNamespacedLocalManifestSync-yxhpk name=TestNamespacedLocalManifestSync password=password username=admin
time="2023-11-03T13:15:04Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-local-manifest-sync --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-namespaced-local-manifest-sync-yxhpk --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzcwMiwibmJmIjoxNjk5MDE3MzAyLCJpYXQiOjE2OTkwMTczMDIsImp0aSI6IjE1M2VmOTg5LWI4YTItNDRiYS1iYTAxLTFhNTQ1MzAxOTZkNyJ9.B41jdt_c64HFVi0KL7-g52b3ndQXGDvcb6Rszsgmask --insecure" dir= execID=1cc16
time="2023-11-03T13:15:04Z" level=debug msg="application 'test-namespaced-local-manifest-sync' created\n" duration=208.200492ms execID=1cc16
time="2023-11-03T13:15:04Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:15:04Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-local-manifest-sync --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzcwMiwibmJmIjoxNjk5MDE3MzAyLCJpYXQiOjE2OTkwMTczMDIsImp0aSI6IjE1M2VmOTg5LWI4YTItNDRiYS1iYTAxLTFhNTQ1MzAxOTZkNyJ9.B41jdt_c64HFVi0KL7-g52b3ndQXGDvcb6Rszsgmask --insecure" dir= execID=41dc8
time="2023-11-03T13:15:10Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:15:09+00:00            Service  argocd-e2e--test-namespaced-local-manifest-sync-yxhpk          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:15:09+00:00   apps  Deployment  argocd-e2e--test-namespaced-local-manifest-sync-yxhpk          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:15:10+00:00   apps  Deployment  argocd-e2e--test-namespaced-local-manifest-sync-yxhpk          guestbook-ui  OutOfSync  Missing              deployment.apps/guestbook-ui created\n2023-11-03T13:15:10+00:00            Service  argocd-e2e--test-namespaced-local-manifest-sync-yxhpk          guestbook-ui  OutOfSync  Missing              service/guestbook-ui created\n2023-11-03T13:15:10+00:00            Service  argocd-e2e--test-namespaced-local-manifest-sync-yxhpk          guestbook-ui    Synced  Healthy              service/guestbook-ui created\n2023-11-03T13:15:10+00:00   apps  Deployment  argocd-e2e--test-namespaced-local-manifest-sync-yxhpk          guestbook-ui    Synced  Healthy              deployment.apps/guestbook-ui created\n\nName:               argocd-e2e-external/test-namespaced-local-manifest-sync\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-local-manifest-sync-yxhpk\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-local-manifest-sync\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (3e55a2e)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      3e55a2e79f41650f1f62c461d0955c5e8d520a4e\nPhase:              Succeeded\nStart:              2023-11-03 13:15:04 +0000 UTC\nFinished:           2023-11-03 13:15:10 +0000 UTC\nDuration:           6s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                              NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-namespaced-local-manifest-sync-yxhpk  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-namespaced-local-manifest-sync-yxhpk  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=6.10738065s execID=41dc8
time="2023-11-03T13:15:10Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:15:10Z" level=info msg="../../dist/argocd app manifests argocd-e2e-external/test-namespaced-local-manifest-sync --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzcwMiwibmJmIjoxNjk5MDE3MzAyLCJpYXQiOjE2OTkwMTczMDIsImp0aSI6IjE1M2VmOTg5LWI4YTItNDRiYS1iYTAxLTFhNTQ1MzAxOTZkNyJ9.B41jdt_c64HFVi0KL7-g52b3ndQXGDvcb6Rszsgmask --insecure" dir= execID=d62dd
time="2023-11-03T13:15:10Z" level=debug msg="---\napiVersion: v1\nkind: Service\nmetadata:\n  annotations:\n    argocd.argoproj.io/tracking-id: argocd-e2e-external_test-namespaced-local-manifest-sync:/Service:argocd-e2e--test-namespaced-local-manifest-sync-yxhpk/guestbook-ui\n  name: guestbook-ui\n  namespace: argocd-e2e--test-namespaced-local-manifest-sync-yxhpk\nspec:\n  ports:\n  - port: 80\n    targetPort: 80\n  selector:\n    app: guestbook-ui\n\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  annotations:\n    argocd.argoproj.io/tracking-id: argocd-e2e-external_test-namespaced-local-manifest-sync:apps/Deployment:argocd-e2e--test-namespaced-local-manifest-sync-yxhpk/guestbook-ui\n  labels:\n    test: \"true\"\n  name: guestbook-ui\n  namespace: argocd-e2e--test-namespaced-local-manifest-sync-yxhpk\nspec:\n  replicas: 0\n  revisionHistoryLimit: 3\n  selector:\n    matchLabels:\n      app: guestbook-ui\n  template:\n    metadata:\n      labels:\n        app: guestbook-ui\n    spec:\n      containers:\n      - image: quay.io/argoprojlabs/argocd-e2e-container:0.2\n        imagePullPolicy: IfNotPresent\n        name: guestbook-ui\n        ports:\n        - containerPort: 80\n\n" duration=68.955009ms execID=d62dd
time="2023-11-03T13:15:11Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-local-manifest-sync --timeout 30 --prune --local ./testdata/guestbook_local --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzcwMiwibmJmIjoxNjk5MDE3MzAyLCJpYXQiOjE2OTkwMTczMDIsImp0aSI6IjE1M2VmOTg5LWI4YTItNDRiYS1iYTAxLTFhNTQ1MzAxOTZkNyJ9.B41jdt_c64HFVi0KL7-g52b3ndQXGDvcb6Rszsgmask --insecure" dir= execID=59c2e
time="2023-11-03T13:15:12Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                             NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:15:11+00:00   apps  Deployment  argocd-e2e--test-namespaced-local-manifest-sync-yxhpk          guestbook-ui    Synced  Healthy              \n2023-11-03T13:15:11+00:00            Service  argocd-e2e--test-namespaced-local-manifest-sync-yxhpk          guestbook-ui    Synced  Healthy              \n2023-11-03T13:15:12+00:00            Service  argocd-e2e--test-namespaced-local-manifest-sync-yxhpk          guestbook-ui    Synced  Healthy              service/guestbook-ui configured\n2023-11-03T13:15:12+00:00   apps  Deployment  argocd-e2e--test-namespaced-local-manifest-sync-yxhpk          guestbook-ui    Synced  Healthy              deployment.apps/guestbook-ui configured\n2023-11-03T13:15:12+00:00   apps  Deployment  argocd-e2e--test-namespaced-local-manifest-sync-yxhpk          guestbook-ui  OutOfSync  Healthy              deployment.apps/guestbook-ui configured\n\nName:               argocd-e2e-external/test-namespaced-local-manifest-sync\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-local-manifest-sync-yxhpk\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-local-manifest-sync\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to \nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      \nPhase:              Succeeded\nStart:              2023-11-03 13:15:11 +0000 UTC\nFinished:           2023-11-03 13:15:12 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                              NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-namespaced-local-manifest-sync-yxhpk  guestbook-ui  Synced  Healthy        service/guestbook-ui configured\napps   Deployment  argocd-e2e--test-namespaced-local-manifest-sync-yxhpk  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui configured\n" duration=767.92103ms execID=59c2e
time="2023-11-03T13:15:12Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:15:12Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:15:12Z" level=info msg="../../dist/argocd app manifests argocd-e2e-external/test-namespaced-local-manifest-sync --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzcwMiwibmJmIjoxNjk5MDE3MzAyLCJpYXQiOjE2OTkwMTczMDIsImp0aSI6IjE1M2VmOTg5LWI4YTItNDRiYS1iYTAxLTFhNTQ1MzAxOTZkNyJ9.B41jdt_c64HFVi0KL7-g52b3ndQXGDvcb6Rszsgmask --insecure" dir= execID=1c2ae
time="2023-11-03T13:15:12Z" level=debug msg="---\napiVersion: v1\nkind: Service\nmetadata:\n  annotations:\n    argocd.argoproj.io/tracking-id: test-namespaced-local-manifest-sync:/Service:argocd-e2e--test-namespaced-local-manifest-sync-yxhpk/guestbook-ui\n  name: guestbook-ui\n  namespace: argocd-e2e--test-namespaced-local-manifest-sync-yxhpk\nspec:\n  ports:\n  - port: 81\n    targetPort: 81\n  selector:\n    app: guestbook-ui\n\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  annotations:\n    argocd.argoproj.io/tracking-id: test-namespaced-local-manifest-sync:apps/Deployment:argocd-e2e--test-namespaced-local-manifest-sync-yxhpk/guestbook-ui\n  name: guestbook-ui\n  namespace: argocd-e2e--test-namespaced-local-manifest-sync-yxhpk\nspec:\n  replicas: 0\n  revisionHistoryLimit: 3\n  selector:\n    matchLabels:\n      app: guestbook-ui\n  template:\n    metadata:\n      labels:\n        app: guestbook-ui\n    spec:\n      containers:\n      - image: quay.io/argoprojlabs/argocd-e2e-container:0.3\n        name: guestbook-ui\n        ports:\n        - containerPort: 81\n\n" duration=184.076102ms execID=1c2ae
time="2023-11-03T13:15:13Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-local-manifest-sync --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzcwMiwibmJmIjoxNjk5MDE3MzAyLCJpYXQiOjE2OTkwMTczMDIsImp0aSI6IjE1M2VmOTg5LWI4YTItNDRiYS1iYTAxLTFhNTQ1MzAxOTZkNyJ9.B41jdt_c64HFVi0KL7-g52b3ndQXGDvcb6Rszsgmask --insecure" dir= execID=d3e21
time="2023-11-03T13:15:14Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                             NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:15:13+00:00            Service  argocd-e2e--test-namespaced-local-manifest-sync-yxhpk          guestbook-ui    Synced  Healthy              \n2023-11-03T13:15:13+00:00   apps  Deployment  argocd-e2e--test-namespaced-local-manifest-sync-yxhpk          guestbook-ui    Synced  Healthy              \n2023-11-03T13:15:14+00:00            Service  argocd-e2e--test-namespaced-local-manifest-sync-yxhpk          guestbook-ui    Synced  Healthy              service/guestbook-ui configured\n2023-11-03T13:15:14+00:00   apps  Deployment  argocd-e2e--test-namespaced-local-manifest-sync-yxhpk          guestbook-ui    Synced  Healthy              deployment.apps/guestbook-ui configured\n2023-11-03T13:15:14+00:00   apps  Deployment  argocd-e2e--test-namespaced-local-manifest-sync-yxhpk          guestbook-ui    Synced  Progressing              deployment.apps/guestbook-ui configured\n\nName:               argocd-e2e-external/test-namespaced-local-manifest-sync\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-local-manifest-sync-yxhpk\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-local-manifest-sync\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (3e55a2e)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      3e55a2e79f41650f1f62c461d0955c5e8d520a4e\nPhase:              Succeeded\nStart:              2023-11-03 13:15:13 +0000 UTC\nFinished:           2023-11-03 13:15:14 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                              NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-namespaced-local-manifest-sync-yxhpk  guestbook-ui  Synced  Healthy        service/guestbook-ui configured\napps   Deployment  argocd-e2e--test-namespaced-local-manifest-sync-yxhpk  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui configured\n" duration=806.89724ms execID=d3e21
time="2023-11-03T13:15:14Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:15:14Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:15:14Z" level=info msg="../../dist/argocd app manifests argocd-e2e-external/test-namespaced-local-manifest-sync --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzcwMiwibmJmIjoxNjk5MDE3MzAyLCJpYXQiOjE2OTkwMTczMDIsImp0aSI6IjE1M2VmOTg5LWI4YTItNDRiYS1iYTAxLTFhNTQ1MzAxOTZkNyJ9.B41jdt_c64HFVi0KL7-g52b3ndQXGDvcb6Rszsgmask --insecure" dir= execID=1a91b
time="2023-11-03T13:15:14Z" level=debug msg="---\napiVersion: v1\nkind: Service\nmetadata:\n  annotations:\n    argocd.argoproj.io/tracking-id: argocd-e2e-external_test-namespaced-local-manifest-sync:/Service:argocd-e2e--test-namespaced-local-manifest-sync-yxhpk/guestbook-ui\n  name: guestbook-ui\n  namespace: argocd-e2e--test-namespaced-local-manifest-sync-yxhpk\nspec:\n  ports:\n  - port: 80\n    targetPort: 80\n  selector:\n    app: guestbook-ui\n\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  annotations:\n    argocd.argoproj.io/tracking-id: argocd-e2e-external_test-namespaced-local-manifest-sync:apps/Deployment:argocd-e2e--test-namespaced-local-manifest-sync-yxhpk/guestbook-ui\n  labels:\n    test: \"true\"\n  name: guestbook-ui\n  namespace: argocd-e2e--test-namespaced-local-manifest-sync-yxhpk\nspec:\n  replicas: 0\n  revisionHistoryLimit: 3\n  selector:\n    matchLabels:\n      app: guestbook-ui\n  template:\n    metadata:\n      labels:\n        app: guestbook-ui\n    spec:\n      containers:\n      - image: quay.io/argoprojlabs/argocd-e2e-container:0.2\n        imagePullPolicy: IfNotPresent\n        name: guestbook-ui\n        ports:\n        - containerPort: 80\n\n" duration=107.983627ms execID=1a91b
time="2023-11-03T13:15:14Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedLocalManifestSync (13.97s)
=== RUN   TestNamespacedLocalSync
time="2023-11-03T13:15:14Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=4ced2
time="2023-11-03T13:15:14Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-local-manifest-sync-yxhpk\" deleted\n" duration=252.464356ms execID=4ced2
time="2023-11-03T13:15:14Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=6cc35
time="2023-11-03T13:15:15Z" level=debug msg="No resources found\n" duration=458.453097ms execID=6cc35
time="2023-11-03T13:15:15Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=16edc
time="2023-11-03T13:15:15Z" level=debug msg="No resources found\n" duration=314.815035ms execID=16edc
time="2023-11-03T13:15:16Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:15:16Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzcxNiwibmJmIjoxNjk5MDE3MzE2LCJpYXQiOjE2OTkwMTczMTYsImp0aSI6ImQ1MzU3OWZiLTc4NTItNDQxMS04YjVkLWJiZGIyOGYxMWJhMCJ9.dX9L4TRF4y2Bmlb89apxzAFNq6RbXntHX7elbFOmJio --insecure" dir= execID=af2d9
time="2023-11-03T13:15:16Z" level=debug duration=95.588001ms execID=af2d9
time="2023-11-03T13:15:16Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=6333c
time="2023-11-03T13:15:16Z" level=debug duration=1.942648ms execID=6333c
time="2023-11-03T13:15:16Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=6d0ea
time="2023-11-03T13:15:16Z" level=debug duration=1.684026ms execID=6d0ea
time="2023-11-03T13:15:16Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=99424
time="2023-11-03T13:15:16Z" level=debug duration=1.489373ms execID=99424
time="2023-11-03T13:15:16Z" level=info msg="pkill -9 gpg-agent" dir= execID=73cf4
time="2023-11-03T13:15:16Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=7b324
time="2023-11-03T13:15:16Z" level=debug duration=29.948923ms execID=7b324
time="2023-11-03T13:15:16Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=ff4ee
time="2023-11-03T13:15:16Z" level=debug duration=37.978615ms execID=ff4ee
time="2023-11-03T13:15:16Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=16f4f
time="2023-11-03T13:15:16Z" level=debug duration=2.162609ms execID=16f4f
time="2023-11-03T13:15:16Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=cd1b7
time="2023-11-03T13:15:16Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.190812ms execID=cd1b7
time="2023-11-03T13:15:16Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=ea5f7
time="2023-11-03T13:15:16Z" level=debug duration=27.796093ms execID=ea5f7
time="2023-11-03T13:15:16Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=54172
time="2023-11-03T13:15:16Z" level=debug duration=27.718781ms execID=54172
time="2023-11-03T13:15:16Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=bb5c0
time="2023-11-03T13:15:16Z" level=debug duration=2.750236ms execID=bb5c0
time="2023-11-03T13:15:16Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=9e242
Handling connection for 9081
time="2023-11-03T13:15:16Z" level=debug duration=64.359781ms execID=9e242
time="2023-11-03T13:15:16Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-local-sync-migsi" dir= execID=9fe1f
time="2023-11-03T13:15:16Z" level=debug msg="namespace/argocd-e2e--test-namespaced-local-sync-migsi created\n" duration=159.158216ms execID=9fe1f
time="2023-11-03T13:15:16Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-local-sync-migsi e2e.argoproj.io=true" dir= execID=63be9
time="2023-11-03T13:15:17Z" level=debug msg="namespace/argocd-e2e--test-namespaced-local-sync-migsi labeled\n" duration=269.302763ms execID=63be9
time="2023-11-03T13:15:17Z" level=info msg="clean state" duration=2.773971668s id=TestNamespacedLocalSync-migsi name=TestNamespacedLocalSync password=password username=admin
time="2023-11-03T13:15:18Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-local-sync --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path helm --project default --dest-namespace argocd-e2e--test-namespaced-local-sync-migsi --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzcxNiwibmJmIjoxNjk5MDE3MzE2LCJpYXQiOjE2OTkwMTczMTYsImp0aSI6ImQ1MzU3OWZiLTc4NTItNDQxMS04YjVkLWJiZGIyOGYxMWJhMCJ9.dX9L4TRF4y2Bmlb89apxzAFNq6RbXntHX7elbFOmJio --insecure" dir= execID=ca5a3
time="2023-11-03T13:15:18Z" level=debug msg="application 'test-namespaced-local-sync' created\n" duration=279.953125ms execID=ca5a3
time="2023-11-03T13:15:18Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:15:18Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-local-sync --local testdata/helm --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzcxNiwibmJmIjoxNjk5MDE3MzE2LCJpYXQiOjE2OTkwMTczMTYsImp0aSI6ImQ1MzU3OWZiLTc4NTItNDQxMS04YjVkLWJiZGIyOGYxMWJhMCJ9.dX9L4TRF4y2Bmlb89apxzAFNq6RbXntHX7elbFOmJio --insecure" dir= execID=e4f9f
time="2023-11-03T13:15:24Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:15:23+00:00          ConfigMap  argocd-e2e--test-namespaced-local-sync-migsi                my-map  OutOfSync  Missing              \n2023-11-03T13:15:24+00:00          ConfigMap  argocd-e2e--test-namespaced-local-sync-migsi                my-map  OutOfSync  Missing              configmap/my-map created\n\nName:               argocd-e2e-external/test-namespaced-local-sync\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-local-sync-migsi\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-local-sync\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               helm\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to \nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      \nPhase:              Succeeded\nStart:              2023-11-03 13:15:18 +0000 UTC\nFinished:           2023-11-03 13:15:24 +0000 UTC\nDuration:           6s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                     NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-namespaced-local-sync-migsi  my-map  Synced                configmap/my-map created\n" duration=5.836445115s execID=e4f9f
time="2023-11-03T13:15:24Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedLocalSync (9.91s)
=== RUN   TestNamespacedNoLocalSyncWithAutosyncEnabled
time="2023-11-03T13:15:24Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=a06fa
time="2023-11-03T13:15:24Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-local-sync-migsi\" deleted\n" duration=241.842263ms execID=a06fa
time="2023-11-03T13:15:24Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=bf10c
time="2023-11-03T13:15:24Z" level=debug msg="No resources found\n" duration=434.976011ms execID=bf10c
time="2023-11-03T13:15:24Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=87394
time="2023-11-03T13:15:25Z" level=debug msg="No resources found\n" duration=267.597193ms execID=87394
time="2023-11-03T13:15:25Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:15:25Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzcyNSwibmJmIjoxNjk5MDE3MzI1LCJpYXQiOjE2OTkwMTczMjUsImp0aSI6ImMwMTk2MzVhLWQwYTItNGE4YS05NmU2LTJhNmQxZjBhYTY4ZiJ9.p1NLLmLB-qgLN463JDdb0wANW_EGU2dKXY3igb7HCRc --insecure" dir= execID=1260f
time="2023-11-03T13:15:26Z" level=debug duration=95.674551ms execID=1260f
time="2023-11-03T13:15:26Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=b5506
time="2023-11-03T13:15:26Z" level=debug duration=1.99094ms execID=b5506
time="2023-11-03T13:15:26Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=2d641
time="2023-11-03T13:15:26Z" level=debug duration=1.546307ms execID=2d641
time="2023-11-03T13:15:26Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=c3d0c
time="2023-11-03T13:15:26Z" level=debug duration=1.640169ms execID=c3d0c
time="2023-11-03T13:15:26Z" level=info msg="pkill -9 gpg-agent" dir= execID=cf2b2
time="2023-11-03T13:15:26Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=1ebbb
time="2023-11-03T13:15:26Z" level=debug duration=9.748121ms execID=1ebbb
time="2023-11-03T13:15:26Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=c0a21
time="2023-11-03T13:15:26Z" level=debug duration=34.079753ms execID=c0a21
time="2023-11-03T13:15:26Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=99ec3
time="2023-11-03T13:15:26Z" level=debug duration=1.847053ms execID=99ec3
time="2023-11-03T13:15:26Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=9713e
time="2023-11-03T13:15:26Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.046144ms execID=9713e
time="2023-11-03T13:15:26Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=7ec79
time="2023-11-03T13:15:26Z" level=debug duration=27.748296ms execID=7ec79
time="2023-11-03T13:15:26Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=6f12a
time="2023-11-03T13:15:26Z" level=debug duration=22.181361ms execID=6f12a
time="2023-11-03T13:15:26Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=c0a4a
time="2023-11-03T13:15:26Z" level=debug duration=2.56954ms execID=c0a4a
time="2023-11-03T13:15:26Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=13663
Handling connection for 9081
time="2023-11-03T13:15:26Z" level=debug duration=75.417034ms execID=13663
time="2023-11-03T13:15:26Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-no-local-sync-with-autosync-e-itjkz" dir= execID=1c239
time="2023-11-03T13:15:26Z" level=debug msg="namespace/argocd-e2e--test-namespaced-no-local-sync-with-autosync-e-itjkz created\n" duration=159.809952ms execID=1c239
time="2023-11-03T13:15:26Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-no-local-sync-with-autosync-e-itjkz e2e.argoproj.io=true" dir= execID=4248a
time="2023-11-03T13:15:26Z" level=debug msg="namespace/argocd-e2e--test-namespaced-no-local-sync-with-autosync-e-itjkz labeled\n" duration=327.132854ms execID=4248a
time="2023-11-03T13:15:26Z" level=info msg="clean state" duration=2.491712229s id=TestNamespacedNoLocalSyncWithAutosyncEnabled-itjkz name=TestNamespacedNoLocalSyncWithAutosyncEnabled password=password username=admin
time="2023-11-03T13:15:27Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-no-local-sync-with-autosync-enabled --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-namespaced-no-local-sync-with-autosync-e-itjkz --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzcyNSwibmJmIjoxNjk5MDE3MzI1LCJpYXQiOjE2OTkwMTczMjUsImp0aSI6ImMwMTk2MzVhLWQwYTItNGE4YS05NmU2LTJhNmQxZjBhYTY4ZiJ9.p1NLLmLB-qgLN463JDdb0wANW_EGU2dKXY3igb7HCRc --insecure" dir= execID=880aa
time="2023-11-03T13:15:28Z" level=debug msg="application 'test-namespaced-no-local-sync-with-autosync-enabled' created\n" duration=240.380479ms execID=880aa
time="2023-11-03T13:15:28Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:15:28Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-no-local-sync-with-autosync-enabled --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzcyNSwibmJmIjoxNjk5MDE3MzI1LCJpYXQiOjE2OTkwMTczMjUsImp0aSI6ImMwMTk2MzVhLWQwYTItNGE4YS05NmU2LTJhNmQxZjBhYTY4ZiJ9.p1NLLmLB-qgLN463JDdb0wANW_EGU2dKXY3igb7HCRc --insecure" dir= execID=d5c25
time="2023-11-03T13:15:32Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:15:31+00:00            Service  argocd-e2e--test-namespaced-no-local-sync-with-autosync-e-itjkz          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:15:31+00:00   apps  Deployment  argocd-e2e--test-namespaced-no-local-sync-with-autosync-e-itjkz          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:15:32+00:00            Service  argocd-e2e--test-namespaced-no-local-sync-with-autosync-e-itjkz          guestbook-ui    Synced  Healthy              \n2023-11-03T13:15:32+00:00            Service  argocd-e2e--test-namespaced-no-local-sync-with-autosync-e-itjkz          guestbook-ui    Synced   Healthy              service/guestbook-ui created\n2023-11-03T13:15:32+00:00   apps  Deployment  argocd-e2e--test-namespaced-no-local-sync-with-autosync-e-itjkz          guestbook-ui  OutOfSync  Missing              deployment.apps/guestbook-ui created\n2023-11-03T13:15:32+00:00   apps  Deployment  argocd-e2e--test-namespaced-no-local-sync-with-autosync-e-itjkz          guestbook-ui    Synced  Progressing              deployment.apps/guestbook-ui created\n\nName:               argocd-e2e-external/test-namespaced-no-local-sync-with-autosync-enabled\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-no-local-sync-with-autosync-e-itjkz\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-no-local-sync-with-autosync-enabled\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (19888e7)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      19888e78c99bb57ba8e9d496ec4544a888d26fba\nPhase:              Succeeded\nStart:              2023-11-03 13:15:28 +0000 UTC\nFinished:           2023-11-03 13:15:32 +0000 UTC\nDuration:           4s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                                        NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-namespaced-no-local-sync-with-autosync-e-itjkz  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-namespaced-no-local-sync-with-autosync-e-itjkz  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=4.355176184s execID=d5c25
time="2023-11-03T13:15:32Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:15:32Z" level=info msg="../../dist/argocd app set argocd-e2e-external/test-namespaced-no-local-sync-with-autosync-enabled --sync-policy automated --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzcyNSwibmJmIjoxNjk5MDE3MzI1LCJpYXQiOjE2OTkwMTczMjUsImp0aSI6ImMwMTk2MzVhLWQwYTItNGE4YS05NmU2LTJhNmQxZjBhYTY4ZiJ9.p1NLLmLB-qgLN463JDdb0wANW_EGU2dKXY3igb7HCRc --insecure" dir= execID=8c628
time="2023-11-03T13:15:32Z" level=debug duration=271.307414ms execID=8c628
time="2023-11-03T13:15:32Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-no-local-sync-with-autosync-enabled --local ./testdata/guestbook_local --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzcyNSwibmJmIjoxNjk5MDE3MzI1LCJpYXQiOjE2OTkwMTczMjUsImp0aSI6ImMwMTk2MzVhLWQwYTItNGE4YS05NmU2LTJhNmQxZjBhYTY4ZiJ9.p1NLLmLB-qgLN463JDdb0wANW_EGU2dKXY3igb7HCRc --insecure" dir= execID=359ba
time="2023-11-03T13:15:32Z" level=debug duration=124.100683ms execID=359ba
time="2023-11-03T13:15:32Z" level=error msg="`../../dist/argocd app sync argocd-e2e-external/test-namespaced-no-local-sync-with-autosync-enabled --local ./testdata/guestbook_local --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzcyNSwibmJmIjoxNjk5MDE3MzI1LCJpYXQiOjE2OTkwMTczMjUsImp0aSI6ImMwMTk2MzVhLWQwYTItNGE4YS05NmU2LTJhNmQxZjBhYTY4ZiJ9.p1NLLmLB-qgLN463JDdb0wANW_EGU2dKXY3igb7HCRc --insecure` failed exit status 1: time=\"2023-11-03T13:15:32Z\" level=fatal msg=\"Cannot use local sync when Automatic Sync Policy is enabled except with --dry-run\"" execID=359ba
time="2023-11-03T13:15:32Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedNoLocalSyncWithAutosyncEnabled (8.50s)
=== RUN   TestNamespacedLocalSyncDryRunWithASEnabled
time="2023-11-03T13:15:32Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=212d0
time="2023-11-03T13:15:33Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-no-local-sync-with-autosync-e-itjkz\" deleted\n" duration=230.851729ms execID=212d0
time="2023-11-03T13:15:33Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=12d98
time="2023-11-03T13:15:33Z" level=debug msg="No resources found\n" duration=477.876002ms execID=12d98
time="2023-11-03T13:15:33Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=50824
time="2023-11-03T13:15:33Z" level=debug msg="No resources found\n" duration=307.387375ms execID=50824
time="2023-11-03T13:15:34Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:15:34Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzczNCwibmJmIjoxNjk5MDE3MzM0LCJpYXQiOjE2OTkwMTczMzQsImp0aSI6IjA3Zjc1YjcxLWM4M2UtNDBhNC1hNDRiLTM4ZmMzZDAyOGMwZSJ9.gFKZltNvOKPCzh2IkzIpQooIK71_m_tLuKQP9PAWtsM --insecure" dir= execID=21682
time="2023-11-03T13:15:34Z" level=debug duration=75.719623ms execID=21682
time="2023-11-03T13:15:34Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=405e5
time="2023-11-03T13:15:34Z" level=debug duration=1.955816ms execID=405e5
time="2023-11-03T13:15:34Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=c8376
time="2023-11-03T13:15:34Z" level=debug duration=1.660653ms execID=c8376
time="2023-11-03T13:15:34Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=ec178
time="2023-11-03T13:15:34Z" level=debug duration=1.561373ms execID=ec178
time="2023-11-03T13:15:34Z" level=info msg="pkill -9 gpg-agent" dir= execID=4c5d8
time="2023-11-03T13:15:34Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=86285
time="2023-11-03T13:15:34Z" level=debug duration=11.252333ms execID=86285
time="2023-11-03T13:15:34Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=bf80d
time="2023-11-03T13:15:34Z" level=debug duration=39.504441ms execID=bf80d
time="2023-11-03T13:15:34Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=db96e
time="2023-11-03T13:15:34Z" level=debug duration=2.004276ms execID=db96e
time="2023-11-03T13:15:34Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=1b781
time="2023-11-03T13:15:34Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.774767ms execID=1b781
time="2023-11-03T13:15:34Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=3a2fd
time="2023-11-03T13:15:34Z" level=debug duration=29.615289ms execID=3a2fd
time="2023-11-03T13:15:34Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=06b28
time="2023-11-03T13:15:34Z" level=debug duration=23.319075ms execID=06b28
time="2023-11-03T13:15:34Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=82738
time="2023-11-03T13:15:34Z" level=debug duration=2.287367ms execID=82738
time="2023-11-03T13:15:34Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=722bb
Handling connection for 9081
time="2023-11-03T13:15:34Z" level=debug duration=82.515189ms execID=722bb
time="2023-11-03T13:15:34Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-local-sync-dry-run-with-as-en-ynrvj" dir= execID=ea290
time="2023-11-03T13:15:35Z" level=debug msg="namespace/argocd-e2e--test-namespaced-local-sync-dry-run-with-as-en-ynrvj created\n" duration=119.38938ms execID=ea290
time="2023-11-03T13:15:35Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-local-sync-dry-run-with-as-en-ynrvj e2e.argoproj.io=true" dir= execID=28af6
time="2023-11-03T13:15:35Z" level=debug msg="namespace/argocd-e2e--test-namespaced-local-sync-dry-run-with-as-en-ynrvj labeled\n" duration=357.948631ms execID=28af6
time="2023-11-03T13:15:35Z" level=info msg="clean state" duration=2.664787078s id=TestNamespacedLocalSyncDryRunWithASEnabled-ynrvj name=TestNamespacedLocalSyncDryRunWithASEnabled password=password username=admin
time="2023-11-03T13:15:36Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-local-sync-dry-run-with-as-enabled --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-namespaced-local-sync-dry-run-with-as-en-ynrvj --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzczNCwibmJmIjoxNjk5MDE3MzM0LCJpYXQiOjE2OTkwMTczMzQsImp0aSI6IjA3Zjc1YjcxLWM4M2UtNDBhNC1hNDRiLTM4ZmMzZDAyOGMwZSJ9.gFKZltNvOKPCzh2IkzIpQooIK71_m_tLuKQP9PAWtsM --insecure" dir= execID=e1cf5
time="2023-11-03T13:15:36Z" level=debug msg="application 'test-namespaced-local-sync-dry-run-with-as-enabled' created\n" duration=287.482157ms execID=e1cf5
time="2023-11-03T13:15:36Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:15:36Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-local-sync-dry-run-with-as-enabled --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzczNCwibmJmIjoxNjk5MDE3MzM0LCJpYXQiOjE2OTkwMTczMzQsImp0aSI6IjA3Zjc1YjcxLWM4M2UtNDBhNC1hNDRiLTM4ZmMzZDAyOGMwZSJ9.gFKZltNvOKPCzh2IkzIpQooIK71_m_tLuKQP9PAWtsM --insecure" dir= execID=41597
time="2023-11-03T13:15:41Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:15:40+00:00   apps  Deployment  argocd-e2e--test-namespaced-local-sync-dry-run-with-as-en-ynrvj          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:15:40+00:00            Service  argocd-e2e--test-namespaced-local-sync-dry-run-with-as-en-ynrvj          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:15:41+00:00            Service  argocd-e2e--test-namespaced-local-sync-dry-run-with-as-en-ynrvj          guestbook-ui  OutOfSync  Missing              service/guestbook-ui created\n2023-11-03T13:15:41+00:00   apps  Deployment  argocd-e2e--test-namespaced-local-sync-dry-run-with-as-en-ynrvj          guestbook-ui  OutOfSync  Missing              deployment.apps/guestbook-ui created\n2023-11-03T13:15:41+00:00   apps  Deployment  argocd-e2e--test-namespaced-local-sync-dry-run-with-as-en-ynrvj          guestbook-ui    Synced  Progressing              deployment.apps/guestbook-ui created\n2023-11-03T13:15:41+00:00            Service  argocd-e2e--test-namespaced-local-sync-dry-run-with-as-en-ynrvj          guestbook-ui    Synced  Healthy                  service/guestbook-ui created\n\nName:               argocd-e2e-external/test-namespaced-local-sync-dry-run-with-as-enabled\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-local-sync-dry-run-with-as-en-ynrvj\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-local-sync-dry-run-with-as-enabled\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (2eec568)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      2eec568304ef52018346c82bc9405da473e9294c\nPhase:              Succeeded\nStart:              2023-11-03 13:15:36 +0000 UTC\nFinished:           2023-11-03 13:15:41 +0000 UTC\nDuration:           5s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                                        NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-namespaced-local-sync-dry-run-with-as-en-ynrvj  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-namespaced-local-sync-dry-run-with-as-en-ynrvj  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=4.665719307s execID=41597
time="2023-11-03T13:15:41Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:15:41Z" level=info msg="../../dist/argocd app set argocd-e2e-external/test-namespaced-local-sync-dry-run-with-as-enabled --sync-policy automated --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzczNCwibmJmIjoxNjk5MDE3MzM0LCJpYXQiOjE2OTkwMTczMzQsImp0aSI6IjA3Zjc1YjcxLWM4M2UtNDBhNC1hNDRiLTM4ZmMzZDAyOGMwZSJ9.gFKZltNvOKPCzh2IkzIpQooIK71_m_tLuKQP9PAWtsM --insecure" dir= execID=ea750
time="2023-11-03T13:15:41Z" level=debug duration=159.84612ms execID=ea750
time="2023-11-03T13:15:41Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-local-sync-dry-run-with-as-enabled --dry-run --local ./testdata/guestbook_local --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzczNCwibmJmIjoxNjk5MDE3MzM0LCJpYXQiOjE2OTkwMTczMzQsImp0aSI6IjA3Zjc1YjcxLWM4M2UtNDBhNC1hNDRiLTM4ZmMzZDAyOGMwZSJ9.gFKZltNvOKPCzh2IkzIpQooIK71_m_tLuKQP9PAWtsM --insecure" dir= execID=3dcfe
time="2023-11-03T13:15:42Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                                       NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:15:41+00:00            Service  argocd-e2e--test-namespaced-local-sync-dry-run-with-as-en-ynrvj          guestbook-ui    Synced  Healthy              \n2023-11-03T13:15:41+00:00   apps  Deployment  argocd-e2e--test-namespaced-local-sync-dry-run-with-as-en-ynrvj          guestbook-ui    Synced  Healthy              \n\nName:               argocd-e2e-external/test-namespaced-local-sync-dry-run-with-as-enabled\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-local-sync-dry-run-with-as-en-ynrvj\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-local-sync-dry-run-with-as-enabled\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        Automated\nSync Status:        Synced to  (2eec568)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      \nPhase:              Succeeded\nStart:              2023-11-03 13:15:41 +0000 UTC\nFinished:           2023-11-03 13:15:42 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (no more tasks)\n\nGROUP  KIND        NAMESPACE                                                        NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-namespaced-local-sync-dry-run-with-as-en-ynrvj  guestbook-ui  Synced  Healthy        service/guestbook-ui configured (dry run)\napps   Deployment  argocd-e2e--test-namespaced-local-sync-dry-run-with-as-en-ynrvj  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui configured (dry run)\n" duration=638.915254ms execID=3dcfe
time="2023-11-03T13:15:42Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedLocalSyncDryRunWithASEnabled (9.44s)
=== RUN   TestNamespacedSyncAsync
time="2023-11-03T13:15:42Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=d4173
time="2023-11-03T13:15:42Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-local-sync-dry-run-with-as-en-ynrvj\" deleted\n" duration=283.611361ms execID=d4173
time="2023-11-03T13:15:42Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=3298f
time="2023-11-03T13:15:42Z" level=debug msg="No resources found\n" duration=420.35815ms execID=3298f
time="2023-11-03T13:15:42Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=2fdc2
time="2023-11-03T13:15:43Z" level=debug msg="No resources found\n" duration=307.825385ms execID=2fdc2
time="2023-11-03T13:15:44Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:15:44Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc0NCwibmJmIjoxNjk5MDE3MzQ0LCJpYXQiOjE2OTkwMTczNDQsImp0aSI6IjQ4NmEyNGVlLTcwMjItNGYxMi1hZWExLTdmMTlkYjliYzM1YyJ9.7giSwpwMUd8VqEcZVhkIIb6FGlIJmLUw1N-rcPaAFRQ --insecure" dir= execID=8c198
time="2023-11-03T13:15:44Z" level=debug duration=82.720528ms execID=8c198
time="2023-11-03T13:15:44Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=87aaf
time="2023-11-03T13:15:44Z" level=debug duration=2.146053ms execID=87aaf
time="2023-11-03T13:15:44Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=61a54
time="2023-11-03T13:15:44Z" level=debug duration=1.61459ms execID=61a54
time="2023-11-03T13:15:44Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=cb8ac
time="2023-11-03T13:15:44Z" level=debug duration=1.564975ms execID=cb8ac
time="2023-11-03T13:15:44Z" level=info msg="pkill -9 gpg-agent" dir= execID=abfa9
time="2023-11-03T13:15:44Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=0d279
time="2023-11-03T13:15:44Z" level=debug duration=10.008883ms execID=0d279
time="2023-11-03T13:15:44Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=51659
time="2023-11-03T13:15:44Z" level=debug duration=39.174674ms execID=51659
time="2023-11-03T13:15:44Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=c4a1d
time="2023-11-03T13:15:44Z" level=debug duration=1.874025ms execID=c4a1d
time="2023-11-03T13:15:44Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=b8138
time="2023-11-03T13:15:44Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.553827ms execID=b8138
time="2023-11-03T13:15:44Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=add10
time="2023-11-03T13:15:44Z" level=debug duration=32.592014ms execID=add10
time="2023-11-03T13:15:44Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=933c3
time="2023-11-03T13:15:44Z" level=debug duration=21.777125ms execID=933c3
time="2023-11-03T13:15:44Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=db61f
time="2023-11-03T13:15:44Z" level=debug duration=2.140371ms execID=db61f
time="2023-11-03T13:15:44Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=0e582
Handling connection for 9081
time="2023-11-03T13:15:44Z" level=debug duration=81.534526ms execID=0e582
time="2023-11-03T13:15:44Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-sync-async-qiuej" dir= execID=e598f
time="2023-11-03T13:15:44Z" level=debug msg="namespace/argocd-e2e--test-namespaced-sync-async-qiuej created\n" duration=166.041927ms execID=e598f
time="2023-11-03T13:15:44Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-sync-async-qiuej e2e.argoproj.io=true" dir= execID=34d9c
time="2023-11-03T13:15:44Z" level=debug msg="namespace/argocd-e2e--test-namespaced-sync-async-qiuej labeled\n" duration=278.791622ms execID=34d9c
time="2023-11-03T13:15:44Z" level=info msg="clean state" duration=2.731430578s id=TestNamespacedSyncAsync-qiuej name=TestNamespacedSyncAsync password=password username=admin
time="2023-11-03T13:15:45Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-sync-async --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-namespaced-sync-async-qiuej --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc0NCwibmJmIjoxNjk5MDE3MzQ0LCJpYXQiOjE2OTkwMTczNDQsImp0aSI6IjQ4NmEyNGVlLTcwMjItNGYxMi1hZWExLTdmMTlkYjliYzM1YyJ9.7giSwpwMUd8VqEcZVhkIIb6FGlIJmLUw1N-rcPaAFRQ --insecure" dir= execID=85f14
time="2023-11-03T13:15:46Z" level=debug msg="application 'test-namespaced-sync-async' created\n" duration=254.26908ms execID=85f14
time="2023-11-03T13:15:46Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:15:46Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-sync-async --timeout 30 --async --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc0NCwibmJmIjoxNjk5MDE3MzQ0LCJpYXQiOjE2OTkwMTczNDQsImp0aSI6IjQ4NmEyNGVlLTcwMjItNGYxMi1hZWExLTdmMTlkYjliYzM1YyJ9.7giSwpwMUd8VqEcZVhkIIb6FGlIJmLUw1N-rcPaAFRQ --insecure" dir= execID=b2046
time="2023-11-03T13:15:46Z" level=debug duration=105.99484ms execID=b2046
time="2023-11-03T13:15:46Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:15:46Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:15:46Z" level=info msg="pending: operation phase should be Succeeded, is Running"
time="2023-11-03T13:15:49Z" level=info msg="pending: operation phase should be Succeeded, is Running"
time="2023-11-03T13:15:52Z" level=info msg="pending: operation phase should be Succeeded, is Running"
time="2023-11-03T13:15:55Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:15:55Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:15:55Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedSyncAsync (13.13s)
=== RUN   TestNamespacedPermissions
time="2023-11-03T13:15:55Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=07b2b
time="2023-11-03T13:15:55Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-sync-async-qiuej\" deleted\n" duration=251.531946ms execID=07b2b
time="2023-11-03T13:15:55Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=89c13
time="2023-11-03T13:15:56Z" level=debug msg="No resources found\n" duration=379.640612ms execID=89c13
time="2023-11-03T13:15:56Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=bf4c4
time="2023-11-03T13:15:56Z" level=debug msg="No resources found\n" duration=241.188484ms execID=bf4c4
time="2023-11-03T13:15:56Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:15:56Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc1NiwibmJmIjoxNjk5MDE3MzU2LCJpYXQiOjE2OTkwMTczNTYsImp0aSI6IjZmNTgyNTE2LWNiZWQtNGQ3OS1iOGU4LWUxZTQyNDE0ZmFmMyJ9.v_Cf9ocufAQ6ZZHoKtIVELgCrDi_AvI753_eLn8MuT4 --insecure" dir= execID=28020
time="2023-11-03T13:15:56Z" level=debug duration=77.158508ms execID=28020
time="2023-11-03T13:15:56Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=c63bd
time="2023-11-03T13:15:56Z" level=debug duration=2.023343ms execID=c63bd
time="2023-11-03T13:15:56Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=438cf
time="2023-11-03T13:15:56Z" level=debug duration=1.861067ms execID=438cf
time="2023-11-03T13:15:56Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=a9df3
time="2023-11-03T13:15:56Z" level=debug duration=1.610361ms execID=a9df3
time="2023-11-03T13:15:56Z" level=info msg="pkill -9 gpg-agent" dir= execID=c3fd6
time="2023-11-03T13:15:56Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=8dca0
time="2023-11-03T13:15:57Z" level=debug duration=10.068683ms execID=8dca0
time="2023-11-03T13:15:57Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=b9ed2
time="2023-11-03T13:15:57Z" level=debug duration=46.683393ms execID=b9ed2
time="2023-11-03T13:15:57Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=a4c4f
time="2023-11-03T13:15:57Z" level=debug duration=1.908278ms execID=a4c4f
time="2023-11-03T13:15:57Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=07f7d
time="2023-11-03T13:15:57Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.054048ms execID=07f7d
time="2023-11-03T13:15:57Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=66b46
time="2023-11-03T13:15:57Z" level=debug duration=29.403029ms execID=66b46
time="2023-11-03T13:15:57Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=a1a86
time="2023-11-03T13:15:57Z" level=debug duration=24.731895ms execID=a1a86
time="2023-11-03T13:15:57Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=62c0d
time="2023-11-03T13:15:57Z" level=debug duration=15.521838ms execID=62c0d
time="2023-11-03T13:15:57Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=d47c8
Handling connection for 9081
time="2023-11-03T13:15:57Z" level=debug duration=71.972458ms execID=d47c8
time="2023-11-03T13:15:57Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-permissions-okeke" dir= execID=9a3f8
time="2023-11-03T13:15:57Z" level=debug msg="namespace/argocd-e2e--test-namespaced-permissions-okeke created\n" duration=151.606542ms execID=9a3f8
time="2023-11-03T13:15:57Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-permissions-okeke e2e.argoproj.io=true" dir= execID=778d4
time="2023-11-03T13:15:57Z" level=debug msg="namespace/argocd-e2e--test-namespaced-permissions-okeke labeled\n" duration=295.354321ms execID=778d4
time="2023-11-03T13:15:57Z" level=info msg="clean state" duration=2.320008233s id=TestNamespacedPermissions-okeke name=TestNamespacedPermissions password=password username=admin
time="2023-11-03T13:15:57Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=b6e27
time="2023-11-03T13:15:57Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-permissions-okeke\" deleted\n" duration=264.985114ms execID=b6e27
time="2023-11-03T13:15:57Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=33c8e
time="2023-11-03T13:15:58Z" level=debug msg="No resources found\n" duration=499.674901ms execID=33c8e
time="2023-11-03T13:15:58Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=10564
time="2023-11-03T13:15:58Z" level=debug msg="No resources found\n" duration=206.186555ms execID=10564
time="2023-11-03T13:15:59Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:15:59Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc1OSwibmJmIjoxNjk5MDE3MzU5LCJpYXQiOjE2OTkwMTczNTksImp0aSI6IjBiZjE3Nzk0LTgzMWMtNGVlOS05YTBmLWFjOThjYWQzN2U4YiJ9.qrGCMWExLKV6sIpquHw3q2d8dCa5HQ8-vbpMRyHwwtk --insecure" dir= execID=13f06
time="2023-11-03T13:15:59Z" level=debug duration=66.02133ms execID=13f06
time="2023-11-03T13:15:59Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=98353
time="2023-11-03T13:15:59Z" level=debug duration=1.98154ms execID=98353
time="2023-11-03T13:15:59Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=b099c
time="2023-11-03T13:15:59Z" level=debug duration=1.564058ms execID=b099c
time="2023-11-03T13:15:59Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=e81d2
time="2023-11-03T13:15:59Z" level=debug duration=1.550729ms execID=e81d2
time="2023-11-03T13:15:59Z" level=info msg="pkill -9 gpg-agent" dir= execID=528de
time="2023-11-03T13:15:59Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=fac93
time="2023-11-03T13:15:59Z" level=debug duration=9.653548ms execID=fac93
time="2023-11-03T13:15:59Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=0873c
time="2023-11-03T13:15:59Z" level=debug duration=31.755315ms execID=0873c
time="2023-11-03T13:15:59Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=9edf0
time="2023-11-03T13:15:59Z" level=debug duration=1.780254ms execID=9edf0
time="2023-11-03T13:15:59Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=bdb66
time="2023-11-03T13:15:59Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.914211ms execID=bdb66
time="2023-11-03T13:15:59Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=cfcbf
time="2023-11-03T13:15:59Z" level=debug duration=35.961767ms execID=cfcbf
time="2023-11-03T13:15:59Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=82f76
time="2023-11-03T13:15:59Z" level=debug duration=21.468135ms execID=82f76
time="2023-11-03T13:15:59Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=c1166
time="2023-11-03T13:15:59Z" level=debug duration=2.64901ms execID=c1166
time="2023-11-03T13:15:59Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=dc766
Handling connection for 9081
time="2023-11-03T13:15:59Z" level=debug duration=87.565278ms execID=dc766
time="2023-11-03T13:15:59Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-permissions-xpvco" dir= execID=d88e2
time="2023-11-03T13:15:59Z" level=debug msg="namespace/argocd-e2e--test-namespaced-permissions-xpvco created\n" duration=122.378837ms execID=d88e2
time="2023-11-03T13:15:59Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-permissions-xpvco e2e.argoproj.io=true" dir= execID=b435d
time="2023-11-03T13:16:00Z" level=debug msg="namespace/argocd-e2e--test-namespaced-permissions-xpvco labeled\n" duration=266.786155ms execID=b435d
time="2023-11-03T13:16:00Z" level=info msg="clean state" duration=2.403192416s id=TestNamespacedPermissions-xpvco name=TestNamespacedPermissions password=password username=admin
time="2023-11-03T13:16:01Z" level=info msg="../../dist/argocd proj create argo-project --source-namespaces argocd-e2e-external --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc1OSwibmJmIjoxNjk5MDE3MzU5LCJpYXQiOjE2OTkwMTczNTksImp0aSI6IjBiZjE3Nzk0LTgzMWMtNGVlOS05YTBmLWFjOThjYWQzN2U4YiJ9.qrGCMWExLKV6sIpquHw3q2d8dCa5HQ8-vbpMRyHwwtk --insecure" dir= execID=28d14
time="2023-11-03T13:16:01Z" level=debug duration=76.372302ms execID=28d14
time="2023-11-03T13:16:02Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-permissions --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook-logs --project argo-project --dest-namespace argocd-e2e--test-namespaced-permissions-xpvco --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc1OSwibmJmIjoxNjk5MDE3MzU5LCJpYXQiOjE2OTkwMTczNTksImp0aSI6IjBiZjE3Nzk0LTgzMWMtNGVlOS05YTBmLWFjOThjYWQzN2U4YiJ9.qrGCMWExLKV6sIpquHw3q2d8dCa5HQ8-vbpMRyHwwtk --insecure" dir= execID=e53c8
time="2023-11-03T13:16:02Z" level=debug duration=221.602759ms execID=e53c8
time="2023-11-03T13:16:02Z" level=error msg="`../../dist/argocd app create argocd-e2e-external/test-namespaced-permissions --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook-logs --project argo-project --dest-namespace argocd-e2e--test-namespaced-permissions-xpvco --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc1OSwibmJmIjoxNjk5MDE3MzU5LCJpYXQiOjE2OTkwMTczNTksImp0aSI6IjBiZjE3Nzk0LTgzMWMtNGVlOS05YTBmLWFjOThjYWQzN2U4YiJ9.qrGCMWExLKV6sIpquHw3q2d8dCa5HQ8-vbpMRyHwwtk --insecure` failed exit status 20: time=\"2023-11-03T13:16:02Z\" level=fatal msg=\"rpc error: code = InvalidArgument desc = application spec for test-namespaced-permissions is invalid: InvalidSpecError: application repo http://argocd-e2e-server:9081/argo-e2e/testdata.git is not permitted in project 'argo-project';InvalidSpecError: application destination {https://kubernetes.default.svc argocd-e2e--test-namespaced-permissions-xpvco} is not permitted in project 'argo-project'\"" execID=e53c8
time="2023-11-03T13:16:02Z" level=info msg="expectation succeeded: error ''"
time="2023-11-03T13:16:02Z" level=info msg="expectation succeeded: error ''"
time="2023-11-03T13:16:02Z" level=info msg="../../dist/argocd proj add-destination argo-project * * --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc1OSwibmJmIjoxNjk5MDE3MzU5LCJpYXQiOjE2OTkwMTczNTksImp0aSI6IjBiZjE3Nzk0LTgzMWMtNGVlOS05YTBmLWFjOThjYWQzN2U4YiJ9.qrGCMWExLKV6sIpquHw3q2d8dCa5HQ8-vbpMRyHwwtk --insecure" dir= execID=91497
time="2023-11-03T13:16:02Z" level=debug duration=128.418187ms execID=91497
time="2023-11-03T13:16:02Z" level=info msg="../../dist/argocd proj add-source argo-project * --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc1OSwibmJmIjoxNjk5MDE3MzU5LCJpYXQiOjE2OTkwMTczNTksImp0aSI6IjBiZjE3Nzk0LTgzMWMtNGVlOS05YTBmLWFjOThjYWQzN2U4YiJ9.qrGCMWExLKV6sIpquHw3q2d8dCa5HQ8-vbpMRyHwwtk --insecure" dir= execID=b79b3
time="2023-11-03T13:16:02Z" level=debug duration=169.002767ms execID=b79b3
time="2023-11-03T13:16:02Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-permissions --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook-logs --project argo-project --dest-namespace argocd-e2e--test-namespaced-permissions-xpvco --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc1OSwibmJmIjoxNjk5MDE3MzU5LCJpYXQiOjE2OTkwMTczNTksImp0aSI6IjBiZjE3Nzk0LTgzMWMtNGVlOS05YTBmLWFjOThjYWQzN2U4YiJ9.qrGCMWExLKV6sIpquHw3q2d8dCa5HQ8-vbpMRyHwwtk --insecure" dir= execID=7b404
time="2023-11-03T13:16:02Z" level=debug msg="application 'test-namespaced-permissions' created\n" duration=144.146465ms execID=7b404
time="2023-11-03T13:16:02Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:16:02Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-permissions --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc1OSwibmJmIjoxNjk5MDE3MzU5LCJpYXQiOjE2OTkwMTczNTksImp0aSI6IjBiZjE3Nzk0LTgzMWMtNGVlOS05YTBmLWFjOThjYWQzN2U4YiJ9.qrGCMWExLKV6sIpquHw3q2d8dCa5HQ8-vbpMRyHwwtk --insecure" dir= execID=cd660
time="2023-11-03T13:16:07Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:16:06+00:00            Service  argocd-e2e--test-namespaced-permissions-xpvco          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:16:06+00:00   apps  Deployment  argocd-e2e--test-namespaced-permissions-xpvco          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:16:07+00:00            Service  argocd-e2e--test-namespaced-permissions-xpvco          guestbook-ui  OutOfSync  Missing              service/guestbook-ui created\n2023-11-03T13:16:07+00:00   apps  Deployment  argocd-e2e--test-namespaced-permissions-xpvco          guestbook-ui  OutOfSync  Missing              deployment.apps/guestbook-ui created\n2023-11-03T13:16:07+00:00            Service  argocd-e2e--test-namespaced-permissions-xpvco          guestbook-ui    Synced  Healthy                  service/guestbook-ui created\n2023-11-03T13:16:07+00:00   apps  Deployment  argocd-e2e--test-namespaced-permissions-xpvco          guestbook-ui    Synced  Progressing              deployment.apps/guestbook-ui created\n\nName:               argocd-e2e-external/test-namespaced-permissions\nProject:            argo-project\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-permissions-xpvco\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-permissions\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook-logs\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (991d5fd)\nHealth Status:      Progressing\n\nOperation:          Sync\nSync Revision:      991d5fdb3684eb9a52cd3404974cdcca9897b2ae\nPhase:              Succeeded\nStart:              2023-11-03 13:16:02 +0000 UTC\nFinished:           2023-11-03 13:16:07 +0000 UTC\nDuration:           5s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                      NAME          STATUS  HEALTH       HOOK  MESSAGE\n       Service     argocd-e2e--test-namespaced-permissions-xpvco  guestbook-ui  Synced  Healthy            service/guestbook-ui created\napps   Deployment  argocd-e2e--test-namespaced-permissions-xpvco  guestbook-ui  Synced  Progressing        deployment.apps/guestbook-ui created\n" duration=4.736881703s execID=cd660
time="2023-11-03T13:16:07Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:16:07Z" level=info msg="../../dist/argocd app get argocd-e2e-external/test-namespaced-permissions --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc1OSwibmJmIjoxNjk5MDE3MzU5LCJpYXQiOjE2OTkwMTczNTksImp0aSI6IjBiZjE3Nzk0LTgzMWMtNGVlOS05YTBmLWFjOThjYWQzN2U4YiJ9.qrGCMWExLKV6sIpquHw3q2d8dCa5HQ8-vbpMRyHwwtk --insecure" dir= execID=eec45
time="2023-11-03T13:16:07Z" level=debug msg="Name:               argocd-e2e-external/test-namespaced-permissions\nProject:            argo-project\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-permissions-xpvco\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-namespaced-permissions\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook-logs\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Unknown (991d5fd)\nHealth Status:      Unknown\n\nCONDITION         MESSAGE                                                                                                                                            LAST TRANSITION\nInvalidSpecError  application destination {https://kubernetes.default.svc argocd-e2e--test-namespaced-permissions-xpvco} is not permitted in project 'argo-project'  2023-11-03 13:16:07 +0000 UTC\nInvalidSpecError  application repo http://argocd-e2e-server:9081/argo-e2e/testdata.git is not permitted in project 'argo-project'                                    2023-11-03 13:16:07 +0000 UTC\n\n\nGROUP  KIND        NAMESPACE                                      NAME          STATUS  HEALTH       HOOK  MESSAGE\n       Service     argocd-e2e--test-namespaced-permissions-xpvco  guestbook-ui  Synced  Healthy            service/guestbook-ui created\napps   Deployment  argocd-e2e--test-namespaced-permissions-xpvco  guestbook-ui  Synced  Progressing        deployment.apps/guestbook-ui created\n" duration=114.027376ms execID=eec45
time="2023-11-03T13:16:07Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:16:07Z" level=info msg="expectation succeeded: condition {InvalidSpecError application destination {https://kubernetes.default.svc argocd-e2e--test-namespaced-permissions-xpvco} is not permitted in project 'argo-project'} in [{InvalidSpecError application destination {https://kubernetes.default.svc argocd-e2e--test-namespaced-permissions-xpvco} is not permitted in project 'argo-project' 2023-11-03 13:16:07 +0000 UTC} {InvalidSpecError application repo http://argocd-e2e-server:9081/argo-e2e/testdata.git is not permitted in project 'argo-project' 2023-11-03 13:16:07 +0000 UTC}]"
time="2023-11-03T13:16:07Z" level=info msg="expectation succeeded: condition {InvalidSpecError application repo http://argocd-e2e-server:9081/argo-e2e/testdata.git is not permitted in project 'argo-project'} in [{InvalidSpecError application destination {https://kubernetes.default.svc argocd-e2e--test-namespaced-permissions-xpvco} is not permitted in project 'argo-project' 2023-11-03 13:16:07 +0000 UTC} {InvalidSpecError application repo http://argocd-e2e-server:9081/argo-e2e/testdata.git is not permitted in project 'argo-project' 2023-11-03 13:16:07 +0000 UTC}]"
time="2023-11-03T13:16:07Z" level=info msg="../../dist/argocd proj add-destination argo-project * * --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc1OSwibmJmIjoxNjk5MDE3MzU5LCJpYXQiOjE2OTkwMTczNTksImp0aSI6IjBiZjE3Nzk0LTgzMWMtNGVlOS05YTBmLWFjOThjYWQzN2U4YiJ9.qrGCMWExLKV6sIpquHw3q2d8dCa5HQ8-vbpMRyHwwtk --insecure" dir= execID=905cb
time="2023-11-03T13:16:07Z" level=debug duration=110.770954ms execID=905cb
time="2023-11-03T13:16:07Z" level=info msg="../../dist/argocd proj add-source argo-project * --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc1OSwibmJmIjoxNjk5MDE3MzU5LCJpYXQiOjE2OTkwMTczNTksImp0aSI6IjBiZjE3Nzk0LTgzMWMtNGVlOS05YTBmLWFjOThjYWQzN2U4YiJ9.qrGCMWExLKV6sIpquHw3q2d8dCa5HQ8-vbpMRyHwwtk --insecure" dir= execID=4053e
time="2023-11-03T13:16:08Z" level=debug duration=194.33012ms execID=4053e
time="2023-11-03T13:16:08Z" level=info msg="../../dist/argocd app get argocd-e2e-external/test-namespaced-permissions --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc1OSwibmJmIjoxNjk5MDE3MzU5LCJpYXQiOjE2OTkwMTczNTksImp0aSI6IjBiZjE3Nzk0LTgzMWMtNGVlOS05YTBmLWFjOThjYWQzN2U4YiJ9.qrGCMWExLKV6sIpquHw3q2d8dCa5HQ8-vbpMRyHwwtk --insecure" dir= execID=4d0cf
time="2023-11-03T13:16:08Z" level=debug msg="Name:               argocd-e2e-external/test-namespaced-permissions\nProject:            argo-project\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-permissions-xpvco\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-namespaced-permissions\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook-logs\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (991d5fd)\nHealth Status:      Missing\n\nGROUP  KIND        NAMESPACE                                      NAME          STATUS   HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-namespaced-permissions-xpvco  guestbook-ui  Synced   Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-namespaced-permissions-xpvco  guestbook-ui  Unknown  Missing        deployment.apps/guestbook-ui created\n" duration=170.954895ms execID=4d0cf
time="2023-11-03T13:16:08Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:16:08Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
time="2023-11-03T13:16:08Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedPermissions (13.09s)
=== RUN   TestNamespacedPermissionWithScopedRepo
time="2023-11-03T13:16:08Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=44055
time="2023-11-03T13:16:08Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-permissions-xpvco\" deleted\n" duration=202.54342ms execID=44055
time="2023-11-03T13:16:08Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=17800
time="2023-11-03T13:16:09Z" level=debug msg="No resources found\n" duration=474.25936ms execID=17800
time="2023-11-03T13:16:09Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=18c53
time="2023-11-03T13:16:09Z" level=debug msg="No resources found\n" duration=307.543676ms execID=18c53
time="2023-11-03T13:16:10Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:16:10Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc3MCwibmJmIjoxNjk5MDE3MzcwLCJpYXQiOjE2OTkwMTczNzAsImp0aSI6IjAxNzliM2U0LTc5ODAtNDM2My05NGI3LWMzMTdiOWEzNTlhMSJ9.-0448yjSMcsRxH9872NcoQ8mieMpdKArGxF6QxuqAdY --insecure" dir= execID=a708a
time="2023-11-03T13:16:10Z" level=debug duration=111.954549ms execID=a708a
time="2023-11-03T13:16:10Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=6a6fc
time="2023-11-03T13:16:10Z" level=debug duration=2.168689ms execID=6a6fc
time="2023-11-03T13:16:10Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=9339a
time="2023-11-03T13:16:10Z" level=debug duration=1.554578ms execID=9339a
time="2023-11-03T13:16:10Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=a9e39
time="2023-11-03T13:16:10Z" level=debug duration=1.396289ms execID=a9e39
time="2023-11-03T13:16:10Z" level=info msg="pkill -9 gpg-agent" dir= execID=cc833
time="2023-11-03T13:16:10Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=cadbd
time="2023-11-03T13:16:10Z" level=debug duration=9.647916ms execID=cadbd
time="2023-11-03T13:16:10Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=eacd5
time="2023-11-03T13:16:10Z" level=debug duration=41.982233ms execID=eacd5
time="2023-11-03T13:16:10Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=88af4
time="2023-11-03T13:16:10Z" level=debug duration=1.909443ms execID=88af4
time="2023-11-03T13:16:10Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=0be3e
time="2023-11-03T13:16:10Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.063749ms execID=0be3e
time="2023-11-03T13:16:10Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=8db81
time="2023-11-03T13:16:10Z" level=debug duration=26.550289ms execID=8db81
time="2023-11-03T13:16:10Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=84f95
time="2023-11-03T13:16:10Z" level=debug duration=25.229128ms execID=84f95
time="2023-11-03T13:16:10Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=66961
time="2023-11-03T13:16:10Z" level=debug duration=2.110639ms execID=66961
time="2023-11-03T13:16:10Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=cbfbf
Handling connection for 9081
time="2023-11-03T13:16:10Z" level=debug duration=75.344367ms execID=cbfbf
time="2023-11-03T13:16:10Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-permission-with-scoped-repo-oduic" dir= execID=ec759
time="2023-11-03T13:16:10Z" level=debug msg="namespace/argocd-e2e--test-namespaced-permission-with-scoped-repo-oduic created\n" duration=146.407004ms execID=ec759
time="2023-11-03T13:16:10Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-permission-with-scoped-repo-oduic e2e.argoproj.io=true" dir= execID=a5fb9
time="2023-11-03T13:16:11Z" level=debug msg="namespace/argocd-e2e--test-namespaced-permission-with-scoped-repo-oduic labeled\n" duration=232.426991ms execID=a5fb9
time="2023-11-03T13:16:11Z" level=info msg="clean state" duration=2.74674502s id=TestNamespacedPermissionWithScopedRepo-oduic name=TestNamespacedPermissionWithScopedRepo password=password username=admin
time="2023-11-03T13:16:11Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=40f1e
time="2023-11-03T13:16:11Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-permission-with-scoped-repo-oduic\" deleted\n" duration=253.549229ms execID=40f1e
time="2023-11-03T13:16:11Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=6b8f8
time="2023-11-03T13:16:11Z" level=debug msg="No resources found\n" duration=457.434429ms execID=6b8f8
time="2023-11-03T13:16:11Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=d68e1
time="2023-11-03T13:16:12Z" level=debug msg="No resources found\n" duration=231.321073ms execID=d68e1
time="2023-11-03T13:16:13Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:16:13Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc3MywibmJmIjoxNjk5MDE3MzczLCJpYXQiOjE2OTkwMTczNzMsImp0aSI6IjNhZDE5NjAwLTQwMGQtNGU5Ny1iNzBiLWFhOWM4ZjNhMDc1NyJ9.vue6r2Kzq3qohqnJ4cvDCqi3SPif17LXtPK3G8-yKOo --insecure" dir= execID=5be90
time="2023-11-03T13:16:13Z" level=debug duration=150.03407ms execID=5be90
time="2023-11-03T13:16:13Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=91235
time="2023-11-03T13:16:13Z" level=debug duration=1.994417ms execID=91235
time="2023-11-03T13:16:13Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=61e42
time="2023-11-03T13:16:13Z" level=debug duration=1.646537ms execID=61e42
time="2023-11-03T13:16:13Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=f902c
time="2023-11-03T13:16:13Z" level=debug duration=1.608311ms execID=f902c
time="2023-11-03T13:16:13Z" level=info msg="pkill -9 gpg-agent" dir= execID=ada5d
time="2023-11-03T13:16:13Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=7d918
time="2023-11-03T13:16:13Z" level=debug duration=9.256645ms execID=7d918
time="2023-11-03T13:16:13Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=dbe48
time="2023-11-03T13:16:13Z" level=debug duration=34.537874ms execID=dbe48
time="2023-11-03T13:16:13Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=7b2c9
time="2023-11-03T13:16:13Z" level=debug duration=1.860857ms execID=7b2c9
time="2023-11-03T13:16:13Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=2d0c8
time="2023-11-03T13:16:13Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.015228ms execID=2d0c8
time="2023-11-03T13:16:13Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=e6e84
time="2023-11-03T13:16:13Z" level=debug duration=25.66714ms execID=e6e84
time="2023-11-03T13:16:13Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=391ab
time="2023-11-03T13:16:13Z" level=debug duration=20.522786ms execID=391ab
time="2023-11-03T13:16:13Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=7db32
time="2023-11-03T13:16:13Z" level=debug duration=2.062771ms execID=7db32
time="2023-11-03T13:16:13Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=422a5
Handling connection for 9081
time="2023-11-03T13:16:13Z" level=debug duration=68.987799ms execID=422a5
time="2023-11-03T13:16:13Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-permission-with-scoped-repo-flszz" dir= execID=6fb9e
time="2023-11-03T13:16:13Z" level=debug msg="namespace/argocd-e2e--test-namespaced-permission-with-scoped-repo-flszz created\n" duration=104.55797ms execID=6fb9e
time="2023-11-03T13:16:13Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-permission-with-scoped-repo-flszz e2e.argoproj.io=true" dir= execID=33ac8
time="2023-11-03T13:16:13Z" level=debug msg="namespace/argocd-e2e--test-namespaced-permission-with-scoped-repo-flszz labeled\n" duration=352.744633ms execID=33ac8
time="2023-11-03T13:16:13Z" level=info msg="clean state" duration=2.767386511s id=TestNamespacedPermissionWithScopedRepo-flszz name=TestNamespacedPermissionWithScopedRepo password=password username=admin
time="2023-11-03T13:16:14Z" level=info msg="../../dist/argocd proj create argo-project --dest *,* --source-namespaces argocd-e2e-external --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc3MywibmJmIjoxNjk5MDE3MzczLCJpYXQiOjE2OTkwMTczNzMsImp0aSI6IjNhZDE5NjAwLTQwMGQtNGU5Ny1iNzBiLWFhOWM4ZjNhMDc1NyJ9.vue6r2Kzq3qohqnJ4cvDCqi3SPif17LXtPK3G8-yKOo --insecure" dir= execID=1f87a
time="2023-11-03T13:16:15Z" level=debug duration=96.013986ms execID=1f87a
time="2023-11-03T13:16:16Z" level=info msg="../../dist/argocd repo add http://argocd-e2e-server:9081/argo-e2e/testdata.git --project argo-project --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc3MywibmJmIjoxNjk5MDE3MzczLCJpYXQiOjE2OTkwMTczNzMsImp0aSI6IjNhZDE5NjAwLTQwMGQtNGU5Ny1iNzBiLWFhOWM4ZjNhMDc1NyJ9.vue6r2Kzq3qohqnJ4cvDCqi3SPif17LXtPK3G8-yKOo --insecure" dir= execID=68c8a
time="2023-11-03T13:16:16Z" level=debug msg="Repository 'http://argocd-e2e-server:9081/argo-e2e/testdata.git' added\n" duration=222.270176ms execID=68c8a
time="2023-11-03T13:16:17Z" level=info msg=patching jsonPatch="[{\"op\": \"add\", \"path\": \"/metadata/annotations\", \"value\": {\"argocd.argoproj.io/sync-options\": \"Prune=false\"}}]" path=two-nice-pods/pod-1.yaml
time="2023-11-03T13:16:17Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:16:17Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"name\":\"pod-1\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:16:17Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:16:17Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=5c630
time="2023-11-03T13:16:17Z" level=debug msg="diff --git a/two-nice-pods/pod-1.yaml b/two-nice-pods/pod-1.yaml\nindex 95187dd..69b3433 100644\n--- a/two-nice-pods/pod-1.yaml\n+++ b/two-nice-pods/pod-1.yaml\n@@ -1,12 +1,14 @@\n apiVersion: v1\n kind: Pod\n metadata:\n+  annotations:\n+    argocd.argoproj.io/sync-options: Prune=false\n   name: pod-1\n spec:\n   containers:\n-    - name: main\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      command:\n-        - \"true\"\n+  - command:\n+    - \"true\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n   restartPolicy: Never\n" duration=5.176151ms execID=5c630
time="2023-11-03T13:16:17Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=5b8ca
time="2023-11-03T13:16:17Z" level=debug msg="[master eb28700] patch\n 1 file changed, 7 insertions(+), 5 deletions(-)\n" duration=11.820441ms execID=5b8ca
time="2023-11-03T13:16:17Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=2fa8a
Handling connection for 9081
time="2023-11-03T13:16:17Z" level=debug duration=58.378511ms execID=2fa8a
time="2023-11-03T13:16:17Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-permission-with-scoped-repo --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path two-nice-pods --project argo-project --dest-namespace argocd-e2e--test-namespaced-permission-with-scoped-repo-flszz --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc3MywibmJmIjoxNjk5MDE3MzczLCJpYXQiOjE2OTkwMTczNzMsImp0aSI6IjNhZDE5NjAwLTQwMGQtNGU5Ny1iNzBiLWFhOWM4ZjNhMDc1NyJ9.vue6r2Kzq3qohqnJ4cvDCqi3SPif17LXtPK3G8-yKOo --insecure" dir= execID=65b10
time="2023-11-03T13:16:17Z" level=debug msg="application 'test-namespaced-permission-with-scoped-repo' created\n" duration=252.336611ms execID=65b10
time="2023-11-03T13:16:17Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:16:17Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-permission-with-scoped-repo --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc3MywibmJmIjoxNjk5MDE3MzczLCJpYXQiOjE2OTkwMTczNzMsImp0aSI6IjNhZDE5NjAwLTQwMGQtNGU5Ny1iNzBiLWFhOWM4ZjNhMDc1NyJ9.vue6r2Kzq3qohqnJ4cvDCqi3SPif17LXtPK3G8-yKOo --insecure" dir= execID=e58f5
time="2023-11-03T13:16:22Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:16:22+00:00                Pod  argocd-e2e--test-namespaced-permission-with-scoped-repo-flszz                 pod-1  OutOfSync  Missing              \n2023-11-03T13:16:22+00:00                Pod  argocd-e2e--test-namespaced-permission-with-scoped-repo-flszz                 pod-2  OutOfSync  Missing              \n\nName:               argocd-e2e-external/test-namespaced-permission-with-scoped-repo\nProject:            argo-project\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-permission-with-scoped-repo-flszz\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-permission-with-scoped-repo\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               two-nice-pods\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (eb28700)\nHealth Status:      Progressing\n\nOperation:          Sync\nSync Revision:      eb287003904b42f54f414ee74cb73b8cb3d54499\nPhase:              Succeeded\nStart:              2023-11-03 13:16:17 +0000 UTC\nFinished:           2023-11-03 13:16:22 +0000 UTC\nDuration:           5s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND  NAMESPACE                                                      NAME   STATUS  HEALTH       HOOK  MESSAGE\n       Pod   argocd-e2e--test-namespaced-permission-with-scoped-repo-flszz  pod-1  Synced  Progressing        pod/pod-1 created\n       Pod   argocd-e2e--test-namespaced-permission-with-scoped-repo-flszz  pod-2  Synced  Progressing        pod/pod-2 created\n" duration=5.365032038s execID=e58f5
time="2023-11-03T13:16:22Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:16:22Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:16:22Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:16:22Z" level=info msg=deleting path=two-nice-pods/pod-1.yaml
time="2023-11-03T13:16:22Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=27056
time="2023-11-03T13:16:22Z" level=debug msg="diff --git a/two-nice-pods/pod-1.yaml b/two-nice-pods/pod-1.yaml\ndeleted file mode 100644\nindex 69b3433..0000000\n--- a/two-nice-pods/pod-1.yaml\n+++ /dev/null\n@@ -1,14 +0,0 @@\n-apiVersion: v1\n-kind: Pod\n-metadata:\n-  annotations:\n-    argocd.argoproj.io/sync-options: Prune=false\n-  name: pod-1\n-spec:\n-  containers:\n-  - command:\n-    - \"true\"\n-    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-    imagePullPolicy: IfNotPresent\n-    name: main\n-  restartPolicy: Never\n" duration=3.496803ms execID=27056
time="2023-11-03T13:16:22Z" level=info msg="git commit -am delete" dir=/tmp/argo-e2e/testdata.git execID=c02c8
time="2023-11-03T13:16:22Z" level=debug msg="[master 97aded0] delete\n 1 file changed, 14 deletions(-)\n delete mode 100644 two-nice-pods/pod-1.yaml\n" duration=7.372616ms execID=c02c8
time="2023-11-03T13:16:22Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=2fe2e
Handling connection for 9081
time="2023-11-03T13:16:23Z" level=debug duration=37.263129ms execID=2fe2e
time="2023-11-03T13:16:23Z" level=info msg="../../dist/argocd app get argocd-e2e-external/test-namespaced-permission-with-scoped-repo --hard-refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc3MywibmJmIjoxNjk5MDE3MzczLCJpYXQiOjE2OTkwMTczNzMsImp0aSI6IjNhZDE5NjAwLTQwMGQtNGU5Ny1iNzBiLWFhOWM4ZjNhMDc1NyJ9.vue6r2Kzq3qohqnJ4cvDCqi3SPif17LXtPK3G8-yKOo --insecure" dir= execID=db042
time="2023-11-03T13:16:23Z" level=debug msg="Name:               argocd-e2e-external/test-namespaced-permission-with-scoped-repo\nProject:            argo-project\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-permission-with-scoped-repo-flszz\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-namespaced-permission-with-scoped-repo\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               two-nice-pods\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (97aded0)\nHealth Status:      Progressing\n\nGROUP  KIND  NAMESPACE                                                      NAME   STATUS     HEALTH       HOOK  MESSAGE\n       Pod   argocd-e2e--test-namespaced-permission-with-scoped-repo-flszz  pod-1  OutOfSync  Progressing        pod/pod-1 created\n       Pod   argocd-e2e--test-namespaced-permission-with-scoped-repo-flszz  pod-2  Synced     Progressing        pod/pod-2 created\n" duration=224.405089ms execID=db042
time="2023-11-03T13:16:23Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:16:23Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-permission-with-scoped-repo --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc3MywibmJmIjoxNjk5MDE3MzczLCJpYXQiOjE2OTkwMTczNzMsImp0aSI6IjNhZDE5NjAwLTQwMGQtNGU5Ny1iNzBiLWFhOWM4ZjNhMDc1NyJ9.vue6r2Kzq3qohqnJ4cvDCqi3SPif17LXtPK3G8-yKOo --insecure" dir= execID=140be
time="2023-11-03T13:16:23Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                                     NAME    STATUS    HEALTH            HOOK  MESSAGE\n2023-11-03T13:16:23+00:00                Pod  argocd-e2e--test-namespaced-permission-with-scoped-repo-flszz                 pod-1  OutOfSync  Progressing              \n2023-11-03T13:16:23+00:00                Pod  argocd-e2e--test-namespaced-permission-with-scoped-repo-flszz                 pod-2    Synced   Progressing              \n\nName:               argocd-e2e-external/test-namespaced-permission-with-scoped-repo\nProject:            argo-project\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-permission-with-scoped-repo-flszz\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-permission-with-scoped-repo\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               two-nice-pods\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (97aded0)\nHealth Status:      Progressing\n\nOperation:          Sync\nSync Revision:      97aded07d05f8270a91c360b5c4279a7dc7d343f\nPhase:              Succeeded\nStart:              2023-11-03 13:16:23 +0000 UTC\nFinished:           2023-11-03 13:16:23 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND  NAMESPACE                                                      NAME   STATUS     HEALTH       HOOK  MESSAGE\n       Pod   argocd-e2e--test-namespaced-permission-with-scoped-repo-flszz  pod-1  OutOfSync  Progressing        ignored (no prune)\n       Pod   argocd-e2e--test-namespaced-permission-with-scoped-repo-flszz  pod-2  Synced     Progressing        pod/pod-2 unchanged\n" duration=676.620497ms execID=140be
time="2023-11-03T13:16:23Z" level=error msg="`../../dist/argocd app sync argocd-e2e-external/test-namespaced-permission-with-scoped-repo --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc3MywibmJmIjoxNjk5MDE3MzczLCJpYXQiOjE2OTkwMTczNzMsImp0aSI6IjNhZDE5NjAwLTQwMGQtNGU5Ny1iNzBiLWFhOWM4ZjNhMDc1NyJ9.vue6r2Kzq3qohqnJ4cvDCqi3SPif17LXtPK3G8-yKOo --insecure` failed exit status 1: time=\"2023-11-03T13:16:23Z\" level=fatal msg=\"1 resources require pruning\"" execID=140be
time="2023-11-03T13:16:23Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:16:23Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:16:23Z" level=info msg="expectation succeeded: resource 'Pod/pod-1' sync status should be OutOfSync, is OutOfSync"
time="2023-11-03T13:16:23Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
time="2023-11-03T13:16:23Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedPermissionWithScopedRepo (15.52s)
=== RUN   TestNamespacedPermissionDeniedWithScopedRepo
time="2023-11-03T13:16:23Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=efa98
time="2023-11-03T13:16:24Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-permission-with-scoped-repo-flszz\" deleted\n" duration=175.384043ms execID=efa98
time="2023-11-03T13:16:24Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=8c69c
time="2023-11-03T13:16:24Z" level=debug msg="No resources found\n" duration=461.38887ms execID=8c69c
time="2023-11-03T13:16:24Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=64869
time="2023-11-03T13:16:24Z" level=debug msg="No resources found\n" duration=231.274445ms execID=64869
time="2023-11-03T13:16:25Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:16:25Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc4NSwibmJmIjoxNjk5MDE3Mzg1LCJpYXQiOjE2OTkwMTczODUsImp0aSI6IjU0YzViZTg4LWIwNDctNDRkNy04YTNmLWVmYjlkZDEwYmYyMiJ9.ItX5JZryK1KXv9rRdZcus1geBk90hIVnBmIzj0A4pYA --insecure" dir= execID=78746
time="2023-11-03T13:16:25Z" level=debug duration=79.97612ms execID=78746
time="2023-11-03T13:16:25Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=dc917
time="2023-11-03T13:16:25Z" level=debug duration=2.097559ms execID=dc917
time="2023-11-03T13:16:25Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=3cd18
time="2023-11-03T13:16:25Z" level=debug duration=1.761086ms execID=3cd18
time="2023-11-03T13:16:25Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=eab3d
time="2023-11-03T13:16:25Z" level=debug duration=1.943885ms execID=eab3d
time="2023-11-03T13:16:25Z" level=info msg="pkill -9 gpg-agent" dir= execID=3aff8
time="2023-11-03T13:16:25Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=6689a
time="2023-11-03T13:16:25Z" level=debug duration=10.122005ms execID=6689a
time="2023-11-03T13:16:25Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=ff22c
time="2023-11-03T13:16:25Z" level=debug duration=33.707702ms execID=ff22c
time="2023-11-03T13:16:25Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=5a3ef
time="2023-11-03T13:16:25Z" level=debug duration=1.566753ms execID=5a3ef
time="2023-11-03T13:16:25Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=a4599
time="2023-11-03T13:16:25Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.650001ms execID=a4599
time="2023-11-03T13:16:25Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=c4bb5
time="2023-11-03T13:16:25Z" level=debug duration=30.927567ms execID=c4bb5
time="2023-11-03T13:16:25Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=9fc90
time="2023-11-03T13:16:25Z" level=debug duration=26.013199ms execID=9fc90
time="2023-11-03T13:16:25Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=95b78
time="2023-11-03T13:16:25Z" level=debug duration=3.995579ms execID=95b78
time="2023-11-03T13:16:25Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=e31a8
Handling connection for 9081
time="2023-11-03T13:16:25Z" level=debug duration=79.549344ms execID=e31a8
time="2023-11-03T13:16:25Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-permission-denied-with-scoped-ogfyb" dir= execID=fcd44
time="2023-11-03T13:16:26Z" level=debug msg="namespace/argocd-e2e--test-namespaced-permission-denied-with-scoped-ogfyb created\n" duration=163.170135ms execID=fcd44
time="2023-11-03T13:16:26Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-permission-denied-with-scoped-ogfyb e2e.argoproj.io=true" dir= execID=21268
time="2023-11-03T13:16:26Z" level=debug msg="namespace/argocd-e2e--test-namespaced-permission-denied-with-scoped-ogfyb labeled\n" duration=323.77697ms execID=21268
time="2023-11-03T13:16:26Z" level=info msg="clean state" duration=2.519886183s id=TestNamespacedPermissionDeniedWithScopedRepo-ogfyb name=TestNamespacedPermissionDeniedWithScopedRepo password=password username=admin
time="2023-11-03T13:16:27Z" level=info msg="../../dist/argocd proj create argo-project --dest *,* --source-namespaces argocd-e2e-external --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc4NSwibmJmIjoxNjk5MDE3Mzg1LCJpYXQiOjE2OTkwMTczODUsImp0aSI6IjU0YzViZTg4LWIwNDctNDRkNy04YTNmLWVmYjlkZDEwYmYyMiJ9.ItX5JZryK1KXv9rRdZcus1geBk90hIVnBmIzj0A4pYA --insecure" dir= execID=7b7b1
time="2023-11-03T13:16:27Z" level=debug duration=80.198004ms execID=7b7b1
time="2023-11-03T13:16:28Z" level=info msg="../../dist/argocd repo add http://argocd-e2e-server:9081/argo-e2e/testdata.git --project default --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc4NSwibmJmIjoxNjk5MDE3Mzg1LCJpYXQiOjE2OTkwMTczODUsImp0aSI6IjU0YzViZTg4LWIwNDctNDRkNy04YTNmLWVmYjlkZDEwYmYyMiJ9.ItX5JZryK1KXv9rRdZcus1geBk90hIVnBmIzj0A4pYA --insecure" dir= execID=82c13
time="2023-11-03T13:16:28Z" level=debug msg="Repository 'http://argocd-e2e-server:9081/argo-e2e/testdata.git' added\n" duration=243.599849ms execID=82c13
time="2023-11-03T13:16:29Z" level=info msg=patching jsonPatch="[{\"op\": \"add\", \"path\": \"/metadata/annotations\", \"value\": {\"argocd.argoproj.io/sync-options\": \"Prune=false\"}}]" path=two-nice-pods/pod-1.yaml
time="2023-11-03T13:16:29Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:16:29Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"name\":\"pod-1\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:16:29Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:16:29Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=87a96
time="2023-11-03T13:16:29Z" level=debug msg="diff --git a/two-nice-pods/pod-1.yaml b/two-nice-pods/pod-1.yaml\nindex 95187dd..69b3433 100644\n--- a/two-nice-pods/pod-1.yaml\n+++ b/two-nice-pods/pod-1.yaml\n@@ -1,12 +1,14 @@\n apiVersion: v1\n kind: Pod\n metadata:\n+  annotations:\n+    argocd.argoproj.io/sync-options: Prune=false\n   name: pod-1\n spec:\n   containers:\n-    - name: main\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      command:\n-        - \"true\"\n+  - command:\n+    - \"true\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n   restartPolicy: Never\n" duration=4.938275ms execID=87a96
time="2023-11-03T13:16:29Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=13f56
time="2023-11-03T13:16:29Z" level=debug msg="[master e6c6d7e] patch\n 1 file changed, 7 insertions(+), 5 deletions(-)\n" duration=12.129908ms execID=13f56
time="2023-11-03T13:16:29Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=c97d8
Handling connection for 9081
time="2023-11-03T13:16:29Z" level=debug duration=37.635018ms execID=c97d8
time="2023-11-03T13:16:29Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-permission-denied-with-scoped-repo --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path two-nice-pods --project argo-project --dest-namespace argocd-e2e--test-namespaced-permission-denied-with-scoped-ogfyb --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc4NSwibmJmIjoxNjk5MDE3Mzg1LCJpYXQiOjE2OTkwMTczODUsImp0aSI6IjU0YzViZTg4LWIwNDctNDRkNy04YTNmLWVmYjlkZDEwYmYyMiJ9.ItX5JZryK1KXv9rRdZcus1geBk90hIVnBmIzj0A4pYA --insecure" dir= execID=cc858
time="2023-11-03T13:16:30Z" level=debug duration=244.095066ms execID=cc858
time="2023-11-03T13:16:30Z" level=error msg="`../../dist/argocd app create argocd-e2e-external/test-namespaced-permission-denied-with-scoped-repo --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path two-nice-pods --project argo-project --dest-namespace argocd-e2e--test-namespaced-permission-denied-with-scoped-ogfyb --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc4NSwibmJmIjoxNjk5MDE3Mzg1LCJpYXQiOjE2OTkwMTczODUsImp0aSI6IjU0YzViZTg4LWIwNDctNDRkNy04YTNmLWVmYjlkZDEwYmYyMiJ9.ItX5JZryK1KXv9rRdZcus1geBk90hIVnBmIzj0A4pYA --insecure` failed exit status 20: time=\"2023-11-03T13:16:30Z\" level=fatal msg=\"rpc error: code = InvalidArgument desc = application spec for test-namespaced-permission-denied-with-scoped-repo is invalid: InvalidSpecError: application repo http://argocd-e2e-server:9081/argo-e2e/testdata.git is not permitted in project 'argo-project'\"" execID=cc858
time="2023-11-03T13:16:30Z" level=info msg="expectation succeeded: error ''"
time="2023-11-03T13:16:30Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedPermissionDeniedWithScopedRepo (6.16s)
=== RUN   TestNamespacedSyncOptionPruneFalse
time="2023-11-03T13:16:30Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=5a0d9
time="2023-11-03T13:16:30Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-permission-denied-with-scoped-ogfyb\" deleted\n" duration=302.043148ms execID=5a0d9
time="2023-11-03T13:16:30Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=41602
time="2023-11-03T13:16:30Z" level=debug msg="No resources found\n" duration=381.977189ms execID=41602
time="2023-11-03T13:16:30Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=55034
time="2023-11-03T13:16:31Z" level=debug msg="No resources found\n" duration=236.35575ms execID=55034
time="2023-11-03T13:16:31Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:16:31Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc5MSwibmJmIjoxNjk5MDE3MzkxLCJpYXQiOjE2OTkwMTczOTEsImp0aSI6ImVlMjFjMDRlLTllZmMtNDBjNC1hMGU2LTE1MzRmYTYyNDZkYiJ9.8-BYjh3oh9U0z5JepmCuHwS98GvaDxl7J8PzLTM8BMg --insecure" dir= execID=f8b4e
time="2023-11-03T13:16:32Z" level=debug duration=82.774124ms execID=f8b4e
time="2023-11-03T13:16:32Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=e2cb2
time="2023-11-03T13:16:32Z" level=debug duration=1.956648ms execID=e2cb2
time="2023-11-03T13:16:32Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=ec3a2
time="2023-11-03T13:16:32Z" level=debug duration=1.626991ms execID=ec3a2
time="2023-11-03T13:16:32Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=8bacb
time="2023-11-03T13:16:32Z" level=debug duration=1.512415ms execID=8bacb
time="2023-11-03T13:16:32Z" level=info msg="pkill -9 gpg-agent" dir= execID=b2e11
time="2023-11-03T13:16:32Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=e83f8
time="2023-11-03T13:16:32Z" level=debug duration=10.383922ms execID=e83f8
time="2023-11-03T13:16:32Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=d18b8
time="2023-11-03T13:16:32Z" level=debug duration=33.04368ms execID=d18b8
time="2023-11-03T13:16:32Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=4fa12
time="2023-11-03T13:16:32Z" level=debug duration=1.820225ms execID=4fa12
time="2023-11-03T13:16:32Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=a67b8
time="2023-11-03T13:16:32Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.843831ms execID=a67b8
time="2023-11-03T13:16:32Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=91692
time="2023-11-03T13:16:32Z" level=debug duration=34.500181ms execID=91692
time="2023-11-03T13:16:32Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=f6530
time="2023-11-03T13:16:32Z" level=debug duration=22.294332ms execID=f6530
time="2023-11-03T13:16:32Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=571ab
time="2023-11-03T13:16:32Z" level=debug duration=2.764886ms execID=571ab
time="2023-11-03T13:16:32Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=8904d
Handling connection for 9081
time="2023-11-03T13:16:32Z" level=debug duration=82.842798ms execID=8904d
time="2023-11-03T13:16:32Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-sync-option-prune-false-icusr" dir= execID=5735b
time="2023-11-03T13:16:32Z" level=debug msg="namespace/argocd-e2e--test-namespaced-sync-option-prune-false-icusr created\n" duration=170.26609ms execID=5735b
time="2023-11-03T13:16:32Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-sync-option-prune-false-icusr e2e.argoproj.io=true" dir= execID=05025
time="2023-11-03T13:16:32Z" level=debug msg="namespace/argocd-e2e--test-namespaced-sync-option-prune-false-icusr labeled\n" duration=299.048715ms execID=05025
time="2023-11-03T13:16:32Z" level=info msg="clean state" duration=2.641613623s id=TestNamespacedSyncOptionPruneFalse-icusr name=TestNamespacedSyncOptionPruneFalse password=password username=admin
time="2023-11-03T13:16:33Z" level=info msg=patching jsonPatch="[{\"op\": \"add\", \"path\": \"/metadata/annotations\", \"value\": {\"argocd.argoproj.io/sync-options\": \"Prune=false\"}}]" path=two-nice-pods/pod-1.yaml
time="2023-11-03T13:16:33Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:16:33Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"name\":\"pod-1\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:16:33Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:16:33Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=8ba66
time="2023-11-03T13:16:33Z" level=debug msg="diff --git a/two-nice-pods/pod-1.yaml b/two-nice-pods/pod-1.yaml\nindex 95187dd..69b3433 100644\n--- a/two-nice-pods/pod-1.yaml\n+++ b/two-nice-pods/pod-1.yaml\n@@ -1,12 +1,14 @@\n apiVersion: v1\n kind: Pod\n metadata:\n+  annotations:\n+    argocd.argoproj.io/sync-options: Prune=false\n   name: pod-1\n spec:\n   containers:\n-    - name: main\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      command:\n-        - \"true\"\n+  - command:\n+    - \"true\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n   restartPolicy: Never\n" duration=5.083917ms execID=8ba66
time="2023-11-03T13:16:33Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=09b10
time="2023-11-03T13:16:33Z" level=debug msg="[master 2df957c] patch\n 1 file changed, 7 insertions(+), 5 deletions(-)\n" duration=13.107101ms execID=09b10
time="2023-11-03T13:16:33Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=8685f
Handling connection for 9081
time="2023-11-03T13:16:33Z" level=debug duration=72.752357ms execID=8685f
time="2023-11-03T13:16:33Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-sync-option-prune-false --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path two-nice-pods --project default --dest-namespace argocd-e2e--test-namespaced-sync-option-prune-false-icusr --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc5MSwibmJmIjoxNjk5MDE3MzkxLCJpYXQiOjE2OTkwMTczOTEsImp0aSI6ImVlMjFjMDRlLTllZmMtNDBjNC1hMGU2LTE1MzRmYTYyNDZkYiJ9.8-BYjh3oh9U0z5JepmCuHwS98GvaDxl7J8PzLTM8BMg --insecure" dir= execID=8db84
time="2023-11-03T13:16:34Z" level=debug msg="application 'test-namespaced-sync-option-prune-false' created\n" duration=243.148717ms execID=8db84
time="2023-11-03T13:16:34Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:16:34Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-sync-option-prune-false --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc5MSwibmJmIjoxNjk5MDE3MzkxLCJpYXQiOjE2OTkwMTczOTEsImp0aSI6ImVlMjFjMDRlLTllZmMtNDBjNC1hMGU2LTE1MzRmYTYyNDZkYiJ9.8-BYjh3oh9U0z5JepmCuHwS98GvaDxl7J8PzLTM8BMg --insecure" dir= execID=8c959
time="2023-11-03T13:16:38Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:16:37+00:00                Pod  argocd-e2e--test-namespaced-sync-option-prune-false-icusr                 pod-1  OutOfSync  Missing              \n2023-11-03T13:16:37+00:00                Pod  argocd-e2e--test-namespaced-sync-option-prune-false-icusr                 pod-2  OutOfSync  Missing              \n2023-11-03T13:16:38+00:00                Pod  argocd-e2e--test-namespaced-sync-option-prune-false-icusr                 pod-1  OutOfSync  Missing              pod/pod-1 created\n2023-11-03T13:16:38+00:00                Pod  argocd-e2e--test-namespaced-sync-option-prune-false-icusr                 pod-2  OutOfSync  Missing              pod/pod-2 created\n2023-11-03T13:16:38+00:00                Pod  argocd-e2e--test-namespaced-sync-option-prune-false-icusr                 pod-1    Synced  Progressing              pod/pod-1 created\n2023-11-03T13:16:38+00:00                Pod  argocd-e2e--test-namespaced-sync-option-prune-false-icusr                 pod-2    Synced  Progressing              pod/pod-2 created\n\nName:               argocd-e2e-external/test-namespaced-sync-option-prune-false\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-sync-option-prune-false-icusr\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-sync-option-prune-false\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               two-nice-pods\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (2df957c)\nHealth Status:      Progressing\n\nOperation:          Sync\nSync Revision:      2df957cb95bdfdf8bc8c8d9d3a8b4fcdb92e8127\nPhase:              Succeeded\nStart:              2023-11-03 13:16:34 +0000 UTC\nFinished:           2023-11-03 13:16:38 +0000 UTC\nDuration:           4s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND  NAMESPACE                                                  NAME   STATUS  HEALTH       HOOK  MESSAGE\n       Pod   argocd-e2e--test-namespaced-sync-option-prune-false-icusr  pod-1  Synced  Progressing        pod/pod-1 created\n       Pod   argocd-e2e--test-namespaced-sync-option-prune-false-icusr  pod-2  Synced  Progressing        pod/pod-2 created\n" duration=4.527645286s execID=8c959
time="2023-11-03T13:16:38Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:16:38Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:16:38Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:16:38Z" level=info msg=deleting path=two-nice-pods/pod-1.yaml
time="2023-11-03T13:16:38Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=8cfb5
time="2023-11-03T13:16:38Z" level=debug msg="diff --git a/two-nice-pods/pod-1.yaml b/two-nice-pods/pod-1.yaml\ndeleted file mode 100644\nindex 69b3433..0000000\n--- a/two-nice-pods/pod-1.yaml\n+++ /dev/null\n@@ -1,14 +0,0 @@\n-apiVersion: v1\n-kind: Pod\n-metadata:\n-  annotations:\n-    argocd.argoproj.io/sync-options: Prune=false\n-  name: pod-1\n-spec:\n-  containers:\n-  - command:\n-    - \"true\"\n-    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-    imagePullPolicy: IfNotPresent\n-    name: main\n-  restartPolicy: Never\n" duration=3.39355ms execID=8cfb5
time="2023-11-03T13:16:38Z" level=info msg="git commit -am delete" dir=/tmp/argo-e2e/testdata.git execID=c2327
time="2023-11-03T13:16:38Z" level=debug msg="[master baaac41] delete\n 1 file changed, 14 deletions(-)\n delete mode 100644 two-nice-pods/pod-1.yaml\n" duration=7.424174ms execID=c2327
time="2023-11-03T13:16:38Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=a4d1b
Handling connection for 9081
time="2023-11-03T13:16:38Z" level=debug duration=41.383538ms execID=a4d1b
time="2023-11-03T13:16:38Z" level=info msg="../../dist/argocd app get argocd-e2e-external/test-namespaced-sync-option-prune-false --hard-refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc5MSwibmJmIjoxNjk5MDE3MzkxLCJpYXQiOjE2OTkwMTczOTEsImp0aSI6ImVlMjFjMDRlLTllZmMtNDBjNC1hMGU2LTE1MzRmYTYyNDZkYiJ9.8-BYjh3oh9U0z5JepmCuHwS98GvaDxl7J8PzLTM8BMg --insecure" dir= execID=888cb
time="2023-11-03T13:16:38Z" level=debug msg="Name:               argocd-e2e-external/test-namespaced-sync-option-prune-false\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-sync-option-prune-false-icusr\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-namespaced-sync-option-prune-false\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               two-nice-pods\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (baaac41)\nHealth Status:      Progressing\n\nGROUP  KIND  NAMESPACE                                                  NAME   STATUS     HEALTH       HOOK  MESSAGE\n       Pod   argocd-e2e--test-namespaced-sync-option-prune-false-icusr  pod-1  OutOfSync  Progressing        pod/pod-1 created\n       Pod   argocd-e2e--test-namespaced-sync-option-prune-false-icusr  pod-2  Synced     Progressing        pod/pod-2 created\n" duration=253.169271ms execID=888cb
time="2023-11-03T13:16:38Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:16:38Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-sync-option-prune-false --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc5MSwibmJmIjoxNjk5MDE3MzkxLCJpYXQiOjE2OTkwMTczOTEsImp0aSI6ImVlMjFjMDRlLTllZmMtNDBjNC1hMGU2LTE1MzRmYTYyNDZkYiJ9.8-BYjh3oh9U0z5JepmCuHwS98GvaDxl7J8PzLTM8BMg --insecure" dir= execID=647f6
time="2023-11-03T13:16:39Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                                 NAME    STATUS    HEALTH            HOOK  MESSAGE\n2023-11-03T13:16:39+00:00                Pod  argocd-e2e--test-namespaced-sync-option-prune-false-icusr                 pod-1  OutOfSync  Progressing              \n2023-11-03T13:16:39+00:00                Pod  argocd-e2e--test-namespaced-sync-option-prune-false-icusr                 pod-2    Synced   Progressing              \n2023-11-03T13:16:39+00:00                Pod  argocd-e2e--test-namespaced-sync-option-prune-false-icusr                 pod-1  OutOfSync  Progressing              ignored (no prune)\n2023-11-03T13:16:39+00:00                Pod  argocd-e2e--test-namespaced-sync-option-prune-false-icusr                 pod-2    Synced   Progressing              pod/pod-2 unchanged\n\nName:               argocd-e2e-external/test-namespaced-sync-option-prune-false\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-sync-option-prune-false-icusr\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-sync-option-prune-false\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               two-nice-pods\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (baaac41)\nHealth Status:      Progressing\n\nOperation:          Sync\nSync Revision:      baaac41d2172769d04c67f62965323b8750aa1b8\nPhase:              Succeeded\nStart:              2023-11-03 13:16:39 +0000 UTC\nFinished:           2023-11-03 13:16:39 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND  NAMESPACE                                                  NAME   STATUS     HEALTH       HOOK  MESSAGE\n       Pod   argocd-e2e--test-namespaced-sync-option-prune-false-icusr  pod-1  OutOfSync  Progressing        ignored (no prune)\n       Pod   argocd-e2e--test-namespaced-sync-option-prune-false-icusr  pod-2  Synced     Progressing        pod/pod-2 unchanged\n" duration=993.520992ms execID=647f6
time="2023-11-03T13:16:39Z" level=error msg="`../../dist/argocd app sync argocd-e2e-external/test-namespaced-sync-option-prune-false --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzc5MSwibmJmIjoxNjk5MDE3MzkxLCJpYXQiOjE2OTkwMTczOTEsImp0aSI6ImVlMjFjMDRlLTllZmMtNDBjNC1hMGU2LTE1MzRmYTYyNDZkYiJ9.8-BYjh3oh9U0z5JepmCuHwS98GvaDxl7J8PzLTM8BMg --insecure` failed exit status 1: time=\"2023-11-03T13:16:39Z\" level=fatal msg=\"1 resources require pruning\"" execID=647f6
time="2023-11-03T13:16:39Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:16:39Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:16:39Z" level=info msg="expectation succeeded: resource 'Pod/pod-1' sync status should be OutOfSync, is OutOfSync"
time="2023-11-03T13:16:39Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedSyncOptionPruneFalse (9.84s)
=== RUN   TestNamespacedSyncOptionValidateFalse
time="2023-11-03T13:16:39Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=15903
time="2023-11-03T13:16:40Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-sync-option-prune-false-icusr\" deleted\n" duration=262.818827ms execID=15903
time="2023-11-03T13:16:40Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=16db2
time="2023-11-03T13:16:40Z" level=debug msg="No resources found\n" duration=523.472598ms execID=16db2
time="2023-11-03T13:16:40Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=f3e31
time="2023-11-03T13:16:41Z" level=debug msg="No resources found\n" duration=292.403762ms execID=f3e31
time="2023-11-03T13:16:41Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:16:41Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzgwMSwibmJmIjoxNjk5MDE3NDAxLCJpYXQiOjE2OTkwMTc0MDEsImp0aSI6ImFlMjdkYTJkLTlmZTMtNGUyMS1hNzRlLWQ3ZjJhODRiMjlhMCJ9.mEDXnrgtHS0aBkQmFeWvgQ5XKwBLPFWwazbzJRVaQ9g --insecure" dir= execID=f30c0
time="2023-11-03T13:16:41Z" level=debug duration=94.719654ms execID=f30c0
time="2023-11-03T13:16:42Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=402e8
time="2023-11-03T13:16:42Z" level=debug duration=2.056081ms execID=402e8
time="2023-11-03T13:16:42Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=b9a83
time="2023-11-03T13:16:42Z" level=debug duration=1.820211ms execID=b9a83
time="2023-11-03T13:16:42Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=074f7
time="2023-11-03T13:16:42Z" level=debug duration=1.488333ms execID=074f7
time="2023-11-03T13:16:42Z" level=info msg="pkill -9 gpg-agent" dir= execID=a17e1
time="2023-11-03T13:16:42Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=1865f
time="2023-11-03T13:16:42Z" level=debug duration=9.648143ms execID=1865f
time="2023-11-03T13:16:42Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=7d188
time="2023-11-03T13:16:42Z" level=debug duration=38.603823ms execID=7d188
time="2023-11-03T13:16:42Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=77f93
time="2023-11-03T13:16:42Z" level=debug duration=1.759909ms execID=77f93
time="2023-11-03T13:16:42Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=34fee
time="2023-11-03T13:16:42Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.930793ms execID=34fee
time="2023-11-03T13:16:42Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=ccd9c
time="2023-11-03T13:16:42Z" level=debug duration=26.488321ms execID=ccd9c
time="2023-11-03T13:16:42Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=7a79f
time="2023-11-03T13:16:42Z" level=debug duration=21.783319ms execID=7a79f
time="2023-11-03T13:16:42Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=88614
time="2023-11-03T13:16:42Z" level=debug duration=2.277346ms execID=88614
time="2023-11-03T13:16:42Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=5496c
Handling connection for 9081
time="2023-11-03T13:16:42Z" level=debug duration=76.848904ms execID=5496c
time="2023-11-03T13:16:42Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-sync-option-validate-false-biwrz" dir= execID=15b6a
time="2023-11-03T13:16:42Z" level=debug msg="namespace/argocd-e2e--test-namespaced-sync-option-validate-false-biwrz created\n" duration=163.488598ms execID=15b6a
time="2023-11-03T13:16:42Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-sync-option-validate-false-biwrz e2e.argoproj.io=true" dir= execID=44af3
time="2023-11-03T13:16:42Z" level=debug msg="namespace/argocd-e2e--test-namespaced-sync-option-validate-false-biwrz labeled\n" duration=269.483463ms execID=44af3
time="2023-11-03T13:16:42Z" level=info msg="clean state" duration=2.701704549s id=TestNamespacedSyncOptionValidateFalse-biwrz name=TestNamespacedSyncOptionValidateFalse password=password username=admin
time="2023-11-03T13:16:43Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-sync-option-validate-false --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path crd-validation --project default --dest-namespace argocd-e2e--test-namespaced-sync-option-validate-false-biwrz --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzgwMSwibmJmIjoxNjk5MDE3NDAxLCJpYXQiOjE2OTkwMTc0MDEsImp0aSI6ImFlMjdkYTJkLTlmZTMtNGUyMS1hNzRlLWQ3ZjJhODRiMjlhMCJ9.mEDXnrgtHS0aBkQmFeWvgQ5XKwBLPFWwazbzJRVaQ9g --insecure" dir= execID=cbddf
time="2023-11-03T13:16:43Z" level=debug msg="application 'test-namespaced-sync-option-validate-false' created\n" duration=206.213516ms execID=cbddf
time="2023-11-03T13:16:43Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:16:43Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:16:43Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-sync-option-validate-false --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzgwMSwibmJmIjoxNjk5MDE3NDAxLCJpYXQiOjE2OTkwMTc0MDEsImp0aSI6ImFlMjdkYTJkLTlmZTMtNGUyMS1hNzRlLWQ3ZjJhODRiMjlhMCJ9.mEDXnrgtHS0aBkQmFeWvgQ5XKwBLPFWwazbzJRVaQ9g --insecure" dir= execID=216a8
time="2023-11-03T13:16:48Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:16:48+00:00   apps  Deployment  argocd-e2e--test-namespaced-sync-option-validate-false-biwrz      nginx-deployment  OutOfSync  Missing              \n\nName:               argocd-e2e-external/test-namespaced-sync-option-validate-false\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-sync-option-validate-false-biwrz\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-sync-option-validate-false\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               crd-validation\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (458b83e)\nHealth Status:      Missing\n\nOperation:          Sync\nSync Revision:      458b83e5392c791e9c074f140eec3a01590881f1\nPhase:              Failed\nStart:              2023-11-03 13:16:43 +0000 UTC\nFinished:           2023-11-03 13:16:48 +0000 UTC\nDuration:           5s\nMessage:            one or more objects failed to apply, reason: Deployment in version \"v1\" cannot be handled as a Deployment: json: cannot unmarshal string into Go struct field ContainerPort.spec.template.spec.containers.ports.containerPort of type int32\n\nGROUP  KIND        NAMESPACE                                                     NAME              STATUS     HEALTH   HOOK  MESSAGE\napps   Deployment  argocd-e2e--test-namespaced-sync-option-validate-false-biwrz  nginx-deployment  OutOfSync  Missing        Deployment in version \"v1\" cannot be handled as a Deployment: json: cannot unmarshal string into Go struct field ContainerPort.spec.template.spec.containers.ports.containerPort of type int32\n" duration=4.994818217s execID=216a8
time="2023-11-03T13:16:48Z" level=error msg="`../../dist/argocd app sync argocd-e2e-external/test-namespaced-sync-option-validate-false --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzgwMSwibmJmIjoxNjk5MDE3NDAxLCJpYXQiOjE2OTkwMTc0MDEsImp0aSI6ImFlMjdkYTJkLTlmZTMtNGUyMS1hNzRlLWQ3ZjJhODRiMjlhMCJ9.mEDXnrgtHS0aBkQmFeWvgQ5XKwBLPFWwazbzJRVaQ9g --insecure` failed exit status 1: time=\"2023-11-03T13:16:48Z\" level=fatal msg=\"Operation has completed with phase: Failed\"" execID=216a8
    app_management_ns_test.go:1359: failed expectation: output does not contain 'error validating data'
--- FAIL: TestNamespacedSyncOptionValidateFalse (8.92s)
=== RUN   TestNamespacedCompareOptionIgnoreExtraneous
time="2023-11-03T13:16:48Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=72035
time="2023-11-03T13:16:49Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-sync-option-validate-false-biwrz\" deleted\n" duration=245.188406ms execID=72035
time="2023-11-03T13:16:49Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=3a4d8
time="2023-11-03T13:16:49Z" level=debug msg="No resources found\n" duration=456.382828ms execID=3a4d8
time="2023-11-03T13:16:49Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=e6114
time="2023-11-03T13:16:49Z" level=debug msg="No resources found\n" duration=256.57449ms execID=e6114
time="2023-11-03T13:16:50Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:16:50Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzgxMCwibmJmIjoxNjk5MDE3NDEwLCJpYXQiOjE2OTkwMTc0MTAsImp0aSI6ImM1ZjJhNjc3LWNiNTItNDdmMy04NDIyLTllMjlkMjhkODIyYSJ9.gPGggeou7DtD7m_m1sva-ab7zeISDbzpPOLHOxEKaT4 --insecure" dir= execID=41a7b
time="2023-11-03T13:16:50Z" level=debug duration=67.206088ms execID=41a7b
time="2023-11-03T13:16:50Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=e9e83
time="2023-11-03T13:16:50Z" level=debug duration=1.930147ms execID=e9e83
time="2023-11-03T13:16:50Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=4f621
time="2023-11-03T13:16:50Z" level=debug duration=1.607827ms execID=4f621
time="2023-11-03T13:16:50Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=2e755
time="2023-11-03T13:16:50Z" level=debug duration=1.499099ms execID=2e755
time="2023-11-03T13:16:50Z" level=info msg="pkill -9 gpg-agent" dir= execID=47464
time="2023-11-03T13:16:50Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=2f62a
time="2023-11-03T13:16:50Z" level=debug duration=9.91126ms execID=2f62a
time="2023-11-03T13:16:50Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=f5723
time="2023-11-03T13:16:51Z" level=debug duration=33.567866ms execID=f5723
time="2023-11-03T13:16:51Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=5c156
time="2023-11-03T13:16:51Z" level=debug duration=1.741943ms execID=5c156
time="2023-11-03T13:16:51Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=aa299
time="2023-11-03T13:16:51Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=11.829837ms execID=aa299
time="2023-11-03T13:16:51Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=3d16c
time="2023-11-03T13:16:51Z" level=debug duration=28.167581ms execID=3d16c
time="2023-11-03T13:16:51Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=c069f
time="2023-11-03T13:16:51Z" level=debug duration=20.494522ms execID=c069f
time="2023-11-03T13:16:51Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=00655
time="2023-11-03T13:16:51Z" level=debug duration=2.245456ms execID=00655
time="2023-11-03T13:16:51Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=3d7f7
Handling connection for 9081
time="2023-11-03T13:16:51Z" level=debug duration=82.145503ms execID=3d7f7
time="2023-11-03T13:16:51Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-compare-option-ignore-extrane-utmkd" dir= execID=4f597
time="2023-11-03T13:16:51Z" level=debug msg="namespace/argocd-e2e--test-namespaced-compare-option-ignore-extrane-utmkd created\n" duration=111.880712ms execID=4f597
time="2023-11-03T13:16:51Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-compare-option-ignore-extrane-utmkd e2e.argoproj.io=true" dir= execID=5b8d9
time="2023-11-03T13:16:51Z" level=debug msg="namespace/argocd-e2e--test-namespaced-compare-option-ignore-extrane-utmkd labeled\n" duration=278.638421ms execID=5b8d9
time="2023-11-03T13:16:51Z" level=info msg="clean state" duration=2.707710468s id=TestNamespacedCompareOptionIgnoreExtraneous-utmkd name=TestNamespacedCompareOptionIgnoreExtraneous password=password username=admin
time="2023-11-03T13:16:52Z" level=info msg=patching jsonPatch="[{\"op\": \"add\", \"path\": \"/metadata/annotations\", \"value\": {\"argocd.argoproj.io/compare-options\": \"IgnoreExtraneous\"}}]" path=two-nice-pods/pod-1.yaml
time="2023-11-03T13:16:52Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:16:52Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"name\":\"pod-1\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:16:52Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:16:52Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=f8380
time="2023-11-03T13:16:52Z" level=debug msg="diff --git a/two-nice-pods/pod-1.yaml b/two-nice-pods/pod-1.yaml\nindex 95187dd..f7dbeb0 100644\n--- a/two-nice-pods/pod-1.yaml\n+++ b/two-nice-pods/pod-1.yaml\n@@ -1,12 +1,14 @@\n apiVersion: v1\n kind: Pod\n metadata:\n+  annotations:\n+    argocd.argoproj.io/compare-options: IgnoreExtraneous\n   name: pod-1\n spec:\n   containers:\n-    - name: main\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      command:\n-        - \"true\"\n+  - command:\n+    - \"true\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n   restartPolicy: Never\n" duration=3.824433ms execID=f8380
time="2023-11-03T13:16:52Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=702b4
time="2023-11-03T13:16:52Z" level=debug msg="[master fd6f075] patch\n 1 file changed, 7 insertions(+), 5 deletions(-)\n" duration=8.930035ms execID=702b4
time="2023-11-03T13:16:52Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=8817a
Handling connection for 9081
time="2023-11-03T13:16:52Z" level=debug duration=39.961151ms execID=8817a
time="2023-11-03T13:16:52Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-compare-option-ignore-extraneous --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path two-nice-pods --project default --dest-namespace argocd-e2e--test-namespaced-compare-option-ignore-extrane-utmkd --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzgxMCwibmJmIjoxNjk5MDE3NDEwLCJpYXQiOjE2OTkwMTc0MTAsImp0aSI6ImM1ZjJhNjc3LWNiNTItNDdmMy04NDIyLTllMjlkMjhkODIyYSJ9.gPGggeou7DtD7m_m1sva-ab7zeISDbzpPOLHOxEKaT4 --insecure" dir= execID=f34ee
time="2023-11-03T13:16:52Z" level=debug msg="application 'test-namespaced-compare-option-ignore-extraneous' created\n" duration=222.504355ms execID=f34ee
time="2023-11-03T13:16:52Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:16:52Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-compare-option-ignore-extraneous --timeout 30 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzgxMCwibmJmIjoxNjk5MDE3NDEwLCJpYXQiOjE2OTkwMTc0MTAsImp0aSI6ImM1ZjJhNjc3LWNiNTItNDdmMy04NDIyLTllMjlkMjhkODIyYSJ9.gPGggeou7DtD7m_m1sva-ab7zeISDbzpPOLHOxEKaT4 --insecure" dir= execID=097b2
time="2023-11-03T13:16:58Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:16:57+00:00                Pod  argocd-e2e--test-namespaced-compare-option-ignore-extrane-utmkd                 pod-1  OutOfSync  Missing              \n2023-11-03T13:16:57+00:00                Pod  argocd-e2e--test-namespaced-compare-option-ignore-extrane-utmkd                 pod-2  OutOfSync  Missing              \n2023-11-03T13:16:58+00:00                Pod  argocd-e2e--test-namespaced-compare-option-ignore-extrane-utmkd                 pod-1  OutOfSync  Missing              pod/pod-1 created\n2023-11-03T13:16:58+00:00                Pod  argocd-e2e--test-namespaced-compare-option-ignore-extrane-utmkd                 pod-2  OutOfSync  Missing              pod/pod-2 created\n2023-11-03T13:16:58+00:00                Pod  argocd-e2e--test-namespaced-compare-option-ignore-extrane-utmkd                 pod-2    Synced  Progressing              pod/pod-2 created\n2023-11-03T13:16:58+00:00                Pod  argocd-e2e--test-namespaced-compare-option-ignore-extrane-utmkd                 pod-1    Synced  Progressing              pod/pod-1 created\n\nName:               argocd-e2e-external/test-namespaced-compare-option-ignore-extraneous\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-compare-option-ignore-extrane-utmkd\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-compare-option-ignore-extraneous\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               two-nice-pods\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (fd6f075)\nHealth Status:      Progressing\n\nOperation:          Sync\nSync Revision:      fd6f075303f61db391844646c4cab61101d95da1\nPhase:              Succeeded\nStart:              2023-11-03 13:16:52 +0000 UTC\nFinished:           2023-11-03 13:16:58 +0000 UTC\nDuration:           6s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND  NAMESPACE                                                        NAME   STATUS  HEALTH       HOOK  MESSAGE\n       Pod   argocd-e2e--test-namespaced-compare-option-ignore-extrane-utmkd  pod-1  Synced  Progressing        pod/pod-1 created\n       Pod   argocd-e2e--test-namespaced-compare-option-ignore-extrane-utmkd  pod-2  Synced  Progressing        pod/pod-2 created\n" duration=5.402893549s execID=097b2
time="2023-11-03T13:16:58Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:16:58Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:16:58Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:16:58Z" level=info msg=deleting path=two-nice-pods/pod-1.yaml
time="2023-11-03T13:16:58Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=54303
time="2023-11-03T13:16:58Z" level=debug msg="diff --git a/two-nice-pods/pod-1.yaml b/two-nice-pods/pod-1.yaml\ndeleted file mode 100644\nindex f7dbeb0..0000000\n--- a/two-nice-pods/pod-1.yaml\n+++ /dev/null\n@@ -1,14 +0,0 @@\n-apiVersion: v1\n-kind: Pod\n-metadata:\n-  annotations:\n-    argocd.argoproj.io/compare-options: IgnoreExtraneous\n-  name: pod-1\n-spec:\n-  containers:\n-  - command:\n-    - \"true\"\n-    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-    imagePullPolicy: IfNotPresent\n-    name: main\n-  restartPolicy: Never\n" duration=3.287786ms execID=54303
time="2023-11-03T13:16:58Z" level=info msg="git commit -am delete" dir=/tmp/argo-e2e/testdata.git execID=288e0
time="2023-11-03T13:16:58Z" level=debug msg="[master 6a3c294] delete\n 1 file changed, 14 deletions(-)\n delete mode 100644 two-nice-pods/pod-1.yaml\n" duration=8.379133ms execID=288e0
time="2023-11-03T13:16:58Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=88636
Handling connection for 9081
time="2023-11-03T13:16:58Z" level=debug duration=37.745017ms execID=88636
time="2023-11-03T13:16:58Z" level=info msg="../../dist/argocd app get argocd-e2e-external/test-namespaced-compare-option-ignore-extraneous --hard-refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzgxMCwibmJmIjoxNjk5MDE3NDEwLCJpYXQiOjE2OTkwMTc0MTAsImp0aSI6ImM1ZjJhNjc3LWNiNTItNDdmMy04NDIyLTllMjlkMjhkODIyYSJ9.gPGggeou7DtD7m_m1sva-ab7zeISDbzpPOLHOxEKaT4 --insecure" dir= execID=f39f2
time="2023-11-03T13:16:58Z" level=debug msg="Name:               argocd-e2e-external/test-namespaced-compare-option-ignore-extraneous\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-compare-option-ignore-extrane-utmkd\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-namespaced-compare-option-ignore-extraneous\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               two-nice-pods\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (6a3c294)\nHealth Status:      Progressing\n\nGROUP  KIND  NAMESPACE                                                        NAME   STATUS     HEALTH       HOOK  MESSAGE\n       Pod   argocd-e2e--test-namespaced-compare-option-ignore-extrane-utmkd  pod-1  OutOfSync  Progressing        pod/pod-1 created\n       Pod   argocd-e2e--test-namespaced-compare-option-ignore-extrane-utmkd  pod-2  Synced     Progressing        pod/pod-2 created\n" duration=236.695776ms execID=f39f2
time="2023-11-03T13:16:58Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:16:58Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:16:58Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-compare-option-ignore-extraneous --timeout 30 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzgxMCwibmJmIjoxNjk5MDE3NDEwLCJpYXQiOjE2OTkwMTc0MTAsImp0aSI6ImM1ZjJhNjc3LWNiNTItNDdmMy04NDIyLTllMjlkMjhkODIyYSJ9.gPGggeou7DtD7m_m1sva-ab7zeISDbzpPOLHOxEKaT4 --insecure" dir= execID=65efc
time="2023-11-03T13:16:59Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                                       NAME    STATUS    HEALTH            HOOK  MESSAGE\n2023-11-03T13:16:58+00:00                Pod  argocd-e2e--test-namespaced-compare-option-ignore-extrane-utmkd                 pod-1  OutOfSync  Progressing              \n2023-11-03T13:16:58+00:00                Pod  argocd-e2e--test-namespaced-compare-option-ignore-extrane-utmkd                 pod-2    Synced   Progressing              \n2023-11-03T13:16:59+00:00                Pod  argocd-e2e--test-namespaced-compare-option-ignore-extrane-utmkd                 pod-1  OutOfSync  Progressing              ignored (requires pruning)\n2023-11-03T13:16:59+00:00                Pod  argocd-e2e--test-namespaced-compare-option-ignore-extrane-utmkd                 pod-2    Synced   Progressing              pod/pod-2 unchanged\n\nName:               argocd-e2e-external/test-namespaced-compare-option-ignore-extraneous\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-compare-option-ignore-extrane-utmkd\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-compare-option-ignore-extraneous\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               two-nice-pods\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (6a3c294)\nHealth Status:      Progressing\n\nOperation:          Sync\nSync Revision:      6a3c29426af14ee93300bb557ca86c92bae85621\nPhase:              Succeeded\nStart:              2023-11-03 13:16:58 +0000 UTC\nFinished:           2023-11-03 13:16:59 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND  NAMESPACE                                                        NAME   STATUS     HEALTH       HOOK  MESSAGE\n       Pod   argocd-e2e--test-namespaced-compare-option-ignore-extrane-utmkd  pod-1  OutOfSync  Progressing        ignored (requires pruning)\n       Pod   argocd-e2e--test-namespaced-compare-option-ignore-extrane-utmkd  pod-2  Synced     Progressing        pod/pod-2 unchanged\n" duration=695.679923ms execID=65efc
time="2023-11-03T13:16:59Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:16:59Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:16:59Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:16:59Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedCompareOptionIgnoreExtraneous (10.41s)
=== RUN   TestNamespacedSelfManagedApps
time="2023-11-03T13:16:59Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=710ec
time="2023-11-03T13:16:59Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-compare-option-ignore-extrane-utmkd\" deleted\n" duration=246.098552ms execID=710ec
time="2023-11-03T13:16:59Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=60a46
time="2023-11-03T13:16:59Z" level=debug msg="No resources found\n" duration=352.83595ms execID=60a46
time="2023-11-03T13:16:59Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=c9763
time="2023-11-03T13:17:00Z" level=debug msg="No resources found\n" duration=252.059227ms execID=c9763
time="2023-11-03T13:17:00Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:17:00Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzgyMCwibmJmIjoxNjk5MDE3NDIwLCJpYXQiOjE2OTkwMTc0MjAsImp0aSI6IjJmOTVjNzk4LTRkYzUtNDMyNy1hZTE1LTZlMmFiMzY4N2NjNSJ9._Xf9iyOSzB5HAEGgIXEWykR_hkPCEYqeh1gt3s8QTyI --insecure" dir= execID=6da8f
time="2023-11-03T13:17:00Z" level=debug duration=71.851014ms execID=6da8f
time="2023-11-03T13:17:00Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=5e0ec
time="2023-11-03T13:17:00Z" level=debug duration=1.986958ms execID=5e0ec
time="2023-11-03T13:17:00Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=f9fa2
time="2023-11-03T13:17:00Z" level=debug duration=1.474223ms execID=f9fa2
time="2023-11-03T13:17:00Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=6029e
time="2023-11-03T13:17:00Z" level=debug duration=1.555262ms execID=6029e
time="2023-11-03T13:17:00Z" level=info msg="pkill -9 gpg-agent" dir= execID=dacc8
time="2023-11-03T13:17:00Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=7569b
time="2023-11-03T13:17:00Z" level=debug duration=10.738756ms execID=7569b
time="2023-11-03T13:17:00Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=c305d
time="2023-11-03T13:17:00Z" level=debug duration=59.93477ms execID=c305d
time="2023-11-03T13:17:00Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=e0de4
time="2023-11-03T13:17:00Z" level=debug duration=1.858907ms execID=e0de4
time="2023-11-03T13:17:00Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=02355
time="2023-11-03T13:17:00Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.041111ms execID=02355
time="2023-11-03T13:17:00Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=57a7c
time="2023-11-03T13:17:00Z" level=debug duration=27.54618ms execID=57a7c
time="2023-11-03T13:17:00Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=66b48
time="2023-11-03T13:17:00Z" level=debug duration=21.873711ms execID=66b48
time="2023-11-03T13:17:00Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=0f7dc
time="2023-11-03T13:17:01Z" level=debug duration=2.118134ms execID=0f7dc
time="2023-11-03T13:17:01Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=aad8f
Handling connection for 9081
time="2023-11-03T13:17:01Z" level=debug duration=82.310086ms execID=aad8f
time="2023-11-03T13:17:01Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-self-managed-apps-skveq" dir= execID=872e6
time="2023-11-03T13:17:01Z" level=debug msg="namespace/argocd-e2e--test-namespaced-self-managed-apps-skveq created\n" duration=143.757907ms execID=872e6
time="2023-11-03T13:17:01Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-self-managed-apps-skveq e2e.argoproj.io=true" dir= execID=6a3de
time="2023-11-03T13:17:01Z" level=debug msg="namespace/argocd-e2e--test-namespaced-self-managed-apps-skveq labeled\n" duration=200.615875ms execID=6a3de
time="2023-11-03T13:17:01Z" level=info msg="clean state" duration=2.17520256s id=TestNamespacedSelfManagedApps-skveq name=TestNamespacedSelfManagedApps password=password username=admin
time="2023-11-03T13:17:02Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/spec/source/repoURL\", \"value\": \"http://argocd-e2e-server:9081/argo-e2e/testdata.git\"}]" path=self-managed-app/resources.yaml
time="2023-11-03T13:17:02Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:17:02Z" level=info msg=JSON bytes="{\"apiVersion\":\"argoproj.io/v1alpha1\",\"kind\":\"Application\",\"metadata\":{\"name\":\"test-self-managed-apps\"},\"spec\":{\"destination\":{\"namespace\":\"argocd-e2e\",\"server\":\"https://kubernetes.default.svc\"},\"project\":\"default\",\"source\":{\"path\":\"self-managed-app\",\"repoURL\":\"https://github.com/argoproj/argo-cd.git\",\"targetRevision\":\"HEAD\"}}}"
time="2023-11-03T13:17:02Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:17:02Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=8465d
time="2023-11-03T13:17:02Z" level=debug msg="diff --git a/self-managed-app/resources.yaml b/self-managed-app/resources.yaml\nindex baaf0d6..f20f82d 100644\n--- a/self-managed-app/resources.yaml\n+++ b/self-managed-app/resources.yaml\n@@ -3,13 +3,11 @@ kind: Application\n metadata:\n   name: test-self-managed-apps\n spec:\n+  destination:\n+    namespace: argocd-e2e\n+    server: https://kubernetes.default.svc\n   project: default\n-\n   source:\n-    repoURL: https://github.com/argoproj/argo-cd.git\n-    targetRevision: HEAD\n     path: self-managed-app\n-\n-  destination:\n-    server: https://kubernetes.default.svc\n-    namespace: argocd-e2e\n+    repoURL: http://argocd-e2e-server:9081/argo-e2e/testdata.git\n+    targetRevision: HEAD\n" duration=4.915727ms execID=8465d
time="2023-11-03T13:17:02Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=d9db6
time="2023-11-03T13:17:02Z" level=debug msg="[master 681c1d0] patch\n 1 file changed, 5 insertions(+), 7 deletions(-)\n" duration=11.357347ms execID=d9db6
time="2023-11-03T13:17:02Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=87800
Handling connection for 9081
time="2023-11-03T13:17:02Z" level=debug duration=39.868168ms execID=87800
time="2023-11-03T13:17:02Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-self-managed-apps --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path self-managed-app --project default --dest-namespace argocd-e2e--test-namespaced-self-managed-apps-skveq --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzgyMCwibmJmIjoxNjk5MDE3NDIwLCJpYXQiOjE2OTkwMTc0MjAsImp0aSI6IjJmOTVjNzk4LTRkYzUtNDMyNy1hZTE1LTZlMmFiMzY4N2NjNSJ9._Xf9iyOSzB5HAEGgIXEWykR_hkPCEYqeh1gt3s8QTyI --insecure" dir= execID=dcdb0
time="2023-11-03T13:17:02Z" level=debug msg="application 'test-namespaced-self-managed-apps' created\n" duration=223.05043ms execID=dcdb0
time="2023-11-03T13:17:02Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:17:02Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-self-managed-apps --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzgyMCwibmJmIjoxNjk5MDE3NDIwLCJpYXQiOjE2OTkwMTc0MjAsImp0aSI6IjJmOTVjNzk4LTRkYzUtNDMyNy1hZTE1LTZlMmFiMzY4N2NjNSJ9._Xf9iyOSzB5HAEGgIXEWykR_hkPCEYqeh1gt3s8QTyI --insecure" dir= execID=dba73
time="2023-11-03T13:17:07Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:17:07+00:00  argoproj.io  Application  argocd-e2e--test-namespaced-self-managed-apps-skveq  test-self-managed-apps  OutOfSync  Missing              \n2023-11-03T13:17:07+00:00  argoproj.io  Application  argocd-e2e--test-namespaced-self-managed-apps-skveq  test-self-managed-apps  OutOfSync  Missing              application.argoproj.io/test-self-managed-apps created\n2023-11-03T13:17:07+00:00  argoproj.io  Application  argocd-e2e--test-namespaced-self-managed-apps-skveq  test-self-managed-apps    Synced  Missing              application.argoproj.io/test-self-managed-apps created\n\nName:               argocd-e2e-external/test-namespaced-self-managed-apps\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-self-managed-apps-skveq\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-self-managed-apps\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               self-managed-app\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (681c1d0)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      681c1d09f7623d6dbfaf7bbe9449804ddb578ebc\nPhase:              Succeeded\nStart:              2023-11-03 13:17:02 +0000 UTC\nFinished:           2023-11-03 13:17:07 +0000 UTC\nDuration:           5s\nMessage:            successfully synced (all tasks run)\n\nGROUP        KIND         NAMESPACE                                            NAME                    STATUS  HEALTH  HOOK  MESSAGE\nargoproj.io  Application  argocd-e2e--test-namespaced-self-managed-apps-skveq  test-self-managed-apps  Synced                application.argoproj.io/test-self-managed-apps created\n" duration=5.041247779s execID=dba73
time="2023-11-03T13:17:07Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:17:07Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:17:07Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:17:10Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedSelfManagedApps (11.53s)
=== RUN   TestNamespacedExcludedResource
time="2023-11-03T13:17:10Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=3a776
time="2023-11-03T13:17:11Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-self-managed-apps-skveq\" deleted\n" duration=234.270837ms execID=3a776
time="2023-11-03T13:17:11Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=e2252
time="2023-11-03T13:17:11Z" level=debug msg="No resources found\n" duration=448.398787ms execID=e2252
time="2023-11-03T13:17:11Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=7dda5
time="2023-11-03T13:17:11Z" level=debug msg="No resources found\n" duration=323.279967ms execID=7dda5
time="2023-11-03T13:17:12Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:17:12Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzgzMiwibmJmIjoxNjk5MDE3NDMyLCJpYXQiOjE2OTkwMTc0MzIsImp0aSI6IjM2MmY2MzdjLTgxNDQtNGQ0ZS1iNTgyLTFmNmVkYTEzNTFlNiJ9.SdQ9naMJPOeqa6EY0DjvEuJROhXdc2ETzf16adLB-EY --insecure" dir= execID=addc8
time="2023-11-03T13:17:12Z" level=debug duration=80.552815ms execID=addc8
time="2023-11-03T13:17:12Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=90729
time="2023-11-03T13:17:12Z" level=debug duration=2.313454ms execID=90729
time="2023-11-03T13:17:12Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=e5d42
time="2023-11-03T13:17:12Z" level=debug duration=1.734668ms execID=e5d42
time="2023-11-03T13:17:12Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=379ac
time="2023-11-03T13:17:12Z" level=debug duration=1.44451ms execID=379ac
time="2023-11-03T13:17:12Z" level=info msg="pkill -9 gpg-agent" dir= execID=c2869
time="2023-11-03T13:17:12Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=ceeb7
time="2023-11-03T13:17:12Z" level=debug duration=9.753041ms execID=ceeb7
time="2023-11-03T13:17:12Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=c2d4d
time="2023-11-03T13:17:12Z" level=debug duration=75.437843ms execID=c2d4d
time="2023-11-03T13:17:12Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=91a4c
time="2023-11-03T13:17:12Z" level=debug duration=1.915556ms execID=91a4c
time="2023-11-03T13:17:12Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=ee052
time="2023-11-03T13:17:12Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.896689ms execID=ee052
time="2023-11-03T13:17:12Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=00902
time="2023-11-03T13:17:12Z" level=debug duration=29.020745ms execID=00902
time="2023-11-03T13:17:12Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=ed65c
time="2023-11-03T13:17:13Z" level=debug duration=20.199625ms execID=ed65c
time="2023-11-03T13:17:13Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=2753b
time="2023-11-03T13:17:13Z" level=debug duration=2.859958ms execID=2753b
time="2023-11-03T13:17:13Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=a4f6e
Handling connection for 9081
time="2023-11-03T13:17:13Z" level=debug duration=73.807511ms execID=a4f6e
time="2023-11-03T13:17:13Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-excluded-resource-lswta" dir= execID=e04f4
time="2023-11-03T13:17:13Z" level=debug msg="namespace/argocd-e2e--test-namespaced-excluded-resource-lswta created\n" duration=145.3671ms execID=e04f4
time="2023-11-03T13:17:13Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-excluded-resource-lswta e2e.argoproj.io=true" dir= execID=1a71c
time="2023-11-03T13:17:13Z" level=debug msg="namespace/argocd-e2e--test-namespaced-excluded-resource-lswta labeled\n" duration=220.811267ms execID=1a71c
time="2023-11-03T13:17:13Z" level=info msg="clean state" duration=2.668526779s id=TestNamespacedExcludedResource-lswta name=TestNamespacedExcludedResource password=password username=admin
time="2023-11-03T13:17:14Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-excluded-resource --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-namespaced-excluded-resource-lswta --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzgzMiwibmJmIjoxNjk5MDE3NDMyLCJpYXQiOjE2OTkwMTc0MzIsImp0aSI6IjM2MmY2MzdjLTgxNDQtNGQ0ZS1iNTgyLTFmNmVkYTEzNTFlNiJ9.SdQ9naMJPOeqa6EY0DjvEuJROhXdc2ETzf16adLB-EY --insecure" dir= execID=01237
time="2023-11-03T13:17:14Z" level=debug msg="application 'test-namespaced-excluded-resource' created\n" duration=231.492229ms execID=01237
time="2023-11-03T13:17:14Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:17:14Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-excluded-resource --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzgzMiwibmJmIjoxNjk5MDE3NDMyLCJpYXQiOjE2OTkwMTc0MzIsImp0aSI6IjM2MmY2MzdjLTgxNDQtNGQ0ZS1iNTgyLTFmNmVkYTEzNTFlNiJ9.SdQ9naMJPOeqa6EY0DjvEuJROhXdc2ETzf16adLB-EY --insecure" dir= execID=7c0eb
time="2023-11-03T13:17:20Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:17:20+00:00            Service  argocd-e2e--test-namespaced-excluded-resource-lswta          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:17:20+00:00            Service  argocd-e2e--test-namespaced-excluded-resource-lswta          guestbook-ui  OutOfSync  Missing              service/guestbook-ui created\n2023-11-03T13:17:20+00:00            Service  argocd-e2e--test-namespaced-excluded-resource-lswta          guestbook-ui    Synced  Healthy              service/guestbook-ui created\n\nName:               argocd-e2e-external/test-namespaced-excluded-resource\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-excluded-resource-lswta\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-excluded-resource\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (55d3d19)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      55d3d19d335086fde1f4913c186142d546018130\nPhase:              Succeeded\nStart:              2023-11-03 13:17:14 +0000 UTC\nFinished:           2023-11-03 13:17:20 +0000 UTC\nDuration:           6s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND     NAMESPACE                                            NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service  argocd-e2e--test-namespaced-excluded-resource-lswta  guestbook-ui  Synced  Healthy        service/guestbook-ui created\n" duration=5.917614966s execID=7c0eb
time="2023-11-03T13:17:20Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:17:20Z" level=info msg="../../dist/argocd app get argocd-e2e-external/test-namespaced-excluded-resource --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzgzMiwibmJmIjoxNjk5MDE3NDMyLCJpYXQiOjE2OTkwMTc0MzIsImp0aSI6IjM2MmY2MzdjLTgxNDQtNGQ0ZS1iNTgyLTFmNmVkYTEzNTFlNiJ9.SdQ9naMJPOeqa6EY0DjvEuJROhXdc2ETzf16adLB-EY --insecure" dir= execID=ef1ec
time="2023-11-03T13:17:20Z" level=debug msg="Name:               argocd-e2e-external/test-namespaced-excluded-resource\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-excluded-resource-lswta\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-namespaced-excluded-resource\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (55d3d19)\nHealth Status:      Healthy\n\nCONDITION                MESSAGE                                                            LAST TRANSITION\nExcludedResourceWarning  Resource apps/Deployment guestbook-ui is excluded in the settings  2023-11-03 13:17:14 +0000 UTC\n\n\nGROUP  KIND     NAMESPACE                                            NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service  argocd-e2e--test-namespaced-excluded-resource-lswta  guestbook-ui  Synced  Healthy        service/guestbook-ui created\n" duration=164.086728ms execID=ef1ec
time="2023-11-03T13:17:20Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:17:20Z" level=info msg="expectation succeeded: condition {ExcludedResourceWarning Resource apps/Deployment guestbook-ui is excluded in the settings} in [{ExcludedResourceWarning Resource apps/Deployment guestbook-ui is excluded in the settings 2023-11-03 13:17:14 +0000 UTC}]"
time="2023-11-03T13:17:20Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedExcludedResource (10.04s)
=== RUN   TestNamespacedRevisionHistoryLimit
time="2023-11-03T13:17:20Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=4cfa8
time="2023-11-03T13:17:21Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-excluded-resource-lswta\" deleted\n" duration=255.217674ms execID=4cfa8
time="2023-11-03T13:17:21Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=77303
time="2023-11-03T13:17:21Z" level=debug msg="No resources found\n" duration=374.208636ms execID=77303
time="2023-11-03T13:17:21Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=5cae3
time="2023-11-03T13:17:21Z" level=debug msg="No resources found\n" duration=328.311657ms execID=5cae3
time="2023-11-03T13:17:22Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:17:22Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzg0MiwibmJmIjoxNjk5MDE3NDQyLCJpYXQiOjE2OTkwMTc0NDIsImp0aSI6ImFmM2U0MTA3LTI5ZjktNGQwZC1hMTE1LTRhYmJmNmM2NDNhMSJ9.mrVeop0HGFWiSWeruQv9tJaVR2zQQ5I38j8op7dMtTE --insecure" dir= execID=60da0
time="2023-11-03T13:17:22Z" level=debug duration=85.792341ms execID=60da0
time="2023-11-03T13:17:22Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=a0da1
time="2023-11-03T13:17:22Z" level=debug duration=2.163188ms execID=a0da1
time="2023-11-03T13:17:22Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=04851
time="2023-11-03T13:17:22Z" level=debug duration=1.655873ms execID=04851
time="2023-11-03T13:17:22Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=1a887
time="2023-11-03T13:17:22Z" level=debug duration=1.472771ms execID=1a887
time="2023-11-03T13:17:22Z" level=info msg="pkill -9 gpg-agent" dir= execID=1327f
time="2023-11-03T13:17:22Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=7e5d7
time="2023-11-03T13:17:22Z" level=debug duration=10.380667ms execID=7e5d7
time="2023-11-03T13:17:22Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=27525
time="2023-11-03T13:17:22Z" level=debug duration=41.17142ms execID=27525
time="2023-11-03T13:17:22Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=8f411
time="2023-11-03T13:17:22Z" level=debug duration=2.24925ms execID=8f411
time="2023-11-03T13:17:22Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=5e648
time="2023-11-03T13:17:22Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.264977ms execID=5e648
time="2023-11-03T13:17:22Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=06d8f
time="2023-11-03T13:17:22Z" level=debug duration=27.461773ms execID=06d8f
time="2023-11-03T13:17:22Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=6b077
time="2023-11-03T13:17:22Z" level=debug duration=25.211587ms execID=6b077
time="2023-11-03T13:17:22Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=670aa
time="2023-11-03T13:17:22Z" level=debug duration=2.176479ms execID=670aa
time="2023-11-03T13:17:22Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=52bf3
Handling connection for 9081
time="2023-11-03T13:17:22Z" level=debug duration=79.960004ms execID=52bf3
time="2023-11-03T13:17:22Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-revision-history-limit-ifrum" dir= execID=c3599
time="2023-11-03T13:17:22Z" level=debug msg="namespace/argocd-e2e--test-namespaced-revision-history-limit-ifrum created\n" duration=160.010986ms execID=c3599
time="2023-11-03T13:17:22Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-revision-history-limit-ifrum e2e.argoproj.io=true" dir= execID=e5525
time="2023-11-03T13:17:23Z" level=debug msg="namespace/argocd-e2e--test-namespaced-revision-history-limit-ifrum labeled\n" duration=302.103414ms execID=e5525
time="2023-11-03T13:17:23Z" level=info msg="clean state" duration=2.425258686s id=TestNamespacedRevisionHistoryLimit-ifrum name=TestNamespacedRevisionHistoryLimit password=password username=admin
time="2023-11-03T13:17:24Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-revision-history-limit --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path config-map --project default --dest-namespace argocd-e2e--test-namespaced-revision-history-limit-ifrum --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzg0MiwibmJmIjoxNjk5MDE3NDQyLCJpYXQiOjE2OTkwMTc0NDIsImp0aSI6ImFmM2U0MTA3LTI5ZjktNGQwZC1hMTE1LTRhYmJmNmM2NDNhMSJ9.mrVeop0HGFWiSWeruQv9tJaVR2zQQ5I38j8op7dMtTE --insecure" dir= execID=f5b88
time="2023-11-03T13:17:24Z" level=debug msg="application 'test-namespaced-revision-history-limit' created\n" duration=219.306805ms execID=f5b88
time="2023-11-03T13:17:24Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:17:24Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-revision-history-limit --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzg0MiwibmJmIjoxNjk5MDE3NDQyLCJpYXQiOjE2OTkwMTc0NDIsImp0aSI6ImFmM2U0MTA3LTI5ZjktNGQwZC1hMTE1LTRhYmJmNmM2NDNhMSJ9.mrVeop0HGFWiSWeruQv9tJaVR2zQQ5I38j8op7dMtTE --insecure" dir= execID=5a099
time="2023-11-03T13:17:30Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:17:29+00:00          ConfigMap  argocd-e2e--test-namespaced-revision-history-limit-ifrum                my-map  OutOfSync  Missing              \n2023-11-03T13:17:29+00:00          ConfigMap  argocd-e2e--test-namespaced-revision-history-limit-ifrum                my-map  OutOfSync  Missing              configmap/my-map created\n2023-11-03T13:17:30+00:00          ConfigMap  argocd-e2e--test-namespaced-revision-history-limit-ifrum                my-map    Synced  Missing              configmap/my-map created\n\nName:               argocd-e2e-external/test-namespaced-revision-history-limit\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-revision-history-limit-ifrum\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-revision-history-limit\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               config-map\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (f66f5f6)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      f66f5f6d15f70b19ed114b641a47130ae3a6faf0\nPhase:              Succeeded\nStart:              2023-11-03 13:17:24 +0000 UTC\nFinished:           2023-11-03 13:17:29 +0000 UTC\nDuration:           5s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                                 NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-namespaced-revision-history-limit-ifrum  my-map  Synced                configmap/my-map created\n" duration=5.612505652s execID=5a099
time="2023-11-03T13:17:30Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:17:30Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:17:30Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:17:30Z" level=info msg="../../dist/argocd app set argocd-e2e-external/test-namespaced-revision-history-limit --revision-history-limit 1 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzg0MiwibmJmIjoxNjk5MDE3NDQyLCJpYXQiOjE2OTkwMTc0NDIsImp0aSI6ImFmM2U0MTA3LTI5ZjktNGQwZC1hMTE1LTRhYmJmNmM2NDNhMSJ9.mrVeop0HGFWiSWeruQv9tJaVR2zQQ5I38j8op7dMtTE --insecure" dir= execID=fbf9e
time="2023-11-03T13:17:30Z" level=debug duration=132.243068ms execID=fbf9e
time="2023-11-03T13:17:30Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:17:30Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-revision-history-limit --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzg0MiwibmJmIjoxNjk5MDE3NDQyLCJpYXQiOjE2OTkwMTc0NDIsImp0aSI6ImFmM2U0MTA3LTI5ZjktNGQwZC1hMTE1LTRhYmJmNmM2NDNhMSJ9.mrVeop0HGFWiSWeruQv9tJaVR2zQQ5I38j8op7dMtTE --insecure" dir= execID=6f279
time="2023-11-03T13:17:30Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                                NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:17:30+00:00          ConfigMap  argocd-e2e--test-namespaced-revision-history-limit-ifrum                my-map    Synced                       \n\nName:               argocd-e2e-external/test-namespaced-revision-history-limit\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-revision-history-limit-ifrum\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-revision-history-limit\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               config-map\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (f66f5f6)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      f66f5f6d15f70b19ed114b641a47130ae3a6faf0\nPhase:              Succeeded\nStart:              2023-11-03 13:17:30 +0000 UTC\nFinished:           2023-11-03 13:17:30 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                                 NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-namespaced-revision-history-limit-ifrum  my-map  Synced                configmap/my-map unchanged\n" duration=723.987881ms execID=6f279
time="2023-11-03T13:17:30Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:17:30Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:17:30Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:17:30Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedRevisionHistoryLimit (10.17s)
=== RUN   TestNamespacedOrphanedResource
    fixture.go:901: 
--- SKIP: TestNamespacedOrphanedResource (0.00s)
=== RUN   TestNamespacedNotPermittedResources
time="2023-11-03T13:17:31Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=5602b
time="2023-11-03T13:17:31Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-revision-history-limit-ifrum\" deleted\n" duration=215.979472ms execID=5602b
time="2023-11-03T13:17:31Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=09a8b
time="2023-11-03T13:17:31Z" level=debug msg="No resources found\n" duration=505.119265ms execID=09a8b
time="2023-11-03T13:17:31Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=79fe9
time="2023-11-03T13:17:32Z" level=debug msg="No resources found\n" duration=274.983107ms execID=79fe9
time="2023-11-03T13:17:32Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:17:32Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzg1MiwibmJmIjoxNjk5MDE3NDUyLCJpYXQiOjE2OTkwMTc0NTIsImp0aSI6ImE0MTEwNjE5LTZhOTItNDE0NS05MGExLTQ1YzI1Mzc0Zjk5NiJ9.Muughnpq9wLdGz94fByOmJfoKVsl1Lh7hFkTQbE7uMo --insecure" dir= execID=ac95e
time="2023-11-03T13:17:32Z" level=debug duration=126.005828ms execID=ac95e
time="2023-11-03T13:17:32Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=9907a
time="2023-11-03T13:17:32Z" level=debug duration=39.280629ms execID=9907a
time="2023-11-03T13:17:32Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=24b7c
time="2023-11-03T13:17:32Z" level=debug duration=1.781777ms execID=24b7c
time="2023-11-03T13:17:32Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=833e0
time="2023-11-03T13:17:32Z" level=debug duration=1.738035ms execID=833e0
time="2023-11-03T13:17:32Z" level=info msg="pkill -9 gpg-agent" dir= execID=0b1f9
time="2023-11-03T13:17:32Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=aa7b9
time="2023-11-03T13:17:32Z" level=debug duration=10.156677ms execID=aa7b9
time="2023-11-03T13:17:32Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=d403f
time="2023-11-03T13:17:32Z" level=debug duration=36.882796ms execID=d403f
time="2023-11-03T13:17:32Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=e117e
time="2023-11-03T13:17:32Z" level=debug duration=1.856918ms execID=e117e
time="2023-11-03T13:17:32Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=6a0fe
time="2023-11-03T13:17:32Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.076907ms execID=6a0fe
time="2023-11-03T13:17:32Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=f3f7d
time="2023-11-03T13:17:32Z" level=debug duration=26.256762ms execID=f3f7d
time="2023-11-03T13:17:32Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=3ae63
time="2023-11-03T13:17:32Z" level=debug duration=33.735074ms execID=3ae63
time="2023-11-03T13:17:32Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=66e93
time="2023-11-03T13:17:32Z" level=debug duration=2.273531ms execID=66e93
time="2023-11-03T13:17:32Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=7939b
Handling connection for 9081
time="2023-11-03T13:17:33Z" level=debug duration=61.586953ms execID=7939b
time="2023-11-03T13:17:33Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-not-permitted-resources-yrpbz" dir= execID=8e28a
time="2023-11-03T13:17:33Z" level=debug msg="namespace/argocd-e2e--test-namespaced-not-permitted-resources-yrpbz created\n" duration=147.286367ms execID=8e28a
time="2023-11-03T13:17:33Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-not-permitted-resources-yrpbz e2e.argoproj.io=true" dir= execID=8abda
time="2023-11-03T13:17:33Z" level=debug msg="namespace/argocd-e2e--test-namespaced-not-permitted-resources-yrpbz labeled\n" duration=274.143661ms execID=8abda
time="2023-11-03T13:17:33Z" level=info msg="clean state" duration=2.446087114s id=TestNamespacedNotPermittedResources-yrpbz name=TestNamespacedNotPermittedResources password=password username=admin
time="2023-11-03T13:17:34Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-not-permitted-resources --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-namespaced-not-permitted-resources-yrpbz --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzg1MiwibmJmIjoxNjk5MDE3NDUyLCJpYXQiOjE2OTkwMTc0NTIsImp0aSI6ImE0MTEwNjE5LTZhOTItNDE0NS05MGExLTQ1YzI1Mzc0Zjk5NiJ9.Muughnpq9wLdGz94fByOmJfoKVsl1Lh7hFkTQbE7uMo --insecure" dir= execID=21f9d
time="2023-11-03T13:17:34Z" level=debug msg="application 'test-namespaced-not-permitted-resources' created\n" duration=222.079919ms execID=21f9d
time="2023-11-03T13:17:34Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:17:34Z" level=info msg="pending: sync status to be OutOfSync, is "
time="2023-11-03T13:17:37Z" level=info msg="pending: sync status to be OutOfSync, is "
time="2023-11-03T13:17:40Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:17:40Z" level=info msg="../../dist/argocd app delete argocd-e2e-external/test-namespaced-not-permitted-resources --cascade=true --yes --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzg1MiwibmJmIjoxNjk5MDE3NDUyLCJpYXQiOjE2OTkwMTc0NTIsImp0aSI6ImE0MTEwNjE5LTZhOTItNDE0NS05MGExLTQ1YzI1Mzc0Zjk5NiJ9.Muughnpq9wLdGz94fByOmJfoKVsl1Lh7hFkTQbE7uMo --insecure" dir= execID=676c2
time="2023-11-03T13:17:40Z" level=debug duration=93.466263ms execID=676c2
time="2023-11-03T13:17:40Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:17:40Z" level=info msg="expectation succeeded: app does not exist"
time="2023-11-03T13:17:40Z" level=info msg="Ingress 'sample-ingress' deleted from argocd-e2e"
time="2023-11-03T13:17:40Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedNotPermittedResources (9.85s)
=== RUN   TestNamespacedSyncWithInfos
time="2023-11-03T13:17:40Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=d9368
time="2023-11-03T13:17:41Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-not-permitted-resources-yrpbz\" deleted\n" duration=183.333162ms execID=d9368
time="2023-11-03T13:17:41Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=65d68
time="2023-11-03T13:17:41Z" level=debug msg="No resources found\n" duration=455.391516ms execID=65d68
time="2023-11-03T13:17:41Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=f978b
time="2023-11-03T13:17:41Z" level=debug msg="No resources found\n" duration=220.206643ms execID=f978b
time="2023-11-03T13:17:42Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:17:42Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzg2MiwibmJmIjoxNjk5MDE3NDYyLCJpYXQiOjE2OTkwMTc0NjIsImp0aSI6ImQ0ZTdiZTViLTgzMzgtNDc3Mi1iMWVmLTU4MzhlMTdhZmFiOSJ9.VWjXzDDukVtDDMnZrbQq2tMau7ZlQ0ZE9WqJ6lHdKRc --insecure" dir= execID=9d6db
time="2023-11-03T13:17:42Z" level=debug duration=68.855864ms execID=9d6db
time="2023-11-03T13:17:42Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=65d9e
time="2023-11-03T13:17:42Z" level=debug duration=2.026372ms execID=65d9e
time="2023-11-03T13:17:42Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=f3c53
time="2023-11-03T13:17:42Z" level=debug duration=1.713546ms execID=f3c53
time="2023-11-03T13:17:42Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=e32ff
time="2023-11-03T13:17:42Z" level=debug duration=1.535295ms execID=e32ff
time="2023-11-03T13:17:42Z" level=info msg="pkill -9 gpg-agent" dir= execID=41fba
time="2023-11-03T13:17:42Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=aae77
time="2023-11-03T13:17:42Z" level=debug duration=9.57565ms execID=aae77
time="2023-11-03T13:17:42Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=f3c94
time="2023-11-03T13:17:42Z" level=debug duration=32.914786ms execID=f3c94
time="2023-11-03T13:17:42Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=6a397
time="2023-11-03T13:17:42Z" level=debug duration=1.724752ms execID=6a397
time="2023-11-03T13:17:42Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=34a7f
time="2023-11-03T13:17:42Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.93721ms execID=34a7f
time="2023-11-03T13:17:42Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=d0eb8
time="2023-11-03T13:17:42Z" level=debug duration=26.624982ms execID=d0eb8
time="2023-11-03T13:17:42Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=cbd14
time="2023-11-03T13:17:42Z" level=debug duration=20.912038ms execID=cbd14
time="2023-11-03T13:17:42Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=2e4f8
time="2023-11-03T13:17:42Z" level=debug duration=2.169187ms execID=2e4f8
time="2023-11-03T13:17:42Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=642a9
Handling connection for 9081
time="2023-11-03T13:17:43Z" level=debug duration=81.442656ms execID=642a9
time="2023-11-03T13:17:43Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-sync-with-infos-whxxy" dir= execID=7a88f
time="2023-11-03T13:17:43Z" level=debug msg="namespace/argocd-e2e--test-namespaced-sync-with-infos-whxxy created\n" duration=163.977006ms execID=7a88f
time="2023-11-03T13:17:43Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-sync-with-infos-whxxy e2e.argoproj.io=true" dir= execID=670e2
time="2023-11-03T13:17:43Z" level=debug msg="namespace/argocd-e2e--test-namespaced-sync-with-infos-whxxy labeled\n" duration=227.013317ms execID=670e2
time="2023-11-03T13:17:43Z" level=info msg="clean state" duration=2.620900799s id=TestNamespacedSyncWithInfos-whxxy name=TestNamespacedSyncWithInfos password=password username=admin
time="2023-11-03T13:17:44Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-sync-with-infos --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-namespaced-sync-with-infos-whxxy --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzg2MiwibmJmIjoxNjk5MDE3NDYyLCJpYXQiOjE2OTkwMTc0NjIsImp0aSI6ImQ0ZTdiZTViLTgzMzgtNDc3Mi1iMWVmLTU4MzhlMTdhZmFiOSJ9.VWjXzDDukVtDDMnZrbQq2tMau7ZlQ0ZE9WqJ6lHdKRc --insecure" dir= execID=bff27
time="2023-11-03T13:17:44Z" level=debug msg="application 'test-namespaced-sync-with-infos' created\n" duration=216.250665ms execID=bff27
time="2023-11-03T13:17:44Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:17:44Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-sync-with-infos --info name1=val1 --info name2=val2 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzg2MiwibmJmIjoxNjk5MDE3NDYyLCJpYXQiOjE2OTkwMTc0NjIsImp0aSI6ImQ0ZTdiZTViLTgzMzgtNDc3Mi1iMWVmLTU4MzhlMTdhZmFiOSJ9.VWjXzDDukVtDDMnZrbQq2tMau7ZlQ0ZE9WqJ6lHdKRc --insecure" dir= execID=aec69
time="2023-11-03T13:17:49Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:17:48+00:00            Service  argocd-e2e--test-namespaced-sync-with-infos-whxxy          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:17:48+00:00   apps  Deployment  argocd-e2e--test-namespaced-sync-with-infos-whxxy          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:17:49+00:00            Service  argocd-e2e--test-namespaced-sync-with-infos-whxxy          guestbook-ui    Synced  Healthy              \n2023-11-03T13:17:49+00:00   apps  Deployment  argocd-e2e--test-namespaced-sync-with-infos-whxxy          guestbook-ui  OutOfSync  Missing              deployment.apps/guestbook-ui created\n2023-11-03T13:17:49+00:00            Service  argocd-e2e--test-namespaced-sync-with-infos-whxxy          guestbook-ui    Synced   Healthy              service/guestbook-ui created\n2023-11-03T13:17:49+00:00   apps  Deployment  argocd-e2e--test-namespaced-sync-with-infos-whxxy          guestbook-ui    Synced  Progressing              deployment.apps/guestbook-ui created\n\nName:               argocd-e2e-external/test-namespaced-sync-with-infos\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-sync-with-infos-whxxy\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-sync-with-infos\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (1435f6a)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      1435f6a3d0032e1316959bd141bdfa0c3d99c7d5\nPhase:              Succeeded\nStart:              2023-11-03 13:17:44 +0000 UTC\nFinished:           2023-11-03 13:17:49 +0000 UTC\nDuration:           5s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                          NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-namespaced-sync-with-infos-whxxy  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-namespaced-sync-with-infos-whxxy  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=4.566305111s execID=aec69
time="2023-11-03T13:17:49Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:17:49Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedSyncWithInfos (8.43s)
=== RUN   TestNamespacedCreateAppWithNoNameSpaceForGlobalResource
time="2023-11-03T13:17:49Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=f0d46
time="2023-11-03T13:17:49Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-sync-with-infos-whxxy\" deleted\n" duration=236.756005ms execID=f0d46
time="2023-11-03T13:17:49Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=4b96d
time="2023-11-03T13:17:50Z" level=debug msg="No resources found\n" duration=500.275921ms execID=4b96d
time="2023-11-03T13:17:50Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=244e0
time="2023-11-03T13:17:50Z" level=debug msg="No resources found\n" duration=279.865317ms execID=244e0
time="2023-11-03T13:17:51Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:17:51Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzg3MSwibmJmIjoxNjk5MDE3NDcxLCJpYXQiOjE2OTkwMTc0NzEsImp0aSI6IjJkZDU1N2Y3LTEyMjktNDcyOS05ZTQ5LTk5YTM5ODM1YzcwZiJ9.5BngPhIYmtqzvFmypNbLkfHzecyKoVcqz--OKE0z0UY --insecure" dir= execID=f8d73
time="2023-11-03T13:17:51Z" level=debug duration=83.639961ms execID=f8d73
time="2023-11-03T13:17:51Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=46970
time="2023-11-03T13:17:51Z" level=debug duration=1.95932ms execID=46970
time="2023-11-03T13:17:51Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=ada41
time="2023-11-03T13:17:51Z" level=debug duration=1.637701ms execID=ada41
time="2023-11-03T13:17:51Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=a4362
time="2023-11-03T13:17:51Z" level=debug duration=1.459023ms execID=a4362
time="2023-11-03T13:17:51Z" level=info msg="pkill -9 gpg-agent" dir= execID=9618b
time="2023-11-03T13:17:51Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=7828e
time="2023-11-03T13:17:51Z" level=debug duration=9.700812ms execID=7828e
time="2023-11-03T13:17:51Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=c47be
time="2023-11-03T13:17:51Z" level=debug duration=32.720039ms execID=c47be
time="2023-11-03T13:17:51Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=9d686
time="2023-11-03T13:17:51Z" level=debug duration=1.880899ms execID=9d686
time="2023-11-03T13:17:51Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=956ea
time="2023-11-03T13:17:51Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.892401ms execID=956ea
time="2023-11-03T13:17:51Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=5896c
time="2023-11-03T13:17:51Z" level=debug duration=34.399877ms execID=5896c
time="2023-11-03T13:17:51Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=e4fb2
time="2023-11-03T13:17:51Z" level=debug duration=23.020608ms execID=e4fb2
time="2023-11-03T13:17:51Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=0a4e8
time="2023-11-03T13:17:51Z" level=debug duration=2.286944ms execID=0a4e8
time="2023-11-03T13:17:51Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=4aed3
Handling connection for 9081
time="2023-11-03T13:17:51Z" level=debug duration=88.225299ms execID=4aed3
time="2023-11-03T13:17:51Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-create-app-with-no-name-space-ymkbt" dir= execID=078d4
time="2023-11-03T13:17:51Z" level=debug msg="namespace/argocd-e2e--test-namespaced-create-app-with-no-name-space-ymkbt created\n" duration=116.348207ms execID=078d4
time="2023-11-03T13:17:51Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-create-app-with-no-name-space-ymkbt e2e.argoproj.io=true" dir= execID=aa50f
time="2023-11-03T13:17:51Z" level=debug msg="namespace/argocd-e2e--test-namespaced-create-app-with-no-name-space-ymkbt labeled\n" duration=323.482776ms execID=aa50f
time="2023-11-03T13:17:51Z" level=info msg="clean state" duration=2.634537601s id=TestNamespacedCreateAppWithNoNameSpaceForGlobalResource-ymkbt name=TestNamespacedCreateAppWithNoNameSpaceForGlobalResource password=password username=admin
time="2023-11-03T13:17:52Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-create-app-with-no-name-space-for-global-resour --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path global-with-no-namespace --project default --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzg3MSwibmJmIjoxNjk5MDE3NDcxLCJpYXQiOjE2OTkwMTc0NzEsImp0aSI6IjJkZDU1N2Y3LTEyMjktNDcyOS05ZTQ5LTk5YTM5ODM1YzcwZiJ9.5BngPhIYmtqzvFmypNbLkfHzecyKoVcqz--OKE0z0UY --insecure" dir= execID=0477f
time="2023-11-03T13:17:53Z" level=debug msg="application 'test-namespaced-create-app-with-no-name-space-for-global-resour' created\n" duration=203.076447ms execID=0477f
time="2023-11-03T13:17:53Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:17:53Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedCreateAppWithNoNameSpaceForGlobalResource (4.37s)
=== RUN   TestNamespacedCreateAppWithNoNameSpaceWhenRequired
time="2023-11-03T13:17:53Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=0273c
time="2023-11-03T13:17:53Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-create-app-with-no-name-space-ymkbt\" deleted\n" duration=183.279309ms execID=0273c
time="2023-11-03T13:17:53Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=fc4b4
time="2023-11-03T13:17:54Z" level=debug msg="No resources found\n" duration=890.442069ms execID=fc4b4
time="2023-11-03T13:17:54Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=e8ea3
time="2023-11-03T13:17:55Z" level=debug msg="No resources found\n" duration=271.894098ms execID=e8ea3
time="2023-11-03T13:17:55Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:17:55Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzg3NSwibmJmIjoxNjk5MDE3NDc1LCJpYXQiOjE2OTkwMTc0NzUsImp0aSI6ImQzOTUyNDIwLTQxZTAtNGI2OS04ZTkxLTQ5MzdlZjE3NzkxMCJ9.MhnPyzxn-_uGYXE7rrx1sQgZXZEe_cUfskhBBDYjyj8 --insecure" dir= execID=fa0ca
time="2023-11-03T13:17:56Z" level=debug duration=166.115607ms execID=fa0ca
time="2023-11-03T13:17:56Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=ff5c6
time="2023-11-03T13:17:56Z" level=debug duration=1.942436ms execID=ff5c6
time="2023-11-03T13:17:56Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=7524b
time="2023-11-03T13:17:56Z" level=debug duration=1.51646ms execID=7524b
time="2023-11-03T13:17:56Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=80be7
time="2023-11-03T13:17:56Z" level=debug duration=1.582362ms execID=80be7
time="2023-11-03T13:17:56Z" level=info msg="pkill -9 gpg-agent" dir= execID=3013f
time="2023-11-03T13:17:56Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=b6102
time="2023-11-03T13:17:56Z" level=debug duration=10.000472ms execID=b6102
time="2023-11-03T13:17:56Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=c0fb1
time="2023-11-03T13:17:56Z" level=debug duration=33.587207ms execID=c0fb1
time="2023-11-03T13:17:56Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=d1291
time="2023-11-03T13:17:56Z" level=debug duration=1.818068ms execID=d1291
time="2023-11-03T13:17:56Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=144d2
time="2023-11-03T13:17:56Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.912114ms execID=144d2
time="2023-11-03T13:17:56Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=68d8c
time="2023-11-03T13:17:56Z" level=debug duration=24.988604ms execID=68d8c
time="2023-11-03T13:17:56Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=937a1
time="2023-11-03T13:17:56Z" level=debug duration=20.954208ms execID=937a1
time="2023-11-03T13:17:56Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=1e9fe
time="2023-11-03T13:17:56Z" level=debug duration=3.154753ms execID=1e9fe
time="2023-11-03T13:17:56Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=08a46
Handling connection for 9081
time="2023-11-03T13:17:56Z" level=debug duration=76.955319ms execID=08a46
time="2023-11-03T13:17:56Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-create-app-with-no-name-space-qzgiv" dir= execID=0307d
time="2023-11-03T13:17:56Z" level=debug msg="namespace/argocd-e2e--test-namespaced-create-app-with-no-name-space-qzgiv created\n" duration=131.9511ms execID=0307d
time="2023-11-03T13:17:56Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-create-app-with-no-name-space-qzgiv e2e.argoproj.io=true" dir= execID=37086
time="2023-11-03T13:17:56Z" level=debug msg="namespace/argocd-e2e--test-namespaced-create-app-with-no-name-space-qzgiv labeled\n" duration=307.731165ms execID=37086
time="2023-11-03T13:17:56Z" level=info msg="clean state" duration=3.130189575s id=TestNamespacedCreateAppWithNoNameSpaceWhenRequired-qzgiv name=TestNamespacedCreateAppWithNoNameSpaceWhenRequired password=password username=admin
time="2023-11-03T13:17:57Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-create-app-with-no-name-space-when-required --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzg3NSwibmJmIjoxNjk5MDE3NDc1LCJpYXQiOjE2OTkwMTc0NzUsImp0aSI6ImQzOTUyNDIwLTQxZTAtNGI2OS04ZTkxLTQ5MzdlZjE3NzkxMCJ9.MhnPyzxn-_uGYXE7rrx1sQgZXZEe_cUfskhBBDYjyj8 --insecure" dir= execID=893d3
time="2023-11-03T13:17:58Z" level=debug msg="application 'test-namespaced-create-app-with-no-name-space-when-required' created\n" duration=237.141316ms execID=893d3
time="2023-11-03T13:17:58Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:17:58Z" level=info msg="../../dist/argocd app get argocd-e2e-external/test-namespaced-create-app-with-no-name-space-when-required --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzg3NSwibmJmIjoxNjk5MDE3NDc1LCJpYXQiOjE2OTkwMTc0NzUsImp0aSI6ImQzOTUyNDIwLTQxZTAtNGI2OS04ZTkxLTQ5MzdlZjE3NzkxMCJ9.MhnPyzxn-_uGYXE7rrx1sQgZXZEe_cUfskhBBDYjyj8 --insecure" dir= execID=bb6a1
time="2023-11-03T13:18:02Z" level=debug msg="Name:               argocd-e2e-external/test-namespaced-create-app-with-no-name-space-when-required\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          \nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-namespaced-create-app-with-no-name-space-when-required\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (224fac0)\nHealth Status:      Missing\n\nCONDITION         MESSAGE                                                          LAST TRANSITION\nInvalidSpecError  Namespace for guestbook-ui /v1, Kind=Service is missing.         2023-11-03 13:18:02 +0000 UTC\nInvalidSpecError  Namespace for guestbook-ui apps/v1, Kind=Deployment is missing.  2023-11-03 13:18:02 +0000 UTC\n\n\nGROUP  KIND        NAMESPACE  NAME          STATUS     HEALTH   HOOK  MESSAGE\n       Service                guestbook-ui  OutOfSync  Missing        \napps   Deployment             guestbook-ui  OutOfSync  Missing        \n" duration=4.503831887s execID=bb6a1
time="2023-11-03T13:18:02Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:18:02Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedCreateAppWithNoNameSpaceWhenRequired (8.89s)
=== RUN   TestNamespacedCreateAppWithNoNameSpaceWhenRequired2
time="2023-11-03T13:18:02Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=84559
time="2023-11-03T13:18:02Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-create-app-with-no-name-space-qzgiv\" deleted\n" duration=244.769924ms execID=84559
time="2023-11-03T13:18:02Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=1ddf6
time="2023-11-03T13:18:03Z" level=debug msg="No resources found\n" duration=385.33922ms execID=1ddf6
time="2023-11-03T13:18:03Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=8e352
time="2023-11-03T13:18:03Z" level=debug msg="No resources found\n" duration=214.408323ms execID=8e352
time="2023-11-03T13:18:04Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:18:04Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzg4NCwibmJmIjoxNjk5MDE3NDg0LCJpYXQiOjE2OTkwMTc0ODQsImp0aSI6IjdkMjRiYjViLTY2Y2MtNGY2OS04YTlhLTg2NzJkNTAwYjhjMyJ9.sVjyJHr1GBuCMbwszVC_8b549xDEaQx6CseCDnI0A6c --insecure" dir= execID=d08e5
time="2023-11-03T13:18:04Z" level=debug duration=82.046967ms execID=d08e5
time="2023-11-03T13:18:04Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=1e4d5
time="2023-11-03T13:18:04Z" level=debug duration=1.819958ms execID=1e4d5
time="2023-11-03T13:18:04Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=928a7
time="2023-11-03T13:18:04Z" level=debug duration=1.702417ms execID=928a7
time="2023-11-03T13:18:04Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=d680b
time="2023-11-03T13:18:04Z" level=debug duration=1.477676ms execID=d680b
time="2023-11-03T13:18:04Z" level=info msg="pkill -9 gpg-agent" dir= execID=e10a5
time="2023-11-03T13:18:04Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=7ab94
time="2023-11-03T13:18:04Z" level=debug duration=9.798187ms execID=7ab94
time="2023-11-03T13:18:04Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=90061
time="2023-11-03T13:18:04Z" level=debug duration=32.460422ms execID=90061
time="2023-11-03T13:18:04Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=cdb64
time="2023-11-03T13:18:04Z" level=debug duration=1.754644ms execID=cdb64
time="2023-11-03T13:18:04Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=cc06b
time="2023-11-03T13:18:04Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.930931ms execID=cc06b
time="2023-11-03T13:18:04Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=23c3a
time="2023-11-03T13:18:04Z" level=debug duration=45.936371ms execID=23c3a
time="2023-11-03T13:18:04Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=ff771
time="2023-11-03T13:18:04Z" level=debug duration=26.048746ms execID=ff771
time="2023-11-03T13:18:04Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=64945
time="2023-11-03T13:18:04Z" level=debug duration=2.678034ms execID=64945
time="2023-11-03T13:18:04Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=26d53
Handling connection for 9081
time="2023-11-03T13:18:04Z" level=debug duration=96.77121ms execID=26d53
time="2023-11-03T13:18:04Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-create-app-with-no-name-space-gomhe" dir= execID=20e19
time="2023-11-03T13:18:04Z" level=debug msg="namespace/argocd-e2e--test-namespaced-create-app-with-no-name-space-gomhe created\n" duration=168.54099ms execID=20e19
time="2023-11-03T13:18:04Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-create-app-with-no-name-space-gomhe e2e.argoproj.io=true" dir= execID=6c3e0
time="2023-11-03T13:18:05Z" level=debug msg="namespace/argocd-e2e--test-namespaced-create-app-with-no-name-space-gomhe labeled\n" duration=273.552011ms execID=6c3e0
time="2023-11-03T13:18:05Z" level=info msg="clean state" duration=2.49583949s id=TestNamespacedCreateAppWithNoNameSpaceWhenRequired2-gomhe name=TestNamespacedCreateAppWithNoNameSpaceWhenRequired2 password=password username=admin
time="2023-11-03T13:18:06Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-create-app-with-no-name-space-when-required2 --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook-with-namespace --project default --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzg4NCwibmJmIjoxNjk5MDE3NDg0LCJpYXQiOjE2OTkwMTc0ODQsImp0aSI6IjdkMjRiYjViLTY2Y2MtNGY2OS04YTlhLTg2NzJkNTAwYjhjMyJ9.sVjyJHr1GBuCMbwszVC_8b549xDEaQx6CseCDnI0A6c --insecure" dir= execID=cfdd3
time="2023-11-03T13:18:06Z" level=debug msg="application 'test-namespaced-create-app-with-no-name-space-when-required2' created\n" duration=207.307156ms execID=cfdd3
time="2023-11-03T13:18:06Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:18:06Z" level=info msg="../../dist/argocd app get argocd-e2e-external/test-namespaced-create-app-with-no-name-space-when-required2 --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzg4NCwibmJmIjoxNjk5MDE3NDg0LCJpYXQiOjE2OTkwMTc0ODQsImp0aSI6IjdkMjRiYjViLTY2Y2MtNGY2OS04YTlhLTg2NzJkNTAwYjhjMyJ9.sVjyJHr1GBuCMbwszVC_8b549xDEaQx6CseCDnI0A6c --insecure" dir= execID=0b7f7
time="2023-11-03T13:18:10Z" level=debug msg="Name:               argocd-e2e-external/test-namespaced-create-app-with-no-name-space-when-required2\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          \nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-namespaced-create-app-with-no-name-space-when-required2\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook-with-namespace\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (0740169)\nHealth Status:      Missing\n\nCONDITION         MESSAGE                                                          LAST TRANSITION\nInvalidSpecError  Namespace for guestbook-ui /v1, Kind=Service is missing.         2023-11-03 13:18:10 +0000 UTC\nInvalidSpecError  Namespace for guestbook-ui apps/v1, Kind=Deployment is missing.  2023-11-03 13:18:10 +0000 UTC\n\n\nGROUP  KIND        NAMESPACE  NAME          STATUS     HEALTH   HOOK  MESSAGE\n       Service                guestbook-ui  OutOfSync  Missing        \n       Service     namespace  guestbook-ui  OutOfSync  Missing        \napps   Deployment             guestbook-ui  OutOfSync  Missing        \napps   Deployment  namespace  guestbook-ui  OutOfSync  Missing        \n" duration=4.395695853s execID=0b7f7
time="2023-11-03T13:18:10Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:18:10Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedCreateAppWithNoNameSpaceWhenRequired2 (8.12s)
=== RUN   TestNamespacedListResource
    fixture.go:901: 
--- SKIP: TestNamespacedListResource (0.00s)
=== RUN   TestNamespacedNamespaceAutoCreation
    fixture.go:901: 
--- SKIP: TestNamespacedNamespaceAutoCreation (0.00s)
=== RUN   TestNamespacedNamespaceAutoCreationWithMetadata
    fixture.go:901: 
--- SKIP: TestNamespacedNamespaceAutoCreationWithMetadata (0.00s)
=== RUN   TestNamespacedNamespaceAutoCreationWithMetadataAndNsManifest
    fixture.go:901: 
--- SKIP: TestNamespacedNamespaceAutoCreationWithMetadataAndNsManifest (0.00s)
=== RUN   TestNamespacedNamespaceAutoCreationWithPreexistingNs
    fixture.go:901: 
--- SKIP: TestNamespacedNamespaceAutoCreationWithPreexistingNs (0.00s)
=== RUN   TestNamespacedFailedSyncWithRetry
time="2023-11-03T13:18:10Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=07aa8
time="2023-11-03T13:18:10Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-create-app-with-no-name-space-gomhe\" deleted\n" duration=247.670765ms execID=07aa8
time="2023-11-03T13:18:10Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=38cdc
time="2023-11-03T13:18:11Z" level=debug msg="No resources found\n" duration=464.151252ms execID=38cdc
time="2023-11-03T13:18:11Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=6fb71
time="2023-11-03T13:18:11Z" level=debug msg="No resources found\n" duration=140.439676ms execID=6fb71
time="2023-11-03T13:18:12Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:18:12Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzg5MiwibmJmIjoxNjk5MDE3NDkyLCJpYXQiOjE2OTkwMTc0OTIsImp0aSI6IjYxM2FkYTVmLTFjYjItNDI0ZS1hMDZhLTZiMTM0NGU4ZGEyOCJ9.UI9fj-HEbg8_3WrWd_a4gqxG1zEOEEkfA9bk_mctrfk --insecure" dir= execID=f2715
time="2023-11-03T13:18:12Z" level=debug duration=98.193384ms execID=f2715
time="2023-11-03T13:18:12Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=358aa
time="2023-11-03T13:18:12Z" level=debug duration=2.085791ms execID=358aa
time="2023-11-03T13:18:12Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=4bffe
time="2023-11-03T13:18:12Z" level=debug duration=1.672078ms execID=4bffe
time="2023-11-03T13:18:12Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=21fa1
time="2023-11-03T13:18:12Z" level=debug duration=1.409451ms execID=21fa1
time="2023-11-03T13:18:12Z" level=info msg="pkill -9 gpg-agent" dir= execID=32b84
time="2023-11-03T13:18:12Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=f7018
time="2023-11-03T13:18:12Z" level=debug duration=9.808644ms execID=f7018
time="2023-11-03T13:18:12Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=fcefa
time="2023-11-03T13:18:12Z" level=debug duration=33.482004ms execID=fcefa
time="2023-11-03T13:18:12Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=98460
time="2023-11-03T13:18:12Z" level=debug duration=1.951625ms execID=98460
time="2023-11-03T13:18:12Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=7c2b9
time="2023-11-03T13:18:12Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.40519ms execID=7c2b9
time="2023-11-03T13:18:12Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=95df7
time="2023-11-03T13:18:12Z" level=debug duration=28.146355ms execID=95df7
time="2023-11-03T13:18:12Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=9681a
time="2023-11-03T13:18:12Z" level=debug duration=21.012189ms execID=9681a
time="2023-11-03T13:18:12Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=d7677
time="2023-11-03T13:18:12Z" level=debug duration=2.458265ms execID=d7677
time="2023-11-03T13:18:12Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=f6a76
Handling connection for 9081
time="2023-11-03T13:18:12Z" level=debug duration=82.69771ms execID=f6a76
time="2023-11-03T13:18:12Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-failed-sync-with-retry-conki" dir= execID=549e4
time="2023-11-03T13:18:13Z" level=debug msg="namespace/argocd-e2e--test-namespaced-failed-sync-with-retry-conki created\n" duration=112.946896ms execID=549e4
time="2023-11-03T13:18:13Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-failed-sync-with-retry-conki e2e.argoproj.io=true" dir= execID=0e289
time="2023-11-03T13:18:13Z" level=debug msg="namespace/argocd-e2e--test-namespaced-failed-sync-with-retry-conki labeled\n" duration=200.286332ms execID=0e289
time="2023-11-03T13:18:13Z" level=info msg="clean state" duration=2.608797148s id=TestNamespacedFailedSyncWithRetry-conki name=TestNamespacedFailedSyncWithRetry password=password username=admin
time="2023-11-03T13:18:14Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/metadata/annotations\", \"value\": {\"argocd.argoproj.io/hook\": \"PreSync\"}}]" path=hook/hook.yaml
time="2023-11-03T13:18:14Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:18:14Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/hook\":\"Sync\"},\"name\":\"hook\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:18:14Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:18:14Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=b2493
time="2023-11-03T13:18:14Z" level=debug msg="diff --git a/hook/hook.yaml b/hook/hook.yaml\nindex ca89c3d..3b3b2f2 100644\n--- a/hook/hook.yaml\n+++ b/hook/hook.yaml\n@@ -2,13 +2,13 @@ apiVersion: v1\n kind: Pod\n metadata:\n   annotations:\n-    argocd.argoproj.io/hook: Sync\n+    argocd.argoproj.io/hook: PreSync\n   name: hook\n spec:\n   containers:\n-    - command:\n-        - \"true\"\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      name: main\n-  restartPolicy: Never\n\\ No newline at end of file\n+  - command:\n+    - \"true\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n+  restartPolicy: Never\n" duration=4.559307ms execID=b2493
time="2023-11-03T13:18:14Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=af170
time="2023-11-03T13:18:14Z" level=debug msg="[master 638be97] patch\n 1 file changed, 7 insertions(+), 7 deletions(-)\n" duration=11.068348ms execID=af170
time="2023-11-03T13:18:14Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=79f7d
Handling connection for 9081
time="2023-11-03T13:18:14Z" level=debug duration=36.649906ms execID=79f7d
time="2023-11-03T13:18:14Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/spec/containers/0/command\", \"value\": [\"false\"]}]" path=hook/hook.yaml
time="2023-11-03T13:18:14Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:18:14Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/hook\":\"PreSync\"},\"name\":\"hook\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:18:14Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:18:14Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=dc4fb
time="2023-11-03T13:18:14Z" level=debug msg="diff --git a/hook/hook.yaml b/hook/hook.yaml\nindex 3b3b2f2..bd36116 100644\n--- a/hook/hook.yaml\n+++ b/hook/hook.yaml\n@@ -7,7 +7,7 @@ metadata:\n spec:\n   containers:\n   - command:\n-    - \"true\"\n+    - \"false\"\n     image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n     imagePullPolicy: IfNotPresent\n     name: main\n" duration=3.509828ms execID=dc4fb
time="2023-11-03T13:18:14Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=4ab3b
time="2023-11-03T13:18:14Z" level=debug msg="[master f489566] patch\n 1 file changed, 1 insertion(+), 1 deletion(-)\n" duration=7.493648ms execID=4ab3b
time="2023-11-03T13:18:14Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=e5164
Handling connection for 9081
time="2023-11-03T13:18:14Z" level=debug duration=36.996439ms execID=e5164
time="2023-11-03T13:18:14Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-failed-sync-with-retry --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path hook --project default --dest-namespace argocd-e2e--test-namespaced-failed-sync-with-retry-conki --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzg5MiwibmJmIjoxNjk5MDE3NDkyLCJpYXQiOjE2OTkwMTc0OTIsImp0aSI6IjYxM2FkYTVmLTFjYjItNDI0ZS1hMDZhLTZiMTM0NGU4ZGEyOCJ9.UI9fj-HEbg8_3WrWd_a4gqxG1zEOEEkfA9bk_mctrfk --insecure" dir= execID=6ed5d
time="2023-11-03T13:18:14Z" level=debug msg="application 'test-namespaced-failed-sync-with-retry' created\n" duration=217.452276ms execID=6ed5d
time="2023-11-03T13:18:14Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:18:14Z" level=info msg="../../dist/argocd app sync --retry-limit=1 --retry-backoff-duration=1s argocd-e2e-external/test-namespaced-failed-sync-with-retry --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzg5MiwibmJmIjoxNjk5MDE3NDkyLCJpYXQiOjE2OTkwMTc0OTIsImp0aSI6IjYxM2FkYTVmLTFjYjItNDI0ZS1hMDZhLTZiMTM0NGU4ZGEyOCJ9.UI9fj-HEbg8_3WrWd_a4gqxG1zEOEEkfA9bk_mctrfk --insecure" dir= execID=44a9e
time="2023-11-03T13:18:26Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:18:18+00:00                Pod  argocd-e2e--test-namespaced-failed-sync-with-retry-conki                   pod  OutOfSync  Missing              \n2023-11-03T13:18:18+00:00                Pod  argocd-e2e--test-namespaced-failed-sync-with-retry-conki                  hook                                 \n2023-11-03T13:18:20+00:00                Pod  argocd-e2e--test-namespaced-failed-sync-with-retry-conki                  hook   Running   Synced     PreSync  pod/hook created\n2023-11-03T13:18:22+00:00                Pod  argocd-e2e--test-namespaced-failed-sync-with-retry-conki                  hook    Failed   Synced     PreSync  container \"main\" failed with exit code 1\n\nName:               argocd-e2e-external/test-namespaced-failed-sync-with-retry\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-failed-sync-with-retry-conki\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-failed-sync-with-retry\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               hook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (f489566)\nHealth Status:      Missing\n\nOperation:          Sync\nSync Revision:      f489566f13ace394a349d549a1a1ccccc8743438\nPhase:              Failed\nStart:              2023-11-03 13:18:14 +0000 UTC\nFinished:           2023-11-03 13:18:26 +0000 UTC\nDuration:           12s\nMessage:            one or more synchronization tasks completed unsuccessfully (retried 1 times).\n\nGROUP  KIND  NAMESPACE                                                 NAME  STATUS     HEALTH   HOOK     MESSAGE\n       Pod   argocd-e2e--test-namespaced-failed-sync-with-retry-conki  hook  Failed              PreSync  container \"main\" failed with exit code 1\n       Pod   argocd-e2e--test-namespaced-failed-sync-with-retry-conki  pod   OutOfSync  Missing           \n" duration=12.138007913s execID=44a9e
time="2023-11-03T13:18:26Z" level=error msg="`../../dist/argocd app sync --retry-limit=1 --retry-backoff-duration=1s argocd-e2e-external/test-namespaced-failed-sync-with-retry --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzg5MiwibmJmIjoxNjk5MDE3NDkyLCJpYXQiOjE2OTkwMTc0OTIsImp0aSI6IjYxM2FkYTVmLTFjYjItNDI0ZS1hMDZhLTZiMTM0NGU4ZGEyOCJ9.UI9fj-HEbg8_3WrWd_a4gqxG1zEOEEkfA9bk_mctrfk --insecure` failed exit status 1: time=\"2023-11-03T13:18:26Z\" level=fatal msg=\"Operation has completed with phase: Failed\"" execID=44a9e
time="2023-11-03T13:18:26Z" level=info msg="expectation succeeded: operation phase should be Failed, is Failed"
time="2023-11-03T13:18:26Z" level=info msg="expectation succeeded: operation message should contains 'retried 1 times', got: 'one or more synchronization tasks completed unsuccessfully (retried 1 times).'"
time="2023-11-03T13:18:26Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedFailedSyncWithRetry (16.09s)
=== RUN   TestNamespacedCreateDisableValidation
time="2023-11-03T13:18:26Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=56131
time="2023-11-03T13:18:26Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-failed-sync-with-retry-conki\" deleted\n" duration=199.463136ms execID=56131
time="2023-11-03T13:18:26Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=d93aa
time="2023-11-03T13:18:27Z" level=debug msg="No resources found\n" duration=411.195325ms execID=d93aa
time="2023-11-03T13:18:27Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=9c836
time="2023-11-03T13:18:27Z" level=debug msg="No resources found\n" duration=222.193098ms execID=9c836
time="2023-11-03T13:18:28Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:18:28Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzkwOCwibmJmIjoxNjk5MDE3NTA4LCJpYXQiOjE2OTkwMTc1MDgsImp0aSI6ImMyNzU0ZGNkLTBmOTMtNDhjMy05ODg0LTUxOWFiNDEwMjc1ZCJ9.mUFsdMq3ntwexTjgRGw-kjgRyYjyuv2q2U4XibuzD6U --insecure" dir= execID=dc34c
time="2023-11-03T13:18:28Z" level=debug duration=68.382341ms execID=dc34c
time="2023-11-03T13:18:28Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=40748
time="2023-11-03T13:18:28Z" level=debug duration=1.903219ms execID=40748
time="2023-11-03T13:18:28Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=b4c4e
time="2023-11-03T13:18:28Z" level=debug duration=1.566297ms execID=b4c4e
time="2023-11-03T13:18:28Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=327fd
time="2023-11-03T13:18:28Z" level=debug duration=1.635098ms execID=327fd
time="2023-11-03T13:18:28Z" level=info msg="pkill -9 gpg-agent" dir= execID=473e9
time="2023-11-03T13:18:28Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=39382
time="2023-11-03T13:18:28Z" level=debug duration=9.45777ms execID=39382
time="2023-11-03T13:18:28Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=a9d61
time="2023-11-03T13:18:28Z" level=debug duration=32.664753ms execID=a9d61
time="2023-11-03T13:18:28Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=551b3
time="2023-11-03T13:18:28Z" level=debug duration=1.42384ms execID=551b3
time="2023-11-03T13:18:28Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=368ef
time="2023-11-03T13:18:28Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.447419ms execID=368ef
time="2023-11-03T13:18:28Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=6bc48
time="2023-11-03T13:18:28Z" level=debug duration=22.878751ms execID=6bc48
time="2023-11-03T13:18:28Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=6b0ad
time="2023-11-03T13:18:28Z" level=debug duration=26.302136ms execID=6b0ad
time="2023-11-03T13:18:28Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=898e8
time="2023-11-03T13:18:28Z" level=debug duration=2.288408ms execID=898e8
time="2023-11-03T13:18:28Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=6f3df
Handling connection for 9081
time="2023-11-03T13:18:28Z" level=debug duration=58.396435ms execID=6f3df
time="2023-11-03T13:18:28Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-create-disable-validation-brpck" dir= execID=45514
time="2023-11-03T13:18:28Z" level=debug msg="namespace/argocd-e2e--test-namespaced-create-disable-validation-brpck created\n" duration=164.928796ms execID=45514
time="2023-11-03T13:18:28Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-create-disable-validation-brpck e2e.argoproj.io=true" dir= execID=86a63
time="2023-11-03T13:18:28Z" level=debug msg="namespace/argocd-e2e--test-namespaced-create-disable-validation-brpck labeled\n" duration=199.780508ms execID=86a63
time="2023-11-03T13:18:28Z" level=info msg="clean state" duration=2.20872385s id=TestNamespacedCreateDisableValidation-brpck name=TestNamespacedCreateDisableValidation password=password username=admin
time="2023-11-03T13:18:29Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-create-disable-validation --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --validate=false --dest-server https://kubernetes.default.svc --path baddir --project default --dest-namespace argocd-e2e--test-namespaced-create-disable-validation-brpck --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzkwOCwibmJmIjoxNjk5MDE3NTA4LCJpYXQiOjE2OTkwMTc1MDgsImp0aSI6ImMyNzU0ZGNkLTBmOTMtNDhjMy05ODg0LTUxOWFiNDEwMjc1ZCJ9.mUFsdMq3ntwexTjgRGw-kjgRyYjyuv2q2U4XibuzD6U --insecure" dir= execID=94ae2
time="2023-11-03T13:18:30Z" level=debug msg="application 'test-namespaced-create-disable-validation' created\n" duration=72.803222ms execID=94ae2
time="2023-11-03T13:18:30Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:18:30Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-create-disable-validation --upsert --validate=false --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --path baddir2 --project default --dest-server https://kubernetes.default.svc --dest-namespace argocd-e2e--test-namespaced-create-disable-validation-brpck --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzkwOCwibmJmIjoxNjk5MDE3NTA4LCJpYXQiOjE2OTkwMTc1MDgsImp0aSI6ImMyNzU0ZGNkLTBmOTMtNDhjMy05ODg0LTUxOWFiNDEwMjc1ZCJ9.mUFsdMq3ntwexTjgRGw-kjgRyYjyuv2q2U4XibuzD6U --insecure" dir= execID=2b5eb
time="2023-11-03T13:18:30Z" level=debug msg="application 'test-namespaced-create-disable-validation' created\n" duration=131.947098ms execID=2b5eb
time="2023-11-03T13:18:30Z" level=info msg="../../dist/argocd app set argocd-e2e-external/test-namespaced-create-disable-validation --path baddir3 --validate=false --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzkwOCwibmJmIjoxNjk5MDE3NTA4LCJpYXQiOjE2OTkwMTc1MDgsImp0aSI6ImMyNzU0ZGNkLTBmOTMtNDhjMy05ODg0LTUxOWFiNDEwMjc1ZCJ9.mUFsdMq3ntwexTjgRGw-kjgRyYjyuv2q2U4XibuzD6U --insecure" dir= execID=64300
time="2023-11-03T13:18:30Z" level=debug duration=113.278887ms execID=64300
time="2023-11-03T13:18:30Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:18:30Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedCreateDisableValidation (3.54s)
=== RUN   TestNamespacedCreateFromPartialFile
time="2023-11-03T13:18:30Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=49c69
time="2023-11-03T13:18:30Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-create-disable-validation-brpck\" deleted\n" duration=224.561456ms execID=49c69
time="2023-11-03T13:18:30Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=c9f8d
time="2023-11-03T13:18:30Z" level=debug msg="No resources found\n" duration=391.594008ms execID=c9f8d
time="2023-11-03T13:18:30Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=616df
time="2023-11-03T13:18:31Z" level=debug msg="No resources found\n" duration=200.315794ms execID=616df
time="2023-11-03T13:18:31Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:18:31Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzkxMSwibmJmIjoxNjk5MDE3NTExLCJpYXQiOjE2OTkwMTc1MTEsImp0aSI6ImVjZDFkNzNlLTYzYWMtNGM0Ni1iZTEwLTU3YTg2YzQxZDZlZCJ9.D6kiODGokpQ1C5vB3agE9gYVOuaUrKf-V9UW1NW0PPU --insecure" dir= execID=fbdd5
time="2023-11-03T13:18:31Z" level=debug duration=100.150017ms execID=fbdd5
time="2023-11-03T13:18:31Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=c2dda
time="2023-11-03T13:18:31Z" level=debug duration=2.187433ms execID=c2dda
time="2023-11-03T13:18:31Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=75e4f
time="2023-11-03T13:18:31Z" level=debug duration=1.72653ms execID=75e4f
time="2023-11-03T13:18:31Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=5a015
time="2023-11-03T13:18:31Z" level=debug duration=1.501956ms execID=5a015
time="2023-11-03T13:18:31Z" level=info msg="pkill -9 gpg-agent" dir= execID=6426e
time="2023-11-03T13:18:31Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=95190
time="2023-11-03T13:18:31Z" level=debug duration=10.149835ms execID=95190
time="2023-11-03T13:18:31Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=c83db
time="2023-11-03T13:18:31Z" level=debug duration=35.096004ms execID=c83db
time="2023-11-03T13:18:31Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=b5a2d
time="2023-11-03T13:18:31Z" level=debug duration=1.903103ms execID=b5a2d
time="2023-11-03T13:18:31Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=06add
time="2023-11-03T13:18:31Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.129499ms execID=06add
time="2023-11-03T13:18:31Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=d312c
time="2023-11-03T13:18:32Z" level=debug duration=37.355091ms execID=d312c
time="2023-11-03T13:18:32Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=d6f23
time="2023-11-03T13:18:32Z" level=debug duration=23.929311ms execID=d6f23
time="2023-11-03T13:18:32Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=c4e2b
time="2023-11-03T13:18:32Z" level=debug duration=2.796077ms execID=c4e2b
time="2023-11-03T13:18:32Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=ead37
Handling connection for 9081
time="2023-11-03T13:18:32Z" level=debug duration=59.681204ms execID=ead37
time="2023-11-03T13:18:32Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-create-from-partial-file-fjcbb" dir= execID=3f55c
time="2023-11-03T13:18:32Z" level=debug msg="namespace/argocd-e2e--test-namespaced-create-from-partial-file-fjcbb created\n" duration=145.697224ms execID=3f55c
time="2023-11-03T13:18:32Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-create-from-partial-file-fjcbb e2e.argoproj.io=true" dir= execID=10fea
time="2023-11-03T13:18:32Z" level=debug msg="namespace/argocd-e2e--test-namespaced-create-from-partial-file-fjcbb labeled\n" duration=362.747472ms execID=10fea
time="2023-11-03T13:18:32Z" level=info msg="clean state" duration=2.344742033s id=TestNamespacedCreateFromPartialFile-fjcbb name=TestNamespacedCreateFromPartialFile password=password username=admin
time="2023-11-03T13:18:33Z" level=info msg="../../dist/argocd app create -f /tmp/1519468462 --name test-namespaced-create-from-partial-file --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --dest-namespace argocd-e2e--test-namespaced-create-from-partial-file-fjcbb --path helm-values -l labels.local/from-args=args --helm-set foo=foo --app-namespace argocd-e2e-external --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzkxMSwibmJmIjoxNjk5MDE3NTExLCJpYXQiOjE2OTkwMTc1MTEsImp0aSI6ImVjZDFkNzNlLTYzYWMtNGM0Ni1iZTEwLTU3YTg2YzQxZDZlZCJ9.D6kiODGokpQ1C5vB3agE9gYVOuaUrKf-V9UW1NW0PPU --insecure" dir= execID=12b22
time="2023-11-03T13:18:33Z" level=debug msg="application 'test-namespaced-create-from-partial-file' created\n" duration=232.790587ms execID=12b22
time="2023-11-03T13:18:33Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:18:33Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:18:33Z" level=info msg="pending: sync status to be Synced, is "
time="2023-11-03T13:18:36Z" level=info msg="pending: sync status to be Synced, is "
time="2023-11-03T13:18:39Z" level=info msg="pending: sync status to be Synced, is "
time="2023-11-03T13:18:42Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:18:42Z" level=info msg="expectation succeeded: no conditions"
time="2023-11-03T13:18:42Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedCreateFromPartialFile (12.62s)
=== RUN   TestNamespacedCRDStatusSubresourceAction
time="2023-11-03T13:18:42Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=60afe
time="2023-11-03T13:18:43Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-create-from-partial-file-fjcbb\" deleted\n" duration=176.585909ms execID=60afe
time="2023-11-03T13:18:43Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=81970
time="2023-11-03T13:18:43Z" level=debug msg="No resources found\n" duration=493.30001ms execID=81970
time="2023-11-03T13:18:43Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=3601f
time="2023-11-03T13:18:43Z" level=debug msg="No resources found\n" duration=231.696345ms execID=3601f
time="2023-11-03T13:18:44Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:18:44Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzkyNCwibmJmIjoxNjk5MDE3NTI0LCJpYXQiOjE2OTkwMTc1MjQsImp0aSI6IjJmMjFhOGUyLTllZTktNDIzNy1hM2UxLTM1NWIyNmFlYTYyZSJ9.3-mfgoGUstlT3g-EVwYqQbFx14zCoELZI0pIL7uYsaY --insecure" dir= execID=084c5
time="2023-11-03T13:18:44Z" level=debug duration=107.292568ms execID=084c5
time="2023-11-03T13:18:44Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=5f774
time="2023-11-03T13:18:44Z" level=debug duration=2.059158ms execID=5f774
time="2023-11-03T13:18:44Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=5ae28
time="2023-11-03T13:18:44Z" level=debug duration=1.687762ms execID=5ae28
time="2023-11-03T13:18:44Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=c2ec8
time="2023-11-03T13:18:44Z" level=debug duration=1.618297ms execID=c2ec8
time="2023-11-03T13:18:44Z" level=info msg="pkill -9 gpg-agent" dir= execID=0d98f
time="2023-11-03T13:18:44Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=8ff0d
time="2023-11-03T13:18:44Z" level=debug duration=10.854679ms execID=8ff0d
time="2023-11-03T13:18:44Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=af012
time="2023-11-03T13:18:44Z" level=debug duration=32.172623ms execID=af012
time="2023-11-03T13:18:44Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=ee752
time="2023-11-03T13:18:44Z" level=debug duration=1.54086ms execID=ee752
time="2023-11-03T13:18:44Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=d6703
time="2023-11-03T13:18:44Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=20.181446ms execID=d6703
time="2023-11-03T13:18:44Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=753a9
time="2023-11-03T13:18:44Z" level=debug duration=26.164438ms execID=753a9
time="2023-11-03T13:18:44Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=30ca8
time="2023-11-03T13:18:44Z" level=debug duration=20.528145ms execID=30ca8
time="2023-11-03T13:18:44Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=7b8c4
time="2023-11-03T13:18:44Z" level=debug duration=2.802707ms execID=7b8c4
time="2023-11-03T13:18:44Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=c3d8d
Handling connection for 9081
time="2023-11-03T13:18:44Z" level=debug duration=76.870117ms execID=c3d8d
time="2023-11-03T13:18:44Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-crd-status-subresource-action-gaqit" dir= execID=f33d9
time="2023-11-03T13:18:44Z" level=debug msg="namespace/argocd-e2e--test-namespaced-crd-status-subresource-action-gaqit created\n" duration=122.869423ms execID=f33d9
time="2023-11-03T13:18:44Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-crd-status-subresource-action-gaqit e2e.argoproj.io=true" dir= execID=a0c86
time="2023-11-03T13:18:45Z" level=debug msg="namespace/argocd-e2e--test-namespaced-crd-status-subresource-action-gaqit labeled\n" duration=273.722513ms execID=a0c86
time="2023-11-03T13:18:45Z" level=info msg="clean state" duration=2.348970988s id=TestNamespacedCRDStatusSubresourceAction-gaqit name=TestNamespacedCRDStatusSubresourceAction password=password username=admin
time="2023-11-03T13:18:46Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-crd-status-subresource-action --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path crd-subresource --project default --dest-namespace argocd-e2e--test-namespaced-crd-status-subresource-action-gaqit --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzkyNCwibmJmIjoxNjk5MDE3NTI0LCJpYXQiOjE2OTkwMTc1MjQsImp0aSI6IjJmMjFhOGUyLTllZTktNDIzNy1hM2UxLTM1NWIyNmFlYTYyZSJ9.3-mfgoGUstlT3g-EVwYqQbFx14zCoELZI0pIL7uYsaY --insecure" dir= execID=1f03d
time="2023-11-03T13:18:46Z" level=debug msg="application 'test-namespaced-crd-status-subresource-action' created\n" duration=276.940554ms execID=1f03d
time="2023-11-03T13:18:46Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:18:46Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-crd-status-subresource-action --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzkyNCwibmJmIjoxNjk5MDE3NTI0LCJpYXQiOjE2OTkwMTc1MjQsImp0aSI6IjJmMjFhOGUyLTllZTktNDIzNy1hM2UxLTM1NWIyNmFlYTYyZSJ9.3-mfgoGUstlT3g-EVwYqQbFx14zCoELZI0pIL7uYsaY --insecure" dir= execID=cd171
time="2023-11-03T13:18:56Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:18:51+00:00  apiextensions.k8s.io  CustomResourceDefinition                                                                   nonstatussubresources.argoproj.io  OutOfSync  Missing              \n2023-11-03T13:18:51+00:00  apiextensions.k8s.io  CustomResourceDefinition                                                                   statussubresources.argoproj.io     OutOfSync  Missing              \n2023-11-03T13:18:51+00:00  argoproj.io           NonStatusSubResource      argocd-e2e--test-namespaced-crd-status-subresource-action-gaqit  non-status-subresource             OutOfSync  Missing              \n2023-11-03T13:18:51+00:00  argoproj.io           StatusSubResource         argocd-e2e--test-namespaced-crd-status-subresource-action-gaqit    status-subresource               OutOfSync  Missing              \n2023-11-03T13:18:54+00:00  argoproj.io           NonStatusSubResource      argocd-e2e--test-namespaced-crd-status-subresource-action-gaqit  non-status-subresource             OutOfSync  Missing              nonstatussubresource.argoproj.io/non-status-subresource created\n2023-11-03T13:18:54+00:00  argoproj.io           StatusSubResource         argocd-e2e--test-namespaced-crd-status-subresource-action-gaqit    status-subresource               OutOfSync  Missing              statussubresource.argoproj.io/status-subresource created\n2023-11-03T13:18:54+00:00  apiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-namespaced-crd-status-subresource-action-gaqit  nonstatussubresources.argoproj.io   Running    Synced              customresourcedefinition.apiextensions.k8s.io/nonstatussubresources.argoproj.io created\n2023-11-03T13:18:54+00:00  apiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-namespaced-crd-status-subresource-action-gaqit  statussubresources.argoproj.io      Running    Synced              customresourcedefinition.apiextensions.k8s.io/statussubresources.argoproj.io created\n\nName:               argocd-e2e-external/test-namespaced-crd-status-subresource-action\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-crd-status-subresource-action-gaqit\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-crd-status-subresource-action\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               crd-subresource\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (09f2d95)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      09f2d95c4d806f46703910d792ef07450beaadb4\nPhase:              Succeeded\nStart:              2023-11-03 13:18:46 +0000 UTC\nFinished:           2023-11-03 13:18:54 +0000 UTC\nDuration:           8s\nMessage:            successfully synced (all tasks run)\n\nGROUP                 KIND                      NAMESPACE                                                        NAME                               STATUS   HEALTH  HOOK  MESSAGE\napiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-namespaced-crd-status-subresource-action-gaqit  nonstatussubresources.argoproj.io  Running  Synced        customresourcedefinition.apiextensions.k8s.io/nonstatussubresources.argoproj.io created\napiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-namespaced-crd-status-subresource-action-gaqit  statussubresources.argoproj.io     Running  Synced        customresourcedefinition.apiextensions.k8s.io/statussubresources.argoproj.io created\nargoproj.io           NonStatusSubResource      argocd-e2e--test-namespaced-crd-status-subresource-action-gaqit  non-status-subresource             Synced                 nonstatussubresource.argoproj.io/non-status-subresource created\nargoproj.io           StatusSubResource         argocd-e2e--test-namespaced-crd-status-subresource-action-gaqit  status-subresource                 Synced                 statussubresource.argoproj.io/status-subresource created\napiextensions.k8s.io  CustomResourceDefinition                                                                   nonstatussubresources.argoproj.io  Synced                 \napiextensions.k8s.io  CustomResourceDefinition                                                                   statussubresources.argoproj.io     Synced                 \n" duration=9.645229288s execID=cd171
time="2023-11-03T13:18:56Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:18:56Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:18:56Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:18:56Z" level=info msg="../../dist/argocd app get argocd-e2e-external/test-namespaced-crd-status-subresource-action --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzkyNCwibmJmIjoxNjk5MDE3NTI0LCJpYXQiOjE2OTkwMTc1MjQsImp0aSI6IjJmMjFhOGUyLTllZTktNDIzNy1hM2UxLTM1NWIyNmFlYTYyZSJ9.3-mfgoGUstlT3g-EVwYqQbFx14zCoELZI0pIL7uYsaY --insecure" dir= execID=d0282
time="2023-11-03T13:18:56Z" level=debug msg="Name:               argocd-e2e-external/test-namespaced-crd-status-subresource-action\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-crd-status-subresource-action-gaqit\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-namespaced-crd-status-subresource-action\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               crd-subresource\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (09f2d95)\nHealth Status:      Healthy\n\nGROUP                 KIND                      NAMESPACE                                                        NAME                               STATUS   HEALTH  HOOK  MESSAGE\napiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-namespaced-crd-status-subresource-action-gaqit  nonstatussubresources.argoproj.io  Running  Synced        customresourcedefinition.apiextensions.k8s.io/nonstatussubresources.argoproj.io created\napiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-namespaced-crd-status-subresource-action-gaqit  statussubresources.argoproj.io     Running  Synced        customresourcedefinition.apiextensions.k8s.io/statussubresources.argoproj.io created\nargoproj.io           NonStatusSubResource      argocd-e2e--test-namespaced-crd-status-subresource-action-gaqit  non-status-subresource             Synced                 nonstatussubresource.argoproj.io/non-status-subresource created\nargoproj.io           StatusSubResource         argocd-e2e--test-namespaced-crd-status-subresource-action-gaqit  status-subresource                 Synced                 statussubresource.argoproj.io/status-subresource created\napiextensions.k8s.io  CustomResourceDefinition                                                                   nonstatussubresources.argoproj.io  Synced                 \napiextensions.k8s.io  CustomResourceDefinition                                                                   statussubresources.argoproj.io     Synced                 \n" duration=146.274013ms execID=d0282
time="2023-11-03T13:18:56Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:18:56Z" level=info msg="../../dist/argocd app actions run argocd-e2e-external/test-namespaced-crd-status-subresource-action --kind StatusSubResource update-both --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzkyNCwibmJmIjoxNjk5MDE3NTI0LCJpYXQiOjE2OTkwMTc1MjQsImp0aSI6IjJmMjFhOGUyLTllZTktNDIzNy1hM2UxLTM1NWIyNmFlYTYyZSJ9.3-mfgoGUstlT3g-EVwYqQbFx14zCoELZI0pIL7uYsaY --insecure" dir= execID=6842d
time="2023-11-03T13:18:56Z" level=debug duration=159.922105ms execID=6842d
time="2023-11-03T13:18:56Z" level=info msg="kubectl -n argocd-e2e--test-namespaced-crd-status-subresource-action-gaqit get statussubresources status-subresource -o jsonpath={.spec.foo}" dir=. execID=b3454
time="2023-11-03T13:18:56Z" level=debug msg=update-both duration=406.987599ms execID=b3454
time="2023-11-03T13:18:56Z" level=info msg="kubectl -n argocd-e2e--test-namespaced-crd-status-subresource-action-gaqit get statussubresources status-subresource -o jsonpath={.status.bar}" dir=. execID=9e0c8
time="2023-11-03T13:18:57Z" level=debug msg=update-both duration=301.949987ms execID=9e0c8
time="2023-11-03T13:18:57Z" level=info msg="../../dist/argocd app actions run argocd-e2e-external/test-namespaced-crd-status-subresource-action --kind StatusSubResource update-spec --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzkyNCwibmJmIjoxNjk5MDE3NTI0LCJpYXQiOjE2OTkwMTc1MjQsImp0aSI6IjJmMjFhOGUyLTllZTktNDIzNy1hM2UxLTM1NWIyNmFlYTYyZSJ9.3-mfgoGUstlT3g-EVwYqQbFx14zCoELZI0pIL7uYsaY --insecure" dir= execID=e8fcf
time="2023-11-03T13:18:57Z" level=debug duration=185.284652ms execID=e8fcf
time="2023-11-03T13:18:57Z" level=info msg="kubectl -n argocd-e2e--test-namespaced-crd-status-subresource-action-gaqit get statussubresources status-subresource -o jsonpath={.spec.foo}" dir=. execID=9e906
time="2023-11-03T13:18:57Z" level=debug msg=update-spec duration=226.431239ms execID=9e906
time="2023-11-03T13:18:57Z" level=info msg="../../dist/argocd app actions run argocd-e2e-external/test-namespaced-crd-status-subresource-action --kind StatusSubResource update-status --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzkyNCwibmJmIjoxNjk5MDE3NTI0LCJpYXQiOjE2OTkwMTc1MjQsImp0aSI6IjJmMjFhOGUyLTllZTktNDIzNy1hM2UxLTM1NWIyNmFlYTYyZSJ9.3-mfgoGUstlT3g-EVwYqQbFx14zCoELZI0pIL7uYsaY --insecure" dir= execID=15a64
time="2023-11-03T13:18:57Z" level=debug duration=199.178269ms execID=15a64
time="2023-11-03T13:18:57Z" level=info msg="kubectl -n argocd-e2e--test-namespaced-crd-status-subresource-action-gaqit get statussubresources status-subresource -o jsonpath={.status.bar}" dir=. execID=ea276
time="2023-11-03T13:18:58Z" level=debug msg=update-status duration=186.155983ms execID=ea276
time="2023-11-03T13:18:58Z" level=info msg="../../dist/argocd app actions run argocd-e2e-external/test-namespaced-crd-status-subresource-action --kind NonStatusSubResource update-both --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzkyNCwibmJmIjoxNjk5MDE3NTI0LCJpYXQiOjE2OTkwMTc1MjQsImp0aSI6IjJmMjFhOGUyLTllZTktNDIzNy1hM2UxLTM1NWIyNmFlYTYyZSJ9.3-mfgoGUstlT3g-EVwYqQbFx14zCoELZI0pIL7uYsaY --insecure" dir= execID=0056f
time="2023-11-03T13:18:58Z" level=debug duration=148.230894ms execID=0056f
time="2023-11-03T13:18:58Z" level=info msg="kubectl -n argocd-e2e--test-namespaced-crd-status-subresource-action-gaqit get nonstatussubresources non-status-subresource -o jsonpath={.spec.foo}" dir=. execID=297a5
time="2023-11-03T13:18:58Z" level=debug msg=update-both duration=244.982131ms execID=297a5
time="2023-11-03T13:18:58Z" level=info msg="kubectl -n argocd-e2e--test-namespaced-crd-status-subresource-action-gaqit get nonstatussubresources non-status-subresource -o jsonpath={.status.bar}" dir=. execID=a4154
time="2023-11-03T13:18:58Z" level=debug msg=update-both duration=334.15373ms execID=a4154
time="2023-11-03T13:18:58Z" level=info msg="../../dist/argocd app actions run argocd-e2e-external/test-namespaced-crd-status-subresource-action --kind NonStatusSubResource update-spec --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzkyNCwibmJmIjoxNjk5MDE3NTI0LCJpYXQiOjE2OTkwMTc1MjQsImp0aSI6IjJmMjFhOGUyLTllZTktNDIzNy1hM2UxLTM1NWIyNmFlYTYyZSJ9.3-mfgoGUstlT3g-EVwYqQbFx14zCoELZI0pIL7uYsaY --insecure" dir= execID=187d3
time="2023-11-03T13:18:58Z" level=debug duration=132.478694ms execID=187d3
time="2023-11-03T13:18:58Z" level=info msg="kubectl -n argocd-e2e--test-namespaced-crd-status-subresource-action-gaqit get nonstatussubresources non-status-subresource -o jsonpath={.spec.foo}" dir=. execID=1db5f
time="2023-11-03T13:18:59Z" level=debug msg=update-spec duration=243.408408ms execID=1db5f
time="2023-11-03T13:18:59Z" level=info msg="../../dist/argocd app actions run argocd-e2e-external/test-namespaced-crd-status-subresource-action --kind NonStatusSubResource update-status --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzkyNCwibmJmIjoxNjk5MDE3NTI0LCJpYXQiOjE2OTkwMTc1MjQsImp0aSI6IjJmMjFhOGUyLTllZTktNDIzNy1hM2UxLTM1NWIyNmFlYTYyZSJ9.3-mfgoGUstlT3g-EVwYqQbFx14zCoELZI0pIL7uYsaY --insecure" dir= execID=c0512
time="2023-11-03T13:18:59Z" level=debug duration=220.333413ms execID=c0512
time="2023-11-03T13:18:59Z" level=info msg="kubectl -n argocd-e2e--test-namespaced-crd-status-subresource-action-gaqit get nonstatussubresources non-status-subresource -o jsonpath={.status.bar}" dir=. execID=ba26e
time="2023-11-03T13:18:59Z" level=debug msg=update-status duration=184.000197ms execID=ba26e
time="2023-11-03T13:18:59Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedCRDStatusSubresourceAction (16.65s)
=== RUN   TestNamespacedAppLogs
    fixture.go:901: 
--- SKIP: TestNamespacedAppLogs (0.00s)
=== RUN   TestNamespacedAppWaitOperationInProgress
time="2023-11-03T13:18:59Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=6f6e7
time="2023-11-03T13:18:59Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-crd-status-subresource-action-gaqit\" deleted\n" duration=240.39907ms execID=6f6e7
time="2023-11-03T13:18:59Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=d20e8
time="2023-11-03T13:19:00Z" level=debug msg="No resources found\n" duration=358.761356ms execID=d20e8
time="2023-11-03T13:19:00Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=5bd46
time="2023-11-03T13:19:00Z" level=debug msg="No resources found\n" duration=252.565181ms execID=5bd46
time="2023-11-03T13:19:01Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:19:01Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzk0MSwibmJmIjoxNjk5MDE3NTQxLCJpYXQiOjE2OTkwMTc1NDEsImp0aSI6ImM2ZTVkMTMxLTI5ZTgtNGViYS04OWFhLWM2ZGMyMjhlMDUyOSJ9.50WrxegF1BDiWwKmRVrUTFLAD-2B0kS61A-Wv85BGaY --insecure" dir= execID=ae40e
time="2023-11-03T13:19:01Z" level=debug duration=72.151368ms execID=ae40e
time="2023-11-03T13:19:01Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=598d8
time="2023-11-03T13:19:01Z" level=debug duration=1.919086ms execID=598d8
time="2023-11-03T13:19:01Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=6a831
time="2023-11-03T13:19:01Z" level=debug duration=1.583528ms execID=6a831
time="2023-11-03T13:19:01Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=a8e91
time="2023-11-03T13:19:01Z" level=debug duration=1.479914ms execID=a8e91
time="2023-11-03T13:19:01Z" level=info msg="pkill -9 gpg-agent" dir= execID=bd5d5
time="2023-11-03T13:19:01Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=aa263
time="2023-11-03T13:19:01Z" level=debug duration=9.486458ms execID=aa263
time="2023-11-03T13:19:01Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=0b3b5
time="2023-11-03T13:19:01Z" level=debug duration=33.268972ms execID=0b3b5
time="2023-11-03T13:19:01Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=0794e
time="2023-11-03T13:19:01Z" level=debug duration=1.70108ms execID=0794e
time="2023-11-03T13:19:01Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=a8f19
time="2023-11-03T13:19:01Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.053936ms execID=a8f19
time="2023-11-03T13:19:01Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=e3ebb
time="2023-11-03T13:19:01Z" level=debug duration=33.162898ms execID=e3ebb
time="2023-11-03T13:19:01Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=b7030
time="2023-11-03T13:19:01Z" level=debug duration=20.57846ms execID=b7030
time="2023-11-03T13:19:01Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=c3cf4
time="2023-11-03T13:19:01Z" level=debug duration=2.750025ms execID=c3cf4
time="2023-11-03T13:19:01Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=8938d
Handling connection for 9081
time="2023-11-03T13:19:01Z" level=debug duration=59.057928ms execID=8938d
time="2023-11-03T13:19:01Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-app-wait-operation-in-progres-iirba" dir= execID=c2749
time="2023-11-03T13:19:01Z" level=debug msg="namespace/argocd-e2e--test-namespaced-app-wait-operation-in-progres-iirba created\n" duration=156.4595ms execID=c2749
time="2023-11-03T13:19:01Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-app-wait-operation-in-progres-iirba e2e.argoproj.io=true" dir= execID=2ac51
time="2023-11-03T13:19:02Z" level=debug msg="namespace/argocd-e2e--test-namespaced-app-wait-operation-in-progres-iirba labeled\n" duration=262.338191ms execID=2ac51
time="2023-11-03T13:19:02Z" level=info msg="clean state" duration=2.576342201s id=TestNamespacedAppWaitOperationInProgress-iirba name=TestNamespacedAppWaitOperationInProgress password=password username=admin
time="2023-11-03T13:19:03Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-app-wait-operation-in-progress --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path hook-and-deployment --project default --dest-namespace argocd-e2e--test-namespaced-app-wait-operation-in-progres-iirba --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzk0MSwibmJmIjoxNjk5MDE3NTQxLCJpYXQiOjE2OTkwMTc1NDEsImp0aSI6ImM2ZTVkMTMxLTI5ZTgtNGViYS04OWFhLWM2ZGMyMjhlMDUyOSJ9.50WrxegF1BDiWwKmRVrUTFLAD-2B0kS61A-Wv85BGaY --insecure" dir= execID=a96d0
time="2023-11-03T13:19:03Z" level=debug msg="application 'test-namespaced-app-wait-operation-in-progress' created\n" duration=248.861085ms execID=a96d0
time="2023-11-03T13:19:03Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:19:03Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-app-wait-operation-in-progress --timeout 30 --async --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzk0MSwibmJmIjoxNjk5MDE3NTQxLCJpYXQiOjE2OTkwMTc1NDEsImp0aSI6ImM2ZTVkMTMxLTI5ZTgtNGViYS04OWFhLWM2ZGMyMjhlMDUyOSJ9.50WrxegF1BDiWwKmRVrUTFLAD-2B0kS61A-Wv85BGaY --insecure" dir= execID=9e0ac
time="2023-11-03T13:19:03Z" level=debug duration=116.18613ms execID=9e0ac
time="2023-11-03T13:19:03Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:19:03Z" level=info msg="expectation succeeded: operation phase should be Running, is Running"
time="2023-11-03T13:19:03Z" level=info msg="../../dist/argocd app wait argocd-e2e-external/test-namespaced-app-wait-operation-in-progress --suspended --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzk0MSwibmJmIjoxNjk5MDE3NTQxLCJpYXQiOjE2OTkwMTc1NDEsImp0aSI6ImM2ZTVkMTMxLTI5ZTgtNGViYS04OWFhLWM2ZGMyMjhlMDUyOSJ9.50WrxegF1BDiWwKmRVrUTFLAD-2B0kS61A-Wv85BGaY --insecure" dir= execID=97256
time="2023-11-03T13:19:10Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:19:08+00:00   apps  Deployment  argocd-e2e--test-namespaced-app-wait-operation-in-progres-iirba         my-deployment  OutOfSync  Missing              \n2023-11-03T13:19:10+00:00  batch         Job  argocd-e2e--test-namespaced-app-wait-operation-in-progres-iirba               my-hook   Running    Synced        Sync  job.batch/my-hook created\n2023-11-03T13:19:10+00:00   apps  Deployment  argocd-e2e--test-namespaced-app-wait-operation-in-progres-iirba         my-deployment  OutOfSync  Missing              deployment.apps/my-deployment created\n2023-11-03T13:19:10+00:00  batch         Job  argocd-e2e--test-namespaced-app-wait-operation-in-progres-iirba               my-hook    Failed   Synced        Sync  Lua returned an invalid health status\n\nName:               argocd-e2e-external/test-namespaced-app-wait-operation-in-progress\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-app-wait-operation-in-progres-iirba\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-app-wait-operation-in-progress\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               hook-and-deployment\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (61b5f81)\nHealth Status:      Suspended\n\n\nGROUP  KIND        NAMESPACE                                                        NAME           STATUS  HEALTH     HOOK  MESSAGE\napps   Deployment  argocd-e2e--test-namespaced-app-wait-operation-in-progres-iirba  my-deployment  Synced  Suspended        deployment.apps/my-deployment created\nbatch  Job         argocd-e2e--test-namespaced-app-wait-operation-in-progres-iirba  my-hook        Failed             Sync  Lua returned an invalid health status\n" duration=7.364339952s execID=97256
time="2023-11-03T13:19:10Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedAppWaitOperationInProgress (11.34s)
=== RUN   TestNamespacedSyncOptionReplace
time="2023-11-03T13:19:10Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=9d9d4
time="2023-11-03T13:19:11Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-app-wait-operation-in-progres-iirba\" deleted\n" duration=283.63696ms execID=9d9d4
time="2023-11-03T13:19:11Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=44a74
time="2023-11-03T13:19:11Z" level=debug msg="No resources found\n" duration=363.928188ms execID=44a74
time="2023-11-03T13:19:11Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=b9df2
time="2023-11-03T13:19:11Z" level=debug msg="No resources found\n" duration=161.474019ms execID=b9df2
time="2023-11-03T13:19:12Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:19:12Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzk1MiwibmJmIjoxNjk5MDE3NTUyLCJpYXQiOjE2OTkwMTc1NTIsImp0aSI6IjI0NDFmYmNlLWRmMTktNGM0Ni1hODQ3LWU3YjlkOWRlZDA1YiJ9.4TZvfdnGBuVrjIfgRWfg8aXqjd2LMAi2UlqvNNq8xAc --insecure" dir= execID=ce0ee
time="2023-11-03T13:19:12Z" level=debug duration=72.652006ms execID=ce0ee
time="2023-11-03T13:19:12Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=fb91c
time="2023-11-03T13:19:12Z" level=debug duration=2.08872ms execID=fb91c
time="2023-11-03T13:19:12Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=fc0c6
time="2023-11-03T13:19:12Z" level=debug duration=1.656751ms execID=fc0c6
time="2023-11-03T13:19:12Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=caf0b
time="2023-11-03T13:19:12Z" level=debug duration=1.470401ms execID=caf0b
time="2023-11-03T13:19:12Z" level=info msg="pkill -9 gpg-agent" dir= execID=68241
time="2023-11-03T13:19:12Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=e2905
time="2023-11-03T13:19:12Z" level=debug duration=10.135491ms execID=e2905
time="2023-11-03T13:19:12Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=e20f0
time="2023-11-03T13:19:12Z" level=debug duration=35.602823ms execID=e20f0
time="2023-11-03T13:19:12Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=f0963
time="2023-11-03T13:19:12Z" level=debug duration=1.814437ms execID=f0963
time="2023-11-03T13:19:12Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=42b55
time="2023-11-03T13:19:12Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.620244ms execID=42b55
time="2023-11-03T13:19:12Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=b2a7d
time="2023-11-03T13:19:12Z" level=debug duration=26.266624ms execID=b2a7d
time="2023-11-03T13:19:12Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=098e4
time="2023-11-03T13:19:12Z" level=debug duration=30.932461ms execID=098e4
time="2023-11-03T13:19:12Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=0feee
time="2023-11-03T13:19:12Z" level=debug duration=2.405709ms execID=0feee
time="2023-11-03T13:19:12Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=fa7df
Handling connection for 9081
time="2023-11-03T13:19:13Z" level=debug duration=61.857242ms execID=fa7df
time="2023-11-03T13:19:13Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-sync-option-replace-eypkg" dir= execID=3b378
time="2023-11-03T13:19:13Z" level=debug msg="namespace/argocd-e2e--test-namespaced-sync-option-replace-eypkg created\n" duration=165.433012ms execID=3b378
time="2023-11-03T13:19:13Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-sync-option-replace-eypkg e2e.argoproj.io=true" dir= execID=76947
time="2023-11-03T13:19:13Z" level=debug msg="namespace/argocd-e2e--test-namespaced-sync-option-replace-eypkg labeled\n" duration=256.220864ms execID=76947
time="2023-11-03T13:19:13Z" level=info msg="clean state" duration=2.532965522s id=TestNamespacedSyncOptionReplace-eypkg name=TestNamespacedSyncOptionReplace password=password username=admin
time="2023-11-03T13:19:14Z" level=info msg=patching jsonPatch="[{\"op\": \"add\", \"path\": \"/metadata/annotations\", \"value\": {\"argocd.argoproj.io/sync-options\": \"Replace=true\"}}]" path=config-map/config-map.yaml
time="2023-11-03T13:19:14Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:19:14Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"data\":{\"foo\":\"bar\"},\"kind\":\"ConfigMap\",\"metadata\":{\"name\":\"my-map\"}}"
time="2023-11-03T13:19:14Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:19:14Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=25083
time="2023-11-03T13:19:14Z" level=debug msg="diff --git a/config-map/config-map.yaml b/config-map/config-map.yaml\nindex b781028..7f81ec6 100644\n--- a/config-map/config-map.yaml\n+++ b/config-map/config-map.yaml\n@@ -1,6 +1,8 @@\n apiVersion: v1\n+data:\n+  foo: bar\n kind: ConfigMap\n metadata:\n+  annotations:\n+    argocd.argoproj.io/sync-options: Replace=true\n   name: my-map\n-data:\n-  foo: bar\n\\ No newline at end of file\n" duration=5.057731ms execID=25083
time="2023-11-03T13:19:14Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=0cc94
time="2023-11-03T13:19:14Z" level=debug msg="[master 402a53f] patch\n 1 file changed, 4 insertions(+), 2 deletions(-)\n" duration=12.246009ms execID=0cc94
time="2023-11-03T13:19:14Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=9f54c
Handling connection for 9081
time="2023-11-03T13:19:14Z" level=debug duration=38.714301ms execID=9f54c
time="2023-11-03T13:19:14Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-sync-option-replace --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path config-map --project default --dest-namespace argocd-e2e--test-namespaced-sync-option-replace-eypkg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzk1MiwibmJmIjoxNjk5MDE3NTUyLCJpYXQiOjE2OTkwMTc1NTIsImp0aSI6IjI0NDFmYmNlLWRmMTktNGM0Ni1hODQ3LWU3YjlkOWRlZDA1YiJ9.4TZvfdnGBuVrjIfgRWfg8aXqjd2LMAi2UlqvNNq8xAc --insecure" dir= execID=81176
time="2023-11-03T13:19:14Z" level=debug msg="application 'test-namespaced-sync-option-replace' created\n" duration=244.606383ms execID=81176
time="2023-11-03T13:19:14Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:19:14Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-sync-option-replace --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzk1MiwibmJmIjoxNjk5MDE3NTUyLCJpYXQiOjE2OTkwMTc1NTIsImp0aSI6IjI0NDFmYmNlLWRmMTktNGM0Ni1hODQ3LWU3YjlkOWRlZDA1YiJ9.4TZvfdnGBuVrjIfgRWfg8aXqjd2LMAi2UlqvNNq8xAc --insecure" dir= execID=44bbd
time="2023-11-03T13:19:20Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:19:19+00:00          ConfigMap  argocd-e2e--test-namespaced-sync-option-replace-eypkg                my-map  OutOfSync  Missing              \n2023-11-03T13:19:20+00:00          ConfigMap  argocd-e2e--test-namespaced-sync-option-replace-eypkg                my-map  OutOfSync  Missing              configmap/my-map created\n2023-11-03T13:19:20+00:00          ConfigMap  argocd-e2e--test-namespaced-sync-option-replace-eypkg                my-map    Synced  Missing              configmap/my-map created\n\nName:               argocd-e2e-external/test-namespaced-sync-option-replace\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-sync-option-replace-eypkg\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-sync-option-replace\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               config-map\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (402a53f)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      402a53f4f8623172d0fe746a775d4d120b508cb1\nPhase:              Succeeded\nStart:              2023-11-03 13:19:14 +0000 UTC\nFinished:           2023-11-03 13:19:20 +0000 UTC\nDuration:           6s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                              NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-namespaced-sync-option-replace-eypkg  my-map  Synced                configmap/my-map created\n" duration=5.533156818s execID=44bbd
time="2023-11-03T13:19:20Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:19:20Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:19:20Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-sync-option-replace --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzk1MiwibmJmIjoxNjk5MDE3NTUyLCJpYXQiOjE2OTkwMTc1NTIsImp0aSI6IjI0NDFmYmNlLWRmMTktNGM0Ni1hODQ3LWU3YjlkOWRlZDA1YiJ9.4TZvfdnGBuVrjIfgRWfg8aXqjd2LMAi2UlqvNNq8xAc --insecure" dir= execID=04469
time="2023-11-03T13:19:20Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                             NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:19:20+00:00          ConfigMap  argocd-e2e--test-namespaced-sync-option-replace-eypkg                my-map    Synced                       \n\nName:               argocd-e2e-external/test-namespaced-sync-option-replace\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-sync-option-replace-eypkg\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-sync-option-replace\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               config-map\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (402a53f)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      402a53f4f8623172d0fe746a775d4d120b508cb1\nPhase:              Succeeded\nStart:              2023-11-03 13:19:20 +0000 UTC\nFinished:           2023-11-03 13:19:20 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                              NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-namespaced-sync-option-replace-eypkg  my-map  Synced                configmap/my-map replaced\n" duration=219.530212ms execID=04469
time="2023-11-03T13:19:20Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:19:20Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:19:20Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedSyncOptionReplace (9.61s)
=== RUN   TestNamespacedSyncOptionReplaceFromCLI
time="2023-11-03T13:19:20Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=23050
time="2023-11-03T13:19:20Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-sync-option-replace-eypkg\" deleted\n" duration=191.518353ms execID=23050
time="2023-11-03T13:19:20Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=18294
time="2023-11-03T13:19:21Z" level=debug msg="No resources found\n" duration=347.676109ms execID=18294
time="2023-11-03T13:19:21Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=d1f73
time="2023-11-03T13:19:21Z" level=debug msg="No resources found\n" duration=161.905803ms execID=d1f73
time="2023-11-03T13:19:22Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:19:22Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzk2MiwibmJmIjoxNjk5MDE3NTYyLCJpYXQiOjE2OTkwMTc1NjIsImp0aSI6IjY0N2NkMGE5LTcyNWMtNDU3Yi05YzU0LTIzOGJkM2VhNmVjNiJ9.NpwBunsuUfDHwFJAeUaUzKk5sE_hldqzVQjJZbWcftk --insecure" dir= execID=ac949
time="2023-11-03T13:19:22Z" level=debug duration=120.705436ms execID=ac949
time="2023-11-03T13:19:22Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=d6558
time="2023-11-03T13:19:22Z" level=debug duration=2.150051ms execID=d6558
time="2023-11-03T13:19:22Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=3f9f4
time="2023-11-03T13:19:22Z" level=debug duration=1.702381ms execID=3f9f4
time="2023-11-03T13:19:22Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=8694f
time="2023-11-03T13:19:22Z" level=debug duration=1.521351ms execID=8694f
time="2023-11-03T13:19:22Z" level=info msg="pkill -9 gpg-agent" dir= execID=de35b
time="2023-11-03T13:19:22Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=108ff
time="2023-11-03T13:19:22Z" level=debug duration=10.244025ms execID=108ff
time="2023-11-03T13:19:22Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=3485a
time="2023-11-03T13:19:22Z" level=debug duration=33.284533ms execID=3485a
time="2023-11-03T13:19:22Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=6559f
time="2023-11-03T13:19:22Z" level=debug duration=1.751676ms execID=6559f
time="2023-11-03T13:19:22Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=cc692
time="2023-11-03T13:19:22Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.839249ms execID=cc692
time="2023-11-03T13:19:22Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=cc99b
time="2023-11-03T13:19:22Z" level=debug duration=31.703371ms execID=cc99b
time="2023-11-03T13:19:22Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=c0c2c
time="2023-11-03T13:19:22Z" level=debug duration=22.327598ms execID=c0c2c
time="2023-11-03T13:19:22Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=f1004
time="2023-11-03T13:19:22Z" level=debug duration=2.645613ms execID=f1004
time="2023-11-03T13:19:22Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=45741
Handling connection for 9081
time="2023-11-03T13:19:22Z" level=debug duration=61.106491ms execID=45741
time="2023-11-03T13:19:22Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-sync-option-replace-from-cli-csfst" dir= execID=77a93
time="2023-11-03T13:19:22Z" level=debug msg="namespace/argocd-e2e--test-namespaced-sync-option-replace-from-cli-csfst created\n" duration=136.69421ms execID=77a93
time="2023-11-03T13:19:22Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-sync-option-replace-from-cli-csfst e2e.argoproj.io=true" dir= execID=7e05d
time="2023-11-03T13:19:22Z" level=debug msg="namespace/argocd-e2e--test-namespaced-sync-option-replace-from-cli-csfst labeled\n" duration=297.226771ms execID=7e05d
time="2023-11-03T13:19:22Z" level=info msg="clean state" duration=2.340728826s id=TestNamespacedSyncOptionReplaceFromCLI-csfst name=TestNamespacedSyncOptionReplaceFromCLI password=password username=admin
time="2023-11-03T13:19:23Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-sync-option-replace-from-cli --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path config-map --project default --dest-namespace argocd-e2e--test-namespaced-sync-option-replace-from-cli-csfst --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzk2MiwibmJmIjoxNjk5MDE3NTYyLCJpYXQiOjE2OTkwMTc1NjIsImp0aSI6IjY0N2NkMGE5LTcyNWMtNDU3Yi05YzU0LTIzOGJkM2VhNmVjNiJ9.NpwBunsuUfDHwFJAeUaUzKk5sE_hldqzVQjJZbWcftk --insecure" dir= execID=f1058
time="2023-11-03T13:19:24Z" level=debug msg="application 'test-namespaced-sync-option-replace-from-cli' created\n" duration=213.521647ms execID=f1058
time="2023-11-03T13:19:24Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:19:24Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-sync-option-replace-from-cli --timeout 30 --prune --replace --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzk2MiwibmJmIjoxNjk5MDE3NTYyLCJpYXQiOjE2OTkwMTc1NjIsImp0aSI6IjY0N2NkMGE5LTcyNWMtNDU3Yi05YzU0LTIzOGJkM2VhNmVjNiJ9.NpwBunsuUfDHwFJAeUaUzKk5sE_hldqzVQjJZbWcftk --insecure" dir= execID=6c8b4
time="2023-11-03T13:19:28Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:19:27+00:00          ConfigMap  argocd-e2e--test-namespaced-sync-option-replace-from-cli-csfst                my-map  OutOfSync  Missing              \n2023-11-03T13:19:28+00:00          ConfigMap  argocd-e2e--test-namespaced-sync-option-replace-from-cli-csfst                my-map  OutOfSync  Missing              configmap/my-map created\n2023-11-03T13:19:28+00:00          ConfigMap  argocd-e2e--test-namespaced-sync-option-replace-from-cli-csfst                my-map    Synced  Missing              configmap/my-map created\n\nName:               argocd-e2e-external/test-namespaced-sync-option-replace-from-cli\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-sync-option-replace-from-cli-csfst\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-sync-option-replace-from-cli\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               config-map\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (2d0b146)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      2d0b146341c41dc659f33c3618014290511aebce\nPhase:              Succeeded\nStart:              2023-11-03 13:19:24 +0000 UTC\nFinished:           2023-11-03 13:19:28 +0000 UTC\nDuration:           4s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                                       NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-namespaced-sync-option-replace-from-cli-csfst  my-map  Synced                configmap/my-map created\n" duration=4.214740495s execID=6c8b4
time="2023-11-03T13:19:28Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:19:28Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:19:28Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-sync-option-replace-from-cli --timeout 30 --prune --replace --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzk2MiwibmJmIjoxNjk5MDE3NTYyLCJpYXQiOjE2OTkwMTc1NjIsImp0aSI6IjY0N2NkMGE5LTcyNWMtNDU3Yi05YzU0LTIzOGJkM2VhNmVjNiJ9.NpwBunsuUfDHwFJAeUaUzKk5sE_hldqzVQjJZbWcftk --insecure" dir= execID=0bb6d
time="2023-11-03T13:19:28Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                                      NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:19:28+00:00          ConfigMap  argocd-e2e--test-namespaced-sync-option-replace-from-cli-csfst                my-map    Synced                       \n\nName:               argocd-e2e-external/test-namespaced-sync-option-replace-from-cli\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-sync-option-replace-from-cli-csfst\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-sync-option-replace-from-cli\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               config-map\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (2d0b146)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      2d0b146341c41dc659f33c3618014290511aebce\nPhase:              Succeeded\nStart:              2023-11-03 13:19:28 +0000 UTC\nFinished:           2023-11-03 13:19:28 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                                       NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-namespaced-sync-option-replace-from-cli-csfst  my-map  Synced                configmap/my-map replaced\n" duration=226.784981ms execID=0bb6d
time="2023-11-03T13:19:28Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:19:28Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:19:28Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedSyncOptionReplaceFromCLI (8.03s)
=== RUN   TestNamespacedDiscoverNewCommit
time="2023-11-03T13:19:28Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=de028
time="2023-11-03T13:19:28Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-sync-option-replace-from-cli-csfst\" deleted\n" duration=171.597992ms execID=de028
time="2023-11-03T13:19:28Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=bdc2f
time="2023-11-03T13:19:29Z" level=debug msg="No resources found\n" duration=355.227748ms execID=bdc2f
time="2023-11-03T13:19:29Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=0efe1
time="2023-11-03T13:19:29Z" level=debug msg="No resources found\n" duration=219.343054ms execID=0efe1
time="2023-11-03T13:19:30Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:19:30Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzk3MCwibmJmIjoxNjk5MDE3NTcwLCJpYXQiOjE2OTkwMTc1NzAsImp0aSI6ImQ5ZTAxN2M3LTg3NGMtNDliYy1iNTQ4LTNmODEwMWRhZDdiMyJ9.lCv0JDoFTow8wrbWNQjGsgfMzzEsAXatSioy9E4qUuQ --insecure" dir= execID=4811d
time="2023-11-03T13:19:30Z" level=debug duration=78.14267ms execID=4811d
time="2023-11-03T13:19:30Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=61dd9
time="2023-11-03T13:19:30Z" level=debug duration=2.012722ms execID=61dd9
time="2023-11-03T13:19:30Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=6a317
time="2023-11-03T13:19:30Z" level=debug duration=1.64236ms execID=6a317
time="2023-11-03T13:19:30Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=c90d5
time="2023-11-03T13:19:30Z" level=debug duration=1.68012ms execID=c90d5
time="2023-11-03T13:19:30Z" level=info msg="pkill -9 gpg-agent" dir= execID=ef34c
time="2023-11-03T13:19:30Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=85c8f
time="2023-11-03T13:19:30Z" level=debug duration=9.478431ms execID=85c8f
time="2023-11-03T13:19:30Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=13333
time="2023-11-03T13:19:30Z" level=debug duration=43.36748ms execID=13333
time="2023-11-03T13:19:30Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=42eaa
time="2023-11-03T13:19:30Z" level=debug duration=1.752997ms execID=42eaa
time="2023-11-03T13:19:30Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=ff8e7
time="2023-11-03T13:19:30Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.87483ms execID=ff8e7
time="2023-11-03T13:19:30Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=983b8
time="2023-11-03T13:19:30Z" level=debug duration=26.011621ms execID=983b8
time="2023-11-03T13:19:30Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=66990
time="2023-11-03T13:19:30Z" level=debug duration=20.108284ms execID=66990
time="2023-11-03T13:19:30Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=8b40a
time="2023-11-03T13:19:30Z" level=debug duration=2.315138ms execID=8b40a
time="2023-11-03T13:19:30Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=3c22a
Handling connection for 9081
time="2023-11-03T13:19:30Z" level=debug duration=70.389656ms execID=3c22a
time="2023-11-03T13:19:30Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-discover-new-commit-lilag" dir= execID=af8c7
time="2023-11-03T13:19:30Z" level=debug msg="namespace/argocd-e2e--test-namespaced-discover-new-commit-lilag created\n" duration=151.238924ms execID=af8c7
time="2023-11-03T13:19:30Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-discover-new-commit-lilag e2e.argoproj.io=true" dir= execID=9436e
time="2023-11-03T13:19:31Z" level=debug msg="namespace/argocd-e2e--test-namespaced-discover-new-commit-lilag labeled\n" duration=296.696332ms execID=9436e
time="2023-11-03T13:19:31Z" level=info msg="clean state" duration=2.58884164s id=TestNamespacedDiscoverNewCommit-lilag name=TestNamespacedDiscoverNewCommit password=password username=admin
time="2023-11-03T13:19:32Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-discover-new-commit --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path config-map --project default --dest-namespace argocd-e2e--test-namespaced-discover-new-commit-lilag --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzk3MCwibmJmIjoxNjk5MDE3NTcwLCJpYXQiOjE2OTkwMTc1NzAsImp0aSI6ImQ5ZTAxN2M3LTg3NGMtNDliYy1iNTQ4LTNmODEwMWRhZDdiMyJ9.lCv0JDoFTow8wrbWNQjGsgfMzzEsAXatSioy9E4qUuQ --insecure" dir= execID=f8f45
time="2023-11-03T13:19:32Z" level=debug msg="application 'test-namespaced-discover-new-commit' created\n" duration=246.639428ms execID=f8f45
time="2023-11-03T13:19:32Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:19:32Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-namespaced-discover-new-commit --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzk3MCwibmJmIjoxNjk5MDE3NTcwLCJpYXQiOjE2OTkwMTc1NzAsImp0aSI6ImQ5ZTAxN2M3LTg3NGMtNDliYy1iNTQ4LTNmODEwMWRhZDdiMyJ9.lCv0JDoFTow8wrbWNQjGsgfMzzEsAXatSioy9E4qUuQ --insecure" dir= execID=6afaf
time="2023-11-03T13:19:37Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:19:37+00:00          ConfigMap  argocd-e2e--test-namespaced-discover-new-commit-lilag                my-map  OutOfSync  Missing              \n\nName:               argocd-e2e-external/test-namespaced-discover-new-commit\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-discover-new-commit-lilag\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e-external/test-namespaced-discover-new-commit\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               config-map\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (4ca4713)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      4ca4713f36b8c54f3b68773b1f9fc2d3c21ea440\nPhase:              Succeeded\nStart:              2023-11-03 13:19:32 +0000 UTC\nFinished:           2023-11-03 13:19:37 +0000 UTC\nDuration:           5s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                              NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-namespaced-discover-new-commit-lilag  my-map  Synced                configmap/my-map created\n" duration=5.212000563s execID=6afaf
time="2023-11-03T13:19:37Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:19:37Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:19:37Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/data/foo\", \"value\": \"hello\"}]" path=config-map/config-map.yaml
time="2023-11-03T13:19:37Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:19:37Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"data\":{\"foo\":\"bar\"},\"kind\":\"ConfigMap\",\"metadata\":{\"name\":\"my-map\"}}"
time="2023-11-03T13:19:37Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:19:37Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=91ab7
time="2023-11-03T13:19:37Z" level=debug msg="diff --git a/config-map/config-map.yaml b/config-map/config-map.yaml\nindex b781028..2838440 100644\n--- a/config-map/config-map.yaml\n+++ b/config-map/config-map.yaml\n@@ -1,6 +1,6 @@\n apiVersion: v1\n+data:\n+  foo: hello\n kind: ConfigMap\n metadata:\n   name: my-map\n-data:\n-  foo: bar\n\\ No newline at end of file\n" duration=4.979787ms execID=91ab7
time="2023-11-03T13:19:37Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=8e8cf
time="2023-11-03T13:19:37Z" level=debug msg="[master 8d1e6d6] patch\n 1 file changed, 2 insertions(+), 2 deletions(-)\n" duration=12.054602ms execID=8e8cf
time="2023-11-03T13:19:37Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=ebda3
Handling connection for 9081
time="2023-11-03T13:19:37Z" level=debug duration=127.754426ms execID=ebda3
time="2023-11-03T13:19:37Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:19:37Z" level=info msg="../../dist/argocd app get argocd-e2e-external/test-namespaced-discover-new-commit --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzk3MCwibmJmIjoxNjk5MDE3NTcwLCJpYXQiOjE2OTkwMTc1NzAsImp0aSI6ImQ5ZTAxN2M3LTg3NGMtNDliYy1iNTQ4LTNmODEwMWRhZDdiMyJ9.lCv0JDoFTow8wrbWNQjGsgfMzzEsAXatSioy9E4qUuQ --insecure" dir= execID=687ce
time="2023-11-03T13:19:38Z" level=debug msg="Name:               argocd-e2e-external/test-namespaced-discover-new-commit\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-discover-new-commit-lilag\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-namespaced-discover-new-commit\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               config-map\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (8d1e6d6)\nHealth Status:      Healthy\n\nGROUP  KIND       NAMESPACE                                              NAME    STATUS     HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-namespaced-discover-new-commit-lilag  my-map  OutOfSync                configmap/my-map created\n" duration=239.933066ms execID=687ce
time="2023-11-03T13:19:38Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:19:38Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:19:38Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedDiscoverNewCommit (9.51s)
=== RUN   TestNamespacedDisableManifestGeneration
time="2023-11-03T13:19:38Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=60f9d
time="2023-11-03T13:19:38Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-discover-new-commit-lilag\" deleted\n" duration=226.623921ms execID=60f9d
time="2023-11-03T13:19:38Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=6a044
time="2023-11-03T13:19:38Z" level=debug msg="No resources found\n" duration=441.458971ms execID=6a044
time="2023-11-03T13:19:38Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=68238
time="2023-11-03T13:19:38Z" level=debug msg="No resources found\n" duration=188.492887ms execID=68238
time="2023-11-03T13:19:39Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:19:39Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzk3OSwibmJmIjoxNjk5MDE3NTc5LCJpYXQiOjE2OTkwMTc1NzksImp0aSI6IjNkMzZiMTk4LWMyZDgtNDU2OS05YTY4LThlYjE4NDkzMzkyYyJ9.NpSWBaU182fZTya8kXfkx_LD5ZbtQ5b1yc8qDrwkwMY --insecure" dir= execID=77e63
time="2023-11-03T13:19:39Z" level=debug duration=94.086113ms execID=77e63
time="2023-11-03T13:19:39Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=51caf
time="2023-11-03T13:19:39Z" level=debug duration=2.010434ms execID=51caf
time="2023-11-03T13:19:39Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=c27cb
time="2023-11-03T13:19:39Z" level=debug duration=1.657927ms execID=c27cb
time="2023-11-03T13:19:39Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=437a0
time="2023-11-03T13:19:39Z" level=debug duration=1.586379ms execID=437a0
time="2023-11-03T13:19:39Z" level=info msg="pkill -9 gpg-agent" dir= execID=248fa
time="2023-11-03T13:19:39Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=2cbbb
time="2023-11-03T13:19:39Z" level=debug duration=10.484088ms execID=2cbbb
time="2023-11-03T13:19:39Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=28585
time="2023-11-03T13:19:39Z" level=debug duration=34.119351ms execID=28585
time="2023-11-03T13:19:39Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=c6b00
time="2023-11-03T13:19:39Z" level=debug duration=1.753557ms execID=c6b00
time="2023-11-03T13:19:39Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=9b3a7
time="2023-11-03T13:19:39Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=5.541246ms execID=9b3a7
time="2023-11-03T13:19:39Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=3ee54
time="2023-11-03T13:19:39Z" level=debug duration=29.285104ms execID=3ee54
time="2023-11-03T13:19:39Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=96438
time="2023-11-03T13:19:39Z" level=debug duration=22.741119ms execID=96438
time="2023-11-03T13:19:39Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=b2c0b
time="2023-11-03T13:19:39Z" level=debug duration=2.441755ms execID=b2c0b
time="2023-11-03T13:19:39Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=182f8
Handling connection for 9081
time="2023-11-03T13:19:40Z" level=debug duration=78.434922ms execID=182f8
time="2023-11-03T13:19:40Z" level=info msg="kubectl create ns argocd-e2e--test-namespaced-disable-manifest-generation-tvrcy" dir= execID=d5a03
time="2023-11-03T13:19:40Z" level=debug msg="namespace/argocd-e2e--test-namespaced-disable-manifest-generation-tvrcy created\n" duration=119.913366ms execID=d5a03
time="2023-11-03T13:19:40Z" level=info msg="kubectl label ns argocd-e2e--test-namespaced-disable-manifest-generation-tvrcy e2e.argoproj.io=true" dir= execID=c3112
time="2023-11-03T13:19:40Z" level=debug msg="namespace/argocd-e2e--test-namespaced-disable-manifest-generation-tvrcy labeled\n" duration=284.690827ms execID=c3112
time="2023-11-03T13:19:40Z" level=info msg="clean state" duration=2.419228784s id=TestNamespacedDisableManifestGeneration-tvrcy name=TestNamespacedDisableManifestGeneration password=password username=admin
time="2023-11-03T13:19:41Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-namespaced-disable-manifest-generation --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-namespaced-disable-manifest-generation-tvrcy --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzk3OSwibmJmIjoxNjk5MDE3NTc5LCJpYXQiOjE2OTkwMTc1NzksImp0aSI6IjNkMzZiMTk4LWMyZDgtNDU2OS05YTY4LThlYjE4NDkzMzkyYyJ9.NpSWBaU182fZTya8kXfkx_LD5ZbtQ5b1yc8qDrwkwMY --insecure" dir= execID=3a43c
time="2023-11-03T13:19:41Z" level=debug msg="application 'test-namespaced-disable-manifest-generation' created\n" duration=236.576738ms execID=3a43c
time="2023-11-03T13:19:41Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:19:41Z" level=info msg="../../dist/argocd app get argocd-e2e-external/test-namespaced-disable-manifest-generation --hard-refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzk3OSwibmJmIjoxNjk5MDE3NTc5LCJpYXQiOjE2OTkwMTc1NzksImp0aSI6IjNkMzZiMTk4LWMyZDgtNDU2OS05YTY4LThlYjE4NDkzMzkyYyJ9.NpSWBaU182fZTya8kXfkx_LD5ZbtQ5b1yc8qDrwkwMY --insecure" dir= execID=0f95d
time="2023-11-03T13:19:46Z" level=debug msg="Name:               argocd-e2e-external/test-namespaced-disable-manifest-generation\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-disable-manifest-generation-tvrcy\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-namespaced-disable-manifest-generation\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (958ee79)\nHealth Status:      Missing\n\nGROUP  KIND        NAMESPACE                                                      NAME          STATUS     HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-namespaced-disable-manifest-generation-tvrcy  guestbook-ui  OutOfSync  Missing        \napps   Deployment  argocd-e2e--test-namespaced-disable-manifest-generation-tvrcy  guestbook-ui  OutOfSync  Missing        \n" duration=4.576796749s execID=0f95d
time="2023-11-03T13:19:46Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:19:46Z" level=info msg="../../dist/argocd app get argocd-e2e-external/test-namespaced-disable-manifest-generation --hard-refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzk3OSwibmJmIjoxNjk5MDE3NTc5LCJpYXQiOjE2OTkwMTc1NzksImp0aSI6IjNkMzZiMTk4LWMyZDgtNDU2OS05YTY4LThlYjE4NDkzMzkyYyJ9.NpSWBaU182fZTya8kXfkx_LD5ZbtQ5b1yc8qDrwkwMY --insecure" dir= execID=4a3f8
time="2023-11-03T13:19:46Z" level=debug msg="Name:               argocd-e2e-external/test-namespaced-disable-manifest-generation\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-namespaced-disable-manifest-generation-tvrcy\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-namespaced-disable-manifest-generation\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (958ee79)\nHealth Status:      Missing\n\nGROUP                    KIND           NAMESPACE                                                      NAME          STATUS     HEALTH   HOOK  MESSAGE\n                         Service        argocd-e2e--test-namespaced-disable-manifest-generation-tvrcy  guestbook-ui  OutOfSync  Missing        \napps                     Deployment     argocd-e2e--test-namespaced-disable-manifest-generation-tvrcy  guestbook-ui  OutOfSync  Missing        \nkustomize.config.k8s.io  Kustomization  argocd-e2e--test-namespaced-disable-manifest-generation-tvrcy                OutOfSync  Missing        \n" duration=221.58279ms execID=4a3f8
time="2023-11-03T13:19:46Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:19:47Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamespacedDisableManifestGeneration (9.49s)
=== RUN   TestCreateAppInNotAllowedNamespace
time="2023-11-03T13:19:47Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=67a7b
time="2023-11-03T13:19:47Z" level=debug msg="namespace \"argocd-e2e--test-namespaced-disable-manifest-generation-tvrcy\" deleted\n" duration=228.884222ms execID=67a7b
time="2023-11-03T13:19:47Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=ca746
time="2023-11-03T13:19:48Z" level=debug msg="No resources found\n" duration=475.391849ms execID=ca746
time="2023-11-03T13:19:48Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=01b5b
time="2023-11-03T13:19:48Z" level=debug msg="No resources found\n" duration=249.135633ms execID=01b5b
time="2023-11-03T13:19:49Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:19:49Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzk4OSwibmJmIjoxNjk5MDE3NTg5LCJpYXQiOjE2OTkwMTc1ODksImp0aSI6IjZmMDgyNTY1LTllYWItNGEyMS1iY2NmLTkxZDllZjY4ZjQ4NyJ9.VY8AG7TGx0pKAdNeJrwQaZp3XiDUQHvgTsdBNbAF-3o --insecure" dir= execID=f62bd
time="2023-11-03T13:19:49Z" level=debug duration=70.228686ms execID=f62bd
time="2023-11-03T13:19:49Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=0695d
time="2023-11-03T13:19:49Z" level=debug duration=1.982972ms execID=0695d
time="2023-11-03T13:19:49Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=6f258
time="2023-11-03T13:19:49Z" level=debug duration=1.660607ms execID=6f258
time="2023-11-03T13:19:49Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=008e7
time="2023-11-03T13:19:49Z" level=debug duration=1.350201ms execID=008e7
time="2023-11-03T13:19:49Z" level=info msg="pkill -9 gpg-agent" dir= execID=5c6ef
time="2023-11-03T13:19:49Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=86998
time="2023-11-03T13:19:49Z" level=debug duration=43.666218ms execID=86998
time="2023-11-03T13:19:49Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=bcd31
time="2023-11-03T13:19:49Z" level=debug duration=52.174225ms execID=bcd31
time="2023-11-03T13:19:49Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=79865
time="2023-11-03T13:19:49Z" level=debug duration=1.894886ms execID=79865
time="2023-11-03T13:19:49Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=3e54d
time="2023-11-03T13:19:49Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.117892ms execID=3e54d
time="2023-11-03T13:19:49Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=73b54
time="2023-11-03T13:19:49Z" level=debug duration=27.60984ms execID=73b54
time="2023-11-03T13:19:49Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=21711
time="2023-11-03T13:19:49Z" level=debug duration=22.17255ms execID=21711
time="2023-11-03T13:19:49Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=f0a44
time="2023-11-03T13:19:49Z" level=debug duration=2.256552ms execID=f0a44
time="2023-11-03T13:19:49Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=5b0a9
Handling connection for 9081
time="2023-11-03T13:19:49Z" level=debug duration=58.768571ms execID=5b0a9
time="2023-11-03T13:19:49Z" level=info msg="kubectl create ns argocd-e2e--test-create-app-in-not-allowed-namespace-gsgkm" dir= execID=36730
time="2023-11-03T13:19:49Z" level=debug msg="namespace/argocd-e2e--test-create-app-in-not-allowed-namespace-gsgkm created\n" duration=155.497512ms execID=36730
time="2023-11-03T13:19:49Z" level=info msg="kubectl label ns argocd-e2e--test-create-app-in-not-allowed-namespace-gsgkm e2e.argoproj.io=true" dir= execID=223db
time="2023-11-03T13:19:50Z" level=debug msg="namespace/argocd-e2e--test-create-app-in-not-allowed-namespace-gsgkm labeled\n" duration=283.28731ms execID=223db
time="2023-11-03T13:19:50Z" level=info msg="clean state" duration=2.713395177s id=TestCreateAppInNotAllowedNamespace-gsgkm name=TestCreateAppInNotAllowedNamespace password=password username=admin
time="2023-11-03T13:19:51Z" level=info msg="../../dist/argocd app create default/test-create-app-in-not-allowed-namespace --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-create-app-in-not-allowed-namespace-gsgkm --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzk4OSwibmJmIjoxNjk5MDE3NTg5LCJpYXQiOjE2OTkwMTc1ODksImp0aSI6IjZmMDgyNTY1LTllYWItNGEyMS1iY2NmLTkxZDllZjY4ZjQ4NyJ9.VY8AG7TGx0pKAdNeJrwQaZp3XiDUQHvgTsdBNbAF-3o --insecure" dir= execID=ac0f0
time="2023-11-03T13:19:51Z" level=debug duration=227.286139ms execID=ac0f0
time="2023-11-03T13:19:51Z" level=error msg="`../../dist/argocd app create default/test-create-app-in-not-allowed-namespace --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-create-app-in-not-allowed-namespace-gsgkm --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzk4OSwibmJmIjoxNjk5MDE3NTg5LCJpYXQiOjE2OTkwMTc1ODksImp0aSI6IjZmMDgyNTY1LTllYWItNGEyMS1iY2NmLTkxZDllZjY4ZjQ4NyJ9.VY8AG7TGx0pKAdNeJrwQaZp3XiDUQHvgTsdBNbAF-3o --insecure` failed exit status 20: time=\"2023-11-03T13:19:51Z\" level=fatal msg=\"rpc error: code = Unknown desc = namespace 'default' is not permitted\"" execID=ac0f0
time="2023-11-03T13:19:51Z" level=info msg="expectation succeeded: app does not exist"
time="2023-11-03T13:19:51Z" level=info msg="expectation succeeded: error ''"
time="2023-11-03T13:19:51Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCreateAppInNotAllowedNamespace (3.97s)
=== RUN   TestGetLogsAllowNoSwitch
--- PASS: TestGetLogsAllowNoSwitch (0.00s)
=== RUN   TestGetLogsDenySwitchOn
    fixture.go:901: 
--- SKIP: TestGetLogsDenySwitchOn (0.00s)
=== RUN   TestGetLogsAllowSwitchOn
    fixture.go:901: 
--- SKIP: TestGetLogsAllowSwitchOn (0.00s)
=== RUN   TestGetLogsAllowSwitchOff
    fixture.go:901: 
--- SKIP: TestGetLogsAllowSwitchOff (0.00s)
=== RUN   TestSyncToUnsignedCommit
    fixture.go:901: 
--- SKIP: TestSyncToUnsignedCommit (0.00s)
=== RUN   TestSyncToSignedCommitWithoutKnownKey
    fixture.go:901: 
--- SKIP: TestSyncToSignedCommitWithoutKnownKey (0.00s)
=== RUN   TestSyncToSignedCommitWithKnownKey
    fixture.go:901: 
--- SKIP: TestSyncToSignedCommitWithKnownKey (0.00s)
=== RUN   TestSyncToSignedBranchWithKnownKey
    fixture.go:901: 
--- SKIP: TestSyncToSignedBranchWithKnownKey (0.00s)
=== RUN   TestSyncToSignedBranchWithUnknownKey
    fixture.go:901: 
--- SKIP: TestSyncToSignedBranchWithUnknownKey (0.00s)
=== RUN   TestSyncToUnsignedBranch
    fixture.go:901: 
--- SKIP: TestSyncToUnsignedBranch (0.00s)
=== RUN   TestSyncToSignedTagWithKnownKey
    fixture.go:901: 
--- SKIP: TestSyncToSignedTagWithKnownKey (0.00s)
=== RUN   TestSyncToSignedTagWithUnknownKey
    fixture.go:901: 
--- SKIP: TestSyncToSignedTagWithUnknownKey (0.00s)
=== RUN   TestSyncToUnsignedTag
    fixture.go:901: 
--- SKIP: TestSyncToUnsignedTag (0.00s)
=== RUN   TestAppCreation
time="2023-11-03T13:19:51Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=8ccdc
time="2023-11-03T13:19:51Z" level=debug msg="namespace \"argocd-e2e--test-create-app-in-not-allowed-namespace-gsgkm\" deleted\n" duration=212.848651ms execID=8ccdc
time="2023-11-03T13:19:51Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=f9c8e
time="2023-11-03T13:19:52Z" level=debug msg="No resources found\n" duration=458.268153ms execID=f9c8e
time="2023-11-03T13:19:52Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=70551
time="2023-11-03T13:19:52Z" level=debug msg="No resources found\n" duration=238.2426ms execID=70551
time="2023-11-03T13:19:53Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:19:53Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzk5MywibmJmIjoxNjk5MDE3NTkzLCJpYXQiOjE2OTkwMTc1OTMsImp0aSI6IjIzMWE1MGJhLTc1YTctNDI2My1hM2ViLTAyZTcyMjBhODU2YiJ9.bXrpOPuReeWtwr0jgvvPuc1d1Y_Brp3SkjufGB3x9Ok --insecure" dir= execID=f547e
time="2023-11-03T13:19:53Z" level=debug duration=72.858199ms execID=f547e
time="2023-11-03T13:19:53Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=4666e
time="2023-11-03T13:19:53Z" level=debug duration=2.002169ms execID=4666e
time="2023-11-03T13:19:53Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=52811
time="2023-11-03T13:19:53Z" level=debug duration=1.615709ms execID=52811
time="2023-11-03T13:19:53Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=d8e9f
time="2023-11-03T13:19:53Z" level=debug duration=1.547924ms execID=d8e9f
time="2023-11-03T13:19:53Z" level=info msg="pkill -9 gpg-agent" dir= execID=896a1
time="2023-11-03T13:19:53Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=af286
time="2023-11-03T13:19:53Z" level=debug duration=9.710372ms execID=af286
time="2023-11-03T13:19:53Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=3645a
time="2023-11-03T13:19:53Z" level=debug duration=33.825643ms execID=3645a
time="2023-11-03T13:19:53Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=af6fa
time="2023-11-03T13:19:53Z" level=debug duration=1.846968ms execID=af6fa
time="2023-11-03T13:19:53Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=d4c6c
time="2023-11-03T13:19:53Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.819392ms execID=d4c6c
time="2023-11-03T13:19:53Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=f6f4c
time="2023-11-03T13:19:53Z" level=debug duration=32.497132ms execID=f6f4c
time="2023-11-03T13:19:53Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=8564c
time="2023-11-03T13:19:53Z" level=debug duration=21.439212ms execID=8564c
time="2023-11-03T13:19:53Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=f1f8b
time="2023-11-03T13:19:53Z" level=debug duration=2.195911ms execID=f1f8b
time="2023-11-03T13:19:53Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=f8caf
Handling connection for 9081
time="2023-11-03T13:19:53Z" level=debug duration=62.713642ms execID=f8caf
time="2023-11-03T13:19:53Z" level=info msg="kubectl create ns argocd-e2e--test-app-creation-sufyx" dir= execID=12e59
time="2023-11-03T13:19:53Z" level=debug msg="namespace/argocd-e2e--test-app-creation-sufyx created\n" duration=156.767926ms execID=12e59
time="2023-11-03T13:19:53Z" level=info msg="kubectl label ns argocd-e2e--test-app-creation-sufyx e2e.argoproj.io=true" dir= execID=6e2eb
time="2023-11-03T13:19:54Z" level=debug msg="namespace/argocd-e2e--test-app-creation-sufyx labeled\n" duration=281.442763ms execID=6e2eb
time="2023-11-03T13:19:54Z" level=info msg="clean state" duration=2.746054861s id=TestAppCreation-sufyx name=TestAppCreation password=password username=admin
time="2023-11-03T13:19:55Z" level=info msg="../../dist/argocd app create test-app-creation --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-app-creation-sufyx --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzk5MywibmJmIjoxNjk5MDE3NTkzLCJpYXQiOjE2OTkwMTc1OTMsImp0aSI6IjIzMWE1MGJhLTc1YTctNDI2My1hM2ViLTAyZTcyMjBhODU2YiJ9.bXrpOPuReeWtwr0jgvvPuc1d1Y_Brp3SkjufGB3x9Ok --insecure" dir= execID=bc94f
time="2023-11-03T13:19:55Z" level=debug msg="application 'test-app-creation' created\n" duration=218.842073ms execID=bc94f
time="2023-11-03T13:19:55Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:19:55Z" level=info msg="pending: sync status to be OutOfSync, is "
time="2023-11-03T13:19:58Z" level=info msg="pending: sync status to be OutOfSync, is "
time="2023-11-03T13:20:01Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:20:01Z" level=info msg="expectation succeeded: found event with reason=ResourceCreated; message=create"
time="2023-11-03T13:20:01Z" level=info msg="../../dist/argocd app list --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzk5MywibmJmIjoxNjk5MDE3NTkzLCJpYXQiOjE2OTkwMTc1OTMsImp0aSI6IjIzMWE1MGJhLTc1YTctNDI2My1hM2ViLTAyZTcyMjBhODU2YiJ9.bXrpOPuReeWtwr0jgvvPuc1d1Y_Brp3SkjufGB3x9Ok --insecure" dir= execID=08252
time="2023-11-03T13:20:01Z" level=debug msg="NAME                          CLUSTER                         NAMESPACE                            PROJECT  STATUS     HEALTH   SYNCPOLICY  CONDITIONS  REPO                                                 PATH       TARGET\nargocd-e2e/test-app-creation  https://kubernetes.default.svc  argocd-e2e--test-app-creation-sufyx  default  OutOfSync  Missing  <none>      <none>      http://argocd-e2e-server:9081/argo-e2e/testdata.git  guestbook  \n" duration=60.94365ms execID=08252
time="2023-11-03T13:20:01Z" level=info msg="../../dist/argocd app create test-app-creation --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-app-creation-sufyx --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzk5MywibmJmIjoxNjk5MDE3NTkzLCJpYXQiOjE2OTkwMTc1OTMsImp0aSI6IjIzMWE1MGJhLTc1YTctNDI2My1hM2ViLTAyZTcyMjBhODU2YiJ9.bXrpOPuReeWtwr0jgvvPuc1d1Y_Brp3SkjufGB3x9Ok --insecure" dir= execID=7c854
time="2023-11-03T13:20:01Z" level=debug msg="application 'test-app-creation' unchanged\n" duration=178.433565ms execID=7c854
time="2023-11-03T13:20:01Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:20:02Z" level=info msg="../../dist/argocd app create test-app-creation --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --upsert --dest-server https://kubernetes.default.svc --path guestbook --project default --revision master --dest-namespace argocd-e2e--test-app-creation-sufyx --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwMzk5MywibmJmIjoxNjk5MDE3NTkzLCJpYXQiOjE2OTkwMTc1OTMsImp0aSI6IjIzMWE1MGJhLTc1YTctNDI2My1hM2ViLTAyZTcyMjBhODU2YiJ9.bXrpOPuReeWtwr0jgvvPuc1d1Y_Brp3SkjufGB3x9Ok --insecure" dir= execID=4097e
time="2023-11-03T13:20:02Z" level=debug msg="application 'test-app-creation' updated\n" duration=167.421047ms execID=4097e
time="2023-11-03T13:20:02Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:20:02Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestAppCreation (11.42s)
=== RUN   TestAppCreationWithoutForceUpdate
time="2023-11-03T13:20:02Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=4d0b4
time="2023-11-03T13:20:03Z" level=debug msg="namespace \"argocd-e2e--test-app-creation-sufyx\" deleted\n" duration=190.226042ms execID=4d0b4
time="2023-11-03T13:20:03Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=19288
time="2023-11-03T13:20:03Z" level=debug msg="No resources found\n" duration=484.627711ms execID=19288
time="2023-11-03T13:20:03Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=c484d
time="2023-11-03T13:20:03Z" level=debug msg="No resources found\n" duration=279.339411ms execID=c484d
time="2023-11-03T13:20:04Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:20:04Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDAwNCwibmJmIjoxNjk5MDE3NjA0LCJpYXQiOjE2OTkwMTc2MDQsImp0aSI6IjI4ZTc3NTQ5LWU2ZWQtNDVmOC05YmZhLTdjMGEyZTVlMDZlMyJ9.DXXrtZzWiDyZVbEYww91YnivzXc4cRAzgu7zOSQWHho --insecure" dir= execID=0dc25
time="2023-11-03T13:20:04Z" level=debug duration=69.149094ms execID=0dc25
time="2023-11-03T13:20:04Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=23cac
time="2023-11-03T13:20:04Z" level=debug duration=2.233214ms execID=23cac
time="2023-11-03T13:20:04Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=98397
time="2023-11-03T13:20:04Z" level=debug duration=1.656131ms execID=98397
time="2023-11-03T13:20:04Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=1ec64
time="2023-11-03T13:20:04Z" level=debug duration=1.433243ms execID=1ec64
time="2023-11-03T13:20:04Z" level=info msg="pkill -9 gpg-agent" dir= execID=e327a
time="2023-11-03T13:20:04Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=ef3f6
time="2023-11-03T13:20:04Z" level=debug duration=10.228072ms execID=ef3f6
time="2023-11-03T13:20:04Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=dab26
time="2023-11-03T13:20:04Z" level=debug duration=35.717747ms execID=dab26
time="2023-11-03T13:20:04Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=f109f
time="2023-11-03T13:20:04Z" level=debug duration=1.903714ms execID=f109f
time="2023-11-03T13:20:04Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=c31be
time="2023-11-03T13:20:04Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.977731ms execID=c31be
time="2023-11-03T13:20:04Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=c2cbf
time="2023-11-03T13:20:04Z" level=debug duration=27.789615ms execID=c2cbf
time="2023-11-03T13:20:04Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=47d44
time="2023-11-03T13:20:04Z" level=debug duration=24.111627ms execID=47d44
time="2023-11-03T13:20:04Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=8f15c
time="2023-11-03T13:20:04Z" level=debug duration=2.78413ms execID=8f15c
time="2023-11-03T13:20:04Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=ed52b
Handling connection for 9081
time="2023-11-03T13:20:05Z" level=debug duration=82.263816ms execID=ed52b
time="2023-11-03T13:20:05Z" level=info msg="kubectl create ns argocd-e2e--test-app-creation-without-force-update-riilx" dir= execID=c249b
time="2023-11-03T13:20:05Z" level=debug msg="namespace/argocd-e2e--test-app-creation-without-force-update-riilx created\n" duration=159.875775ms execID=c249b
time="2023-11-03T13:20:05Z" level=info msg="kubectl label ns argocd-e2e--test-app-creation-without-force-update-riilx e2e.argoproj.io=true" dir= execID=bb25b
time="2023-11-03T13:20:05Z" level=debug msg="namespace/argocd-e2e--test-app-creation-without-force-update-riilx labeled\n" duration=230.80309ms execID=bb25b
time="2023-11-03T13:20:05Z" level=info msg="clean state" duration=2.531703744s id=TestAppCreationWithoutForceUpdate-riilx name=TestAppCreationWithoutForceUpdate password=password username=admin
time="2023-11-03T13:20:06Z" level=info msg="../../dist/argocd app create test-app-creation-without-force-update --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-name in-cluster --path guestbook --project default --dest-namespace argocd-e2e--test-app-creation-without-force-update-riilx --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDAwNCwibmJmIjoxNjk5MDE3NjA0LCJpYXQiOjE2OTkwMTc2MDQsImp0aSI6IjI4ZTc3NTQ5LWU2ZWQtNDVmOC05YmZhLTdjMGEyZTVlMDZlMyJ9.DXXrtZzWiDyZVbEYww91YnivzXc4cRAzgu7zOSQWHho --insecure" dir= execID=28507
time="2023-11-03T13:20:06Z" level=debug msg="application 'test-app-creation-without-force-update' created\n" duration=242.478605ms execID=28507
time="2023-11-03T13:20:06Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:20:06Z" level=info msg="pending: sync status to be OutOfSync, is "
time="2023-11-03T13:20:09Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:20:09Z" level=info msg="expectation succeeded: found event with reason=ResourceCreated; message=create"
time="2023-11-03T13:20:09Z" level=info msg="../../dist/argocd app list --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDAwNCwibmJmIjoxNjk5MDE3NjA0LCJpYXQiOjE2OTkwMTc2MDQsImp0aSI6IjI4ZTc3NTQ5LWU2ZWQtNDVmOC05YmZhLTdjMGEyZTVlMDZlMyJ9.DXXrtZzWiDyZVbEYww91YnivzXc4cRAzgu7zOSQWHho --insecure" dir= execID=5362b
time="2023-11-03T13:20:09Z" level=debug msg="NAME                                               CLUSTER     NAMESPACE                                                 PROJECT  STATUS     HEALTH   SYNCPOLICY  CONDITIONS  REPO                                                 PATH       TARGET\nargocd-e2e/test-app-creation-without-force-update  in-cluster  argocd-e2e--test-app-creation-without-force-update-riilx  default  OutOfSync  Missing  <none>      <none>      http://argocd-e2e-server:9081/argo-e2e/testdata.git  guestbook  \n" duration=92.304137ms execID=5362b
time="2023-11-03T13:20:09Z" level=info msg="../../dist/argocd app create test-app-creation-without-force-update --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-name in-cluster --path guestbook --project default --dest-namespace argocd-e2e--test-app-creation-without-force-update-riilx --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDAwNCwibmJmIjoxNjk5MDE3NjA0LCJpYXQiOjE2OTkwMTc2MDQsImp0aSI6IjI4ZTc3NTQ5LWU2ZWQtNDVmOC05YmZhLTdjMGEyZTVlMDZlMyJ9.DXXrtZzWiDyZVbEYww91YnivzXc4cRAzgu7zOSQWHho --insecure" dir= execID=d8438
time="2023-11-03T13:20:09Z" level=debug duration=173.149009ms execID=d8438
time="2023-11-03T13:20:09Z" level=error msg="`../../dist/argocd app create test-app-creation-without-force-update --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-name in-cluster --path guestbook --project default --dest-namespace argocd-e2e--test-app-creation-without-force-update-riilx --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDAwNCwibmJmIjoxNjk5MDE3NjA0LCJpYXQiOjE2OTkwMTc2MDQsImp0aSI6IjI4ZTc3NTQ5LWU2ZWQtNDVmOC05YmZhLTdjMGEyZTVlMDZlMyJ9.DXXrtZzWiDyZVbEYww91YnivzXc4cRAzgu7zOSQWHho --insecure` failed exit status 20: time=\"2023-11-03T13:20:09Z\" level=fatal msg=\"rpc error: code = InvalidArgument desc = existing application spec is different, use upsert flag to force update\"" execID=d8438
time="2023-11-03T13:20:09Z" level=info msg="expectation succeeded: error ''"
time="2023-11-03T13:20:09Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestAppCreationWithoutForceUpdate (7.07s)
=== RUN   TestDeleteAppResource
time="2023-11-03T13:20:10Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=fcd7c
time="2023-11-03T13:20:10Z" level=debug msg="namespace \"argocd-e2e--test-app-creation-without-force-update-riilx\" deleted\n" duration=193.396489ms execID=fcd7c
time="2023-11-03T13:20:10Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=26fa7
time="2023-11-03T13:20:10Z" level=debug msg="No resources found\n" duration=450.119618ms execID=26fa7
time="2023-11-03T13:20:10Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=55293
time="2023-11-03T13:20:10Z" level=debug msg="No resources found\n" duration=251.678846ms execID=55293
time="2023-11-03T13:20:11Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:20:11Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDAxMSwibmJmIjoxNjk5MDE3NjExLCJpYXQiOjE2OTkwMTc2MTEsImp0aSI6IjM1MmFhN2FkLWEwNGQtNGExZC1iZjU5LWU3MzIyMGQ3NzkxMSJ9.GUcqzVZM8yLDIC7ysHeIPTqn7XeHTVH1EH0XN2hnQhA --insecure" dir= execID=fef72
time="2023-11-03T13:20:12Z" level=debug duration=114.824477ms execID=fef72
time="2023-11-03T13:20:12Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=f7321
time="2023-11-03T13:20:12Z" level=debug duration=1.888415ms execID=f7321
time="2023-11-03T13:20:12Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=eee9f
time="2023-11-03T13:20:12Z" level=debug duration=1.587821ms execID=eee9f
time="2023-11-03T13:20:12Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=e3f5e
time="2023-11-03T13:20:12Z" level=debug duration=1.524147ms execID=e3f5e
time="2023-11-03T13:20:12Z" level=info msg="pkill -9 gpg-agent" dir= execID=7d61f
time="2023-11-03T13:20:12Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=9f9b1
time="2023-11-03T13:20:12Z" level=debug duration=9.921785ms execID=9f9b1
time="2023-11-03T13:20:12Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=249f5
time="2023-11-03T13:20:12Z" level=debug duration=34.551965ms execID=249f5
time="2023-11-03T13:20:12Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=27ba8
time="2023-11-03T13:20:12Z" level=debug duration=1.787144ms execID=27ba8
time="2023-11-03T13:20:12Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=6eae7
time="2023-11-03T13:20:12Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.874296ms execID=6eae7
time="2023-11-03T13:20:12Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=f4645
time="2023-11-03T13:20:12Z" level=debug duration=35.710009ms execID=f4645
time="2023-11-03T13:20:12Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=6c1b2
time="2023-11-03T13:20:12Z" level=debug duration=22.669975ms execID=6c1b2
time="2023-11-03T13:20:12Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=57f25
time="2023-11-03T13:20:12Z" level=debug duration=2.146755ms execID=57f25
time="2023-11-03T13:20:12Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=3d739
Handling connection for 9081
time="2023-11-03T13:20:12Z" level=debug duration=85.471751ms execID=3d739
time="2023-11-03T13:20:12Z" level=info msg="kubectl create ns argocd-e2e--test-delete-app-resource-qbyfj" dir= execID=60a6d
time="2023-11-03T13:20:12Z" level=debug msg="namespace/argocd-e2e--test-delete-app-resource-qbyfj created\n" duration=117.78691ms execID=60a6d
time="2023-11-03T13:20:12Z" level=info msg="kubectl label ns argocd-e2e--test-delete-app-resource-qbyfj e2e.argoproj.io=true" dir= execID=82b15
time="2023-11-03T13:20:12Z" level=debug msg="namespace/argocd-e2e--test-delete-app-resource-qbyfj labeled\n" duration=351.462903ms execID=82b15
time="2023-11-03T13:20:12Z" level=info msg="clean state" duration=2.726073637s id=TestDeleteAppResource-qbyfj name=TestDeleteAppResource password=password username=admin
time="2023-11-03T13:20:13Z" level=info msg="../../dist/argocd app create test-delete-app-resource --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-delete-app-resource-qbyfj --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDAxMSwibmJmIjoxNjk5MDE3NjExLCJpYXQiOjE2OTkwMTc2MTEsImp0aSI6IjM1MmFhN2FkLWEwNGQtNGExZC1iZjU5LWU3MzIyMGQ3NzkxMSJ9.GUcqzVZM8yLDIC7ysHeIPTqn7XeHTVH1EH0XN2hnQhA --insecure" dir= execID=910e7
time="2023-11-03T13:20:13Z" level=debug msg="application 'test-delete-app-resource' created\n" duration=231.956396ms execID=910e7
time="2023-11-03T13:20:13Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:20:13Z" level=info msg="../../dist/argocd app sync test-delete-app-resource --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDAxMSwibmJmIjoxNjk5MDE3NjExLCJpYXQiOjE2OTkwMTc2MTEsImp0aSI6IjM1MmFhN2FkLWEwNGQtNGExZC1iZjU5LWU3MzIyMGQ3NzkxMSJ9.GUcqzVZM8yLDIC7ysHeIPTqn7XeHTVH1EH0XN2hnQhA --insecure" dir= execID=9e269
time="2023-11-03T13:20:14Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                  NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:20:14+00:00            Service  argocd-e2e--test-delete-app-resource-qbyfj          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:20:14+00:00   apps  Deployment  argocd-e2e--test-delete-app-resource-qbyfj          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:20:14+00:00            Service  argocd-e2e--test-delete-app-resource-qbyfj          guestbook-ui    Synced  Healthy              \n2023-11-03T13:20:14+00:00            Service  argocd-e2e--test-delete-app-resource-qbyfj          guestbook-ui    Synced   Healthy              service/guestbook-ui created\n2023-11-03T13:20:14+00:00   apps  Deployment  argocd-e2e--test-delete-app-resource-qbyfj          guestbook-ui  OutOfSync  Missing              deployment.apps/guestbook-ui created\n2023-11-03T13:20:14+00:00   apps  Deployment  argocd-e2e--test-delete-app-resource-qbyfj          guestbook-ui    Synced  Healthy              deployment.apps/guestbook-ui created\n\nName:               argocd-e2e/test-delete-app-resource\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-delete-app-resource-qbyfj\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-delete-app-resource\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (9142820)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      9142820011713eb4ac2a85cc92ffa5c4b991bf16\nPhase:              Succeeded\nStart:              2023-11-03 13:20:14 +0000 UTC\nFinished:           2023-11-03 13:20:14 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                   NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-delete-app-resource-qbyfj  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-delete-app-resource-qbyfj  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=884.464132ms execID=9e269
time="2023-11-03T13:20:14Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:20:14Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:20:14Z" level=info msg="../../dist/argocd app delete-resource test-delete-app-resource --kind Service --resource-name guestbook-ui --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDAxMSwibmJmIjoxNjk5MDE3NjExLCJpYXQiOjE2OTkwMTc2MTEsImp0aSI6IjM1MmFhN2FkLWEwNGQtNGExZC1iZjU5LWU3MzIyMGQ3NzkxMSJ9.GUcqzVZM8yLDIC7ysHeIPTqn7XeHTVH1EH0XN2hnQhA --insecure" dir= execID=bba0c
time="2023-11-03T13:20:14Z" level=debug duration=109.240961ms execID=bba0c
time="2023-11-03T13:20:14Z" level=info msg="pending: sync status to be OutOfSync, is Synced"
time="2023-11-03T13:20:17Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:20:17Z" level=info msg="expectation succeeded: health to should Missing, is Missing"
time="2023-11-03T13:20:17Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestDeleteAppResource (7.99s)
=== RUN   TestPatchHttp
time="2023-11-03T13:20:18Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=c3d5d
time="2023-11-03T13:20:18Z" level=debug msg="namespace \"argocd-e2e--test-delete-app-resource-qbyfj\" deleted\n" duration=203.248039ms execID=c3d5d
time="2023-11-03T13:20:18Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=a5051
time="2023-11-03T13:20:18Z" level=debug msg="No resources found\n" duration=373.611915ms execID=a5051
time="2023-11-03T13:20:18Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=0f07d
time="2023-11-03T13:20:18Z" level=debug msg="No resources found\n" duration=205.972148ms execID=0f07d
time="2023-11-03T13:20:19Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:20:19Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDAxOSwibmJmIjoxNjk5MDE3NjE5LCJpYXQiOjE2OTkwMTc2MTksImp0aSI6IjNkMDVjN2MyLWUxMWQtNDc4MS04ODk1LTIwNjhmZTc3NjEwYyJ9.Vk9NvohWAzVdO2JK3puPMKxswYPR4i_KXQpSvne8gT0 --insecure" dir= execID=80cd6
time="2023-11-03T13:20:19Z" level=debug duration=68.77583ms execID=80cd6
time="2023-11-03T13:20:20Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=a34a0
time="2023-11-03T13:20:20Z" level=debug duration=2.119054ms execID=a34a0
time="2023-11-03T13:20:20Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=30084
time="2023-11-03T13:20:20Z" level=debug duration=1.436147ms execID=30084
time="2023-11-03T13:20:20Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=b98b7
time="2023-11-03T13:20:20Z" level=debug duration=1.443813ms execID=b98b7
time="2023-11-03T13:20:20Z" level=info msg="pkill -9 gpg-agent" dir= execID=a78fd
time="2023-11-03T13:20:20Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=68108
time="2023-11-03T13:20:20Z" level=debug duration=10.185501ms execID=68108
time="2023-11-03T13:20:20Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=efdac
time="2023-11-03T13:20:20Z" level=debug duration=33.433766ms execID=efdac
time="2023-11-03T13:20:20Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=c74fe
time="2023-11-03T13:20:20Z" level=debug duration=1.785414ms execID=c74fe
time="2023-11-03T13:20:20Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=e7f23
time="2023-11-03T13:20:20Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.979215ms execID=e7f23
time="2023-11-03T13:20:20Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=be32d
time="2023-11-03T13:20:20Z" level=debug duration=36.84379ms execID=be32d
time="2023-11-03T13:20:20Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=75796
time="2023-11-03T13:20:20Z" level=debug duration=21.648816ms execID=75796
time="2023-11-03T13:20:20Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=6a8fa
time="2023-11-03T13:20:20Z" level=debug duration=2.251957ms execID=6a8fa
time="2023-11-03T13:20:20Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=e9b86
Handling connection for 9081
time="2023-11-03T13:20:20Z" level=debug duration=79.908874ms execID=e9b86
time="2023-11-03T13:20:20Z" level=info msg="kubectl create ns argocd-e2e--test-patch-http-sgsra" dir= execID=ae5fe
time="2023-11-03T13:20:20Z" level=debug msg="namespace/argocd-e2e--test-patch-http-sgsra created\n" duration=120.91273ms execID=ae5fe
time="2023-11-03T13:20:20Z" level=info msg="kubectl label ns argocd-e2e--test-patch-http-sgsra e2e.argoproj.io=true" dir= execID=b3603
time="2023-11-03T13:20:20Z" level=debug msg="namespace/argocd-e2e--test-patch-http-sgsra labeled\n" duration=359.783511ms execID=b3603
time="2023-11-03T13:20:20Z" level=info msg="clean state" duration=2.739099484s id=TestPatchHttp-sgsra name=TestPatchHttp password=password username=admin
time="2023-11-03T13:20:21Z" level=info msg="../../dist/argocd app create test-patch-http --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-patch-http-sgsra --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDAxOSwibmJmIjoxNjk5MDE3NjE5LCJpYXQiOjE2OTkwMTc2MTksImp0aSI6IjNkMDVjN2MyLWUxMWQtNDc4MS04ODk1LTIwNjhmZTc3NjEwYyJ9.Vk9NvohWAzVdO2JK3puPMKxswYPR4i_KXQpSvne8gT0 --insecure" dir= execID=aa802
time="2023-11-03T13:20:22Z" level=debug msg="application 'test-patch-http' created\n" duration=278.732156ms execID=aa802
time="2023-11-03T13:20:22Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:20:22Z" level=info msg="../../dist/argocd app sync test-patch-http --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDAxOSwibmJmIjoxNjk5MDE3NjE5LCJpYXQiOjE2OTkwMTc2MTksImp0aSI6IjNkMDVjN2MyLWUxMWQtNDc4MS04ODk1LTIwNjhmZTc3NjEwYyJ9.Vk9NvohWAzVdO2JK3puPMKxswYPR4i_KXQpSvne8gT0 --insecure" dir= execID=3b258
time="2023-11-03T13:20:22Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:20:22+00:00            Service  argocd-e2e--test-patch-http-sgsra          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:20:22+00:00   apps  Deployment  argocd-e2e--test-patch-http-sgsra          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:20:22+00:00            Service  argocd-e2e--test-patch-http-sgsra          guestbook-ui    Synced  Healthy              \n2023-11-03T13:20:22+00:00            Service  argocd-e2e--test-patch-http-sgsra          guestbook-ui    Synced   Healthy              service/guestbook-ui created\n2023-11-03T13:20:22+00:00   apps  Deployment  argocd-e2e--test-patch-http-sgsra          guestbook-ui  OutOfSync  Missing              deployment.apps/guestbook-ui created\n2023-11-03T13:20:22+00:00   apps  Deployment  argocd-e2e--test-patch-http-sgsra          guestbook-ui    Synced  Healthy              deployment.apps/guestbook-ui created\n\nName:               argocd-e2e/test-patch-http\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-patch-http-sgsra\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-patch-http\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (2790061)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      279006117276932705e71b371bab990a159485d9\nPhase:              Succeeded\nStart:              2023-11-03 13:20:22 +0000 UTC\nFinished:           2023-11-03 13:20:22 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                          NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-patch-http-sgsra  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-patch-http-sgsra  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=762.714907ms execID=3b258
time="2023-11-03T13:20:22Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:20:22Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestPatchHttp (4.88s)
=== RUN   TestImmutableChange
    fixture.go:901: 
--- SKIP: TestImmutableChange (0.00s)
=== RUN   TestInvalidAppProject
time="2023-11-03T13:20:22Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=cc875
time="2023-11-03T13:20:23Z" level=debug msg="namespace \"argocd-e2e--test-patch-http-sgsra\" deleted\n" duration=203.362354ms execID=cc875
time="2023-11-03T13:20:23Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=bf6ba
time="2023-11-03T13:20:23Z" level=debug msg="No resources found\n" duration=396.736327ms execID=bf6ba
time="2023-11-03T13:20:23Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=f01b7
time="2023-11-03T13:20:23Z" level=debug msg="No resources found\n" duration=233.101667ms execID=f01b7
time="2023-11-03T13:20:24Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:20:24Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDAyNCwibmJmIjoxNjk5MDE3NjI0LCJpYXQiOjE2OTkwMTc2MjQsImp0aSI6IjRiMjRlZTRhLTZmZmMtNGVkMi1hOTJhLWVkNGIyMzI2YmYwNyJ9.AFqwSjDhNs2M5SYauXCFOifILv8XNIwufXHX8l_TDco --insecure" dir= execID=46e8c
time="2023-11-03T13:20:24Z" level=debug duration=126.553741ms execID=46e8c
time="2023-11-03T13:20:24Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=c4cc4
time="2023-11-03T13:20:24Z" level=debug duration=1.820448ms execID=c4cc4
time="2023-11-03T13:20:24Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=671df
time="2023-11-03T13:20:24Z" level=debug duration=1.637492ms execID=671df
time="2023-11-03T13:20:24Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=fcad8
time="2023-11-03T13:20:24Z" level=debug duration=1.47296ms execID=fcad8
time="2023-11-03T13:20:24Z" level=info msg="pkill -9 gpg-agent" dir= execID=33a1e
time="2023-11-03T13:20:24Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=de684
time="2023-11-03T13:20:24Z" level=debug duration=9.510626ms execID=de684
time="2023-11-03T13:20:24Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=55d66
time="2023-11-03T13:20:24Z" level=debug duration=35.669ms execID=55d66
time="2023-11-03T13:20:24Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=17558
time="2023-11-03T13:20:24Z" level=debug duration=1.882589ms execID=17558
time="2023-11-03T13:20:24Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=d42fb
time="2023-11-03T13:20:24Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.008847ms execID=d42fb
time="2023-11-03T13:20:24Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=65c73
time="2023-11-03T13:20:24Z" level=debug duration=27.635585ms execID=65c73
time="2023-11-03T13:20:24Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=244e8
time="2023-11-03T13:20:24Z" level=debug duration=22.887866ms execID=244e8
time="2023-11-03T13:20:24Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=44ba0
time="2023-11-03T13:20:24Z" level=debug duration=2.730506ms execID=44ba0
time="2023-11-03T13:20:24Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=0a74d
Handling connection for 9081
time="2023-11-03T13:20:24Z" level=debug duration=77.84555ms execID=0a74d
time="2023-11-03T13:20:24Z" level=info msg="kubectl create ns argocd-e2e--test-invalid-app-project-qawhi" dir= execID=c42db
time="2023-11-03T13:20:24Z" level=debug msg="namespace/argocd-e2e--test-invalid-app-project-qawhi created\n" duration=113.611855ms execID=c42db
time="2023-11-03T13:20:24Z" level=info msg="kubectl label ns argocd-e2e--test-invalid-app-project-qawhi e2e.argoproj.io=true" dir= execID=03a92
time="2023-11-03T13:20:25Z" level=debug msg="namespace/argocd-e2e--test-invalid-app-project-qawhi labeled\n" duration=274.509944ms execID=03a92
time="2023-11-03T13:20:25Z" level=info msg="clean state" duration=2.280845865s id=TestInvalidAppProject-qawhi name=TestInvalidAppProject password=password username=admin
time="2023-11-03T13:20:26Z" level=info msg="../../dist/argocd app create test-invalid-app-project --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project does-not-exist --dest-namespace argocd-e2e--test-invalid-app-project-qawhi --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDAyNCwibmJmIjoxNjk5MDE3NjI0LCJpYXQiOjE2OTkwMTc2MjQsImp0aSI6IjRiMjRlZTRhLTZmZmMtNGVkMi1hOTJhLWVkNGIyMzI2YmYwNyJ9.AFqwSjDhNs2M5SYauXCFOifILv8XNIwufXHX8l_TDco --insecure" dir= execID=74cfa
time="2023-11-03T13:20:26Z" level=debug duration=77.290665ms execID=74cfa
time="2023-11-03T13:20:26Z" level=error msg="`../../dist/argocd app create test-invalid-app-project --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project does-not-exist --dest-namespace argocd-e2e--test-invalid-app-project-qawhi --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDAyNCwibmJmIjoxNjk5MDE3NjI0LCJpYXQiOjE2OTkwMTc2MjQsImp0aSI6IjRiMjRlZTRhLTZmZmMtNGVkMi1hOTJhLWVkNGIyMzI2YmYwNyJ9.AFqwSjDhNs2M5SYauXCFOifILv8XNIwufXHX8l_TDco --insecure` failed exit status 20: time=\"2023-11-03T13:20:26Z\" level=fatal msg=\"rpc error: code = PermissionDenied desc = permission denied\"" execID=74cfa
time="2023-11-03T13:20:26Z" level=info msg="expectation succeeded: error ''"
time="2023-11-03T13:20:26Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestInvalidAppProject (3.36s)
=== RUN   TestAppDeletion
time="2023-11-03T13:20:26Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=e65aa
time="2023-11-03T13:20:26Z" level=debug msg="namespace \"argocd-e2e--test-invalid-app-project-qawhi\" deleted\n" duration=279.374549ms execID=e65aa
time="2023-11-03T13:20:26Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=c4166
time="2023-11-03T13:20:26Z" level=debug msg="No resources found\n" duration=446.189228ms execID=c4166
time="2023-11-03T13:20:26Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=8b178
time="2023-11-03T13:20:27Z" level=debug msg="No resources found\n" duration=241.120697ms execID=8b178
time="2023-11-03T13:20:28Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:20:28Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDAyOCwibmJmIjoxNjk5MDE3NjI4LCJpYXQiOjE2OTkwMTc2MjgsImp0aSI6Ijk5ZTlmNmRmLTc0YTUtNDhjNy1iOWVhLWVlM2Q1YTZlZmNlZCJ9.UTtA7Bx_uqlTK8hSnFXqBaB_eT7gcOYSwgrsIrn-2y8 --insecure" dir= execID=0de03
time="2023-11-03T13:20:28Z" level=debug duration=72.611515ms execID=0de03
time="2023-11-03T13:20:28Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=0a9d8
time="2023-11-03T13:20:28Z" level=debug duration=21.147171ms execID=0a9d8
time="2023-11-03T13:20:28Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=f7dd5
time="2023-11-03T13:20:28Z" level=debug duration=1.975631ms execID=f7dd5
time="2023-11-03T13:20:28Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=88d8d
time="2023-11-03T13:20:28Z" level=debug duration=1.636972ms execID=88d8d
time="2023-11-03T13:20:28Z" level=info msg="pkill -9 gpg-agent" dir= execID=4ab19
time="2023-11-03T13:20:28Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=a9520
time="2023-11-03T13:20:28Z" level=debug duration=10.895545ms execID=a9520
time="2023-11-03T13:20:28Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=e74ea
time="2023-11-03T13:20:28Z" level=debug duration=38.086498ms execID=e74ea
time="2023-11-03T13:20:28Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=0173c
time="2023-11-03T13:20:28Z" level=debug duration=1.804879ms execID=0173c
time="2023-11-03T13:20:28Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=429fa
time="2023-11-03T13:20:28Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.755436ms execID=429fa
time="2023-11-03T13:20:28Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=56061
time="2023-11-03T13:20:28Z" level=debug duration=25.956543ms execID=56061
time="2023-11-03T13:20:28Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=43c48
time="2023-11-03T13:20:28Z" level=debug duration=28.808138ms execID=43c48
time="2023-11-03T13:20:28Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=d9656
time="2023-11-03T13:20:28Z" level=debug duration=2.898774ms execID=d9656
time="2023-11-03T13:20:28Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=dcd0c
Handling connection for 9081
time="2023-11-03T13:20:28Z" level=debug duration=60.538775ms execID=dcd0c
time="2023-11-03T13:20:28Z" level=info msg="kubectl create ns argocd-e2e--test-app-deletion-zfjna" dir= execID=71147
time="2023-11-03T13:20:28Z" level=debug msg="namespace/argocd-e2e--test-app-deletion-zfjna created\n" duration=147.637923ms execID=71147
time="2023-11-03T13:20:28Z" level=info msg="kubectl label ns argocd-e2e--test-app-deletion-zfjna e2e.argoproj.io=true" dir= execID=9df28
time="2023-11-03T13:20:29Z" level=debug msg="namespace/argocd-e2e--test-app-deletion-zfjna labeled\n" duration=274.351525ms execID=9df28
time="2023-11-03T13:20:29Z" level=info msg="clean state" duration=2.795118977s id=TestAppDeletion-zfjna name=TestAppDeletion password=password username=admin
time="2023-11-03T13:20:30Z" level=info msg="../../dist/argocd app create test-app-deletion --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-app-deletion-zfjna --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDAyOCwibmJmIjoxNjk5MDE3NjI4LCJpYXQiOjE2OTkwMTc2MjgsImp0aSI6Ijk5ZTlmNmRmLTc0YTUtNDhjNy1iOWVhLWVlM2Q1YTZlZmNlZCJ9.UTtA7Bx_uqlTK8hSnFXqBaB_eT7gcOYSwgrsIrn-2y8 --insecure" dir= execID=83507
time="2023-11-03T13:20:30Z" level=debug msg="application 'test-app-deletion' created\n" duration=268.511897ms execID=83507
time="2023-11-03T13:20:30Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:20:30Z" level=info msg="pending: sync status to be OutOfSync, is "
time="2023-11-03T13:20:33Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:20:33Z" level=info msg="../../dist/argocd app delete test-app-deletion --cascade=true --yes --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDAyOCwibmJmIjoxNjk5MDE3NjI4LCJpYXQiOjE2OTkwMTc2MjgsImp0aSI6Ijk5ZTlmNmRmLTc0YTUtNDhjNy1iOWVhLWVlM2Q1YTZlZmNlZCJ9.UTtA7Bx_uqlTK8hSnFXqBaB_eT7gcOYSwgrsIrn-2y8 --insecure" dir= execID=01dbe
time="2023-11-03T13:20:33Z" level=debug duration=88.74317ms execID=01dbe
time="2023-11-03T13:20:33Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:20:33Z" level=info msg="expectation succeeded: app does not exist"
time="2023-11-03T13:20:33Z" level=info msg="expectation succeeded: found event with reason=ResourceDeleted; message=delete"
time="2023-11-03T13:20:33Z" level=info msg="../../dist/argocd app list --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDAyOCwibmJmIjoxNjk5MDE3NjI4LCJpYXQiOjE2OTkwMTc2MjgsImp0aSI6Ijk5ZTlmNmRmLTc0YTUtNDhjNy1iOWVhLWVlM2Q1YTZlZmNlZCJ9.UTtA7Bx_uqlTK8hSnFXqBaB_eT7gcOYSwgrsIrn-2y8 --insecure" dir= execID=ee152
time="2023-11-03T13:20:33Z" level=debug msg="NAME  CLUSTER  NAMESPACE  PROJECT  STATUS  HEALTH  SYNCPOLICY  CONDITIONS  REPO  PATH  TARGET\n" duration=119.365981ms execID=ee152
time="2023-11-03T13:20:33Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestAppDeletion (7.30s)
=== RUN   TestAppLabels
time="2023-11-03T13:20:33Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=61bee
time="2023-11-03T13:20:33Z" level=debug msg="namespace \"argocd-e2e--test-app-deletion-zfjna\" deleted\n" duration=243.391355ms execID=61bee
time="2023-11-03T13:20:33Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=901c9
time="2023-11-03T13:20:34Z" level=debug msg="No resources found\n" duration=377.739504ms execID=901c9
time="2023-11-03T13:20:34Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=9cfed
time="2023-11-03T13:20:34Z" level=debug msg="No resources found\n" duration=284.049854ms execID=9cfed
time="2023-11-03T13:20:35Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:20:35Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDAzNSwibmJmIjoxNjk5MDE3NjM1LCJpYXQiOjE2OTkwMTc2MzUsImp0aSI6IjA1YmRhYjQzLTIzM2YtNGRkNy1hZmFmLTcwZDRkNGYxNGVjNSJ9.RibYuWXHdUXGg5DgtkWL_E3b4rsfEkiWsnyivMgmitg --insecure" dir= execID=a0055
time="2023-11-03T13:20:35Z" level=debug duration=105.80832ms execID=a0055
time="2023-11-03T13:20:35Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=26df3
time="2023-11-03T13:20:35Z" level=debug duration=2.096667ms execID=26df3
time="2023-11-03T13:20:35Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=a2d78
time="2023-11-03T13:20:35Z" level=debug duration=1.524713ms execID=a2d78
time="2023-11-03T13:20:35Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=8f362
time="2023-11-03T13:20:35Z" level=debug duration=1.502371ms execID=8f362
time="2023-11-03T13:20:35Z" level=info msg="pkill -9 gpg-agent" dir= execID=6b68b
time="2023-11-03T13:20:35Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=b74d9
time="2023-11-03T13:20:35Z" level=debug duration=10.162883ms execID=b74d9
time="2023-11-03T13:20:35Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=75485
time="2023-11-03T13:20:35Z" level=debug duration=49.587433ms execID=75485
time="2023-11-03T13:20:35Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=4d79d
time="2023-11-03T13:20:35Z" level=debug duration=1.794544ms execID=4d79d
time="2023-11-03T13:20:35Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=9da2e
time="2023-11-03T13:20:35Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.947208ms execID=9da2e
time="2023-11-03T13:20:35Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=25d17
time="2023-11-03T13:20:35Z" level=debug duration=28.043195ms execID=25d17
time="2023-11-03T13:20:35Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=44701
time="2023-11-03T13:20:35Z" level=debug duration=22.238012ms execID=44701
time="2023-11-03T13:20:35Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=9dcb1
time="2023-11-03T13:20:35Z" level=debug duration=2.254275ms execID=9dcb1
time="2023-11-03T13:20:35Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=61efe
Handling connection for 9081
time="2023-11-03T13:20:35Z" level=debug duration=78.879619ms execID=61efe
time="2023-11-03T13:20:35Z" level=info msg="kubectl create ns argocd-e2e--test-app-labels-rwpfd" dir= execID=55004
time="2023-11-03T13:20:35Z" level=debug msg="namespace/argocd-e2e--test-app-labels-rwpfd created\n" duration=156.056177ms execID=55004
time="2023-11-03T13:20:35Z" level=info msg="kubectl label ns argocd-e2e--test-app-labels-rwpfd e2e.argoproj.io=true" dir= execID=3cf82
time="2023-11-03T13:20:36Z" level=debug msg="namespace/argocd-e2e--test-app-labels-rwpfd labeled\n" duration=224.621557ms execID=3cf82
time="2023-11-03T13:20:36Z" level=info msg="clean state" duration=2.624267065s id=TestAppLabels-rwpfd name=TestAppLabels password=password username=admin
time="2023-11-03T13:20:37Z" level=info msg="../../dist/argocd app create test-app-labels --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git -l foo=bar --dest-server https://kubernetes.default.svc --path config-map --project default --dest-namespace argocd-e2e--test-app-labels-rwpfd --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDAzNSwibmJmIjoxNjk5MDE3NjM1LCJpYXQiOjE2OTkwMTc2MzUsImp0aSI6IjA1YmRhYjQzLTIzM2YtNGRkNy1hZmFmLTcwZDRkNGYxNGVjNSJ9.RibYuWXHdUXGg5DgtkWL_E3b4rsfEkiWsnyivMgmitg --insecure" dir= execID=fd616
time="2023-11-03T13:20:37Z" level=debug msg="application 'test-app-labels' created\n" duration=211.612066ms execID=fd616
time="2023-11-03T13:20:37Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:20:37Z" level=info msg="../../dist/argocd app list --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDAzNSwibmJmIjoxNjk5MDE3NjM1LCJpYXQiOjE2OTkwMTc2MzUsImp0aSI6IjA1YmRhYjQzLTIzM2YtNGRkNy1hZmFmLTcwZDRkNGYxNGVjNSJ9.RibYuWXHdUXGg5DgtkWL_E3b4rsfEkiWsnyivMgmitg --insecure" dir= execID=97e7f
time="2023-11-03T13:20:37Z" level=debug msg="NAME                        CLUSTER                         NAMESPACE                          PROJECT  STATUS  HEALTH  SYNCPOLICY  CONDITIONS  REPO                                                 PATH        TARGET\nargocd-e2e/test-app-labels  https://kubernetes.default.svc  argocd-e2e--test-app-labels-rwpfd  default                  <none>      <none>      http://argocd-e2e-server:9081/argo-e2e/testdata.git  config-map  \n" duration=76.579032ms execID=97e7f
time="2023-11-03T13:20:37Z" level=info msg="../../dist/argocd app list -l foo=bar --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDAzNSwibmJmIjoxNjk5MDE3NjM1LCJpYXQiOjE2OTkwMTc2MzUsImp0aSI6IjA1YmRhYjQzLTIzM2YtNGRkNy1hZmFmLTcwZDRkNGYxNGVjNSJ9.RibYuWXHdUXGg5DgtkWL_E3b4rsfEkiWsnyivMgmitg --insecure" dir= execID=796c2
time="2023-11-03T13:20:37Z" level=debug msg="NAME                        CLUSTER                         NAMESPACE                          PROJECT  STATUS     HEALTH   SYNCPOLICY  CONDITIONS  REPO                                                 PATH        TARGET\nargocd-e2e/test-app-labels  https://kubernetes.default.svc  argocd-e2e--test-app-labels-rwpfd  default  OutOfSync  Healthy  <none>      <none>      http://argocd-e2e-server:9081/argo-e2e/testdata.git  config-map  \n" duration=107.743595ms execID=796c2
time="2023-11-03T13:20:37Z" level=info msg="../../dist/argocd app list -l foo=rubbish --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDAzNSwibmJmIjoxNjk5MDE3NjM1LCJpYXQiOjE2OTkwMTc2MzUsImp0aSI6IjA1YmRhYjQzLTIzM2YtNGRkNy1hZmFmLTcwZDRkNGYxNGVjNSJ9.RibYuWXHdUXGg5DgtkWL_E3b4rsfEkiWsnyivMgmitg --insecure" dir= execID=27b93
time="2023-11-03T13:20:37Z" level=debug msg="NAME  CLUSTER  NAMESPACE  PROJECT  STATUS  HEALTH  SYNCPOLICY  CONDITIONS  REPO  PATH  TARGET\n" duration=118.031458ms execID=27b93
time="2023-11-03T13:20:38Z" level=info msg="../../dist/argocd app sync -l foo=rubbish --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDAzNSwibmJmIjoxNjk5MDE3NjM1LCJpYXQiOjE2OTkwMTc2MzUsImp0aSI6IjA1YmRhYjQzLTIzM2YtNGRkNy1hZmFmLTcwZDRkNGYxNGVjNSJ9.RibYuWXHdUXGg5DgtkWL_E3b4rsfEkiWsnyivMgmitg --insecure" dir= execID=83b88
time="2023-11-03T13:20:38Z" level=debug duration=58.363711ms execID=83b88
time="2023-11-03T13:20:38Z" level=error msg="`../../dist/argocd app sync -l foo=rubbish --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDAzNSwibmJmIjoxNjk5MDE3NjM1LCJpYXQiOjE2OTkwMTc2MzUsImp0aSI6IjA1YmRhYjQzLTIzM2YtNGRkNy1hZmFmLTcwZDRkNGYxNGVjNSJ9.RibYuWXHdUXGg5DgtkWL_E3b4rsfEkiWsnyivMgmitg --insecure` failed exit status 1: time=\"2023-11-03T13:20:38Z\" level=fatal msg=\"No matching apps found for filter: selector foo=rubbish\"" execID=83b88
time="2023-11-03T13:20:38Z" level=info msg="expectation succeeded: error ''"
time="2023-11-03T13:20:39Z" level=info msg="../../dist/argocd app sync -l foo=bar --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDAzNSwibmJmIjoxNjk5MDE3NjM1LCJpYXQiOjE2OTkwMTc2MzUsImp0aSI6IjA1YmRhYjQzLTIzM2YtNGRkNy1hZmFmLTcwZDRkNGYxNGVjNSJ9.RibYuWXHdUXGg5DgtkWL_E3b4rsfEkiWsnyivMgmitg --insecure" dir= execID=a851a
time="2023-11-03T13:20:40Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                         NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:20:39+00:00          ConfigMap  argocd-e2e--test-app-labels-rwpfd                my-map  OutOfSync  Missing              \n2023-11-03T13:20:40+00:00          ConfigMap  argocd-e2e--test-app-labels-rwpfd                my-map  OutOfSync  Missing              configmap/my-map created\n2023-11-03T13:20:40+00:00          ConfigMap  argocd-e2e--test-app-labels-rwpfd                my-map    Synced  Missing              configmap/my-map created\n\nName:               argocd-e2e/test-app-labels\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-app-labels-rwpfd\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e/test-app-labels\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               config-map\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (688b59a)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      688b59aaffe1b6c390882bcd916d9ddf94cce7d4\nPhase:              Succeeded\nStart:              2023-11-03 13:20:39 +0000 UTC\nFinished:           2023-11-03 13:20:40 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                          NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-app-labels-rwpfd  my-map  Synced                configmap/my-map created\n" duration=771.321407ms execID=a851a
time="2023-11-03T13:20:40Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:20:40Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestAppLabels (6.98s)
=== RUN   TestTrackAppStateAndSyncApp
time="2023-11-03T13:20:40Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=58dfd
time="2023-11-03T13:20:40Z" level=debug msg="namespace \"argocd-e2e--test-app-labels-rwpfd\" deleted\n" duration=279.449663ms execID=58dfd
time="2023-11-03T13:20:40Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=d5499
time="2023-11-03T13:20:41Z" level=debug msg="No resources found\n" duration=364.634115ms execID=d5499
time="2023-11-03T13:20:41Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=6d4b7
time="2023-11-03T13:20:41Z" level=debug msg="No resources found\n" duration=235.976328ms execID=6d4b7
time="2023-11-03T13:20:42Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:20:42Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA0MiwibmJmIjoxNjk5MDE3NjQyLCJpYXQiOjE2OTkwMTc2NDIsImp0aSI6IjMzZWZiOGEzLTU0YjQtNGFjNy05MzlmLTZkZjY3ZmUyOWYwMyJ9.dqozJanwrFnTL2XmX0mJjraQBUbFksdXZmoWs6djL28 --insecure" dir= execID=9b565
time="2023-11-03T13:20:42Z" level=debug duration=78.45295ms execID=9b565
time="2023-11-03T13:20:42Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=5e298
time="2023-11-03T13:20:42Z" level=debug duration=3.737401ms execID=5e298
time="2023-11-03T13:20:42Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=d5743
time="2023-11-03T13:20:42Z" level=debug duration=5.92079ms execID=d5743
time="2023-11-03T13:20:42Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=8f538
time="2023-11-03T13:20:42Z" level=debug duration=3.139646ms execID=8f538
time="2023-11-03T13:20:42Z" level=info msg="pkill -9 gpg-agent" dir= execID=19f7d
time="2023-11-03T13:20:42Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=12e6e
time="2023-11-03T13:20:42Z" level=debug duration=17.984652ms execID=12e6e
time="2023-11-03T13:20:42Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=c7ebb
time="2023-11-03T13:20:42Z" level=debug duration=35.040203ms execID=c7ebb
time="2023-11-03T13:20:42Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=fe9ac
time="2023-11-03T13:20:42Z" level=debug duration=1.821766ms execID=fe9ac
time="2023-11-03T13:20:42Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=2d93c
time="2023-11-03T13:20:42Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=21.759984ms execID=2d93c
time="2023-11-03T13:20:42Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=afeb0
time="2023-11-03T13:20:42Z" level=debug duration=25.591367ms execID=afeb0
time="2023-11-03T13:20:42Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=cd323
time="2023-11-03T13:20:42Z" level=debug duration=26.853649ms execID=cd323
time="2023-11-03T13:20:42Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=4c14d
time="2023-11-03T13:20:42Z" level=debug duration=2.656475ms execID=4c14d
time="2023-11-03T13:20:42Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=ff3e1
Handling connection for 9081
time="2023-11-03T13:20:42Z" level=debug duration=86.130333ms execID=ff3e1
time="2023-11-03T13:20:42Z" level=info msg="kubectl create ns argocd-e2e--test-track-app-state-and-sync-app-wcilo" dir= execID=9bb93
time="2023-11-03T13:20:42Z" level=debug msg="namespace/argocd-e2e--test-track-app-state-and-sync-app-wcilo created\n" duration=157.709167ms execID=9bb93
time="2023-11-03T13:20:42Z" level=info msg="kubectl label ns argocd-e2e--test-track-app-state-and-sync-app-wcilo e2e.argoproj.io=true" dir= execID=0e0fb
time="2023-11-03T13:20:42Z" level=debug msg="namespace/argocd-e2e--test-track-app-state-and-sync-app-wcilo labeled\n" duration=223.256031ms execID=0e0fb
time="2023-11-03T13:20:42Z" level=info msg="clean state" duration=2.349446539s id=TestTrackAppStateAndSyncApp-wcilo name=TestTrackAppStateAndSyncApp password=password username=admin
time="2023-11-03T13:20:43Z" level=info msg="../../dist/argocd app create test-track-app-state-and-sync-app --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-track-app-state-and-sync-app-wcilo --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA0MiwibmJmIjoxNjk5MDE3NjQyLCJpYXQiOjE2OTkwMTc2NDIsImp0aSI6IjMzZWZiOGEzLTU0YjQtNGFjNy05MzlmLTZkZjY3ZmUyOWYwMyJ9.dqozJanwrFnTL2XmX0mJjraQBUbFksdXZmoWs6djL28 --insecure" dir= execID=c5dad
time="2023-11-03T13:20:44Z" level=debug msg="application 'test-track-app-state-and-sync-app' created\n" duration=257.680274ms execID=c5dad
time="2023-11-03T13:20:44Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:20:44Z" level=info msg="../../dist/argocd app sync test-track-app-state-and-sync-app --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA0MiwibmJmIjoxNjk5MDE3NjQyLCJpYXQiOjE2OTkwMTc2NDIsImp0aSI6IjMzZWZiOGEzLTU0YjQtNGFjNy05MzlmLTZkZjY3ZmUyOWYwMyJ9.dqozJanwrFnTL2XmX0mJjraQBUbFksdXZmoWs6djL28 --insecure" dir= execID=b6a8a
time="2023-11-03T13:20:44Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                           NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:20:44+00:00            Service  argocd-e2e--test-track-app-state-and-sync-app-wcilo          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:20:44+00:00   apps  Deployment  argocd-e2e--test-track-app-state-and-sync-app-wcilo          guestbook-ui  OutOfSync  Missing              \n\nName:               argocd-e2e/test-track-app-state-and-sync-app\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-track-app-state-and-sync-app-wcilo\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-track-app-state-and-sync-app\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (f3b5b60)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      f3b5b609bf7e5b370d11b75f8e0aadbe6aca6aa0\nPhase:              Succeeded\nStart:              2023-11-03 13:20:44 +0000 UTC\nFinished:           2023-11-03 13:20:44 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                            NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-track-app-state-and-sync-app-wcilo  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-track-app-state-and-sync-app-wcilo  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=736.024323ms execID=b6a8a
time="2023-11-03T13:20:44Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:20:44Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:20:44Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:20:44Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:20:44Z" level=info msg="expectation succeeded: no error and output contained 'Service     argocd-e2e--test-track-app-state-and-sync-app-wcilo  guestbook-ui  Synced '"
time="2023-11-03T13:20:44Z" level=info msg="expectation succeeded: no error and output contained 'apps   Deployment  argocd-e2e--test-track-app-state-and-sync-app-wcilo  guestbook-ui  Synced'"
time="2023-11-03T13:20:44Z" level=info msg="expectation succeeded: found event with reason=ResourceUpdated; message=sync"
time="2023-11-03T13:20:44Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestTrackAppStateAndSyncApp (4.38s)
=== RUN   TestAppRollbackSuccessful
time="2023-11-03T13:20:44Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=dd59f
time="2023-11-03T13:20:45Z" level=debug msg="namespace \"argocd-e2e--test-track-app-state-and-sync-app-wcilo\" deleted\n" duration=224.569355ms execID=dd59f
time="2023-11-03T13:20:45Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=ba059
time="2023-11-03T13:20:45Z" level=debug msg="No resources found\n" duration=430.868441ms execID=ba059
time="2023-11-03T13:20:45Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=551d1
time="2023-11-03T13:20:45Z" level=debug msg="No resources found\n" duration=164.962392ms execID=551d1
time="2023-11-03T13:20:46Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:20:46Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA0NiwibmJmIjoxNjk5MDE3NjQ2LCJpYXQiOjE2OTkwMTc2NDYsImp0aSI6IjU4ZjIyYzliLWU0MzUtNGM4Zi05MTRjLTkwMDFmZDY4ZDViOSJ9.IFktdwUADuwINRxlbmnv25omt1pTGoCxy_F3Q0DLuDU --insecure" dir= execID=890f9
time="2023-11-03T13:20:46Z" level=debug duration=77.774076ms execID=890f9
time="2023-11-03T13:20:46Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=4e9e2
time="2023-11-03T13:20:46Z" level=debug duration=2.061194ms execID=4e9e2
time="2023-11-03T13:20:46Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=8594f
time="2023-11-03T13:20:46Z" level=debug duration=1.624581ms execID=8594f
time="2023-11-03T13:20:46Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=e8032
time="2023-11-03T13:20:46Z" level=debug duration=1.541292ms execID=e8032
time="2023-11-03T13:20:46Z" level=info msg="pkill -9 gpg-agent" dir= execID=2edd9
time="2023-11-03T13:20:46Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=f246e
time="2023-11-03T13:20:46Z" level=debug duration=9.537677ms execID=f246e
time="2023-11-03T13:20:46Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=a899f
time="2023-11-03T13:20:47Z" level=debug duration=34.095822ms execID=a899f
time="2023-11-03T13:20:47Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=3711f
time="2023-11-03T13:20:47Z" level=debug duration=1.741697ms execID=3711f
time="2023-11-03T13:20:47Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=c0865
time="2023-11-03T13:20:47Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.445958ms execID=c0865
time="2023-11-03T13:20:47Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=62879
time="2023-11-03T13:20:47Z" level=debug duration=38.111472ms execID=62879
time="2023-11-03T13:20:47Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=32019
time="2023-11-03T13:20:47Z" level=debug duration=21.11651ms execID=32019
time="2023-11-03T13:20:47Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=ee5db
time="2023-11-03T13:20:47Z" level=debug duration=2.298757ms execID=ee5db
time="2023-11-03T13:20:47Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=1529b
Handling connection for 9081
time="2023-11-03T13:20:47Z" level=debug duration=87.559649ms execID=1529b
time="2023-11-03T13:20:47Z" level=info msg="kubectl create ns argocd-e2e--test-app-rollback-successful-lzobl" dir= execID=984b5
time="2023-11-03T13:20:47Z" level=debug msg="namespace/argocd-e2e--test-app-rollback-successful-lzobl created\n" duration=117.683659ms execID=984b5
time="2023-11-03T13:20:47Z" level=info msg="kubectl label ns argocd-e2e--test-app-rollback-successful-lzobl e2e.argoproj.io=true" dir= execID=705aa
time="2023-11-03T13:20:47Z" level=debug msg="namespace/argocd-e2e--test-app-rollback-successful-lzobl labeled\n" duration=179.815331ms execID=705aa
time="2023-11-03T13:20:47Z" level=info msg="clean state" duration=2.571299169s id=TestAppRollbackSuccessful-lzobl name=TestAppRollbackSuccessful password=password username=admin
time="2023-11-03T13:20:48Z" level=info msg="../../dist/argocd app create test-app-rollback-successful --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-app-rollback-successful-lzobl --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA0NiwibmJmIjoxNjk5MDE3NjQ2LCJpYXQiOjE2OTkwMTc2NDYsImp0aSI6IjU4ZjIyYzliLWU0MzUtNGM4Zi05MTRjLTkwMDFmZDY4ZDViOSJ9.IFktdwUADuwINRxlbmnv25omt1pTGoCxy_F3Q0DLuDU --insecure" dir= execID=1e593
time="2023-11-03T13:20:48Z" level=debug msg="application 'test-app-rollback-successful' created\n" duration=216.942972ms execID=1e593
time="2023-11-03T13:20:48Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:20:48Z" level=info msg="../../dist/argocd app sync test-app-rollback-successful --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA0NiwibmJmIjoxNjk5MDE3NjQ2LCJpYXQiOjE2OTkwMTc2NDYsImp0aSI6IjU4ZjIyYzliLWU0MzUtNGM4Zi05MTRjLTkwMDFmZDY4ZDViOSJ9.IFktdwUADuwINRxlbmnv25omt1pTGoCxy_F3Q0DLuDU --insecure" dir= execID=30036
time="2023-11-03T13:20:49Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                      NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:20:48+00:00            Service  argocd-e2e--test-app-rollback-successful-lzobl          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:20:48+00:00   apps  Deployment  argocd-e2e--test-app-rollback-successful-lzobl          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:20:49+00:00            Service  argocd-e2e--test-app-rollback-successful-lzobl          guestbook-ui    Synced  Healthy              \n2023-11-03T13:20:49+00:00            Service  argocd-e2e--test-app-rollback-successful-lzobl          guestbook-ui    Synced   Healthy              service/guestbook-ui created\n2023-11-03T13:20:49+00:00   apps  Deployment  argocd-e2e--test-app-rollback-successful-lzobl          guestbook-ui  OutOfSync  Missing              deployment.apps/guestbook-ui created\n2023-11-03T13:20:49+00:00   apps  Deployment  argocd-e2e--test-app-rollback-successful-lzobl          guestbook-ui    Synced  Progressing              deployment.apps/guestbook-ui created\n\nName:               argocd-e2e/test-app-rollback-successful\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-app-rollback-successful-lzobl\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-app-rollback-successful\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (43f0fd0)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      43f0fd032c2a036594defe536bec92e1a9fd2d73\nPhase:              Succeeded\nStart:              2023-11-03 13:20:48 +0000 UTC\nFinished:           2023-11-03 13:20:49 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                       NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-app-rollback-successful-lzobl  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-app-rollback-successful-lzobl  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=686.447555ms execID=30036
time="2023-11-03T13:20:49Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:20:49Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:20:49Z" level=info msg="../../dist/argocd app rollback test-app-rollback-successful 1 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA0NiwibmJmIjoxNjk5MDE3NjQ2LCJpYXQiOjE2OTkwMTc2NDYsImp0aSI6IjU4ZjIyYzliLWU0MzUtNGM4Zi05MTRjLTkwMDFmZDY4ZDViOSJ9.IFktdwUADuwINRxlbmnv25omt1pTGoCxy_F3Q0DLuDU --insecure" dir= execID=f60f8
time="2023-11-03T13:20:49Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                      NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:20:49+00:00            Service  argocd-e2e--test-app-rollback-successful-lzobl          guestbook-ui    Synced  Healthy              \n2023-11-03T13:20:49+00:00   apps  Deployment  argocd-e2e--test-app-rollback-successful-lzobl          guestbook-ui    Synced  Healthy              \n\nName:               argocd-e2e/test-app-rollback-successful\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-app-rollback-successful-lzobl\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e/test-app-rollback-successful\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (43f0fd0)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      43f0fd032c2a036594defe536bec92e1a9fd2d73\nPhase:              Succeeded\nStart:              2023-11-03 13:20:49 +0000 UTC\nFinished:           2023-11-03 13:20:49 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                       NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-app-rollback-successful-lzobl  guestbook-ui  Synced  Healthy        service/guestbook-ui unchanged\napps   Deployment  argocd-e2e--test-app-rollback-successful-lzobl  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui unchanged\n" duration=596.228532ms execID=f60f8
time="2023-11-03T13:20:49Z" level=info msg="expectation succeeded: found event with reason=OperationStarted; message=rollback"
time="2023-11-03T13:20:49Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:20:49Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestAppRollbackSuccessful (5.11s)
=== RUN   TestComparisonFailsIfClusterNotAdded
time="2023-11-03T13:20:50Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=e4bdf
time="2023-11-03T13:20:50Z" level=debug msg="namespace \"argocd-e2e--test-app-rollback-successful-lzobl\" deleted\n" duration=214.690405ms execID=e4bdf
time="2023-11-03T13:20:50Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=51bef
time="2023-11-03T13:20:50Z" level=debug msg="No resources found\n" duration=442.810539ms execID=51bef
time="2023-11-03T13:20:50Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=eb365
time="2023-11-03T13:20:50Z" level=debug msg="No resources found\n" duration=155.882359ms execID=eb365
time="2023-11-03T13:20:51Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:20:51Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA1MSwibmJmIjoxNjk5MDE3NjUxLCJpYXQiOjE2OTkwMTc2NTEsImp0aSI6IjlhNmY0OTM5LWNlMzUtNDU1NC04NDVjLTI0MDdhMTUxNTA0MiJ9.DkPdgYZz_r74vvf8Vyrmmaei0vdtAIvD8Uq5YFasvZ4 --insecure" dir= execID=b9b4c
time="2023-11-03T13:20:51Z" level=debug duration=77.515762ms execID=b9b4c
time="2023-11-03T13:20:51Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=42196
time="2023-11-03T13:20:51Z" level=debug duration=1.903687ms execID=42196
time="2023-11-03T13:20:51Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=d35dd
time="2023-11-03T13:20:51Z" level=debug duration=1.619305ms execID=d35dd
time="2023-11-03T13:20:51Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=d24d7
time="2023-11-03T13:20:51Z" level=debug duration=1.568022ms execID=d24d7
time="2023-11-03T13:20:51Z" level=info msg="pkill -9 gpg-agent" dir= execID=bf907
time="2023-11-03T13:20:51Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=5acd6
time="2023-11-03T13:20:51Z" level=debug duration=10.043786ms execID=5acd6
time="2023-11-03T13:20:51Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=c2b2c
time="2023-11-03T13:20:51Z" level=debug duration=65.002099ms execID=c2b2c
time="2023-11-03T13:20:51Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=282ef
time="2023-11-03T13:20:51Z" level=debug duration=1.791302ms execID=282ef
time="2023-11-03T13:20:51Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=b02cf
time="2023-11-03T13:20:51Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.945957ms execID=b02cf
time="2023-11-03T13:20:51Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=e9393
time="2023-11-03T13:20:51Z" level=debug duration=42.723658ms execID=e9393
time="2023-11-03T13:20:51Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=2ebe7
time="2023-11-03T13:20:51Z" level=debug duration=37.818374ms execID=2ebe7
time="2023-11-03T13:20:51Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=68e5a
time="2023-11-03T13:20:51Z" level=debug duration=2.934138ms execID=68e5a
time="2023-11-03T13:20:51Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=869b5
Handling connection for 9081
time="2023-11-03T13:20:51Z" level=debug duration=65.448564ms execID=869b5
time="2023-11-03T13:20:51Z" level=info msg="kubectl create ns argocd-e2e--test-comparison-fails-if-cluster-not-added-lrjbf" dir= execID=38747
time="2023-11-03T13:20:52Z" level=debug msg="namespace/argocd-e2e--test-comparison-fails-if-cluster-not-added-lrjbf created\n" duration=131.617578ms execID=38747
time="2023-11-03T13:20:52Z" level=info msg="kubectl label ns argocd-e2e--test-comparison-fails-if-cluster-not-added-lrjbf e2e.argoproj.io=true" dir= execID=7b5c5
time="2023-11-03T13:20:52Z" level=debug msg="namespace/argocd-e2e--test-comparison-fails-if-cluster-not-added-lrjbf labeled\n" duration=237.970534ms execID=7b5c5
time="2023-11-03T13:20:52Z" level=info msg="clean state" duration=2.36472258s id=TestComparisonFailsIfClusterNotAdded-lrjbf name=TestComparisonFailsIfClusterNotAdded password=password username=admin
time="2023-11-03T13:20:53Z" level=info msg="../../dist/argocd app create test-comparison-fails-if-cluster-not-added --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://not-registered-cluster/api --path guestbook --project default --dest-namespace argocd-e2e--test-comparison-fails-if-cluster-not-added-lrjbf --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA1MSwibmJmIjoxNjk5MDE3NjUxLCJpYXQiOjE2OTkwMTc2NTEsImp0aSI6IjlhNmY0OTM5LWNlMzUtNDU1NC04NDVjLTI0MDdhMTUxNTA0MiJ9.DkPdgYZz_r74vvf8Vyrmmaei0vdtAIvD8Uq5YFasvZ4 --insecure" dir= execID=ae46b
time="2023-11-03T13:20:53Z" level=debug duration=71.337427ms execID=ae46b
time="2023-11-03T13:20:53Z" level=error msg="`../../dist/argocd app create test-comparison-fails-if-cluster-not-added --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://not-registered-cluster/api --path guestbook --project default --dest-namespace argocd-e2e--test-comparison-fails-if-cluster-not-added-lrjbf --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA1MSwibmJmIjoxNjk5MDE3NjUxLCJpYXQiOjE2OTkwMTc2NTEsImp0aSI6IjlhNmY0OTM5LWNlMzUtNDU1NC04NDVjLTI0MDdhMTUxNTA0MiJ9.DkPdgYZz_r74vvf8Vyrmmaei0vdtAIvD8Uq5YFasvZ4 --insecure` failed exit status 20: time=\"2023-11-03T13:20:53Z\" level=fatal msg=\"rpc error: code = InvalidArgument desc = application spec for test-comparison-fails-if-cluster-not-added is invalid: InvalidSpecError: Unable to get cluster: rpc error: code = NotFound desc = cluster \\\"https://not-registered-cluster/api\\\" not found\"" execID=ae46b
time="2023-11-03T13:20:53Z" level=info msg="expectation succeeded: app does not exist"
time="2023-11-03T13:20:53Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestComparisonFailsIfClusterNotAdded (3.44s)
=== RUN   TestCannotSetInvalidPath
time="2023-11-03T13:20:53Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=a2ee5
time="2023-11-03T13:20:53Z" level=debug msg="namespace \"argocd-e2e--test-comparison-fails-if-cluster-not-added-lrjbf\" deleted\n" duration=261.487561ms execID=a2ee5
time="2023-11-03T13:20:53Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=213ac
time="2023-11-03T13:20:54Z" level=debug msg="No resources found\n" duration=342.903764ms execID=213ac
time="2023-11-03T13:20:54Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=7f60d
time="2023-11-03T13:20:54Z" level=debug msg="No resources found\n" duration=235.021017ms execID=7f60d
time="2023-11-03T13:20:55Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:20:55Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA1NCwibmJmIjoxNjk5MDE3NjU0LCJpYXQiOjE2OTkwMTc2NTQsImp0aSI6IjZjY2JjODljLTU1NTQtNGQ3My1iMTZiLTU4OTZjZDRjZmNjMSJ9._VdYb_MIs5IhLWrF6KZtwoaYZ1cEjMeV4OmK9rJe2IY --insecure" dir= execID=917ca
time="2023-11-03T13:20:55Z" level=debug duration=97.172224ms execID=917ca
time="2023-11-03T13:20:55Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=b7448
time="2023-11-03T13:20:55Z" level=debug duration=1.840637ms execID=b7448
time="2023-11-03T13:20:55Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=00ac3
time="2023-11-03T13:20:55Z" level=debug duration=1.73503ms execID=00ac3
time="2023-11-03T13:20:55Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=976d6
time="2023-11-03T13:20:55Z" level=debug duration=1.435449ms execID=976d6
time="2023-11-03T13:20:55Z" level=info msg="pkill -9 gpg-agent" dir= execID=9b2b1
time="2023-11-03T13:20:55Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=5f20c
time="2023-11-03T13:20:55Z" level=debug duration=9.627595ms execID=5f20c
time="2023-11-03T13:20:55Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=46af0
time="2023-11-03T13:20:55Z" level=debug duration=31.170034ms execID=46af0
time="2023-11-03T13:20:55Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=602a5
time="2023-11-03T13:20:55Z" level=debug duration=1.543106ms execID=602a5
time="2023-11-03T13:20:55Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=18ee0
time="2023-11-03T13:20:55Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.680959ms execID=18ee0
time="2023-11-03T13:20:55Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=825ed
time="2023-11-03T13:20:55Z" level=debug duration=29.347053ms execID=825ed
time="2023-11-03T13:20:55Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=326b8
time="2023-11-03T13:20:55Z" level=debug duration=20.912495ms execID=326b8
time="2023-11-03T13:20:55Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=4ff96
time="2023-11-03T13:20:55Z" level=debug duration=2.371921ms execID=4ff96
time="2023-11-03T13:20:55Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=06e62
Handling connection for 9081
time="2023-11-03T13:20:55Z" level=debug duration=62.509357ms execID=06e62
time="2023-11-03T13:20:55Z" level=info msg="kubectl create ns argocd-e2e--test-cannot-set-invalid-path-bteed" dir= execID=b5276
time="2023-11-03T13:20:55Z" level=debug msg="namespace/argocd-e2e--test-cannot-set-invalid-path-bteed created\n" duration=140.077382ms execID=b5276
time="2023-11-03T13:20:55Z" level=info msg="kubectl label ns argocd-e2e--test-cannot-set-invalid-path-bteed e2e.argoproj.io=true" dir= execID=24ef7
time="2023-11-03T13:20:55Z" level=debug msg="namespace/argocd-e2e--test-cannot-set-invalid-path-bteed labeled\n" duration=261.777432ms execID=24ef7
time="2023-11-03T13:20:55Z" level=info msg="clean state" duration=2.286237109s id=TestCannotSetInvalidPath-bteed name=TestCannotSetInvalidPath password=password username=admin
time="2023-11-03T13:20:56Z" level=info msg="../../dist/argocd app create test-cannot-set-invalid-path --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-cannot-set-invalid-path-bteed --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA1NCwibmJmIjoxNjk5MDE3NjU0LCJpYXQiOjE2OTkwMTc2NTQsImp0aSI6IjZjY2JjODljLTU1NTQtNGQ3My1iMTZiLTU4OTZjZDRjZmNjMSJ9._VdYb_MIs5IhLWrF6KZtwoaYZ1cEjMeV4OmK9rJe2IY --insecure" dir= execID=d38f3
time="2023-11-03T13:20:56Z" level=debug msg="application 'test-cannot-set-invalid-path' created\n" duration=205.995822ms execID=d38f3
time="2023-11-03T13:20:56Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:20:56Z" level=info msg="../../dist/argocd app set test-cannot-set-invalid-path --path garbage --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA1NCwibmJmIjoxNjk5MDE3NjU0LCJpYXQiOjE2OTkwMTc2NTQsImp0aSI6IjZjY2JjODljLTU1NTQtNGQ3My1iMTZiLTU4OTZjZDRjZmNjMSJ9._VdYb_MIs5IhLWrF6KZtwoaYZ1cEjMeV4OmK9rJe2IY --insecure" dir= execID=51524
time="2023-11-03T13:20:57Z" level=debug duration=236.31956ms execID=51524
time="2023-11-03T13:20:57Z" level=error msg="`../../dist/argocd app set test-cannot-set-invalid-path --path garbage --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA1NCwibmJmIjoxNjk5MDE3NjU0LCJpYXQiOjE2OTkwMTc2NTQsImp0aSI6IjZjY2JjODljLTU1NTQtNGQ3My1iMTZiLTU4OTZjZDRjZmNjMSJ9._VdYb_MIs5IhLWrF6KZtwoaYZ1cEjMeV4OmK9rJe2IY --insecure` failed exit status 20: time=\"2023-11-03T13:20:57Z\" level=fatal msg=\"rpc error: code = InvalidArgument desc = application spec for test-cannot-set-invalid-path is invalid: InvalidSpecError: Unable to generate manifests in garbage: rpc error: code = Unknown desc = garbage: app path does not exist\"" execID=51524
time="2023-11-03T13:20:57Z" level=info msg="expectation succeeded: error ''"
time="2023-11-03T13:20:57Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCannotSetInvalidPath (3.73s)
=== RUN   TestManipulateApplicationResources
time="2023-11-03T13:20:57Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=f9c7c
time="2023-11-03T13:20:57Z" level=debug msg="namespace \"argocd-e2e--test-cannot-set-invalid-path-bteed\" deleted\n" duration=311.898507ms execID=f9c7c
time="2023-11-03T13:20:57Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=ecf88
time="2023-11-03T13:20:57Z" level=debug msg="No resources found\n" duration=416.227501ms execID=ecf88
time="2023-11-03T13:20:57Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=af04c
time="2023-11-03T13:20:58Z" level=debug msg="No resources found\n" duration=286.479607ms execID=af04c
time="2023-11-03T13:20:58Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:20:58Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA1OCwibmJmIjoxNjk5MDE3NjU4LCJpYXQiOjE2OTkwMTc2NTgsImp0aSI6IjAyOGNmYTUzLWJhYmItNDdkNS1iZjY3LTI5MTAxZjk2YmMzNCJ9.CpooktBXpz80XsxkmO63baMz6UI5JrazafTrZeIrFbA --insecure" dir= execID=c2486
time="2023-11-03T13:20:59Z" level=debug duration=67.506494ms execID=c2486
time="2023-11-03T13:20:59Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=86721
time="2023-11-03T13:20:59Z" level=debug duration=2.00057ms execID=86721
time="2023-11-03T13:20:59Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=b6270
time="2023-11-03T13:20:59Z" level=debug duration=1.653643ms execID=b6270
time="2023-11-03T13:20:59Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=99f2f
time="2023-11-03T13:20:59Z" level=debug duration=1.543968ms execID=99f2f
time="2023-11-03T13:20:59Z" level=info msg="pkill -9 gpg-agent" dir= execID=899a9
time="2023-11-03T13:20:59Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=82406
time="2023-11-03T13:20:59Z" level=debug duration=10.094846ms execID=82406
time="2023-11-03T13:20:59Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=8d13c
time="2023-11-03T13:20:59Z" level=debug duration=47.270778ms execID=8d13c
time="2023-11-03T13:20:59Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=e160e
time="2023-11-03T13:20:59Z" level=debug duration=1.979843ms execID=e160e
time="2023-11-03T13:20:59Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=d88db
time="2023-11-03T13:20:59Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.370065ms execID=d88db
time="2023-11-03T13:20:59Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=c6710
time="2023-11-03T13:20:59Z" level=debug duration=30.212174ms execID=c6710
time="2023-11-03T13:20:59Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=488b7
time="2023-11-03T13:20:59Z" level=debug duration=21.836691ms execID=488b7
time="2023-11-03T13:20:59Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=108f6
time="2023-11-03T13:20:59Z" level=debug duration=2.115055ms execID=108f6
time="2023-11-03T13:20:59Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=115d2
Handling connection for 9081
time="2023-11-03T13:20:59Z" level=debug duration=97.526902ms execID=115d2
time="2023-11-03T13:20:59Z" level=info msg="kubectl create ns argocd-e2e--test-manipulate-application-resources-pnqbz" dir= execID=6be32
time="2023-11-03T13:20:59Z" level=debug msg="namespace/argocd-e2e--test-manipulate-application-resources-pnqbz created\n" duration=143.051133ms execID=6be32
time="2023-11-03T13:20:59Z" level=info msg="kubectl label ns argocd-e2e--test-manipulate-application-resources-pnqbz e2e.argoproj.io=true" dir= execID=a9d37
time="2023-11-03T13:20:59Z" level=debug msg="namespace/argocd-e2e--test-manipulate-application-resources-pnqbz labeled\n" duration=276.752745ms execID=a9d37
time="2023-11-03T13:20:59Z" level=info msg="clean state" duration=2.554729184s id=TestManipulateApplicationResources-pnqbz name=TestManipulateApplicationResources password=password username=admin
time="2023-11-03T13:21:00Z" level=info msg="../../dist/argocd app create test-manipulate-application-resources --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-manipulate-application-resources-pnqbz --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA1OCwibmJmIjoxNjk5MDE3NjU4LCJpYXQiOjE2OTkwMTc2NTgsImp0aSI6IjAyOGNmYTUzLWJhYmItNDdkNS1iZjY3LTI5MTAxZjk2YmMzNCJ9.CpooktBXpz80XsxkmO63baMz6UI5JrazafTrZeIrFbA --insecure" dir= execID=c1884
time="2023-11-03T13:21:01Z" level=debug msg="application 'test-manipulate-application-resources' created\n" duration=274.031534ms execID=c1884
time="2023-11-03T13:21:01Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:21:01Z" level=info msg="../../dist/argocd app sync test-manipulate-application-resources --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA1OCwibmJmIjoxNjk5MDE3NjU4LCJpYXQiOjE2OTkwMTc2NTgsImp0aSI6IjAyOGNmYTUzLWJhYmItNDdkNS1iZjY3LTI5MTAxZjk2YmMzNCJ9.CpooktBXpz80XsxkmO63baMz6UI5JrazafTrZeIrFbA --insecure" dir= execID=772a0
time="2023-11-03T13:21:01Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                               NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:21:01+00:00            Service  argocd-e2e--test-manipulate-application-resources-pnqbz          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:21:01+00:00   apps  Deployment  argocd-e2e--test-manipulate-application-resources-pnqbz          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:21:01+00:00            Service  argocd-e2e--test-manipulate-application-resources-pnqbz          guestbook-ui  OutOfSync  Missing              service/guestbook-ui created\n2023-11-03T13:21:01+00:00   apps  Deployment  argocd-e2e--test-manipulate-application-resources-pnqbz          guestbook-ui  OutOfSync  Missing              deployment.apps/guestbook-ui created\n2023-11-03T13:21:01+00:00            Service  argocd-e2e--test-manipulate-application-resources-pnqbz          guestbook-ui    Synced  Healthy              service/guestbook-ui created\n\nName:               argocd-e2e/test-manipulate-application-resources\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-manipulate-application-resources-pnqbz\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-manipulate-application-resources\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (b48937c)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      b48937cf24a575c823ff45533d908e099124b392\nPhase:              Succeeded\nStart:              2023-11-03 13:21:01 +0000 UTC\nFinished:           2023-11-03 13:21:01 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                                NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-manipulate-application-resources-pnqbz  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-manipulate-application-resources-pnqbz  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=721.250389ms execID=772a0
time="2023-11-03T13:21:01Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:21:01Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:21:01Z" level=info msg="../../dist/argocd app manifests test-manipulate-application-resources --source live --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA1OCwibmJmIjoxNjk5MDE3NjU4LCJpYXQiOjE2OTkwMTc2NTgsImp0aSI6IjAyOGNmYTUzLWJhYmItNDdkNS1iZjY3LTI5MTAxZjk2YmMzNCJ9.CpooktBXpz80XsxkmO63baMz6UI5JrazafTrZeIrFbA --insecure" dir= execID=33177
time="2023-11-03T13:21:01Z" level=debug msg="---\napiVersion: v1\nkind: Service\nmetadata:\n  annotations:\n    kubectl.kubernetes.io/last-applied-configuration: |\n      {\"apiVersion\":\"v1\",\"kind\":\"Service\",\"metadata\":{\"annotations\":{},\"labels\":{\"app.kubernetes.io/instance\":\"test-manipulate-application-resources\"},\"name\":\"guestbook-ui\",\"namespace\":\"argocd-e2e--test-manipulate-application-resources-pnqbz\"},\"spec\":{\"ports\":[{\"port\":80,\"targetPort\":80}],\"selector\":{\"app\":\"guestbook-ui\"}}}\n  creationTimestamp: \"2023-11-03T13:21:01Z\"\n  labels:\n    app.kubernetes.io/instance: test-manipulate-application-resources\n  managedFields:\n  - apiVersion: v1\n    fieldsType: FieldsV1\n    fieldsV1:\n      f:metadata:\n        f:annotations:\n          .: {}\n          f:kubectl.kubernetes.io/last-applied-configuration: {}\n        f:labels:\n          .: {}\n          f:app.kubernetes.io/instance: {}\n      f:spec:\n        f:internalTrafficPolicy: {}\n        f:ports:\n          .: {}\n          k:{\"port\":80,\"protocol\":\"TCP\"}:\n            .: {}\n            f:port: {}\n            f:protocol: {}\n            f:targetPort: {}\n        f:selector: {}\n        f:sessionAffinity: {}\n        f:type: {}\n    manager: argocd-controller\n    operation: Update\n    time: \"2023-11-03T13:21:01Z\"\n  name: guestbook-ui\n  namespace: argocd-e2e--test-manipulate-application-resources-pnqbz\n  resourceVersion: \"36255683\"\n  uid: ed38c007-05db-49dc-b616-9f0799dda0e7\nspec:\n  clusterIP: 172.30.157.70\n  clusterIPs:\n  - 172.30.157.70\n  internalTrafficPolicy: Cluster\n  ipFamilies:\n  - IPv4\n  ipFamilyPolicy: SingleStack\n  ports:\n  - port: 80\n    protocol: TCP\n    targetPort: 80\n  selector:\n    app: guestbook-ui\n  sessionAffinity: None\n  type: ClusterIP\nstatus:\n  loadBalancer: {}\n\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  annotations:\n    deployment.kubernetes.io/revision: \"1\"\n    kubectl.kubernetes.io/last-applied-configuration: |\n      {\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app.kubernetes.io/instance\":\"test-manipulate-application-resources\",\"test\":\"true\"},\"name\":\"guestbook-ui\",\"namespace\":\"argocd-e2e--test-manipulate-application-resources-pnqbz\"},\"spec\":{\"replicas\":0,\"revisionHistoryLimit\":3,\"selector\":{\"matchLabels\":{\"app\":\"guestbook-ui\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"guestbook-ui\"}},\"spec\":{\"containers\":[{\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"guestbook-ui\",\"ports\":[{\"containerPort\":80}]}]}}}}\n  creationTimestamp: \"2023-11-03T13:21:01Z\"\n  generation: 1\n  labels:\n    app.kubernetes.io/instance: test-manipulate-application-resources\n    test: \"true\"\n  managedFields:\n  - apiVersion: apps/v1\n    fieldsType: FieldsV1\n    fieldsV1:\n      f:metadata:\n        f:annotations:\n          .: {}\n          f:kubectl.kubernetes.io/last-applied-configuration: {}\n        f:labels:\n          .: {}\n          f:app.kubernetes.io/instance: {}\n          f:test: {}\n      f:spec:\n        f:progressDeadlineSeconds: {}\n        f:replicas: {}\n        f:revisionHistoryLimit: {}\n        f:selector: {}\n        f:strategy:\n          f:rollingUpdate:\n            .: {}\n            f:maxSurge: {}\n            f:maxUnavailable: {}\n          f:type: {}\n        f:template:\n          f:metadata:\n            f:labels:\n              .: {}\n              f:app: {}\n          f:spec:\n            f:containers:\n              k:{\"name\":\"guestbook-ui\"}:\n                .: {}\n                f:image: {}\n                f:imagePullPolicy: {}\n                f:name: {}\n                f:ports:\n                  .: {}\n                  k:{\"containerPort\":80,\"protocol\":\"TCP\"}:\n                    .: {}\n                    f:containerPort: {}\n                    f:protocol: {}\n                f:resources: {}\n                f:terminationMessagePath: {}\n                f:terminationMessagePolicy: {}\n            f:dnsPolicy: {}\n            f:restartPolicy: {}\n            f:schedulerName: {}\n            f:securityContext: {}\n            f:terminationGracePeriodSeconds: {}\n    manager: argocd-controller\n    operation: Update\n    time: \"2023-11-03T13:21:01Z\"\n  - apiVersion: apps/v1\n    fieldsType: FieldsV1\n    fieldsV1:\n      f:metadata:\n        f:annotations:\n          f:deployment.kubernetes.io/revision: {}\n      f:status:\n        f:conditions:\n          .: {}\n          k:{\"type\":\"Available\"}:\n            .: {}\n            f:lastTransitionTime: {}\n            f:lastUpdateTime: {}\n            f:message: {}\n            f:reason: {}\n            f:status: {}\n            f:type: {}\n          k:{\"type\":\"Progressing\"}:\n            .: {}\n            f:lastTransitionTime: {}\n            f:lastUpdateTime: {}\n            f:message: {}\n            f:reason: {}\n            f:status: {}\n            f:type: {}\n        f:observedGeneration: {}\n    manager: kube-controller-manager\n    operation: Update\n    subresource: status\n    time: \"2023-11-03T13:21:01Z\"\n  name: guestbook-ui\n  namespace: argocd-e2e--test-manipulate-application-resources-pnqbz\n  resourceVersion: \"36255694\"\n  uid: e5a11122-15de-4f17-a03a-f8e195ffad59\nspec:\n  progressDeadlineSeconds: 600\n  replicas: 0\n  revisionHistoryLimit: 3\n  selector:\n    matchLabels:\n      app: guestbook-ui\n  strategy:\n    rollingUpdate:\n      maxSurge: 25%\n      maxUnavailable: 25%\n    type: RollingUpdate\n  template:\n    metadata:\n      creationTimestamp: null\n      labels:\n        app: guestbook-ui\n    spec:\n      containers:\n      - image: quay.io/argoprojlabs/argocd-e2e-container:0.2\n        imagePullPolicy: IfNotPresent\n        name: guestbook-ui\n        ports:\n        - containerPort: 80\n          protocol: TCP\n        resources: {}\n        terminationMessagePath: /dev/termination-log\n        terminationMessagePolicy: File\n      dnsPolicy: ClusterFirst\n      restartPolicy: Always\n      schedulerName: default-scheduler\n      securityContext: {}\n      terminationGracePeriodSeconds: 30\nstatus:\n  conditions:\n  - lastTransitionTime: \"2023-11-03T13:21:01Z\"\n    lastUpdateTime: \"2023-11-03T13:21:01Z\"\n    message: Deployment has minimum availability.\n    reason: MinimumReplicasAvailable\n    status: \"True\"\n    type: Available\n  - lastTransitionTime: \"2023-11-03T13:21:01Z\"\n    lastUpdateTime: \"2023-11-03T13:21:01Z\"\n    message: ReplicaSet \"guestbook-ui-864887c49c\" has successfully progressed.\n    reason: NewReplicaSetAvailable\n    status: \"True\"\n    type: Progressing\n  observedGeneration: 1\n\n" duration=97.426689ms execID=33177
time="2023-11-03T13:21:01Z" level=info msg="pending: sync status to be OutOfSync, is Synced"
time="2023-11-03T13:21:04Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:21:04Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestManipulateApplicationResources (7.70s)
=== RUN   TestAppWithSecrets
    fixture.go:901: 
--- SKIP: TestAppWithSecrets (0.00s)
=== RUN   TestResourceDiffing
time="2023-11-03T13:21:04Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=70de1
time="2023-11-03T13:21:05Z" level=debug msg="namespace \"argocd-e2e--test-manipulate-application-resources-pnqbz\" deleted\n" duration=307.73947ms execID=70de1
time="2023-11-03T13:21:05Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=88410
time="2023-11-03T13:21:05Z" level=debug msg="No resources found\n" duration=389.65687ms execID=88410
time="2023-11-03T13:21:05Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=91846
time="2023-11-03T13:21:05Z" level=debug msg="No resources found\n" duration=323.875037ms execID=91846
time="2023-11-03T13:21:06Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:21:06Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA2NiwibmJmIjoxNjk5MDE3NjY2LCJpYXQiOjE2OTkwMTc2NjYsImp0aSI6IjNkYWVlMzhmLTk1MTUtNDdjMy05ZmExLWYzMjdjY2JhY2M4YSJ9.gKCXk7iaMCeHNkjPa4y-kU7LEXQIJfqO5rivIUYM24k --insecure" dir= execID=b1901
time="2023-11-03T13:21:06Z" level=debug duration=79.651679ms execID=b1901
time="2023-11-03T13:21:07Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=356eb
time="2023-11-03T13:21:07Z" level=debug duration=1.98531ms execID=356eb
time="2023-11-03T13:21:07Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=54580
time="2023-11-03T13:21:07Z" level=debug duration=1.457215ms execID=54580
time="2023-11-03T13:21:07Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=893ed
time="2023-11-03T13:21:07Z" level=debug duration=1.515974ms execID=893ed
time="2023-11-03T13:21:07Z" level=info msg="pkill -9 gpg-agent" dir= execID=df12f
time="2023-11-03T13:21:07Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=91be9
time="2023-11-03T13:21:07Z" level=debug duration=9.786029ms execID=91be9
time="2023-11-03T13:21:07Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=ba72b
time="2023-11-03T13:21:07Z" level=debug duration=34.309638ms execID=ba72b
time="2023-11-03T13:21:07Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=63996
time="2023-11-03T13:21:07Z" level=debug duration=1.887935ms execID=63996
time="2023-11-03T13:21:07Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=ec060
time="2023-11-03T13:21:07Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.990497ms execID=ec060
time="2023-11-03T13:21:07Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=3f7e7
time="2023-11-03T13:21:07Z" level=debug duration=41.128ms execID=3f7e7
time="2023-11-03T13:21:07Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=09c97
time="2023-11-03T13:21:07Z" level=debug duration=23.339709ms execID=09c97
time="2023-11-03T13:21:07Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=2874c
time="2023-11-03T13:21:07Z" level=debug duration=2.311832ms execID=2874c
time="2023-11-03T13:21:07Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=3ba4b
Handling connection for 9081
time="2023-11-03T13:21:07Z" level=debug duration=83.169911ms execID=3ba4b
time="2023-11-03T13:21:07Z" level=info msg="kubectl create ns argocd-e2e--test-resource-diffing-fnixu" dir= execID=a5c57
time="2023-11-03T13:21:07Z" level=debug msg="namespace/argocd-e2e--test-resource-diffing-fnixu created\n" duration=125.993752ms execID=a5c57
time="2023-11-03T13:21:07Z" level=info msg="kubectl label ns argocd-e2e--test-resource-diffing-fnixu e2e.argoproj.io=true" dir= execID=2ae9b
time="2023-11-03T13:21:07Z" level=debug msg="namespace/argocd-e2e--test-resource-diffing-fnixu labeled\n" duration=355.677076ms execID=2ae9b
time="2023-11-03T13:21:07Z" level=info msg="clean state" duration=2.857689838s id=TestResourceDiffing-fnixu name=TestResourceDiffing password=password username=admin
time="2023-11-03T13:21:08Z" level=info msg="../../dist/argocd app create test-resource-diffing --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-resource-diffing-fnixu --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA2NiwibmJmIjoxNjk5MDE3NjY2LCJpYXQiOjE2OTkwMTc2NjYsImp0aSI6IjNkYWVlMzhmLTk1MTUtNDdjMy05ZmExLWYzMjdjY2JhY2M4YSJ9.gKCXk7iaMCeHNkjPa4y-kU7LEXQIJfqO5rivIUYM24k --insecure" dir= execID=8abec
time="2023-11-03T13:21:09Z" level=debug msg="application 'test-resource-diffing' created\n" duration=291.552995ms execID=8abec
time="2023-11-03T13:21:09Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:21:09Z" level=info msg="../../dist/argocd app sync test-resource-diffing --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA2NiwibmJmIjoxNjk5MDE3NjY2LCJpYXQiOjE2OTkwMTc2NjYsImp0aSI6IjNkYWVlMzhmLTk1MTUtNDdjMy05ZmExLWYzMjdjY2JhY2M4YSJ9.gKCXk7iaMCeHNkjPa4y-kU7LEXQIJfqO5rivIUYM24k --insecure" dir= execID=5bbce
time="2023-11-03T13:21:09Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                               NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:21:09+00:00            Service  argocd-e2e--test-resource-diffing-fnixu          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:21:09+00:00   apps  Deployment  argocd-e2e--test-resource-diffing-fnixu          guestbook-ui  OutOfSync  Missing              \n\nName:               argocd-e2e/test-resource-diffing\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-resource-diffing-fnixu\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-resource-diffing\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (19871fa)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      19871fa1349bdc2aca34194b4cbcf266e7b23b0b\nPhase:              Succeeded\nStart:              2023-11-03 13:21:09 +0000 UTC\nFinished:           2023-11-03 13:21:09 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-resource-diffing-fnixu  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-resource-diffing-fnixu  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=897.374784ms execID=5bbce
time="2023-11-03T13:21:09Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:21:09Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:21:09Z" level=info msg="../../dist/argocd app get test-resource-diffing --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA2NiwibmJmIjoxNjk5MDE3NjY2LCJpYXQiOjE2OTkwMTc2NjYsImp0aSI6IjNkYWVlMzhmLTk1MTUtNDdjMy05ZmExLWYzMjdjY2JhY2M4YSJ9.gKCXk7iaMCeHNkjPa4y-kU7LEXQIJfqO5rivIUYM24k --insecure" dir= execID=ec410
time="2023-11-03T13:21:10Z" level=debug msg="Name:               argocd-e2e/test-resource-diffing\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-resource-diffing-fnixu\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-resource-diffing\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (19871fa)\nHealth Status:      Healthy\n\nGROUP  KIND        NAMESPACE                                NAME          STATUS     HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-resource-diffing-fnixu  guestbook-ui  Synced     Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-resource-diffing-fnixu  guestbook-ui  OutOfSync  Healthy        deployment.apps/guestbook-ui created\n" duration=150.21225ms execID=ec410
time="2023-11-03T13:21:10Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:21:10Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:21:10Z" level=info msg="../../dist/argocd app diff test-resource-diffing --local testdata --server-side-generate --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA2NiwibmJmIjoxNjk5MDE3NjY2LCJpYXQiOjE2OTkwMTc2NjYsImp0aSI6IjNkYWVlMzhmLTk1MTUtNDdjMy05ZmExLWYzMjdjY2JhY2M4YSJ9.gKCXk7iaMCeHNkjPa4y-kU7LEXQIJfqO5rivIUYM24k --insecure" dir= execID=a2133
time="2023-11-03T13:21:10Z" level=debug duration=191.501487ms execID=a2133
time="2023-11-03T13:21:10Z" level=error msg="`../../dist/argocd app diff test-resource-diffing --local testdata --server-side-generate --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA2NiwibmJmIjoxNjk5MDE3NjY2LCJpYXQiOjE2OTkwMTc2NjYsImp0aSI6IjNkYWVlMzhmLTk1MTUtNDdjMy05ZmExLWYzMjdjY2JhY2M4YSJ9.gKCXk7iaMCeHNkjPa4y-kU7LEXQIJfqO5rivIUYM24k --insecure` failed exit status 20: time=\"2023-11-03T13:21:10Z\" level=fatal msg=\"rpc error: code = Unknown desc = error receiving manifest file stream: error receiving tgz file: file checksum validation error: calc e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855 sent 68e4058cec00ec5cdac6321c2eef2b05d8fa78b7027c89bd030d657d11aef74d\"" execID=a2133
    app_management_test.go:860: 
        	Error Trace:	/argocd-e2e/argo-cd/test/e2e/app_management_test.go:860
        	            				/argocd-e2e/argo-cd/test/e2e/fixture/app/consequences.go:47
        	            				/argocd-e2e/argo-cd/test/e2e/app_management_test.go:857
        	Error:      	"" does not contain "===== apps/Deployment argocd-e2e--test-resource-diffing-fnixu/guestbook-ui ======"
        	Test:       	TestResourceDiffing
time="2023-11-03T13:21:11Z" level=info msg="../../dist/argocd app get test-resource-diffing --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA2NiwibmJmIjoxNjk5MDE3NjY2LCJpYXQiOjE2OTkwMTc2NjYsImp0aSI6IjNkYWVlMzhmLTk1MTUtNDdjMy05ZmExLWYzMjdjY2JhY2M4YSJ9.gKCXk7iaMCeHNkjPa4y-kU7LEXQIJfqO5rivIUYM24k --insecure" dir= execID=e55dd
time="2023-11-03T13:21:16Z" level=debug msg="Name:               argocd-e2e/test-resource-diffing\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-resource-diffing-fnixu\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-resource-diffing\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (19871fa)\nHealth Status:      Healthy\n\nGROUP  KIND        NAMESPACE                                NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-resource-diffing-fnixu  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-resource-diffing-fnixu  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=4.761913305s execID=e55dd
time="2023-11-03T13:21:16Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:21:16Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:21:16Z" level=info msg="../../dist/argocd app diff test-resource-diffing --local testdata --server-side-generate --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA2NiwibmJmIjoxNjk5MDE3NjY2LCJpYXQiOjE2OTkwMTc2NjYsImp0aSI6IjNkYWVlMzhmLTk1MTUtNDdjMy05ZmExLWYzMjdjY2JhY2M4YSJ9.gKCXk7iaMCeHNkjPa4y-kU7LEXQIJfqO5rivIUYM24k --insecure" dir= execID=2ea5a
time="2023-11-03T13:21:16Z" level=debug duration=189.967543ms execID=2ea5a
time="2023-11-03T13:21:16Z" level=error msg="`../../dist/argocd app diff test-resource-diffing --local testdata --server-side-generate --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA2NiwibmJmIjoxNjk5MDE3NjY2LCJpYXQiOjE2OTkwMTc2NjYsImp0aSI6IjNkYWVlMzhmLTk1MTUtNDdjMy05ZmExLWYzMjdjY2JhY2M4YSJ9.gKCXk7iaMCeHNkjPa4y-kU7LEXQIJfqO5rivIUYM24k --insecure` failed exit status 20: time=\"2023-11-03T13:21:16Z\" level=fatal msg=\"rpc error: code = Unknown desc = error receiving manifest file stream: error receiving tgz file: file checksum validation error: calc e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855 sent 68e4058cec00ec5cdac6321c2eef2b05d8fa78b7027c89bd030d657d11aef74d\"" execID=2ea5a
    app_management_test.go:872: 
        	Error Trace:	/argocd-e2e/argo-cd/test/e2e/app_management_test.go:872
        	            				/argocd-e2e/argo-cd/test/e2e/fixture/app/consequences.go:47
        	            				/argocd-e2e/argo-cd/test/e2e/app_management_test.go:870
        	Error:      	Received unexpected error:
        	            	`../../dist/argocd app diff test-resource-diffing --local testdata --server-side-generate --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA2NiwibmJmIjoxNjk5MDE3NjY2LCJpYXQiOjE2OTkwMTc2NjYsImp0aSI6IjNkYWVlMzhmLTk1MTUtNDdjMy05ZmExLWYzMjdjY2JhY2M4YSJ9.gKCXk7iaMCeHNkjPa4y-kU7LEXQIJfqO5rivIUYM24k --insecure` failed exit status 20: time="2023-11-03T13:21:16Z" level=fatal msg="rpc error: code = Unknown desc = error receiving manifest file stream: error receiving tgz file: file checksum validation error: calc e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855 sent 68e4058cec00ec5cdac6321c2eef2b05d8fa78b7027c89bd030d657d11aef74d"
        	Test:       	TestResourceDiffing
time="2023-11-03T13:21:17Z" level=info msg="../../dist/argocd app patch test-resource-diffing --patch [{\n\t\t\t\"op\": \"add\",\n\t\t\t\"path\": \"/spec/syncPolicy\",\n\t\t\t\"value\": { \"syncOptions\": [\"ServerSideApply=true\"] }\n\t\t\t}] --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA2NiwibmJmIjoxNjk5MDE3NjY2LCJpYXQiOjE2OTkwMTc2NjYsImp0aSI6IjNkYWVlMzhmLTk1MTUtNDdjMy05ZmExLWYzMjdjY2JhY2M4YSJ9.gKCXk7iaMCeHNkjPa4y-kU7LEXQIJfqO5rivIUYM24k --insecure" dir= execID=d6e1c
time="2023-11-03T13:21:17Z" level=debug msg="metadata:\n  creationTimestamp: \"2023-11-03T13:21:09Z\"\n  generation: 13\n  managedFields:\n  - apiVersion: argoproj.io/v1alpha1\n    fieldsType: FieldsV1\n    fieldsV1:\n      f:status:\n        f:health:\n          f:status: {}\n        f:history: {}\n        f:operationState:\n          .: {}\n          f:finishedAt: {}\n          f:message: {}\n          f:operation:\n            .: {}\n            f:initiatedBy:\n              .: {}\n              f:username: {}\n            f:retry: {}\n            f:sync:\n              .: {}\n              f:prune: {}\n              f:revision: {}\n              f:syncStrategy:\n                .: {}\n                f:hook: {}\n          f:phase: {}\n          f:startedAt: {}\n          f:syncResult:\n            .: {}\n            f:resources: {}\n            f:revision: {}\n            f:source:\n              .: {}\n              f:path: {}\n              f:repoURL: {}\n        f:reconciledAt: {}\n        f:resources: {}\n        f:sourceType: {}\n        f:sync:\n          f:comparedTo:\n            f:destination:\n              f:namespace: {}\n              f:server: {}\n            f:source:\n              f:path: {}\n              f:repoURL: {}\n          f:revision: {}\n          f:status: {}\n    manager: argocd-application-controller\n    operation: Update\n    time: \"2023-11-03T13:21:16Z\"\n  - apiVersion: argoproj.io/v1alpha1\n    fieldsType: FieldsV1\n    fieldsV1:\n      f:spec:\n        .: {}\n        f:destination:\n          .: {}\n          f:namespace: {}\n          f:server: {}\n        f:project: {}\n        f:source:\n          .: {}\n          f:path: {}\n          f:repoURL: {}\n        f:syncPolicy:\n          .: {}\n          f:syncOptions: {}\n      f:status:\n        .: {}\n        f:health: {}\n        f:summary: {}\n        f:sync:\n          .: {}\n          f:comparedTo:\n            .: {}\n            f:destination: {}\n            f:source: {}\n    manager: argocd-server\n    operation: Update\n    time: \"2023-11-03T13:21:17Z\"\n  name: test-resource-diffing\n  namespace: argocd-e2e\n  resourceVersion: \"36256005\"\n  uid: b277e4ed-8b0d-4278-a65d-683f2e3b2b7a\nspec:\n  destination:\n    namespace: argocd-e2e--test-resource-diffing-fnixu\n    server: https://kubernetes.default.svc\n  project: default\n  source:\n    path: guestbook\n    repoURL: http://argocd-e2e-server:9081/argo-e2e/testdata.git\n  syncPolicy:\n    syncOptions:\n    - ServerSideApply=true\nstatus:\n  health:\n    status: Healthy\n  history:\n  - deployStartedAt: \"2023-11-03T13:21:09Z\"\n    deployedAt: \"2023-11-03T13:21:09Z\"\n    id: 0\n    revision: 19871fa1349bdc2aca34194b4cbcf266e7b23b0b\n    source:\n      path: guestbook\n      repoURL: http://argocd-e2e-server:9081/argo-e2e/testdata.git\n  operationState:\n    finishedAt: \"2023-11-03T13:21:09Z\"\n    message: successfully synced (all tasks run)\n    operation:\n      initiatedBy:\n        username: admin\n      retry: {}\n      sync:\n        prune: true\n        revision: 19871fa1349bdc2aca34194b4cbcf266e7b23b0b\n        syncStrategy:\n          hook: {}\n    phase: Succeeded\n    startedAt: \"2023-11-03T13:21:09Z\"\n    syncResult:\n      resources:\n      - group: \"\"\n        hookPhase: Running\n        kind: Service\n        message: service/guestbook-ui created\n        name: guestbook-ui\n        namespace: argocd-e2e--test-resource-diffing-fnixu\n        status: Synced\n        syncPhase: Sync\n        version: v1\n      - group: apps\n        hookPhase: Running\n        kind: Deployment\n        message: deployment.apps/guestbook-ui created\n        name: guestbook-ui\n        namespace: argocd-e2e--test-resource-diffing-fnixu\n        status: Synced\n        syncPhase: Sync\n        version: v1\n      revision: 19871fa1349bdc2aca34194b4cbcf266e7b23b0b\n      source:\n        path: guestbook\n        repoURL: http://argocd-e2e-server:9081/argo-e2e/testdata.git\n  reconciledAt: \"2023-11-03T13:21:11Z\"\n  resources:\n  - health:\n      status: Healthy\n    kind: Service\n    name: guestbook-ui\n    namespace: argocd-e2e--test-resource-diffing-fnixu\n    status: Synced\n    version: v1\n  - group: apps\n    health:\n      status: Healthy\n    kind: Deployment\n    name: guestbook-ui\n    namespace: argocd-e2e--test-resource-diffing-fnixu\n    status: Synced\n    version: v1\n  sourceType: Kustomize\n  summary: {}\n  sync:\n    comparedTo:\n      destination:\n        namespace: argocd-e2e--test-resource-diffing-fnixu\n        server: https://kubernetes.default.svc\n      source:\n        path: guestbook\n        repoURL: http://argocd-e2e-server:9081/argo-e2e/testdata.git\n    revision: 19871fa1349bdc2aca34194b4cbcf266e7b23b0b\n    status: Synced\n\n" duration=178.30876ms execID=d6e1c
time="2023-11-03T13:21:17Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:21:17Z" level=info msg="../../dist/argocd app sync test-resource-diffing --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA2NiwibmJmIjoxNjk5MDE3NjY2LCJpYXQiOjE2OTkwMTc2NjYsImp0aSI6IjNkYWVlMzhmLTk1MTUtNDdjMy05ZmExLWYzMjdjY2JhY2M4YSJ9.gKCXk7iaMCeHNkjPa4y-kU7LEXQIJfqO5rivIUYM24k --insecure" dir= execID=3a897
time="2023-11-03T13:21:18Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                               NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:21:17+00:00            Service  argocd-e2e--test-resource-diffing-fnixu          guestbook-ui    Synced  Healthy              \n2023-11-03T13:21:17+00:00   apps  Deployment  argocd-e2e--test-resource-diffing-fnixu          guestbook-ui    Synced  Healthy              \n2023-11-03T13:21:18+00:00            Service  argocd-e2e--test-resource-diffing-fnixu          guestbook-ui    Synced  Healthy              service/guestbook-ui serverside-applied\n2023-11-03T13:21:18+00:00   apps  Deployment  argocd-e2e--test-resource-diffing-fnixu          guestbook-ui    Synced  Healthy              deployment.apps/guestbook-ui serverside-applied\n2023-11-03T13:21:18+00:00   apps  Deployment  argocd-e2e--test-resource-diffing-fnixu          guestbook-ui    Synced  Progressing              deployment.apps/guestbook-ui serverside-applied\n\nName:               argocd-e2e/test-resource-diffing\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-resource-diffing-fnixu\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-resource-diffing\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (19871fa)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      19871fa1349bdc2aca34194b4cbcf266e7b23b0b\nPhase:              Succeeded\nStart:              2023-11-03 13:21:17 +0000 UTC\nFinished:           2023-11-03 13:21:18 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-resource-diffing-fnixu  guestbook-ui  Synced  Healthy        service/guestbook-ui serverside-applied\napps   Deployment  argocd-e2e--test-resource-diffing-fnixu  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui serverside-applied\n" duration=752.692168ms execID=3a897
time="2023-11-03T13:21:18Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:21:18Z" level=info msg="kubectl apply -n argocd-e2e--test-resource-diffing-fnixu --server-side=true --field-manager=revision-history-manager --validate=false --force-conflicts -f -" dir= execID=4b46d
time="2023-11-03T13:21:21Z" level=debug msg="deployment.apps/guestbook-ui serverside-applied\n" duration=3.69390104s execID=4b46d
time="2023-11-03T13:21:21Z" level=info msg="../../dist/argocd app get test-resource-diffing --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA2NiwibmJmIjoxNjk5MDE3NjY2LCJpYXQiOjE2OTkwMTc2NjYsImp0aSI6IjNkYWVlMzhmLTk1MTUtNDdjMy05ZmExLWYzMjdjY2JhY2M4YSJ9.gKCXk7iaMCeHNkjPa4y-kU7LEXQIJfqO5rivIUYM24k --insecure" dir= execID=e40fa
time="2023-11-03T13:21:22Z" level=debug msg="Name:               argocd-e2e/test-resource-diffing\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-resource-diffing-fnixu\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-resource-diffing\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (19871fa)\nHealth Status:      Healthy\n\nGROUP  KIND        NAMESPACE                                NAME          STATUS     HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-resource-diffing-fnixu  guestbook-ui  Synced     Healthy        service/guestbook-ui serverside-applied\napps   Deployment  argocd-e2e--test-resource-diffing-fnixu  guestbook-ui  OutOfSync  Healthy        deployment.apps/guestbook-ui serverside-applied\n" duration=204.657183ms execID=e40fa
time="2023-11-03T13:21:22Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:21:22Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:21:23Z" level=info msg="../../dist/argocd app get test-resource-diffing --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA2NiwibmJmIjoxNjk5MDE3NjY2LCJpYXQiOjE2OTkwMTc2NjYsImp0aSI6IjNkYWVlMzhmLTk1MTUtNDdjMy05ZmExLWYzMjdjY2JhY2M4YSJ9.gKCXk7iaMCeHNkjPa4y-kU7LEXQIJfqO5rivIUYM24k --insecure" dir= execID=10b14
time="2023-11-03T13:21:28Z" level=debug msg="Name:               argocd-e2e/test-resource-diffing\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-resource-diffing-fnixu\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-resource-diffing\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (19871fa)\nHealth Status:      Healthy\n\nGROUP  KIND        NAMESPACE                                NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-resource-diffing-fnixu  guestbook-ui  Synced  Healthy        service/guestbook-ui serverside-applied\napps   Deployment  argocd-e2e--test-resource-diffing-fnixu  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui serverside-applied\n" duration=5.006109039s execID=10b14
time="2023-11-03T13:21:28Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:21:28Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:21:29Z" level=info msg="../../dist/argocd app sync test-resource-diffing --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA2NiwibmJmIjoxNjk5MDE3NjY2LCJpYXQiOjE2OTkwMTc2NjYsImp0aSI6IjNkYWVlMzhmLTk1MTUtNDdjMy05ZmExLWYzMjdjY2JhY2M4YSJ9.gKCXk7iaMCeHNkjPa4y-kU7LEXQIJfqO5rivIUYM24k --insecure" dir= execID=ad170
time="2023-11-03T13:21:29Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                               NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:21:29+00:00            Service  argocd-e2e--test-resource-diffing-fnixu          guestbook-ui    Synced  Healthy              \n2023-11-03T13:21:29+00:00   apps  Deployment  argocd-e2e--test-resource-diffing-fnixu          guestbook-ui    Synced  Healthy              \n2023-11-03T13:21:29+00:00            Service  argocd-e2e--test-resource-diffing-fnixu          guestbook-ui    Synced  Healthy              service/guestbook-ui serverside-applied\n2023-11-03T13:21:29+00:00   apps  Deployment  argocd-e2e--test-resource-diffing-fnixu          guestbook-ui    Synced  Healthy              deployment.apps/guestbook-ui serverside-applied\n\nName:               argocd-e2e/test-resource-diffing\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-resource-diffing-fnixu\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-resource-diffing\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (19871fa)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      19871fa1349bdc2aca34194b4cbcf266e7b23b0b\nPhase:              Succeeded\nStart:              2023-11-03 13:21:29 +0000 UTC\nFinished:           2023-11-03 13:21:29 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-resource-diffing-fnixu  guestbook-ui  Synced  Healthy        service/guestbook-ui serverside-applied\napps   Deployment  argocd-e2e--test-resource-diffing-fnixu  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui serverside-applied\n" duration=681.441537ms execID=ad170
time="2023-11-03T13:21:29Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:21:29Z" level=info msg="../../dist/argocd app patch test-resource-diffing --patch [{\n\t\t\t\"op\": \"add\",\n\t\t\t\"path\": \"/spec/syncPolicy\",\n\t\t\t\"value\": { \"syncOptions\": [\"RespectIgnoreDifferences=true\"] }\n\t\t\t}] --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA2NiwibmJmIjoxNjk5MDE3NjY2LCJpYXQiOjE2OTkwMTc2NjYsImp0aSI6IjNkYWVlMzhmLTk1MTUtNDdjMy05ZmExLWYzMjdjY2JhY2M4YSJ9.gKCXk7iaMCeHNkjPa4y-kU7LEXQIJfqO5rivIUYM24k --insecure" dir= execID=cfa22
time="2023-11-03T13:21:30Z" level=debug msg="metadata:\n  creationTimestamp: \"2023-11-03T13:21:09Z\"\n  generation: 29\n  managedFields:\n  - apiVersion: argoproj.io/v1alpha1\n    fieldsType: FieldsV1\n    fieldsV1:\n      f:status:\n        f:health:\n          f:status: {}\n        f:history: {}\n        f:operationState:\n          .: {}\n          f:finishedAt: {}\n          f:message: {}\n          f:operation:\n            .: {}\n            f:initiatedBy:\n              .: {}\n              f:username: {}\n            f:retry: {}\n            f:sync:\n              .: {}\n              f:prune: {}\n              f:revision: {}\n              f:syncOptions: {}\n              f:syncStrategy:\n                .: {}\n                f:hook: {}\n          f:phase: {}\n          f:startedAt: {}\n          f:syncResult:\n            .: {}\n            f:resources: {}\n            f:revision: {}\n            f:source:\n              .: {}\n              f:path: {}\n              f:repoURL: {}\n        f:reconciledAt: {}\n        f:resources: {}\n        f:sourceType: {}\n        f:sync:\n          f:comparedTo:\n            f:destination:\n              f:namespace: {}\n              f:server: {}\n            f:source:\n              f:path: {}\n              f:repoURL: {}\n          f:revision: {}\n          f:status: {}\n    manager: argocd-application-controller\n    operation: Update\n    time: \"2023-11-03T13:21:29Z\"\n  - apiVersion: argoproj.io/v1alpha1\n    fieldsType: FieldsV1\n    fieldsV1:\n      f:spec:\n        .: {}\n        f:destination:\n          .: {}\n          f:namespace: {}\n          f:server: {}\n        f:project: {}\n        f:source:\n          .: {}\n          f:path: {}\n          f:repoURL: {}\n        f:syncPolicy:\n          .: {}\n          f:syncOptions: {}\n      f:status:\n        .: {}\n        f:health: {}\n        f:summary: {}\n        f:sync:\n          .: {}\n          f:comparedTo:\n            .: {}\n            f:destination: {}\n            f:source: {}\n    manager: argocd-server\n    operation: Update\n    time: \"2023-11-03T13:21:29Z\"\n  name: test-resource-diffing\n  namespace: argocd-e2e\n  resourceVersion: \"36256172\"\n  uid: b277e4ed-8b0d-4278-a65d-683f2e3b2b7a\nspec:\n  destination:\n    namespace: argocd-e2e--test-resource-diffing-fnixu\n    server: https://kubernetes.default.svc\n  project: default\n  source:\n    path: guestbook\n    repoURL: http://argocd-e2e-server:9081/argo-e2e/testdata.git\n  syncPolicy:\n    syncOptions:\n    - RespectIgnoreDifferences=true\nstatus:\n  health:\n    status: Healthy\n  history:\n  - deployStartedAt: \"2023-11-03T13:21:09Z\"\n    deployedAt: \"2023-11-03T13:21:09Z\"\n    id: 0\n    revision: 19871fa1349bdc2aca34194b4cbcf266e7b23b0b\n    source:\n      path: guestbook\n      repoURL: http://argocd-e2e-server:9081/argo-e2e/testdata.git\n  - deployStartedAt: \"2023-11-03T13:21:17Z\"\n    deployedAt: \"2023-11-03T13:21:18Z\"\n    id: 1\n    revision: 19871fa1349bdc2aca34194b4cbcf266e7b23b0b\n    source:\n      path: guestbook\n      repoURL: http://argocd-e2e-server:9081/argo-e2e/testdata.git\n  - deployStartedAt: \"2023-11-03T13:21:29Z\"\n    deployedAt: \"2023-11-03T13:21:29Z\"\n    id: 2\n    revision: 19871fa1349bdc2aca34194b4cbcf266e7b23b0b\n    source:\n      path: guestbook\n      repoURL: http://argocd-e2e-server:9081/argo-e2e/testdata.git\n  operationState:\n    finishedAt: \"2023-11-03T13:21:29Z\"\n    message: successfully synced (all tasks run)\n    operation:\n      initiatedBy:\n        username: admin\n      retry: {}\n      sync:\n        prune: true\n        revision: 19871fa1349bdc2aca34194b4cbcf266e7b23b0b\n        syncOptions:\n        - ServerSideApply=true\n        syncStrategy:\n          hook: {}\n    phase: Succeeded\n    startedAt: \"2023-11-03T13:21:29Z\"\n    syncResult:\n      resources:\n      - group: \"\"\n        hookPhase: Running\n        kind: Service\n        message: service/guestbook-ui serverside-applied\n        name: guestbook-ui\n        namespace: argocd-e2e--test-resource-diffing-fnixu\n        status: Synced\n        syncPhase: Sync\n        version: v1\n      - group: apps\n        hookPhase: Running\n        kind: Deployment\n        message: deployment.apps/guestbook-ui serverside-applied\n        name: guestbook-ui\n        namespace: argocd-e2e--test-resource-diffing-fnixu\n        status: Synced\n        syncPhase: Sync\n        version: v1\n      revision: 19871fa1349bdc2aca34194b4cbcf266e7b23b0b\n      source:\n        path: guestbook\n        repoURL: http://argocd-e2e-server:9081/argo-e2e/testdata.git\n  reconciledAt: \"2023-11-03T13:21:29Z\"\n  resources:\n  - health:\n      status: Healthy\n    kind: Service\n    name: guestbook-ui\n    namespace: argocd-e2e--test-resource-diffing-fnixu\n    status: Synced\n    version: v1\n  - group: apps\n    health:\n      status: Healthy\n    kind: Deployment\n    name: guestbook-ui\n    namespace: argocd-e2e--test-resource-diffing-fnixu\n    status: Synced\n    version: v1\n  sourceType: Kustomize\n  summary: {}\n  sync:\n    comparedTo:\n      destination:\n        namespace: argocd-e2e--test-resource-diffing-fnixu\n        server: https://kubernetes.default.svc\n      source:\n        path: guestbook\n        repoURL: http://argocd-e2e-server:9081/argo-e2e/testdata.git\n    revision: 19871fa1349bdc2aca34194b4cbcf266e7b23b0b\n    status: Synced\n\n" duration=153.901284ms execID=cfa22
time="2023-11-03T13:21:30Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:21:30Z" level=info msg="kubectl apply -n argocd-e2e--test-resource-diffing-fnixu --server-side=true --field-manager=revision-history-manager --validate=false --force-conflicts -f -" dir= execID=2ef1f
time="2023-11-03T13:21:31Z" level=debug msg="deployment.apps/guestbook-ui serverside-applied\n" duration=1.12497354s execID=2ef1f
time="2023-11-03T13:21:31Z" level=info msg="../../dist/argocd app get test-resource-diffing --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA2NiwibmJmIjoxNjk5MDE3NjY2LCJpYXQiOjE2OTkwMTc2NjYsImp0aSI6IjNkYWVlMzhmLTk1MTUtNDdjMy05ZmExLWYzMjdjY2JhY2M4YSJ9.gKCXk7iaMCeHNkjPa4y-kU7LEXQIJfqO5rivIUYM24k --insecure" dir= execID=30e88
time="2023-11-03T13:21:31Z" level=debug msg="Name:               argocd-e2e/test-resource-diffing\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-resource-diffing-fnixu\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-resource-diffing\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (19871fa)\nHealth Status:      Healthy\n\nGROUP  KIND        NAMESPACE                                NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-resource-diffing-fnixu  guestbook-ui  Synced  Healthy        service/guestbook-ui serverside-applied\napps   Deployment  argocd-e2e--test-resource-diffing-fnixu  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui serverside-applied\n" duration=174.683653ms execID=30e88
time="2023-11-03T13:21:31Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:21:31Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:21:31Z" level=info msg="../../dist/argocd app sync test-resource-diffing --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA2NiwibmJmIjoxNjk5MDE3NjY2LCJpYXQiOjE2OTkwMTc2NjYsImp0aSI6IjNkYWVlMzhmLTk1MTUtNDdjMy05ZmExLWYzMjdjY2JhY2M4YSJ9.gKCXk7iaMCeHNkjPa4y-kU7LEXQIJfqO5rivIUYM24k --insecure" dir= execID=852ba
time="2023-11-03T13:21:32Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                               NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:21:31+00:00            Service  argocd-e2e--test-resource-diffing-fnixu          guestbook-ui    Synced  Healthy              \n2023-11-03T13:21:31+00:00   apps  Deployment  argocd-e2e--test-resource-diffing-fnixu          guestbook-ui    Synced  Healthy              \n\nName:               argocd-e2e/test-resource-diffing\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-resource-diffing-fnixu\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-resource-diffing\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (19871fa)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      19871fa1349bdc2aca34194b4cbcf266e7b23b0b\nPhase:              Succeeded\nStart:              2023-11-03 13:21:31 +0000 UTC\nFinished:           2023-11-03 13:21:31 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-resource-diffing-fnixu  guestbook-ui  Synced  Healthy        service/guestbook-ui unchanged\napps   Deployment  argocd-e2e--test-resource-diffing-fnixu  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui configured. Warning: resource deployments/guestbook-ui is missing the kubectl.kubernetes.io/last-applied-configuration annotation which is required by  apply.  apply should only be used on resources created declaratively by either  create --save-config or  apply. The missing annotation will be patched automatically.\n" duration=744.119493ms execID=852ba
time="2023-11-03T13:21:32Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:21:32Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
--- FAIL: TestResourceDiffing (27.21s)
=== RUN   TestCRDs
time="2023-11-03T13:21:32Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=75f81
time="2023-11-03T13:21:32Z" level=debug msg="namespace \"argocd-e2e--test-resource-diffing-fnixu\" deleted\n" duration=237.853713ms execID=75f81
time="2023-11-03T13:21:32Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=c13d3
time="2023-11-03T13:21:32Z" level=debug msg="No resources found\n" duration=448.035528ms execID=c13d3
time="2023-11-03T13:21:32Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=8a163
time="2023-11-03T13:21:33Z" level=debug msg="No resources found\n" duration=221.424474ms execID=8a163
time="2023-11-03T13:21:33Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:21:33Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA5MywibmJmIjoxNjk5MDE3NjkzLCJpYXQiOjE2OTkwMTc2OTMsImp0aSI6ImQzOGJmZDM3LTA0MDItNGYyMi1hN2QwLTExZmY3OTMwN2Q2YiJ9.DNzXDxgKNreeKEAaNm5u-vNKhWs95iXQGYP2ppn407w --insecure" dir= execID=e250c
time="2023-11-03T13:21:34Z" level=debug duration=103.793812ms execID=e250c
time="2023-11-03T13:21:34Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=72d6a
time="2023-11-03T13:21:34Z" level=debug duration=1.964326ms execID=72d6a
time="2023-11-03T13:21:34Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=00456
time="2023-11-03T13:21:34Z" level=debug duration=1.526469ms execID=00456
time="2023-11-03T13:21:34Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=54623
time="2023-11-03T13:21:34Z" level=debug duration=1.56847ms execID=54623
time="2023-11-03T13:21:34Z" level=info msg="pkill -9 gpg-agent" dir= execID=dbc21
time="2023-11-03T13:21:34Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=16555
time="2023-11-03T13:21:34Z" level=debug duration=9.781116ms execID=16555
time="2023-11-03T13:21:34Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=f68ac
time="2023-11-03T13:21:34Z" level=debug duration=35.208921ms execID=f68ac
time="2023-11-03T13:21:34Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=57b38
time="2023-11-03T13:21:34Z" level=debug duration=1.869894ms execID=57b38
time="2023-11-03T13:21:34Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=101f8
time="2023-11-03T13:21:34Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.752984ms execID=101f8
time="2023-11-03T13:21:34Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=eb450
time="2023-11-03T13:21:34Z" level=debug duration=32.615218ms execID=eb450
time="2023-11-03T13:21:34Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=f2694
time="2023-11-03T13:21:34Z" level=debug duration=22.291901ms execID=f2694
time="2023-11-03T13:21:34Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=9841e
time="2023-11-03T13:21:34Z" level=debug duration=2.707831ms execID=9841e
time="2023-11-03T13:21:34Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=baf91
Handling connection for 9081
time="2023-11-03T13:21:34Z" level=debug duration=77.502932ms execID=baf91
time="2023-11-03T13:21:34Z" level=info msg="kubectl create ns argocd-e2e--test-cr-ds-dlntu" dir= execID=66d3f
time="2023-11-03T13:21:34Z" level=debug msg="namespace/argocd-e2e--test-cr-ds-dlntu created\n" duration=141.190772ms execID=66d3f
time="2023-11-03T13:21:34Z" level=info msg="kubectl label ns argocd-e2e--test-cr-ds-dlntu e2e.argoproj.io=true" dir= execID=8b04c
time="2023-11-03T13:21:34Z" level=debug msg="namespace/argocd-e2e--test-cr-ds-dlntu labeled\n" duration=279.06201ms execID=8b04c
time="2023-11-03T13:21:34Z" level=info msg="clean state" duration=2.679273745s id=TestCRDs-dlntu name=TestCRDs password=password username=admin
time="2023-11-03T13:21:35Z" level=info msg="../../dist/argocd app create test-cr-ds --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path crd-creation --project default --dest-namespace argocd-e2e--test-cr-ds-dlntu --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA5MywibmJmIjoxNjk5MDE3NjkzLCJpYXQiOjE2OTkwMTc2OTMsImp0aSI6ImQzOGJmZDM3LTA0MDItNGYyMi1hN2QwLTExZmY3OTMwN2Q2YiJ9.DNzXDxgKNreeKEAaNm5u-vNKhWs95iXQGYP2ppn407w --insecure" dir= execID=fdb81
time="2023-11-03T13:21:36Z" level=debug msg="application 'test-cr-ds' created\n" duration=303.110888ms execID=fdb81
time="2023-11-03T13:21:36Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:21:36Z" level=info msg="../../dist/argocd app sync test-cr-ds --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA5MywibmJmIjoxNjk5MDE3NjkzLCJpYXQiOjE2OTkwMTc2OTMsImp0aSI6ImQzOGJmZDM3LTA0MDItNGYyMi1hN2QwLTExZmY3OTMwN2Q2YiJ9.DNzXDxgKNreeKEAaNm5u-vNKhWs95iXQGYP2ppn407w --insecure" dir= execID=3191c
time="2023-11-03T13:21:40Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:21:40+00:00  apiextensions.k8s.io  CustomResourceDefinition                                clusterdummies.argoproj.io    Synced                        \n2023-11-03T13:21:40+00:00  apiextensions.k8s.io  CustomResourceDefinition                                 dummies.argoproj.io          Synced                        \n2023-11-03T13:21:40+00:00  argoproj.io           ClusterDummy                                            cluster-dummy-crd-instance  OutOfSync                       \n2023-11-03T13:21:40+00:00  argoproj.io                Dummy                argocd-e2e--test-cr-ds-dlntu    dummy-crd-instance        OutOfSync  Missing              \n2023-11-03T13:21:40+00:00  argoproj.io                Dummy                kube-system                     dummy-crd-instance        OutOfSync                       \n2023-11-03T13:21:40+00:00  apiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-cr-ds-dlntu   dummies.argoproj.io         Running    Synced              customresourcedefinition.apiextensions.k8s.io/dummies.argoproj.io unchanged\n2023-11-03T13:21:40+00:00  apiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-cr-ds-dlntu  clusterdummies.argoproj.io   Running    Synced              customresourcedefinition.apiextensions.k8s.io/clusterdummies.argoproj.io unchanged\n2023-11-03T13:21:40+00:00  argoproj.io           ClusterDummy              argocd-e2e--test-cr-ds-dlntu  cluster-dummy-crd-instance   Running    Synced              clusterdummy.argoproj.io/cluster-dummy-crd-instance configured\n2023-11-03T13:21:40+00:00  argoproj.io                Dummy                kube-system                     dummy-crd-instance        OutOfSync                       dummy.argoproj.io/dummy-crd-instance configured\n2023-11-03T13:21:40+00:00  argoproj.io                Dummy                argocd-e2e--test-cr-ds-dlntu    dummy-crd-instance        OutOfSync  Missing              dummy.argoproj.io/dummy-crd-instance created\n2023-11-03T13:21:40+00:00  argoproj.io  ClusterDummy               cluster-dummy-crd-instance    Synced                       \n2023-11-03T13:21:40+00:00  argoproj.io       Dummy    kube-system    dummy-crd-instance          Synced                       dummy.argoproj.io/dummy-crd-instance configured\n\nName:               argocd-e2e/test-cr-ds\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-cr-ds-dlntu\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-cr-ds\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               crd-creation\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (5091813)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      5091813cc185c64ebbc98c050b35c9c3607d9c74\nPhase:              Succeeded\nStart:              2023-11-03 13:21:36 +0000 UTC\nFinished:           2023-11-03 13:21:40 +0000 UTC\nDuration:           4s\nMessage:            successfully synced (all tasks run)\n\nGROUP                 KIND                      NAMESPACE                     NAME                        STATUS   HEALTH  HOOK  MESSAGE\napiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-cr-ds-dlntu  dummies.argoproj.io         Running  Synced        customresourcedefinition.apiextensions.k8s.io/dummies.argoproj.io unchanged\napiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-cr-ds-dlntu  clusterdummies.argoproj.io  Running  Synced        customresourcedefinition.apiextensions.k8s.io/clusterdummies.argoproj.io unchanged\nargoproj.io           ClusterDummy              argocd-e2e--test-cr-ds-dlntu  cluster-dummy-crd-instance  Running  Synced        clusterdummy.argoproj.io/cluster-dummy-crd-instance configured\nargoproj.io           Dummy                     kube-system                   dummy-crd-instance          Synced                 dummy.argoproj.io/dummy-crd-instance configured\nargoproj.io           Dummy                     argocd-e2e--test-cr-ds-dlntu  dummy-crd-instance          Synced                 dummy.argoproj.io/dummy-crd-instance created\napiextensions.k8s.io  CustomResourceDefinition                                clusterdummies.argoproj.io  Synced                 \napiextensions.k8s.io  CustomResourceDefinition                                dummies.argoproj.io         Synced                 \nargoproj.io           ClusterDummy                                            cluster-dummy-crd-instance  Synced                 \n" duration=4.722862814s execID=3191c
time="2023-11-03T13:21:40Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:21:40Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:21:40Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:21:40Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:21:40Z" level=info msg="../../dist/argocd app diff test-cr-ds --local testdata --server-side-generate --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA5MywibmJmIjoxNjk5MDE3NjkzLCJpYXQiOjE2OTkwMTc2OTMsImp0aSI6ImQzOGJmZDM3LTA0MDItNGYyMi1hN2QwLTExZmY3OTMwN2Q2YiJ9.DNzXDxgKNreeKEAaNm5u-vNKhWs95iXQGYP2ppn407w --insecure" dir= execID=cb308
time="2023-11-03T13:21:41Z" level=debug duration=215.250013ms execID=cb308
time="2023-11-03T13:21:41Z" level=error msg="`../../dist/argocd app diff test-cr-ds --local testdata --server-side-generate --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA5MywibmJmIjoxNjk5MDE3NjkzLCJpYXQiOjE2OTkwMTc2OTMsImp0aSI6ImQzOGJmZDM3LTA0MDItNGYyMi1hN2QwLTExZmY3OTMwN2Q2YiJ9.DNzXDxgKNreeKEAaNm5u-vNKhWs95iXQGYP2ppn407w --insecure` failed exit status 20: time=\"2023-11-03T13:21:41Z\" level=fatal msg=\"rpc error: code = Unknown desc = error receiving manifest file stream: error receiving tgz file: file checksum validation error: calc e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855 sent 68e4058cec00ec5cdac6321c2eef2b05d8fa78b7027c89bd030d657d11aef74d\"" execID=cb308
    app_management_test.go:1002: 
        	Error Trace:	/argocd-e2e/argo-cd/test/e2e/app_management_test.go:1002
        	            				/argocd-e2e/argo-cd/test/e2e/fixture/app/consequences.go:47
        	            				/argocd-e2e/argo-cd/test/e2e/app_management_test.go:999
        	            				/argocd-e2e/argo-cd/test/e2e/app_management_test.go:943
        	Error:      	Received unexpected error:
        	            	`../../dist/argocd app diff test-cr-ds --local testdata --server-side-generate --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDA5MywibmJmIjoxNjk5MDE3NjkzLCJpYXQiOjE2OTkwMTc2OTMsImp0aSI6ImQzOGJmZDM3LTA0MDItNGYyMi1hN2QwLTExZmY3OTMwN2Q2YiJ9.DNzXDxgKNreeKEAaNm5u-vNKhWs95iXQGYP2ppn407w --insecure` failed exit status 20: time="2023-11-03T13:21:41Z" level=fatal msg="rpc error: code = Unknown desc = error receiving manifest file stream: error receiving tgz file: file checksum validation error: calc e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855 sent 68e4058cec00ec5cdac6321c2eef2b05d8fa78b7027c89bd030d657d11aef74d"
        	Test:       	TestCRDs
--- FAIL: TestCRDs (8.94s)
=== RUN   TestKnownTypesInCRDDiffing
time="2023-11-03T13:21:41Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=9350e
time="2023-11-03T13:21:41Z" level=debug msg="namespace \"argocd-e2e--test-cr-ds-dlntu\" deleted\n" duration=176.986667ms execID=9350e
time="2023-11-03T13:21:41Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=3674c
time="2023-11-03T13:21:41Z" level=debug msg="No resources found\n" duration=422.886447ms execID=3674c
time="2023-11-03T13:21:41Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=b38c3
time="2023-11-03T13:21:41Z" level=debug msg="No resources found\n" duration=156.136047ms execID=b38c3
time="2023-11-03T13:21:42Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:21:42Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDEwMiwibmJmIjoxNjk5MDE3NzAyLCJpYXQiOjE2OTkwMTc3MDIsImp0aSI6ImUzMDI5OWNkLWUzYzgtNDVkMi1hZjkzLWU1YzZlZTM5ZGI2ZiJ9.CuQcw51g_3a0kOQ_h_56KYc0HQbShbbti4F6UQY5mCI --insecure" dir= execID=3694d
time="2023-11-03T13:21:42Z" level=debug duration=70.145098ms execID=3694d
time="2023-11-03T13:21:42Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=59b6a
time="2023-11-03T13:21:42Z" level=debug duration=2.089767ms execID=59b6a
time="2023-11-03T13:21:42Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=52a51
time="2023-11-03T13:21:42Z" level=debug duration=1.675858ms execID=52a51
time="2023-11-03T13:21:42Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=02f56
time="2023-11-03T13:21:42Z" level=debug duration=1.48056ms execID=02f56
time="2023-11-03T13:21:42Z" level=info msg="pkill -9 gpg-agent" dir= execID=81935
time="2023-11-03T13:21:42Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=3ddf7
time="2023-11-03T13:21:42Z" level=debug duration=9.992648ms execID=3ddf7
time="2023-11-03T13:21:42Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=7f7f2
time="2023-11-03T13:21:42Z" level=debug duration=36.277328ms execID=7f7f2
time="2023-11-03T13:21:42Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=c6323
time="2023-11-03T13:21:42Z" level=debug duration=1.544523ms execID=c6323
time="2023-11-03T13:21:42Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=6b02e
time="2023-11-03T13:21:42Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.592914ms execID=6b02e
time="2023-11-03T13:21:42Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=8abda
time="2023-11-03T13:21:42Z" level=debug duration=23.167857ms execID=8abda
time="2023-11-03T13:21:42Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=47ac1
time="2023-11-03T13:21:42Z" level=debug duration=24.542469ms execID=47ac1
time="2023-11-03T13:21:42Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=c3e8b
time="2023-11-03T13:21:42Z" level=debug duration=2.361004ms execID=c3e8b
time="2023-11-03T13:21:42Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=95865
Handling connection for 9081
time="2023-11-03T13:21:42Z" level=debug duration=63.430778ms execID=95865
time="2023-11-03T13:21:42Z" level=info msg="kubectl create ns argocd-e2e--test-known-types-in-crd-diffing-jtaut" dir= execID=28efe
time="2023-11-03T13:21:42Z" level=debug msg="namespace/argocd-e2e--test-known-types-in-crd-diffing-jtaut created\n" duration=143.382314ms execID=28efe
time="2023-11-03T13:21:42Z" level=info msg="kubectl label ns argocd-e2e--test-known-types-in-crd-diffing-jtaut e2e.argoproj.io=true" dir= execID=df0a1
time="2023-11-03T13:21:43Z" level=debug msg="namespace/argocd-e2e--test-known-types-in-crd-diffing-jtaut labeled\n" duration=279.72205ms execID=df0a1
time="2023-11-03T13:21:43Z" level=info msg="clean state" duration=2.20602137s id=TestKnownTypesInCRDDiffing-jtaut name=TestKnownTypesInCRDDiffing password=password username=admin
time="2023-11-03T13:21:44Z" level=info msg="../../dist/argocd app create test-known-types-in-crd-diffing --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path crd-creation --project default --dest-namespace argocd-e2e--test-known-types-in-crd-diffing-jtaut --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDEwMiwibmJmIjoxNjk5MDE3NzAyLCJpYXQiOjE2OTkwMTc3MDIsImp0aSI6ImUzMDI5OWNkLWUzYzgtNDVkMi1hZjkzLWU1YzZlZTM5ZGI2ZiJ9.CuQcw51g_3a0kOQ_h_56KYc0HQbShbbti4F6UQY5mCI --insecure" dir= execID=e2a21
time="2023-11-03T13:21:44Z" level=debug msg="application 'test-known-types-in-crd-diffing' created\n" duration=328.245755ms execID=e2a21
time="2023-11-03T13:21:44Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:21:44Z" level=info msg="../../dist/argocd app sync test-known-types-in-crd-diffing --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDEwMiwibmJmIjoxNjk5MDE3NzAyLCJpYXQiOjE2OTkwMTc3MDIsImp0aSI6ImUzMDI5OWNkLWUzYzgtNDVkMi1hZjkzLWU1YzZlZTM5ZGI2ZiJ9.CuQcw51g_3a0kOQ_h_56KYc0HQbShbbti4F6UQY5mCI --insecure" dir= execID=a732a
time="2023-11-03T13:21:45Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:21:44+00:00  argoproj.io                Dummy                argocd-e2e--test-known-types-in-crd-diffing-jtaut    dummy-crd-instance        OutOfSync  Missing              \n2023-11-03T13:21:44+00:00  argoproj.io                Dummy                kube-system                                          dummy-crd-instance        OutOfSync                       \n2023-11-03T13:21:44+00:00  apiextensions.k8s.io  CustomResourceDefinition                                                     clusterdummies.argoproj.io    Synced                        \n2023-11-03T13:21:44+00:00  apiextensions.k8s.io  CustomResourceDefinition                                                      dummies.argoproj.io          Synced                        \n2023-11-03T13:21:44+00:00  argoproj.io           ClusterDummy                                                                 cluster-dummy-crd-instance  OutOfSync                       \n2023-11-03T13:21:45+00:00  apiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-known-types-in-crd-diffing-jtaut  clusterdummies.argoproj.io   Running    Synced              customresourcedefinition.apiextensions.k8s.io/clusterdummies.argoproj.io unchanged\n2023-11-03T13:21:45+00:00  apiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-known-types-in-crd-diffing-jtaut   dummies.argoproj.io         Running    Synced              customresourcedefinition.apiextensions.k8s.io/dummies.argoproj.io unchanged\n2023-11-03T13:21:45+00:00  argoproj.io           ClusterDummy              argocd-e2e--test-known-types-in-crd-diffing-jtaut  cluster-dummy-crd-instance   Running    Synced              clusterdummy.argoproj.io/cluster-dummy-crd-instance configured\n2023-11-03T13:21:45+00:00  argoproj.io                Dummy                kube-system                                          dummy-crd-instance        OutOfSync                       dummy.argoproj.io/dummy-crd-instance configured\n2023-11-03T13:21:45+00:00  argoproj.io                Dummy                argocd-e2e--test-known-types-in-crd-diffing-jtaut    dummy-crd-instance        OutOfSync  Missing              dummy.argoproj.io/dummy-crd-instance created\n2023-11-03T13:21:45+00:00  argoproj.io       Dummy    kube-system                                          dummy-crd-instance          Synced                       dummy.argoproj.io/dummy-crd-instance configured\n2023-11-03T13:21:45+00:00  argoproj.io       Dummy    argocd-e2e--test-known-types-in-crd-diffing-jtaut    dummy-crd-instance          Synced  Missing              dummy.argoproj.io/dummy-crd-instance created\n2023-11-03T13:21:45+00:00  argoproj.io  ClusterDummy                                                     cluster-dummy-crd-instance    Synced                       \n\nName:               argocd-e2e/test-known-types-in-crd-diffing\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-known-types-in-crd-diffing-jtaut\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-known-types-in-crd-diffing\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               crd-creation\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (cb0b1c0)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      cb0b1c0c296dc9a41c9815f2d6d4a659d2547cd9\nPhase:              Succeeded\nStart:              2023-11-03 13:21:44 +0000 UTC\nFinished:           2023-11-03 13:21:45 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP                 KIND                      NAMESPACE                                          NAME                        STATUS   HEALTH  HOOK  MESSAGE\napiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-known-types-in-crd-diffing-jtaut  clusterdummies.argoproj.io  Running  Synced        customresourcedefinition.apiextensions.k8s.io/clusterdummies.argoproj.io unchanged\napiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-known-types-in-crd-diffing-jtaut  dummies.argoproj.io         Running  Synced        customresourcedefinition.apiextensions.k8s.io/dummies.argoproj.io unchanged\nargoproj.io           ClusterDummy              argocd-e2e--test-known-types-in-crd-diffing-jtaut  cluster-dummy-crd-instance  Running  Synced        clusterdummy.argoproj.io/cluster-dummy-crd-instance configured\nargoproj.io           Dummy                     kube-system                                        dummy-crd-instance          Synced                 dummy.argoproj.io/dummy-crd-instance configured\nargoproj.io           Dummy                     argocd-e2e--test-known-types-in-crd-diffing-jtaut  dummy-crd-instance          Synced                 dummy.argoproj.io/dummy-crd-instance created\napiextensions.k8s.io  CustomResourceDefinition                                                     clusterdummies.argoproj.io  Synced                 \napiextensions.k8s.io  CustomResourceDefinition                                                     dummies.argoproj.io         Synced                 \nargoproj.io           ClusterDummy                                                                 cluster-dummy-crd-instance  Synced                 \n" duration=861.658492ms execID=a732a
time="2023-11-03T13:21:45Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:21:45Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:21:45Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:21:45Z" level=info msg="../../dist/argocd app get test-known-types-in-crd-diffing --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDEwMiwibmJmIjoxNjk5MDE3NzAyLCJpYXQiOjE2OTkwMTc3MDIsImp0aSI6ImUzMDI5OWNkLWUzYzgtNDVkMi1hZjkzLWU1YzZlZTM5ZGI2ZiJ9.CuQcw51g_3a0kOQ_h_56KYc0HQbShbbti4F6UQY5mCI --insecure" dir= execID=1e949
time="2023-11-03T13:21:45Z" level=debug msg="Name:               argocd-e2e/test-known-types-in-crd-diffing\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-known-types-in-crd-diffing-jtaut\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-known-types-in-crd-diffing\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               crd-creation\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (cb0b1c0)\nHealth Status:      Healthy\n\nGROUP                 KIND                      NAMESPACE                                          NAME                        STATUS     HEALTH  HOOK  MESSAGE\napiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-known-types-in-crd-diffing-jtaut  clusterdummies.argoproj.io  Running    Synced        customresourcedefinition.apiextensions.k8s.io/clusterdummies.argoproj.io unchanged\napiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-known-types-in-crd-diffing-jtaut  dummies.argoproj.io         Running    Synced        customresourcedefinition.apiextensions.k8s.io/dummies.argoproj.io unchanged\nargoproj.io           ClusterDummy              argocd-e2e--test-known-types-in-crd-diffing-jtaut  cluster-dummy-crd-instance  Running    Synced        clusterdummy.argoproj.io/cluster-dummy-crd-instance configured\nargoproj.io           Dummy                     kube-system                                        dummy-crd-instance          Synced                   dummy.argoproj.io/dummy-crd-instance configured\nargoproj.io           Dummy                     argocd-e2e--test-known-types-in-crd-diffing-jtaut  dummy-crd-instance          OutOfSync                dummy.argoproj.io/dummy-crd-instance created\napiextensions.k8s.io  CustomResourceDefinition                                                     clusterdummies.argoproj.io  Synced                   \napiextensions.k8s.io  CustomResourceDefinition                                                     dummies.argoproj.io         Synced                   \nargoproj.io           ClusterDummy                                                                 cluster-dummy-crd-instance  Synced                   \n" duration=130.53319ms execID=1e949
time="2023-11-03T13:21:45Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:21:45Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:21:45Z" level=info msg="../../dist/argocd app get test-known-types-in-crd-diffing --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDEwMiwibmJmIjoxNjk5MDE3NzAyLCJpYXQiOjE2OTkwMTc3MDIsImp0aSI6ImUzMDI5OWNkLWUzYzgtNDVkMi1hZjkzLWU1YzZlZTM5ZGI2ZiJ9.CuQcw51g_3a0kOQ_h_56KYc0HQbShbbti4F6UQY5mCI --insecure" dir= execID=1b1bb
time="2023-11-03T13:21:50Z" level=debug msg="Name:               argocd-e2e/test-known-types-in-crd-diffing\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-known-types-in-crd-diffing-jtaut\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-known-types-in-crd-diffing\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               crd-creation\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (cb0b1c0)\nHealth Status:      Healthy\n\nGROUP                 KIND                      NAMESPACE                                          NAME                        STATUS   HEALTH  HOOK  MESSAGE\napiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-known-types-in-crd-diffing-jtaut  clusterdummies.argoproj.io  Running  Synced        customresourcedefinition.apiextensions.k8s.io/clusterdummies.argoproj.io unchanged\napiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-known-types-in-crd-diffing-jtaut  dummies.argoproj.io         Running  Synced        customresourcedefinition.apiextensions.k8s.io/dummies.argoproj.io unchanged\nargoproj.io           ClusterDummy              argocd-e2e--test-known-types-in-crd-diffing-jtaut  cluster-dummy-crd-instance  Running  Synced        clusterdummy.argoproj.io/cluster-dummy-crd-instance configured\nargoproj.io           Dummy                     kube-system                                        dummy-crd-instance          Synced                 dummy.argoproj.io/dummy-crd-instance configured\nargoproj.io           Dummy                     argocd-e2e--test-known-types-in-crd-diffing-jtaut  dummy-crd-instance          Synced                 dummy.argoproj.io/dummy-crd-instance created\napiextensions.k8s.io  CustomResourceDefinition                                                     clusterdummies.argoproj.io  Synced                 \napiextensions.k8s.io  CustomResourceDefinition                                                     dummies.argoproj.io         Synced                 \nargoproj.io           ClusterDummy                                                                 cluster-dummy-crd-instance  Synced                 \n" duration=4.784445057s execID=1b1bb
time="2023-11-03T13:21:50Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:21:50Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:21:50Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestKnownTypesInCRDDiffing (9.37s)
=== RUN   TestDuplicatedResources
time="2023-11-03T13:21:50Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=51378
time="2023-11-03T13:21:50Z" level=debug msg="namespace \"argocd-e2e--test-known-types-in-crd-diffing-jtaut\" deleted\n" duration=204.342526ms execID=51378
time="2023-11-03T13:21:50Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=127d9
time="2023-11-03T13:21:51Z" level=debug msg="No resources found\n" duration=388.04664ms execID=127d9
time="2023-11-03T13:21:51Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=09f2e
time="2023-11-03T13:21:51Z" level=debug msg="No resources found\n" duration=220.40457ms execID=09f2e
time="2023-11-03T13:21:52Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:21:52Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDExMiwibmJmIjoxNjk5MDE3NzEyLCJpYXQiOjE2OTkwMTc3MTIsImp0aSI6ImM0YjZmZTdmLTZmNzMtNDVhNS04NDQ1LTQwNGU0MTZhYmQ4YyJ9.qlAqAl6WLFIPHXZvyjUJm5Oz1D4MpQCLYm_kANUkwK4 --insecure" dir= execID=cf2d8
time="2023-11-03T13:21:52Z" level=debug duration=95.23934ms execID=cf2d8
time="2023-11-03T13:21:52Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=fb7f4
time="2023-11-03T13:21:52Z" level=debug duration=3.297559ms execID=fb7f4
time="2023-11-03T13:21:52Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=b8c4e
time="2023-11-03T13:21:52Z" level=debug duration=1.645678ms execID=b8c4e
time="2023-11-03T13:21:52Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=553ed
time="2023-11-03T13:21:52Z" level=debug duration=1.691975ms execID=553ed
time="2023-11-03T13:21:52Z" level=info msg="pkill -9 gpg-agent" dir= execID=8f7c8
time="2023-11-03T13:21:52Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=8fe70
time="2023-11-03T13:21:52Z" level=debug duration=10.082748ms execID=8fe70
time="2023-11-03T13:21:52Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=bf782
time="2023-11-03T13:21:52Z" level=debug duration=33.392836ms execID=bf782
time="2023-11-03T13:21:52Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=7da8a
time="2023-11-03T13:21:52Z" level=debug duration=1.51579ms execID=7da8a
time="2023-11-03T13:21:52Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=ca913
time="2023-11-03T13:21:52Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.779841ms execID=ca913
time="2023-11-03T13:21:52Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=f72e7
time="2023-11-03T13:21:52Z" level=debug duration=31.162999ms execID=f72e7
time="2023-11-03T13:21:52Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=fdb4a
time="2023-11-03T13:21:52Z" level=debug duration=19.833186ms execID=fdb4a
time="2023-11-03T13:21:52Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=c48f5
time="2023-11-03T13:21:52Z" level=debug duration=3.26842ms execID=c48f5
time="2023-11-03T13:21:52Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=76488
Handling connection for 9081
time="2023-11-03T13:21:52Z" level=debug duration=97.407517ms execID=76488
time="2023-11-03T13:21:52Z" level=info msg="kubectl create ns argocd-e2e--test-duplicated-resources-qmjhx" dir= execID=45b97
time="2023-11-03T13:21:52Z" level=debug msg="namespace/argocd-e2e--test-duplicated-resources-qmjhx created\n" duration=179.397469ms execID=45b97
time="2023-11-03T13:21:52Z" level=info msg="kubectl label ns argocd-e2e--test-duplicated-resources-qmjhx e2e.argoproj.io=true" dir= execID=10cc1
time="2023-11-03T13:21:53Z" level=debug msg="namespace/argocd-e2e--test-duplicated-resources-qmjhx labeled\n" duration=306.395396ms execID=10cc1
time="2023-11-03T13:21:53Z" level=info msg="clean state" duration=2.661234734s id=TestDuplicatedResources-qmjhx name=TestDuplicatedResources password=password username=admin
time="2023-11-03T13:21:54Z" level=info msg="../../dist/argocd app create test-duplicated-resources --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path duplicated-resources --project default --dest-namespace argocd-e2e--test-duplicated-resources-qmjhx --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDExMiwibmJmIjoxNjk5MDE3NzEyLCJpYXQiOjE2OTkwMTc3MTIsImp0aSI6ImM0YjZmZTdmLTZmNzMtNDVhNS04NDQ1LTQwNGU0MTZhYmQ4YyJ9.qlAqAl6WLFIPHXZvyjUJm5Oz1D4MpQCLYm_kANUkwK4 --insecure" dir= execID=12a5d
time="2023-11-03T13:21:54Z" level=debug msg="application 'test-duplicated-resources' created\n" duration=223.379043ms execID=12a5d
time="2023-11-03T13:21:54Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:21:54Z" level=info msg="../../dist/argocd app sync test-duplicated-resources --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDExMiwibmJmIjoxNjk5MDE3NzEyLCJpYXQiOjE2OTkwMTc3MTIsImp0aSI6ImM0YjZmZTdmLTZmNzMtNDVhNS04NDQ1LTQwNGU0MTZhYmQ4YyJ9.qlAqAl6WLFIPHXZvyjUJm5Oz1D4MpQCLYm_kANUkwK4 --insecure" dir= execID=7d3ec
time="2023-11-03T13:21:59Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:21:58+00:00  argoproj.io                Dummy                   default                                     dummy-crd-instance        OutOfSync  Missing              \n2023-11-03T13:21:58+00:00  argoproj.io                Dummy                kube-system                                    dummy-crd-instance        OutOfSync                       \n2023-11-03T13:21:58+00:00  apiextensions.k8s.io  CustomResourceDefinition                                               clusterdummies.argoproj.io  OutOfSync                       \n2023-11-03T13:21:58+00:00  apiextensions.k8s.io  CustomResourceDefinition                                                dummies.argoproj.io        OutOfSync                       \n2023-11-03T13:21:58+00:00  argoproj.io           ClusterDummy                                                           cluster-dummy-crd-instance  OutOfSync                       \n2023-11-03T13:21:58+00:00  argoproj.io                Dummy                argocd-e2e--test-duplicated-resources-qmjhx    dummy-crd-instance        OutOfSync  Missing              \n2023-11-03T13:21:58+00:00  argoproj.io                Dummy                kube-system                                    dummy-crd-instance        OutOfSync                       dummy.argoproj.io/dummy-crd-instance configured\n2023-11-03T13:21:58+00:00  argoproj.io                Dummy                   default                                     dummy-crd-instance        OutOfSync  Missing              dummy.argoproj.io/dummy-crd-instance created\n2023-11-03T13:21:58+00:00  apiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-duplicated-resources-qmjhx   dummies.argoproj.io         Running    Synced              customresourcedefinition.apiextensions.k8s.io/dummies.argoproj.io configured\n2023-11-03T13:21:58+00:00  apiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-duplicated-resources-qmjhx  clusterdummies.argoproj.io   Running    Synced              customresourcedefinition.apiextensions.k8s.io/clusterdummies.argoproj.io configured\n2023-11-03T13:21:58+00:00  argoproj.io           ClusterDummy              argocd-e2e--test-duplicated-resources-qmjhx  cluster-dummy-crd-instance   Running    Synced              clusterdummy.argoproj.io/cluster-dummy-crd-instance configured\n2023-11-03T13:21:58+00:00  argoproj.io                Dummy                argocd-e2e--test-duplicated-resources-qmjhx    dummy-crd-instance        OutOfSync  Missing              dummy.argoproj.io/dummy-crd-instance created\n\nName:               argocd-e2e/test-duplicated-resources\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-duplicated-resources-qmjhx\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-duplicated-resources\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               duplicated-resources\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (e018684)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      e018684b55768a050cae52a42f05f619d0191216\nPhase:              Succeeded\nStart:              2023-11-03 13:21:54 +0000 UTC\nFinished:           2023-11-03 13:21:58 +0000 UTC\nDuration:           4s\nMessage:            successfully synced (all tasks run)\n\nGROUP                 KIND                      NAMESPACE                                    NAME                        STATUS   HEALTH  HOOK  MESSAGE\napiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-duplicated-resources-qmjhx  dummies.argoproj.io         Running  Synced        customresourcedefinition.apiextensions.k8s.io/dummies.argoproj.io configured\napiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-duplicated-resources-qmjhx  clusterdummies.argoproj.io  Running  Synced        customresourcedefinition.apiextensions.k8s.io/clusterdummies.argoproj.io configured\nargoproj.io           ClusterDummy              argocd-e2e--test-duplicated-resources-qmjhx  cluster-dummy-crd-instance  Running  Synced        clusterdummy.argoproj.io/cluster-dummy-crd-instance configured\nargoproj.io           Dummy                     kube-system                                  dummy-crd-instance          Synced                 dummy.argoproj.io/dummy-crd-instance configured\nargoproj.io           Dummy                     default                                      dummy-crd-instance          Synced                 dummy.argoproj.io/dummy-crd-instance created\nargoproj.io           Dummy                     argocd-e2e--test-duplicated-resources-qmjhx  dummy-crd-instance          Synced                 dummy.argoproj.io/dummy-crd-instance created\napiextensions.k8s.io  CustomResourceDefinition                                               clusterdummies.argoproj.io  Synced                 \napiextensions.k8s.io  CustomResourceDefinition                                               dummies.argoproj.io         Synced                 \nargoproj.io           ClusterDummy                                                           cluster-dummy-crd-instance  Synced                 \n" duration=5.453142999s execID=7d3ec
time="2023-11-03T13:21:59Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:21:59Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:21:59Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:21:59Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:21:59Z" level=info msg="../../dist/argocd app diff test-duplicated-resources --local testdata --server-side-generate --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDExMiwibmJmIjoxNjk5MDE3NzEyLCJpYXQiOjE2OTkwMTc3MTIsImp0aSI6ImM0YjZmZTdmLTZmNzMtNDVhNS04NDQ1LTQwNGU0MTZhYmQ4YyJ9.qlAqAl6WLFIPHXZvyjUJm5Oz1D4MpQCLYm_kANUkwK4 --insecure" dir= execID=9eada
time="2023-11-03T13:21:59Z" level=debug duration=170.00427ms execID=9eada
time="2023-11-03T13:21:59Z" level=error msg="`../../dist/argocd app diff test-duplicated-resources --local testdata --server-side-generate --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDExMiwibmJmIjoxNjk5MDE3NzEyLCJpYXQiOjE2OTkwMTc3MTIsImp0aSI6ImM0YjZmZTdmLTZmNzMtNDVhNS04NDQ1LTQwNGU0MTZhYmQ4YyJ9.qlAqAl6WLFIPHXZvyjUJm5Oz1D4MpQCLYm_kANUkwK4 --insecure` failed exit status 20: time=\"2023-11-03T13:21:59Z\" level=fatal msg=\"rpc error: code = Unknown desc = error receiving manifest file stream: error receiving tgz file: file checksum validation error: calc e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855 sent 68e4058cec00ec5cdac6321c2eef2b05d8fa78b7027c89bd030d657d11aef74d\"" execID=9eada
    app_management_test.go:1002: 
        	Error Trace:	/argocd-e2e/argo-cd/test/e2e/app_management_test.go:1002
        	            				/argocd-e2e/argo-cd/test/e2e/fixture/app/consequences.go:47
        	            				/argocd-e2e/argo-cd/test/e2e/app_management_test.go:999
        	            				/argocd-e2e/argo-cd/test/e2e/app_management_test.go:978
        	Error:      	Received unexpected error:
        	            	`../../dist/argocd app diff test-duplicated-resources --local testdata --server-side-generate --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDExMiwibmJmIjoxNjk5MDE3NzEyLCJpYXQiOjE2OTkwMTc3MTIsImp0aSI6ImM0YjZmZTdmLTZmNzMtNDVhNS04NDQ1LTQwNGU0MTZhYmQ4YyJ9.qlAqAl6WLFIPHXZvyjUJm5Oz1D4MpQCLYm_kANUkwK4 --insecure` failed exit status 20: time="2023-11-03T13:21:59Z" level=fatal msg="rpc error: code = Unknown desc = error receiving manifest file stream: error receiving tgz file: file checksum validation error: calc e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855 sent 68e4058cec00ec5cdac6321c2eef2b05d8fa78b7027c89bd030d657d11aef74d"
        	Test:       	TestDuplicatedResources
--- FAIL: TestDuplicatedResources (9.53s)
=== RUN   TestConfigMap
time="2023-11-03T13:21:59Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=64e1c
time="2023-11-03T13:22:00Z" level=debug msg="namespace \"argocd-e2e--test-duplicated-resources-qmjhx\" deleted\n" duration=255.984599ms execID=64e1c
time="2023-11-03T13:22:00Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=53a8d
time="2023-11-03T13:22:00Z" level=debug msg="customresourcedefinition.apiextensions.k8s.io \"clusterdummies.argoproj.io\" deleted\ncustomresourcedefinition.apiextensions.k8s.io \"dummies.argoproj.io\" deleted\n" duration=474.918808ms execID=53a8d
time="2023-11-03T13:22:00Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=a1ff2
time="2023-11-03T13:22:00Z" level=debug msg="No resources found\n" duration=220.250518ms execID=a1ff2
time="2023-11-03T13:22:01Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:22:01Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDEyMSwibmJmIjoxNjk5MDE3NzIxLCJpYXQiOjE2OTkwMTc3MjEsImp0aSI6ImJiYzM5OTJlLTBmMzAtNGNjYy1hMWU1LWQxOTkwMGM2YWFhNiJ9.iDvmpni0T2AzVOdEXIC7rWzCYhaGdGH9uEM4t76X8tI --insecure" dir= execID=e7ca0
time="2023-11-03T13:22:01Z" level=debug duration=104.533443ms execID=e7ca0
time="2023-11-03T13:22:02Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=7efc8
time="2023-11-03T13:22:02Z" level=debug duration=2.292724ms execID=7efc8
time="2023-11-03T13:22:02Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=8a3d3
time="2023-11-03T13:22:02Z" level=debug duration=1.599491ms execID=8a3d3
time="2023-11-03T13:22:02Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=d357a
time="2023-11-03T13:22:02Z" level=debug duration=1.483677ms execID=d357a
time="2023-11-03T13:22:02Z" level=info msg="pkill -9 gpg-agent" dir= execID=8e8ce
time="2023-11-03T13:22:02Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=db112
time="2023-11-03T13:22:02Z" level=debug duration=10.169779ms execID=db112
time="2023-11-03T13:22:02Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=62e3a
time="2023-11-03T13:22:02Z" level=debug duration=35.091964ms execID=62e3a
time="2023-11-03T13:22:02Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=87643
time="2023-11-03T13:22:02Z" level=debug duration=1.829702ms execID=87643
time="2023-11-03T13:22:02Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=a4a74
time="2023-11-03T13:22:02Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.722157ms execID=a4a74
time="2023-11-03T13:22:02Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=8143c
time="2023-11-03T13:22:02Z" level=debug duration=28.082749ms execID=8143c
time="2023-11-03T13:22:02Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=08902
time="2023-11-03T13:22:02Z" level=debug duration=22.298484ms execID=08902
time="2023-11-03T13:22:02Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=13733
time="2023-11-03T13:22:02Z" level=debug duration=2.698031ms execID=13733
time="2023-11-03T13:22:02Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=7df2d
Handling connection for 9081
time="2023-11-03T13:22:02Z" level=debug duration=64.801599ms execID=7df2d
time="2023-11-03T13:22:02Z" level=info msg="kubectl create ns argocd-e2e--test-config-map-qlvhn" dir= execID=d3d1d
time="2023-11-03T13:22:02Z" level=debug msg="namespace/argocd-e2e--test-config-map-qlvhn created\n" duration=150.34723ms execID=d3d1d
time="2023-11-03T13:22:02Z" level=info msg="kubectl label ns argocd-e2e--test-config-map-qlvhn e2e.argoproj.io=true" dir= execID=b78bc
time="2023-11-03T13:22:02Z" level=debug msg="namespace/argocd-e2e--test-config-map-qlvhn labeled\n" duration=276.989686ms execID=b78bc
time="2023-11-03T13:22:02Z" level=info msg="clean state" duration=2.70349908s id=TestConfigMap-qlvhn name=TestConfigMap password=password username=admin
time="2023-11-03T13:22:03Z" level=info msg="../../dist/argocd app create test-config-map --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path config-map --project default --dest-namespace argocd-e2e--test-config-map-qlvhn --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDEyMSwibmJmIjoxNjk5MDE3NzIxLCJpYXQiOjE2OTkwMTc3MjEsImp0aSI6ImJiYzM5OTJlLTBmMzAtNGNjYy1hMWU1LWQxOTkwMGM2YWFhNiJ9.iDvmpni0T2AzVOdEXIC7rWzCYhaGdGH9uEM4t76X8tI --insecure" dir= execID=5018d
time="2023-11-03T13:22:03Z" level=debug msg="application 'test-config-map' created\n" duration=249.942842ms execID=5018d
time="2023-11-03T13:22:03Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:22:03Z" level=info msg="../../dist/argocd app sync test-config-map --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDEyMSwibmJmIjoxNjk5MDE3NzIxLCJpYXQiOjE2OTkwMTc3MjEsImp0aSI6ImJiYzM5OTJlLTBmMzAtNGNjYy1hMWU1LWQxOTkwMGM2YWFhNiJ9.iDvmpni0T2AzVOdEXIC7rWzCYhaGdGH9uEM4t76X8tI --insecure" dir= execID=2ce03
time="2023-11-03T13:22:08Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:22:05+00:00          ConfigMap  argocd-e2e--test-config-map-qlvhn                my-map  OutOfSync  Missing              \n2023-11-03T13:22:08+00:00          ConfigMap  argocd-e2e--test-config-map-qlvhn                my-map  OutOfSync  Missing              configmap/my-map created\n2023-11-03T13:22:08+00:00          ConfigMap  argocd-e2e--test-config-map-qlvhn                my-map    Synced  Missing              configmap/my-map created\n\nName:               argocd-e2e/test-config-map\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-config-map-qlvhn\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-config-map\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               config-map\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (b18357b)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      b18357be5da1f9f55e821d56d2b3d02aceb89a9f\nPhase:              Succeeded\nStart:              2023-11-03 13:22:03 +0000 UTC\nFinished:           2023-11-03 13:22:08 +0000 UTC\nDuration:           5s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                          NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-config-map-qlvhn  my-map  Synced                configmap/my-map created\n" duration=4.65166186s execID=2ce03
time="2023-11-03T13:22:08Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:22:08Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:22:08Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:22:08Z" level=info msg="expectation succeeded: no error and output contained 'my-map  Synced                configmap/my-map created'"
time="2023-11-03T13:22:08Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:22:08Z" level=info msg="../../dist/argocd app diff test-config-map --local testdata --server-side-generate --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDEyMSwibmJmIjoxNjk5MDE3NzIxLCJpYXQiOjE2OTkwMTc3MjEsImp0aSI6ImJiYzM5OTJlLTBmMzAtNGNjYy1hMWU1LWQxOTkwMGM2YWFhNiJ9.iDvmpni0T2AzVOdEXIC7rWzCYhaGdGH9uEM4t76X8tI --insecure" dir= execID=c89cb
time="2023-11-03T13:22:08Z" level=debug duration=186.658416ms execID=c89cb
time="2023-11-03T13:22:08Z" level=error msg="`../../dist/argocd app diff test-config-map --local testdata --server-side-generate --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDEyMSwibmJmIjoxNjk5MDE3NzIxLCJpYXQiOjE2OTkwMTc3MjEsImp0aSI6ImJiYzM5OTJlLTBmMzAtNGNjYy1hMWU1LWQxOTkwMGM2YWFhNiJ9.iDvmpni0T2AzVOdEXIC7rWzCYhaGdGH9uEM4t76X8tI --insecure` failed exit status 20: time=\"2023-11-03T13:22:08Z\" level=fatal msg=\"rpc error: code = Unknown desc = error receiving manifest file stream: error receiving tgz file: file checksum validation error: calc e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855 sent 68e4058cec00ec5cdac6321c2eef2b05d8fa78b7027c89bd030d657d11aef74d\"" execID=c89cb
    app_management_test.go:1002: 
        	Error Trace:	/argocd-e2e/argo-cd/test/e2e/app_management_test.go:1002
        	            				/argocd-e2e/argo-cd/test/e2e/fixture/app/consequences.go:47
        	            				/argocd-e2e/argo-cd/test/e2e/app_management_test.go:999
        	            				/argocd-e2e/argo-cd/test/e2e/app_management_test.go:982
        	Error:      	Received unexpected error:
        	            	`../../dist/argocd app diff test-config-map --local testdata --server-side-generate --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDEyMSwibmJmIjoxNjk5MDE3NzIxLCJpYXQiOjE2OTkwMTc3MjEsImp0aSI6ImJiYzM5OTJlLTBmMzAtNGNjYy1hMWU1LWQxOTkwMGM2YWFhNiJ9.iDvmpni0T2AzVOdEXIC7rWzCYhaGdGH9uEM4t76X8tI --insecure` failed exit status 20: time="2023-11-03T13:22:08Z" level=fatal msg="rpc error: code = Unknown desc = error receiving manifest file stream: error receiving tgz file: file checksum validation error: calc e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855 sent 68e4058cec00ec5cdac6321c2eef2b05d8fa78b7027c89bd030d657d11aef74d"
        	Test:       	TestConfigMap
--- FAIL: TestConfigMap (8.81s)
=== RUN   TestResourceAction
time="2023-11-03T13:22:08Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=07bce
time="2023-11-03T13:22:08Z" level=debug msg="namespace \"argocd-e2e--test-config-map-qlvhn\" deleted\n" duration=164.470111ms execID=07bce
time="2023-11-03T13:22:08Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=cb4c4
time="2023-11-03T13:22:09Z" level=debug msg="No resources found\n" duration=351.962234ms execID=cb4c4
time="2023-11-03T13:22:09Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=cca6a
time="2023-11-03T13:22:09Z" level=debug msg="No resources found\n" duration=148.582818ms execID=cca6a
time="2023-11-03T13:22:10Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:22:10Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDEzMCwibmJmIjoxNjk5MDE3NzMwLCJpYXQiOjE2OTkwMTc3MzAsImp0aSI6Ijg2NTIyODJiLWE3YjAtNGNkNi05OGQzLTlmMmFmYzZjNWNkYSJ9.VkdILZHGPyeYCHKYIs4GcbZiwvq-2tlQ4dhKA7R2aSU --insecure" dir= execID=23e90
time="2023-11-03T13:22:10Z" level=debug duration=73.963364ms execID=23e90
time="2023-11-03T13:22:10Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=cd8d6
time="2023-11-03T13:22:10Z" level=debug duration=2.063111ms execID=cd8d6
time="2023-11-03T13:22:10Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=d0795
time="2023-11-03T13:22:10Z" level=debug duration=1.620463ms execID=d0795
time="2023-11-03T13:22:10Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=622ff
time="2023-11-03T13:22:10Z" level=debug duration=1.495827ms execID=622ff
time="2023-11-03T13:22:10Z" level=info msg="pkill -9 gpg-agent" dir= execID=68e9a
time="2023-11-03T13:22:10Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=c4e63
time="2023-11-03T13:22:10Z" level=debug duration=9.870394ms execID=c4e63
time="2023-11-03T13:22:10Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=1b219
time="2023-11-03T13:22:10Z" level=debug duration=93.123086ms execID=1b219
time="2023-11-03T13:22:10Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=4735d
time="2023-11-03T13:22:10Z" level=debug duration=1.873128ms execID=4735d
time="2023-11-03T13:22:10Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=2a609
time="2023-11-03T13:22:10Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.821633ms execID=2a609
time="2023-11-03T13:22:10Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=a8131
time="2023-11-03T13:22:10Z" level=debug duration=23.852262ms execID=a8131
time="2023-11-03T13:22:10Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=cc1ca
time="2023-11-03T13:22:10Z" level=debug duration=18.292317ms execID=cc1ca
time="2023-11-03T13:22:10Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=3d3a6
time="2023-11-03T13:22:10Z" level=debug duration=2.074075ms execID=3d3a6
time="2023-11-03T13:22:10Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=70339
Handling connection for 9081
time="2023-11-03T13:22:10Z" level=debug duration=67.998171ms execID=70339
time="2023-11-03T13:22:10Z" level=info msg="kubectl create ns argocd-e2e--test-resource-action-ctvtq" dir= execID=a62be
time="2023-11-03T13:22:10Z" level=debug msg="namespace/argocd-e2e--test-resource-action-ctvtq created\n" duration=151.583299ms execID=a62be
time="2023-11-03T13:22:10Z" level=info msg="kubectl label ns argocd-e2e--test-resource-action-ctvtq e2e.argoproj.io=true" dir= execID=2d9b9
time="2023-11-03T13:22:10Z" level=debug msg="namespace/argocd-e2e--test-resource-action-ctvtq labeled\n" duration=229.918269ms execID=2d9b9
time="2023-11-03T13:22:10Z" level=info msg="clean state" duration=2.11703304s id=TestResourceAction-ctvtq name=TestResourceAction password=password username=admin
time="2023-11-03T13:22:11Z" level=info msg="../../dist/argocd app create test-resource-action --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-resource-action-ctvtq --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDEzMCwibmJmIjoxNjk5MDE3NzMwLCJpYXQiOjE2OTkwMTc3MzAsImp0aSI6Ijg2NTIyODJiLWE3YjAtNGNkNi05OGQzLTlmMmFmYzZjNWNkYSJ9.VkdILZHGPyeYCHKYIs4GcbZiwvq-2tlQ4dhKA7R2aSU --insecure" dir= execID=f92d4
time="2023-11-03T13:22:12Z" level=debug msg="application 'test-resource-action' created\n" duration=233.24061ms execID=f92d4
time="2023-11-03T13:22:12Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:22:12Z" level=info msg="../../dist/argocd app sync test-resource-action --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDEzMCwibmJmIjoxNjk5MDE3NzMwLCJpYXQiOjE2OTkwMTc3MzAsImp0aSI6Ijg2NTIyODJiLWE3YjAtNGNkNi05OGQzLTlmMmFmYzZjNWNkYSJ9.VkdILZHGPyeYCHKYIs4GcbZiwvq-2tlQ4dhKA7R2aSU --insecure" dir= execID=29bf8
time="2023-11-03T13:22:16Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:22:16+00:00            Service  argocd-e2e--test-resource-action-ctvtq          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:22:16+00:00   apps  Deployment  argocd-e2e--test-resource-action-ctvtq          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:22:16+00:00            Service  argocd-e2e--test-resource-action-ctvtq          guestbook-ui  OutOfSync  Missing              service/guestbook-ui created\n2023-11-03T13:22:16+00:00   apps  Deployment  argocd-e2e--test-resource-action-ctvtq          guestbook-ui  OutOfSync  Missing              deployment.apps/guestbook-ui created\n2023-11-03T13:22:16+00:00            Service  argocd-e2e--test-resource-action-ctvtq          guestbook-ui    Synced  Healthy                  service/guestbook-ui created\n2023-11-03T13:22:16+00:00   apps  Deployment  argocd-e2e--test-resource-action-ctvtq          guestbook-ui    Synced  Progressing              deployment.apps/guestbook-ui created\n\nName:               argocd-e2e/test-resource-action\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-resource-action-ctvtq\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-resource-action\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (9b7972d)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      9b7972db0194b2598e62c144fa59f0f890e7caa7\nPhase:              Succeeded\nStart:              2023-11-03 13:22:12 +0000 UTC\nFinished:           2023-11-03 13:22:16 +0000 UTC\nDuration:           4s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                               NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-resource-action-ctvtq  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-resource-action-ctvtq  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=4.659514156s execID=29bf8
time="2023-11-03T13:22:16Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:22:16Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestResourceAction (8.13s)
=== RUN   TestSyncResourceByLabel
time="2023-11-03T13:22:16Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=41318
time="2023-11-03T13:22:17Z" level=debug msg="namespace \"argocd-e2e--test-resource-action-ctvtq\" deleted\n" duration=245.133625ms execID=41318
time="2023-11-03T13:22:17Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=f3c21
time="2023-11-03T13:22:17Z" level=debug msg="No resources found\n" duration=480.196655ms execID=f3c21
time="2023-11-03T13:22:17Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=497af
time="2023-11-03T13:22:17Z" level=debug msg="No resources found\n" duration=286.927008ms execID=497af
time="2023-11-03T13:22:18Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:22:18Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDEzOCwibmJmIjoxNjk5MDE3NzM4LCJpYXQiOjE2OTkwMTc3MzgsImp0aSI6IjFiNGViOTMyLWZmMTQtNDVlMS05ZDQ0LWUzN2ViNTQ4ZGQzZCJ9.citUQc_2Vivd09MMB-Uv7nH46gNxyurwUyKpDuS8do8 --insecure" dir= execID=30bf2
time="2023-11-03T13:22:18Z" level=debug duration=69.481844ms execID=30bf2
time="2023-11-03T13:22:18Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=08ded
time="2023-11-03T13:22:18Z" level=debug duration=2.01724ms execID=08ded
time="2023-11-03T13:22:18Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=39d77
time="2023-11-03T13:22:18Z" level=debug duration=1.636525ms execID=39d77
time="2023-11-03T13:22:18Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=4e36c
time="2023-11-03T13:22:18Z" level=debug duration=1.440748ms execID=4e36c
time="2023-11-03T13:22:18Z" level=info msg="pkill -9 gpg-agent" dir= execID=f162b
time="2023-11-03T13:22:18Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=34abc
time="2023-11-03T13:22:18Z" level=debug duration=9.383487ms execID=34abc
time="2023-11-03T13:22:18Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=3b13c
time="2023-11-03T13:22:18Z" level=debug duration=34.070895ms execID=3b13c
time="2023-11-03T13:22:18Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=ee36c
time="2023-11-03T13:22:18Z" level=debug duration=1.78745ms execID=ee36c
time="2023-11-03T13:22:18Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=5a54a
time="2023-11-03T13:22:18Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.871183ms execID=5a54a
time="2023-11-03T13:22:18Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=37c90
time="2023-11-03T13:22:18Z" level=debug duration=30.771359ms execID=37c90
time="2023-11-03T13:22:18Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=06d1d
time="2023-11-03T13:22:18Z" level=debug duration=22.826076ms execID=06d1d
time="2023-11-03T13:22:18Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=dec50
time="2023-11-03T13:22:18Z" level=debug duration=2.695327ms execID=dec50
time="2023-11-03T13:22:18Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=14652
Handling connection for 9081
time="2023-11-03T13:22:19Z" level=debug duration=84.68115ms execID=14652
time="2023-11-03T13:22:19Z" level=info msg="kubectl create ns argocd-e2e--test-sync-resource-by-label-tdsib" dir= execID=03f02
time="2023-11-03T13:22:19Z" level=debug msg="namespace/argocd-e2e--test-sync-resource-by-label-tdsib created\n" duration=114.405263ms execID=03f02
time="2023-11-03T13:22:19Z" level=info msg="kubectl label ns argocd-e2e--test-sync-resource-by-label-tdsib e2e.argoproj.io=true" dir= execID=98b74
time="2023-11-03T13:22:19Z" level=debug msg="namespace/argocd-e2e--test-sync-resource-by-label-tdsib labeled\n" duration=278.194399ms execID=98b74
time="2023-11-03T13:22:19Z" level=info msg="clean state" duration=2.589754823s id=TestSyncResourceByLabel-tdsib name=TestSyncResourceByLabel password=password username=admin
time="2023-11-03T13:22:20Z" level=info msg="../../dist/argocd app create test-sync-resource-by-label --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-sync-resource-by-label-tdsib --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDEzOCwibmJmIjoxNjk5MDE3NzM4LCJpYXQiOjE2OTkwMTc3MzgsImp0aSI6IjFiNGViOTMyLWZmMTQtNDVlMS05ZDQ0LWUzN2ViNTQ4ZGQzZCJ9.citUQc_2Vivd09MMB-Uv7nH46gNxyurwUyKpDuS8do8 --insecure" dir= execID=623a4
time="2023-11-03T13:22:20Z" level=debug msg="application 'test-sync-resource-by-label' created\n" duration=247.810852ms execID=623a4
time="2023-11-03T13:22:20Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:22:20Z" level=info msg="../../dist/argocd app sync test-sync-resource-by-label --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDEzOCwibmJmIjoxNjk5MDE3NzM4LCJpYXQiOjE2OTkwMTc3MzgsImp0aSI6IjFiNGViOTMyLWZmMTQtNDVlMS05ZDQ0LWUzN2ViNTQ4ZGQzZCJ9.citUQc_2Vivd09MMB-Uv7nH46gNxyurwUyKpDuS8do8 --insecure" dir= execID=15428
time="2023-11-03T13:22:25Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:22:25+00:00            Service  argocd-e2e--test-sync-resource-by-label-tdsib          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:22:25+00:00   apps  Deployment  argocd-e2e--test-sync-resource-by-label-tdsib          guestbook-ui  OutOfSync  Missing              \n\nName:               argocd-e2e/test-sync-resource-by-label\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-sync-resource-by-label-tdsib\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-sync-resource-by-label\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (4e3f1b9)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      4e3f1b91e2fd1dc585d42b6543ddabee1a4222e4\nPhase:              Succeeded\nStart:              2023-11-03 13:22:20 +0000 UTC\nFinished:           2023-11-03 13:22:25 +0000 UTC\nDuration:           5s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                      NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-sync-resource-by-label-tdsib  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-sync-resource-by-label-tdsib  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=4.984153976s execID=15428
time="2023-11-03T13:22:25Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:22:25Z" level=info msg="../../dist/argocd app sync test-sync-resource-by-label --label app.kubernetes.io/instance=test-sync-resource-by-label --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDEzOCwibmJmIjoxNjk5MDE3NzM4LCJpYXQiOjE2OTkwMTc3MzgsImp0aSI6IjFiNGViOTMyLWZmMTQtNDVlMS05ZDQ0LWUzN2ViNTQ4ZGQzZCJ9.citUQc_2Vivd09MMB-Uv7nH46gNxyurwUyKpDuS8do8 --insecure" dir= execID=9abaa
time="2023-11-03T13:22:26Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                     NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:22:25+00:00            Service  argocd-e2e--test-sync-resource-by-label-tdsib          guestbook-ui    Synced  Healthy              \n2023-11-03T13:22:25+00:00   apps  Deployment  argocd-e2e--test-sync-resource-by-label-tdsib          guestbook-ui    Synced  Healthy              \n2023-11-03T13:22:26+00:00            Service  argocd-e2e--test-sync-resource-by-label-tdsib          guestbook-ui    Synced  Healthy              service/guestbook-ui unchanged\n2023-11-03T13:22:26+00:00   apps  Deployment  argocd-e2e--test-sync-resource-by-label-tdsib          guestbook-ui    Synced  Healthy              deployment.apps/guestbook-ui unchanged\n\nName:               argocd-e2e/test-sync-resource-by-label\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-sync-resource-by-label-tdsib\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-sync-resource-by-label\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (4e3f1b9)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      4e3f1b91e2fd1dc585d42b6543ddabee1a4222e4\nPhase:              Succeeded\nStart:              2023-11-03 13:22:25 +0000 UTC\nFinished:           2023-11-03 13:22:26 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                      NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-sync-resource-by-label-tdsib  guestbook-ui  Synced  Healthy        service/guestbook-ui unchanged\napps   Deployment  argocd-e2e--test-sync-resource-by-label-tdsib  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui unchanged\n" duration=715.501369ms execID=9abaa
time="2023-11-03T13:22:26Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:22:26Z" level=info msg="../../dist/argocd app sync test-sync-resource-by-label --label this-label=does-not-exist --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDEzOCwibmJmIjoxNjk5MDE3NzM4LCJpYXQiOjE2OTkwMTc3MzgsImp0aSI6IjFiNGViOTMyLWZmMTQtNDVlMS05ZDQ0LWUzN2ViNTQ4ZGQzZCJ9.citUQc_2Vivd09MMB-Uv7nH46gNxyurwUyKpDuS8do8 --insecure" dir= execID=66c64
time="2023-11-03T13:22:26Z" level=debug duration=106.256205ms execID=66c64
time="2023-11-03T13:22:26Z" level=error msg="`../../dist/argocd app sync test-sync-resource-by-label --label this-label=does-not-exist --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDEzOCwibmJmIjoxNjk5MDE3NzM4LCJpYXQiOjE2OTkwMTc3MzgsImp0aSI6IjFiNGViOTMyLWZmMTQtNDVlMS05ZDQ0LWUzN2ViNTQ4ZGQzZCJ9.citUQc_2Vivd09MMB-Uv7nH46gNxyurwUyKpDuS8do8 --insecure` failed exit status 1: time=\"2023-11-03T13:22:26Z\" level=fatal msg=\"No matching resources found for labels: [this-label=does-not-exist]\"" execID=66c64
time="2023-11-03T13:22:26Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestSyncResourceByLabel (9.66s)
=== RUN   TestSyncResourceByProject
time="2023-11-03T13:22:26Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=88262
time="2023-11-03T13:22:26Z" level=debug msg="namespace \"argocd-e2e--test-sync-resource-by-label-tdsib\" deleted\n" duration=257.65365ms execID=88262
time="2023-11-03T13:22:26Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=9f028
time="2023-11-03T13:22:27Z" level=debug msg="No resources found\n" duration=476.379262ms execID=9f028
time="2023-11-03T13:22:27Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=db10b
time="2023-11-03T13:22:27Z" level=debug msg="No resources found\n" duration=248.870564ms execID=db10b
time="2023-11-03T13:22:28Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:22:28Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE0OCwibmJmIjoxNjk5MDE3NzQ4LCJpYXQiOjE2OTkwMTc3NDgsImp0aSI6IjRiMWJhMDg3LTZiYmUtNGRmMy1iYjliLTY2ZGY4NGIwMDQxMSJ9.yZpVxbZWPoOGPhs3SNZDXz17dNdxDmnGW35em5i-c98 --insecure" dir= execID=bfe70
time="2023-11-03T13:22:28Z" level=debug duration=125.305985ms execID=bfe70
time="2023-11-03T13:22:28Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=08dd1
time="2023-11-03T13:22:28Z" level=debug duration=2.121804ms execID=08dd1
time="2023-11-03T13:22:28Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=c86cd
time="2023-11-03T13:22:28Z" level=debug duration=1.683267ms execID=c86cd
time="2023-11-03T13:22:28Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=342ac
time="2023-11-03T13:22:28Z" level=debug duration=1.485895ms execID=342ac
time="2023-11-03T13:22:28Z" level=info msg="pkill -9 gpg-agent" dir= execID=49f58
time="2023-11-03T13:22:28Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=78752
time="2023-11-03T13:22:28Z" level=debug duration=9.747171ms execID=78752
time="2023-11-03T13:22:28Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=909ce
time="2023-11-03T13:22:28Z" level=debug duration=35.368069ms execID=909ce
time="2023-11-03T13:22:28Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=3597c
time="2023-11-03T13:22:28Z" level=debug duration=1.836969ms execID=3597c
time="2023-11-03T13:22:28Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=83a8d
time="2023-11-03T13:22:28Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.89282ms execID=83a8d
time="2023-11-03T13:22:28Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=fe8f6
time="2023-11-03T13:22:28Z" level=debug duration=25.7495ms execID=fe8f6
time="2023-11-03T13:22:28Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=fc2c7
time="2023-11-03T13:22:28Z" level=debug duration=30.673276ms execID=fc2c7
time="2023-11-03T13:22:28Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=bbdc7
time="2023-11-03T13:22:28Z" level=debug duration=2.468651ms execID=bbdc7
time="2023-11-03T13:22:28Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=3b174
Handling connection for 9081
time="2023-11-03T13:22:28Z" level=debug duration=67.814305ms execID=3b174
time="2023-11-03T13:22:28Z" level=info msg="kubectl create ns argocd-e2e--test-sync-resource-by-project-pxrvx" dir= execID=8e37f
time="2023-11-03T13:22:28Z" level=debug msg="namespace/argocd-e2e--test-sync-resource-by-project-pxrvx created\n" duration=142.881457ms execID=8e37f
time="2023-11-03T13:22:28Z" level=info msg="kubectl label ns argocd-e2e--test-sync-resource-by-project-pxrvx e2e.argoproj.io=true" dir= execID=7b025
time="2023-11-03T13:22:29Z" level=debug msg="namespace/argocd-e2e--test-sync-resource-by-project-pxrvx labeled\n" duration=273.824803ms execID=7b025
time="2023-11-03T13:22:29Z" level=info msg="clean state" duration=2.601421608s id=TestSyncResourceByProject-pxrvx name=TestSyncResourceByProject password=password username=admin
time="2023-11-03T13:22:30Z" level=info msg="../../dist/argocd app create test-sync-resource-by-project --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-sync-resource-by-project-pxrvx --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE0OCwibmJmIjoxNjk5MDE3NzQ4LCJpYXQiOjE2OTkwMTc3NDgsImp0aSI6IjRiMWJhMDg3LTZiYmUtNGRmMy1iYjliLTY2ZGY4NGIwMDQxMSJ9.yZpVxbZWPoOGPhs3SNZDXz17dNdxDmnGW35em5i-c98 --insecure" dir= execID=28c20
time="2023-11-03T13:22:30Z" level=debug msg="application 'test-sync-resource-by-project' created\n" duration=251.132379ms execID=28c20
time="2023-11-03T13:22:30Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:22:30Z" level=info msg="../../dist/argocd app sync test-sync-resource-by-project --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE0OCwibmJmIjoxNjk5MDE3NzQ4LCJpYXQiOjE2OTkwMTc3NDgsImp0aSI6IjRiMWJhMDg3LTZiYmUtNGRmMy1iYjliLTY2ZGY4NGIwMDQxMSJ9.yZpVxbZWPoOGPhs3SNZDXz17dNdxDmnGW35em5i-c98 --insecure" dir= execID=0cbce
time="2023-11-03T13:22:31Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:22:30+00:00            Service  argocd-e2e--test-sync-resource-by-project-pxrvx          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:22:30+00:00   apps  Deployment  argocd-e2e--test-sync-resource-by-project-pxrvx          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:22:30+00:00            Service  argocd-e2e--test-sync-resource-by-project-pxrvx          guestbook-ui    Synced  Healthy              \n\nName:               argocd-e2e/test-sync-resource-by-project\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-sync-resource-by-project-pxrvx\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-sync-resource-by-project\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (cd2d334)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      cd2d334c29ccd724d6e7404f5fb6cab41122d976\nPhase:              Succeeded\nStart:              2023-11-03 13:22:30 +0000 UTC\nFinished:           2023-11-03 13:22:30 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                        NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-sync-resource-by-project-pxrvx  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-sync-resource-by-project-pxrvx  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=640.564343ms execID=0cbce
time="2023-11-03T13:22:31Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:22:31Z" level=info msg="../../dist/argocd app sync test-sync-resource-by-project --project default --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE0OCwibmJmIjoxNjk5MDE3NzQ4LCJpYXQiOjE2OTkwMTc3NDgsImp0aSI6IjRiMWJhMDg3LTZiYmUtNGRmMy1iYjliLTY2ZGY4NGIwMDQxMSJ9.yZpVxbZWPoOGPhs3SNZDXz17dNdxDmnGW35em5i-c98 --insecure" dir= execID=a7eaf
time="2023-11-03T13:22:32Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                       NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:22:31+00:00            Service  argocd-e2e--test-sync-resource-by-project-pxrvx          guestbook-ui    Synced  Healthy              \n2023-11-03T13:22:31+00:00   apps  Deployment  argocd-e2e--test-sync-resource-by-project-pxrvx          guestbook-ui    Synced  Healthy              \n\nName:               argocd-e2e/test-sync-resource-by-project\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-sync-resource-by-project-pxrvx\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-sync-resource-by-project\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (cd2d334)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      cd2d334c29ccd724d6e7404f5fb6cab41122d976\nPhase:              Succeeded\nStart:              2023-11-03 13:22:31 +0000 UTC\nFinished:           2023-11-03 13:22:31 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                        NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-sync-resource-by-project-pxrvx  guestbook-ui  Synced  Healthy        service/guestbook-ui unchanged\napps   Deployment  argocd-e2e--test-sync-resource-by-project-pxrvx  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui unchanged\nTIMESTAMP                  GROUP        KIND   NAMESPACE                                                       NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:22:31+00:00            Service  argocd-e2e--test-sync-resource-by-project-pxrvx          guestbook-ui    Synced  Healthy              \n2023-11-03T13:22:31+00:00   apps  Deployment  argocd-e2e--test-sync-resource-by-project-pxrvx          guestbook-ui    Synced  Healthy              \n2023-11-03T13:22:32+00:00            Service  argocd-e2e--test-sync-resource-by-project-pxrvx          guestbook-ui    Synced  Healthy              service/guestbook-ui unchanged\n2023-11-03T13:22:32+00:00   apps  Deployment  argocd-e2e--test-sync-resource-by-project-pxrvx          guestbook-ui    Synced  Healthy              deployment.apps/guestbook-ui unchanged\n\nName:               argocd-e2e/test-sync-resource-by-project\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-sync-resource-by-project-pxrvx\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/argocd-e2e/test-sync-resource-by-project\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (cd2d334)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      cd2d334c29ccd724d6e7404f5fb6cab41122d976\nPhase:              Succeeded\nStart:              2023-11-03 13:22:31 +0000 UTC\nFinished:           2023-11-03 13:22:32 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                        NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-sync-resource-by-project-pxrvx  guestbook-ui  Synced  Healthy        service/guestbook-ui unchanged\napps   Deployment  argocd-e2e--test-sync-resource-by-project-pxrvx  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui unchanged\n" duration=1.266933162s execID=a7eaf
time="2023-11-03T13:22:32Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:22:32Z" level=info msg="../../dist/argocd app sync test-sync-resource-by-project --project this-project-does-not-exist --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE0OCwibmJmIjoxNjk5MDE3NzQ4LCJpYXQiOjE2OTkwMTc3NDgsImp0aSI6IjRiMWJhMDg3LTZiYmUtNGRmMy1iYjliLTY2ZGY4NGIwMDQxMSJ9.yZpVxbZWPoOGPhs3SNZDXz17dNdxDmnGW35em5i-c98 --insecure" dir= execID=467d5
time="2023-11-03T13:22:32Z" level=debug duration=60.638512ms execID=467d5
time="2023-11-03T13:22:32Z" level=error msg="`../../dist/argocd app sync test-sync-resource-by-project --project this-project-does-not-exist --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE0OCwibmJmIjoxNjk5MDE3NzQ4LCJpYXQiOjE2OTkwMTc3NDgsImp0aSI6IjRiMWJhMDg3LTZiYmUtNGRmMy1iYjliLTY2ZGY4NGIwMDQxMSJ9.yZpVxbZWPoOGPhs3SNZDXz17dNdxDmnGW35em5i-c98 --insecure` failed exit status 1: time=\"2023-11-03T13:22:32Z\" level=fatal msg=\"No matching apps found for filter: projects [this-project-does-not-exist]\"" execID=467d5
time="2023-11-03T13:22:32Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestSyncResourceByProject (5.84s)
=== RUN   TestLocalManifestSync
time="2023-11-03T13:22:32Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=ba7f3
time="2023-11-03T13:22:32Z" level=debug msg="namespace \"argocd-e2e--test-sync-resource-by-project-pxrvx\" deleted\n" duration=319.735385ms execID=ba7f3
time="2023-11-03T13:22:32Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=62a48
time="2023-11-03T13:22:33Z" level=debug msg="No resources found\n" duration=563.954521ms execID=62a48
time="2023-11-03T13:22:33Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=5d173
time="2023-11-03T13:22:33Z" level=debug msg="No resources found\n" duration=235.391372ms execID=5d173
time="2023-11-03T13:22:34Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:22:34Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE1NCwibmJmIjoxNjk5MDE3NzU0LCJpYXQiOjE2OTkwMTc3NTQsImp0aSI6IjQzZjMwMzViLTY1OTYtNGM4Yy05MmNmLTM0NjcyNjE1ZTU4MCJ9.mdxQznTfFq1bN2Fc9FgPBVUGTOkBpMZBQX80-L_4MDs --insecure" dir= execID=21f62
time="2023-11-03T13:22:34Z" level=debug duration=132.176297ms execID=21f62
time="2023-11-03T13:22:34Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=30b2d
time="2023-11-03T13:22:34Z" level=debug duration=2.008749ms execID=30b2d
time="2023-11-03T13:22:34Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=d4685
time="2023-11-03T13:22:34Z" level=debug duration=1.756826ms execID=d4685
time="2023-11-03T13:22:34Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=5e948
time="2023-11-03T13:22:34Z" level=debug duration=1.47937ms execID=5e948
time="2023-11-03T13:22:34Z" level=info msg="pkill -9 gpg-agent" dir= execID=db4fe
time="2023-11-03T13:22:34Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=b695e
time="2023-11-03T13:22:34Z" level=debug duration=10.159681ms execID=b695e
time="2023-11-03T13:22:34Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=ac25e
time="2023-11-03T13:22:34Z" level=debug duration=34.202993ms execID=ac25e
time="2023-11-03T13:22:34Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=fe8d6
time="2023-11-03T13:22:34Z" level=debug duration=1.793582ms execID=fe8d6
time="2023-11-03T13:22:34Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=cdd53
time="2023-11-03T13:22:34Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.997493ms execID=cdd53
time="2023-11-03T13:22:34Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=373af
time="2023-11-03T13:22:34Z" level=debug duration=28.933913ms execID=373af
time="2023-11-03T13:22:34Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=f352b
time="2023-11-03T13:22:34Z" level=debug duration=20.997524ms execID=f352b
time="2023-11-03T13:22:34Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=c9d9e
time="2023-11-03T13:22:34Z" level=debug duration=2.812701ms execID=c9d9e
time="2023-11-03T13:22:34Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=15d25
Handling connection for 9081
time="2023-11-03T13:22:34Z" level=debug duration=79.861103ms execID=15d25
time="2023-11-03T13:22:34Z" level=info msg="kubectl create ns argocd-e2e--test-local-manifest-sync-zpvkw" dir= execID=e9af2
time="2023-11-03T13:22:34Z" level=debug msg="namespace/argocd-e2e--test-local-manifest-sync-zpvkw created\n" duration=120.0759ms execID=e9af2
time="2023-11-03T13:22:34Z" level=info msg="kubectl label ns argocd-e2e--test-local-manifest-sync-zpvkw e2e.argoproj.io=true" dir= execID=c7c8a
time="2023-11-03T13:22:35Z" level=debug msg="namespace/argocd-e2e--test-local-manifest-sync-zpvkw labeled\n" duration=276.864238ms execID=c7c8a
time="2023-11-03T13:22:35Z" level=info msg="clean state" duration=2.781204119s id=TestLocalManifestSync-zpvkw name=TestLocalManifestSync password=password username=admin
time="2023-11-03T13:22:36Z" level=info msg="../../dist/argocd app create test-local-manifest-sync --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-local-manifest-sync-zpvkw --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE1NCwibmJmIjoxNjk5MDE3NzU0LCJpYXQiOjE2OTkwMTc3NTQsImp0aSI6IjQzZjMwMzViLTY1OTYtNGM4Yy05MmNmLTM0NjcyNjE1ZTU4MCJ9.mdxQznTfFq1bN2Fc9FgPBVUGTOkBpMZBQX80-L_4MDs --insecure" dir= execID=ed4cb
time="2023-11-03T13:22:36Z" level=debug msg="application 'test-local-manifest-sync' created\n" duration=225.048434ms execID=ed4cb
time="2023-11-03T13:22:36Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:22:36Z" level=info msg="../../dist/argocd app sync test-local-manifest-sync --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE1NCwibmJmIjoxNjk5MDE3NzU0LCJpYXQiOjE2OTkwMTc3NTQsImp0aSI6IjQzZjMwMzViLTY1OTYtNGM4Yy05MmNmLTM0NjcyNjE1ZTU4MCJ9.mdxQznTfFq1bN2Fc9FgPBVUGTOkBpMZBQX80-L_4MDs --insecure" dir= execID=ed54b
time="2023-11-03T13:22:37Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                  NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:22:36+00:00            Service  argocd-e2e--test-local-manifest-sync-zpvkw          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:22:36+00:00   apps  Deployment  argocd-e2e--test-local-manifest-sync-zpvkw          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:22:36+00:00            Service  argocd-e2e--test-local-manifest-sync-zpvkw          guestbook-ui    Synced  Healthy              \n\nName:               argocd-e2e/test-local-manifest-sync\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-local-manifest-sync-zpvkw\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-local-manifest-sync\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (0c94b2a)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      0c94b2a4f346949455ffccdf0a4f6c2aa0d95922\nPhase:              Succeeded\nStart:              2023-11-03 13:22:36 +0000 UTC\nFinished:           2023-11-03 13:22:36 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                   NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-local-manifest-sync-zpvkw  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-local-manifest-sync-zpvkw  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=718.654958ms execID=ed54b
time="2023-11-03T13:22:37Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:22:37Z" level=info msg="../../dist/argocd app manifests test-local-manifest-sync --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE1NCwibmJmIjoxNjk5MDE3NzU0LCJpYXQiOjE2OTkwMTc3NTQsImp0aSI6IjQzZjMwMzViLTY1OTYtNGM4Yy05MmNmLTM0NjcyNjE1ZTU4MCJ9.mdxQznTfFq1bN2Fc9FgPBVUGTOkBpMZBQX80-L_4MDs --insecure" dir= execID=be696
time="2023-11-03T13:22:37Z" level=debug msg="---\napiVersion: v1\nkind: Service\nmetadata:\n  labels:\n    app.kubernetes.io/instance: test-local-manifest-sync\n  name: guestbook-ui\n  namespace: argocd-e2e--test-local-manifest-sync-zpvkw\nspec:\n  ports:\n  - port: 80\n    targetPort: 80\n  selector:\n    app: guestbook-ui\n\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  labels:\n    app.kubernetes.io/instance: test-local-manifest-sync\n    test: \"true\"\n  name: guestbook-ui\n  namespace: argocd-e2e--test-local-manifest-sync-zpvkw\nspec:\n  replicas: 0\n  revisionHistoryLimit: 3\n  selector:\n    matchLabels:\n      app: guestbook-ui\n  template:\n    metadata:\n      labels:\n        app: guestbook-ui\n    spec:\n      containers:\n      - image: quay.io/argoprojlabs/argocd-e2e-container:0.2\n        imagePullPolicy: IfNotPresent\n        name: guestbook-ui\n        ports:\n        - containerPort: 80\n\n" duration=66.375532ms execID=be696
time="2023-11-03T13:22:38Z" level=info msg="../../dist/argocd app sync test-local-manifest-sync --timeout 30 --prune --local ./testdata/guestbook_local --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE1NCwibmJmIjoxNjk5MDE3NzU0LCJpYXQiOjE2OTkwMTc3NTQsImp0aSI6IjQzZjMwMzViLTY1OTYtNGM4Yy05MmNmLTM0NjcyNjE1ZTU4MCJ9.mdxQznTfFq1bN2Fc9FgPBVUGTOkBpMZBQX80-L_4MDs --insecure" dir= execID=b8c06
time="2023-11-03T13:22:38Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:22:38+00:00            Service  argocd-e2e--test-local-manifest-sync-zpvkw          guestbook-ui    Synced  Healthy              \n2023-11-03T13:22:38+00:00   apps  Deployment  argocd-e2e--test-local-manifest-sync-zpvkw          guestbook-ui    Synced  Healthy              \n2023-11-03T13:22:38+00:00            Service  argocd-e2e--test-local-manifest-sync-zpvkw          guestbook-ui    Synced  Healthy              service/guestbook-ui configured\n2023-11-03T13:22:38+00:00   apps  Deployment  argocd-e2e--test-local-manifest-sync-zpvkw          guestbook-ui    Synced  Healthy              deployment.apps/guestbook-ui configured\n2023-11-03T13:22:38+00:00   apps  Deployment  argocd-e2e--test-local-manifest-sync-zpvkw          guestbook-ui  OutOfSync  Healthy              deployment.apps/guestbook-ui configured\n\nName:               argocd-e2e/test-local-manifest-sync\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-local-manifest-sync-zpvkw\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-local-manifest-sync\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to \nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      \nPhase:              Succeeded\nStart:              2023-11-03 13:22:38 +0000 UTC\nFinished:           2023-11-03 13:22:38 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                   NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-local-manifest-sync-zpvkw  guestbook-ui  Synced  Healthy        service/guestbook-ui configured\napps   Deployment  argocd-e2e--test-local-manifest-sync-zpvkw  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui configured\n" duration=781.327387ms execID=b8c06
time="2023-11-03T13:22:38Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:22:38Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:22:38Z" level=info msg="../../dist/argocd app manifests test-local-manifest-sync --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE1NCwibmJmIjoxNjk5MDE3NzU0LCJpYXQiOjE2OTkwMTc3NTQsImp0aSI6IjQzZjMwMzViLTY1OTYtNGM4Yy05MmNmLTM0NjcyNjE1ZTU4MCJ9.mdxQznTfFq1bN2Fc9FgPBVUGTOkBpMZBQX80-L_4MDs --insecure" dir= execID=d0f73
time="2023-11-03T13:22:39Z" level=debug msg="---\napiVersion: v1\nkind: Service\nmetadata:\n  labels:\n    app.kubernetes.io/instance: test-local-manifest-sync\n  name: guestbook-ui\n  namespace: argocd-e2e--test-local-manifest-sync-zpvkw\nspec:\n  ports:\n  - port: 81\n    targetPort: 81\n  selector:\n    app: guestbook-ui\n\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  labels:\n    app.kubernetes.io/instance: test-local-manifest-sync\n  name: guestbook-ui\n  namespace: argocd-e2e--test-local-manifest-sync-zpvkw\nspec:\n  replicas: 0\n  revisionHistoryLimit: 3\n  selector:\n    matchLabels:\n      app: guestbook-ui\n  template:\n    metadata:\n      labels:\n        app: guestbook-ui\n    spec:\n      containers:\n      - image: quay.io/argoprojlabs/argocd-e2e-container:0.3\n        name: guestbook-ui\n        ports:\n        - containerPort: 81\n\n" duration=95.889972ms execID=d0f73
time="2023-11-03T13:22:40Z" level=info msg="../../dist/argocd app sync test-local-manifest-sync --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE1NCwibmJmIjoxNjk5MDE3NzU0LCJpYXQiOjE2OTkwMTc3NTQsImp0aSI6IjQzZjMwMzViLTY1OTYtNGM4Yy05MmNmLTM0NjcyNjE1ZTU4MCJ9.mdxQznTfFq1bN2Fc9FgPBVUGTOkBpMZBQX80-L_4MDs --insecure" dir= execID=cdd1f
time="2023-11-03T13:22:40Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:22:40+00:00            Service  argocd-e2e--test-local-manifest-sync-zpvkw          guestbook-ui    Synced  Healthy              \n2023-11-03T13:22:40+00:00   apps  Deployment  argocd-e2e--test-local-manifest-sync-zpvkw          guestbook-ui    Synced  Healthy              \n2023-11-03T13:22:40+00:00            Service  argocd-e2e--test-local-manifest-sync-zpvkw          guestbook-ui    Synced  Healthy              service/guestbook-ui configured\n2023-11-03T13:22:40+00:00   apps  Deployment  argocd-e2e--test-local-manifest-sync-zpvkw          guestbook-ui    Synced  Healthy              deployment.apps/guestbook-ui configured\n2023-11-03T13:22:40+00:00   apps  Deployment  argocd-e2e--test-local-manifest-sync-zpvkw          guestbook-ui    Synced  Progressing              deployment.apps/guestbook-ui configured\n\nName:               argocd-e2e/test-local-manifest-sync\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-local-manifest-sync-zpvkw\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-local-manifest-sync\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (0c94b2a)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      0c94b2a4f346949455ffccdf0a4f6c2aa0d95922\nPhase:              Succeeded\nStart:              2023-11-03 13:22:40 +0000 UTC\nFinished:           2023-11-03 13:22:40 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                   NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-local-manifest-sync-zpvkw  guestbook-ui  Synced  Healthy        service/guestbook-ui configured\napps   Deployment  argocd-e2e--test-local-manifest-sync-zpvkw  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui configured\n" duration=710.627726ms execID=cdd1f
time="2023-11-03T13:22:40Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:22:40Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:22:40Z" level=info msg="../../dist/argocd app manifests test-local-manifest-sync --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE1NCwibmJmIjoxNjk5MDE3NzU0LCJpYXQiOjE2OTkwMTc3NTQsImp0aSI6IjQzZjMwMzViLTY1OTYtNGM4Yy05MmNmLTM0NjcyNjE1ZTU4MCJ9.mdxQznTfFq1bN2Fc9FgPBVUGTOkBpMZBQX80-L_4MDs --insecure" dir= execID=4301f
time="2023-11-03T13:22:40Z" level=debug msg="---\napiVersion: v1\nkind: Service\nmetadata:\n  labels:\n    app.kubernetes.io/instance: test-local-manifest-sync\n  name: guestbook-ui\n  namespace: argocd-e2e--test-local-manifest-sync-zpvkw\nspec:\n  ports:\n  - port: 80\n    targetPort: 80\n  selector:\n    app: guestbook-ui\n\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  labels:\n    app.kubernetes.io/instance: test-local-manifest-sync\n    test: \"true\"\n  name: guestbook-ui\n  namespace: argocd-e2e--test-local-manifest-sync-zpvkw\nspec:\n  replicas: 0\n  revisionHistoryLimit: 3\n  selector:\n    matchLabels:\n      app: guestbook-ui\n  template:\n    metadata:\n      labels:\n        app: guestbook-ui\n    spec:\n      containers:\n      - image: quay.io/argoprojlabs/argocd-e2e-container:0.2\n        imagePullPolicy: IfNotPresent\n        name: guestbook-ui\n        ports:\n        - containerPort: 80\n\n" duration=78.821617ms execID=4301f
time="2023-11-03T13:22:40Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestLocalManifestSync (8.48s)
=== RUN   TestLocalSync
time="2023-11-03T13:22:40Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=4675b
time="2023-11-03T13:22:41Z" level=debug msg="namespace \"argocd-e2e--test-local-manifest-sync-zpvkw\" deleted\n" duration=235.076941ms execID=4675b
time="2023-11-03T13:22:41Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=be986
time="2023-11-03T13:22:41Z" level=debug msg="No resources found\n" duration=454.518818ms execID=be986
time="2023-11-03T13:22:41Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=aac21
time="2023-11-03T13:22:41Z" level=debug msg="No resources found\n" duration=175.712842ms execID=aac21
time="2023-11-03T13:22:42Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:22:42Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE2MiwibmJmIjoxNjk5MDE3NzYyLCJpYXQiOjE2OTkwMTc3NjIsImp0aSI6ImU0MTk1N2E4LTkxMDYtNDE1MC1hM2YzLTc0OTgwNWRlMTg2MyJ9.g1_rt54McNO7i1YlKpErQ4wm3DPNLApMaPo73lIZ6eo --insecure" dir= execID=c1915
time="2023-11-03T13:22:42Z" level=debug duration=114.856945ms execID=c1915
time="2023-11-03T13:22:42Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=1274d
time="2023-11-03T13:22:42Z" level=debug duration=1.992716ms execID=1274d
time="2023-11-03T13:22:42Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=77d8f
time="2023-11-03T13:22:42Z" level=debug duration=1.667421ms execID=77d8f
time="2023-11-03T13:22:42Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=3df2b
time="2023-11-03T13:22:42Z" level=debug duration=1.530057ms execID=3df2b
time="2023-11-03T13:22:42Z" level=info msg="pkill -9 gpg-agent" dir= execID=5b415
time="2023-11-03T13:22:42Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=e280c
time="2023-11-03T13:22:42Z" level=debug duration=9.887357ms execID=e280c
time="2023-11-03T13:22:42Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=994a8
time="2023-11-03T13:22:42Z" level=debug duration=33.056317ms execID=994a8
time="2023-11-03T13:22:42Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=e775f
time="2023-11-03T13:22:42Z" level=debug duration=1.70166ms execID=e775f
time="2023-11-03T13:22:42Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=30909
time="2023-11-03T13:22:42Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.633628ms execID=30909
time="2023-11-03T13:22:42Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=a0c38
time="2023-11-03T13:22:42Z" level=debug duration=32.382766ms execID=a0c38
time="2023-11-03T13:22:42Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=30680
time="2023-11-03T13:22:42Z" level=debug duration=21.973533ms execID=30680
time="2023-11-03T13:22:42Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=e340a
time="2023-11-03T13:22:42Z" level=debug duration=2.799942ms execID=e340a
time="2023-11-03T13:22:42Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=e41c4
Handling connection for 9081
time="2023-11-03T13:22:42Z" level=debug duration=82.288435ms execID=e41c4
time="2023-11-03T13:22:42Z" level=info msg="kubectl create ns argocd-e2e--test-local-sync-udqso" dir= execID=069f4
time="2023-11-03T13:22:42Z" level=debug msg="namespace/argocd-e2e--test-local-sync-udqso created\n" duration=120.29537ms execID=069f4
time="2023-11-03T13:22:42Z" level=info msg="kubectl label ns argocd-e2e--test-local-sync-udqso e2e.argoproj.io=true" dir= execID=4a5bc
time="2023-11-03T13:22:43Z" level=debug msg="namespace/argocd-e2e--test-local-sync-udqso labeled\n" duration=262.09027ms execID=4a5bc
time="2023-11-03T13:22:43Z" level=info msg="clean state" duration=2.280123458s id=TestLocalSync-udqso name=TestLocalSync password=password username=admin
time="2023-11-03T13:22:44Z" level=info msg="../../dist/argocd app create test-local-sync --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path helm --project default --dest-namespace argocd-e2e--test-local-sync-udqso --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE2MiwibmJmIjoxNjk5MDE3NzYyLCJpYXQiOjE2OTkwMTc3NjIsImp0aSI6ImU0MTk1N2E4LTkxMDYtNDE1MC1hM2YzLTc0OTgwNWRlMTg2MyJ9.g1_rt54McNO7i1YlKpErQ4wm3DPNLApMaPo73lIZ6eo --insecure" dir= execID=9b056
time="2023-11-03T13:22:44Z" level=debug msg="application 'test-local-sync' created\n" duration=228.133702ms execID=9b056
time="2023-11-03T13:22:44Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:22:44Z" level=info msg="../../dist/argocd app sync test-local-sync --local testdata/helm --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE2MiwibmJmIjoxNjk5MDE3NzYyLCJpYXQiOjE2OTkwMTc3NjIsImp0aSI6ImU0MTk1N2E4LTkxMDYtNDE1MC1hM2YzLTc0OTgwNWRlMTg2MyJ9.g1_rt54McNO7i1YlKpErQ4wm3DPNLApMaPo73lIZ6eo --insecure" dir= execID=0f951
time="2023-11-03T13:22:45Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                         NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:22:44+00:00          ConfigMap  argocd-e2e--test-local-sync-udqso                my-map  OutOfSync  Missing              \n2023-11-03T13:22:45+00:00          ConfigMap  argocd-e2e--test-local-sync-udqso                my-map  OutOfSync  Missing              configmap/my-map created\n2023-11-03T13:22:45+00:00          ConfigMap  argocd-e2e--test-local-sync-udqso                my-map    Synced  Missing              configmap/my-map created\n\nName:               argocd-e2e/test-local-sync\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-local-sync-udqso\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-local-sync\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               helm\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to \nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      \nPhase:              Succeeded\nStart:              2023-11-03 13:22:44 +0000 UTC\nFinished:           2023-11-03 13:22:45 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                          NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-local-sync-udqso  my-map  Synced                configmap/my-map created\n" duration=753.051174ms execID=0f951
time="2023-11-03T13:22:45Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestLocalSync (4.27s)
=== RUN   TestNoLocalSyncWithAutosyncEnabled
time="2023-11-03T13:22:45Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=dbb88
time="2023-11-03T13:22:45Z" level=debug msg="namespace \"argocd-e2e--test-local-sync-udqso\" deleted\n" duration=192.999582ms execID=dbb88
time="2023-11-03T13:22:45Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=c9a84
time="2023-11-03T13:22:45Z" level=debug msg="No resources found\n" duration=430.699853ms execID=c9a84
time="2023-11-03T13:22:45Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=9793d
time="2023-11-03T13:22:45Z" level=debug msg="No resources found\n" duration=157.30192ms execID=9793d
time="2023-11-03T13:22:46Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:22:46Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE2NiwibmJmIjoxNjk5MDE3NzY2LCJpYXQiOjE2OTkwMTc3NjYsImp0aSI6IjY5MDc2MzdlLWJlNGQtNGZiNi1hNWEwLWYyYWNiMDAwMTY0YSJ9.YoC6paLjNkn9SIuiq6J78iwSPQKI0EcUvsNo27d8a_I --insecure" dir= execID=35a59
time="2023-11-03T13:22:46Z" level=debug duration=102.516452ms execID=35a59
time="2023-11-03T13:22:46Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=88855
time="2023-11-03T13:22:46Z" level=debug duration=2.191323ms execID=88855
time="2023-11-03T13:22:46Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=5b549
time="2023-11-03T13:22:46Z" level=debug duration=1.643914ms execID=5b549
time="2023-11-03T13:22:46Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=61340
time="2023-11-03T13:22:46Z" level=debug duration=1.467181ms execID=61340
time="2023-11-03T13:22:46Z" level=info msg="pkill -9 gpg-agent" dir= execID=d2bd3
time="2023-11-03T13:22:46Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=fff6b
time="2023-11-03T13:22:46Z" level=debug duration=9.686712ms execID=fff6b
time="2023-11-03T13:22:46Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=e758d
time="2023-11-03T13:22:46Z" level=debug duration=35.074381ms execID=e758d
time="2023-11-03T13:22:46Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=ae641
time="2023-11-03T13:22:46Z" level=debug duration=1.713597ms execID=ae641
time="2023-11-03T13:22:46Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=194cd
time="2023-11-03T13:22:46Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.774248ms execID=194cd
time="2023-11-03T13:22:46Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=e757f
time="2023-11-03T13:22:46Z" level=debug duration=33.939915ms execID=e757f
time="2023-11-03T13:22:46Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=d827f
time="2023-11-03T13:22:46Z" level=debug duration=20.777799ms execID=d827f
time="2023-11-03T13:22:46Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=61358
time="2023-11-03T13:22:46Z" level=debug duration=2.255788ms execID=61358
time="2023-11-03T13:22:46Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=10ebb
Handling connection for 9081
time="2023-11-03T13:22:46Z" level=debug duration=80.534237ms execID=10ebb
time="2023-11-03T13:22:46Z" level=info msg="kubectl create ns argocd-e2e--test-no-local-sync-with-autosync-enabled-ewamj" dir= execID=c37c3
time="2023-11-03T13:22:47Z" level=debug msg="namespace/argocd-e2e--test-no-local-sync-with-autosync-enabled-ewamj created\n" duration=178.437494ms execID=c37c3
time="2023-11-03T13:22:47Z" level=info msg="kubectl label ns argocd-e2e--test-no-local-sync-with-autosync-enabled-ewamj e2e.argoproj.io=true" dir= execID=e5576
time="2023-11-03T13:22:47Z" level=debug msg="namespace/argocd-e2e--test-no-local-sync-with-autosync-enabled-ewamj labeled\n" duration=296.061788ms execID=e5576
time="2023-11-03T13:22:47Z" level=info msg="clean state" duration=2.309962792s id=TestNoLocalSyncWithAutosyncEnabled-ewamj name=TestNoLocalSyncWithAutosyncEnabled password=password username=admin
time="2023-11-03T13:22:48Z" level=info msg="../../dist/argocd app create test-no-local-sync-with-autosync-enabled --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-no-local-sync-with-autosync-enabled-ewamj --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE2NiwibmJmIjoxNjk5MDE3NzY2LCJpYXQiOjE2OTkwMTc3NjYsImp0aSI6IjY5MDc2MzdlLWJlNGQtNGZiNi1hNWEwLWYyYWNiMDAwMTY0YSJ9.YoC6paLjNkn9SIuiq6J78iwSPQKI0EcUvsNo27d8a_I --insecure" dir= execID=8cc8f
time="2023-11-03T13:22:48Z" level=debug msg="application 'test-no-local-sync-with-autosync-enabled' created\n" duration=277.057378ms execID=8cc8f
time="2023-11-03T13:22:48Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:22:48Z" level=info msg="../../dist/argocd app sync test-no-local-sync-with-autosync-enabled --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE2NiwibmJmIjoxNjk5MDE3NzY2LCJpYXQiOjE2OTkwMTc3NjYsImp0aSI6IjY5MDc2MzdlLWJlNGQtNGZiNi1hNWEwLWYyYWNiMDAwMTY0YSJ9.YoC6paLjNkn9SIuiq6J78iwSPQKI0EcUvsNo27d8a_I --insecure" dir= execID=77b4e
time="2023-11-03T13:22:49Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:22:48+00:00            Service  argocd-e2e--test-no-local-sync-with-autosync-enabled-ewamj          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:22:48+00:00   apps  Deployment  argocd-e2e--test-no-local-sync-with-autosync-enabled-ewamj          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:22:49+00:00            Service  argocd-e2e--test-no-local-sync-with-autosync-enabled-ewamj          guestbook-ui    Synced  Healthy              \n2023-11-03T13:22:49+00:00            Service  argocd-e2e--test-no-local-sync-with-autosync-enabled-ewamj          guestbook-ui    Synced   Healthy              service/guestbook-ui created\n2023-11-03T13:22:49+00:00   apps  Deployment  argocd-e2e--test-no-local-sync-with-autosync-enabled-ewamj          guestbook-ui  OutOfSync  Missing              deployment.apps/guestbook-ui created\n2023-11-03T13:22:49+00:00   apps  Deployment  argocd-e2e--test-no-local-sync-with-autosync-enabled-ewamj          guestbook-ui    Synced  Healthy              deployment.apps/guestbook-ui created\n\nName:               argocd-e2e/test-no-local-sync-with-autosync-enabled\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-no-local-sync-with-autosync-enabled-ewamj\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-no-local-sync-with-autosync-enabled\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (8c94a2e)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      8c94a2e9d70b5b5a5035862e58d793619807e140\nPhase:              Succeeded\nStart:              2023-11-03 13:22:48 +0000 UTC\nFinished:           2023-11-03 13:22:49 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                                   NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-no-local-sync-with-autosync-enabled-ewamj  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-no-local-sync-with-autosync-enabled-ewamj  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=790.391935ms execID=77b4e
time="2023-11-03T13:22:49Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:22:49Z" level=info msg="../../dist/argocd app set test-no-local-sync-with-autosync-enabled --sync-policy automated --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE2NiwibmJmIjoxNjk5MDE3NzY2LCJpYXQiOjE2OTkwMTc3NjYsImp0aSI6IjY5MDc2MzdlLWJlNGQtNGZiNi1hNWEwLWYyYWNiMDAwMTY0YSJ9.YoC6paLjNkn9SIuiq6J78iwSPQKI0EcUvsNo27d8a_I --insecure" dir= execID=4c50c
time="2023-11-03T13:22:49Z" level=debug duration=131.449318ms execID=4c50c
time="2023-11-03T13:22:49Z" level=info msg="../../dist/argocd app sync test-no-local-sync-with-autosync-enabled --local ./testdata/guestbook_local --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE2NiwibmJmIjoxNjk5MDE3NzY2LCJpYXQiOjE2OTkwMTc3NjYsImp0aSI6IjY5MDc2MzdlLWJlNGQtNGZiNi1hNWEwLWYyYWNiMDAwMTY0YSJ9.YoC6paLjNkn9SIuiq6J78iwSPQKI0EcUvsNo27d8a_I --insecure" dir= execID=17a37
time="2023-11-03T13:22:49Z" level=debug duration=121.104606ms execID=17a37
time="2023-11-03T13:22:49Z" level=error msg="`../../dist/argocd app sync test-no-local-sync-with-autosync-enabled --local ./testdata/guestbook_local --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE2NiwibmJmIjoxNjk5MDE3NzY2LCJpYXQiOjE2OTkwMTc3NjYsImp0aSI6IjY5MDc2MzdlLWJlNGQtNGZiNi1hNWEwLWYyYWNiMDAwMTY0YSJ9.YoC6paLjNkn9SIuiq6J78iwSPQKI0EcUvsNo27d8a_I --insecure` failed exit status 1: time=\"2023-11-03T13:22:49Z\" level=fatal msg=\"Cannot use local sync when Automatic Sync Policy is enabled except with --dry-run\"" execID=17a37
time="2023-11-03T13:22:49Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNoLocalSyncWithAutosyncEnabled (4.64s)
=== RUN   TestLocalSyncDryRunWithAutosyncEnabled
time="2023-11-03T13:22:49Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=5f917
time="2023-11-03T13:22:50Z" level=debug msg="namespace \"argocd-e2e--test-no-local-sync-with-autosync-enabled-ewamj\" deleted\n" duration=227.063268ms execID=5f917
time="2023-11-03T13:22:50Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=075f8
time="2023-11-03T13:22:50Z" level=debug msg="No resources found\n" duration=498.956065ms execID=075f8
time="2023-11-03T13:22:50Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=39e7c
time="2023-11-03T13:22:50Z" level=debug msg="No resources found\n" duration=243.025724ms execID=39e7c
time="2023-11-03T13:22:51Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:22:51Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE3MSwibmJmIjoxNjk5MDE3NzcxLCJpYXQiOjE2OTkwMTc3NzEsImp0aSI6IjAzODc0ODQyLWRmYzgtNGZjMi1iZDM3LWVmNzUwNGE2NmYxOCJ9.Jhv8T8lhVz6qZP0DuobGs50iVNRUsUkAI0mJgUda8iA --insecure" dir= execID=d0659
time="2023-11-03T13:22:51Z" level=debug duration=94.19176ms execID=d0659
time="2023-11-03T13:22:51Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=386c3
time="2023-11-03T13:22:51Z" level=debug duration=2.028966ms execID=386c3
time="2023-11-03T13:22:51Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=4b839
time="2023-11-03T13:22:51Z" level=debug duration=1.485317ms execID=4b839
time="2023-11-03T13:22:51Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=4bfa3
time="2023-11-03T13:22:51Z" level=debug duration=1.547568ms execID=4bfa3
time="2023-11-03T13:22:51Z" level=info msg="pkill -9 gpg-agent" dir= execID=97fa7
time="2023-11-03T13:22:51Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=8b8d7
time="2023-11-03T13:22:51Z" level=debug duration=9.991445ms execID=8b8d7
time="2023-11-03T13:22:51Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=69b68
time="2023-11-03T13:22:51Z" level=debug duration=34.897978ms execID=69b68
time="2023-11-03T13:22:51Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=d42df
time="2023-11-03T13:22:51Z" level=debug duration=1.768781ms execID=d42df
time="2023-11-03T13:22:51Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=058ac
time="2023-11-03T13:22:51Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.939291ms execID=058ac
time="2023-11-03T13:22:51Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=36667
time="2023-11-03T13:22:51Z" level=debug duration=36.516869ms execID=36667
time="2023-11-03T13:22:51Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=c9022
time="2023-11-03T13:22:51Z" level=debug duration=20.520819ms execID=c9022
time="2023-11-03T13:22:51Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=f916e
time="2023-11-03T13:22:51Z" level=debug duration=2.174314ms execID=f916e
time="2023-11-03T13:22:51Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=72c8b
Handling connection for 9081
time="2023-11-03T13:22:51Z" level=debug duration=94.209641ms execID=72c8b
time="2023-11-03T13:22:51Z" level=info msg="kubectl create ns argocd-e2e--test-local-sync-dry-run-with-autosync-enabled-bzqdu" dir= execID=f769b
time="2023-11-03T13:22:51Z" level=debug msg="namespace/argocd-e2e--test-local-sync-dry-run-with-autosync-enabled-bzqdu created\n" duration=99.036138ms execID=f769b
time="2023-11-03T13:22:51Z" level=info msg="kubectl label ns argocd-e2e--test-local-sync-dry-run-with-autosync-enabled-bzqdu e2e.argoproj.io=true" dir= execID=1ccfc
time="2023-11-03T13:22:52Z" level=debug msg="namespace/argocd-e2e--test-local-sync-dry-run-with-autosync-enabled-bzqdu labeled\n" duration=293.930683ms execID=1ccfc
time="2023-11-03T13:22:52Z" level=info msg="clean state" duration=2.506924779s id=TestLocalSyncDryRunWithAutosyncEnabled-bzqdu name=TestLocalSyncDryRunWithAutosyncEnabled password=password username=admin
time="2023-11-03T13:22:53Z" level=info msg="../../dist/argocd app create test-local-sync-dry-run-with-autosync-enabled --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-local-sync-dry-run-with-autosync-enabled-bzqdu --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE3MSwibmJmIjoxNjk5MDE3NzcxLCJpYXQiOjE2OTkwMTc3NzEsImp0aSI6IjAzODc0ODQyLWRmYzgtNGZjMi1iZDM3LWVmNzUwNGE2NmYxOCJ9.Jhv8T8lhVz6qZP0DuobGs50iVNRUsUkAI0mJgUda8iA --insecure" dir= execID=776c4
time="2023-11-03T13:22:53Z" level=debug msg="application 'test-local-sync-dry-run-with-autosync-enabled' created\n" duration=226.79768ms execID=776c4
time="2023-11-03T13:22:53Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:22:53Z" level=info msg="../../dist/argocd app sync test-local-sync-dry-run-with-autosync-enabled --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE3MSwibmJmIjoxNjk5MDE3NzcxLCJpYXQiOjE2OTkwMTc3NzEsImp0aSI6IjAzODc0ODQyLWRmYzgtNGZjMi1iZDM3LWVmNzUwNGE2NmYxOCJ9.Jhv8T8lhVz6qZP0DuobGs50iVNRUsUkAI0mJgUda8iA --insecure" dir= execID=cfafc
time="2023-11-03T13:22:54Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:22:53+00:00            Service  argocd-e2e--test-local-sync-dry-run-with-autosync-enabled-bzqdu          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:22:53+00:00   apps  Deployment  argocd-e2e--test-local-sync-dry-run-with-autosync-enabled-bzqdu          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:22:54+00:00            Service  argocd-e2e--test-local-sync-dry-run-with-autosync-enabled-bzqdu          guestbook-ui    Synced  Healthy              \n2023-11-03T13:22:54+00:00   apps  Deployment  argocd-e2e--test-local-sync-dry-run-with-autosync-enabled-bzqdu          guestbook-ui  OutOfSync  Missing              deployment.apps/guestbook-ui created\n2023-11-03T13:22:54+00:00            Service  argocd-e2e--test-local-sync-dry-run-with-autosync-enabled-bzqdu          guestbook-ui    Synced   Healthy              service/guestbook-ui created\n2023-11-03T13:22:54+00:00   apps  Deployment  argocd-e2e--test-local-sync-dry-run-with-autosync-enabled-bzqdu          guestbook-ui    Synced  Progressing              deployment.apps/guestbook-ui created\n\nName:               argocd-e2e/test-local-sync-dry-run-with-autosync-enabled\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-local-sync-dry-run-with-autosync-enabled-bzqdu\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-local-sync-dry-run-with-autosync-enabled\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (13d8cca)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      13d8ccac1bbadbad2c8b4f6b98588f04ad833919\nPhase:              Succeeded\nStart:              2023-11-03 13:22:53 +0000 UTC\nFinished:           2023-11-03 13:22:54 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                                        NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-local-sync-dry-run-with-autosync-enabled-bzqdu  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-local-sync-dry-run-with-autosync-enabled-bzqdu  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=824.120782ms execID=cfafc
time="2023-11-03T13:22:54Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:22:54Z" level=info msg="../../dist/argocd app set test-local-sync-dry-run-with-autosync-enabled --sync-policy automated --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE3MSwibmJmIjoxNjk5MDE3NzcxLCJpYXQiOjE2OTkwMTc3NzEsImp0aSI6IjAzODc0ODQyLWRmYzgtNGZjMi1iZDM3LWVmNzUwNGE2NmYxOCJ9.Jhv8T8lhVz6qZP0DuobGs50iVNRUsUkAI0mJgUda8iA --insecure" dir= execID=18318
time="2023-11-03T13:22:54Z" level=debug duration=136.837653ms execID=18318
time="2023-11-03T13:22:54Z" level=info msg="../../dist/argocd app sync test-local-sync-dry-run-with-autosync-enabled --dry-run --local ./testdata/guestbook_local --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE3MSwibmJmIjoxNjk5MDE3NzcxLCJpYXQiOjE2OTkwMTc3NzEsImp0aSI6IjAzODc0ODQyLWRmYzgtNGZjMi1iZDM3LWVmNzUwNGE2NmYxOCJ9.Jhv8T8lhVz6qZP0DuobGs50iVNRUsUkAI0mJgUda8iA --insecure" dir= execID=aa5c8
time="2023-11-03T13:22:55Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                                       NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:22:54+00:00            Service  argocd-e2e--test-local-sync-dry-run-with-autosync-enabled-bzqdu          guestbook-ui    Synced  Healthy              \n2023-11-03T13:22:54+00:00   apps  Deployment  argocd-e2e--test-local-sync-dry-run-with-autosync-enabled-bzqdu          guestbook-ui    Synced  Healthy              \n\nName:               argocd-e2e/test-local-sync-dry-run-with-autosync-enabled\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-local-sync-dry-run-with-autosync-enabled-bzqdu\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-local-sync-dry-run-with-autosync-enabled\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        Automated\nSync Status:        Synced to  (13d8cca)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      \nPhase:              Succeeded\nStart:              2023-11-03 13:22:54 +0000 UTC\nFinished:           2023-11-03 13:22:55 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (no more tasks)\n\nGROUP  KIND        NAMESPACE                                                        NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-local-sync-dry-run-with-autosync-enabled-bzqdu  guestbook-ui  Synced  Healthy        service/guestbook-ui configured (dry run)\napps   Deployment  argocd-e2e--test-local-sync-dry-run-with-autosync-enabled-bzqdu  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui configured (dry run)\n" duration=595.423285ms execID=aa5c8
time="2023-11-03T13:22:55Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestLocalSyncDryRunWithAutosyncEnabled (5.30s)
=== RUN   TestSyncAsync
time="2023-11-03T13:22:55Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=475d0
time="2023-11-03T13:22:55Z" level=debug msg="namespace \"argocd-e2e--test-local-sync-dry-run-with-autosync-enabled-bzqdu\" deleted\n" duration=223.882231ms execID=475d0
time="2023-11-03T13:22:55Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=6c3eb
time="2023-11-03T13:22:55Z" level=debug msg="No resources found\n" duration=413.991968ms execID=6c3eb
time="2023-11-03T13:22:55Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=2b626
time="2023-11-03T13:22:55Z" level=debug msg="No resources found\n" duration=184.09085ms execID=2b626
time="2023-11-03T13:22:56Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:22:56Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE3NiwibmJmIjoxNjk5MDE3Nzc2LCJpYXQiOjE2OTkwMTc3NzYsImp0aSI6ImUwNzcxMDg2LWZiNjctNDk4OC05M2U5LWY0ODMwODU1ZGRmMCJ9.Uk__KnervGmYz2YFmFO4C4LEulujj2wn3KNH4DB0F2c --insecure" dir= execID=dd46f
time="2023-11-03T13:22:56Z" level=debug duration=79.342425ms execID=dd46f
time="2023-11-03T13:22:56Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=4594d
time="2023-11-03T13:22:56Z" level=debug duration=2.117429ms execID=4594d
time="2023-11-03T13:22:56Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=46b16
time="2023-11-03T13:22:56Z" level=debug duration=1.759569ms execID=46b16
time="2023-11-03T13:22:56Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=97ded
time="2023-11-03T13:22:56Z" level=debug duration=1.497184ms execID=97ded
time="2023-11-03T13:22:56Z" level=info msg="pkill -9 gpg-agent" dir= execID=7f7f7
time="2023-11-03T13:22:56Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=ce47e
time="2023-11-03T13:22:56Z" level=debug duration=9.962671ms execID=ce47e
time="2023-11-03T13:22:56Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=b9017
time="2023-11-03T13:22:56Z" level=debug duration=33.543136ms execID=b9017
time="2023-11-03T13:22:56Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=8cee9
time="2023-11-03T13:22:56Z" level=debug duration=1.636589ms execID=8cee9
time="2023-11-03T13:22:56Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=7e8c5
time="2023-11-03T13:22:56Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.733923ms execID=7e8c5
time="2023-11-03T13:22:56Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=66526
time="2023-11-03T13:22:56Z" level=debug duration=26.495051ms execID=66526
time="2023-11-03T13:22:56Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=71796
time="2023-11-03T13:22:56Z" level=debug duration=20.465771ms execID=71796
time="2023-11-03T13:22:56Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=31abb
time="2023-11-03T13:22:56Z" level=debug duration=2.268475ms execID=31abb
time="2023-11-03T13:22:56Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=1f3ef
Handling connection for 9081
time="2023-11-03T13:22:56Z" level=debug duration=66.906752ms execID=1f3ef
time="2023-11-03T13:22:56Z" level=info msg="kubectl create ns argocd-e2e--test-sync-async-igfsh" dir= execID=16900
time="2023-11-03T13:22:57Z" level=debug msg="namespace/argocd-e2e--test-sync-async-igfsh created\n" duration=130.185564ms execID=16900
time="2023-11-03T13:22:57Z" level=info msg="kubectl label ns argocd-e2e--test-sync-async-igfsh e2e.argoproj.io=true" dir= execID=30223
time="2023-11-03T13:22:57Z" level=debug msg="namespace/argocd-e2e--test-sync-async-igfsh labeled\n" duration=197.694019ms execID=30223
time="2023-11-03T13:22:57Z" level=info msg="clean state" duration=2.205296265s id=TestSyncAsync-igfsh name=TestSyncAsync password=password username=admin
time="2023-11-03T13:22:58Z" level=info msg="../../dist/argocd app create test-sync-async --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-sync-async-igfsh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE3NiwibmJmIjoxNjk5MDE3Nzc2LCJpYXQiOjE2OTkwMTc3NzYsImp0aSI6ImUwNzcxMDg2LWZiNjctNDk4OC05M2U5LWY0ODMwODU1ZGRmMCJ9.Uk__KnervGmYz2YFmFO4C4LEulujj2wn3KNH4DB0F2c --insecure" dir= execID=6d449
time="2023-11-03T13:22:58Z" level=debug msg="application 'test-sync-async' created\n" duration=220.217024ms execID=6d449
time="2023-11-03T13:22:58Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:22:58Z" level=info msg="../../dist/argocd app sync test-sync-async --timeout 30 --async --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE3NiwibmJmIjoxNjk5MDE3Nzc2LCJpYXQiOjE2OTkwMTc3NzYsImp0aSI6ImUwNzcxMDg2LWZiNjctNDk4OC05M2U5LWY0ODMwODU1ZGRmMCJ9.Uk__KnervGmYz2YFmFO4C4LEulujj2wn3KNH4DB0F2c --insecure" dir= execID=f02d9
time="2023-11-03T13:22:58Z" level=debug duration=106.591676ms execID=f02d9
time="2023-11-03T13:22:58Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:22:58Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:22:58Z" level=info msg="pending: operation phase should be Succeeded, is Running"
time="2023-11-03T13:23:01Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:23:01Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:23:01Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestSyncAsync (6.55s)
=== RUN   TestPermissions
time="2023-11-03T13:23:01Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=24d67
time="2023-11-03T13:23:01Z" level=debug msg="namespace \"argocd-e2e--test-sync-async-igfsh\" deleted\n" duration=211.060054ms execID=24d67
time="2023-11-03T13:23:01Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=6631c
time="2023-11-03T13:23:02Z" level=debug msg="No resources found\n" duration=455.444713ms execID=6631c
time="2023-11-03T13:23:02Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=cd4b7
time="2023-11-03T13:23:02Z" level=debug msg="No resources found\n" duration=216.148782ms execID=cd4b7
time="2023-11-03T13:23:03Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:23:03Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE4MywibmJmIjoxNjk5MDE3NzgzLCJpYXQiOjE2OTkwMTc3ODMsImp0aSI6IjZlODg0MTdkLTI4YWYtNDZhOS05NWM5LWQxMDU3YmRkYjRlMyJ9.xGy5rOI9qDucOlafP8VdHAHoqKm1hvxrZR4rFpGW7ug --insecure" dir= execID=764c2
time="2023-11-03T13:23:03Z" level=debug duration=90.111468ms execID=764c2
time="2023-11-03T13:23:03Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=d8931
time="2023-11-03T13:23:03Z" level=debug duration=2.029852ms execID=d8931
time="2023-11-03T13:23:03Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=891c8
time="2023-11-03T13:23:03Z" level=debug duration=1.534378ms execID=891c8
time="2023-11-03T13:23:03Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=b4c94
time="2023-11-03T13:23:03Z" level=debug duration=63.698391ms execID=b4c94
time="2023-11-03T13:23:03Z" level=info msg="pkill -9 gpg-agent" dir= execID=e5344
time="2023-11-03T13:23:03Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=2cec6
time="2023-11-03T13:23:03Z" level=debug duration=9.620341ms execID=2cec6
time="2023-11-03T13:23:03Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=7536c
time="2023-11-03T13:23:03Z" level=debug duration=34.547318ms execID=7536c
time="2023-11-03T13:23:03Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=f4677
time="2023-11-03T13:23:03Z" level=debug duration=1.984737ms execID=f4677
time="2023-11-03T13:23:03Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=bf9af
time="2023-11-03T13:23:03Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.078947ms execID=bf9af
time="2023-11-03T13:23:03Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=7f593
time="2023-11-03T13:23:03Z" level=debug duration=27.269044ms execID=7f593
time="2023-11-03T13:23:03Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=ea014
time="2023-11-03T13:23:03Z" level=debug duration=37.321162ms execID=ea014
time="2023-11-03T13:23:03Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=69f40
time="2023-11-03T13:23:03Z" level=debug duration=2.891186ms execID=69f40
time="2023-11-03T13:23:03Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=cf8e5
Handling connection for 9081
time="2023-11-03T13:23:03Z" level=debug duration=109.566092ms execID=cf8e5
time="2023-11-03T13:23:03Z" level=info msg="kubectl create ns argocd-e2e--test-permissions-hxgrj" dir= execID=94280
time="2023-11-03T13:23:03Z" level=debug msg="namespace/argocd-e2e--test-permissions-hxgrj created\n" duration=115.906981ms execID=94280
time="2023-11-03T13:23:03Z" level=info msg="kubectl label ns argocd-e2e--test-permissions-hxgrj e2e.argoproj.io=true" dir= execID=502eb
time="2023-11-03T13:23:04Z" level=debug msg="namespace/argocd-e2e--test-permissions-hxgrj labeled\n" duration=282.285835ms execID=502eb
time="2023-11-03T13:23:04Z" level=info msg="clean state" duration=2.451988566s id=TestPermissions-hxgrj name=TestPermissions password=password username=admin
time="2023-11-03T13:23:04Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=d6bd1
time="2023-11-03T13:23:04Z" level=debug msg="namespace \"argocd-e2e--test-permissions-hxgrj\" deleted\n" duration=264.464573ms execID=d6bd1
time="2023-11-03T13:23:04Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=66f84
time="2023-11-03T13:23:04Z" level=debug msg="No resources found\n" duration=424.483593ms execID=66f84
time="2023-11-03T13:23:04Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=64787
time="2023-11-03T13:23:05Z" level=debug msg="No resources found\n" duration=242.013117ms execID=64787
time="2023-11-03T13:23:05Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:23:05Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE4NSwibmJmIjoxNjk5MDE3Nzg1LCJpYXQiOjE2OTkwMTc3ODUsImp0aSI6ImJmNmE2YjFkLTQ3NjQtNDdkZC04Njk4LWI2ZmM0ZTRhOTMwZSJ9.W82o_to_2MdtRsK99KiN3Yi9g6k6RkfCf-9BcQjpLBs --insecure" dir= execID=00ca7
time="2023-11-03T13:23:05Z" level=debug duration=114.447794ms execID=00ca7
time="2023-11-03T13:23:05Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=57a5f
time="2023-11-03T13:23:05Z" level=debug duration=2.04765ms execID=57a5f
time="2023-11-03T13:23:05Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=d4523
time="2023-11-03T13:23:05Z" level=debug duration=1.655441ms execID=d4523
time="2023-11-03T13:23:05Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=3e4eb
time="2023-11-03T13:23:05Z" level=debug duration=1.595489ms execID=3e4eb
time="2023-11-03T13:23:05Z" level=info msg="pkill -9 gpg-agent" dir= execID=d45cc
time="2023-11-03T13:23:05Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=6a8ad
time="2023-11-03T13:23:06Z" level=debug duration=33.98069ms execID=6a8ad
time="2023-11-03T13:23:06Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=1cd99
time="2023-11-03T13:23:06Z" level=debug duration=36.709388ms execID=1cd99
time="2023-11-03T13:23:06Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=6e972
time="2023-11-03T13:23:06Z" level=debug duration=1.878115ms execID=6e972
time="2023-11-03T13:23:06Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=4adf3
time="2023-11-03T13:23:06Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.867028ms execID=4adf3
time="2023-11-03T13:23:06Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=69a60
time="2023-11-03T13:23:06Z" level=debug duration=30.727191ms execID=69a60
time="2023-11-03T13:23:06Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=76810
time="2023-11-03T13:23:06Z" level=debug duration=29.347678ms execID=76810
time="2023-11-03T13:23:06Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=5e761
time="2023-11-03T13:23:06Z" level=debug duration=2.161586ms execID=5e761
time="2023-11-03T13:23:06Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=02615
Handling connection for 9081
time="2023-11-03T13:23:06Z" level=debug duration=64.720882ms execID=02615
time="2023-11-03T13:23:06Z" level=info msg="kubectl create ns argocd-e2e--test-permissions-aihlw" dir= execID=633df
time="2023-11-03T13:23:06Z" level=debug msg="namespace/argocd-e2e--test-permissions-aihlw created\n" duration=149.809581ms execID=633df
time="2023-11-03T13:23:06Z" level=info msg="kubectl label ns argocd-e2e--test-permissions-aihlw e2e.argoproj.io=true" dir= execID=a6cc1
time="2023-11-03T13:23:06Z" level=debug msg="namespace/argocd-e2e--test-permissions-aihlw labeled\n" duration=279.829176ms execID=a6cc1
time="2023-11-03T13:23:06Z" level=info msg="clean state" duration=2.572190075s id=TestPermissions-aihlw name=TestPermissions password=password username=admin
time="2023-11-03T13:23:07Z" level=info msg="../../dist/argocd proj create argo-project --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE4NSwibmJmIjoxNjk5MDE3Nzg1LCJpYXQiOjE2OTkwMTc3ODUsImp0aSI6ImJmNmE2YjFkLTQ3NjQtNDdkZC04Njk4LWI2ZmM0ZTRhOTMwZSJ9.W82o_to_2MdtRsK99KiN3Yi9g6k6RkfCf-9BcQjpLBs --insecure" dir= execID=0dbda
time="2023-11-03T13:23:07Z" level=debug duration=106.657127ms execID=0dbda
time="2023-11-03T13:23:08Z" level=info msg="../../dist/argocd app create test-permissions --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook-logs --project argo-project --dest-namespace argocd-e2e--test-permissions-aihlw --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE4NSwibmJmIjoxNjk5MDE3Nzg1LCJpYXQiOjE2OTkwMTc3ODUsImp0aSI6ImJmNmE2YjFkLTQ3NjQtNDdkZC04Njk4LWI2ZmM0ZTRhOTMwZSJ9.W82o_to_2MdtRsK99KiN3Yi9g6k6RkfCf-9BcQjpLBs --insecure" dir= execID=753ef
time="2023-11-03T13:23:08Z" level=debug duration=222.642155ms execID=753ef
time="2023-11-03T13:23:08Z" level=error msg="`../../dist/argocd app create test-permissions --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook-logs --project argo-project --dest-namespace argocd-e2e--test-permissions-aihlw --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE4NSwibmJmIjoxNjk5MDE3Nzg1LCJpYXQiOjE2OTkwMTc3ODUsImp0aSI6ImJmNmE2YjFkLTQ3NjQtNDdkZC04Njk4LWI2ZmM0ZTRhOTMwZSJ9.W82o_to_2MdtRsK99KiN3Yi9g6k6RkfCf-9BcQjpLBs --insecure` failed exit status 20: time=\"2023-11-03T13:23:08Z\" level=fatal msg=\"rpc error: code = InvalidArgument desc = application spec for test-permissions is invalid: InvalidSpecError: application repo http://argocd-e2e-server:9081/argo-e2e/testdata.git is not permitted in project 'argo-project';InvalidSpecError: application destination {https://kubernetes.default.svc argocd-e2e--test-permissions-aihlw} is not permitted in project 'argo-project'\"" execID=753ef
time="2023-11-03T13:23:08Z" level=info msg="expectation succeeded: error ''"
time="2023-11-03T13:23:08Z" level=info msg="expectation succeeded: error ''"
time="2023-11-03T13:23:08Z" level=info msg="../../dist/argocd proj add-destination argo-project * * --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE4NSwibmJmIjoxNjk5MDE3Nzg1LCJpYXQiOjE2OTkwMTc3ODUsImp0aSI6ImJmNmE2YjFkLTQ3NjQtNDdkZC04Njk4LWI2ZmM0ZTRhOTMwZSJ9.W82o_to_2MdtRsK99KiN3Yi9g6k6RkfCf-9BcQjpLBs --insecure" dir= execID=6f34b
time="2023-11-03T13:23:09Z" level=debug duration=119.917577ms execID=6f34b
time="2023-11-03T13:23:09Z" level=info msg="../../dist/argocd proj add-source argo-project * --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE4NSwibmJmIjoxNjk5MDE3Nzg1LCJpYXQiOjE2OTkwMTc3ODUsImp0aSI6ImJmNmE2YjFkLTQ3NjQtNDdkZC04Njk4LWI2ZmM0ZTRhOTMwZSJ9.W82o_to_2MdtRsK99KiN3Yi9g6k6RkfCf-9BcQjpLBs --insecure" dir= execID=28967
time="2023-11-03T13:23:09Z" level=debug duration=109.372171ms execID=28967
time="2023-11-03T13:23:09Z" level=info msg="../../dist/argocd app create test-permissions --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook-logs --project argo-project --dest-namespace argocd-e2e--test-permissions-aihlw --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE4NSwibmJmIjoxNjk5MDE3Nzg1LCJpYXQiOjE2OTkwMTc3ODUsImp0aSI6ImJmNmE2YjFkLTQ3NjQtNDdkZC04Njk4LWI2ZmM0ZTRhOTMwZSJ9.W82o_to_2MdtRsK99KiN3Yi9g6k6RkfCf-9BcQjpLBs --insecure" dir= execID=b41ce
time="2023-11-03T13:23:09Z" level=debug msg="application 'test-permissions' created\n" duration=203.843668ms execID=b41ce
time="2023-11-03T13:23:09Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:23:09Z" level=info msg="../../dist/argocd app sync test-permissions --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE4NSwibmJmIjoxNjk5MDE3Nzg1LCJpYXQiOjE2OTkwMTc3ODUsImp0aSI6ImJmNmE2YjFkLTQ3NjQtNDdkZC04Njk4LWI2ZmM0ZTRhOTMwZSJ9.W82o_to_2MdtRsK99KiN3Yi9g6k6RkfCf-9BcQjpLBs --insecure" dir= execID=d977d
time="2023-11-03T13:23:10Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:23:09+00:00            Service  argocd-e2e--test-permissions-aihlw          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:23:09+00:00   apps  Deployment  argocd-e2e--test-permissions-aihlw          guestbook-ui  OutOfSync  Missing              \n\nName:               argocd-e2e/test-permissions\nProject:            argo-project\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-permissions-aihlw\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-permissions\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook-logs\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (6f7c7ab)\nHealth Status:      Progressing\n\nOperation:          Sync\nSync Revision:      6f7c7ab2c72e902f46dea4e781c9bd744561fd7b\nPhase:              Succeeded\nStart:              2023-11-03 13:23:09 +0000 UTC\nFinished:           2023-11-03 13:23:09 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                           NAME          STATUS  HEALTH       HOOK  MESSAGE\n       Service     argocd-e2e--test-permissions-aihlw  guestbook-ui  Synced  Healthy            service/guestbook-ui created\napps   Deployment  argocd-e2e--test-permissions-aihlw  guestbook-ui  Synced  Progressing        deployment.apps/guestbook-ui created\n" duration=742.692677ms execID=d977d
time="2023-11-03T13:23:10Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:23:10Z" level=info msg="../../dist/argocd app get test-permissions --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE4NSwibmJmIjoxNjk5MDE3Nzg1LCJpYXQiOjE2OTkwMTc3ODUsImp0aSI6ImJmNmE2YjFkLTQ3NjQtNDdkZC04Njk4LWI2ZmM0ZTRhOTMwZSJ9.W82o_to_2MdtRsK99KiN3Yi9g6k6RkfCf-9BcQjpLBs --insecure" dir= execID=79a69
time="2023-11-03T13:23:10Z" level=debug msg="Name:               argocd-e2e/test-permissions\nProject:            argo-project\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-permissions-aihlw\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-permissions\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook-logs\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Unknown (6f7c7ab)\nHealth Status:      Unknown\n\nCONDITION         MESSAGE                                                                                                                                 LAST TRANSITION\nInvalidSpecError  application destination {https://kubernetes.default.svc argocd-e2e--test-permissions-aihlw} is not permitted in project 'argo-project'  2023-11-03 13:23:10 +0000 UTC\nInvalidSpecError  application repo http://argocd-e2e-server:9081/argo-e2e/testdata.git is not permitted in project 'argo-project'                         2023-11-03 13:23:10 +0000 UTC\n\n\nGROUP  KIND        NAMESPACE                           NAME          STATUS  HEALTH       HOOK  MESSAGE\n       Service     argocd-e2e--test-permissions-aihlw  guestbook-ui  Synced  Healthy            service/guestbook-ui created\napps   Deployment  argocd-e2e--test-permissions-aihlw  guestbook-ui  Synced  Progressing        deployment.apps/guestbook-ui created\n" duration=103.791361ms execID=79a69
time="2023-11-03T13:23:10Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:23:10Z" level=info msg="expectation succeeded: condition {InvalidSpecError application destination {https://kubernetes.default.svc argocd-e2e--test-permissions-aihlw} is not permitted in project 'argo-project'} in [{InvalidSpecError application destination {https://kubernetes.default.svc argocd-e2e--test-permissions-aihlw} is not permitted in project 'argo-project' 2023-11-03 13:23:10 +0000 UTC} {InvalidSpecError application repo http://argocd-e2e-server:9081/argo-e2e/testdata.git is not permitted in project 'argo-project' 2023-11-03 13:23:10 +0000 UTC}]"
time="2023-11-03T13:23:10Z" level=info msg="expectation succeeded: condition {InvalidSpecError application repo http://argocd-e2e-server:9081/argo-e2e/testdata.git is not permitted in project 'argo-project'} in [{InvalidSpecError application destination {https://kubernetes.default.svc argocd-e2e--test-permissions-aihlw} is not permitted in project 'argo-project' 2023-11-03 13:23:10 +0000 UTC} {InvalidSpecError application repo http://argocd-e2e-server:9081/argo-e2e/testdata.git is not permitted in project 'argo-project' 2023-11-03 13:23:10 +0000 UTC}]"
APP NAME: test-permissions
time="2023-11-03T13:23:10Z" level=info msg="../../dist/argocd proj add-destination argo-project * * --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE4NSwibmJmIjoxNjk5MDE3Nzg1LCJpYXQiOjE2OTkwMTc3ODUsImp0aSI6ImJmNmE2YjFkLTQ3NjQtNDdkZC04Njk4LWI2ZmM0ZTRhOTMwZSJ9.W82o_to_2MdtRsK99KiN3Yi9g6k6RkfCf-9BcQjpLBs --insecure" dir= execID=a8450
time="2023-11-03T13:23:10Z" level=debug duration=113.162312ms execID=a8450
time="2023-11-03T13:23:10Z" level=info msg="../../dist/argocd proj add-source argo-project * --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE4NSwibmJmIjoxNjk5MDE3Nzg1LCJpYXQiOjE2OTkwMTc3ODUsImp0aSI6ImJmNmE2YjFkLTQ3NjQtNDdkZC04Njk4LWI2ZmM0ZTRhOTMwZSJ9.W82o_to_2MdtRsK99KiN3Yi9g6k6RkfCf-9BcQjpLBs --insecure" dir= execID=1a346
time="2023-11-03T13:23:10Z" level=debug duration=159.705221ms execID=1a346
time="2023-11-03T13:23:10Z" level=info msg="../../dist/argocd app get test-permissions --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE4NSwibmJmIjoxNjk5MDE3Nzg1LCJpYXQiOjE2OTkwMTc3ODUsImp0aSI6ImJmNmE2YjFkLTQ3NjQtNDdkZC04Njk4LWI2ZmM0ZTRhOTMwZSJ9.W82o_to_2MdtRsK99KiN3Yi9g6k6RkfCf-9BcQjpLBs --insecure" dir= execID=c2649
time="2023-11-03T13:23:10Z" level=debug msg="Name:               argocd-e2e/test-permissions\nProject:            argo-project\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-permissions-aihlw\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-permissions\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook-logs\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (6f7c7ab)\nHealth Status:      Missing\n\nGROUP  KIND        NAMESPACE                           NAME          STATUS   HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-permissions-aihlw  guestbook-ui  Synced   Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-permissions-aihlw  guestbook-ui  Unknown  Missing        deployment.apps/guestbook-ui created\n" duration=156.131663ms execID=c2649
time="2023-11-03T13:23:10Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:23:10Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
time="2023-11-03T13:23:10Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestPermissions (9.30s)
=== RUN   TestPermissionWithScopedRepo
time="2023-11-03T13:23:10Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=23ca1
time="2023-11-03T13:23:11Z" level=debug msg="namespace \"argocd-e2e--test-permissions-aihlw\" deleted\n" duration=274.261416ms execID=23ca1
time="2023-11-03T13:23:11Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=93ba3
time="2023-11-03T13:23:11Z" level=debug msg="No resources found\n" duration=439.961937ms execID=93ba3
time="2023-11-03T13:23:11Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=3696e
time="2023-11-03T13:23:11Z" level=debug msg="No resources found\n" duration=184.399849ms execID=3696e
time="2023-11-03T13:23:12Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:23:12Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE5MiwibmJmIjoxNjk5MDE3NzkyLCJpYXQiOjE2OTkwMTc3OTIsImp0aSI6ImE4MjIzMzljLTFjNTAtNGUwYS04YTk2LTFmYmZlNmEzMWEzZiJ9.aEEx1z2FOKI4NC6MeuQwVu-_t6jYp3EQ1G-YqxwrVkA --insecure" dir= execID=e7300
time="2023-11-03T13:23:12Z" level=debug duration=113.788031ms execID=e7300
time="2023-11-03T13:23:12Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=8f3b4
time="2023-11-03T13:23:12Z" level=debug duration=2.094616ms execID=8f3b4
time="2023-11-03T13:23:12Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=c3fe2
time="2023-11-03T13:23:12Z" level=debug duration=1.852087ms execID=c3fe2
time="2023-11-03T13:23:12Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=a8972
time="2023-11-03T13:23:13Z" level=debug duration=33.769006ms execID=a8972
time="2023-11-03T13:23:13Z" level=info msg="pkill -9 gpg-agent" dir= execID=177b0
time="2023-11-03T13:23:13Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=73f52
time="2023-11-03T13:23:13Z" level=debug duration=10.866138ms execID=73f52
time="2023-11-03T13:23:13Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=d9957
time="2023-11-03T13:23:13Z" level=debug duration=111.554961ms execID=d9957
time="2023-11-03T13:23:13Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=2ab81
time="2023-11-03T13:23:13Z" level=debug duration=1.955906ms execID=2ab81
time="2023-11-03T13:23:13Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=542dc
time="2023-11-03T13:23:13Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.178337ms execID=542dc
time="2023-11-03T13:23:13Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=c71c1
time="2023-11-03T13:23:13Z" level=debug duration=29.310697ms execID=c71c1
time="2023-11-03T13:23:13Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=94936
time="2023-11-03T13:23:13Z" level=debug duration=24.879399ms execID=94936
time="2023-11-03T13:23:13Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=74493
time="2023-11-03T13:23:13Z" level=debug duration=2.759645ms execID=74493
time="2023-11-03T13:23:13Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=682f2
Handling connection for 9081
time="2023-11-03T13:23:13Z" level=debug duration=100.902957ms execID=682f2
time="2023-11-03T13:23:13Z" level=info msg="kubectl create ns argocd-e2e--test-permission-with-scoped-repo-glycr" dir= execID=db286
time="2023-11-03T13:23:13Z" level=debug msg="namespace/argocd-e2e--test-permission-with-scoped-repo-glycr created\n" duration=211.276414ms execID=db286
time="2023-11-03T13:23:13Z" level=info msg="kubectl label ns argocd-e2e--test-permission-with-scoped-repo-glycr e2e.argoproj.io=true" dir= execID=c0cac
time="2023-11-03T13:23:13Z" level=debug msg="namespace/argocd-e2e--test-permission-with-scoped-repo-glycr labeled\n" duration=321.197974ms execID=c0cac
time="2023-11-03T13:23:13Z" level=info msg="clean state" duration=2.944819886s id=TestPermissionWithScopedRepo-glycr name=TestPermissionWithScopedRepo password=password username=admin
time="2023-11-03T13:23:13Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=99627
time="2023-11-03T13:23:14Z" level=debug msg="namespace \"argocd-e2e--test-permission-with-scoped-repo-glycr\" deleted\n" duration=266.291536ms execID=99627
time="2023-11-03T13:23:14Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=8f076
time="2023-11-03T13:23:14Z" level=debug msg="No resources found\n" duration=523.050656ms execID=8f076
time="2023-11-03T13:23:14Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=50bb1
time="2023-11-03T13:23:14Z" level=debug msg="No resources found\n" duration=274.997619ms execID=50bb1
time="2023-11-03T13:23:15Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:23:15Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE5NSwibmJmIjoxNjk5MDE3Nzk1LCJpYXQiOjE2OTkwMTc3OTUsImp0aSI6ImM4ZDk2MDdkLWJlZDYtNDY4OC04M2Y5LTRhMTZhNGQ4M2Q0YyJ9.7Y06nw1gJrCzk8DWyP_KixHeGrhJwXmIM6mPMz9vJUg --insecure" dir= execID=762a9
time="2023-11-03T13:23:16Z" level=debug duration=115.370347ms execID=762a9
time="2023-11-03T13:23:16Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=66c21
time="2023-11-03T13:23:16Z" level=debug duration=2.00293ms execID=66c21
time="2023-11-03T13:23:16Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=37db4
time="2023-11-03T13:23:16Z" level=debug duration=1.625655ms execID=37db4
time="2023-11-03T13:23:16Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=2546e
time="2023-11-03T13:23:16Z" level=debug duration=1.534247ms execID=2546e
time="2023-11-03T13:23:16Z" level=info msg="pkill -9 gpg-agent" dir= execID=ba17e
time="2023-11-03T13:23:16Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=6f725
time="2023-11-03T13:23:16Z" level=debug duration=10.202935ms execID=6f725
time="2023-11-03T13:23:16Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=45667
time="2023-11-03T13:23:16Z" level=debug duration=35.852145ms execID=45667
time="2023-11-03T13:23:16Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=cae68
time="2023-11-03T13:23:16Z" level=debug duration=1.908193ms execID=cae68
time="2023-11-03T13:23:16Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=16df0
time="2023-11-03T13:23:16Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.917867ms execID=16df0
time="2023-11-03T13:23:16Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=0274d
time="2023-11-03T13:23:16Z" level=debug duration=27.279363ms execID=0274d
time="2023-11-03T13:23:16Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=01446
time="2023-11-03T13:23:16Z" level=debug duration=22.862568ms execID=01446
time="2023-11-03T13:23:16Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=cb128
time="2023-11-03T13:23:16Z" level=debug duration=2.488512ms execID=cb128
time="2023-11-03T13:23:16Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=65982
Handling connection for 9081
time="2023-11-03T13:23:16Z" level=debug duration=76.477305ms execID=65982
time="2023-11-03T13:23:16Z" level=info msg="kubectl create ns argocd-e2e--test-permission-with-scoped-repo-sfrac" dir= execID=ebb19
time="2023-11-03T13:23:16Z" level=debug msg="namespace/argocd-e2e--test-permission-with-scoped-repo-sfrac created\n" duration=142.067763ms execID=ebb19
time="2023-11-03T13:23:16Z" level=info msg="kubectl label ns argocd-e2e--test-permission-with-scoped-repo-sfrac e2e.argoproj.io=true" dir= execID=27b17
time="2023-11-03T13:23:16Z" level=debug msg="namespace/argocd-e2e--test-permission-with-scoped-repo-sfrac labeled\n" duration=269.196173ms execID=27b17
time="2023-11-03T13:23:16Z" level=info msg="clean state" duration=2.80958324s id=TestPermissionWithScopedRepo-sfrac name=TestPermissionWithScopedRepo password=password username=admin
time="2023-11-03T13:23:17Z" level=info msg="../../dist/argocd proj create argo-project --dest *,* --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE5NSwibmJmIjoxNjk5MDE3Nzk1LCJpYXQiOjE2OTkwMTc3OTUsImp0aSI6ImM4ZDk2MDdkLWJlZDYtNDY4OC04M2Y5LTRhMTZhNGQ4M2Q0YyJ9.7Y06nw1gJrCzk8DWyP_KixHeGrhJwXmIM6mPMz9vJUg --insecure" dir= execID=b9ef0
time="2023-11-03T13:23:17Z" level=debug duration=79.059969ms execID=b9ef0
time="2023-11-03T13:23:17Z" level=info msg="../../dist/argocd proj add-source argo-project * --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE5NSwibmJmIjoxNjk5MDE3Nzk1LCJpYXQiOjE2OTkwMTc3OTUsImp0aSI6ImM4ZDk2MDdkLWJlZDYtNDY4OC04M2Y5LTRhMTZhNGQ4M2Q0YyJ9.7Y06nw1gJrCzk8DWyP_KixHeGrhJwXmIM6mPMz9vJUg --insecure" dir= execID=b835e
time="2023-11-03T13:23:17Z" level=debug duration=188.90517ms execID=b835e
time="2023-11-03T13:23:18Z" level=info msg="../../dist/argocd repo add http://argocd-e2e-server:9081/argo-e2e/testdata.git --project argo-project --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE5NSwibmJmIjoxNjk5MDE3Nzk1LCJpYXQiOjE2OTkwMTc3OTUsImp0aSI6ImM4ZDk2MDdkLWJlZDYtNDY4OC04M2Y5LTRhMTZhNGQ4M2Q0YyJ9.7Y06nw1gJrCzk8DWyP_KixHeGrhJwXmIM6mPMz9vJUg --insecure" dir= execID=8ef92
time="2023-11-03T13:23:19Z" level=debug msg="Repository 'http://argocd-e2e-server:9081/argo-e2e/testdata.git' added\n" duration=185.275511ms execID=8ef92
time="2023-11-03T13:23:20Z" level=info msg=patching jsonPatch="[{\"op\": \"add\", \"path\": \"/metadata/annotations\", \"value\": {\"argocd.argoproj.io/sync-options\": \"Prune=false\"}}]" path=two-nice-pods/pod-1.yaml
time="2023-11-03T13:23:20Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:23:20Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"name\":\"pod-1\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:23:20Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:23:20Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=b32df
time="2023-11-03T13:23:20Z" level=debug msg="diff --git a/two-nice-pods/pod-1.yaml b/two-nice-pods/pod-1.yaml\nindex 95187dd..69b3433 100644\n--- a/two-nice-pods/pod-1.yaml\n+++ b/two-nice-pods/pod-1.yaml\n@@ -1,12 +1,14 @@\n apiVersion: v1\n kind: Pod\n metadata:\n+  annotations:\n+    argocd.argoproj.io/sync-options: Prune=false\n   name: pod-1\n spec:\n   containers:\n-    - name: main\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      command:\n-        - \"true\"\n+  - command:\n+    - \"true\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n   restartPolicy: Never\n" duration=4.675289ms execID=b32df
time="2023-11-03T13:23:20Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=dff77
time="2023-11-03T13:23:20Z" level=debug msg="[master 25df0a3] patch\n 1 file changed, 7 insertions(+), 5 deletions(-)\n" duration=11.136683ms execID=dff77
time="2023-11-03T13:23:20Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=e84d4
Handling connection for 9081
time="2023-11-03T13:23:20Z" level=debug duration=50.573038ms execID=e84d4
time="2023-11-03T13:23:20Z" level=info msg="../../dist/argocd app create test-permission-with-scoped-repo --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path two-nice-pods --project argo-project --dest-namespace argocd-e2e--test-permission-with-scoped-repo-sfrac --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE5NSwibmJmIjoxNjk5MDE3Nzk1LCJpYXQiOjE2OTkwMTc3OTUsImp0aSI6ImM4ZDk2MDdkLWJlZDYtNDY4OC04M2Y5LTRhMTZhNGQ4M2Q0YyJ9.7Y06nw1gJrCzk8DWyP_KixHeGrhJwXmIM6mPMz9vJUg --insecure" dir= execID=b02e3
time="2023-11-03T13:23:20Z" level=debug msg="application 'test-permission-with-scoped-repo' created\n" duration=223.211687ms execID=b02e3
time="2023-11-03T13:23:20Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:23:20Z" level=info msg="../../dist/argocd app sync test-permission-with-scoped-repo --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE5NSwibmJmIjoxNjk5MDE3Nzk1LCJpYXQiOjE2OTkwMTc3OTUsImp0aSI6ImM4ZDk2MDdkLWJlZDYtNDY4OC04M2Y5LTRhMTZhNGQ4M2Q0YyJ9.7Y06nw1gJrCzk8DWyP_KixHeGrhJwXmIM6mPMz9vJUg --insecure" dir= execID=d5a5a
time="2023-11-03T13:23:21Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                          NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:23:20+00:00                Pod  argocd-e2e--test-permission-with-scoped-repo-sfrac                 pod-1  OutOfSync  Missing              \n2023-11-03T13:23:20+00:00                Pod  argocd-e2e--test-permission-with-scoped-repo-sfrac                 pod-2  OutOfSync  Missing              \n2023-11-03T13:23:21+00:00                Pod  argocd-e2e--test-permission-with-scoped-repo-sfrac                 pod-2  OutOfSync  Missing              pod/pod-2 created\n2023-11-03T13:23:21+00:00                Pod  argocd-e2e--test-permission-with-scoped-repo-sfrac                 pod-1  OutOfSync  Missing              pod/pod-1 created\n2023-11-03T13:23:21+00:00                Pod  argocd-e2e--test-permission-with-scoped-repo-sfrac                 pod-1    Synced  Progressing              pod/pod-1 created\n2023-11-03T13:23:21+00:00                Pod  argocd-e2e--test-permission-with-scoped-repo-sfrac                 pod-2    Synced  Progressing              pod/pod-2 created\n\nName:               argocd-e2e/test-permission-with-scoped-repo\nProject:            argo-project\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-permission-with-scoped-repo-sfrac\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-permission-with-scoped-repo\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               two-nice-pods\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (25df0a3)\nHealth Status:      Progressing\n\nOperation:          Sync\nSync Revision:      25df0a3b96640523a02072abf521262527453d9e\nPhase:              Succeeded\nStart:              2023-11-03 13:23:20 +0000 UTC\nFinished:           2023-11-03 13:23:21 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND  NAMESPACE                                           NAME   STATUS  HEALTH       HOOK  MESSAGE\n       Pod   argocd-e2e--test-permission-with-scoped-repo-sfrac  pod-2  Synced  Progressing        pod/pod-2 created\n       Pod   argocd-e2e--test-permission-with-scoped-repo-sfrac  pod-1  Synced  Progressing        pod/pod-1 created\n" duration=887.908078ms execID=d5a5a
time="2023-11-03T13:23:21Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:23:21Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:23:21Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:23:21Z" level=info msg=deleting path=two-nice-pods/pod-1.yaml
time="2023-11-03T13:23:21Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=e5f2f
time="2023-11-03T13:23:21Z" level=debug msg="diff --git a/two-nice-pods/pod-1.yaml b/two-nice-pods/pod-1.yaml\ndeleted file mode 100644\nindex 69b3433..0000000\n--- a/two-nice-pods/pod-1.yaml\n+++ /dev/null\n@@ -1,14 +0,0 @@\n-apiVersion: v1\n-kind: Pod\n-metadata:\n-  annotations:\n-    argocd.argoproj.io/sync-options: Prune=false\n-  name: pod-1\n-spec:\n-  containers:\n-  - command:\n-    - \"true\"\n-    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-    imagePullPolicy: IfNotPresent\n-    name: main\n-  restartPolicy: Never\n" duration=3.403964ms execID=e5f2f
time="2023-11-03T13:23:21Z" level=info msg="git commit -am delete" dir=/tmp/argo-e2e/testdata.git execID=ba4fa
time="2023-11-03T13:23:21Z" level=debug msg="[master 3d8ccff] delete\n 1 file changed, 14 deletions(-)\n delete mode 100644 two-nice-pods/pod-1.yaml\n" duration=7.437307ms execID=ba4fa
time="2023-11-03T13:23:21Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=03899
Handling connection for 9081
time="2023-11-03T13:23:21Z" level=debug duration=42.304701ms execID=03899
time="2023-11-03T13:23:21Z" level=info msg="../../dist/argocd app get test-permission-with-scoped-repo --hard-refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE5NSwibmJmIjoxNjk5MDE3Nzk1LCJpYXQiOjE2OTkwMTc3OTUsImp0aSI6ImM4ZDk2MDdkLWJlZDYtNDY4OC04M2Y5LTRhMTZhNGQ4M2Q0YyJ9.7Y06nw1gJrCzk8DWyP_KixHeGrhJwXmIM6mPMz9vJUg --insecure" dir= execID=3a46b
time="2023-11-03T13:23:21Z" level=debug msg="Name:               argocd-e2e/test-permission-with-scoped-repo\nProject:            argo-project\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-permission-with-scoped-repo-sfrac\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-permission-with-scoped-repo\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               two-nice-pods\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (3d8ccff)\nHealth Status:      Progressing\n\nGROUP  KIND  NAMESPACE                                           NAME   STATUS     HEALTH       HOOK  MESSAGE\n       Pod   argocd-e2e--test-permission-with-scoped-repo-sfrac  pod-2  Synced     Progressing        pod/pod-2 created\n       Pod   argocd-e2e--test-permission-with-scoped-repo-sfrac  pod-1  OutOfSync  Progressing        pod/pod-1 created\n" duration=257.640507ms execID=3a46b
time="2023-11-03T13:23:21Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:23:21Z" level=info msg="../../dist/argocd app sync test-permission-with-scoped-repo --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE5NSwibmJmIjoxNjk5MDE3Nzk1LCJpYXQiOjE2OTkwMTc3OTUsImp0aSI6ImM4ZDk2MDdkLWJlZDYtNDY4OC04M2Y5LTRhMTZhNGQ4M2Q0YyJ9.7Y06nw1gJrCzk8DWyP_KixHeGrhJwXmIM6mPMz9vJUg --insecure" dir= execID=53b51
time="2023-11-03T13:23:22Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                          NAME    STATUS    HEALTH            HOOK  MESSAGE\n2023-11-03T13:23:21+00:00                Pod  argocd-e2e--test-permission-with-scoped-repo-sfrac                 pod-2    Synced   Progressing              \n2023-11-03T13:23:21+00:00                Pod  argocd-e2e--test-permission-with-scoped-repo-sfrac                 pod-1  OutOfSync  Progressing              \n2023-11-03T13:23:22+00:00                Pod  argocd-e2e--test-permission-with-scoped-repo-sfrac                 pod-1  OutOfSync  Progressing              ignored (no prune)\n2023-11-03T13:23:22+00:00                Pod  argocd-e2e--test-permission-with-scoped-repo-sfrac                 pod-2    Synced   Progressing              pod/pod-2 unchanged\n\nName:               argocd-e2e/test-permission-with-scoped-repo\nProject:            argo-project\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-permission-with-scoped-repo-sfrac\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-permission-with-scoped-repo\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               two-nice-pods\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (3d8ccff)\nHealth Status:      Progressing\n\nOperation:          Sync\nSync Revision:      3d8ccff43f6cd96b1e9bafa49c168084fd13bb2e\nPhase:              Succeeded\nStart:              2023-11-03 13:23:21 +0000 UTC\nFinished:           2023-11-03 13:23:22 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND  NAMESPACE                                           NAME   STATUS     HEALTH       HOOK  MESSAGE\n       Pod   argocd-e2e--test-permission-with-scoped-repo-sfrac  pod-1  OutOfSync  Progressing        ignored (no prune)\n       Pod   argocd-e2e--test-permission-with-scoped-repo-sfrac  pod-2  Synced     Progressing        pod/pod-2 unchanged\n" duration=601.856681ms execID=53b51
time="2023-11-03T13:23:22Z" level=error msg="`../../dist/argocd app sync test-permission-with-scoped-repo --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDE5NSwibmJmIjoxNjk5MDE3Nzk1LCJpYXQiOjE2OTkwMTc3OTUsImp0aSI6ImM4ZDk2MDdkLWJlZDYtNDY4OC04M2Y5LTRhMTZhNGQ4M2Q0YyJ9.7Y06nw1gJrCzk8DWyP_KixHeGrhJwXmIM6mPMz9vJUg --insecure` failed exit status 1: time=\"2023-11-03T13:23:22Z\" level=fatal msg=\"1 resources require pruning\"" execID=53b51
time="2023-11-03T13:23:22Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:23:22Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:23:22Z" level=info msg="expectation succeeded: resource 'Pod/pod-1' sync status should be OutOfSync, is OutOfSync"
time="2023-11-03T13:23:22Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
time="2023-11-03T13:23:22Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestPermissionWithScopedRepo (11.33s)
=== RUN   TestPermissionDeniedWithScopedRepo
time="2023-11-03T13:23:22Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=40a47
time="2023-11-03T13:23:22Z" level=debug msg="namespace \"argocd-e2e--test-permission-with-scoped-repo-sfrac\" deleted\n" duration=162.027791ms execID=40a47
time="2023-11-03T13:23:22Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=79479
time="2023-11-03T13:23:22Z" level=debug msg="No resources found\n" duration=429.279278ms execID=79479
time="2023-11-03T13:23:22Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=0c1a3
time="2023-11-03T13:23:23Z" level=debug msg="No resources found\n" duration=163.290285ms execID=0c1a3
time="2023-11-03T13:23:23Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:23:23Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIwMywibmJmIjoxNjk5MDE3ODAzLCJpYXQiOjE2OTkwMTc4MDMsImp0aSI6IjE2YjhhNDRjLTI1Y2YtNDUyNi1iZDk3LWU0ZWI3NzM2ZjNjMCJ9.WjD4HXnm5AQeBwiUBU6D2LFdKgPq1fKVAQ6-39BYUkc --insecure" dir= execID=3eafd
time="2023-11-03T13:23:23Z" level=debug duration=66.432783ms execID=3eafd
time="2023-11-03T13:23:23Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=57e3c
time="2023-11-03T13:23:23Z" level=debug duration=1.993874ms execID=57e3c
time="2023-11-03T13:23:23Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=5ed41
time="2023-11-03T13:23:23Z" level=debug duration=1.688085ms execID=5ed41
time="2023-11-03T13:23:23Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=adf5e
time="2023-11-03T13:23:23Z" level=debug duration=1.436019ms execID=adf5e
time="2023-11-03T13:23:23Z" level=info msg="pkill -9 gpg-agent" dir= execID=aaec6
time="2023-11-03T13:23:23Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=1f2a7
time="2023-11-03T13:23:23Z" level=debug duration=10.094508ms execID=1f2a7
time="2023-11-03T13:23:23Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=25b0f
time="2023-11-03T13:23:23Z" level=debug duration=46.269063ms execID=25b0f
time="2023-11-03T13:23:23Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=e0a3a
time="2023-11-03T13:23:23Z" level=debug duration=1.803682ms execID=e0a3a
time="2023-11-03T13:23:23Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=04fd2
time="2023-11-03T13:23:23Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.089465ms execID=04fd2
time="2023-11-03T13:23:23Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=7804b
time="2023-11-03T13:23:23Z" level=debug duration=25.860434ms execID=7804b
time="2023-11-03T13:23:23Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=3e492
time="2023-11-03T13:23:23Z" level=debug duration=21.204914ms execID=3e492
time="2023-11-03T13:23:23Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=dad14
time="2023-11-03T13:23:23Z" level=debug duration=2.174984ms execID=dad14
time="2023-11-03T13:23:23Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=275a8
Handling connection for 9081
time="2023-11-03T13:23:23Z" level=debug duration=83.607466ms execID=275a8
time="2023-11-03T13:23:23Z" level=info msg="kubectl create ns argocd-e2e--test-permission-denied-with-scoped-repo-llhvd" dir= execID=72e02
time="2023-11-03T13:23:24Z" level=debug msg="namespace/argocd-e2e--test-permission-denied-with-scoped-repo-llhvd created\n" duration=115.83924ms execID=72e02
time="2023-11-03T13:23:24Z" level=info msg="kubectl label ns argocd-e2e--test-permission-denied-with-scoped-repo-llhvd e2e.argoproj.io=true" dir= execID=e0dbf
time="2023-11-03T13:23:24Z" level=debug msg="namespace/argocd-e2e--test-permission-denied-with-scoped-repo-llhvd labeled\n" duration=275.507976ms execID=e0dbf
time="2023-11-03T13:23:24Z" level=info msg="clean state" duration=2.125354362s id=TestPermissionDeniedWithScopedRepo-llhvd name=TestPermissionDeniedWithScopedRepo password=password username=admin
time="2023-11-03T13:23:25Z" level=info msg="../../dist/argocd proj create argo-project --dest *,* --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIwMywibmJmIjoxNjk5MDE3ODAzLCJpYXQiOjE2OTkwMTc4MDMsImp0aSI6IjE2YjhhNDRjLTI1Y2YtNDUyNi1iZDk3LWU0ZWI3NzM2ZjNjMCJ9.WjD4HXnm5AQeBwiUBU6D2LFdKgPq1fKVAQ6-39BYUkc --insecure" dir= execID=b461e
time="2023-11-03T13:23:25Z" level=debug duration=74.158911ms execID=b461e
time="2023-11-03T13:23:26Z" level=info msg="../../dist/argocd repo add http://argocd-e2e-server:9081/argo-e2e/testdata.git --project default --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIwMywibmJmIjoxNjk5MDE3ODAzLCJpYXQiOjE2OTkwMTc4MDMsImp0aSI6IjE2YjhhNDRjLTI1Y2YtNDUyNi1iZDk3LWU0ZWI3NzM2ZjNjMCJ9.WjD4HXnm5AQeBwiUBU6D2LFdKgPq1fKVAQ6-39BYUkc --insecure" dir= execID=453d3
time="2023-11-03T13:23:26Z" level=debug msg="Repository 'http://argocd-e2e-server:9081/argo-e2e/testdata.git' added\n" duration=189.385288ms execID=453d3
time="2023-11-03T13:23:27Z" level=info msg=patching jsonPatch="[{\"op\": \"add\", \"path\": \"/metadata/annotations\", \"value\": {\"argocd.argoproj.io/sync-options\": \"Prune=false\"}}]" path=two-nice-pods/pod-1.yaml
time="2023-11-03T13:23:27Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:23:27Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"name\":\"pod-1\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:23:27Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:23:27Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=3fd75
time="2023-11-03T13:23:27Z" level=debug msg="diff --git a/two-nice-pods/pod-1.yaml b/two-nice-pods/pod-1.yaml\nindex 95187dd..69b3433 100644\n--- a/two-nice-pods/pod-1.yaml\n+++ b/two-nice-pods/pod-1.yaml\n@@ -1,12 +1,14 @@\n apiVersion: v1\n kind: Pod\n metadata:\n+  annotations:\n+    argocd.argoproj.io/sync-options: Prune=false\n   name: pod-1\n spec:\n   containers:\n-    - name: main\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      command:\n-        - \"true\"\n+  - command:\n+    - \"true\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n   restartPolicy: Never\n" duration=5.097152ms execID=3fd75
time="2023-11-03T13:23:27Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=4f3e4
time="2023-11-03T13:23:27Z" level=debug msg="[master cdc4588] patch\n 1 file changed, 7 insertions(+), 5 deletions(-)\n" duration=12.95958ms execID=4f3e4
time="2023-11-03T13:23:27Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=bbcba
Handling connection for 9081
time="2023-11-03T13:23:27Z" level=debug duration=38.310658ms execID=bbcba
time="2023-11-03T13:23:27Z" level=info msg="../../dist/argocd app create test-permission-denied-with-scoped-repo --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path two-nice-pods --project argo-project --dest-namespace argocd-e2e--test-permission-denied-with-scoped-repo-llhvd --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIwMywibmJmIjoxNjk5MDE3ODAzLCJpYXQiOjE2OTkwMTc4MDMsImp0aSI6IjE2YjhhNDRjLTI1Y2YtNDUyNi1iZDk3LWU0ZWI3NzM2ZjNjMCJ9.WjD4HXnm5AQeBwiUBU6D2LFdKgPq1fKVAQ6-39BYUkc --insecure" dir= execID=ca0ae
time="2023-11-03T13:23:27Z" level=debug duration=229.456753ms execID=ca0ae
time="2023-11-03T13:23:27Z" level=error msg="`../../dist/argocd app create test-permission-denied-with-scoped-repo --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path two-nice-pods --project argo-project --dest-namespace argocd-e2e--test-permission-denied-with-scoped-repo-llhvd --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIwMywibmJmIjoxNjk5MDE3ODAzLCJpYXQiOjE2OTkwMTc4MDMsImp0aSI6IjE2YjhhNDRjLTI1Y2YtNDUyNi1iZDk3LWU0ZWI3NzM2ZjNjMCJ9.WjD4HXnm5AQeBwiUBU6D2LFdKgPq1fKVAQ6-39BYUkc --insecure` failed exit status 20: time=\"2023-11-03T13:23:27Z\" level=fatal msg=\"rpc error: code = InvalidArgument desc = application spec for test-permission-denied-with-scoped-repo is invalid: InvalidSpecError: application repo http://argocd-e2e-server:9081/argo-e2e/testdata.git is not permitted in project 'argo-project'\"" execID=ca0ae
time="2023-11-03T13:23:27Z" level=info msg="expectation succeeded: error ''"
time="2023-11-03T13:23:27Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestPermissionDeniedWithScopedRepo (5.68s)
=== RUN   TestPermissionDeniedWithNegatedNamespace
time="2023-11-03T13:23:27Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=c10e9
time="2023-11-03T13:23:28Z" level=debug msg="namespace \"argocd-e2e--test-permission-denied-with-scoped-repo-llhvd\" deleted\n" duration=199.584811ms execID=c10e9
time="2023-11-03T13:23:28Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=1913a
time="2023-11-03T13:23:28Z" level=debug msg="No resources found\n" duration=610.589786ms execID=1913a
time="2023-11-03T13:23:28Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=e82ec
time="2023-11-03T13:23:28Z" level=debug msg="No resources found\n" duration=199.098862ms execID=e82ec
time="2023-11-03T13:23:29Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:23:29Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIwOSwibmJmIjoxNjk5MDE3ODA5LCJpYXQiOjE2OTkwMTc4MDksImp0aSI6IjFhMGM5MTk3LTBjNmYtNDQ0OS1hOTlkLWVjZTY0OWNiYWUzZCJ9.DnZxx7zBVdDFq_IC1f1mXGCDEYZQkfCo0zap4gkwtnw --insecure" dir= execID=bef44
time="2023-11-03T13:23:29Z" level=debug duration=88.383721ms execID=bef44
time="2023-11-03T13:23:29Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=dab5f
time="2023-11-03T13:23:29Z" level=debug duration=2.03231ms execID=dab5f
time="2023-11-03T13:23:29Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=8560f
time="2023-11-03T13:23:29Z" level=debug duration=1.633037ms execID=8560f
time="2023-11-03T13:23:29Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=ea2f3
time="2023-11-03T13:23:29Z" level=debug duration=1.551522ms execID=ea2f3
time="2023-11-03T13:23:29Z" level=info msg="pkill -9 gpg-agent" dir= execID=8b463
time="2023-11-03T13:23:29Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=799ef
time="2023-11-03T13:23:29Z" level=debug duration=9.726774ms execID=799ef
time="2023-11-03T13:23:29Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=6bf76
time="2023-11-03T13:23:30Z" level=debug duration=32.639943ms execID=6bf76
time="2023-11-03T13:23:30Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=57f1c
time="2023-11-03T13:23:30Z" level=debug duration=2.883393ms execID=57f1c
time="2023-11-03T13:23:30Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=d7e48
time="2023-11-03T13:23:30Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=19.650498ms execID=d7e48
time="2023-11-03T13:23:30Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=6a2ea
time="2023-11-03T13:23:30Z" level=debug duration=27.599196ms execID=6a2ea
time="2023-11-03T13:23:30Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=bcd83
time="2023-11-03T13:23:30Z" level=debug duration=21.481771ms execID=bcd83
time="2023-11-03T13:23:30Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=b018a
time="2023-11-03T13:23:30Z" level=debug duration=2.369581ms execID=b018a
time="2023-11-03T13:23:30Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=e5443
Handling connection for 9081
time="2023-11-03T13:23:30Z" level=debug duration=90.298704ms execID=e5443
time="2023-11-03T13:23:30Z" level=info msg="kubectl create ns argocd-e2e--test-permission-denied-with-negated-namespace-dkbze" dir= execID=fd604
time="2023-11-03T13:23:30Z" level=debug msg="namespace/argocd-e2e--test-permission-denied-with-negated-namespace-dkbze created\n" duration=170.942674ms execID=fd604
time="2023-11-03T13:23:30Z" level=info msg="kubectl label ns argocd-e2e--test-permission-denied-with-negated-namespace-dkbze e2e.argoproj.io=true" dir= execID=af40b
time="2023-11-03T13:23:30Z" level=debug msg="namespace/argocd-e2e--test-permission-denied-with-negated-namespace-dkbze labeled\n" duration=314.367757ms execID=af40b
time="2023-11-03T13:23:30Z" level=info msg="clean state" duration=2.745515796s id=TestPermissionDeniedWithNegatedNamespace-dkbze name=TestPermissionDeniedWithNegatedNamespace password=password username=admin
time="2023-11-03T13:23:31Z" level=info msg="../../dist/argocd proj create argo-project --dest *,!*test-permission-denied-with-negated-namespace* --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIwOSwibmJmIjoxNjk5MDE3ODA5LCJpYXQiOjE2OTkwMTc4MDksImp0aSI6IjFhMGM5MTk3LTBjNmYtNDQ0OS1hOTlkLWVjZTY0OWNiYWUzZCJ9.DnZxx7zBVdDFq_IC1f1mXGCDEYZQkfCo0zap4gkwtnw --insecure" dir= execID=2ca37
time="2023-11-03T13:23:31Z" level=debug duration=78.760033ms execID=2ca37
time="2023-11-03T13:23:32Z" level=info msg="../../dist/argocd repo add http://argocd-e2e-server:9081/argo-e2e/testdata.git --project argo-project --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIwOSwibmJmIjoxNjk5MDE3ODA5LCJpYXQiOjE2OTkwMTc4MDksImp0aSI6IjFhMGM5MTk3LTBjNmYtNDQ0OS1hOTlkLWVjZTY0OWNiYWUzZCJ9.DnZxx7zBVdDFq_IC1f1mXGCDEYZQkfCo0zap4gkwtnw --insecure" dir= execID=ad8f1
time="2023-11-03T13:23:32Z" level=debug msg="Repository 'http://argocd-e2e-server:9081/argo-e2e/testdata.git' added\n" duration=187.451524ms execID=ad8f1
time="2023-11-03T13:23:33Z" level=info msg=patching jsonPatch="[{\"op\": \"add\", \"path\": \"/metadata/annotations\", \"value\": {\"argocd.argoproj.io/sync-options\": \"Prune=false\"}}]" path=two-nice-pods/pod-1.yaml
time="2023-11-03T13:23:33Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:23:33Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"name\":\"pod-1\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:23:33Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:23:33Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=84cb2
time="2023-11-03T13:23:33Z" level=debug msg="diff --git a/two-nice-pods/pod-1.yaml b/two-nice-pods/pod-1.yaml\nindex 95187dd..69b3433 100644\n--- a/two-nice-pods/pod-1.yaml\n+++ b/two-nice-pods/pod-1.yaml\n@@ -1,12 +1,14 @@\n apiVersion: v1\n kind: Pod\n metadata:\n+  annotations:\n+    argocd.argoproj.io/sync-options: Prune=false\n   name: pod-1\n spec:\n   containers:\n-    - name: main\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      command:\n-        - \"true\"\n+  - command:\n+    - \"true\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n   restartPolicy: Never\n" duration=3.652992ms execID=84cb2
time="2023-11-03T13:23:33Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=d9725
time="2023-11-03T13:23:33Z" level=debug msg="[master bc9fa05] patch\n 1 file changed, 7 insertions(+), 5 deletions(-)\n" duration=11.660199ms execID=d9725
time="2023-11-03T13:23:33Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=c8cc3
Handling connection for 9081
time="2023-11-03T13:23:33Z" level=debug duration=39.561713ms execID=c8cc3
time="2023-11-03T13:23:33Z" level=info msg="../../dist/argocd app create test-permission-denied-with-negated-namespace --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path two-nice-pods --project argo-project --dest-namespace argocd-e2e--test-permission-denied-with-negated-namespace-dkbze --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIwOSwibmJmIjoxNjk5MDE3ODA5LCJpYXQiOjE2OTkwMTc4MDksImp0aSI6IjFhMGM5MTk3LTBjNmYtNDQ0OS1hOTlkLWVjZTY0OWNiYWUzZCJ9.DnZxx7zBVdDFq_IC1f1mXGCDEYZQkfCo0zap4gkwtnw --insecure" dir= execID=d6083
time="2023-11-03T13:23:34Z" level=debug duration=234.558977ms execID=d6083
time="2023-11-03T13:23:34Z" level=error msg="`../../dist/argocd app create test-permission-denied-with-negated-namespace --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path two-nice-pods --project argo-project --dest-namespace argocd-e2e--test-permission-denied-with-negated-namespace-dkbze --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIwOSwibmJmIjoxNjk5MDE3ODA5LCJpYXQiOjE2OTkwMTc4MDksImp0aSI6IjFhMGM5MTk3LTBjNmYtNDQ0OS1hOTlkLWVjZTY0OWNiYWUzZCJ9.DnZxx7zBVdDFq_IC1f1mXGCDEYZQkfCo0zap4gkwtnw --insecure` failed exit status 20: time=\"2023-11-03T13:23:34Z\" level=fatal msg=\"rpc error: code = InvalidArgument desc = application spec for test-permission-denied-with-negated-namespace is invalid: InvalidSpecError: application destination {https://kubernetes.default.svc argocd-e2e--test-permission-denied-with-negated-namespace-dkbze} is not permitted in project 'argo-project'\"" execID=d6083
time="2023-11-03T13:23:34Z" level=info msg="expectation succeeded: error ''"
time="2023-11-03T13:23:34Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestPermissionDeniedWithNegatedNamespace (6.30s)
=== RUN   TestPermissionDeniedWithNegatedServer
time="2023-11-03T13:23:34Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=0d86f
time="2023-11-03T13:23:34Z" level=debug msg="namespace \"argocd-e2e--test-permission-denied-with-negated-namespace-dkbze\" deleted\n" duration=263.806313ms execID=0d86f
time="2023-11-03T13:23:34Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=21111
time="2023-11-03T13:23:34Z" level=debug msg="No resources found\n" duration=451.247422ms execID=21111
time="2023-11-03T13:23:34Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=e1bfc
time="2023-11-03T13:23:35Z" level=debug msg="No resources found\n" duration=249.795783ms execID=e1bfc
time="2023-11-03T13:23:35Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:23:36Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIxNSwibmJmIjoxNjk5MDE3ODE1LCJpYXQiOjE2OTkwMTc4MTUsImp0aSI6ImNmZTNkMjc0LTVkOGYtNDM4Yy05NTczLWM5ZWU1ZGMwOGIzMyJ9.Ryzxu4TMnA9qznT4SQ3SFp1hPUPAvRd3SkTo2VkZih0 --insecure" dir= execID=6cf95
time="2023-11-03T13:23:36Z" level=debug duration=118.291407ms execID=6cf95
time="2023-11-03T13:23:36Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=9231e
time="2023-11-03T13:23:36Z" level=debug duration=1.995553ms execID=9231e
time="2023-11-03T13:23:36Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=ce3c7
time="2023-11-03T13:23:36Z" level=debug duration=1.604177ms execID=ce3c7
time="2023-11-03T13:23:36Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=f37e0
time="2023-11-03T13:23:36Z" level=debug duration=1.52061ms execID=f37e0
time="2023-11-03T13:23:36Z" level=info msg="pkill -9 gpg-agent" dir= execID=d4e3f
time="2023-11-03T13:23:36Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=4cbb4
time="2023-11-03T13:23:36Z" level=debug duration=10.173619ms execID=4cbb4
time="2023-11-03T13:23:36Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=192b1
time="2023-11-03T13:23:36Z" level=debug duration=42.387772ms execID=192b1
time="2023-11-03T13:23:36Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=38048
time="2023-11-03T13:23:36Z" level=debug duration=1.889005ms execID=38048
time="2023-11-03T13:23:36Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=ea188
time="2023-11-03T13:23:36Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.107337ms execID=ea188
time="2023-11-03T13:23:36Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=493fd
time="2023-11-03T13:23:36Z" level=debug duration=29.388976ms execID=493fd
time="2023-11-03T13:23:36Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=73998
time="2023-11-03T13:23:36Z" level=debug duration=23.826237ms execID=73998
time="2023-11-03T13:23:36Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=2d33d
time="2023-11-03T13:23:36Z" level=debug duration=2.709048ms execID=2d33d
time="2023-11-03T13:23:36Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=82782
Handling connection for 9081
time="2023-11-03T13:23:36Z" level=debug duration=74.56641ms execID=82782
time="2023-11-03T13:23:36Z" level=info msg="kubectl create ns argocd-e2e--test-permission-denied-with-negated-server-etomr" dir= execID=93036
time="2023-11-03T13:23:36Z" level=debug msg="namespace/argocd-e2e--test-permission-denied-with-negated-server-etomr created\n" duration=124.062975ms execID=93036
time="2023-11-03T13:23:36Z" level=info msg="kubectl label ns argocd-e2e--test-permission-denied-with-negated-server-etomr e2e.argoproj.io=true" dir= execID=ccc1f
time="2023-11-03T13:23:36Z" level=debug msg="namespace/argocd-e2e--test-permission-denied-with-negated-server-etomr labeled\n" duration=257.238334ms execID=ccc1f
time="2023-11-03T13:23:36Z" level=info msg="clean state" duration=2.536702349s id=TestPermissionDeniedWithNegatedServer-etomr name=TestPermissionDeniedWithNegatedServer password=password username=admin
time="2023-11-03T13:23:37Z" level=info msg="../../dist/argocd proj create argo-project --dest !https://kubernetes.default.svc,* --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIxNSwibmJmIjoxNjk5MDE3ODE1LCJpYXQiOjE2OTkwMTc4MTUsImp0aSI6ImNmZTNkMjc0LTVkOGYtNDM4Yy05NTczLWM5ZWU1ZGMwOGIzMyJ9.Ryzxu4TMnA9qznT4SQ3SFp1hPUPAvRd3SkTo2VkZih0 --insecure" dir= execID=39cc8
time="2023-11-03T13:23:37Z" level=debug duration=73.047991ms execID=39cc8
time="2023-11-03T13:23:38Z" level=info msg="../../dist/argocd repo add http://argocd-e2e-server:9081/argo-e2e/testdata.git --project argo-project --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIxNSwibmJmIjoxNjk5MDE3ODE1LCJpYXQiOjE2OTkwMTc4MTUsImp0aSI6ImNmZTNkMjc0LTVkOGYtNDM4Yy05NTczLWM5ZWU1ZGMwOGIzMyJ9.Ryzxu4TMnA9qznT4SQ3SFp1hPUPAvRd3SkTo2VkZih0 --insecure" dir= execID=b6d0a
time="2023-11-03T13:23:39Z" level=debug msg="Repository 'http://argocd-e2e-server:9081/argo-e2e/testdata.git' added\n" duration=221.587662ms execID=b6d0a
time="2023-11-03T13:23:40Z" level=info msg=patching jsonPatch="[{\"op\": \"add\", \"path\": \"/metadata/annotations\", \"value\": {\"argocd.argoproj.io/sync-options\": \"Prune=false\"}}]" path=two-nice-pods/pod-1.yaml
time="2023-11-03T13:23:40Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:23:40Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"name\":\"pod-1\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:23:40Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:23:40Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=dae35
time="2023-11-03T13:23:40Z" level=debug msg="diff --git a/two-nice-pods/pod-1.yaml b/two-nice-pods/pod-1.yaml\nindex 95187dd..69b3433 100644\n--- a/two-nice-pods/pod-1.yaml\n+++ b/two-nice-pods/pod-1.yaml\n@@ -1,12 +1,14 @@\n apiVersion: v1\n kind: Pod\n metadata:\n+  annotations:\n+    argocd.argoproj.io/sync-options: Prune=false\n   name: pod-1\n spec:\n   containers:\n-    - name: main\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      command:\n-        - \"true\"\n+  - command:\n+    - \"true\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n   restartPolicy: Never\n" duration=4.891832ms execID=dae35
time="2023-11-03T13:23:40Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=d51b8
time="2023-11-03T13:23:40Z" level=debug msg="[master d34f63d] patch\n 1 file changed, 7 insertions(+), 5 deletions(-)\n" duration=12.227761ms execID=d51b8
time="2023-11-03T13:23:40Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=4a59b
Handling connection for 9081
time="2023-11-03T13:23:40Z" level=debug duration=37.799376ms execID=4a59b
time="2023-11-03T13:23:40Z" level=info msg="../../dist/argocd app create test-permission-denied-with-negated-server --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path two-nice-pods --project argo-project --dest-namespace argocd-e2e--test-permission-denied-with-negated-server-etomr --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIxNSwibmJmIjoxNjk5MDE3ODE1LCJpYXQiOjE2OTkwMTc4MTUsImp0aSI6ImNmZTNkMjc0LTVkOGYtNDM4Yy05NTczLWM5ZWU1ZGMwOGIzMyJ9.Ryzxu4TMnA9qznT4SQ3SFp1hPUPAvRd3SkTo2VkZih0 --insecure" dir= execID=13042
time="2023-11-03T13:23:40Z" level=debug duration=191.978879ms execID=13042
time="2023-11-03T13:23:40Z" level=error msg="`../../dist/argocd app create test-permission-denied-with-negated-server --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path two-nice-pods --project argo-project --dest-namespace argocd-e2e--test-permission-denied-with-negated-server-etomr --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIxNSwibmJmIjoxNjk5MDE3ODE1LCJpYXQiOjE2OTkwMTc4MTUsImp0aSI6ImNmZTNkMjc0LTVkOGYtNDM4Yy05NTczLWM5ZWU1ZGMwOGIzMyJ9.Ryzxu4TMnA9qznT4SQ3SFp1hPUPAvRd3SkTo2VkZih0 --insecure` failed exit status 20: time=\"2023-11-03T13:23:40Z\" level=fatal msg=\"rpc error: code = InvalidArgument desc = application spec for test-permission-denied-with-negated-server is invalid: InvalidSpecError: application destination {https://kubernetes.default.svc argocd-e2e--test-permission-denied-with-negated-server-etomr} is not permitted in project 'argo-project'\"" execID=13042
time="2023-11-03T13:23:40Z" level=info msg="expectation succeeded: error ''"
time="2023-11-03T13:23:40Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestPermissionDeniedWithNegatedServer (6.08s)
=== RUN   TestSyncOptionPruneFalse
time="2023-11-03T13:23:40Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=c54b9
time="2023-11-03T13:23:40Z" level=debug msg="namespace \"argocd-e2e--test-permission-denied-with-negated-server-etomr\" deleted\n" duration=232.356931ms execID=c54b9
time="2023-11-03T13:23:40Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=69819
time="2023-11-03T13:23:41Z" level=debug msg="No resources found\n" duration=530.413734ms execID=69819
time="2023-11-03T13:23:41Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=4ae94
time="2023-11-03T13:23:41Z" level=debug msg="No resources found\n" duration=397.623087ms execID=4ae94
time="2023-11-03T13:23:42Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:23:42Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIyMiwibmJmIjoxNjk5MDE3ODIyLCJpYXQiOjE2OTkwMTc4MjIsImp0aSI6ImNkOTI1ODVhLWNlYjEtNDFmMi1iN2ZjLTc1NTEyZDBhZjc1ZSJ9.tMVIyPax0mhgRRkiJc69ZhoZFAQkXNF5_DNv_Q2HsI0 --insecure" dir= execID=81077
time="2023-11-03T13:23:42Z" level=debug duration=105.486608ms execID=81077
time="2023-11-03T13:23:42Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=9e2ef
time="2023-11-03T13:23:42Z" level=debug duration=2.299964ms execID=9e2ef
time="2023-11-03T13:23:42Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=6fe65
time="2023-11-03T13:23:42Z" level=debug duration=1.794123ms execID=6fe65
time="2023-11-03T13:23:42Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=6f05e
time="2023-11-03T13:23:42Z" level=debug duration=1.78421ms execID=6f05e
time="2023-11-03T13:23:42Z" level=info msg="pkill -9 gpg-agent" dir= execID=639d5
time="2023-11-03T13:23:42Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=57b88
time="2023-11-03T13:23:42Z" level=debug duration=9.752648ms execID=57b88
time="2023-11-03T13:23:42Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=23235
time="2023-11-03T13:23:42Z" level=debug duration=33.774523ms execID=23235
time="2023-11-03T13:23:42Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=034f6
time="2023-11-03T13:23:42Z" level=debug duration=20.812521ms execID=034f6
time="2023-11-03T13:23:42Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=e390c
time="2023-11-03T13:23:42Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.961134ms execID=e390c
time="2023-11-03T13:23:42Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=7ca33
time="2023-11-03T13:23:42Z" level=debug duration=25.20803ms execID=7ca33
time="2023-11-03T13:23:42Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=24015
time="2023-11-03T13:23:42Z" level=debug duration=22.955226ms execID=24015
time="2023-11-03T13:23:42Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=5cd0f
time="2023-11-03T13:23:42Z" level=debug duration=2.782688ms execID=5cd0f
time="2023-11-03T13:23:42Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=6d72e
Handling connection for 9081
time="2023-11-03T13:23:42Z" level=debug duration=88.213833ms execID=6d72e
time="2023-11-03T13:23:42Z" level=info msg="kubectl create ns argocd-e2e--test-sync-option-prune-false-tnbio" dir= execID=0033d
time="2023-11-03T13:23:42Z" level=debug msg="namespace/argocd-e2e--test-sync-option-prune-false-tnbio created\n" duration=101.986334ms execID=0033d
time="2023-11-03T13:23:42Z" level=info msg="kubectl label ns argocd-e2e--test-sync-option-prune-false-tnbio e2e.argoproj.io=true" dir= execID=41a39
time="2023-11-03T13:23:43Z" level=debug msg="namespace/argocd-e2e--test-sync-option-prune-false-tnbio labeled\n" duration=287.598595ms execID=41a39
time="2023-11-03T13:23:43Z" level=info msg="clean state" duration=2.76247322s id=TestSyncOptionPruneFalse-tnbio name=TestSyncOptionPruneFalse password=password username=admin
time="2023-11-03T13:23:44Z" level=info msg=patching jsonPatch="[{\"op\": \"add\", \"path\": \"/metadata/annotations\", \"value\": {\"argocd.argoproj.io/sync-options\": \"Prune=false\"}}]" path=two-nice-pods/pod-1.yaml
time="2023-11-03T13:23:44Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:23:44Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"name\":\"pod-1\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:23:44Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:23:44Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=4b385
time="2023-11-03T13:23:44Z" level=debug msg="diff --git a/two-nice-pods/pod-1.yaml b/two-nice-pods/pod-1.yaml\nindex 95187dd..69b3433 100644\n--- a/two-nice-pods/pod-1.yaml\n+++ b/two-nice-pods/pod-1.yaml\n@@ -1,12 +1,14 @@\n apiVersion: v1\n kind: Pod\n metadata:\n+  annotations:\n+    argocd.argoproj.io/sync-options: Prune=false\n   name: pod-1\n spec:\n   containers:\n-    - name: main\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      command:\n-        - \"true\"\n+  - command:\n+    - \"true\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n   restartPolicy: Never\n" duration=5.000436ms execID=4b385
time="2023-11-03T13:23:44Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=3867a
time="2023-11-03T13:23:44Z" level=debug msg="[master d986277] patch\n 1 file changed, 7 insertions(+), 5 deletions(-)\n" duration=12.781373ms execID=3867a
time="2023-11-03T13:23:44Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=33715
Handling connection for 9081
time="2023-11-03T13:23:44Z" level=debug duration=39.36648ms execID=33715
time="2023-11-03T13:23:44Z" level=info msg="../../dist/argocd app create test-sync-option-prune-false --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path two-nice-pods --project default --dest-namespace argocd-e2e--test-sync-option-prune-false-tnbio --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIyMiwibmJmIjoxNjk5MDE3ODIyLCJpYXQiOjE2OTkwMTc4MjIsImp0aSI6ImNkOTI1ODVhLWNlYjEtNDFmMi1iN2ZjLTc1NTEyZDBhZjc1ZSJ9.tMVIyPax0mhgRRkiJc69ZhoZFAQkXNF5_DNv_Q2HsI0 --insecure" dir= execID=4ccce
time="2023-11-03T13:23:44Z" level=debug msg="application 'test-sync-option-prune-false' created\n" duration=214.513197ms execID=4ccce
time="2023-11-03T13:23:44Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:23:44Z" level=info msg="../../dist/argocd app sync test-sync-option-prune-false --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIyMiwibmJmIjoxNjk5MDE3ODIyLCJpYXQiOjE2OTkwMTc4MjIsImp0aSI6ImNkOTI1ODVhLWNlYjEtNDFmMi1iN2ZjLTc1NTEyZDBhZjc1ZSJ9.tMVIyPax0mhgRRkiJc69ZhoZFAQkXNF5_DNv_Q2HsI0 --insecure" dir= execID=f73d2
time="2023-11-03T13:23:45Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                      NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:23:44+00:00                Pod  argocd-e2e--test-sync-option-prune-false-tnbio                 pod-1  OutOfSync  Missing              \n2023-11-03T13:23:44+00:00                Pod  argocd-e2e--test-sync-option-prune-false-tnbio                 pod-2  OutOfSync  Missing              \n\nName:               argocd-e2e/test-sync-option-prune-false\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-sync-option-prune-false-tnbio\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-sync-option-prune-false\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               two-nice-pods\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (d986277)\nHealth Status:      Progressing\n\nOperation:          Sync\nSync Revision:      d986277181c1164f3cd1ec4bd89f9f89af35a38d\nPhase:              Succeeded\nStart:              2023-11-03 13:23:44 +0000 UTC\nFinished:           2023-11-03 13:23:44 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND  NAMESPACE                                       NAME   STATUS  HEALTH       HOOK  MESSAGE\n       Pod   argocd-e2e--test-sync-option-prune-false-tnbio  pod-2  Synced  Progressing        pod/pod-2 created\n       Pod   argocd-e2e--test-sync-option-prune-false-tnbio  pod-1  Synced  Progressing        pod/pod-1 created\n" duration=796.396036ms execID=f73d2
time="2023-11-03T13:23:45Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:23:45Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:23:45Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:23:45Z" level=info msg=deleting path=two-nice-pods/pod-1.yaml
time="2023-11-03T13:23:45Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=22de3
time="2023-11-03T13:23:45Z" level=debug msg="diff --git a/two-nice-pods/pod-1.yaml b/two-nice-pods/pod-1.yaml\ndeleted file mode 100644\nindex 69b3433..0000000\n--- a/two-nice-pods/pod-1.yaml\n+++ /dev/null\n@@ -1,14 +0,0 @@\n-apiVersion: v1\n-kind: Pod\n-metadata:\n-  annotations:\n-    argocd.argoproj.io/sync-options: Prune=false\n-  name: pod-1\n-spec:\n-  containers:\n-  - command:\n-    - \"true\"\n-    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-    imagePullPolicy: IfNotPresent\n-    name: main\n-  restartPolicy: Never\n" duration=3.561261ms execID=22de3
time="2023-11-03T13:23:45Z" level=info msg="git commit -am delete" dir=/tmp/argo-e2e/testdata.git execID=5f262
time="2023-11-03T13:23:45Z" level=debug msg="[master 092c439] delete\n 1 file changed, 14 deletions(-)\n delete mode 100644 two-nice-pods/pod-1.yaml\n" duration=10.728182ms execID=5f262
time="2023-11-03T13:23:45Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=841fa
Handling connection for 9081
time="2023-11-03T13:23:45Z" level=debug duration=45.385243ms execID=841fa
time="2023-11-03T13:23:45Z" level=info msg="../../dist/argocd app get test-sync-option-prune-false --hard-refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIyMiwibmJmIjoxNjk5MDE3ODIyLCJpYXQiOjE2OTkwMTc4MjIsImp0aSI6ImNkOTI1ODVhLWNlYjEtNDFmMi1iN2ZjLTc1NTEyZDBhZjc1ZSJ9.tMVIyPax0mhgRRkiJc69ZhoZFAQkXNF5_DNv_Q2HsI0 --insecure" dir= execID=63304
time="2023-11-03T13:23:45Z" level=debug msg="Name:               argocd-e2e/test-sync-option-prune-false\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-sync-option-prune-false-tnbio\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-sync-option-prune-false\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               two-nice-pods\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (092c439)\nHealth Status:      Progressing\n\nGROUP  KIND  NAMESPACE                                       NAME   STATUS     HEALTH       HOOK  MESSAGE\n       Pod   argocd-e2e--test-sync-option-prune-false-tnbio  pod-2  Synced     Progressing        pod/pod-2 created\n       Pod   argocd-e2e--test-sync-option-prune-false-tnbio  pod-1  OutOfSync  Progressing        pod/pod-1 created\n" duration=255.321354ms execID=63304
time="2023-11-03T13:23:45Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:23:45Z" level=info msg="../../dist/argocd app sync test-sync-option-prune-false --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIyMiwibmJmIjoxNjk5MDE3ODIyLCJpYXQiOjE2OTkwMTc4MjIsImp0aSI6ImNkOTI1ODVhLWNlYjEtNDFmMi1iN2ZjLTc1NTEyZDBhZjc1ZSJ9.tMVIyPax0mhgRRkiJc69ZhoZFAQkXNF5_DNv_Q2HsI0 --insecure" dir= execID=f7ca5
time="2023-11-03T13:23:46Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                      NAME    STATUS    HEALTH            HOOK  MESSAGE\n2023-11-03T13:23:45+00:00                Pod  argocd-e2e--test-sync-option-prune-false-tnbio                 pod-1  OutOfSync  Progressing              \n2023-11-03T13:23:45+00:00                Pod  argocd-e2e--test-sync-option-prune-false-tnbio                 pod-2    Synced   Progressing              \n\nName:               argocd-e2e/test-sync-option-prune-false\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-sync-option-prune-false-tnbio\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-sync-option-prune-false\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               two-nice-pods\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (092c439)\nHealth Status:      Progressing\n\nOperation:          Sync\nSync Revision:      092c43989bc038ba53be7a184cdafcec07f7944e\nPhase:              Succeeded\nStart:              2023-11-03 13:23:45 +0000 UTC\nFinished:           2023-11-03 13:23:45 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND  NAMESPACE                                       NAME   STATUS     HEALTH       HOOK  MESSAGE\n       Pod   argocd-e2e--test-sync-option-prune-false-tnbio  pod-1  OutOfSync  Progressing        ignored (no prune)\n       Pod   argocd-e2e--test-sync-option-prune-false-tnbio  pod-2  Synced     Progressing        pod/pod-2 unchanged\n" duration=705.357197ms execID=f7ca5
time="2023-11-03T13:23:46Z" level=error msg="`../../dist/argocd app sync test-sync-option-prune-false --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIyMiwibmJmIjoxNjk5MDE3ODIyLCJpYXQiOjE2OTkwMTc4MjIsImp0aSI6ImNkOTI1ODVhLWNlYjEtNDFmMi1iN2ZjLTc1NTEyZDBhZjc1ZSJ9.tMVIyPax0mhgRRkiJc69ZhoZFAQkXNF5_DNv_Q2HsI0 --insecure` failed exit status 1: time=\"2023-11-03T13:23:46Z\" level=fatal msg=\"1 resources require pruning\"" execID=f7ca5
time="2023-11-03T13:23:46Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:23:46Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:23:46Z" level=info msg="expectation succeeded: resource 'Pod/pod-1' sync status should be OutOfSync, is OutOfSync"
time="2023-11-03T13:23:46Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestSyncOptionPruneFalse (5.89s)
=== RUN   TestSyncOptionValidateFalse
time="2023-11-03T13:23:46Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=8b817
time="2023-11-03T13:23:46Z" level=debug msg="namespace \"argocd-e2e--test-sync-option-prune-false-tnbio\" deleted\n" duration=246.26965ms execID=8b817
time="2023-11-03T13:23:46Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=6dd0e
time="2023-11-03T13:23:46Z" level=debug msg="No resources found\n" duration=419.047215ms execID=6dd0e
time="2023-11-03T13:23:46Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=841a2
time="2023-11-03T13:23:47Z" level=debug msg="No resources found\n" duration=230.148181ms execID=841a2
time="2023-11-03T13:23:48Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:23:48Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIyOCwibmJmIjoxNjk5MDE3ODI4LCJpYXQiOjE2OTkwMTc4MjgsImp0aSI6ImZjMTU5OGNhLTMyNzYtNDQxNi05ODBjLTRhMTc5MTM2NzA4NiJ9.-12qwRNcbDJ3WD174QpU6wi6fBixwN32idmypXzj93A --insecure" dir= execID=14d76
time="2023-11-03T13:23:48Z" level=debug duration=113.908613ms execID=14d76
time="2023-11-03T13:23:48Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=344b7
time="2023-11-03T13:23:48Z" level=debug duration=2.019212ms execID=344b7
time="2023-11-03T13:23:48Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=387f5
time="2023-11-03T13:23:48Z" level=debug duration=1.63801ms execID=387f5
time="2023-11-03T13:23:48Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=66f75
time="2023-11-03T13:23:48Z" level=debug duration=2.077036ms execID=66f75
time="2023-11-03T13:23:48Z" level=info msg="pkill -9 gpg-agent" dir= execID=1be2a
time="2023-11-03T13:23:48Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=4f480
time="2023-11-03T13:23:48Z" level=debug duration=10.216918ms execID=4f480
time="2023-11-03T13:23:48Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=f2d2a
time="2023-11-03T13:23:48Z" level=debug duration=35.44649ms execID=f2d2a
time="2023-11-03T13:23:48Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=e6f24
time="2023-11-03T13:23:48Z" level=debug duration=12.202367ms execID=e6f24
time="2023-11-03T13:23:48Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=9be34
time="2023-11-03T13:23:48Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.153873ms execID=9be34
time="2023-11-03T13:23:48Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=d2212
time="2023-11-03T13:23:48Z" level=debug duration=27.962058ms execID=d2212
time="2023-11-03T13:23:48Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=e5e25
time="2023-11-03T13:23:48Z" level=debug duration=21.940024ms execID=e5e25
time="2023-11-03T13:23:48Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=2d515
time="2023-11-03T13:23:48Z" level=debug duration=2.28503ms execID=2d515
time="2023-11-03T13:23:48Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=19911
Handling connection for 9081
time="2023-11-03T13:23:48Z" level=debug duration=87.052343ms execID=19911
time="2023-11-03T13:23:48Z" level=info msg="kubectl create ns argocd-e2e--test-sync-option-validate-false-wqygg" dir= execID=41a9a
time="2023-11-03T13:23:48Z" level=debug msg="namespace/argocd-e2e--test-sync-option-validate-false-wqygg created\n" duration=115.810929ms execID=41a9a
time="2023-11-03T13:23:48Z" level=info msg="kubectl label ns argocd-e2e--test-sync-option-validate-false-wqygg e2e.argoproj.io=true" dir= execID=0012a
time="2023-11-03T13:23:48Z" level=debug msg="namespace/argocd-e2e--test-sync-option-validate-false-wqygg labeled\n" duration=270.392775ms execID=0012a
time="2023-11-03T13:23:48Z" level=info msg="clean state" duration=2.77360888s id=TestSyncOptionValidateFalse-wqygg name=TestSyncOptionValidateFalse password=password username=admin
time="2023-11-03T13:23:49Z" level=info msg="../../dist/argocd app create test-sync-option-validate-false --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path crd-validation --project default --dest-namespace argocd-e2e--test-sync-option-validate-false-wqygg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIyOCwibmJmIjoxNjk5MDE3ODI4LCJpYXQiOjE2OTkwMTc4MjgsImp0aSI6ImZjMTU5OGNhLTMyNzYtNDQxNi05ODBjLTRhMTc5MTM2NzA4NiJ9.-12qwRNcbDJ3WD174QpU6wi6fBixwN32idmypXzj93A --insecure" dir= execID=fc254
time="2023-11-03T13:23:50Z" level=debug msg="application 'test-sync-option-validate-false' created\n" duration=223.07223ms execID=fc254
time="2023-11-03T13:23:50Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:23:50Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:23:50Z" level=info msg="../../dist/argocd app sync test-sync-option-validate-false --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIyOCwibmJmIjoxNjk5MDE3ODI4LCJpYXQiOjE2OTkwMTc4MjgsImp0aSI6ImZjMTU5OGNhLTMyNzYtNDQxNi05ODBjLTRhMTc5MTM2NzA4NiJ9.-12qwRNcbDJ3WD174QpU6wi6fBixwN32idmypXzj93A --insecure" dir= execID=26742
time="2023-11-03T13:23:50Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                         NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:23:50+00:00   apps  Deployment  argocd-e2e--test-sync-option-validate-false-wqygg      nginx-deployment  OutOfSync  Missing              \n\nName:               argocd-e2e/test-sync-option-validate-false\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-sync-option-validate-false-wqygg\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-sync-option-validate-false\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               crd-validation\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (6fb7cf0)\nHealth Status:      Missing\n\nOperation:          Sync\nSync Revision:      6fb7cf06f0d5ad235c1c40293a8c2e54b9622104\nPhase:              Failed\nStart:              2023-11-03 13:23:50 +0000 UTC\nFinished:           2023-11-03 13:23:50 +0000 UTC\nDuration:           0s\nMessage:            one or more objects failed to apply, reason: Deployment in version \"v1\" cannot be handled as a Deployment: json: cannot unmarshal string into Go struct field ContainerPort.spec.template.spec.containers.ports.containerPort of type int32\n\nGROUP  KIND        NAMESPACE                                          NAME              STATUS     HEALTH   HOOK  MESSAGE\napps   Deployment  argocd-e2e--test-sync-option-validate-false-wqygg  nginx-deployment  OutOfSync  Missing        Deployment in version \"v1\" cannot be handled as a Deployment: json: cannot unmarshal string into Go struct field ContainerPort.spec.template.spec.containers.ports.containerPort of type int32\n" duration=641.143152ms execID=26742
time="2023-11-03T13:23:50Z" level=error msg="`../../dist/argocd app sync test-sync-option-validate-false --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIyOCwibmJmIjoxNjk5MDE3ODI4LCJpYXQiOjE2OTkwMTc4MjgsImp0aSI6ImZjMTU5OGNhLTMyNzYtNDQxNi05ODBjLTRhMTc5MTM2NzA4NiJ9.-12qwRNcbDJ3WD174QpU6wi6fBixwN32idmypXzj93A --insecure` failed exit status 1: time=\"2023-11-03T13:23:50Z\" level=fatal msg=\"Operation has completed with phase: Failed\"" execID=26742
    app_management_test.go:1494: failed expectation: output does not contain 'error validating data'
--- FAIL: TestSyncOptionValidateFalse (4.64s)
=== RUN   TestCompareOptionIgnoreExtraneous
time="2023-11-03T13:23:50Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=4033f
time="2023-11-03T13:23:51Z" level=debug msg="namespace \"argocd-e2e--test-sync-option-validate-false-wqygg\" deleted\n" duration=188.488381ms execID=4033f
time="2023-11-03T13:23:51Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=c0fcb
time="2023-11-03T13:23:51Z" level=debug msg="No resources found\n" duration=503.298297ms execID=c0fcb
time="2023-11-03T13:23:51Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=fe3c8
time="2023-11-03T13:23:51Z" level=debug msg="No resources found\n" duration=290.902266ms execID=fe3c8
time="2023-11-03T13:23:52Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:23:52Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIzMiwibmJmIjoxNjk5MDE3ODMyLCJpYXQiOjE2OTkwMTc4MzIsImp0aSI6IjZjMGIwNThmLTdhNzgtNGJiZS1iNzQzLTUzMjcyNWNiZTg4NSJ9.E36GUO0mDE8DtnU-dudGVeYfLkzS0z0ZL0fvNQmFFBU --insecure" dir= execID=33093
time="2023-11-03T13:23:52Z" level=debug duration=81.545717ms execID=33093
time="2023-11-03T13:23:52Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=94792
time="2023-11-03T13:23:52Z" level=debug duration=2.140515ms execID=94792
time="2023-11-03T13:23:52Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=31b4c
time="2023-11-03T13:23:52Z" level=debug duration=17.029682ms execID=31b4c
time="2023-11-03T13:23:52Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=4fa6d
time="2023-11-03T13:23:52Z" level=debug duration=1.635794ms execID=4fa6d
time="2023-11-03T13:23:52Z" level=info msg="pkill -9 gpg-agent" dir= execID=ae11b
time="2023-11-03T13:23:52Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=34d3d
time="2023-11-03T13:23:52Z" level=debug duration=9.830958ms execID=34d3d
time="2023-11-03T13:23:52Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=f26f3
time="2023-11-03T13:23:52Z" level=debug duration=37.616991ms execID=f26f3
time="2023-11-03T13:23:52Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=31e7b
time="2023-11-03T13:23:52Z" level=debug duration=1.907466ms execID=31e7b
time="2023-11-03T13:23:52Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=a769b
time="2023-11-03T13:23:52Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.127137ms execID=a769b
time="2023-11-03T13:23:52Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=d9627
time="2023-11-03T13:23:52Z" level=debug duration=26.664191ms execID=d9627
time="2023-11-03T13:23:52Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=bf211
time="2023-11-03T13:23:52Z" level=debug duration=28.543845ms execID=bf211
time="2023-11-03T13:23:52Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=425bf
time="2023-11-03T13:23:52Z" level=debug duration=2.198986ms execID=425bf
time="2023-11-03T13:23:52Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=33b5e
Handling connection for 9081
time="2023-11-03T13:23:52Z" level=debug duration=116.024054ms execID=33b5e
time="2023-11-03T13:23:52Z" level=info msg="kubectl create ns argocd-e2e--test-compare-option-ignore-extraneous-ferhy" dir= execID=45a26
time="2023-11-03T13:23:53Z" level=debug msg="namespace/argocd-e2e--test-compare-option-ignore-extraneous-ferhy created\n" duration=122.409824ms execID=45a26
time="2023-11-03T13:23:53Z" level=info msg="kubectl label ns argocd-e2e--test-compare-option-ignore-extraneous-ferhy e2e.argoproj.io=true" dir= execID=4a6d8
time="2023-11-03T13:23:53Z" level=debug msg="namespace/argocd-e2e--test-compare-option-ignore-extraneous-ferhy labeled\n" duration=346.296791ms execID=4a6d8
time="2023-11-03T13:23:53Z" level=info msg="clean state" duration=2.604211629s id=TestCompareOptionIgnoreExtraneous-ferhy name=TestCompareOptionIgnoreExtraneous password=password username=admin
time="2023-11-03T13:23:54Z" level=info msg=patching jsonPatch="[{\"op\": \"add\", \"path\": \"/metadata/annotations\", \"value\": {\"argocd.argoproj.io/compare-options\": \"IgnoreExtraneous\"}}]" path=two-nice-pods/pod-1.yaml
time="2023-11-03T13:23:54Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:23:54Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"name\":\"pod-1\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:23:54Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:23:54Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=48a93
time="2023-11-03T13:23:54Z" level=debug msg="diff --git a/two-nice-pods/pod-1.yaml b/two-nice-pods/pod-1.yaml\nindex 95187dd..f7dbeb0 100644\n--- a/two-nice-pods/pod-1.yaml\n+++ b/two-nice-pods/pod-1.yaml\n@@ -1,12 +1,14 @@\n apiVersion: v1\n kind: Pod\n metadata:\n+  annotations:\n+    argocd.argoproj.io/compare-options: IgnoreExtraneous\n   name: pod-1\n spec:\n   containers:\n-    - name: main\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      command:\n-        - \"true\"\n+  - command:\n+    - \"true\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n   restartPolicy: Never\n" duration=4.975291ms execID=48a93
time="2023-11-03T13:23:54Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=c95cd
time="2023-11-03T13:23:54Z" level=debug msg="[master 21997ab] patch\n 1 file changed, 7 insertions(+), 5 deletions(-)\n" duration=12.148168ms execID=c95cd
time="2023-11-03T13:23:54Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=85676
Handling connection for 9081
time="2023-11-03T13:23:54Z" level=debug duration=40.953553ms execID=85676
time="2023-11-03T13:23:54Z" level=info msg="../../dist/argocd app create test-compare-option-ignore-extraneous --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path two-nice-pods --project default --dest-namespace argocd-e2e--test-compare-option-ignore-extraneous-ferhy --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIzMiwibmJmIjoxNjk5MDE3ODMyLCJpYXQiOjE2OTkwMTc4MzIsImp0aSI6IjZjMGIwNThmLTdhNzgtNGJiZS1iNzQzLTUzMjcyNWNiZTg4NSJ9.E36GUO0mDE8DtnU-dudGVeYfLkzS0z0ZL0fvNQmFFBU --insecure" dir= execID=757ac
time="2023-11-03T13:23:54Z" level=debug msg="application 'test-compare-option-ignore-extraneous' created\n" duration=234.881856ms execID=757ac
time="2023-11-03T13:23:54Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:23:54Z" level=info msg="../../dist/argocd app sync test-compare-option-ignore-extraneous --timeout 30 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIzMiwibmJmIjoxNjk5MDE3ODMyLCJpYXQiOjE2OTkwMTc4MzIsImp0aSI6IjZjMGIwNThmLTdhNzgtNGJiZS1iNzQzLTUzMjcyNWNiZTg4NSJ9.E36GUO0mDE8DtnU-dudGVeYfLkzS0z0ZL0fvNQmFFBU --insecure" dir= execID=e0e2c
time="2023-11-03T13:23:55Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                               NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:23:54+00:00                Pod  argocd-e2e--test-compare-option-ignore-extraneous-ferhy                 pod-1  OutOfSync  Missing              \n2023-11-03T13:23:54+00:00                Pod  argocd-e2e--test-compare-option-ignore-extraneous-ferhy                 pod-2  OutOfSync  Missing              \n2023-11-03T13:23:55+00:00                Pod  argocd-e2e--test-compare-option-ignore-extraneous-ferhy                 pod-1  OutOfSync  Missing              pod/pod-1 created\n2023-11-03T13:23:55+00:00                Pod  argocd-e2e--test-compare-option-ignore-extraneous-ferhy                 pod-2  OutOfSync  Missing              pod/pod-2 created\n2023-11-03T13:23:55+00:00                Pod  argocd-e2e--test-compare-option-ignore-extraneous-ferhy                 pod-1    Synced  Progressing              pod/pod-1 created\n2023-11-03T13:23:55+00:00                Pod  argocd-e2e--test-compare-option-ignore-extraneous-ferhy                 pod-2    Synced  Progressing              pod/pod-2 created\n\nName:               argocd-e2e/test-compare-option-ignore-extraneous\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-compare-option-ignore-extraneous-ferhy\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-compare-option-ignore-extraneous\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               two-nice-pods\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (21997ab)\nHealth Status:      Progressing\n\nOperation:          Sync\nSync Revision:      21997aba74751fcd62f40cbfe90e7a42ce769c28\nPhase:              Succeeded\nStart:              2023-11-03 13:23:54 +0000 UTC\nFinished:           2023-11-03 13:23:55 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND  NAMESPACE                                                NAME   STATUS  HEALTH       HOOK  MESSAGE\n       Pod   argocd-e2e--test-compare-option-ignore-extraneous-ferhy  pod-1  Synced  Progressing        pod/pod-1 created\n       Pod   argocd-e2e--test-compare-option-ignore-extraneous-ferhy  pod-2  Synced  Progressing        pod/pod-2 created\n" duration=653.826007ms execID=e0e2c
time="2023-11-03T13:23:55Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:23:55Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:23:55Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:23:55Z" level=info msg=deleting path=two-nice-pods/pod-1.yaml
time="2023-11-03T13:23:55Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=e38b2
time="2023-11-03T13:23:55Z" level=debug msg="diff --git a/two-nice-pods/pod-1.yaml b/two-nice-pods/pod-1.yaml\ndeleted file mode 100644\nindex f7dbeb0..0000000\n--- a/two-nice-pods/pod-1.yaml\n+++ /dev/null\n@@ -1,14 +0,0 @@\n-apiVersion: v1\n-kind: Pod\n-metadata:\n-  annotations:\n-    argocd.argoproj.io/compare-options: IgnoreExtraneous\n-  name: pod-1\n-spec:\n-  containers:\n-  - command:\n-    - \"true\"\n-    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-    imagePullPolicy: IfNotPresent\n-    name: main\n-  restartPolicy: Never\n" duration=3.413402ms execID=e38b2
time="2023-11-03T13:23:55Z" level=info msg="git commit -am delete" dir=/tmp/argo-e2e/testdata.git execID=2a216
time="2023-11-03T13:23:55Z" level=debug msg="[master ad576ce] delete\n 1 file changed, 14 deletions(-)\n delete mode 100644 two-nice-pods/pod-1.yaml\n" duration=7.698235ms execID=2a216
time="2023-11-03T13:23:55Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=e968e
Handling connection for 9081
time="2023-11-03T13:23:55Z" level=debug duration=42.974682ms execID=e968e
time="2023-11-03T13:23:55Z" level=info msg="../../dist/argocd app get test-compare-option-ignore-extraneous --hard-refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIzMiwibmJmIjoxNjk5MDE3ODMyLCJpYXQiOjE2OTkwMTc4MzIsImp0aSI6IjZjMGIwNThmLTdhNzgtNGJiZS1iNzQzLTUzMjcyNWNiZTg4NSJ9.E36GUO0mDE8DtnU-dudGVeYfLkzS0z0ZL0fvNQmFFBU --insecure" dir= execID=d9b6f
time="2023-11-03T13:23:55Z" level=debug msg="Name:               argocd-e2e/test-compare-option-ignore-extraneous\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-compare-option-ignore-extraneous-ferhy\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-compare-option-ignore-extraneous\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               two-nice-pods\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (ad576ce)\nHealth Status:      Progressing\n\nGROUP  KIND  NAMESPACE                                                NAME   STATUS     HEALTH       HOOK  MESSAGE\n       Pod   argocd-e2e--test-compare-option-ignore-extraneous-ferhy  pod-1  OutOfSync  Progressing        pod/pod-1 created\n       Pod   argocd-e2e--test-compare-option-ignore-extraneous-ferhy  pod-2  Synced     Progressing        pod/pod-2 created\n" duration=278.5506ms execID=d9b6f
time="2023-11-03T13:23:55Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:23:55Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:23:55Z" level=info msg="../../dist/argocd app sync test-compare-option-ignore-extraneous --timeout 30 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIzMiwibmJmIjoxNjk5MDE3ODMyLCJpYXQiOjE2OTkwMTc4MzIsImp0aSI6IjZjMGIwNThmLTdhNzgtNGJiZS1iNzQzLTUzMjcyNWNiZTg4NSJ9.E36GUO0mDE8DtnU-dudGVeYfLkzS0z0ZL0fvNQmFFBU --insecure" dir= execID=366fb
time="2023-11-03T13:23:56Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                               NAME    STATUS    HEALTH            HOOK  MESSAGE\n2023-11-03T13:23:55+00:00                Pod  argocd-e2e--test-compare-option-ignore-extraneous-ferhy                 pod-1  OutOfSync  Progressing              \n2023-11-03T13:23:55+00:00                Pod  argocd-e2e--test-compare-option-ignore-extraneous-ferhy                 pod-2    Synced   Progressing              \n2023-11-03T13:23:56+00:00                Pod  argocd-e2e--test-compare-option-ignore-extraneous-ferhy                 pod-1  OutOfSync  Progressing              ignored (requires pruning)\n2023-11-03T13:23:56+00:00                Pod  argocd-e2e--test-compare-option-ignore-extraneous-ferhy                 pod-2    Synced   Progressing              pod/pod-2 unchanged\n\nName:               argocd-e2e/test-compare-option-ignore-extraneous\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-compare-option-ignore-extraneous-ferhy\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-compare-option-ignore-extraneous\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               two-nice-pods\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (ad576ce)\nHealth Status:      Progressing\n\nOperation:          Sync\nSync Revision:      ad576ce7e58262c134898c96c4413d13f74592dd\nPhase:              Succeeded\nStart:              2023-11-03 13:23:55 +0000 UTC\nFinished:           2023-11-03 13:23:56 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND  NAMESPACE                                                NAME   STATUS     HEALTH       HOOK  MESSAGE\n       Pod   argocd-e2e--test-compare-option-ignore-extraneous-ferhy  pod-1  OutOfSync  Progressing        ignored (requires pruning)\n       Pod   argocd-e2e--test-compare-option-ignore-extraneous-ferhy  pod-2  Synced     Progressing        pod/pod-2 unchanged\n" duration=641.533369ms execID=366fb
time="2023-11-03T13:23:56Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:23:56Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:23:56Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:23:56Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCompareOptionIgnoreExtraneous (5.56s)
=== RUN   TestSelfManagedApps
time="2023-11-03T13:23:56Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=95f9c
time="2023-11-03T13:23:56Z" level=debug msg="namespace \"argocd-e2e--test-compare-option-ignore-extraneous-ferhy\" deleted\n" duration=323.634453ms execID=95f9c
time="2023-11-03T13:23:56Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=8e5e3
time="2023-11-03T13:23:57Z" level=debug msg="No resources found\n" duration=372.300076ms execID=8e5e3
time="2023-11-03T13:23:57Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=36856
time="2023-11-03T13:23:57Z" level=debug msg="No resources found\n" duration=214.915128ms execID=36856
time="2023-11-03T13:23:58Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:23:58Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIzOCwibmJmIjoxNjk5MDE3ODM4LCJpYXQiOjE2OTkwMTc4MzgsImp0aSI6IjFjOTE1NWU0LTAyOGYtNDJiOS1hYjQ5LTYyZmFmOWNhMmU5OCJ9.gX0e3nF1lFO6KE8mq0CmyRp0NUSEbSwahClBjRfk2-A --insecure" dir= execID=62ed0
time="2023-11-03T13:23:58Z" level=debug duration=135.937422ms execID=62ed0
time="2023-11-03T13:23:58Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=5875c
time="2023-11-03T13:23:58Z" level=debug duration=2.044748ms execID=5875c
time="2023-11-03T13:23:58Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=eb116
time="2023-11-03T13:23:58Z" level=debug duration=1.60565ms execID=eb116
time="2023-11-03T13:23:58Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=c76db
time="2023-11-03T13:23:58Z" level=debug duration=1.645564ms execID=c76db
time="2023-11-03T13:23:58Z" level=info msg="pkill -9 gpg-agent" dir= execID=fffae
time="2023-11-03T13:23:58Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=173d0
time="2023-11-03T13:23:58Z" level=debug duration=9.925591ms execID=173d0
time="2023-11-03T13:23:58Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=d98f8
time="2023-11-03T13:23:58Z" level=debug duration=35.278178ms execID=d98f8
time="2023-11-03T13:23:58Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=b4af9
time="2023-11-03T13:23:58Z" level=debug duration=2.184427ms execID=b4af9
time="2023-11-03T13:23:58Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=44c0b
time="2023-11-03T13:23:58Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.164672ms execID=44c0b
time="2023-11-03T13:23:58Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=2147a
time="2023-11-03T13:23:58Z" level=debug duration=31.258488ms execID=2147a
time="2023-11-03T13:23:58Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=b50d4
time="2023-11-03T13:23:58Z" level=debug duration=22.725613ms execID=b50d4
time="2023-11-03T13:23:58Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=4aab6
time="2023-11-03T13:23:58Z" level=debug duration=2.743233ms execID=4aab6
time="2023-11-03T13:23:58Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=00f59
Handling connection for 9081
time="2023-11-03T13:23:58Z" level=debug duration=93.196639ms execID=00f59
time="2023-11-03T13:23:58Z" level=info msg="kubectl create ns argocd-e2e--test-self-managed-apps-lpxid" dir= execID=64471
time="2023-11-03T13:23:58Z" level=debug msg="namespace/argocd-e2e--test-self-managed-apps-lpxid created\n" duration=110.509547ms execID=64471
time="2023-11-03T13:23:58Z" level=info msg="kubectl label ns argocd-e2e--test-self-managed-apps-lpxid e2e.argoproj.io=true" dir= execID=857ef
time="2023-11-03T13:23:59Z" level=debug msg="namespace/argocd-e2e--test-self-managed-apps-lpxid labeled\n" duration=275.330205ms execID=857ef
time="2023-11-03T13:23:59Z" level=info msg="clean state" duration=2.768584731s id=TestSelfManagedApps-lpxid name=TestSelfManagedApps password=password username=admin
time="2023-11-03T13:24:00Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/spec/source/repoURL\", \"value\": \"http://argocd-e2e-server:9081/argo-e2e/testdata.git\"}]" path=self-managed-app/resources.yaml
time="2023-11-03T13:24:00Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:24:00Z" level=info msg=JSON bytes="{\"apiVersion\":\"argoproj.io/v1alpha1\",\"kind\":\"Application\",\"metadata\":{\"name\":\"test-self-managed-apps\"},\"spec\":{\"destination\":{\"namespace\":\"argocd-e2e\",\"server\":\"https://kubernetes.default.svc\"},\"project\":\"default\",\"source\":{\"path\":\"self-managed-app\",\"repoURL\":\"https://github.com/argoproj/argo-cd.git\",\"targetRevision\":\"HEAD\"}}}"
time="2023-11-03T13:24:00Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:24:00Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=e70e7
time="2023-11-03T13:24:00Z" level=debug msg="diff --git a/self-managed-app/resources.yaml b/self-managed-app/resources.yaml\nindex baaf0d6..f20f82d 100644\n--- a/self-managed-app/resources.yaml\n+++ b/self-managed-app/resources.yaml\n@@ -3,13 +3,11 @@ kind: Application\n metadata:\n   name: test-self-managed-apps\n spec:\n+  destination:\n+    namespace: argocd-e2e\n+    server: https://kubernetes.default.svc\n   project: default\n-\n   source:\n-    repoURL: https://github.com/argoproj/argo-cd.git\n-    targetRevision: HEAD\n     path: self-managed-app\n-\n-  destination:\n-    server: https://kubernetes.default.svc\n-    namespace: argocd-e2e\n+    repoURL: http://argocd-e2e-server:9081/argo-e2e/testdata.git\n+    targetRevision: HEAD\n" duration=5.043253ms execID=e70e7
time="2023-11-03T13:24:00Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=2e9f5
time="2023-11-03T13:24:00Z" level=debug msg="[master fcfa53c] patch\n 1 file changed, 5 insertions(+), 7 deletions(-)\n" duration=12.263205ms execID=2e9f5
time="2023-11-03T13:24:00Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=25f0c
Handling connection for 9081
time="2023-11-03T13:24:00Z" level=debug duration=40.058448ms execID=25f0c
time="2023-11-03T13:24:00Z" level=info msg="../../dist/argocd app create test-self-managed-apps --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path self-managed-app --project default --dest-namespace argocd-e2e--test-self-managed-apps-lpxid --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIzOCwibmJmIjoxNjk5MDE3ODM4LCJpYXQiOjE2OTkwMTc4MzgsImp0aSI6IjFjOTE1NWU0LTAyOGYtNDJiOS1hYjQ5LTYyZmFmOWNhMmU5OCJ9.gX0e3nF1lFO6KE8mq0CmyRp0NUSEbSwahClBjRfk2-A --insecure" dir= execID=4fdd6
time="2023-11-03T13:24:00Z" level=debug msg="application 'test-self-managed-apps' created\n" duration=213.065239ms execID=4fdd6
time="2023-11-03T13:24:00Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:24:00Z" level=info msg="../../dist/argocd app sync test-self-managed-apps --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDIzOCwibmJmIjoxNjk5MDE3ODM4LCJpYXQiOjE2OTkwMTc4MzgsImp0aSI6IjFjOTE1NWU0LTAyOGYtNDJiOS1hYjQ5LTYyZmFmOWNhMmU5OCJ9.gX0e3nF1lFO6KE8mq0CmyRp0NUSEbSwahClBjRfk2-A --insecure" dir= execID=5a7bd
time="2023-11-03T13:24:01Z" level=debug msg="TIMESTAMP                  GROUP              KIND    NAMESPACE                                                NAME      STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:24:00+00:00  argoproj.io  Application  argocd-e2e--test-self-managed-apps-lpxid  test-self-managed-apps  OutOfSync  Missing              \n\nName:               argocd-e2e/test-self-managed-apps\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-self-managed-apps-lpxid\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-self-managed-apps\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               self-managed-app\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (fcfa53c)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      fcfa53cf0403a91621fb0d9902283323d27994a9\nPhase:              Succeeded\nStart:              2023-11-03 13:24:00 +0000 UTC\nFinished:           2023-11-03 13:24:00 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP        KIND         NAMESPACE                                 NAME                    STATUS  HEALTH  HOOK  MESSAGE\nargoproj.io  Application  argocd-e2e--test-self-managed-apps-lpxid  test-self-managed-apps  Synced                application.argoproj.io/test-self-managed-apps created\n" duration=613.061245ms execID=5a7bd
time="2023-11-03T13:24:01Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:24:01Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:24:01Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:24:04Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestSelfManagedApps (7.67s)
=== RUN   TestExcludedResource
time="2023-11-03T13:24:04Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=e1b52
time="2023-11-03T13:24:04Z" level=debug msg="namespace \"argocd-e2e--test-self-managed-apps-lpxid\" deleted\n" duration=230.219445ms execID=e1b52
time="2023-11-03T13:24:04Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=ec01b
time="2023-11-03T13:24:04Z" level=debug msg="No resources found\n" duration=428.991873ms execID=ec01b
time="2023-11-03T13:24:04Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=1ef37
time="2023-11-03T13:24:05Z" level=debug msg="No resources found\n" duration=300.546745ms execID=1ef37
time="2023-11-03T13:24:06Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:24:06Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDI0NiwibmJmIjoxNjk5MDE3ODQ2LCJpYXQiOjE2OTkwMTc4NDYsImp0aSI6Ijg0Njg4OWEwLTZiYjctNGU5ZS05Y2UzLTk0OGZiNzM3Y2I5ZiJ9.6LrRAjvgEA5ifocFaQYnYhQVoPn1v0YBPy2iMdbT3oA --insecure" dir= execID=1afee
time="2023-11-03T13:24:06Z" level=debug duration=89.577224ms execID=1afee
time="2023-11-03T13:24:06Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=976a5
time="2023-11-03T13:24:06Z" level=debug duration=2.045304ms execID=976a5
time="2023-11-03T13:24:06Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=eb3a3
time="2023-11-03T13:24:06Z" level=debug duration=1.474411ms execID=eb3a3
time="2023-11-03T13:24:06Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=59306
time="2023-11-03T13:24:06Z" level=debug duration=1.637489ms execID=59306
time="2023-11-03T13:24:06Z" level=info msg="pkill -9 gpg-agent" dir= execID=b887c
time="2023-11-03T13:24:06Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=3afad
time="2023-11-03T13:24:06Z" level=debug duration=10.123101ms execID=3afad
time="2023-11-03T13:24:06Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=3cb6d
time="2023-11-03T13:24:06Z" level=debug duration=46.549515ms execID=3cb6d
time="2023-11-03T13:24:06Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=b234b
time="2023-11-03T13:24:06Z" level=debug duration=2.243754ms execID=b234b
time="2023-11-03T13:24:06Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=d93bc
time="2023-11-03T13:24:06Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.039197ms execID=d93bc
time="2023-11-03T13:24:06Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=ff326
time="2023-11-03T13:24:06Z" level=debug duration=28.769778ms execID=ff326
time="2023-11-03T13:24:06Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=23908
time="2023-11-03T13:24:06Z" level=debug duration=23.62473ms execID=23908
time="2023-11-03T13:24:06Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=81bee
time="2023-11-03T13:24:06Z" level=debug duration=2.210754ms execID=81bee
time="2023-11-03T13:24:06Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=1a13f
Handling connection for 9081
time="2023-11-03T13:24:06Z" level=debug duration=78.887352ms execID=1a13f
time="2023-11-03T13:24:06Z" level=info msg="kubectl create ns argocd-e2e--test-excluded-resource-uywkq" dir= execID=4c41d
time="2023-11-03T13:24:06Z" level=debug msg="namespace/argocd-e2e--test-excluded-resource-uywkq created\n" duration=140.194ms execID=4c41d
time="2023-11-03T13:24:06Z" level=info msg="kubectl label ns argocd-e2e--test-excluded-resource-uywkq e2e.argoproj.io=true" dir= execID=72ce8
time="2023-11-03T13:24:06Z" level=debug msg="namespace/argocd-e2e--test-excluded-resource-uywkq labeled\n" duration=300.867848ms execID=72ce8
time="2023-11-03T13:24:06Z" level=info msg="clean state" duration=2.88027812s id=TestExcludedResource-uywkq name=TestExcludedResource password=password username=admin
time="2023-11-03T13:24:07Z" level=info msg="../../dist/argocd app create test-excluded-resource --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-excluded-resource-uywkq --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDI0NiwibmJmIjoxNjk5MDE3ODQ2LCJpYXQiOjE2OTkwMTc4NDYsImp0aSI6Ijg0Njg4OWEwLTZiYjctNGU5ZS05Y2UzLTk0OGZiNzM3Y2I5ZiJ9.6LrRAjvgEA5ifocFaQYnYhQVoPn1v0YBPy2iMdbT3oA --insecure" dir= execID=6628b
time="2023-11-03T13:24:08Z" level=debug msg="application 'test-excluded-resource' created\n" duration=227.104353ms execID=6628b
time="2023-11-03T13:24:08Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:24:08Z" level=info msg="../../dist/argocd app sync test-excluded-resource --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDI0NiwibmJmIjoxNjk5MDE3ODQ2LCJpYXQiOjE2OTkwMTc4NDYsImp0aSI6Ijg0Njg4OWEwLTZiYjctNGU5ZS05Y2UzLTk0OGZiNzM3Y2I5ZiJ9.6LrRAjvgEA5ifocFaQYnYhQVoPn1v0YBPy2iMdbT3oA --insecure" dir= execID=29ddd
time="2023-11-03T13:24:13Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:24:12+00:00            Service  argocd-e2e--test-excluded-resource-uywkq          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:24:12+00:00            Service  argocd-e2e--test-excluded-resource-uywkq          guestbook-ui  OutOfSync  Missing              service/guestbook-ui created\n2023-11-03T13:24:12+00:00            Service  argocd-e2e--test-excluded-resource-uywkq          guestbook-ui    Synced  Healthy              service/guestbook-ui created\n\nName:               argocd-e2e/test-excluded-resource\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-excluded-resource-uywkq\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-excluded-resource\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (24f7e35)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      24f7e35525bc59638198050d200158dca0b53bad\nPhase:              Succeeded\nStart:              2023-11-03 13:24:08 +0000 UTC\nFinished:           2023-11-03 13:24:12 +0000 UTC\nDuration:           4s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND     NAMESPACE                                 NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service  argocd-e2e--test-excluded-resource-uywkq  guestbook-ui  Synced  Healthy        service/guestbook-ui created\n" duration=4.877530477s execID=29ddd
time="2023-11-03T13:24:13Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:24:13Z" level=info msg="../../dist/argocd app get test-excluded-resource --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDI0NiwibmJmIjoxNjk5MDE3ODQ2LCJpYXQiOjE2OTkwMTc4NDYsImp0aSI6Ijg0Njg4OWEwLTZiYjctNGU5ZS05Y2UzLTk0OGZiNzM3Y2I5ZiJ9.6LrRAjvgEA5ifocFaQYnYhQVoPn1v0YBPy2iMdbT3oA --insecure" dir= execID=5cfad
time="2023-11-03T13:24:13Z" level=debug msg="Name:               argocd-e2e/test-excluded-resource\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-excluded-resource-uywkq\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-excluded-resource\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (24f7e35)\nHealth Status:      Healthy\n\nCONDITION                MESSAGE                                                            LAST TRANSITION\nExcludedResourceWarning  Resource apps/Deployment guestbook-ui is excluded in the settings  2023-11-03 13:24:08 +0000 UTC\n\n\nGROUP  KIND     NAMESPACE                                 NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service  argocd-e2e--test-excluded-resource-uywkq  guestbook-ui  Synced  Healthy        service/guestbook-ui created\n" duration=180.290787ms execID=5cfad
time="2023-11-03T13:24:13Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:24:13Z" level=info msg="expectation succeeded: condition {ExcludedResourceWarning Resource apps/Deployment guestbook-ui is excluded in the settings} in [{ExcludedResourceWarning Resource apps/Deployment guestbook-ui is excluded in the settings 2023-11-03 13:24:08 +0000 UTC}]"
time="2023-11-03T13:24:13Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestExcludedResource (9.20s)
=== RUN   TestRevisionHistoryLimit
time="2023-11-03T13:24:13Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=a259b
time="2023-11-03T13:24:13Z" level=debug msg="namespace \"argocd-e2e--test-excluded-resource-uywkq\" deleted\n" duration=212.202771ms execID=a259b
time="2023-11-03T13:24:13Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=d50e5
time="2023-11-03T13:24:13Z" level=debug msg="No resources found\n" duration=379.964145ms execID=d50e5
time="2023-11-03T13:24:13Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=00fb8
time="2023-11-03T13:24:14Z" level=debug msg="No resources found\n" duration=319.464975ms execID=00fb8
time="2023-11-03T13:24:15Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:24:15Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDI1NSwibmJmIjoxNjk5MDE3ODU1LCJpYXQiOjE2OTkwMTc4NTUsImp0aSI6IjhmY2ZhMTQ3LTYxNzYtNDg0NS04ZDhhLWJiMTYwOWM1ODZiNSJ9.VoXBBG19MT6ETTA-47HqZiBSVlx-nStym_NOVrcQEPc --insecure" dir= execID=41f82
time="2023-11-03T13:24:15Z" level=debug duration=73.409027ms execID=41f82
time="2023-11-03T13:24:15Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=68890
time="2023-11-03T13:24:15Z" level=debug duration=1.95786ms execID=68890
time="2023-11-03T13:24:15Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=e2db0
time="2023-11-03T13:24:15Z" level=debug duration=1.542627ms execID=e2db0
time="2023-11-03T13:24:15Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=f36b8
time="2023-11-03T13:24:15Z" level=debug duration=2.135734ms execID=f36b8
time="2023-11-03T13:24:15Z" level=info msg="pkill -9 gpg-agent" dir= execID=4f33f
time="2023-11-03T13:24:15Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=a8218
time="2023-11-03T13:24:15Z" level=debug duration=10.234277ms execID=a8218
time="2023-11-03T13:24:15Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=49086
time="2023-11-03T13:24:15Z" level=debug duration=35.694095ms execID=49086
time="2023-11-03T13:24:15Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=57d01
time="2023-11-03T13:24:15Z" level=debug duration=1.947302ms execID=57d01
time="2023-11-03T13:24:15Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=5565b
time="2023-11-03T13:24:15Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.031053ms execID=5565b
time="2023-11-03T13:24:15Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=b05ba
time="2023-11-03T13:24:15Z" level=debug duration=35.579124ms execID=b05ba
time="2023-11-03T13:24:15Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=0d0ea
time="2023-11-03T13:24:15Z" level=debug duration=23.760324ms execID=0d0ea
time="2023-11-03T13:24:15Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=346e9
time="2023-11-03T13:24:15Z" level=debug duration=2.79187ms execID=346e9
time="2023-11-03T13:24:15Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=e9f08
Handling connection for 9081
time="2023-11-03T13:24:15Z" level=debug duration=63.026264ms execID=e9f08
time="2023-11-03T13:24:15Z" level=info msg="kubectl create ns argocd-e2e--test-revision-history-limit-qreoe" dir= execID=a4bf7
time="2023-11-03T13:24:15Z" level=debug msg="namespace/argocd-e2e--test-revision-history-limit-qreoe created\n" duration=160.672575ms execID=a4bf7
time="2023-11-03T13:24:15Z" level=info msg="kubectl label ns argocd-e2e--test-revision-history-limit-qreoe e2e.argoproj.io=true" dir= execID=0e4ba
time="2023-11-03T13:24:15Z" level=debug msg="namespace/argocd-e2e--test-revision-history-limit-qreoe labeled\n" duration=282.669716ms execID=0e4ba
time="2023-11-03T13:24:15Z" level=info msg="clean state" duration=2.611138384s id=TestRevisionHistoryLimit-qreoe name=TestRevisionHistoryLimit password=password username=admin
time="2023-11-03T13:24:16Z" level=info msg="../../dist/argocd app create test-revision-history-limit --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path config-map --project default --dest-namespace argocd-e2e--test-revision-history-limit-qreoe --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDI1NSwibmJmIjoxNjk5MDE3ODU1LCJpYXQiOjE2OTkwMTc4NTUsImp0aSI6IjhmY2ZhMTQ3LTYxNzYtNDg0NS04ZDhhLWJiMTYwOWM1ODZiNSJ9.VoXBBG19MT6ETTA-47HqZiBSVlx-nStym_NOVrcQEPc --insecure" dir= execID=64a89
time="2023-11-03T13:24:17Z" level=debug msg="application 'test-revision-history-limit' created\n" duration=241.61313ms execID=64a89
time="2023-11-03T13:24:17Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:24:17Z" level=info msg="../../dist/argocd app sync test-revision-history-limit --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDI1NSwibmJmIjoxNjk5MDE3ODU1LCJpYXQiOjE2OTkwMTc4NTUsImp0aSI6IjhmY2ZhMTQ3LTYxNzYtNDg0NS04ZDhhLWJiMTYwOWM1ODZiNSJ9.VoXBBG19MT6ETTA-47HqZiBSVlx-nStym_NOVrcQEPc --insecure" dir= execID=a3758
time="2023-11-03T13:24:22Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:24:22+00:00          ConfigMap  argocd-e2e--test-revision-history-limit-qreoe                my-map  OutOfSync  Missing              \n\nName:               argocd-e2e/test-revision-history-limit\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-revision-history-limit-qreoe\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-revision-history-limit\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               config-map\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (dde4359)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      dde43597dfe01032df027f37f9131a41ac583a39\nPhase:              Succeeded\nStart:              2023-11-03 13:24:17 +0000 UTC\nFinished:           2023-11-03 13:24:22 +0000 UTC\nDuration:           5s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                      NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-revision-history-limit-qreoe  my-map  Synced                configmap/my-map created\n" duration=5.492935067s execID=a3758
time="2023-11-03T13:24:22Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:24:22Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:24:22Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:24:22Z" level=info msg="../../dist/argocd app set test-revision-history-limit --revision-history-limit 1 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDI1NSwibmJmIjoxNjk5MDE3ODU1LCJpYXQiOjE2OTkwMTc4NTUsImp0aSI6IjhmY2ZhMTQ3LTYxNzYtNDg0NS04ZDhhLWJiMTYwOWM1ODZiNSJ9.VoXBBG19MT6ETTA-47HqZiBSVlx-nStym_NOVrcQEPc --insecure" dir= execID=d6803
time="2023-11-03T13:24:22Z" level=debug duration=136.051862ms execID=d6803
time="2023-11-03T13:24:22Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:24:22Z" level=info msg="../../dist/argocd app sync test-revision-history-limit --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDI1NSwibmJmIjoxNjk5MDE3ODU1LCJpYXQiOjE2OTkwMTc4NTUsImp0aSI6IjhmY2ZhMTQ3LTYxNzYtNDg0NS04ZDhhLWJiMTYwOWM1ODZiNSJ9.VoXBBG19MT6ETTA-47HqZiBSVlx-nStym_NOVrcQEPc --insecure" dir= execID=6c651
time="2023-11-03T13:24:23Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                     NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:24:22+00:00          ConfigMap  argocd-e2e--test-revision-history-limit-qreoe                my-map    Synced                       \n2023-11-03T13:24:23+00:00          ConfigMap  argocd-e2e--test-revision-history-limit-qreoe                my-map    Synced                       configmap/my-map unchanged\n\nName:               argocd-e2e/test-revision-history-limit\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-revision-history-limit-qreoe\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-revision-history-limit\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               config-map\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (dde4359)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      dde43597dfe01032df027f37f9131a41ac583a39\nPhase:              Succeeded\nStart:              2023-11-03 13:24:22 +0000 UTC\nFinished:           2023-11-03 13:24:23 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                      NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-revision-history-limit-qreoe  my-map  Synced                configmap/my-map unchanged\n" duration=635.905506ms execID=6c651
time="2023-11-03T13:24:23Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:24:23Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:24:23Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:24:23Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestRevisionHistoryLimit (10.15s)
=== RUN   TestOrphanedResource
    fixture.go:901: 
--- SKIP: TestOrphanedResource (0.00s)
=== RUN   TestNotPermittedResources
time="2023-11-03T13:24:23Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=bd96d
time="2023-11-03T13:24:23Z" level=debug msg="namespace \"argocd-e2e--test-revision-history-limit-qreoe\" deleted\n" duration=285.26804ms execID=bd96d
time="2023-11-03T13:24:23Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=364ee
time="2023-11-03T13:24:24Z" level=debug msg="No resources found\n" duration=500.769064ms execID=364ee
time="2023-11-03T13:24:24Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=1a77c
time="2023-11-03T13:24:24Z" level=debug msg="No resources found\n" duration=213.976587ms execID=1a77c
time="2023-11-03T13:24:25Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:24:25Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDI2NSwibmJmIjoxNjk5MDE3ODY1LCJpYXQiOjE2OTkwMTc4NjUsImp0aSI6Ijg4Zjk0ZmI4LTQ2MjktNDYwZi05OGU0LWM4NTU3ODE1ODIzNCJ9.jCJfv6GaxrTNBf84DFQOmI11COz5ApfiR4T8nsjvv3o --insecure" dir= execID=8dd7c
time="2023-11-03T13:24:25Z" level=debug duration=84.077369ms execID=8dd7c
time="2023-11-03T13:24:25Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=ff7e8
time="2023-11-03T13:24:25Z" level=debug duration=2.049123ms execID=ff7e8
time="2023-11-03T13:24:25Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=46375
time="2023-11-03T13:24:25Z" level=debug duration=1.464606ms execID=46375
time="2023-11-03T13:24:25Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=b9d04
time="2023-11-03T13:24:25Z" level=debug duration=1.607948ms execID=b9d04
time="2023-11-03T13:24:25Z" level=info msg="pkill -9 gpg-agent" dir= execID=6b198
time="2023-11-03T13:24:25Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=be1cb
time="2023-11-03T13:24:25Z" level=debug duration=10.529374ms execID=be1cb
time="2023-11-03T13:24:25Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=b6cdc
time="2023-11-03T13:24:25Z" level=debug duration=35.123302ms execID=b6cdc
time="2023-11-03T13:24:25Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=7fd53
time="2023-11-03T13:24:25Z" level=debug duration=1.98268ms execID=7fd53
time="2023-11-03T13:24:25Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=c01d8
time="2023-11-03T13:24:25Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.97822ms execID=c01d8
time="2023-11-03T13:24:25Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=582b7
time="2023-11-03T13:24:25Z" level=debug duration=42.547807ms execID=582b7
time="2023-11-03T13:24:25Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=e2555
time="2023-11-03T13:24:25Z" level=debug duration=22.082716ms execID=e2555
time="2023-11-03T13:24:25Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=7b3ba
time="2023-11-03T13:24:25Z" level=debug duration=2.837369ms execID=7b3ba
time="2023-11-03T13:24:25Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=e7b39
Handling connection for 9081
time="2023-11-03T13:24:25Z" level=debug duration=82.428275ms execID=e7b39
time="2023-11-03T13:24:25Z" level=info msg="kubectl create ns argocd-e2e--test-not-permitted-resources-ofaim" dir= execID=212db
time="2023-11-03T13:24:25Z" level=debug msg="namespace/argocd-e2e--test-not-permitted-resources-ofaim created\n" duration=124.490878ms execID=212db
time="2023-11-03T13:24:25Z" level=info msg="kubectl label ns argocd-e2e--test-not-permitted-resources-ofaim e2e.argoproj.io=true" dir= execID=1489c
time="2023-11-03T13:24:26Z" level=debug msg="namespace/argocd-e2e--test-not-permitted-resources-ofaim labeled\n" duration=357.499978ms execID=1489c
time="2023-11-03T13:24:26Z" level=info msg="clean state" duration=2.825847135s id=TestNotPermittedResources-ofaim name=TestNotPermittedResources password=password username=admin
time="2023-11-03T13:24:27Z" level=info msg="../../dist/argocd app create test-not-permitted-resources --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-not-permitted-resources-ofaim --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDI2NSwibmJmIjoxNjk5MDE3ODY1LCJpYXQiOjE2OTkwMTc4NjUsImp0aSI6Ijg4Zjk0ZmI4LTQ2MjktNDYwZi05OGU0LWM4NTU3ODE1ODIzNCJ9.jCJfv6GaxrTNBf84DFQOmI11COz5ApfiR4T8nsjvv3o --insecure" dir= execID=f0533
time="2023-11-03T13:24:27Z" level=debug msg="application 'test-not-permitted-resources' created\n" duration=237.268976ms execID=f0533
time="2023-11-03T13:24:27Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:24:27Z" level=info msg="pending: sync status to be OutOfSync, is "
time="2023-11-03T13:24:30Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:24:30Z" level=info msg="../../dist/argocd app delete test-not-permitted-resources --cascade=true --yes --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDI2NSwibmJmIjoxNjk5MDE3ODY1LCJpYXQiOjE2OTkwMTc4NjUsImp0aSI6Ijg4Zjk0ZmI4LTQ2MjktNDYwZi05OGU0LWM4NTU3ODE1ODIzNCJ9.jCJfv6GaxrTNBf84DFQOmI11COz5ApfiR4T8nsjvv3o --insecure" dir= execID=7c715
time="2023-11-03T13:24:30Z" level=debug duration=106.877896ms execID=7c715
time="2023-11-03T13:24:30Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:24:30Z" level=info msg="expectation succeeded: app does not exist"
time="2023-11-03T13:24:30Z" level=info msg="Ingress 'sample-ingress' deleted from argocd-e2e"
time="2023-11-03T13:24:30Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNotPermittedResources (7.24s)
=== RUN   TestSyncWithInfos
time="2023-11-03T13:24:30Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=ca94c
time="2023-11-03T13:24:30Z" level=debug msg="namespace \"argocd-e2e--test-not-permitted-resources-ofaim\" deleted\n" duration=254.977941ms execID=ca94c
time="2023-11-03T13:24:30Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=cfee8
time="2023-11-03T13:24:31Z" level=debug msg="No resources found\n" duration=529.238672ms execID=cfee8
time="2023-11-03T13:24:31Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=30a39
time="2023-11-03T13:24:31Z" level=debug msg="No resources found\n" duration=256.236542ms execID=30a39
time="2023-11-03T13:24:32Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:24:32Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDI3MiwibmJmIjoxNjk5MDE3ODcyLCJpYXQiOjE2OTkwMTc4NzIsImp0aSI6IjZkNzU3NGZiLTM2OGMtNDZiZS1hNzRhLWY3NjQ2MzdiMTZkNSJ9.y_k4ZP05HQsAXaiIf48vyug9hZIsP7g4vVosPVRrPlM --insecure" dir= execID=870d6
time="2023-11-03T13:24:32Z" level=debug duration=95.785988ms execID=870d6
time="2023-11-03T13:24:32Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=16379
time="2023-11-03T13:24:32Z" level=debug duration=2.085707ms execID=16379
time="2023-11-03T13:24:32Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=b63f2
time="2023-11-03T13:24:32Z" level=debug duration=1.535972ms execID=b63f2
time="2023-11-03T13:24:32Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=27fd2
time="2023-11-03T13:24:32Z" level=debug duration=1.490399ms execID=27fd2
time="2023-11-03T13:24:32Z" level=info msg="pkill -9 gpg-agent" dir= execID=34f38
time="2023-11-03T13:24:32Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=79042
time="2023-11-03T13:24:32Z" level=debug duration=36.59492ms execID=79042
time="2023-11-03T13:24:32Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=4514a
time="2023-11-03T13:24:32Z" level=debug duration=34.556567ms execID=4514a
time="2023-11-03T13:24:32Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=d8620
time="2023-11-03T13:24:32Z" level=debug duration=1.893917ms execID=d8620
time="2023-11-03T13:24:32Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=4812e
time="2023-11-03T13:24:32Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.963523ms execID=4812e
time="2023-11-03T13:24:32Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=cb431
time="2023-11-03T13:24:32Z" level=debug duration=25.515194ms execID=cb431
time="2023-11-03T13:24:32Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=f3449
time="2023-11-03T13:24:32Z" level=debug duration=28.51779ms execID=f3449
time="2023-11-03T13:24:32Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=670c9
time="2023-11-03T13:24:32Z" level=debug duration=2.815087ms execID=670c9
time="2023-11-03T13:24:32Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=bece5
Handling connection for 9081
time="2023-11-03T13:24:32Z" level=debug duration=60.53026ms execID=bece5
time="2023-11-03T13:24:32Z" level=info msg="kubectl create ns argocd-e2e--test-sync-with-infos-lutxc" dir= execID=b39cb
time="2023-11-03T13:24:33Z" level=debug msg="namespace/argocd-e2e--test-sync-with-infos-lutxc created\n" duration=237.522811ms execID=b39cb
time="2023-11-03T13:24:33Z" level=info msg="kubectl label ns argocd-e2e--test-sync-with-infos-lutxc e2e.argoproj.io=true" dir= execID=aa7a8
time="2023-11-03T13:24:33Z" level=debug msg="namespace/argocd-e2e--test-sync-with-infos-lutxc labeled\n" duration=327.165144ms execID=aa7a8
time="2023-11-03T13:24:33Z" level=info msg="clean state" duration=2.910957096s id=TestSyncWithInfos-lutxc name=TestSyncWithInfos password=password username=admin
time="2023-11-03T13:24:34Z" level=info msg="../../dist/argocd app create test-sync-with-infos --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-sync-with-infos-lutxc --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDI3MiwibmJmIjoxNjk5MDE3ODcyLCJpYXQiOjE2OTkwMTc4NzIsImp0aSI6IjZkNzU3NGZiLTM2OGMtNDZiZS1hNzRhLWY3NjQ2MzdiMTZkNSJ9.y_k4ZP05HQsAXaiIf48vyug9hZIsP7g4vVosPVRrPlM --insecure" dir= execID=9cc7e
time="2023-11-03T13:24:34Z" level=debug msg="application 'test-sync-with-infos' created\n" duration=241.080447ms execID=9cc7e
time="2023-11-03T13:24:34Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:24:34Z" level=info msg="../../dist/argocd app sync test-sync-with-infos --info name1=val1 --info name2=val2 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDI3MiwibmJmIjoxNjk5MDE3ODcyLCJpYXQiOjE2OTkwMTc4NzIsImp0aSI6IjZkNzU3NGZiLTM2OGMtNDZiZS1hNzRhLWY3NjQ2MzdiMTZkNSJ9.y_k4ZP05HQsAXaiIf48vyug9hZIsP7g4vVosPVRrPlM --insecure" dir= execID=8e2df
time="2023-11-03T13:24:35Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                              NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:24:34+00:00            Service  argocd-e2e--test-sync-with-infos-lutxc          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:24:34+00:00   apps  Deployment  argocd-e2e--test-sync-with-infos-lutxc          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:24:35+00:00            Service  argocd-e2e--test-sync-with-infos-lutxc          guestbook-ui  OutOfSync  Missing              service/guestbook-ui created\n2023-11-03T13:24:35+00:00   apps  Deployment  argocd-e2e--test-sync-with-infos-lutxc          guestbook-ui  OutOfSync  Missing              deployment.apps/guestbook-ui created\n2023-11-03T13:24:35+00:00            Service  argocd-e2e--test-sync-with-infos-lutxc          guestbook-ui    Synced  Healthy              service/guestbook-ui created\n\nName:               argocd-e2e/test-sync-with-infos\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-sync-with-infos-lutxc\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-sync-with-infos\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (598e214)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      598e2145866e2a6c5da901152fc6a9023d53dea3\nPhase:              Succeeded\nStart:              2023-11-03 13:24:34 +0000 UTC\nFinished:           2023-11-03 13:24:35 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                               NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-sync-with-infos-lutxc  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-sync-with-infos-lutxc  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=718.601276ms execID=8e2df
time="2023-11-03T13:24:35Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:24:35Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestSyncWithInfos (4.89s)
=== RUN   TestCreateAppWithNoNameSpaceForGlobalResource
time="2023-11-03T13:24:35Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=3e579
time="2023-11-03T13:24:35Z" level=debug msg="namespace \"argocd-e2e--test-sync-with-infos-lutxc\" deleted\n" duration=250.105443ms execID=3e579
time="2023-11-03T13:24:35Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=205d5
time="2023-11-03T13:24:36Z" level=debug msg="No resources found\n" duration=524.42137ms execID=205d5
time="2023-11-03T13:24:36Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=db792
time="2023-11-03T13:24:36Z" level=debug msg="No resources found\n" duration=394.435293ms execID=db792
time="2023-11-03T13:24:37Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:24:37Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDI3NywibmJmIjoxNjk5MDE3ODc3LCJpYXQiOjE2OTkwMTc4NzcsImp0aSI6IjI0ODQ2YTY5LTFjMDAtNDYzMi05NDAzLWQwOWZjZDg1OWY2OCJ9.iWdZfq8TT7CEsUI37HKd3zd1Q6IVry4_rzOpc1Y6JLI --insecure" dir= execID=d7006
time="2023-11-03T13:24:37Z" level=debug duration=72.851852ms execID=d7006
time="2023-11-03T13:24:37Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=c313d
time="2023-11-03T13:24:37Z" level=debug duration=1.923783ms execID=c313d
time="2023-11-03T13:24:37Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=83487
time="2023-11-03T13:24:37Z" level=debug duration=1.591467ms execID=83487
time="2023-11-03T13:24:37Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=97fc5
time="2023-11-03T13:24:37Z" level=debug duration=1.531573ms execID=97fc5
time="2023-11-03T13:24:37Z" level=info msg="pkill -9 gpg-agent" dir= execID=9a0bb
time="2023-11-03T13:24:37Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=e23ce
time="2023-11-03T13:24:37Z" level=debug duration=9.731563ms execID=e23ce
time="2023-11-03T13:24:37Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=3323a
time="2023-11-03T13:24:37Z" level=debug duration=56.000351ms execID=3323a
time="2023-11-03T13:24:37Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=c465e
time="2023-11-03T13:24:37Z" level=debug duration=1.975819ms execID=c465e
time="2023-11-03T13:24:37Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=54c7c
time="2023-11-03T13:24:37Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.152728ms execID=54c7c
time="2023-11-03T13:24:37Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=53964
time="2023-11-03T13:24:37Z" level=debug duration=28.783952ms execID=53964
time="2023-11-03T13:24:37Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=9123c
time="2023-11-03T13:24:37Z" level=debug duration=28.720178ms execID=9123c
time="2023-11-03T13:24:37Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=81c5c
time="2023-11-03T13:24:37Z" level=debug duration=2.965318ms execID=81c5c
time="2023-11-03T13:24:37Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=52633
Handling connection for 9081
time="2023-11-03T13:24:38Z" level=debug duration=251.794187ms execID=52633
time="2023-11-03T13:24:38Z" level=info msg="kubectl create ns argocd-e2e--test-create-app-with-no-name-space-for-global-mcsco" dir= execID=e1768
time="2023-11-03T13:24:38Z" level=debug msg="namespace/argocd-e2e--test-create-app-with-no-name-space-for-global-mcsco created\n" duration=145.932006ms execID=e1768
time="2023-11-03T13:24:38Z" level=info msg="kubectl label ns argocd-e2e--test-create-app-with-no-name-space-for-global-mcsco e2e.argoproj.io=true" dir= execID=dce4e
time="2023-11-03T13:24:38Z" level=debug msg="namespace/argocd-e2e--test-create-app-with-no-name-space-for-global-mcsco labeled\n" duration=245.424681ms execID=dce4e
time="2023-11-03T13:24:38Z" level=info msg="clean state" duration=2.939329909s id=TestCreateAppWithNoNameSpaceForGlobalResource-mcsco name=TestCreateAppWithNoNameSpaceForGlobalResource password=password username=admin
time="2023-11-03T13:24:39Z" level=info msg="../../dist/argocd app create test-create-app-with-no-name-space-for-global-resource --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path global-with-no-namespace --project default --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDI3NywibmJmIjoxNjk5MDE3ODc3LCJpYXQiOjE2OTkwMTc4NzcsImp0aSI6IjI0ODQ2YTY5LTFjMDAtNDYzMi05NDAzLWQwOWZjZDg1OWY2OCJ9.iWdZfq8TT7CEsUI37HKd3zd1Q6IVry4_rzOpc1Y6JLI --insecure" dir= execID=5b55d
time="2023-11-03T13:24:39Z" level=debug msg="application 'test-create-app-with-no-name-space-for-global-resource' created\n" duration=199.403686ms execID=5b55d
time="2023-11-03T13:24:39Z" level=info msg="expectation succeeded: no error and output contained ''"
    app_management_test.go:1824: 
        	Error Trace:	/argocd-e2e/argo-cd/test/e2e/app_management_test.go:1824
        	            				/argocd-e2e/argo-cd/test/e2e/fixture/app/consequences.go:47
        	            				/argocd-e2e/argo-cd/test/e2e/app_management_test.go:1820
        	Error:      	"[{SharedResourceWarning Console/cluster is part of applications argocd-e2e/test-create-app-with-no-name-space-for-global-resource and console-config 2023-11-03 13:24:39 +0000 UTC}]" should have 0 item(s), but has 1
        	Test:       	TestCreateAppWithNoNameSpaceForGlobalResource
--- FAIL: TestCreateAppWithNoNameSpaceForGlobalResource (4.65s)
=== RUN   TestCreateAppWithNoNameSpaceWhenRequired
time="2023-11-03T13:24:40Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=c7738
time="2023-11-03T13:24:40Z" level=debug msg="namespace \"argocd-e2e--test-create-app-with-no-name-space-for-global-mcsco\" deleted\n" duration=322.712353ms execID=c7738
time="2023-11-03T13:24:40Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=f405f
time="2023-11-03T13:24:41Z" level=debug msg="No resources found\n" duration=546.199401ms execID=f405f
time="2023-11-03T13:24:41Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=c47ed
time="2023-11-03T13:24:41Z" level=debug msg="No resources found\n" duration=333.044223ms execID=c47ed
time="2023-11-03T13:24:42Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:24:42Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDI4MSwibmJmIjoxNjk5MDE3ODgxLCJpYXQiOjE2OTkwMTc4ODEsImp0aSI6IjI3ODYzOTUxLTg1ZTItNGJiNC1hYzA1LWZlNzc5NWI2ODU3MCJ9.KVtK1_ZrU26vb9I0Loi44d0xER0Sj-Pm4vdKAKxSN3U --insecure" dir= execID=f5166
time="2023-11-03T13:24:42Z" level=debug duration=95.904471ms execID=f5166
time="2023-11-03T13:24:42Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=2f55a
time="2023-11-03T13:24:42Z" level=debug duration=1.96929ms execID=2f55a
time="2023-11-03T13:24:42Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=88f10
time="2023-11-03T13:24:42Z" level=debug duration=1.460058ms execID=88f10
time="2023-11-03T13:24:42Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=2d790
time="2023-11-03T13:24:42Z" level=debug duration=1.365854ms execID=2d790
time="2023-11-03T13:24:42Z" level=info msg="pkill -9 gpg-agent" dir= execID=47490
time="2023-11-03T13:24:42Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=91302
time="2023-11-03T13:24:42Z" level=debug duration=10.005465ms execID=91302
time="2023-11-03T13:24:42Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=8440e
time="2023-11-03T13:24:42Z" level=debug duration=35.462009ms execID=8440e
time="2023-11-03T13:24:42Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=a2360
time="2023-11-03T13:24:42Z" level=debug duration=14.035989ms execID=a2360
time="2023-11-03T13:24:42Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=ffa4d
time="2023-11-03T13:24:42Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.063533ms execID=ffa4d
time="2023-11-03T13:24:42Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=681d7
time="2023-11-03T13:24:42Z" level=debug duration=27.254945ms execID=681d7
time="2023-11-03T13:24:42Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=650c4
time="2023-11-03T13:24:42Z" level=debug duration=23.133956ms execID=650c4
time="2023-11-03T13:24:42Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=8b71b
time="2023-11-03T13:24:42Z" level=debug duration=3.070207ms execID=8b71b
time="2023-11-03T13:24:42Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=36140
Handling connection for 9081
time="2023-11-03T13:24:42Z" level=debug duration=92.044113ms execID=36140
time="2023-11-03T13:24:42Z" level=info msg="kubectl create ns argocd-e2e--test-create-app-with-no-name-space-when-requi-mmifp" dir= execID=96590
time="2023-11-03T13:24:42Z" level=debug msg="namespace/argocd-e2e--test-create-app-with-no-name-space-when-requi-mmifp created\n" duration=180.884153ms execID=96590
time="2023-11-03T13:24:42Z" level=info msg="kubectl label ns argocd-e2e--test-create-app-with-no-name-space-when-requi-mmifp e2e.argoproj.io=true" dir= execID=5edeb
time="2023-11-03T13:24:42Z" level=debug msg="namespace/argocd-e2e--test-create-app-with-no-name-space-when-requi-mmifp labeled\n" duration=267.674856ms execID=5edeb
time="2023-11-03T13:24:42Z" level=info msg="clean state" duration=2.642912126s id=TestCreateAppWithNoNameSpaceWhenRequired-mmifp name=TestCreateAppWithNoNameSpaceWhenRequired password=password username=admin
time="2023-11-03T13:24:43Z" level=info msg="../../dist/argocd app create test-create-app-with-no-name-space-when-required --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDI4MSwibmJmIjoxNjk5MDE3ODgxLCJpYXQiOjE2OTkwMTc4ODEsImp0aSI6IjI3ODYzOTUxLTg1ZTItNGJiNC1hYzA1LWZlNzc5NWI2ODU3MCJ9.KVtK1_ZrU26vb9I0Loi44d0xER0Sj-Pm4vdKAKxSN3U --insecure" dir= execID=cee31
time="2023-11-03T13:24:44Z" level=debug msg="application 'test-create-app-with-no-name-space-when-required' created\n" duration=283.642957ms execID=cee31
time="2023-11-03T13:24:44Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:24:44Z" level=info msg="../../dist/argocd app get test-create-app-with-no-name-space-when-required --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDI4MSwibmJmIjoxNjk5MDE3ODgxLCJpYXQiOjE2OTkwMTc4ODEsImp0aSI6IjI3ODYzOTUxLTg1ZTItNGJiNC1hYzA1LWZlNzc5NWI2ODU3MCJ9.KVtK1_ZrU26vb9I0Loi44d0xER0Sj-Pm4vdKAKxSN3U --insecure" dir= execID=caf65
time="2023-11-03T13:24:44Z" level=debug msg="Name:               argocd-e2e/test-create-app-with-no-name-space-when-required\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          \nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-create-app-with-no-name-space-when-required\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (793efad)\nHealth Status:      Missing\n\nCONDITION         MESSAGE                                                          LAST TRANSITION\nInvalidSpecError  Namespace for guestbook-ui /v1, Kind=Service is missing.         2023-11-03 13:24:44 +0000 UTC\nInvalidSpecError  Namespace for guestbook-ui apps/v1, Kind=Deployment is missing.  2023-11-03 13:24:44 +0000 UTC\n\n\nGROUP  KIND        NAMESPACE  NAME          STATUS     HEALTH   HOOK  MESSAGE\n       Service                guestbook-ui  OutOfSync  Missing        \napps   Deployment             guestbook-ui  OutOfSync  Missing        \n" duration=203.857113ms execID=caf65
time="2023-11-03T13:24:44Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:24:44Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCreateAppWithNoNameSpaceWhenRequired (4.14s)
=== RUN   TestCreateAppWithNoNameSpaceWhenRequired2
time="2023-11-03T13:24:44Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=d0531
time="2023-11-03T13:24:44Z" level=debug msg="namespace \"argocd-e2e--test-create-app-with-no-name-space-when-requi-mmifp\" deleted\n" duration=253.667849ms execID=d0531
time="2023-11-03T13:24:44Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=ac930
time="2023-11-03T13:24:45Z" level=debug msg="No resources found\n" duration=576.999006ms execID=ac930
time="2023-11-03T13:24:45Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=79e2c
time="2023-11-03T13:24:45Z" level=debug msg="No resources found\n" duration=224.556577ms execID=79e2c
time="2023-11-03T13:24:46Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:24:46Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDI4NiwibmJmIjoxNjk5MDE3ODg2LCJpYXQiOjE2OTkwMTc4ODYsImp0aSI6IjQwMDExYTc3LTFjNGEtNGJjNi04YzQ0LTQwZGU3M2YwZjNlYiJ9.Cuz6hZd-CHezclQWAT0jVeGoT7QOXPn3b5uaJAacpHw --insecure" dir= execID=b21e1
time="2023-11-03T13:24:46Z" level=debug duration=104.238395ms execID=b21e1
time="2023-11-03T13:24:46Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=f4030
time="2023-11-03T13:24:46Z" level=debug duration=2.123571ms execID=f4030
time="2023-11-03T13:24:46Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=0468e
time="2023-11-03T13:24:46Z" level=debug duration=1.874907ms execID=0468e
time="2023-11-03T13:24:46Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=4a8cc
time="2023-11-03T13:24:46Z" level=debug duration=1.737182ms execID=4a8cc
time="2023-11-03T13:24:46Z" level=info msg="pkill -9 gpg-agent" dir= execID=09650
time="2023-11-03T13:24:46Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=a0c31
time="2023-11-03T13:24:46Z" level=debug duration=9.922775ms execID=a0c31
time="2023-11-03T13:24:46Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=f9791
time="2023-11-03T13:24:46Z" level=debug duration=45.006731ms execID=f9791
time="2023-11-03T13:24:46Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=30ee6
time="2023-11-03T13:24:46Z" level=debug duration=2.01368ms execID=30ee6
time="2023-11-03T13:24:46Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=443f1
time="2023-11-03T13:24:46Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.00677ms execID=443f1
time="2023-11-03T13:24:46Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=e51eb
time="2023-11-03T13:24:46Z" level=debug duration=34.349949ms execID=e51eb
time="2023-11-03T13:24:46Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=27e57
time="2023-11-03T13:24:46Z" level=debug duration=22.243357ms execID=27e57
time="2023-11-03T13:24:46Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=9c0cd
time="2023-11-03T13:24:46Z" level=debug duration=2.380783ms execID=9c0cd
time="2023-11-03T13:24:46Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=26152
Handling connection for 9081
time="2023-11-03T13:24:46Z" level=debug duration=79.94427ms execID=26152
time="2023-11-03T13:24:46Z" level=info msg="kubectl create ns argocd-e2e--test-create-app-with-no-name-space-when-requi-ogsbf" dir= execID=8d46f
time="2023-11-03T13:24:46Z" level=debug msg="namespace/argocd-e2e--test-create-app-with-no-name-space-when-requi-ogsbf created\n" duration=205.716576ms execID=8d46f
time="2023-11-03T13:24:46Z" level=info msg="kubectl label ns argocd-e2e--test-create-app-with-no-name-space-when-requi-ogsbf e2e.argoproj.io=true" dir= execID=8d087
time="2023-11-03T13:24:47Z" level=debug msg="namespace/argocd-e2e--test-create-app-with-no-name-space-when-requi-ogsbf labeled\n" duration=262.303801ms execID=8d087
time="2023-11-03T13:24:47Z" level=info msg="clean state" duration=2.931710882s id=TestCreateAppWithNoNameSpaceWhenRequired2-ogsbf name=TestCreateAppWithNoNameSpaceWhenRequired2 password=password username=admin
time="2023-11-03T13:24:48Z" level=info msg="../../dist/argocd app create test-create-app-with-no-name-space-when-required2 --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook-with-namespace --project default --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDI4NiwibmJmIjoxNjk5MDE3ODg2LCJpYXQiOjE2OTkwMTc4ODYsImp0aSI6IjQwMDExYTc3LTFjNGEtNGJjNi04YzQ0LTQwZGU3M2YwZjNlYiJ9.Cuz6hZd-CHezclQWAT0jVeGoT7QOXPn3b5uaJAacpHw --insecure" dir= execID=55325
time="2023-11-03T13:24:48Z" level=debug msg="application 'test-create-app-with-no-name-space-when-required2' created\n" duration=240.609791ms execID=55325
time="2023-11-03T13:24:48Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:24:48Z" level=info msg="../../dist/argocd app get test-create-app-with-no-name-space-when-required2 --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDI4NiwibmJmIjoxNjk5MDE3ODg2LCJpYXQiOjE2OTkwMTc4ODYsImp0aSI6IjQwMDExYTc3LTFjNGEtNGJjNi04YzQ0LTQwZGU3M2YwZjNlYiJ9.Cuz6hZd-CHezclQWAT0jVeGoT7QOXPn3b5uaJAacpHw --insecure" dir= execID=56303
time="2023-11-03T13:24:48Z" level=debug msg="Name:               argocd-e2e/test-create-app-with-no-name-space-when-required2\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          \nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-create-app-with-no-name-space-when-required2\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook-with-namespace\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (a6bbd43)\nHealth Status:      Missing\n\nCONDITION         MESSAGE                                                          LAST TRANSITION\nInvalidSpecError  Namespace for guestbook-ui /v1, Kind=Service is missing.         2023-11-03 13:24:48 +0000 UTC\nInvalidSpecError  Namespace for guestbook-ui apps/v1, Kind=Deployment is missing.  2023-11-03 13:24:48 +0000 UTC\n\n\nGROUP  KIND        NAMESPACE  NAME          STATUS     HEALTH   HOOK  MESSAGE\n       Service                guestbook-ui  OutOfSync  Missing        \n       Service     namespace  guestbook-ui  OutOfSync  Missing        \napps   Deployment             guestbook-ui  OutOfSync  Missing        \napps   Deployment  namespace  guestbook-ui  OutOfSync  Missing        \n" duration=200.949868ms execID=56303
time="2023-11-03T13:24:48Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:24:48Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCreateAppWithNoNameSpaceWhenRequired2 (4.38s)
=== RUN   TestListResource
    fixture.go:901: 
--- SKIP: TestListResource (0.00s)
=== RUN   TestNamespaceAutoCreation
    fixture.go:901: 
--- SKIP: TestNamespaceAutoCreation (0.00s)
=== RUN   TestFailedSyncWithRetry
time="2023-11-03T13:24:48Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=e3d9a
time="2023-11-03T13:24:48Z" level=debug msg="namespace \"argocd-e2e--test-create-app-with-no-name-space-when-requi-ogsbf\" deleted\n" duration=214.755477ms execID=e3d9a
time="2023-11-03T13:24:48Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=61ac5
time="2023-11-03T13:24:49Z" level=debug msg="No resources found\n" duration=471.738723ms execID=61ac5
time="2023-11-03T13:24:49Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=d71e4
time="2023-11-03T13:24:49Z" level=debug msg="No resources found\n" duration=275.640852ms execID=d71e4
time="2023-11-03T13:24:50Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:24:50Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDI5MCwibmJmIjoxNjk5MDE3ODkwLCJpYXQiOjE2OTkwMTc4OTAsImp0aSI6ImM0ODkwMWNhLTAxY2YtNGRhMS1iNDQyLTFjMmJiODc0ODk5YyJ9.kNLy6kOAfl1X-_SgNLsUqm6xpwPbTYEvk7MbulWrcRU --insecure" dir= execID=01c42
time="2023-11-03T13:24:50Z" level=debug duration=75.702185ms execID=01c42
time="2023-11-03T13:24:50Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=573d3
time="2023-11-03T13:24:50Z" level=debug duration=2.131456ms execID=573d3
time="2023-11-03T13:24:50Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=64e51
time="2023-11-03T13:24:50Z" level=debug duration=1.78339ms execID=64e51
time="2023-11-03T13:24:50Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=0acb0
time="2023-11-03T13:24:50Z" level=debug duration=1.559835ms execID=0acb0
time="2023-11-03T13:24:50Z" level=info msg="pkill -9 gpg-agent" dir= execID=381af
time="2023-11-03T13:24:50Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=ccda3
time="2023-11-03T13:24:50Z" level=debug duration=10.852617ms execID=ccda3
time="2023-11-03T13:24:50Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=7c1d1
time="2023-11-03T13:24:50Z" level=debug duration=35.819842ms execID=7c1d1
time="2023-11-03T13:24:50Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=b0454
time="2023-11-03T13:24:50Z" level=debug duration=1.886864ms execID=b0454
time="2023-11-03T13:24:50Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=dd35f
time="2023-11-03T13:24:50Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.186611ms execID=dd35f
time="2023-11-03T13:24:50Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=1a818
time="2023-11-03T13:24:50Z" level=debug duration=27.611859ms execID=1a818
time="2023-11-03T13:24:50Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=f68d7
time="2023-11-03T13:24:50Z" level=debug duration=23.190938ms execID=f68d7
time="2023-11-03T13:24:50Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=070b1
time="2023-11-03T13:24:50Z" level=debug duration=2.917613ms execID=070b1
time="2023-11-03T13:24:50Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=53813
Handling connection for 9081
time="2023-11-03T13:24:50Z" level=debug duration=74.869549ms execID=53813
time="2023-11-03T13:24:50Z" level=info msg="kubectl create ns argocd-e2e--test-failed-sync-with-retry-xllpx" dir= execID=bc003
time="2023-11-03T13:24:50Z" level=debug msg="namespace/argocd-e2e--test-failed-sync-with-retry-xllpx created\n" duration=173.236257ms execID=bc003
time="2023-11-03T13:24:50Z" level=info msg="kubectl label ns argocd-e2e--test-failed-sync-with-retry-xllpx e2e.argoproj.io=true" dir= execID=c55c4
time="2023-11-03T13:24:51Z" level=debug msg="namespace/argocd-e2e--test-failed-sync-with-retry-xllpx labeled\n" duration=306.340767ms execID=c55c4
time="2023-11-03T13:24:51Z" level=info msg="clean state" duration=2.452517521s id=TestFailedSyncWithRetry-xllpx name=TestFailedSyncWithRetry password=password username=admin
time="2023-11-03T13:24:52Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/metadata/annotations\", \"value\": {\"argocd.argoproj.io/hook\": \"PreSync\"}}]" path=hook/hook.yaml
time="2023-11-03T13:24:52Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:24:52Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/hook\":\"Sync\"},\"name\":\"hook\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:24:52Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:24:52Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=14968
time="2023-11-03T13:24:52Z" level=debug msg="diff --git a/hook/hook.yaml b/hook/hook.yaml\nindex ca89c3d..3b3b2f2 100644\n--- a/hook/hook.yaml\n+++ b/hook/hook.yaml\n@@ -2,13 +2,13 @@ apiVersion: v1\n kind: Pod\n metadata:\n   annotations:\n-    argocd.argoproj.io/hook: Sync\n+    argocd.argoproj.io/hook: PreSync\n   name: hook\n spec:\n   containers:\n-    - command:\n-        - \"true\"\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      name: main\n-  restartPolicy: Never\n\\ No newline at end of file\n+  - command:\n+    - \"true\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n+  restartPolicy: Never\n" duration=10.560585ms execID=14968
time="2023-11-03T13:24:52Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=897e6
time="2023-11-03T13:24:52Z" level=debug msg="[master 6cf68a5] patch\n 1 file changed, 7 insertions(+), 7 deletions(-)\n" duration=58.317789ms execID=897e6
time="2023-11-03T13:24:52Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=7635d
Handling connection for 9081
time="2023-11-03T13:24:52Z" level=debug duration=39.335986ms execID=7635d
time="2023-11-03T13:24:52Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/spec/containers/0/command\", \"value\": [\"false\"]}]" path=hook/hook.yaml
time="2023-11-03T13:24:52Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:24:52Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/hook\":\"PreSync\"},\"name\":\"hook\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:24:52Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:24:52Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=284f2
time="2023-11-03T13:24:52Z" level=debug msg="diff --git a/hook/hook.yaml b/hook/hook.yaml\nindex 3b3b2f2..bd36116 100644\n--- a/hook/hook.yaml\n+++ b/hook/hook.yaml\n@@ -7,7 +7,7 @@ metadata:\n spec:\n   containers:\n   - command:\n-    - \"true\"\n+    - \"false\"\n     image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n     imagePullPolicy: IfNotPresent\n     name: main\n" duration=3.13836ms execID=284f2
time="2023-11-03T13:24:52Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=d5cb7
time="2023-11-03T13:24:52Z" level=debug msg="[master 0fefa69] patch\n 1 file changed, 1 insertion(+), 1 deletion(-)\n" duration=8.006093ms execID=d5cb7
time="2023-11-03T13:24:52Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=4345d
Handling connection for 9081
time="2023-11-03T13:24:52Z" level=debug duration=36.714271ms execID=4345d
time="2023-11-03T13:24:52Z" level=info msg="../../dist/argocd app create test-failed-sync-with-retry --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path hook --project default --dest-namespace argocd-e2e--test-failed-sync-with-retry-xllpx --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDI5MCwibmJmIjoxNjk5MDE3ODkwLCJpYXQiOjE2OTkwMTc4OTAsImp0aSI6ImM0ODkwMWNhLTAxY2YtNGRhMS1iNDQyLTFjMmJiODc0ODk5YyJ9.kNLy6kOAfl1X-_SgNLsUqm6xpwPbTYEvk7MbulWrcRU --insecure" dir= execID=b304b
time="2023-11-03T13:24:52Z" level=debug msg="application 'test-failed-sync-with-retry' created\n" duration=273.712195ms execID=b304b
time="2023-11-03T13:24:52Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:24:52Z" level=info msg="../../dist/argocd app sync --retry-limit=1 --retry-backoff-duration=1s test-failed-sync-with-retry --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDI5MCwibmJmIjoxNjk5MDE3ODkwLCJpYXQiOjE2OTkwMTc4OTAsImp0aSI6ImM0ODkwMWNhLTAxY2YtNGRhMS1iNDQyLTFjMmJiODc0ODk5YyJ9.kNLy6kOAfl1X-_SgNLsUqm6xpwPbTYEvk7MbulWrcRU --insecure" dir= execID=61dcc
time="2023-11-03T13:25:01Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                     NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:24:52+00:00                Pod  argocd-e2e--test-failed-sync-with-retry-xllpx                   pod  OutOfSync  Missing              \n2023-11-03T13:24:53+00:00                Pod  argocd-e2e--test-failed-sync-with-retry-xllpx                  hook                                 \n2023-11-03T13:24:55+00:00                Pod  argocd-e2e--test-failed-sync-with-retry-xllpx                  hook   Running   Synced     PreSync  pod/hook created\n2023-11-03T13:24:57+00:00                Pod  argocd-e2e--test-failed-sync-with-retry-xllpx                  hook    Failed   Synced     PreSync  container \"main\" failed with exit code 1\n\nName:               argocd-e2e/test-failed-sync-with-retry\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-failed-sync-with-retry-xllpx\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-failed-sync-with-retry\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               hook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (0fefa69)\nHealth Status:      Missing\n\nOperation:          Sync\nSync Revision:      0fefa69f8c201d9878de66c25b6f729253ebec1a\nPhase:              Failed\nStart:              2023-11-03 13:24:52 +0000 UTC\nFinished:           2023-11-03 13:25:01 +0000 UTC\nDuration:           9s\nMessage:            one or more synchronization tasks completed unsuccessfully (retried 1 times).\n\nGROUP  KIND  NAMESPACE                                      NAME  STATUS     HEALTH   HOOK     MESSAGE\n       Pod   argocd-e2e--test-failed-sync-with-retry-xllpx  hook  Failed              PreSync  container \"main\" failed with exit code 1\n       Pod   argocd-e2e--test-failed-sync-with-retry-xllpx  pod   OutOfSync  Missing           \n" duration=9.087549845s execID=61dcc
time="2023-11-03T13:25:01Z" level=error msg="`../../dist/argocd app sync --retry-limit=1 --retry-backoff-duration=1s test-failed-sync-with-retry --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDI5MCwibmJmIjoxNjk5MDE3ODkwLCJpYXQiOjE2OTkwMTc4OTAsImp0aSI6ImM0ODkwMWNhLTAxY2YtNGRhMS1iNDQyLTFjMmJiODc0ODk5YyJ9.kNLy6kOAfl1X-_SgNLsUqm6xpwPbTYEvk7MbulWrcRU --insecure` failed exit status 1: time=\"2023-11-03T13:25:01Z\" level=fatal msg=\"Operation has completed with phase: Failed\"" execID=61dcc
time="2023-11-03T13:25:01Z" level=info msg="expectation succeeded: operation phase should be Failed, is Failed"
time="2023-11-03T13:25:01Z" level=info msg="expectation succeeded: operation message should contains 'retried 1 times', got: 'one or more synchronization tasks completed unsuccessfully (retried 1 times).'"
time="2023-11-03T13:25:01Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestFailedSyncWithRetry (12.98s)
=== RUN   TestCreateDisableValidation
time="2023-11-03T13:25:01Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=ef6ea
time="2023-11-03T13:25:01Z" level=debug msg="namespace \"argocd-e2e--test-failed-sync-with-retry-xllpx\" deleted\n" duration=236.077999ms execID=ef6ea
time="2023-11-03T13:25:01Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=479b2
time="2023-11-03T13:25:02Z" level=debug msg="No resources found\n" duration=516.730381ms execID=479b2
time="2023-11-03T13:25:02Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=88a17
time="2023-11-03T13:25:02Z" level=debug msg="No resources found\n" duration=262.242774ms execID=88a17
time="2023-11-03T13:25:03Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:25:03Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDMwMywibmJmIjoxNjk5MDE3OTAzLCJpYXQiOjE2OTkwMTc5MDMsImp0aSI6IjZhY2Y4YWRjLTU5YTMtNDhhMC05MWNhLTJkZjFhNDY0NDMwNCJ9.PCyKZeAXjoUGKb5DcYgrZxSEaqe-F_4N6NNI6gNy33s --insecure" dir= execID=737dd
time="2023-11-03T13:25:03Z" level=debug duration=129.337667ms execID=737dd
time="2023-11-03T13:25:03Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=8dce9
time="2023-11-03T13:25:03Z" level=debug duration=1.923922ms execID=8dce9
time="2023-11-03T13:25:03Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=89329
time="2023-11-03T13:25:03Z" level=debug duration=1.645891ms execID=89329
time="2023-11-03T13:25:03Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=f74cd
time="2023-11-03T13:25:03Z" level=debug duration=1.603405ms execID=f74cd
time="2023-11-03T13:25:03Z" level=info msg="pkill -9 gpg-agent" dir= execID=e9a4d
time="2023-11-03T13:25:03Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=672a4
time="2023-11-03T13:25:03Z" level=debug duration=10.217094ms execID=672a4
time="2023-11-03T13:25:03Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=004af
time="2023-11-03T13:25:03Z" level=debug duration=33.823614ms execID=004af
time="2023-11-03T13:25:03Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=eb92a
time="2023-11-03T13:25:03Z" level=debug duration=1.792741ms execID=eb92a
time="2023-11-03T13:25:03Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=9c5c5
time="2023-11-03T13:25:03Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.132576ms execID=9c5c5
time="2023-11-03T13:25:03Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=446c5
time="2023-11-03T13:25:03Z" level=debug duration=28.638606ms execID=446c5
time="2023-11-03T13:25:03Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=1dc09
time="2023-11-03T13:25:03Z" level=debug duration=23.303362ms execID=1dc09
time="2023-11-03T13:25:03Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=2eeae
time="2023-11-03T13:25:03Z" level=debug duration=2.411192ms execID=2eeae
time="2023-11-03T13:25:03Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=219d0
Handling connection for 9081
time="2023-11-03T13:25:03Z" level=debug duration=85.072075ms execID=219d0
time="2023-11-03T13:25:03Z" level=info msg="kubectl create ns argocd-e2e--test-create-disable-validation-ybxtz" dir= execID=8156d
time="2023-11-03T13:25:03Z" level=debug msg="namespace/argocd-e2e--test-create-disable-validation-ybxtz created\n" duration=165.292121ms execID=8156d
time="2023-11-03T13:25:03Z" level=info msg="kubectl label ns argocd-e2e--test-create-disable-validation-ybxtz e2e.argoproj.io=true" dir= execID=d8899
time="2023-11-03T13:25:04Z" level=debug msg="namespace/argocd-e2e--test-create-disable-validation-ybxtz labeled\n" duration=316.15376ms execID=d8899
time="2023-11-03T13:25:04Z" level=info msg="clean state" duration=2.462469001s id=TestCreateDisableValidation-ybxtz name=TestCreateDisableValidation password=password username=admin
time="2023-11-03T13:25:05Z" level=info msg="../../dist/argocd app create test-create-disable-validation --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --validate=false --dest-server https://kubernetes.default.svc --path baddir --project default --dest-namespace argocd-e2e--test-create-disable-validation-ybxtz --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDMwMywibmJmIjoxNjk5MDE3OTAzLCJpYXQiOjE2OTkwMTc5MDMsImp0aSI6IjZhY2Y4YWRjLTU5YTMtNDhhMC05MWNhLTJkZjFhNDY0NDMwNCJ9.PCyKZeAXjoUGKb5DcYgrZxSEaqe-F_4N6NNI6gNy33s --insecure" dir= execID=20153
time="2023-11-03T13:25:05Z" level=debug msg="application 'test-create-disable-validation' created\n" duration=93.923022ms execID=20153
time="2023-11-03T13:25:05Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:25:05Z" level=info msg="../../dist/argocd app create test-create-disable-validation --upsert --validate=false --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --path baddir2 --project default --dest-server https://kubernetes.default.svc --dest-namespace argocd-e2e--test-create-disable-validation-ybxtz --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDMwMywibmJmIjoxNjk5MDE3OTAzLCJpYXQiOjE2OTkwMTc5MDMsImp0aSI6IjZhY2Y4YWRjLTU5YTMtNDhhMC05MWNhLTJkZjFhNDY0NDMwNCJ9.PCyKZeAXjoUGKb5DcYgrZxSEaqe-F_4N6NNI6gNy33s --insecure" dir= execID=908ca
time="2023-11-03T13:25:05Z" level=debug msg="application 'test-create-disable-validation' updated\n" duration=136.82128ms execID=908ca
time="2023-11-03T13:25:05Z" level=info msg="../../dist/argocd app set test-create-disable-validation --path baddir3 --validate=false --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDMwMywibmJmIjoxNjk5MDE3OTAzLCJpYXQiOjE2OTkwMTc5MDMsImp0aSI6IjZhY2Y4YWRjLTU5YTMtNDhhMC05MWNhLTJkZjFhNDY0NDMwNCJ9.PCyKZeAXjoUGKb5DcYgrZxSEaqe-F_4N6NNI6gNy33s --insecure" dir= execID=5ffad
time="2023-11-03T13:25:05Z" level=debug duration=134.645102ms execID=5ffad
time="2023-11-03T13:25:05Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:25:05Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCreateDisableValidation (3.83s)
=== RUN   TestCreateFromPartialFile
time="2023-11-03T13:25:05Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=c68d6
time="2023-11-03T13:25:05Z" level=debug msg="namespace \"argocd-e2e--test-create-disable-validation-ybxtz\" deleted\n" duration=260.21816ms execID=c68d6
time="2023-11-03T13:25:05Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=2c424
time="2023-11-03T13:25:06Z" level=debug msg="No resources found\n" duration=366.337902ms execID=2c424
time="2023-11-03T13:25:06Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=3b70f
time="2023-11-03T13:25:06Z" level=debug msg="No resources found\n" duration=161.035641ms execID=3b70f
time="2023-11-03T13:25:07Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:25:07Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDMwNywibmJmIjoxNjk5MDE3OTA3LCJpYXQiOjE2OTkwMTc5MDcsImp0aSI6ImUyZjc5MzAzLTY2NjUtNDM4ZC04ZGI5LWRkNTEwYjM4MjU0MiJ9.fuhOApF5B40ZwY-cjVKmRFMdaK-UAhuOGQOhqrY8h1U --insecure" dir= execID=58fd0
time="2023-11-03T13:25:07Z" level=debug duration=79.067171ms execID=58fd0
time="2023-11-03T13:25:07Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=81877
time="2023-11-03T13:25:07Z" level=debug duration=1.989356ms execID=81877
time="2023-11-03T13:25:07Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=34042
time="2023-11-03T13:25:07Z" level=debug duration=1.499082ms execID=34042
time="2023-11-03T13:25:07Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=21ec0
time="2023-11-03T13:25:07Z" level=debug duration=1.429145ms execID=21ec0
time="2023-11-03T13:25:07Z" level=info msg="pkill -9 gpg-agent" dir= execID=cc48f
time="2023-11-03T13:25:07Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=2394a
time="2023-11-03T13:25:07Z" level=debug duration=10.125437ms execID=2394a
time="2023-11-03T13:25:07Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=cd4a1
time="2023-11-03T13:25:07Z" level=debug duration=35.47153ms execID=cd4a1
time="2023-11-03T13:25:07Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=97057
time="2023-11-03T13:25:07Z" level=debug duration=1.979258ms execID=97057
time="2023-11-03T13:25:07Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=ff001
time="2023-11-03T13:25:07Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=17.959ms execID=ff001
time="2023-11-03T13:25:07Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=61d05
time="2023-11-03T13:25:07Z" level=debug duration=28.464256ms execID=61d05
time="2023-11-03T13:25:07Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=5f277
time="2023-11-03T13:25:07Z" level=debug duration=22.664012ms execID=5f277
time="2023-11-03T13:25:07Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=34ffb
time="2023-11-03T13:25:07Z" level=debug duration=2.730335ms execID=34ffb
time="2023-11-03T13:25:07Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=acecd
Handling connection for 9081
time="2023-11-03T13:25:07Z" level=debug duration=78.49678ms execID=acecd
time="2023-11-03T13:25:07Z" level=info msg="kubectl create ns argocd-e2e--test-create-from-partial-file-godcy" dir= execID=a4774
time="2023-11-03T13:25:07Z" level=debug msg="namespace/argocd-e2e--test-create-from-partial-file-godcy created\n" duration=131.314581ms execID=a4774
time="2023-11-03T13:25:07Z" level=info msg="kubectl label ns argocd-e2e--test-create-from-partial-file-godcy e2e.argoproj.io=true" dir= execID=b60d0
time="2023-11-03T13:25:07Z" level=debug msg="namespace/argocd-e2e--test-create-from-partial-file-godcy labeled\n" duration=336.681292ms execID=b60d0
time="2023-11-03T13:25:07Z" level=info msg="clean state" duration=2.39845709s id=TestCreateFromPartialFile-godcy name=TestCreateFromPartialFile password=password username=admin
time="2023-11-03T13:25:08Z" level=info msg="../../dist/argocd app create -f /tmp/955416770 --name test-create-from-partial-file --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --dest-namespace argocd-e2e--test-create-from-partial-file-godcy --path helm-values -l labels.local/from-args=args --helm-set foo=foo --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDMwNywibmJmIjoxNjk5MDE3OTA3LCJpYXQiOjE2OTkwMTc5MDcsImp0aSI6ImUyZjc5MzAzLTY2NjUtNDM4ZC04ZGI5LWRkNTEwYjM4MjU0MiJ9.fuhOApF5B40ZwY-cjVKmRFMdaK-UAhuOGQOhqrY8h1U --insecure" dir= execID=80bda
time="2023-11-03T13:25:09Z" level=debug msg="application 'test-create-from-partial-file' created\n" duration=291.12834ms execID=80bda
time="2023-11-03T13:25:09Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:25:09Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:25:09Z" level=info msg="pending: sync status to be Synced, is "
time="2023-11-03T13:25:12Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:25:12Z" level=info msg="expectation succeeded: no conditions"
time="2023-11-03T13:25:12Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCreateFromPartialFile (6.72s)
=== RUN   TestCRDStatusSubresourceAction
time="2023-11-03T13:25:12Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=839c6
time="2023-11-03T13:25:12Z" level=debug msg="namespace \"argocd-e2e--test-create-from-partial-file-godcy\" deleted\n" duration=242.188741ms execID=839c6
time="2023-11-03T13:25:12Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=3f40f
time="2023-11-03T13:25:12Z" level=debug msg="No resources found\n" duration=440.396465ms execID=3f40f
time="2023-11-03T13:25:12Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=c200d
time="2023-11-03T13:25:13Z" level=debug msg="No resources found\n" duration=260.668492ms execID=c200d
time="2023-11-03T13:25:14Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:25:14Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDMxNCwibmJmIjoxNjk5MDE3OTE0LCJpYXQiOjE2OTkwMTc5MTQsImp0aSI6ImQyOGU4M2U4LTU2YTMtNDk0NS04MDRmLWFiMzM0OTRhYzk3OSJ9.zkjjqb9P6Nkd-cbhbd_MnrxQHjsZKgKcBmEF8V0vm-Q --insecure" dir= execID=98151
time="2023-11-03T13:25:14Z" level=debug duration=119.324896ms execID=98151
time="2023-11-03T13:25:14Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=6cf88
time="2023-11-03T13:25:14Z" level=debug duration=2.036365ms execID=6cf88
time="2023-11-03T13:25:14Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=2bc4c
time="2023-11-03T13:25:14Z" level=debug duration=1.520123ms execID=2bc4c
time="2023-11-03T13:25:14Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=a8f00
time="2023-11-03T13:25:14Z" level=debug duration=1.449888ms execID=a8f00
time="2023-11-03T13:25:14Z" level=info msg="pkill -9 gpg-agent" dir= execID=bb242
time="2023-11-03T13:25:14Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=c1e8d
time="2023-11-03T13:25:14Z" level=debug duration=10.326427ms execID=c1e8d
time="2023-11-03T13:25:14Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=35d42
time="2023-11-03T13:25:14Z" level=debug duration=66.482888ms execID=35d42
time="2023-11-03T13:25:14Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=7e624
time="2023-11-03T13:25:14Z" level=debug duration=1.890102ms execID=7e624
time="2023-11-03T13:25:14Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=926ab
time="2023-11-03T13:25:14Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.146563ms execID=926ab
time="2023-11-03T13:25:14Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=eb36f
time="2023-11-03T13:25:14Z" level=debug duration=30.022025ms execID=eb36f
time="2023-11-03T13:25:14Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=6b608
time="2023-11-03T13:25:14Z" level=debug duration=23.020664ms execID=6b608
time="2023-11-03T13:25:14Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=83b84
time="2023-11-03T13:25:14Z" level=debug duration=2.86155ms execID=83b84
time="2023-11-03T13:25:14Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=00686
Handling connection for 9081
time="2023-11-03T13:25:14Z" level=debug duration=81.576692ms execID=00686
time="2023-11-03T13:25:14Z" level=info msg="kubectl create ns argocd-e2e--test-crd-status-subresource-action-kkjrx" dir= execID=21c0f
time="2023-11-03T13:25:14Z" level=debug msg="namespace/argocd-e2e--test-crd-status-subresource-action-kkjrx created\n" duration=180.972895ms execID=21c0f
time="2023-11-03T13:25:14Z" level=info msg="kubectl label ns argocd-e2e--test-crd-status-subresource-action-kkjrx e2e.argoproj.io=true" dir= execID=a7c48
time="2023-11-03T13:25:14Z" level=debug msg="namespace/argocd-e2e--test-crd-status-subresource-action-kkjrx labeled\n" duration=196.075134ms execID=a7c48
time="2023-11-03T13:25:14Z" level=info msg="clean state" duration=2.615661469s id=TestCRDStatusSubresourceAction-kkjrx name=TestCRDStatusSubresourceAction password=password username=admin
time="2023-11-03T13:25:15Z" level=info msg="../../dist/argocd app create test-crd-status-subresource-action --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path crd-subresource --project default --dest-namespace argocd-e2e--test-crd-status-subresource-action-kkjrx --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDMxNCwibmJmIjoxNjk5MDE3OTE0LCJpYXQiOjE2OTkwMTc5MTQsImp0aSI6ImQyOGU4M2U4LTU2YTMtNDk0NS04MDRmLWFiMzM0OTRhYzk3OSJ9.zkjjqb9P6Nkd-cbhbd_MnrxQHjsZKgKcBmEF8V0vm-Q --insecure" dir= execID=9a17d
time="2023-11-03T13:25:16Z" level=debug msg="application 'test-crd-status-subresource-action' created\n" duration=328.649515ms execID=9a17d
time="2023-11-03T13:25:16Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:25:16Z" level=info msg="../../dist/argocd app sync test-crd-status-subresource-action --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDMxNCwibmJmIjoxNjk5MDE3OTE0LCJpYXQiOjE2OTkwMTc5MTQsImp0aSI6ImQyOGU4M2U4LTU2YTMtNDk0NS04MDRmLWFiMzM0OTRhYzk3OSJ9.zkjjqb9P6Nkd-cbhbd_MnrxQHjsZKgKcBmEF8V0vm-Q --insecure" dir= execID=53f0a
time="2023-11-03T13:25:21Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:25:20+00:00  apiextensions.k8s.io  CustomResourceDefinition                                                        nonstatussubresources.argoproj.io    Synced                        \n2023-11-03T13:25:20+00:00  apiextensions.k8s.io  CustomResourceDefinition                                                        statussubresources.argoproj.io       Synced                        \n2023-11-03T13:25:20+00:00  argoproj.io           NonStatusSubResource      argocd-e2e--test-crd-status-subresource-action-kkjrx  non-status-subresource             OutOfSync  Missing              \n2023-11-03T13:25:20+00:00  argoproj.io           StatusSubResource         argocd-e2e--test-crd-status-subresource-action-kkjrx    status-subresource               OutOfSync  Missing              \n2023-11-03T13:25:21+00:00  argoproj.io           NonStatusSubResource      argocd-e2e--test-crd-status-subresource-action-kkjrx  non-status-subresource             OutOfSync  Missing              nonstatussubresource.argoproj.io/non-status-subresource created\n2023-11-03T13:25:21+00:00  argoproj.io           StatusSubResource         argocd-e2e--test-crd-status-subresource-action-kkjrx    status-subresource               OutOfSync  Missing              statussubresource.argoproj.io/status-subresource created\n2023-11-03T13:25:21+00:00  apiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-crd-status-subresource-action-kkjrx  nonstatussubresources.argoproj.io   Running    Synced              customresourcedefinition.apiextensions.k8s.io/nonstatussubresources.argoproj.io unchanged\n2023-11-03T13:25:21+00:00  apiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-crd-status-subresource-action-kkjrx  statussubresources.argoproj.io      Running    Synced              customresourcedefinition.apiextensions.k8s.io/statussubresources.argoproj.io unchanged\n2023-11-03T13:25:21+00:00  argoproj.io  NonStatusSubResource  argocd-e2e--test-crd-status-subresource-action-kkjrx  non-status-subresource    Synced  Missing              nonstatussubresource.argoproj.io/non-status-subresource created\n\nName:               argocd-e2e/test-crd-status-subresource-action\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-crd-status-subresource-action-kkjrx\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-crd-status-subresource-action\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               crd-subresource\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (f8441bc)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      f8441bca3166ec8add3fc1986cea24051b6f8597\nPhase:              Succeeded\nStart:              2023-11-03 13:25:16 +0000 UTC\nFinished:           2023-11-03 13:25:21 +0000 UTC\nDuration:           5s\nMessage:            successfully synced (all tasks run)\n\nGROUP                 KIND                      NAMESPACE                                             NAME                               STATUS   HEALTH  HOOK  MESSAGE\napiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-crd-status-subresource-action-kkjrx  nonstatussubresources.argoproj.io  Running  Synced        customresourcedefinition.apiextensions.k8s.io/nonstatussubresources.argoproj.io unchanged\napiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-crd-status-subresource-action-kkjrx  statussubresources.argoproj.io     Running  Synced        customresourcedefinition.apiextensions.k8s.io/statussubresources.argoproj.io unchanged\nargoproj.io           NonStatusSubResource      argocd-e2e--test-crd-status-subresource-action-kkjrx  non-status-subresource             Synced                 nonstatussubresource.argoproj.io/non-status-subresource created\nargoproj.io           StatusSubResource         argocd-e2e--test-crd-status-subresource-action-kkjrx  status-subresource                 Synced                 statussubresource.argoproj.io/status-subresource created\napiextensions.k8s.io  CustomResourceDefinition                                                        nonstatussubresources.argoproj.io  Synced                 \napiextensions.k8s.io  CustomResourceDefinition                                                        statussubresources.argoproj.io     Synced                 \n" duration=5.299705474s execID=53f0a
time="2023-11-03T13:25:21Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:25:21Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:25:21Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:25:21Z" level=info msg="../../dist/argocd app get test-crd-status-subresource-action --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDMxNCwibmJmIjoxNjk5MDE3OTE0LCJpYXQiOjE2OTkwMTc5MTQsImp0aSI6ImQyOGU4M2U4LTU2YTMtNDk0NS04MDRmLWFiMzM0OTRhYzk3OSJ9.zkjjqb9P6Nkd-cbhbd_MnrxQHjsZKgKcBmEF8V0vm-Q --insecure" dir= execID=c0275
time="2023-11-03T13:25:21Z" level=debug msg="Name:               argocd-e2e/test-crd-status-subresource-action\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-crd-status-subresource-action-kkjrx\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-crd-status-subresource-action\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               crd-subresource\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (f8441bc)\nHealth Status:      Healthy\n\nGROUP                 KIND                      NAMESPACE                                             NAME                               STATUS   HEALTH  HOOK  MESSAGE\napiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-crd-status-subresource-action-kkjrx  nonstatussubresources.argoproj.io  Running  Synced        customresourcedefinition.apiextensions.k8s.io/nonstatussubresources.argoproj.io unchanged\napiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-crd-status-subresource-action-kkjrx  statussubresources.argoproj.io     Running  Synced        customresourcedefinition.apiextensions.k8s.io/statussubresources.argoproj.io unchanged\nargoproj.io           NonStatusSubResource      argocd-e2e--test-crd-status-subresource-action-kkjrx  non-status-subresource             Synced                 nonstatussubresource.argoproj.io/non-status-subresource created\nargoproj.io           StatusSubResource         argocd-e2e--test-crd-status-subresource-action-kkjrx  status-subresource                 Synced                 statussubresource.argoproj.io/status-subresource created\napiextensions.k8s.io  CustomResourceDefinition                                                        nonstatussubresources.argoproj.io  Synced                 \napiextensions.k8s.io  CustomResourceDefinition                                                        statussubresources.argoproj.io     Synced                 \n" duration=196.379607ms execID=c0275
time="2023-11-03T13:25:21Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:25:21Z" level=info msg="../../dist/argocd app actions run test-crd-status-subresource-action --kind StatusSubResource update-both --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDMxNCwibmJmIjoxNjk5MDE3OTE0LCJpYXQiOjE2OTkwMTc5MTQsImp0aSI6ImQyOGU4M2U4LTU2YTMtNDk0NS04MDRmLWFiMzM0OTRhYzk3OSJ9.zkjjqb9P6Nkd-cbhbd_MnrxQHjsZKgKcBmEF8V0vm-Q --insecure" dir= execID=d3c49
time="2023-11-03T13:25:21Z" level=debug duration=140.693463ms execID=d3c49
time="2023-11-03T13:25:21Z" level=info msg="kubectl -n argocd-e2e--test-crd-status-subresource-action-kkjrx get statussubresources status-subresource -o jsonpath={.spec.foo}" dir=. execID=ad369
time="2023-11-03T13:25:22Z" level=debug msg=update-both duration=261.12039ms execID=ad369
time="2023-11-03T13:25:22Z" level=info msg="kubectl -n argocd-e2e--test-crd-status-subresource-action-kkjrx get statussubresources status-subresource -o jsonpath={.status.bar}" dir=. execID=b53ba
time="2023-11-03T13:25:22Z" level=debug msg=update-both duration=216.160818ms execID=b53ba
time="2023-11-03T13:25:22Z" level=info msg="../../dist/argocd app actions run test-crd-status-subresource-action --kind StatusSubResource update-spec --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDMxNCwibmJmIjoxNjk5MDE3OTE0LCJpYXQiOjE2OTkwMTc5MTQsImp0aSI6ImQyOGU4M2U4LTU2YTMtNDk0NS04MDRmLWFiMzM0OTRhYzk3OSJ9.zkjjqb9P6Nkd-cbhbd_MnrxQHjsZKgKcBmEF8V0vm-Q --insecure" dir= execID=b7d7f
time="2023-11-03T13:25:22Z" level=debug duration=232.230018ms execID=b7d7f
time="2023-11-03T13:25:22Z" level=info msg="kubectl -n argocd-e2e--test-crd-status-subresource-action-kkjrx get statussubresources status-subresource -o jsonpath={.spec.foo}" dir=. execID=e3135
time="2023-11-03T13:25:22Z" level=debug msg=update-spec duration=263.792661ms execID=e3135
time="2023-11-03T13:25:22Z" level=info msg="../../dist/argocd app actions run test-crd-status-subresource-action --kind StatusSubResource update-status --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDMxNCwibmJmIjoxNjk5MDE3OTE0LCJpYXQiOjE2OTkwMTc5MTQsImp0aSI6ImQyOGU4M2U4LTU2YTMtNDk0NS04MDRmLWFiMzM0OTRhYzk3OSJ9.zkjjqb9P6Nkd-cbhbd_MnrxQHjsZKgKcBmEF8V0vm-Q --insecure" dir= execID=3dd8e
time="2023-11-03T13:25:23Z" level=debug duration=187.091081ms execID=3dd8e
time="2023-11-03T13:25:23Z" level=info msg="kubectl -n argocd-e2e--test-crd-status-subresource-action-kkjrx get statussubresources status-subresource -o jsonpath={.status.bar}" dir=. execID=e611f
time="2023-11-03T13:25:23Z" level=debug msg=update-status duration=212.346319ms execID=e611f
time="2023-11-03T13:25:23Z" level=info msg="../../dist/argocd app actions run test-crd-status-subresource-action --kind NonStatusSubResource update-both --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDMxNCwibmJmIjoxNjk5MDE3OTE0LCJpYXQiOjE2OTkwMTc5MTQsImp0aSI6ImQyOGU4M2U4LTU2YTMtNDk0NS04MDRmLWFiMzM0OTRhYzk3OSJ9.zkjjqb9P6Nkd-cbhbd_MnrxQHjsZKgKcBmEF8V0vm-Q --insecure" dir= execID=757c9
time="2023-11-03T13:25:23Z" level=debug duration=182.997243ms execID=757c9
time="2023-11-03T13:25:23Z" level=info msg="kubectl -n argocd-e2e--test-crd-status-subresource-action-kkjrx get nonstatussubresources non-status-subresource -o jsonpath={.spec.foo}" dir=. execID=f89ae
time="2023-11-03T13:25:23Z" level=debug msg=update-both duration=296.393552ms execID=f89ae
time="2023-11-03T13:25:23Z" level=info msg="kubectl -n argocd-e2e--test-crd-status-subresource-action-kkjrx get nonstatussubresources non-status-subresource -o jsonpath={.status.bar}" dir=. execID=c9c71
time="2023-11-03T13:25:24Z" level=debug msg=update-both duration=299.732273ms execID=c9c71
time="2023-11-03T13:25:24Z" level=info msg="../../dist/argocd app actions run test-crd-status-subresource-action --kind NonStatusSubResource update-spec --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDMxNCwibmJmIjoxNjk5MDE3OTE0LCJpYXQiOjE2OTkwMTc5MTQsImp0aSI6ImQyOGU4M2U4LTU2YTMtNDk0NS04MDRmLWFiMzM0OTRhYzk3OSJ9.zkjjqb9P6Nkd-cbhbd_MnrxQHjsZKgKcBmEF8V0vm-Q --insecure" dir= execID=5f52c
time="2023-11-03T13:25:24Z" level=debug duration=161.407097ms execID=5f52c
time="2023-11-03T13:25:24Z" level=info msg="kubectl -n argocd-e2e--test-crd-status-subresource-action-kkjrx get nonstatussubresources non-status-subresource -o jsonpath={.spec.foo}" dir=. execID=5e46e
time="2023-11-03T13:25:24Z" level=debug msg=update-spec duration=158.649307ms execID=5e46e
time="2023-11-03T13:25:24Z" level=info msg="../../dist/argocd app actions run test-crd-status-subresource-action --kind NonStatusSubResource update-status --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDMxNCwibmJmIjoxNjk5MDE3OTE0LCJpYXQiOjE2OTkwMTc5MTQsImp0aSI6ImQyOGU4M2U4LTU2YTMtNDk0NS04MDRmLWFiMzM0OTRhYzk3OSJ9.zkjjqb9P6Nkd-cbhbd_MnrxQHjsZKgKcBmEF8V0vm-Q --insecure" dir= execID=fa612
time="2023-11-03T13:25:24Z" level=debug duration=210.265833ms execID=fa612
time="2023-11-03T13:25:24Z" level=info msg="kubectl -n argocd-e2e--test-crd-status-subresource-action-kkjrx get nonstatussubresources non-status-subresource -o jsonpath={.status.bar}" dir=. execID=7a539
time="2023-11-03T13:25:24Z" level=debug msg=update-status duration=286.243266ms execID=7a539
time="2023-11-03T13:25:24Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCRDStatusSubresourceAction (12.60s)
=== RUN   TestAppLogs
    fixture.go:901: 
--- SKIP: TestAppLogs (0.00s)
=== RUN   TestAppWaitOperationInProgress
time="2023-11-03T13:25:24Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=90217
time="2023-11-03T13:25:25Z" level=debug msg="namespace \"argocd-e2e--test-crd-status-subresource-action-kkjrx\" deleted\n" duration=256.770733ms execID=90217
time="2023-11-03T13:25:25Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=51b67
time="2023-11-03T13:25:25Z" level=debug msg="No resources found\n" duration=529.341659ms execID=51b67
time="2023-11-03T13:25:25Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=f053d
time="2023-11-03T13:25:25Z" level=debug msg="No resources found\n" duration=172.987146ms execID=f053d
time="2023-11-03T13:25:26Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:25:26Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDMyNiwibmJmIjoxNjk5MDE3OTI2LCJpYXQiOjE2OTkwMTc5MjYsImp0aSI6ImY4MzRmYzg4LTYyZjYtNGQ3NS04NGEyLTYxNTQ3NDIwN2U5YyJ9.AvoKJQntEIXvP0HifyA1WkwJwHcI00js7nD6TyNF3tM --insecure" dir= execID=a25db
time="2023-11-03T13:25:26Z" level=debug duration=75.475579ms execID=a25db
time="2023-11-03T13:25:26Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=34562
time="2023-11-03T13:25:26Z" level=debug duration=2.177167ms execID=34562
time="2023-11-03T13:25:26Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=fcaa5
time="2023-11-03T13:25:26Z" level=debug duration=1.636968ms execID=fcaa5
time="2023-11-03T13:25:26Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=7c029
time="2023-11-03T13:25:26Z" level=debug duration=1.635523ms execID=7c029
time="2023-11-03T13:25:26Z" level=info msg="pkill -9 gpg-agent" dir= execID=104a6
time="2023-11-03T13:25:26Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=eba8c
time="2023-11-03T13:25:26Z" level=debug duration=9.843172ms execID=eba8c
time="2023-11-03T13:25:26Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=ff8b4
time="2023-11-03T13:25:26Z" level=debug duration=34.89046ms execID=ff8b4
time="2023-11-03T13:25:26Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=1d074
time="2023-11-03T13:25:26Z" level=debug duration=1.8631ms execID=1d074
time="2023-11-03T13:25:26Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=9845c
time="2023-11-03T13:25:26Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.7439ms execID=9845c
time="2023-11-03T13:25:26Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=d8fdd
time="2023-11-03T13:25:26Z" level=debug duration=34.145207ms execID=d8fdd
time="2023-11-03T13:25:26Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=277db
time="2023-11-03T13:25:26Z" level=debug duration=28.230949ms execID=277db
time="2023-11-03T13:25:26Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=bd5dd
time="2023-11-03T13:25:26Z" level=debug duration=4.591371ms execID=bd5dd
time="2023-11-03T13:25:26Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=361b5
Handling connection for 9081
time="2023-11-03T13:25:27Z" level=debug duration=88.104222ms execID=361b5
time="2023-11-03T13:25:27Z" level=info msg="kubectl create ns argocd-e2e--test-app-wait-operation-in-progress-sgtkk" dir= execID=e8591
time="2023-11-03T13:25:27Z" level=debug msg="namespace/argocd-e2e--test-app-wait-operation-in-progress-sgtkk created\n" duration=168.358671ms execID=e8591
time="2023-11-03T13:25:27Z" level=info msg="kubectl label ns argocd-e2e--test-app-wait-operation-in-progress-sgtkk e2e.argoproj.io=true" dir= execID=5e807
time="2023-11-03T13:25:27Z" level=debug msg="namespace/argocd-e2e--test-app-wait-operation-in-progress-sgtkk labeled\n" duration=259.46419ms execID=5e807
time="2023-11-03T13:25:27Z" level=info msg="clean state" duration=2.644744452s id=TestAppWaitOperationInProgress-sgtkk name=TestAppWaitOperationInProgress password=password username=admin
time="2023-11-03T13:25:28Z" level=info msg="../../dist/argocd app create test-app-wait-operation-in-progress --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path hook-and-deployment --project default --dest-namespace argocd-e2e--test-app-wait-operation-in-progress-sgtkk --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDMyNiwibmJmIjoxNjk5MDE3OTI2LCJpYXQiOjE2OTkwMTc5MjYsImp0aSI6ImY4MzRmYzg4LTYyZjYtNGQ3NS04NGEyLTYxNTQ3NDIwN2U5YyJ9.AvoKJQntEIXvP0HifyA1WkwJwHcI00js7nD6TyNF3tM --insecure" dir= execID=bce8c
time="2023-11-03T13:25:28Z" level=debug msg="application 'test-app-wait-operation-in-progress' created\n" duration=276.281636ms execID=bce8c
time="2023-11-03T13:25:28Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:25:28Z" level=info msg="../../dist/argocd app sync test-app-wait-operation-in-progress --timeout 30 --async --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDMyNiwibmJmIjoxNjk5MDE3OTI2LCJpYXQiOjE2OTkwMTc5MjYsImp0aSI6ImY4MzRmYzg4LTYyZjYtNGQ3NS04NGEyLTYxNTQ3NDIwN2U5YyJ9.AvoKJQntEIXvP0HifyA1WkwJwHcI00js7nD6TyNF3tM --insecure" dir= execID=975e3
time="2023-11-03T13:25:28Z" level=debug duration=107.859703ms execID=975e3
time="2023-11-03T13:25:28Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:25:28Z" level=info msg="expectation succeeded: operation phase should be Running, is Running"
time="2023-11-03T13:25:28Z" level=info msg="../../dist/argocd app wait test-app-wait-operation-in-progress --suspended --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDMyNiwibmJmIjoxNjk5MDE3OTI2LCJpYXQiOjE2OTkwMTc5MjYsImp0aSI6ImY4MzRmYzg4LTYyZjYtNGQ3NS04NGEyLTYxNTQ3NDIwN2U5YyJ9.AvoKJQntEIXvP0HifyA1WkwJwHcI00js7nD6TyNF3tM --insecure" dir= execID=145f1
time="2023-11-03T13:25:33Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:25:33+00:00   apps  Deployment  argocd-e2e--test-app-wait-operation-in-progress-sgtkk         my-deployment  OutOfSync  Missing              \n2023-11-03T13:25:33+00:00   apps  Deployment  argocd-e2e--test-app-wait-operation-in-progress-sgtkk         my-deployment  OutOfSync  Missing              deployment.apps/my-deployment created\n2023-11-03T13:25:33+00:00  batch         Job  argocd-e2e--test-app-wait-operation-in-progress-sgtkk               my-hook   Running    Synced        Sync  job.batch/my-hook created\n\nName:               argocd-e2e/test-app-wait-operation-in-progress\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-app-wait-operation-in-progress-sgtkk\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-app-wait-operation-in-progress\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               hook-and-deployment\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (8648e58)\nHealth Status:      Suspended\n\n\nGROUP  KIND        NAMESPACE                                              NAME           STATUS  HEALTH     HOOK  MESSAGE\napps   Deployment  argocd-e2e--test-app-wait-operation-in-progress-sgtkk  my-deployment  Synced  Suspended        deployment.apps/my-deployment created\nbatch  Job         argocd-e2e--test-app-wait-operation-in-progress-sgtkk  my-hook        Failed             Sync  Lua returned an invalid health status\n" duration=4.862512855s execID=145f1
time="2023-11-03T13:25:33Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestAppWaitOperationInProgress (8.92s)
=== RUN   TestSyncOptionReplace
time="2023-11-03T13:25:33Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=822b6
time="2023-11-03T13:25:34Z" level=debug msg="namespace \"argocd-e2e--test-app-wait-operation-in-progress-sgtkk\" deleted\n" duration=412.284665ms execID=822b6
time="2023-11-03T13:25:34Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=0d41a
time="2023-11-03T13:25:34Z" level=debug msg="No resources found\n" duration=468.862206ms execID=0d41a
time="2023-11-03T13:25:34Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=76013
time="2023-11-03T13:25:35Z" level=debug msg="No resources found\n" duration=335.064026ms execID=76013
time="2023-11-03T13:25:35Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:25:35Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDMzNSwibmJmIjoxNjk5MDE3OTM1LCJpYXQiOjE2OTkwMTc5MzUsImp0aSI6IjM2ZjllMGE2LTA3MGQtNGIwYS04NzUwLTJkODkyM2YwMzZhOSJ9.0eQTOo4CjEM2JedShvHAfpzCGGi8FEGUyjxDLEg5OU4 --insecure" dir= execID=7d49f
time="2023-11-03T13:25:35Z" level=debug duration=105.374ms execID=7d49f
time="2023-11-03T13:25:35Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=11548
time="2023-11-03T13:25:35Z" level=debug duration=1.979439ms execID=11548
time="2023-11-03T13:25:35Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=a66de
time="2023-11-03T13:25:35Z" level=debug duration=1.850211ms execID=a66de
time="2023-11-03T13:25:35Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=2b8ff
time="2023-11-03T13:25:35Z" level=debug duration=1.612329ms execID=2b8ff
time="2023-11-03T13:25:35Z" level=info msg="pkill -9 gpg-agent" dir= execID=5b2c8
time="2023-11-03T13:25:35Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=a53b4
time="2023-11-03T13:25:35Z" level=debug duration=10.440898ms execID=a53b4
time="2023-11-03T13:25:35Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=62489
time="2023-11-03T13:25:35Z" level=debug duration=57.273031ms execID=62489
time="2023-11-03T13:25:35Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=073d9
time="2023-11-03T13:25:35Z" level=debug duration=1.811196ms execID=073d9
time="2023-11-03T13:25:35Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=99f98
time="2023-11-03T13:25:35Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.914597ms execID=99f98
time="2023-11-03T13:25:35Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=333aa
time="2023-11-03T13:25:35Z" level=debug duration=29.859517ms execID=333aa
time="2023-11-03T13:25:35Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=c6f5a
time="2023-11-03T13:25:36Z" level=debug duration=29.318281ms execID=c6f5a
time="2023-11-03T13:25:36Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=db221
time="2023-11-03T13:25:36Z" level=debug duration=2.674353ms execID=db221
time="2023-11-03T13:25:36Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=2b22f
Handling connection for 9081
time="2023-11-03T13:25:36Z" level=debug duration=62.099079ms execID=2b22f
time="2023-11-03T13:25:36Z" level=info msg="kubectl create ns argocd-e2e--test-sync-option-replace-bjphr" dir= execID=8e58b
time="2023-11-03T13:25:36Z" level=debug msg="namespace/argocd-e2e--test-sync-option-replace-bjphr created\n" duration=175.877802ms execID=8e58b
time="2023-11-03T13:25:36Z" level=info msg="kubectl label ns argocd-e2e--test-sync-option-replace-bjphr e2e.argoproj.io=true" dir= execID=327fd
time="2023-11-03T13:25:36Z" level=debug msg="namespace/argocd-e2e--test-sync-option-replace-bjphr labeled\n" duration=361.794255ms execID=327fd
time="2023-11-03T13:25:36Z" level=info msg="clean state" duration=2.867998723s id=TestSyncOptionReplace-bjphr name=TestSyncOptionReplace password=password username=admin
time="2023-11-03T13:25:37Z" level=info msg=patching jsonPatch="[{\"op\": \"add\", \"path\": \"/metadata/annotations\", \"value\": {\"argocd.argoproj.io/sync-options\": \"Replace=true\"}}]" path=config-map/config-map.yaml
time="2023-11-03T13:25:37Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:25:37Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"data\":{\"foo\":\"bar\"},\"kind\":\"ConfigMap\",\"metadata\":{\"name\":\"my-map\"}}"
time="2023-11-03T13:25:37Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:25:37Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=98ac2
time="2023-11-03T13:25:37Z" level=debug msg="diff --git a/config-map/config-map.yaml b/config-map/config-map.yaml\nindex b781028..7f81ec6 100644\n--- a/config-map/config-map.yaml\n+++ b/config-map/config-map.yaml\n@@ -1,6 +1,8 @@\n apiVersion: v1\n+data:\n+  foo: bar\n kind: ConfigMap\n metadata:\n+  annotations:\n+    argocd.argoproj.io/sync-options: Replace=true\n   name: my-map\n-data:\n-  foo: bar\n\\ No newline at end of file\n" duration=3.679048ms execID=98ac2
time="2023-11-03T13:25:37Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=e7107
time="2023-11-03T13:25:37Z" level=debug msg="[master 2a6ba67] patch\n 1 file changed, 4 insertions(+), 2 deletions(-)\n" duration=9.96543ms execID=e7107
time="2023-11-03T13:25:37Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=3a7ec
Handling connection for 9081
time="2023-11-03T13:25:37Z" level=debug duration=40.013553ms execID=3a7ec
time="2023-11-03T13:25:37Z" level=info msg="../../dist/argocd app create test-sync-option-replace --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path config-map --project default --dest-namespace argocd-e2e--test-sync-option-replace-bjphr --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDMzNSwibmJmIjoxNjk5MDE3OTM1LCJpYXQiOjE2OTkwMTc5MzUsImp0aSI6IjM2ZjllMGE2LTA3MGQtNGIwYS04NzUwLTJkODkyM2YwMzZhOSJ9.0eQTOo4CjEM2JedShvHAfpzCGGi8FEGUyjxDLEg5OU4 --insecure" dir= execID=1bb97
time="2023-11-03T13:25:37Z" level=debug msg="application 'test-sync-option-replace' created\n" duration=239.532782ms execID=1bb97
time="2023-11-03T13:25:37Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:25:37Z" level=info msg="../../dist/argocd app sync test-sync-option-replace --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDMzNSwibmJmIjoxNjk5MDE3OTM1LCJpYXQiOjE2OTkwMTc5MzUsImp0aSI6IjM2ZjllMGE2LTA3MGQtNGIwYS04NzUwLTJkODkyM2YwMzZhOSJ9.0eQTOo4CjEM2JedShvHAfpzCGGi8FEGUyjxDLEg5OU4 --insecure" dir= execID=8b9b9
time="2023-11-03T13:25:43Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:25:42+00:00          ConfigMap  argocd-e2e--test-sync-option-replace-bjphr                my-map  OutOfSync  Missing              \n2023-11-03T13:25:43+00:00          ConfigMap  argocd-e2e--test-sync-option-replace-bjphr                my-map  OutOfSync  Missing              configmap/my-map created\n2023-11-03T13:25:43+00:00          ConfigMap  argocd-e2e--test-sync-option-replace-bjphr                my-map    Synced  Missing              configmap/my-map created\n\nName:               argocd-e2e/test-sync-option-replace\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-sync-option-replace-bjphr\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-sync-option-replace\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               config-map\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (2a6ba67)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      2a6ba67cbf7db2c84dd5a0ee852fd424640170e9\nPhase:              Succeeded\nStart:              2023-11-03 13:25:38 +0000 UTC\nFinished:           2023-11-03 13:25:43 +0000 UTC\nDuration:           5s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                   NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-sync-option-replace-bjphr  my-map  Synced                configmap/my-map created\n" duration=5.402225827s execID=8b9b9
time="2023-11-03T13:25:43Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:25:43Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:25:43Z" level=info msg="../../dist/argocd app sync test-sync-option-replace --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDMzNSwibmJmIjoxNjk5MDE3OTM1LCJpYXQiOjE2OTkwMTc5MzUsImp0aSI6IjM2ZjllMGE2LTA3MGQtNGIwYS04NzUwLTJkODkyM2YwMzZhOSJ9.0eQTOo4CjEM2JedShvHAfpzCGGi8FEGUyjxDLEg5OU4 --insecure" dir= execID=117a1
time="2023-11-03T13:25:43Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:25:43+00:00          ConfigMap  argocd-e2e--test-sync-option-replace-bjphr                my-map    Synced                       \n\nName:               argocd-e2e/test-sync-option-replace\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-sync-option-replace-bjphr\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-sync-option-replace\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               config-map\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (2a6ba67)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      2a6ba67cbf7db2c84dd5a0ee852fd424640170e9\nPhase:              Succeeded\nStart:              2023-11-03 13:25:43 +0000 UTC\nFinished:           2023-11-03 13:25:43 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                   NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-sync-option-replace-bjphr  my-map  Synced                configmap/my-map replaced\n" duration=381.04688ms execID=117a1
time="2023-11-03T13:25:43Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:25:43Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:25:43Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestSyncOptionReplace (9.97s)
=== RUN   TestSyncOptionReplaceFromCLI
time="2023-11-03T13:25:43Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=77c0a
time="2023-11-03T13:25:44Z" level=debug msg="namespace \"argocd-e2e--test-sync-option-replace-bjphr\" deleted\n" duration=243.490668ms execID=77c0a
time="2023-11-03T13:25:44Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=451e9
time="2023-11-03T13:25:44Z" level=debug msg="No resources found\n" duration=530.074097ms execID=451e9
time="2023-11-03T13:25:44Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=90084
time="2023-11-03T13:25:44Z" level=debug msg="No resources found\n" duration=270.519241ms execID=90084
time="2023-11-03T13:25:45Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:25:45Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDM0NSwibmJmIjoxNjk5MDE3OTQ1LCJpYXQiOjE2OTkwMTc5NDUsImp0aSI6IjUxMGRjNTdjLTVhOTEtNDI0OS05YzY1LTY0MjNiZGM4MTY4YyJ9.d3mttppvZGak-Bv-7LllzjJoT_0Fge-EZo6Ok_BVV5E --insecure" dir= execID=7cb8a
time="2023-11-03T13:25:45Z" level=debug duration=70.361383ms execID=7cb8a
time="2023-11-03T13:25:45Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=3285d
time="2023-11-03T13:25:45Z" level=debug duration=2.141998ms execID=3285d
time="2023-11-03T13:25:45Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=8f38d
time="2023-11-03T13:25:45Z" level=debug duration=1.683878ms execID=8f38d
time="2023-11-03T13:25:45Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=56a05
time="2023-11-03T13:25:45Z" level=debug duration=1.600294ms execID=56a05
time="2023-11-03T13:25:45Z" level=info msg="pkill -9 gpg-agent" dir= execID=10cac
time="2023-11-03T13:25:45Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=4d0d2
time="2023-11-03T13:25:45Z" level=debug duration=9.685005ms execID=4d0d2
time="2023-11-03T13:25:45Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=70e6a
time="2023-11-03T13:25:45Z" level=debug duration=33.76242ms execID=70e6a
time="2023-11-03T13:25:45Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=40399
time="2023-11-03T13:25:45Z" level=debug duration=1.902173ms execID=40399
time="2023-11-03T13:25:45Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=225bb
time="2023-11-03T13:25:45Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.012176ms execID=225bb
time="2023-11-03T13:25:45Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=d76f9
time="2023-11-03T13:25:45Z" level=debug duration=27.293581ms execID=d76f9
time="2023-11-03T13:25:45Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=e1c4e
time="2023-11-03T13:25:45Z" level=debug duration=31.014422ms execID=e1c4e
time="2023-11-03T13:25:45Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=286a2
time="2023-11-03T13:25:45Z" level=debug duration=2.49636ms execID=286a2
time="2023-11-03T13:25:45Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=dbc3c
Handling connection for 9081
time="2023-11-03T13:25:46Z" level=debug duration=70.565419ms execID=dbc3c
time="2023-11-03T13:25:46Z" level=info msg="kubectl create ns argocd-e2e--test-sync-option-replace-from-cli-puwds" dir= execID=12b37
time="2023-11-03T13:25:46Z" level=debug msg="namespace/argocd-e2e--test-sync-option-replace-from-cli-puwds created\n" duration=147.919414ms execID=12b37
time="2023-11-03T13:25:46Z" level=info msg="kubectl label ns argocd-e2e--test-sync-option-replace-from-cli-puwds e2e.argoproj.io=true" dir= execID=f0197
time="2023-11-03T13:25:46Z" level=debug msg="namespace/argocd-e2e--test-sync-option-replace-from-cli-puwds labeled\n" duration=289.539405ms execID=f0197
time="2023-11-03T13:25:46Z" level=info msg="clean state" duration=2.720006559s id=TestSyncOptionReplaceFromCLI-puwds name=TestSyncOptionReplaceFromCLI password=password username=admin
time="2023-11-03T13:25:47Z" level=info msg="../../dist/argocd app create test-sync-option-replace-from-cli --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path config-map --project default --dest-namespace argocd-e2e--test-sync-option-replace-from-cli-puwds --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDM0NSwibmJmIjoxNjk5MDE3OTQ1LCJpYXQiOjE2OTkwMTc5NDUsImp0aSI6IjUxMGRjNTdjLTVhOTEtNDI0OS05YzY1LTY0MjNiZGM4MTY4YyJ9.d3mttppvZGak-Bv-7LllzjJoT_0Fge-EZo6Ok_BVV5E --insecure" dir= execID=0d286
time="2023-11-03T13:25:47Z" level=debug msg="application 'test-sync-option-replace-from-cli' created\n" duration=216.557009ms execID=0d286
time="2023-11-03T13:25:47Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:25:47Z" level=info msg="../../dist/argocd app sync test-sync-option-replace-from-cli --timeout 30 --prune --replace --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDM0NSwibmJmIjoxNjk5MDE3OTQ1LCJpYXQiOjE2OTkwMTc5NDUsImp0aSI6IjUxMGRjNTdjLTVhOTEtNDI0OS05YzY1LTY0MjNiZGM4MTY4YyJ9.d3mttppvZGak-Bv-7LllzjJoT_0Fge-EZo6Ok_BVV5E --insecure" dir= execID=bc419
time="2023-11-03T13:25:48Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                           NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:25:47+00:00          ConfigMap  argocd-e2e--test-sync-option-replace-from-cli-puwds                my-map  OutOfSync  Missing              \n2023-11-03T13:25:48+00:00          ConfigMap  argocd-e2e--test-sync-option-replace-from-cli-puwds                my-map  OutOfSync  Missing              configmap/my-map created\n2023-11-03T13:25:48+00:00          ConfigMap  argocd-e2e--test-sync-option-replace-from-cli-puwds                my-map    Synced  Missing              configmap/my-map created\n\nName:               argocd-e2e/test-sync-option-replace-from-cli\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-sync-option-replace-from-cli-puwds\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-sync-option-replace-from-cli\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               config-map\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (1166080)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      116608065d2c96cf8f881ffbe963f5d4e3118dc9\nPhase:              Succeeded\nStart:              2023-11-03 13:25:47 +0000 UTC\nFinished:           2023-11-03 13:25:48 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                            NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-sync-option-replace-from-cli-puwds  my-map  Synced                configmap/my-map created\n" duration=641.012001ms execID=bc419
time="2023-11-03T13:25:48Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:25:48Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:25:48Z" level=info msg="../../dist/argocd app sync test-sync-option-replace-from-cli --timeout 30 --prune --replace --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDM0NSwibmJmIjoxNjk5MDE3OTQ1LCJpYXQiOjE2OTkwMTc5NDUsImp0aSI6IjUxMGRjNTdjLTVhOTEtNDI0OS05YzY1LTY0MjNiZGM4MTY4YyJ9.d3mttppvZGak-Bv-7LllzjJoT_0Fge-EZo6Ok_BVV5E --insecure" dir= execID=34a3f
time="2023-11-03T13:25:48Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                           NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:25:48+00:00          ConfigMap  argocd-e2e--test-sync-option-replace-from-cli-puwds                my-map    Synced                       \n\nName:               argocd-e2e/test-sync-option-replace-from-cli\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-sync-option-replace-from-cli-puwds\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-sync-option-replace-from-cli\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               config-map\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (1166080)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      116608065d2c96cf8f881ffbe963f5d4e3118dc9\nPhase:              Succeeded\nStart:              2023-11-03 13:25:48 +0000 UTC\nFinished:           2023-11-03 13:25:48 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                            NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-sync-option-replace-from-cli-puwds  my-map  Synced                configmap/my-map replaced\n" duration=228.383516ms execID=34a3f
time="2023-11-03T13:25:48Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:25:48Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:25:48Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestSyncOptionReplaceFromCLI (4.83s)
=== RUN   TestDiscoverNewCommit
time="2023-11-03T13:25:48Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=eaa91
time="2023-11-03T13:25:48Z" level=debug msg="namespace \"argocd-e2e--test-sync-option-replace-from-cli-puwds\" deleted\n" duration=244.977295ms execID=eaa91
time="2023-11-03T13:25:48Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=4578d
time="2023-11-03T13:25:49Z" level=debug msg="No resources found\n" duration=573.475499ms execID=4578d
time="2023-11-03T13:25:49Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=68e8e
time="2023-11-03T13:25:49Z" level=debug msg="No resources found\n" duration=226.446572ms execID=68e8e
time="2023-11-03T13:25:50Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:25:50Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDM1MCwibmJmIjoxNjk5MDE3OTUwLCJpYXQiOjE2OTkwMTc5NTAsImp0aSI6IjBmNWIzYTI1LTZhOGMtNDAxMi1iNWVjLTFhNWYxMzQ1M2QzOSJ9.qv5cldpn56YHso84o0g5sFyAKIUgFATQVwWn3DmXvgQ --insecure" dir= execID=26459
time="2023-11-03T13:25:50Z" level=debug duration=170.669588ms execID=26459
time="2023-11-03T13:25:50Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=0d8da
time="2023-11-03T13:25:50Z" level=debug duration=2.056157ms execID=0d8da
time="2023-11-03T13:25:50Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=bebc6
time="2023-11-03T13:25:50Z" level=debug duration=1.778441ms execID=bebc6
time="2023-11-03T13:25:50Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=8e4dc
time="2023-11-03T13:25:50Z" level=debug duration=1.53301ms execID=8e4dc
time="2023-11-03T13:25:50Z" level=info msg="pkill -9 gpg-agent" dir= execID=57973
time="2023-11-03T13:25:50Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=6d129
time="2023-11-03T13:25:50Z" level=debug duration=11.657317ms execID=6d129
time="2023-11-03T13:25:50Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=a9c8c
time="2023-11-03T13:25:50Z" level=debug duration=80.133827ms execID=a9c8c
time="2023-11-03T13:25:50Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=6782a
time="2023-11-03T13:25:50Z" level=debug duration=1.989804ms execID=6782a
time="2023-11-03T13:25:50Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=9d424
time="2023-11-03T13:25:50Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.170113ms execID=9d424
time="2023-11-03T13:25:50Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=0a31a
time="2023-11-03T13:25:50Z" level=debug duration=26.796696ms execID=0a31a
time="2023-11-03T13:25:50Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=be582
time="2023-11-03T13:25:50Z" level=debug duration=27.609025ms execID=be582
time="2023-11-03T13:25:50Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=6efaa
time="2023-11-03T13:25:50Z" level=debug duration=2.889653ms execID=6efaa
time="2023-11-03T13:25:50Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=00dcc
Handling connection for 9081
time="2023-11-03T13:25:50Z" level=debug duration=70.721923ms execID=00dcc
time="2023-11-03T13:25:50Z" level=info msg="kubectl create ns argocd-e2e--test-discover-new-commit-pmlko" dir= execID=9cc02
time="2023-11-03T13:25:50Z" level=debug msg="namespace/argocd-e2e--test-discover-new-commit-pmlko created\n" duration=150.904057ms execID=9cc02
time="2023-11-03T13:25:50Z" level=info msg="kubectl label ns argocd-e2e--test-discover-new-commit-pmlko e2e.argoproj.io=true" dir= execID=b8e39
time="2023-11-03T13:25:51Z" level=debug msg="namespace/argocd-e2e--test-discover-new-commit-pmlko labeled\n" duration=304.159152ms execID=b8e39
time="2023-11-03T13:25:51Z" level=info msg="clean state" duration=2.58734083s id=TestDiscoverNewCommit-pmlko name=TestDiscoverNewCommit password=password username=admin
time="2023-11-03T13:25:52Z" level=info msg="../../dist/argocd app create test-discover-new-commit --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path config-map --project default --dest-namespace argocd-e2e--test-discover-new-commit-pmlko --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDM1MCwibmJmIjoxNjk5MDE3OTUwLCJpYXQiOjE2OTkwMTc5NTAsImp0aSI6IjBmNWIzYTI1LTZhOGMtNDAxMi1iNWVjLTFhNWYxMzQ1M2QzOSJ9.qv5cldpn56YHso84o0g5sFyAKIUgFATQVwWn3DmXvgQ --insecure" dir= execID=654f6
time="2023-11-03T13:25:52Z" level=debug msg="application 'test-discover-new-commit' created\n" duration=241.531986ms execID=654f6
time="2023-11-03T13:25:52Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:25:52Z" level=info msg="../../dist/argocd app sync test-discover-new-commit --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDM1MCwibmJmIjoxNjk5MDE3OTUwLCJpYXQiOjE2OTkwMTc5NTAsImp0aSI6IjBmNWIzYTI1LTZhOGMtNDAxMi1iNWVjLTFhNWYxMzQ1M2QzOSJ9.qv5cldpn56YHso84o0g5sFyAKIUgFATQVwWn3DmXvgQ --insecure" dir= execID=14bce
time="2023-11-03T13:25:53Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:25:52+00:00          ConfigMap  argocd-e2e--test-discover-new-commit-pmlko                my-map  OutOfSync  Missing              \n\nName:               argocd-e2e/test-discover-new-commit\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-discover-new-commit-pmlko\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-discover-new-commit\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               config-map\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (021e947)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      021e947387f0712a17c68d561e90915569251429\nPhase:              Succeeded\nStart:              2023-11-03 13:25:52 +0000 UTC\nFinished:           2023-11-03 13:25:52 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                   NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-discover-new-commit-pmlko  my-map  Synced                configmap/my-map created\n" duration=614.847487ms execID=14bce
time="2023-11-03T13:25:53Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:25:53Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:25:53Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/data/foo\", \"value\": \"hello\"}]" path=config-map/config-map.yaml
time="2023-11-03T13:25:53Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:25:53Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"data\":{\"foo\":\"bar\"},\"kind\":\"ConfigMap\",\"metadata\":{\"name\":\"my-map\"}}"
time="2023-11-03T13:25:53Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:25:53Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=dda16
time="2023-11-03T13:25:53Z" level=debug msg="diff --git a/config-map/config-map.yaml b/config-map/config-map.yaml\nindex b781028..2838440 100644\n--- a/config-map/config-map.yaml\n+++ b/config-map/config-map.yaml\n@@ -1,6 +1,6 @@\n apiVersion: v1\n+data:\n+  foo: hello\n kind: ConfigMap\n metadata:\n   name: my-map\n-data:\n-  foo: bar\n\\ No newline at end of file\n" duration=4.896931ms execID=dda16
time="2023-11-03T13:25:53Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=22034
time="2023-11-03T13:25:53Z" level=debug msg="[master 15092c0] patch\n 1 file changed, 2 insertions(+), 2 deletions(-)\n" duration=12.775872ms execID=22034
time="2023-11-03T13:25:53Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=701d4
Handling connection for 9081
time="2023-11-03T13:25:53Z" level=debug duration=37.652359ms execID=701d4
time="2023-11-03T13:25:53Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:25:53Z" level=info msg="../../dist/argocd app get test-discover-new-commit --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDM1MCwibmJmIjoxNjk5MDE3OTUwLCJpYXQiOjE2OTkwMTc5NTAsImp0aSI6IjBmNWIzYTI1LTZhOGMtNDAxMi1iNWVjLTFhNWYxMzQ1M2QzOSJ9.qv5cldpn56YHso84o0g5sFyAKIUgFATQVwWn3DmXvgQ --insecure" dir= execID=425ff
time="2023-11-03T13:25:53Z" level=debug msg="Name:               argocd-e2e/test-discover-new-commit\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-discover-new-commit-pmlko\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-discover-new-commit\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               config-map\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (15092c0)\nHealth Status:      Healthy\n\nGROUP  KIND       NAMESPACE                                   NAME    STATUS     HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-discover-new-commit-pmlko  my-map  OutOfSync                configmap/my-map created\n" duration=213.628724ms execID=425ff
time="2023-11-03T13:25:53Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:25:53Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:25:53Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestDiscoverNewCommit (4.75s)
=== RUN   TestDisableManifestGeneration
time="2023-11-03T13:25:53Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=2b4f5
time="2023-11-03T13:25:53Z" level=debug msg="namespace \"argocd-e2e--test-discover-new-commit-pmlko\" deleted\n" duration=202.744111ms execID=2b4f5
time="2023-11-03T13:25:53Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=250cf
time="2023-11-03T13:25:53Z" level=debug msg="No resources found\n" duration=386.0849ms execID=250cf
time="2023-11-03T13:25:53Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=5bbdc
time="2023-11-03T13:25:54Z" level=debug msg="No resources found\n" duration=285.262548ms execID=5bbdc
time="2023-11-03T13:25:54Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:25:54Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDM1NCwibmJmIjoxNjk5MDE3OTU0LCJpYXQiOjE2OTkwMTc5NTQsImp0aSI6IjQ0NDg1ZjllLTQxNWEtNDUzZi1hNTdkLTQyNzQ2ZDVmYjFjMyJ9.euISIe_m-qo-7JFiCBDC2omHiXcIPEZtqmOK_lzFV8Q --insecure" dir= execID=e02c6
time="2023-11-03T13:25:55Z" level=debug duration=101.28622ms execID=e02c6
time="2023-11-03T13:25:55Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=e504b
time="2023-11-03T13:25:55Z" level=debug duration=2.19911ms execID=e504b
time="2023-11-03T13:25:55Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=034f4
time="2023-11-03T13:25:55Z" level=debug duration=2.164356ms execID=034f4
time="2023-11-03T13:25:55Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=ac9c9
time="2023-11-03T13:25:55Z" level=debug duration=2.065148ms execID=ac9c9
time="2023-11-03T13:25:55Z" level=info msg="pkill -9 gpg-agent" dir= execID=df2bc
time="2023-11-03T13:25:55Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=04818
time="2023-11-03T13:25:55Z" level=debug duration=10.00407ms execID=04818
time="2023-11-03T13:25:55Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=816d9
time="2023-11-03T13:25:55Z" level=debug duration=54.128845ms execID=816d9
time="2023-11-03T13:25:55Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=d9bf1
time="2023-11-03T13:25:55Z" level=debug duration=2.114586ms execID=d9bf1
time="2023-11-03T13:25:55Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=9a260
time="2023-11-03T13:25:55Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.067263ms execID=9a260
time="2023-11-03T13:25:55Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=221d7
time="2023-11-03T13:25:55Z" level=debug duration=27.233075ms execID=221d7
time="2023-11-03T13:25:55Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=8031d
time="2023-11-03T13:25:55Z" level=debug duration=24.871092ms execID=8031d
time="2023-11-03T13:25:55Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=52f5d
time="2023-11-03T13:25:55Z" level=debug duration=2.23463ms execID=52f5d
time="2023-11-03T13:25:55Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=4827c
Handling connection for 9081
time="2023-11-03T13:25:55Z" level=debug duration=88.212906ms execID=4827c
time="2023-11-03T13:25:55Z" level=info msg="kubectl create ns argocd-e2e--test-disable-manifest-generation-bozzj" dir= execID=92455
time="2023-11-03T13:25:55Z" level=debug msg="namespace/argocd-e2e--test-disable-manifest-generation-bozzj created\n" duration=147.144889ms execID=92455
time="2023-11-03T13:25:55Z" level=info msg="kubectl label ns argocd-e2e--test-disable-manifest-generation-bozzj e2e.argoproj.io=true" dir= execID=db344
time="2023-11-03T13:25:55Z" level=debug msg="namespace/argocd-e2e--test-disable-manifest-generation-bozzj labeled\n" duration=327.283449ms execID=db344
time="2023-11-03T13:25:55Z" level=info msg="clean state" duration=2.451041873s id=TestDisableManifestGeneration-bozzj name=TestDisableManifestGeneration password=password username=admin
time="2023-11-03T13:25:56Z" level=info msg="../../dist/argocd app create test-disable-manifest-generation --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-disable-manifest-generation-bozzj --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDM1NCwibmJmIjoxNjk5MDE3OTU0LCJpYXQiOjE2OTkwMTc5NTQsImp0aSI6IjQ0NDg1ZjllLTQxNWEtNDUzZi1hNTdkLTQyNzQ2ZDVmYjFjMyJ9.euISIe_m-qo-7JFiCBDC2omHiXcIPEZtqmOK_lzFV8Q --insecure" dir= execID=76eeb
time="2023-11-03T13:25:56Z" level=debug msg="application 'test-disable-manifest-generation' created\n" duration=223.429312ms execID=76eeb
time="2023-11-03T13:25:56Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:25:56Z" level=info msg="../../dist/argocd app get test-disable-manifest-generation --hard-refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDM1NCwibmJmIjoxNjk5MDE3OTU0LCJpYXQiOjE2OTkwMTc5NTQsImp0aSI6IjQ0NDg1ZjllLTQxNWEtNDUzZi1hNTdkLTQyNzQ2ZDVmYjFjMyJ9.euISIe_m-qo-7JFiCBDC2omHiXcIPEZtqmOK_lzFV8Q --insecure" dir= execID=12836
time="2023-11-03T13:25:57Z" level=debug msg="Name:               argocd-e2e/test-disable-manifest-generation\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-disable-manifest-generation-bozzj\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-disable-manifest-generation\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (b61994e)\nHealth Status:      Missing\n\nGROUP  KIND        NAMESPACE                                           NAME          STATUS     HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-disable-manifest-generation-bozzj  guestbook-ui  OutOfSync  Missing        \napps   Deployment  argocd-e2e--test-disable-manifest-generation-bozzj  guestbook-ui  OutOfSync  Missing        \n" duration=261.107001ms execID=12836
time="2023-11-03T13:25:57Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:25:57Z" level=info msg="../../dist/argocd app get test-disable-manifest-generation --hard-refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDM1NCwibmJmIjoxNjk5MDE3OTU0LCJpYXQiOjE2OTkwMTc5NTQsImp0aSI6IjQ0NDg1ZjllLTQxNWEtNDUzZi1hNTdkLTQyNzQ2ZDVmYjFjMyJ9.euISIe_m-qo-7JFiCBDC2omHiXcIPEZtqmOK_lzFV8Q --insecure" dir= execID=deaba
time="2023-11-03T13:25:57Z" level=debug msg="Name:               argocd-e2e/test-disable-manifest-generation\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-disable-manifest-generation-bozzj\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-disable-manifest-generation\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (b61994e)\nHealth Status:      Missing\n\nGROUP                    KIND           NAMESPACE                                           NAME          STATUS     HEALTH   HOOK  MESSAGE\n                         Service        argocd-e2e--test-disable-manifest-generation-bozzj  guestbook-ui  OutOfSync  Missing        \napps                     Deployment     argocd-e2e--test-disable-manifest-generation-bozzj  guestbook-ui  OutOfSync  Missing        \nkustomize.config.k8s.io  Kustomization  argocd-e2e--test-disable-manifest-generation-bozzj                OutOfSync  Missing        \n" duration=234.952971ms execID=deaba
time="2023-11-03T13:25:57Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:25:58Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestDisableManifestGeneration (5.20s)
=== RUN   TestSwitchTrackingMethod
time="2023-11-03T13:25:58Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=3cba9
time="2023-11-03T13:25:58Z" level=debug msg="namespace \"argocd-e2e--test-disable-manifest-generation-bozzj\" deleted\n" duration=280.749912ms execID=3cba9
time="2023-11-03T13:25:58Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=7d907
time="2023-11-03T13:25:59Z" level=debug msg="No resources found\n" duration=444.158932ms execID=7d907
time="2023-11-03T13:25:59Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=7f650
time="2023-11-03T13:25:59Z" level=debug msg="No resources found\n" duration=254.888756ms execID=7f650
time="2023-11-03T13:26:00Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:26:00Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDM2MCwibmJmIjoxNjk5MDE3OTYwLCJpYXQiOjE2OTkwMTc5NjAsImp0aSI6IjU1N2Y0MGJjLWQ4NTItNDhhNS04MzAwLWY5MzY4MDU4MmI3MyJ9.JAQygRfFcBRAI4xbAFY_4kVl7V6HlE2dJVUNuywlcpk --insecure" dir= execID=4fe49
time="2023-11-03T13:26:00Z" level=debug duration=69.137812ms execID=4fe49
time="2023-11-03T13:26:00Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=b44c8
time="2023-11-03T13:26:00Z" level=debug duration=2.000279ms execID=b44c8
time="2023-11-03T13:26:00Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=69483
time="2023-11-03T13:26:00Z" level=debug duration=1.742708ms execID=69483
time="2023-11-03T13:26:00Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=4092e
time="2023-11-03T13:26:00Z" level=debug duration=1.519212ms execID=4092e
time="2023-11-03T13:26:00Z" level=info msg="pkill -9 gpg-agent" dir= execID=da2be
time="2023-11-03T13:26:00Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=e8bbd
time="2023-11-03T13:26:00Z" level=debug duration=9.770881ms execID=e8bbd
time="2023-11-03T13:26:00Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=79255
time="2023-11-03T13:26:00Z" level=debug duration=35.963481ms execID=79255
time="2023-11-03T13:26:00Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=98819
time="2023-11-03T13:26:00Z" level=debug duration=1.852001ms execID=98819
time="2023-11-03T13:26:00Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=b0ed3
time="2023-11-03T13:26:00Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.914951ms execID=b0ed3
time="2023-11-03T13:26:00Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=a01a8
time="2023-11-03T13:26:00Z" level=debug duration=27.142169ms execID=a01a8
time="2023-11-03T13:26:00Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=9a766
time="2023-11-03T13:26:00Z" level=debug duration=23.602449ms execID=9a766
time="2023-11-03T13:26:00Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=af24d
time="2023-11-03T13:26:00Z" level=debug duration=2.851821ms execID=af24d
time="2023-11-03T13:26:00Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=f8df8
Handling connection for 9081
time="2023-11-03T13:26:00Z" level=debug duration=76.934495ms execID=f8df8
time="2023-11-03T13:26:00Z" level=info msg="kubectl create ns argocd-e2e--test-switch-tracking-method-slemu" dir= execID=d7862
time="2023-11-03T13:26:01Z" level=debug msg="namespace/argocd-e2e--test-switch-tracking-method-slemu created\n" duration=176.834431ms execID=d7862
time="2023-11-03T13:26:01Z" level=info msg="kubectl label ns argocd-e2e--test-switch-tracking-method-slemu e2e.argoproj.io=true" dir= execID=1e3d2
time="2023-11-03T13:26:01Z" level=debug msg="namespace/argocd-e2e--test-switch-tracking-method-slemu labeled\n" duration=201.190539ms execID=1e3d2
time="2023-11-03T13:26:01Z" level=info msg="clean state" duration=2.74934085s id=TestSwitchTrackingMethod-slemu name=TestSwitchTrackingMethod password=password username=admin
time="2023-11-03T13:26:02Z" level=info msg="../../dist/argocd app create test-switch-tracking-method --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path deployment --project default --dest-namespace argocd-e2e--test-switch-tracking-method-slemu --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDM2MCwibmJmIjoxNjk5MDE3OTYwLCJpYXQiOjE2OTkwMTc5NjAsImp0aSI6IjU1N2Y0MGJjLWQ4NTItNDhhNS04MzAwLWY5MzY4MDU4MmI3MyJ9.JAQygRfFcBRAI4xbAFY_4kVl7V6HlE2dJVUNuywlcpk --insecure" dir= execID=bf808
time="2023-11-03T13:26:02Z" level=debug msg="application 'test-switch-tracking-method' created\n" duration=218.029224ms execID=bf808
time="2023-11-03T13:26:02Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:26:02Z" level=info msg="../../dist/argocd app sync test-switch-tracking-method --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDM2MCwibmJmIjoxNjk5MDE3OTYwLCJpYXQiOjE2OTkwMTc5NjAsImp0aSI6IjU1N2Y0MGJjLWQ4NTItNDhhNS04MzAwLWY5MzY4MDU4MmI3MyJ9.JAQygRfFcBRAI4xbAFY_4kVl7V6HlE2dJVUNuywlcpk --insecure" dir= execID=fc396
time="2023-11-03T13:26:08Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:26:07+00:00   apps  Deployment  argocd-e2e--test-switch-tracking-method-slemu      nginx-deployment  OutOfSync  Missing              \n2023-11-03T13:26:08+00:00   apps  Deployment  argocd-e2e--test-switch-tracking-method-slemu      nginx-deployment  OutOfSync  Missing              deployment.apps/nginx-deployment created\n2023-11-03T13:26:08+00:00   apps  Deployment  argocd-e2e--test-switch-tracking-method-slemu      nginx-deployment    Synced  Progressing              deployment.apps/nginx-deployment created\n\nName:               argocd-e2e/test-switch-tracking-method\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-switch-tracking-method-slemu\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-switch-tracking-method\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               deployment\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (c9944e8)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      c9944e84c1d46cc610e3b0e0854bfdbcd7b6f825\nPhase:              Succeeded\nStart:              2023-11-03 13:26:02 +0000 UTC\nFinished:           2023-11-03 13:26:08 +0000 UTC\nDuration:           6s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                      NAME              STATUS  HEALTH   HOOK  MESSAGE\napps   Deployment  argocd-e2e--test-switch-tracking-method-slemu  nginx-deployment  Synced  Healthy        deployment.apps/nginx-deployment created\n" duration=5.717014722s execID=fc396
time="2023-11-03T13:26:08Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:26:08Z" level=info msg="../../dist/argocd app get test-switch-tracking-method --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDM2MCwibmJmIjoxNjk5MDE3OTYwLCJpYXQiOjE2OTkwMTc5NjAsImp0aSI6IjU1N2Y0MGJjLWQ4NTItNDhhNS04MzAwLWY5MzY4MDU4MmI3MyJ9.JAQygRfFcBRAI4xbAFY_4kVl7V6HlE2dJVUNuywlcpk --insecure" dir= execID=09a59
time="2023-11-03T13:26:08Z" level=debug msg="Name:               argocd-e2e/test-switch-tracking-method\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-switch-tracking-method-slemu\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-switch-tracking-method\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               deployment\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (c9944e8)\nHealth Status:      Healthy\n\nGROUP  KIND        NAMESPACE                                      NAME              STATUS  HEALTH   HOOK  MESSAGE\napps   Deployment  argocd-e2e--test-switch-tracking-method-slemu  nginx-deployment  Synced  Healthy        deployment.apps/nginx-deployment created\n" duration=136.266076ms execID=09a59
time="2023-11-03T13:26:08Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:26:08Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:26:08Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:26:08Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:26:08Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:26:08Z" level=info msg="pending: sync status to be OutOfSync, is Synced"
time="2023-11-03T13:26:11Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:26:11Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:26:11Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:26:11Z" level=info msg="pending: sync status to be Synced, is OutOfSync"
time="2023-11-03T13:26:14Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:26:14Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:26:14Z" level=info msg="../../dist/argocd app sync test-switch-tracking-method --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDM2MCwibmJmIjoxNjk5MDE3OTYwLCJpYXQiOjE2OTkwMTc5NjAsImp0aSI6IjU1N2Y0MGJjLWQ4NTItNDhhNS04MzAwLWY5MzY4MDU4MmI3MyJ9.JAQygRfFcBRAI4xbAFY_4kVl7V6HlE2dJVUNuywlcpk --insecure" dir= execID=28a14
time="2023-11-03T13:26:19Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                     NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:26:14+00:00   apps  Deployment  argocd-e2e--test-switch-tracking-method-slemu      nginx-deployment    Synced  Healthy              \n2023-11-03T13:26:19+00:00   apps  Deployment  argocd-e2e--test-switch-tracking-method-slemu      nginx-deployment    Synced  Progressing              \n2023-11-03T13:26:19+00:00   apps  Deployment  argocd-e2e--test-switch-tracking-method-slemu      nginx-deployment    Synced  Progressing              deployment.apps/nginx-deployment configured\n2023-11-03T13:26:19+00:00   apps  Deployment  argocd-e2e--test-switch-tracking-method-slemu      nginx-deployment    Synced  Healthy              deployment.apps/nginx-deployment configured\n\nName:               argocd-e2e/test-switch-tracking-method\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-switch-tracking-method-slemu\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-switch-tracking-method\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               deployment\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (c9944e8)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      c9944e84c1d46cc610e3b0e0854bfdbcd7b6f825\nPhase:              Succeeded\nStart:              2023-11-03 13:26:14 +0000 UTC\nFinished:           2023-11-03 13:26:19 +0000 UTC\nDuration:           5s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                      NAME              STATUS  HEALTH   HOOK  MESSAGE\napps   Deployment  argocd-e2e--test-switch-tracking-method-slemu  nginx-deployment  Synced  Healthy        deployment.apps/nginx-deployment configured\n" duration=5.573734644s execID=28a14
time="2023-11-03T13:26:19Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:26:19Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:26:19Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:26:19Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:26:20Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:26:20Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:26:20Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:26:20Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:26:20Z" level=info msg="pending: sync status to be OutOfSync, is Synced"
time="2023-11-03T13:26:23Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:26:23Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:26:23Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:26:23Z" level=info msg="pending: sync status to be Synced, is OutOfSync"
time="2023-11-03T13:26:26Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:26:26Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:26:26Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestSwitchTrackingMethod (27.60s)
=== RUN   TestSwitchTrackingLabel
time="2023-11-03T13:26:26Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=2d0db
time="2023-11-03T13:26:26Z" level=debug msg="namespace \"argocd-e2e--test-switch-tracking-method-slemu\" deleted\n" duration=205.386174ms execID=2d0db
time="2023-11-03T13:26:26Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=b0b7d
time="2023-11-03T13:26:26Z" level=debug msg="No resources found\n" duration=450.672151ms execID=b0b7d
time="2023-11-03T13:26:26Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=3584c
time="2023-11-03T13:26:27Z" level=debug msg="No resources found\n" duration=248.38092ms execID=3584c
time="2023-11-03T13:26:28Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:26:28Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDM4OCwibmJmIjoxNjk5MDE3OTg4LCJpYXQiOjE2OTkwMTc5ODgsImp0aSI6IjIyZjQwMjU5LTZhYzEtNDVkOS04ZTg2LTIyZDBkYWMxYWE0MCJ9.d7Fhbe9sS2oClMJ0k2pK7YIxWVNwHaV3Xwf7moLAHnc --insecure" dir= execID=34716
time="2023-11-03T13:26:28Z" level=debug duration=88.492506ms execID=34716
time="2023-11-03T13:26:28Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=ee2ce
time="2023-11-03T13:26:28Z" level=debug duration=1.945369ms execID=ee2ce
time="2023-11-03T13:26:28Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=75434
time="2023-11-03T13:26:28Z" level=debug duration=1.626261ms execID=75434
time="2023-11-03T13:26:28Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=9208b
time="2023-11-03T13:26:28Z" level=debug duration=1.446439ms execID=9208b
time="2023-11-03T13:26:28Z" level=info msg="pkill -9 gpg-agent" dir= execID=af742
time="2023-11-03T13:26:28Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=7e658
time="2023-11-03T13:26:28Z" level=debug duration=10.688707ms execID=7e658
time="2023-11-03T13:26:28Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=bb3d1
time="2023-11-03T13:26:28Z" level=debug duration=34.360239ms execID=bb3d1
time="2023-11-03T13:26:28Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=5c848
time="2023-11-03T13:26:28Z" level=debug duration=1.910861ms execID=5c848
time="2023-11-03T13:26:28Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=43de0
time="2023-11-03T13:26:28Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=14.956771ms execID=43de0
time="2023-11-03T13:26:28Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=8d887
time="2023-11-03T13:26:28Z" level=debug duration=26.114222ms execID=8d887
time="2023-11-03T13:26:28Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=dde73
time="2023-11-03T13:26:28Z" level=debug duration=23.201624ms execID=dde73
time="2023-11-03T13:26:28Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=5f7a4
time="2023-11-03T13:26:28Z" level=debug duration=2.30176ms execID=5f7a4
time="2023-11-03T13:26:28Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=e79d8
Handling connection for 9081
time="2023-11-03T13:26:28Z" level=debug duration=81.350419ms execID=e79d8
time="2023-11-03T13:26:28Z" level=info msg="kubectl create ns argocd-e2e--test-switch-tracking-label-gcqgn" dir= execID=2d320
time="2023-11-03T13:26:28Z" level=debug msg="namespace/argocd-e2e--test-switch-tracking-label-gcqgn created\n" duration=166.307837ms execID=2d320
time="2023-11-03T13:26:28Z" level=info msg="kubectl label ns argocd-e2e--test-switch-tracking-label-gcqgn e2e.argoproj.io=true" dir= execID=db6a9
time="2023-11-03T13:26:28Z" level=debug msg="namespace/argocd-e2e--test-switch-tracking-label-gcqgn labeled\n" duration=228.128999ms execID=db6a9
time="2023-11-03T13:26:28Z" level=info msg="clean state" duration=2.656574882s id=TestSwitchTrackingLabel-gcqgn name=TestSwitchTrackingLabel password=password username=admin
time="2023-11-03T13:26:29Z" level=info msg="../../dist/argocd app create test-switch-tracking-label --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path deployment --project default --dest-namespace argocd-e2e--test-switch-tracking-label-gcqgn --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDM4OCwibmJmIjoxNjk5MDE3OTg4LCJpYXQiOjE2OTkwMTc5ODgsImp0aSI6IjIyZjQwMjU5LTZhYzEtNDVkOS04ZTg2LTIyZDBkYWMxYWE0MCJ9.d7Fhbe9sS2oClMJ0k2pK7YIxWVNwHaV3Xwf7moLAHnc --insecure" dir= execID=2b0cb
time="2023-11-03T13:26:29Z" level=debug msg="application 'test-switch-tracking-label' created\n" duration=212.823555ms execID=2b0cb
time="2023-11-03T13:26:29Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:26:29Z" level=info msg="../../dist/argocd app sync test-switch-tracking-label --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDM4OCwibmJmIjoxNjk5MDE3OTg4LCJpYXQiOjE2OTkwMTc5ODgsImp0aSI6IjIyZjQwMjU5LTZhYzEtNDVkOS04ZTg2LTIyZDBkYWMxYWE0MCJ9.d7Fhbe9sS2oClMJ0k2pK7YIxWVNwHaV3Xwf7moLAHnc --insecure" dir= execID=2165c
time="2023-11-03T13:26:30Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                    NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:26:30+00:00   apps  Deployment  argocd-e2e--test-switch-tracking-label-gcqgn      nginx-deployment  OutOfSync  Missing              \n2023-11-03T13:26:30+00:00   apps  Deployment  argocd-e2e--test-switch-tracking-label-gcqgn      nginx-deployment  OutOfSync  Missing              deployment.apps/nginx-deployment created\n2023-11-03T13:26:30+00:00   apps  Deployment  argocd-e2e--test-switch-tracking-label-gcqgn      nginx-deployment    Synced  Progressing              deployment.apps/nginx-deployment created\n\nName:               argocd-e2e/test-switch-tracking-label\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-switch-tracking-label-gcqgn\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-switch-tracking-label\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               deployment\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (785b528)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      785b5280b79e05ba3754a0d912162323e620ac51\nPhase:              Succeeded\nStart:              2023-11-03 13:26:30 +0000 UTC\nFinished:           2023-11-03 13:26:30 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                     NAME              STATUS  HEALTH   HOOK  MESSAGE\napps   Deployment  argocd-e2e--test-switch-tracking-label-gcqgn  nginx-deployment  Synced  Healthy        deployment.apps/nginx-deployment created\n" duration=705.848997ms execID=2165c
time="2023-11-03T13:26:30Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:26:30Z" level=info msg="../../dist/argocd app get test-switch-tracking-label --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDM4OCwibmJmIjoxNjk5MDE3OTg4LCJpYXQiOjE2OTkwMTc5ODgsImp0aSI6IjIyZjQwMjU5LTZhYzEtNDVkOS04ZTg2LTIyZDBkYWMxYWE0MCJ9.d7Fhbe9sS2oClMJ0k2pK7YIxWVNwHaV3Xwf7moLAHnc --insecure" dir= execID=55126
time="2023-11-03T13:26:30Z" level=debug msg="Name:               argocd-e2e/test-switch-tracking-label\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-switch-tracking-label-gcqgn\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-switch-tracking-label\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               deployment\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (785b528)\nHealth Status:      Healthy\n\nGROUP  KIND        NAMESPACE                                     NAME              STATUS  HEALTH   HOOK  MESSAGE\napps   Deployment  argocd-e2e--test-switch-tracking-label-gcqgn  nginx-deployment  Synced  Healthy        deployment.apps/nginx-deployment created\n" duration=159.089369ms execID=55126
time="2023-11-03T13:26:30Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:26:30Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:26:30Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:26:30Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:26:30Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:26:30Z" level=info msg="pending: sync status to be OutOfSync, is Synced"
time="2023-11-03T13:26:33Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:26:33Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:26:33Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:26:33Z" level=info msg="pending: sync status to be Synced, is OutOfSync"
time="2023-11-03T13:26:36Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:26:36Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:26:36Z" level=info msg="../../dist/argocd app sync test-switch-tracking-label --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDM4OCwibmJmIjoxNjk5MDE3OTg4LCJpYXQiOjE2OTkwMTc5ODgsImp0aSI6IjIyZjQwMjU5LTZhYzEtNDVkOS04ZTg2LTIyZDBkYWMxYWE0MCJ9.d7Fhbe9sS2oClMJ0k2pK7YIxWVNwHaV3Xwf7moLAHnc --insecure" dir= execID=d108a
time="2023-11-03T13:26:41Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                    NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:26:37+00:00   apps  Deployment  argocd-e2e--test-switch-tracking-label-gcqgn      nginx-deployment    Synced  Healthy              \n2023-11-03T13:26:41+00:00   apps  Deployment  argocd-e2e--test-switch-tracking-label-gcqgn      nginx-deployment    Synced  Healthy              deployment.apps/nginx-deployment configured\n\nName:               argocd-e2e/test-switch-tracking-label\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-switch-tracking-label-gcqgn\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-switch-tracking-label\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               deployment\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (785b528)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      785b5280b79e05ba3754a0d912162323e620ac51\nPhase:              Succeeded\nStart:              2023-11-03 13:26:37 +0000 UTC\nFinished:           2023-11-03 13:26:41 +0000 UTC\nDuration:           4s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                     NAME              STATUS  HEALTH   HOOK  MESSAGE\napps   Deployment  argocd-e2e--test-switch-tracking-label-gcqgn  nginx-deployment  Synced  Healthy        deployment.apps/nginx-deployment configured\n" duration=4.263196699s execID=d108a
time="2023-11-03T13:26:41Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:26:41Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:26:41Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:26:41Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:26:41Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:26:41Z" level=info msg="pending: sync status to be OutOfSync, is Synced"
time="2023-11-03T13:26:44Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:26:44Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:26:44Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:26:44Z" level=info msg="pending: sync status to be Synced, is OutOfSync"
time="2023-11-03T13:26:47Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:26:47Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:26:47Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:26:47Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:26:47Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:26:47Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestSwitchTrackingLabel (21.19s)
=== RUN   TestAnnotationTrackingExtraResources
time="2023-11-03T13:26:47Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=5112f
time="2023-11-03T13:26:47Z" level=debug msg="namespace \"argocd-e2e--test-switch-tracking-label-gcqgn\" deleted\n" duration=288.881842ms execID=5112f
time="2023-11-03T13:26:47Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=0197f
time="2023-11-03T13:26:48Z" level=debug msg="No resources found\n" duration=507.91011ms execID=0197f
time="2023-11-03T13:26:48Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=be9a2
time="2023-11-03T13:26:48Z" level=debug msg="No resources found\n" duration=346.536795ms execID=be9a2
time="2023-11-03T13:26:49Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:26:49Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDQwOSwibmJmIjoxNjk5MDE4MDA5LCJpYXQiOjE2OTkwMTgwMDksImp0aSI6ImU3YmJmNDJkLTQ3MzItNGVjYi1iMzA5LTY1OWI3MzhmMTVmNiJ9.JGtuFjn8NKt8uUoIjFk29mdEobTbFNRfaQPKQ6gRNQk --insecure" dir= execID=29206
time="2023-11-03T13:26:49Z" level=debug duration=84.372851ms execID=29206
time="2023-11-03T13:26:49Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=09c52
time="2023-11-03T13:26:49Z" level=debug duration=2.068043ms execID=09c52
time="2023-11-03T13:26:49Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=1a649
time="2023-11-03T13:26:49Z" level=debug duration=1.685914ms execID=1a649
time="2023-11-03T13:26:49Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=c552e
time="2023-11-03T13:26:49Z" level=debug duration=1.498621ms execID=c552e
time="2023-11-03T13:26:49Z" level=info msg="pkill -9 gpg-agent" dir= execID=5dd95
time="2023-11-03T13:26:49Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=73d8a
time="2023-11-03T13:26:49Z" level=debug duration=14.509497ms execID=73d8a
time="2023-11-03T13:26:49Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=f3c72
time="2023-11-03T13:26:49Z" level=debug duration=58.468332ms execID=f3c72
time="2023-11-03T13:26:49Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=1bd02
time="2023-11-03T13:26:49Z" level=debug duration=1.964289ms execID=1bd02
time="2023-11-03T13:26:49Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=3a70a
time="2023-11-03T13:26:49Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.098553ms execID=3a70a
time="2023-11-03T13:26:49Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=ebe2e
time="2023-11-03T13:26:49Z" level=debug duration=27.810353ms execID=ebe2e
time="2023-11-03T13:26:49Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=1e3ce
time="2023-11-03T13:26:49Z" level=debug duration=22.362468ms execID=1e3ce
time="2023-11-03T13:26:49Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=d621a
time="2023-11-03T13:26:49Z" level=debug duration=2.29535ms execID=d621a
time="2023-11-03T13:26:49Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=bd180
Handling connection for 9081
time="2023-11-03T13:26:49Z" level=debug duration=77.369357ms execID=bd180
time="2023-11-03T13:26:49Z" level=info msg="kubectl create ns argocd-e2e--test-annotation-tracking-extra-resources-amqsb" dir= execID=3191b
time="2023-11-03T13:26:49Z" level=debug msg="namespace/argocd-e2e--test-annotation-tracking-extra-resources-amqsb created\n" duration=186.929114ms execID=3191b
time="2023-11-03T13:26:49Z" level=info msg="kubectl label ns argocd-e2e--test-annotation-tracking-extra-resources-amqsb e2e.argoproj.io=true" dir= execID=d347d
time="2023-11-03T13:26:50Z" level=debug msg="namespace/argocd-e2e--test-annotation-tracking-extra-resources-amqsb labeled\n" duration=277.668622ms execID=d347d
time="2023-11-03T13:26:50Z" level=info msg="clean state" duration=2.74973518s id=TestAnnotationTrackingExtraResources-amqsb name=TestAnnotationTrackingExtraResources password=password username=admin
time="2023-11-03T13:26:51Z" level=info msg="../../dist/argocd app create test-annotation-tracking-extra-resources --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path deployment --project default --dest-namespace argocd-e2e--test-annotation-tracking-extra-resources-amqsb --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDQwOSwibmJmIjoxNjk5MDE4MDA5LCJpYXQiOjE2OTkwMTgwMDksImp0aSI6ImU3YmJmNDJkLTQ3MzItNGVjYi1iMzA5LTY1OWI3MzhmMTVmNiJ9.JGtuFjn8NKt8uUoIjFk29mdEobTbFNRfaQPKQ6gRNQk --insecure" dir= execID=d2b90
time="2023-11-03T13:26:51Z" level=debug msg="application 'test-annotation-tracking-extra-resources' created\n" duration=212.305717ms execID=d2b90
time="2023-11-03T13:26:51Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:26:51Z" level=info msg="../../dist/argocd app sync test-annotation-tracking-extra-resources --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDQwOSwibmJmIjoxNjk5MDE4MDA5LCJpYXQiOjE2OTkwMTgwMDksImp0aSI6ImU3YmJmNDJkLTQ3MzItNGVjYi1iMzA5LTY1OWI3MzhmMTVmNiJ9.JGtuFjn8NKt8uUoIjFk29mdEobTbFNRfaQPKQ6gRNQk --insecure" dir= execID=647a2
time="2023-11-03T13:26:55Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:26:54+00:00   apps  Deployment  argocd-e2e--test-annotation-tracking-extra-resources-amqsb      nginx-deployment  OutOfSync  Missing              \n2023-11-03T13:26:55+00:00   apps  Deployment  argocd-e2e--test-annotation-tracking-extra-resources-amqsb      nginx-deployment  OutOfSync  Missing              deployment.apps/nginx-deployment created\n2023-11-03T13:26:55+00:00   apps  Deployment  argocd-e2e--test-annotation-tracking-extra-resources-amqsb      nginx-deployment    Synced  Progressing              deployment.apps/nginx-deployment created\n\nName:               argocd-e2e/test-annotation-tracking-extra-resources\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-annotation-tracking-extra-resources-amqsb\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-annotation-tracking-extra-resources\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               deployment\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (d3f7eb8)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      d3f7eb85283e04cc38c3d2dcce49363f15c7f22f\nPhase:              Succeeded\nStart:              2023-11-03 13:26:51 +0000 UTC\nFinished:           2023-11-03 13:26:55 +0000 UTC\nDuration:           4s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                                   NAME              STATUS  HEALTH   HOOK  MESSAGE\napps   Deployment  argocd-e2e--test-annotation-tracking-extra-resources-amqsb  nginx-deployment  Synced  Healthy        deployment.apps/nginx-deployment created\n" duration=4.18505625s execID=647a2
time="2023-11-03T13:26:55Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:26:55Z" level=info msg="../../dist/argocd app get test-annotation-tracking-extra-resources --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDQwOSwibmJmIjoxNjk5MDE4MDA5LCJpYXQiOjE2OTkwMTgwMDksImp0aSI6ImU3YmJmNDJkLTQ3MzItNGVjYi1iMzA5LTY1OWI3MzhmMTVmNiJ9.JGtuFjn8NKt8uUoIjFk29mdEobTbFNRfaQPKQ6gRNQk --insecure" dir= execID=f1c88
time="2023-11-03T13:26:55Z" level=debug msg="Name:               argocd-e2e/test-annotation-tracking-extra-resources\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-annotation-tracking-extra-resources-amqsb\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-annotation-tracking-extra-resources\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               deployment\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (d3f7eb8)\nHealth Status:      Healthy\n\nGROUP  KIND        NAMESPACE                                                   NAME              STATUS  HEALTH   HOOK  MESSAGE\napps   Deployment  argocd-e2e--test-annotation-tracking-extra-resources-amqsb  nginx-deployment  Synced  Healthy        deployment.apps/nginx-deployment created\n" duration=204.096892ms execID=f1c88
time="2023-11-03T13:26:55Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:26:55Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:26:55Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:26:55Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:26:55Z" level=info msg="../../dist/argocd app get test-annotation-tracking-extra-resources --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDQwOSwibmJmIjoxNjk5MDE4MDA5LCJpYXQiOjE2OTkwMTgwMDksImp0aSI6ImU3YmJmNDJkLTQ3MzItNGVjYi1iMzA5LTY1OWI3MzhmMTVmNiJ9.JGtuFjn8NKt8uUoIjFk29mdEobTbFNRfaQPKQ6gRNQk --insecure" dir= execID=80a4e
time="2023-11-03T13:26:55Z" level=debug msg="Name:               argocd-e2e/test-annotation-tracking-extra-resources\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-annotation-tracking-extra-resources-amqsb\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-annotation-tracking-extra-resources\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               deployment\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (d3f7eb8)\nHealth Status:      Healthy\n\nGROUP  KIND        NAMESPACE                                                   NAME              STATUS  HEALTH   HOOK  MESSAGE\napps   Deployment  argocd-e2e--test-annotation-tracking-extra-resources-amqsb  nginx-deployment  Synced  Healthy        deployment.apps/nginx-deployment created\n       ConfigMap   argocd-e2e--test-annotation-tracking-extra-resources-amqsb  extra-configmap                          \n" duration=166.563074ms execID=80a4e
time="2023-11-03T13:26:55Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:26:55Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:26:55Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:26:55Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:26:55Z" level=info msg="../../dist/argocd app sync --prune test-annotation-tracking-extra-resources --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDQwOSwibmJmIjoxNjk5MDE4MDA5LCJpYXQiOjE2OTkwMTgwMDksImp0aSI6ImU3YmJmNDJkLTQ3MzItNGVjYi1iMzA5LTY1OWI3MzhmMTVmNiJ9.JGtuFjn8NKt8uUoIjFk29mdEobTbFNRfaQPKQ6gRNQk --insecure" dir= execID=73215
time="2023-11-03T13:26:56Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:26:55+00:00          ConfigMap  argocd-e2e--test-annotation-tracking-extra-resources-amqsb       extra-configmap                                 \n2023-11-03T13:26:55+00:00   apps  Deployment  argocd-e2e--test-annotation-tracking-extra-resources-amqsb      nginx-deployment    Synced  Healthy              \n2023-11-03T13:26:56+00:00   apps  Deployment  argocd-e2e--test-annotation-tracking-extra-resources-amqsb      nginx-deployment    Synced  Healthy              deployment.apps/nginx-deployment unchanged\n\nName:               argocd-e2e/test-annotation-tracking-extra-resources\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-annotation-tracking-extra-resources-amqsb\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-annotation-tracking-extra-resources\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               deployment\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (d3f7eb8)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      d3f7eb85283e04cc38c3d2dcce49363f15c7f22f\nPhase:              Succeeded\nStart:              2023-11-03 13:26:55 +0000 UTC\nFinished:           2023-11-03 13:26:56 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                                   NAME              STATUS  HEALTH   HOOK  MESSAGE\napps   Deployment  argocd-e2e--test-annotation-tracking-extra-resources-amqsb  nginx-deployment  Synced  Healthy        deployment.apps/nginx-deployment unchanged\n       ConfigMap   argocd-e2e--test-annotation-tracking-extra-resources-amqsb  extra-configmap                          \n" duration=649.760775ms execID=73215
time="2023-11-03T13:26:56Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:26:56Z" level=info msg="../../dist/argocd app get test-annotation-tracking-extra-resources --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDQwOSwibmJmIjoxNjk5MDE4MDA5LCJpYXQiOjE2OTkwMTgwMDksImp0aSI6ImU3YmJmNDJkLTQ3MzItNGVjYi1iMzA5LTY1OWI3MzhmMTVmNiJ9.JGtuFjn8NKt8uUoIjFk29mdEobTbFNRfaQPKQ6gRNQk --insecure" dir= execID=8853f
time="2023-11-03T13:26:56Z" level=debug msg="Name:               argocd-e2e/test-annotation-tracking-extra-resources\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-annotation-tracking-extra-resources-amqsb\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-annotation-tracking-extra-resources\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               deployment\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (d3f7eb8)\nHealth Status:      Healthy\n\nGROUP  KIND        NAMESPACE                                                   NAME              STATUS     HEALTH   HOOK  MESSAGE\napps   Deployment  argocd-e2e--test-annotation-tracking-extra-resources-amqsb  nginx-deployment  Synced     Healthy        deployment.apps/nginx-deployment unchanged\n       ConfigMap   argocd-e2e--test-annotation-tracking-extra-resources-amqsb  extra-configmap                             \n       ConfigMap   argocd-e2e--test-annotation-tracking-extra-resources-amqsb  other-configmap   OutOfSync                 \n" duration=140.397072ms execID=8853f
time="2023-11-03T13:26:56Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:26:56Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:26:56Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:26:56Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:26:56Z" level=info msg="../../dist/argocd app sync --prune test-annotation-tracking-extra-resources --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDQwOSwibmJmIjoxNjk5MDE4MDA5LCJpYXQiOjE2OTkwMTgwMDksImp0aSI6ImU3YmJmNDJkLTQ3MzItNGVjYi1iMzA5LTY1OWI3MzhmMTVmNiJ9.JGtuFjn8NKt8uUoIjFk29mdEobTbFNRfaQPKQ6gRNQk --insecure" dir= execID=47b32
time="2023-11-03T13:26:57Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                                  NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:26:56+00:00          ConfigMap  argocd-e2e--test-annotation-tracking-extra-resources-amqsb       other-configmap  OutOfSync                       \n2023-11-03T13:26:56+00:00   apps  Deployment  argocd-e2e--test-annotation-tracking-extra-resources-amqsb      nginx-deployment    Synced   Healthy              \n2023-11-03T13:26:56+00:00          ConfigMap  argocd-e2e--test-annotation-tracking-extra-resources-amqsb       extra-configmap                                  \n2023-11-03T13:26:57+00:00          ConfigMap  argocd-e2e--test-annotation-tracking-extra-resources-amqsb       other-configmap  OutOfSync                       pruned\n2023-11-03T13:26:57+00:00   apps  Deployment  argocd-e2e--test-annotation-tracking-extra-resources-amqsb      nginx-deployment    Synced   Healthy              deployment.apps/nginx-deployment unchanged\n2023-11-03T13:26:57+00:00          ConfigMap  argocd-e2e--test-annotation-tracking-extra-resources-amqsb       other-configmap  OutOfSync  Progressing              pruned\n\nName:               argocd-e2e/test-annotation-tracking-extra-resources\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-annotation-tracking-extra-resources-amqsb\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-annotation-tracking-extra-resources\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               deployment\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (d3f7eb8)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      d3f7eb85283e04cc38c3d2dcce49363f15c7f22f\nPhase:              Succeeded\nStart:              2023-11-03 13:26:56 +0000 UTC\nFinished:           2023-11-03 13:26:57 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                                   NAME              STATUS     HEALTH   HOOK  MESSAGE\n       ConfigMap   argocd-e2e--test-annotation-tracking-extra-resources-amqsb  other-configmap   Succeeded  Pruned         pruned\napps   Deployment  argocd-e2e--test-annotation-tracking-extra-resources-amqsb  nginx-deployment  Synced     Healthy        deployment.apps/nginx-deployment unchanged\n       ConfigMap   argocd-e2e--test-annotation-tracking-extra-resources-amqsb  extra-configmap                             \n" duration=705.881135ms execID=47b32
time="2023-11-03T13:26:57Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:26:57Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:26:57Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:26:57Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:26:57Z" level=info msg="../../dist/argocd app get test-annotation-tracking-extra-resources --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDQwOSwibmJmIjoxNjk5MDE4MDA5LCJpYXQiOjE2OTkwMTgwMDksImp0aSI6ImU3YmJmNDJkLTQ3MzItNGVjYi1iMzA5LTY1OWI3MzhmMTVmNiJ9.JGtuFjn8NKt8uUoIjFk29mdEobTbFNRfaQPKQ6gRNQk --insecure" dir= execID=c38fe
time="2023-11-03T13:26:57Z" level=debug msg="Name:               argocd-e2e/test-annotation-tracking-extra-resources\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-annotation-tracking-extra-resources-amqsb\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-annotation-tracking-extra-resources\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               deployment\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (d3f7eb8)\nHealth Status:      Healthy\n\nGROUP                      KIND         NAMESPACE                                                   NAME                  STATUS     HEALTH   HOOK  MESSAGE\n                           ConfigMap    argocd-e2e--test-annotation-tracking-extra-resources-amqsb  other-configmap       Succeeded  Pruned         pruned\napps                       Deployment   argocd-e2e--test-annotation-tracking-extra-resources-amqsb  nginx-deployment      Synced     Healthy        deployment.apps/nginx-deployment unchanged\n                           ConfigMap    argocd-e2e--test-annotation-tracking-extra-resources-amqsb  extra-configmap                                 \nrbac.authorization.k8s.io  ClusterRole                                                              e2e-test-clusterrole                            \n" duration=144.102844ms execID=c38fe
time="2023-11-03T13:26:57Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:26:57Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:26:57Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:26:57Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:26:57Z" level=info msg="../../dist/argocd app get test-annotation-tracking-extra-resources --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDQwOSwibmJmIjoxNjk5MDE4MDA5LCJpYXQiOjE2OTkwMTgwMDksImp0aSI6ImU3YmJmNDJkLTQ3MzItNGVjYi1iMzA5LTY1OWI3MzhmMTVmNiJ9.JGtuFjn8NKt8uUoIjFk29mdEobTbFNRfaQPKQ6gRNQk --insecure" dir= execID=a7114
time="2023-11-03T13:26:57Z" level=debug msg="Name:               argocd-e2e/test-annotation-tracking-extra-resources\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-annotation-tracking-extra-resources-amqsb\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-annotation-tracking-extra-resources\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               deployment\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (d3f7eb8)\nHealth Status:      Healthy\n\nGROUP                      KIND         NAMESPACE                                                   NAME                   STATUS     HEALTH   HOOK  MESSAGE\n                           ConfigMap    argocd-e2e--test-annotation-tracking-extra-resources-amqsb  other-configmap        Succeeded  Pruned         pruned\napps                       Deployment   argocd-e2e--test-annotation-tracking-extra-resources-amqsb  nginx-deployment       Synced     Healthy        deployment.apps/nginx-deployment unchanged\n                           ConfigMap    argocd-e2e--test-annotation-tracking-extra-resources-amqsb  extra-configmap                                  \nrbac.authorization.k8s.io  ClusterRole                                                              e2e-other-clusterrole  OutOfSync                 \nrbac.authorization.k8s.io  ClusterRole                                                              e2e-test-clusterrole                             \n" duration=144.910093ms execID=a7114
time="2023-11-03T13:26:57Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:26:57Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:26:57Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:26:57Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:26:57Z" level=info msg="../../dist/argocd app sync --prune test-annotation-tracking-extra-resources --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDQwOSwibmJmIjoxNjk5MDE4MDA5LCJpYXQiOjE2OTkwMTgwMDksImp0aSI6ImU3YmJmNDJkLTQ3MzItNGVjYi1iMzA5LTY1OWI3MzhmMTVmNiJ9.JGtuFjn8NKt8uUoIjFk29mdEobTbFNRfaQPKQ6gRNQk --insecure" dir= execID=f5908
time="2023-11-03T13:26:58Z" level=debug msg="TIMESTAMP                  GROUP                            KIND    NAMESPACE                                                                  NAME     STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:26:57+00:00                              ConfigMap   argocd-e2e--test-annotation-tracking-extra-resources-amqsb       extra-configmap                                   \n2023-11-03T13:26:57+00:00   apps                      Deployment   argocd-e2e--test-annotation-tracking-extra-resources-amqsb      nginx-deployment     Synced   Healthy              \n2023-11-03T13:26:57+00:00  rbac.authorization.k8s.io  ClusterRole                                                              e2e-other-clusterrole  OutOfSync                       \n2023-11-03T13:26:57+00:00  rbac.authorization.k8s.io  ClusterRole                                                              e2e-test-clusterrole                                   \n2023-11-03T13:26:58+00:00  rbac.authorization.k8s.io  ClusterRole                                                              e2e-other-clusterrole  OutOfSync                       pruned\n2023-11-03T13:26:58+00:00   apps                      Deployment   argocd-e2e--test-annotation-tracking-extra-resources-amqsb      nginx-deployment     Synced   Healthy              deployment.apps/nginx-deployment unchanged\n2023-11-03T13:26:58+00:00  rbac.authorization.k8s.io  ClusterRole              e2e-other-clusterrole  OutOfSync  Progressing              pruned\n\nName:               argocd-e2e/test-annotation-tracking-extra-resources\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-annotation-tracking-extra-resources-amqsb\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-annotation-tracking-extra-resources\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               deployment\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (d3f7eb8)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      d3f7eb85283e04cc38c3d2dcce49363f15c7f22f\nPhase:              Succeeded\nStart:              2023-11-03 13:26:57 +0000 UTC\nFinished:           2023-11-03 13:26:58 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP                      KIND         NAMESPACE                                                   NAME                   STATUS     HEALTH   HOOK  MESSAGE\nrbac.authorization.k8s.io  ClusterRole                                                              e2e-other-clusterrole  Succeeded  Pruned         pruned\napps                       Deployment   argocd-e2e--test-annotation-tracking-extra-resources-amqsb  nginx-deployment       Synced     Healthy        deployment.apps/nginx-deployment unchanged\n                           ConfigMap    argocd-e2e--test-annotation-tracking-extra-resources-amqsb  extra-configmap                                  \nrbac.authorization.k8s.io  ClusterRole                                                              e2e-test-clusterrole                             \n" duration=756.625276ms execID=f5908
time="2023-11-03T13:26:58Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:26:58Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:26:58Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:26:58Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:26:58Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestAnnotationTrackingExtraResources (11.22s)
=== RUN   TestMultiSourceAppCreation
time="2023-11-03T13:26:58Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=b2721
time="2023-11-03T13:26:58Z" level=debug msg="namespace \"argocd-e2e--test-annotation-tracking-extra-resources-amqsb\" deleted\n" duration=187.762212ms execID=b2721
time="2023-11-03T13:26:58Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=88eef
time="2023-11-03T13:26:59Z" level=debug msg="No resources found\n" duration=446.648043ms execID=88eef
time="2023-11-03T13:26:59Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=a3a39
time="2023-11-03T13:26:59Z" level=debug msg="clusterrole.rbac.authorization.k8s.io \"e2e-test-clusterrole\" deleted\n" duration=265.186931ms execID=a3a39
time="2023-11-03T13:27:00Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:27:00Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDQyMCwibmJmIjoxNjk5MDE4MDIwLCJpYXQiOjE2OTkwMTgwMjAsImp0aSI6ImNkZDkxOThkLWUyZTAtNDNjZi1hOGRjLWRkNjNmNjRjNDZhMyJ9.g0fHSGYk-10GRsi41rZpDh4p4iPoqhIxjxrP894aPVo --insecure" dir= execID=0a6cb
time="2023-11-03T13:27:00Z" level=debug duration=108.212645ms execID=0a6cb
time="2023-11-03T13:27:00Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=c1bc2
time="2023-11-03T13:27:00Z" level=debug duration=1.978302ms execID=c1bc2
time="2023-11-03T13:27:00Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=f1d25
time="2023-11-03T13:27:00Z" level=debug duration=1.433127ms execID=f1d25
time="2023-11-03T13:27:00Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=dbb41
time="2023-11-03T13:27:00Z" level=debug duration=1.504103ms execID=dbb41
time="2023-11-03T13:27:00Z" level=info msg="pkill -9 gpg-agent" dir= execID=03383
time="2023-11-03T13:27:00Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=453c3
time="2023-11-03T13:27:00Z" level=debug duration=9.842897ms execID=453c3
time="2023-11-03T13:27:00Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=fc20b
time="2023-11-03T13:27:00Z" level=debug duration=34.200689ms execID=fc20b
time="2023-11-03T13:27:00Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=458b4
time="2023-11-03T13:27:00Z" level=debug duration=1.664242ms execID=458b4
time="2023-11-03T13:27:00Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=d07cf
time="2023-11-03T13:27:00Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.748466ms execID=d07cf
time="2023-11-03T13:27:00Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=1995f
time="2023-11-03T13:27:00Z" level=debug duration=24.359694ms execID=1995f
time="2023-11-03T13:27:00Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=f2c7a
time="2023-11-03T13:27:00Z" level=debug duration=20.220558ms execID=f2c7a
time="2023-11-03T13:27:00Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=787af
time="2023-11-03T13:27:00Z" level=debug duration=2.239624ms execID=787af
time="2023-11-03T13:27:00Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=53854
Handling connection for 9081
time="2023-11-03T13:27:00Z" level=debug duration=60.431588ms execID=53854
time="2023-11-03T13:27:00Z" level=info msg="kubectl create ns argocd-e2e--test-multi-source-app-creation-rwrpb" dir= execID=f6920
time="2023-11-03T13:27:00Z" level=debug msg="namespace/argocd-e2e--test-multi-source-app-creation-rwrpb created\n" duration=206.674644ms execID=f6920
time="2023-11-03T13:27:00Z" level=info msg="kubectl label ns argocd-e2e--test-multi-source-app-creation-rwrpb e2e.argoproj.io=true" dir= execID=f6e82
time="2023-11-03T13:27:01Z" level=debug msg="namespace/argocd-e2e--test-multi-source-app-creation-rwrpb labeled\n" duration=323.088055ms execID=f6e82
time="2023-11-03T13:27:01Z" level=info msg="clean state" duration=2.638833051s id=TestMultiSourceAppCreation-rwrpb name=TestMultiSourceAppCreation password=password username=admin
time="2023-11-03T13:27:02Z" level=info msg="../../dist/argocd app create -f /tmp/533034483 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDQyMCwibmJmIjoxNjk5MDE4MDIwLCJpYXQiOjE2OTkwMTgwMjAsImp0aSI6ImNkZDkxOThkLWUyZTAtNDNjZi1hOGRjLWRkNjNmNjRjNDZhMyJ9.g0fHSGYk-10GRsi41rZpDh4p4iPoqhIxjxrP894aPVo --insecure" dir= execID=cdcae
time="2023-11-03T13:27:02Z" level=debug msg="application 'test-multi-source-app-creation' created\n" duration=321.330866ms execID=cdcae
time="2023-11-03T13:27:02Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:27:02Z" level=info msg="expectation succeeded: found event with reason=ResourceCreated; message=create"
time="2023-11-03T13:27:02Z" level=info msg="../../dist/argocd app list --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDQyMCwibmJmIjoxNjk5MDE4MDIwLCJpYXQiOjE2OTkwMTgwMjAsImp0aSI6ImNkZDkxOThkLWUyZTAtNDNjZi1hOGRjLWRkNjNmNjRjNDZhMyJ9.g0fHSGYk-10GRsi41rZpDh4p4iPoqhIxjxrP894aPVo --insecure" dir= execID=3ba9f
time="2023-11-03T13:27:02Z" level=debug msg="NAME                                       CLUSTER                         NAMESPACE                                         PROJECT  STATUS  HEALTH  SYNCPOLICY  CONDITIONS  REPO                                                 PATH       TARGET\nargocd-e2e/test-multi-source-app-creation  https://kubernetes.default.svc  argocd-e2e--test-multi-source-app-creation-rwrpb  default                  Auto        <none>      http://argocd-e2e-server:9081/argo-e2e/testdata.git  guestbook  \n" duration=60.950251ms execID=3ba9f
time="2023-11-03T13:27:02Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:27:03Z" level=info msg="../../dist/argocd app wait test-multi-source-app-creation --timeout 60 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDQyMCwibmJmIjoxNjk5MDE4MDIwLCJpYXQiOjE2OTkwMTgwMjAsImp0aSI6ImNkZDkxOThkLWUyZTAtNDNjZi1hOGRjLWRkNjNmNjRjNDZhMyJ9.g0fHSGYk-10GRsi41rZpDh4p4iPoqhIxjxrP894aPVo --insecure" dir= execID=8bd0c
time="2023-11-03T13:27:12Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:27:06+00:00   apps  Deployment  argocd-e2e--test-multi-source-app-creation-rwrpb          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:27:06+00:00                Pod  argocd-e2e--test-multi-source-app-creation-rwrpb                 pod-1  OutOfSync  Missing              \n2023-11-03T13:27:06+00:00                Pod  argocd-e2e--test-multi-source-app-creation-rwrpb                 pod-2  OutOfSync  Missing              \n2023-11-03T13:27:06+00:00            Service  argocd-e2e--test-multi-source-app-creation-rwrpb          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:27:06+00:00            Service  argocd-e2e--test-multi-source-app-creation-rwrpb          guestbook-ui    Synced  Healthy              \n2023-11-03T13:27:06+00:00            Service  argocd-e2e--test-multi-source-app-creation-rwrpb          guestbook-ui    Synced   Healthy              service/guestbook-ui created\n2023-11-03T13:27:06+00:00                Pod  argocd-e2e--test-multi-source-app-creation-rwrpb                 pod-1  OutOfSync  Missing              pod/pod-1 created\n2023-11-03T13:27:06+00:00                Pod  argocd-e2e--test-multi-source-app-creation-rwrpb                 pod-2  OutOfSync  Missing              pod/pod-2 created\n2023-11-03T13:27:06+00:00   apps  Deployment  argocd-e2e--test-multi-source-app-creation-rwrpb          guestbook-ui  OutOfSync  Missing              deployment.apps/guestbook-ui created\n2023-11-03T13:27:06+00:00                Pod  argocd-e2e--test-multi-source-app-creation-rwrpb                 pod-1    Synced  Progressing              pod/pod-1 created\n2023-11-03T13:27:06+00:00                Pod  argocd-e2e--test-multi-source-app-creation-rwrpb                 pod-2    Synced  Progressing              pod/pod-2 created\n2023-11-03T13:27:06+00:00   apps  Deployment  argocd-e2e--test-multi-source-app-creation-rwrpb          guestbook-ui    Synced  Progressing              deployment.apps/guestbook-ui created\n2023-11-03T13:27:06+00:00   apps  Deployment  argocd-e2e--test-multi-source-app-creation-rwrpb          guestbook-ui    Synced  Healthy              deployment.apps/guestbook-ui created\n2023-11-03T13:27:11+00:00                Pod  argocd-e2e--test-multi-source-app-creation-rwrpb                 pod-2    Synced  Healthy              pod/pod-2 created\n\nName:               argocd-e2e/test-multi-source-app-creation\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-multi-source-app-creation-rwrpb\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-multi-source-app-creation\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        Automated\nSync Status:        Synced to \nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      \nPhase:              Succeeded\nStart:              2023-11-03 13:27:06 +0000 UTC\nFinished:           2023-11-03 13:27:06 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                         NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-multi-source-app-creation-rwrpb  guestbook-ui  Synced  Healthy        service/guestbook-ui created\n       Pod         argocd-e2e--test-multi-source-app-creation-rwrpb  pod-1         Synced  Healthy        pod/pod-1 created\n       Pod         argocd-e2e--test-multi-source-app-creation-rwrpb  pod-2         Synced  Healthy        pod/pod-2 created\napps   Deployment  argocd-e2e--test-multi-source-app-creation-rwrpb  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=8.775364263s execID=8bd0c
time="2023-11-03T13:27:12Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:27:12Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:27:12Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestMultiSourceAppCreation (13.83s)
=== RUN   TestMultiSourceAppWithHelmExternalValueFiles
time="2023-11-03T13:27:12Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=0b9c6
time="2023-11-03T13:27:12Z" level=debug msg="namespace \"argocd-e2e--test-multi-source-app-creation-rwrpb\" deleted\n" duration=270.334144ms execID=0b9c6
time="2023-11-03T13:27:12Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=d0d89
time="2023-11-03T13:27:13Z" level=debug msg="No resources found\n" duration=514.730316ms execID=d0d89
time="2023-11-03T13:27:13Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=6c3db
time="2023-11-03T13:27:13Z" level=debug msg="No resources found\n" duration=271.787989ms execID=6c3db
time="2023-11-03T13:27:14Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:27:14Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDQzNCwibmJmIjoxNjk5MDE4MDM0LCJpYXQiOjE2OTkwMTgwMzQsImp0aSI6IjE4YWNiMDUyLWUzNjAtNDhmYy05MTgzLWVlMmM2MzJjNWYwMSJ9.7OKqpBhsIgc3qrmc4HwPh0fRxLlR5MlPVKEqF5mbR7E --insecure" dir= execID=5228c
time="2023-11-03T13:27:14Z" level=debug duration=126.795981ms execID=5228c
time="2023-11-03T13:27:14Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=b609d
time="2023-11-03T13:27:14Z" level=debug duration=2.040083ms execID=b609d
time="2023-11-03T13:27:14Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=ede83
time="2023-11-03T13:27:14Z" level=debug duration=1.583396ms execID=ede83
time="2023-11-03T13:27:14Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=4cae2
time="2023-11-03T13:27:14Z" level=debug duration=1.510295ms execID=4cae2
time="2023-11-03T13:27:14Z" level=info msg="pkill -9 gpg-agent" dir= execID=260e4
time="2023-11-03T13:27:14Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=3a989
time="2023-11-03T13:27:14Z" level=debug duration=9.605785ms execID=3a989
time="2023-11-03T13:27:14Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=b86a8
time="2023-11-03T13:27:14Z" level=debug duration=36.074453ms execID=b86a8
time="2023-11-03T13:27:14Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=d817c
time="2023-11-03T13:27:14Z" level=debug duration=1.978828ms execID=d817c
time="2023-11-03T13:27:14Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=9deb8
time="2023-11-03T13:27:14Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.847268ms execID=9deb8
time="2023-11-03T13:27:14Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=6370c
time="2023-11-03T13:27:14Z" level=debug duration=27.210472ms execID=6370c
time="2023-11-03T13:27:14Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=98ff2
time="2023-11-03T13:27:14Z" level=debug duration=21.813787ms execID=98ff2
time="2023-11-03T13:27:14Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=f909b
time="2023-11-03T13:27:14Z" level=debug duration=2.319013ms execID=f909b
time="2023-11-03T13:27:14Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=38db9
Handling connection for 9081
time="2023-11-03T13:27:14Z" level=debug duration=74.112812ms execID=38db9
time="2023-11-03T13:27:14Z" level=info msg="kubectl create ns argocd-e2e--test-multi-source-app-with-helm-external-valu-wstuu" dir= execID=9f548
time="2023-11-03T13:27:14Z" level=debug msg="namespace/argocd-e2e--test-multi-source-app-with-helm-external-valu-wstuu created\n" duration=173.240876ms execID=9f548
time="2023-11-03T13:27:14Z" level=info msg="kubectl label ns argocd-e2e--test-multi-source-app-with-helm-external-valu-wstuu e2e.argoproj.io=true" dir= execID=db368
time="2023-11-03T13:27:15Z" level=debug msg="namespace/argocd-e2e--test-multi-source-app-with-helm-external-valu-wstuu labeled\n" duration=297.373995ms execID=db368
time="2023-11-03T13:27:15Z" level=info msg="clean state" duration=2.807811151s id=TestMultiSourceAppWithHelmExternalValueFiles-wstuu name=TestMultiSourceAppWithHelmExternalValueFiles password=password username=admin
time="2023-11-03T13:27:16Z" level=info msg="../../dist/argocd app create -f /tmp/2280843552 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDQzNCwibmJmIjoxNjk5MDE4MDM0LCJpYXQiOjE2OTkwMTgwMzQsImp0aSI6IjE4YWNiMDUyLWUzNjAtNDhmYy05MTgzLWVlMmM2MzJjNWYwMSJ9.7OKqpBhsIgc3qrmc4HwPh0fRxLlR5MlPVKEqF5mbR7E --insecure" dir= execID=4fa74
time="2023-11-03T13:27:17Z" level=debug msg="application 'test-multi-source-app-with-helm-external-value-files' created\n" duration=867.667433ms execID=4fa74
time="2023-11-03T13:27:17Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:27:17Z" level=info msg="expectation succeeded: found event with reason=ResourceCreated; message=create"
time="2023-11-03T13:27:17Z" level=info msg="../../dist/argocd app list --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDQzNCwibmJmIjoxNjk5MDE4MDM0LCJpYXQiOjE2OTkwMTgwMzQsImp0aSI6IjE4YWNiMDUyLWUzNjAtNDhmYy05MTgzLWVlMmM2MzJjNWYwMSJ9.7OKqpBhsIgc3qrmc4HwPh0fRxLlR5MlPVKEqF5mbR7E --insecure" dir= execID=9a4a5
time="2023-11-03T13:27:17Z" level=debug msg="NAME                                                             CLUSTER                         NAMESPACE                                                        PROJECT  STATUS  HEALTH  SYNCPOLICY  CONDITIONS  REPO                                                 PATH  TARGET\nargocd-e2e/test-multi-source-app-with-helm-external-value-files  https://kubernetes.default.svc  argocd-e2e--test-multi-source-app-with-helm-external-valu-wstuu  default                  Auto        <none>      http://argocd-e2e-server:9081/argo-e2e/testdata.git        \n" duration=105.767828ms execID=9a4a5
time="2023-11-03T13:27:17Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:27:18Z" level=info msg="../../dist/argocd app wait test-multi-source-app-with-helm-external-value-files --timeout 60 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDQzNCwibmJmIjoxNjk5MDE4MDM0LCJpYXQiOjE2OTkwMTgwMzQsImp0aSI6IjE4YWNiMDUyLWUzNjAtNDhmYy05MTgzLWVlMmM2MzJjNWYwMSJ9.7OKqpBhsIgc3qrmc4HwPh0fRxLlR5MlPVKEqF5mbR7E --insecure" dir= execID=331fa
time="2023-11-03T13:28:18Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                                       NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:27:18+00:00            Service  argocd-e2e--test-multi-source-app-with-helm-external-valu-wstuu        helm-guestbook  OutOfSync  Missing              service/helm-guestbook created\n2023-11-03T13:27:18+00:00   apps  Deployment  argocd-e2e--test-multi-source-app-with-helm-external-valu-wstuu        helm-guestbook  OutOfSync  Missing              deployment.apps/helm-guestbook created\n2023-11-03T13:27:18+00:00   apps  Deployment  argocd-e2e--test-multi-source-app-with-helm-external-valu-wstuu        helm-guestbook    Synced  Progressing              deployment.apps/helm-guestbook created\n2023-11-03T13:27:18+00:00            Service  argocd-e2e--test-multi-source-app-with-helm-external-valu-wstuu        helm-guestbook    Synced  Healthy                  service/helm-guestbook created\n\n" duration=1m0.090613764s execID=331fa
time="2023-11-03T13:28:18Z" level=error msg="`../../dist/argocd app wait test-multi-source-app-with-helm-external-value-files --timeout 60 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDQzNCwibmJmIjoxNjk5MDE4MDM0LCJpYXQiOjE2OTkwMTgwMzQsImp0aSI6IjE4YWNiMDUyLWUzNjAtNDhmYy05MTgzLWVlMmM2MzJjNWYwMSJ9.7OKqpBhsIgc3qrmc4HwPh0fRxLlR5MlPVKEqF5mbR7E --insecure` failed exit status 20: time=\"2023-11-03T13:28:18Z\" level=fatal msg=\"rpc error: code = Canceled desc = context canceled\"" execID=331fa
    app_multiple_sources_test.go:100: failed expectation: error
--- FAIL: TestMultiSourceAppWithHelmExternalValueFiles (65.90s)
=== RUN   TestMultiSourceAppWithSourceOverride
time="2023-11-03T13:28:18Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=33c73
time="2023-11-03T13:28:18Z" level=debug msg="namespace \"argocd-e2e--test-multi-source-app-with-helm-external-valu-wstuu\" deleted\n" duration=284.470239ms execID=33c73
time="2023-11-03T13:28:18Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=57e87
time="2023-11-03T13:28:18Z" level=debug msg="No resources found\n" duration=415.777459ms execID=57e87
time="2023-11-03T13:28:18Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=017f4
time="2023-11-03T13:28:19Z" level=debug msg="No resources found\n" duration=166.994085ms execID=017f4
time="2023-11-03T13:28:20Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:28:20Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDUwMCwibmJmIjoxNjk5MDE4MTAwLCJpYXQiOjE2OTkwMTgxMDAsImp0aSI6IjZjZWI2MGE0LTc3NjktNDZhYS1hNGU0LTQxZTY1YTQ5Y2I0ZSJ9.et_JksqCW45Fs4Ayss61LK9hNTCKpD-3E3G_X-_aqac --insecure" dir= execID=afd59
time="2023-11-03T13:28:20Z" level=debug duration=89.358287ms execID=afd59
time="2023-11-03T13:28:20Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=97622
time="2023-11-03T13:28:20Z" level=debug duration=2.253997ms execID=97622
time="2023-11-03T13:28:20Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=732a8
time="2023-11-03T13:28:20Z" level=debug duration=2.229129ms execID=732a8
time="2023-11-03T13:28:20Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=2cbe5
time="2023-11-03T13:28:20Z" level=debug duration=1.852564ms execID=2cbe5
time="2023-11-03T13:28:20Z" level=info msg="pkill -9 gpg-agent" dir= execID=b94b9
time="2023-11-03T13:28:20Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=ff20d
time="2023-11-03T13:28:20Z" level=debug duration=10.398929ms execID=ff20d
time="2023-11-03T13:28:20Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=85e54
time="2023-11-03T13:28:20Z" level=debug duration=56.231204ms execID=85e54
time="2023-11-03T13:28:20Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=dfcc9
time="2023-11-03T13:28:20Z" level=debug duration=1.927596ms execID=dfcc9
time="2023-11-03T13:28:20Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=5dc49
time="2023-11-03T13:28:20Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.981346ms execID=5dc49
time="2023-11-03T13:28:20Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=b37b9
time="2023-11-03T13:28:20Z" level=debug duration=30.567792ms execID=b37b9
time="2023-11-03T13:28:20Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=3b404
time="2023-11-03T13:28:20Z" level=debug duration=24.000552ms execID=3b404
time="2023-11-03T13:28:20Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=c1b10
time="2023-11-03T13:28:20Z" level=debug duration=2.421173ms execID=c1b10
time="2023-11-03T13:28:20Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=88d9a
Handling connection for 9081
time="2023-11-03T13:28:20Z" level=debug duration=62.349801ms execID=88d9a
time="2023-11-03T13:28:20Z" level=info msg="kubectl create ns argocd-e2e--test-multi-source-app-with-source-override-ntlgj" dir= execID=4b90c
time="2023-11-03T13:28:20Z" level=debug msg="namespace/argocd-e2e--test-multi-source-app-with-source-override-ntlgj created\n" duration=153.291637ms execID=4b90c
time="2023-11-03T13:28:20Z" level=info msg="kubectl label ns argocd-e2e--test-multi-source-app-with-source-override-ntlgj e2e.argoproj.io=true" dir= execID=b831e
time="2023-11-03T13:28:21Z" level=debug msg="namespace/argocd-e2e--test-multi-source-app-with-source-override-ntlgj labeled\n" duration=280.076515ms execID=b831e
time="2023-11-03T13:28:21Z" level=info msg="clean state" duration=2.821796009s id=TestMultiSourceAppWithSourceOverride-ntlgj name=TestMultiSourceAppWithSourceOverride password=password username=admin
time="2023-11-03T13:28:22Z" level=info msg="../../dist/argocd app create -f /tmp/3182775513 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDUwMCwibmJmIjoxNjk5MDE4MTAwLCJpYXQiOjE2OTkwMTgxMDAsImp0aSI6IjZjZWI2MGE0LTc3NjktNDZhYS1hNGU0LTQxZTY1YTQ5Y2I0ZSJ9.et_JksqCW45Fs4Ayss61LK9hNTCKpD-3E3G_X-_aqac --insecure" dir= execID=602b5
time="2023-11-03T13:28:22Z" level=debug msg="application 'test-multi-source-app-with-source-override' created\n" duration=439.087949ms execID=602b5
time="2023-11-03T13:28:22Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:28:22Z" level=info msg="expectation succeeded: found event with reason=ResourceCreated; message=create"
time="2023-11-03T13:28:22Z" level=info msg="../../dist/argocd app list --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDUwMCwibmJmIjoxNjk5MDE4MTAwLCJpYXQiOjE2OTkwMTgxMDAsImp0aSI6IjZjZWI2MGE0LTc3NjktNDZhYS1hNGU0LTQxZTY1YTQ5Y2I0ZSJ9.et_JksqCW45Fs4Ayss61LK9hNTCKpD-3E3G_X-_aqac --insecure" dir= execID=0e0d5
time="2023-11-03T13:28:22Z" level=debug msg="NAME                                                   CLUSTER                         NAMESPACE                                                     PROJECT  STATUS  HEALTH  SYNCPOLICY  CONDITIONS  REPO                                                 PATH       TARGET\nargocd-e2e/test-multi-source-app-with-source-override  https://kubernetes.default.svc  argocd-e2e--test-multi-source-app-with-source-override-ntlgj  default                  Auto        <none>      http://argocd-e2e-server:9081/argo-e2e/testdata.git  guestbook  \n" duration=117.622129ms execID=0e0d5
time="2023-11-03T13:28:22Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:28:23Z" level=info msg="../../dist/argocd app wait test-multi-source-app-with-source-override --timeout 60 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDUwMCwibmJmIjoxNjk5MDE4MTAwLCJpYXQiOjE2OTkwMTgxMDAsImp0aSI6IjZjZWI2MGE0LTc3NjktNDZhYS1hNGU0LTQxZTY1YTQ5Y2I0ZSJ9.et_JksqCW45Fs4Ayss61LK9hNTCKpD-3E3G_X-_aqac --insecure" dir= execID=690ff
time="2023-11-03T13:28:28Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                                    NAME    STATUS   HEALTH            HOOK  MESSAGE\n2023-11-03T13:28:23+00:00   apps  Deployment  argocd-e2e--test-multi-source-app-with-source-override-ntlgj          guestbook-ui    Synced  Healthy                  deployment.apps/guestbook-ui created\n2023-11-03T13:28:23+00:00            Service  argocd-e2e--test-multi-source-app-with-source-override-ntlgj          guestbook-ui    Synced  Healthy                  service/guestbook-ui created\n2023-11-03T13:28:23+00:00                Pod  argocd-e2e--test-multi-source-app-with-source-override-ntlgj                 pod-1    Synced  Progressing              pod/pod-1 created\n2023-11-03T13:28:23+00:00                Pod  argocd-e2e--test-multi-source-app-with-source-override-ntlgj                 pod-2    Synced  Progressing              pod/pod-2 created\n2023-11-03T13:28:28+00:00                Pod  argocd-e2e--test-multi-source-app-with-source-override-ntlgj                 pod-1    Synced  Healthy              pod/pod-1 created\n\nName:               argocd-e2e/test-multi-source-app-with-source-override\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-multi-source-app-with-source-override-ntlgj\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-multi-source-app-with-source-override\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        Automated\nSync Status:        Synced to \nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      \nPhase:              Succeeded\nStart:              2023-11-03 13:28:22 +0000 UTC\nFinished:           2023-11-03 13:28:23 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                                     NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-multi-source-app-with-source-override-ntlgj  guestbook-ui  Synced  Healthy        service/guestbook-ui created\n       Pod         argocd-e2e--test-multi-source-app-with-source-override-ntlgj  pod-1         Synced  Healthy        pod/pod-1 created\n       Pod         argocd-e2e--test-multi-source-app-with-source-override-ntlgj  pod-2         Synced  Healthy        pod/pod-2 created\napps   Deployment  argocd-e2e--test-multi-source-app-with-source-override-ntlgj  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=5.356022132s execID=690ff
time="2023-11-03T13:28:28Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:28:28Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:28:29Z" level=info msg="kubectl describe pods pod-1 -n argocd-e2e--test-multi-source-app-with-source-override-ntlgj" dir= execID=e99a0
time="2023-11-03T13:28:29Z" level=debug msg="Name:             pod-1\nNamespace:        argocd-e2e--test-multi-source-app-with-source-override-ntlgj\nPriority:         0\nService Account:  default\nNode:             psi-413-sc7rm-worker-0-ngzff/192.168.0.171\nStart Time:       Fri, 03 Nov 2023 13:28:23 +0000\nLabels:           app.kubernetes.io/instance=test-multi-source-app-with-source-override\n                  foo=bar\nAnnotations:      k8s.v1.cni.cncf.io/network-status:\n                    [{\n                        \"name\": \"openshift-sdn\",\n                        \"interface\": \"eth0\",\n                        \"ips\": [\n                            \"10.128.3.198\"\n                        ],\n                        \"default\": true,\n                        \"dns\": {}\n                    }]\n                  openshift.io/scc: anyuid\nStatus:           Succeeded\nIP:               10.128.3.198\nIPs:\n  IP:  10.128.3.198\nContainers:\n  main:\n    Container ID:  cri-o://bfbe85646b45a36ca4352830750558fc2b8b5553854ada24da502b32c238ba01\n    Image:         quay.io/argoprojlabs/argocd-e2e-container:0.1\n    Image ID:      quay.io/argoprojlabs/argocd-e2e-container@sha256:577fd09d336dbb05be3b8e8387f2fa3a02a9d78191135ecc6aa3755f9f95c3b9\n    Port:          <none>\n    Host Port:     <none>\n    Command:\n      true\n    State:          Terminated\n      Reason:       Completed\n      Exit Code:    0\n      Started:      Fri, 03 Nov 2023 13:28:25 +0000\n      Finished:     Fri, 03 Nov 2023 13:28:25 +0000\n    Ready:          False\n    Restart Count:  0\n    Environment:    <none>\n    Mounts:\n      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-7l5ht (ro)\nConditions:\n  Type              Status\n  Initialized       True \n  Ready             False \n  ContainersReady   False \n  PodScheduled      True \nVolumes:\n  kube-api-access-7l5ht:\n    Type:                    Projected (a volume that contains injected data from multiple sources)\n    TokenExpirationSeconds:  3607\n    ConfigMapName:           kube-root-ca.crt\n    ConfigMapOptional:       <nil>\n    DownwardAPI:             true\n    ConfigMapName:           openshift-service-ca.crt\n    ConfigMapOptional:       <nil>\nQoS Class:                   BestEffort\nNode-Selectors:              <none>\nTolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s\n                             node.kubernetes.io/unreachable:NoExecute op=Exists for 300s\nEvents:\n  Type    Reason          Age   From               Message\n  ----    ------          ----  ----               -------\n  Normal  Scheduled       5s    default-scheduler  Successfully assigned argocd-e2e--test-multi-source-app-with-source-override-ntlgj/pod-1 to psi-413-sc7rm-worker-0-ngzff\n  Normal  AddedInterface  4s    multus             Add eth0 [10.128.3.198/23] from openshift-sdn\n  Normal  Pulled          4s    kubelet            Container image \"quay.io/argoprojlabs/argocd-e2e-container:0.1\" already present on machine\n  Normal  Created         4s    kubelet            Created container main\n  Normal  Started         4s    kubelet            Started container main\n" duration=236.434608ms execID=e99a0
time="2023-11-03T13:28:29Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestMultiSourceAppWithSourceOverride (11.00s)
=== RUN   TestAppCreationInOtherNamespace
time="2023-11-03T13:28:29Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=f7d9b
time="2023-11-03T13:28:29Z" level=debug msg="namespace \"argocd-e2e--test-multi-source-app-with-source-override-ntlgj\" deleted\n" duration=258.593969ms execID=f7d9b
time="2023-11-03T13:28:29Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=87b12
time="2023-11-03T13:28:29Z" level=debug msg="No resources found\n" duration=361.03422ms execID=87b12
time="2023-11-03T13:28:29Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=b8883
time="2023-11-03T13:28:30Z" level=debug msg="No resources found\n" duration=244.331745ms execID=b8883
time="2023-11-03T13:28:31Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:28:31Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDUxMSwibmJmIjoxNjk5MDE4MTExLCJpYXQiOjE2OTkwMTgxMTEsImp0aSI6ImE3OTRlZmE1LTI2NDctNDA4OS04NzYzLTFiZGQyNjM2NmE0YSJ9.ynRCCAHI3ldr_0Z3tEe1v5fqp4OYHygyyJ_ZLE5xZpQ --insecure" dir= execID=332f8
time="2023-11-03T13:28:31Z" level=debug duration=68.407909ms execID=332f8
time="2023-11-03T13:28:31Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=04787
time="2023-11-03T13:28:31Z" level=debug duration=2.286293ms execID=04787
time="2023-11-03T13:28:31Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=17eba
time="2023-11-03T13:28:31Z" level=debug duration=1.741435ms execID=17eba
time="2023-11-03T13:28:31Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=301ca
time="2023-11-03T13:28:31Z" level=debug duration=1.537936ms execID=301ca
time="2023-11-03T13:28:31Z" level=info msg="pkill -9 gpg-agent" dir= execID=c3359
time="2023-11-03T13:28:31Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=ca9e2
time="2023-11-03T13:28:31Z" level=debug duration=9.83848ms execID=ca9e2
time="2023-11-03T13:28:31Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=4b338
time="2023-11-03T13:28:31Z" level=debug duration=33.810407ms execID=4b338
time="2023-11-03T13:28:31Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=2ee19
time="2023-11-03T13:28:31Z" level=debug duration=1.920378ms execID=2ee19
time="2023-11-03T13:28:31Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=5020f
time="2023-11-03T13:28:31Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=13.102172ms execID=5020f
time="2023-11-03T13:28:31Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=251f0
time="2023-11-03T13:28:31Z" level=debug duration=28.116167ms execID=251f0
time="2023-11-03T13:28:31Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=2350b
time="2023-11-03T13:28:31Z" level=debug duration=21.787304ms execID=2350b
time="2023-11-03T13:28:31Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=78ae7
time="2023-11-03T13:28:31Z" level=debug duration=2.217115ms execID=78ae7
time="2023-11-03T13:28:31Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=9ccb9
Handling connection for 9081
time="2023-11-03T13:28:31Z" level=debug duration=79.903184ms execID=9ccb9
time="2023-11-03T13:28:31Z" level=info msg="kubectl create ns argocd-e2e--test-app-creation-in-other-namespace-vzyha" dir= execID=f319b
time="2023-11-03T13:28:31Z" level=debug msg="namespace/argocd-e2e--test-app-creation-in-other-namespace-vzyha created\n" duration=110.88097ms execID=f319b
time="2023-11-03T13:28:31Z" level=info msg="kubectl label ns argocd-e2e--test-app-creation-in-other-namespace-vzyha e2e.argoproj.io=true" dir= execID=7b45d
time="2023-11-03T13:28:31Z" level=debug msg="namespace/argocd-e2e--test-app-creation-in-other-namespace-vzyha labeled\n" duration=281.194184ms execID=7b45d
time="2023-11-03T13:28:31Z" level=info msg="clean state" duration=2.510071419s id=TestAppCreationInOtherNamespace-vzyha name=TestAppCreationInOtherNamespace password=password username=admin
time="2023-11-03T13:28:32Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-app-creation-in-other-namespace --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-app-creation-in-other-namespace-vzyha --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDUxMSwibmJmIjoxNjk5MDE4MTExLCJpYXQiOjE2OTkwMTgxMTEsImp0aSI6ImE3OTRlZmE1LTI2NDctNDA4OS04NzYzLTFiZGQyNjM2NmE0YSJ9.ynRCCAHI3ldr_0Z3tEe1v5fqp4OYHygyyJ_ZLE5xZpQ --insecure" dir= execID=f845d
time="2023-11-03T13:28:32Z" level=debug msg="application 'test-app-creation-in-other-namespace' created\n" duration=231.633849ms execID=f845d
time="2023-11-03T13:28:32Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:28:32Z" level=info msg="pending: sync status to be OutOfSync, is "
time="2023-11-03T13:28:35Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:28:36Z" level=info msg="expectation succeeded: found event with reason=ResourceCreated; message=create"
time="2023-11-03T13:28:36Z" level=info msg="../../dist/argocd app list --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDUxMSwibmJmIjoxNjk5MDE4MTExLCJpYXQiOjE2OTkwMTgxMTEsImp0aSI6ImE3OTRlZmE1LTI2NDctNDA4OS04NzYzLTFiZGQyNjM2NmE0YSJ9.ynRCCAHI3ldr_0Z3tEe1v5fqp4OYHygyyJ_ZLE5xZpQ --insecure" dir= execID=21ea9
time="2023-11-03T13:28:36Z" level=debug msg="NAME                                                      CLUSTER                         NAMESPACE                                               PROJECT  STATUS     HEALTH   SYNCPOLICY  CONDITIONS  REPO                                                 PATH       TARGET\nargocd-e2e-external/test-app-creation-in-other-namespace  https://kubernetes.default.svc  argocd-e2e--test-app-creation-in-other-namespace-vzyha  default  OutOfSync  Missing  <none>      <none>      http://argocd-e2e-server:9081/argo-e2e/testdata.git  guestbook  \n" duration=109.177364ms execID=21ea9
time="2023-11-03T13:28:36Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-app-creation-in-other-namespace --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-app-creation-in-other-namespace-vzyha --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDUxMSwibmJmIjoxNjk5MDE4MTExLCJpYXQiOjE2OTkwMTgxMTEsImp0aSI6ImE3OTRlZmE1LTI2NDctNDA4OS04NzYzLTFiZGQyNjM2NmE0YSJ9.ynRCCAHI3ldr_0Z3tEe1v5fqp4OYHygyyJ_ZLE5xZpQ --insecure" dir= execID=c5f75
time="2023-11-03T13:28:36Z" level=debug msg="application 'test-app-creation-in-other-namespace' created\n" duration=171.580002ms execID=c5f75
time="2023-11-03T13:28:36Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:28:37Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-app-creation-in-other-namespace --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --upsert --dest-server https://kubernetes.default.svc --path guestbook --project default --revision master --dest-namespace argocd-e2e--test-app-creation-in-other-namespace-vzyha --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDUxMSwibmJmIjoxNjk5MDE4MTExLCJpYXQiOjE2OTkwMTgxMTEsImp0aSI6ImE3OTRlZmE1LTI2NDctNDA4OS04NzYzLTFiZGQyNjM2NmE0YSJ9.ynRCCAHI3ldr_0Z3tEe1v5fqp4OYHygyyJ_ZLE5xZpQ --insecure" dir= execID=88db8
time="2023-11-03T13:28:37Z" level=debug msg="application 'test-app-creation-in-other-namespace' created\n" duration=127.585991ms execID=88db8
time="2023-11-03T13:28:37Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:28:37Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestAppCreationInOtherNamespace (8.20s)
=== RUN   TestForbiddenNamespace
time="2023-11-03T13:28:37Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=3b3d3
time="2023-11-03T13:28:37Z" level=debug msg="namespace \"argocd-e2e--test-app-creation-in-other-namespace-vzyha\" deleted\n" duration=158.092388ms execID=3b3d3
time="2023-11-03T13:28:37Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=123aa
time="2023-11-03T13:28:38Z" level=debug msg="No resources found\n" duration=530.927718ms execID=123aa
time="2023-11-03T13:28:38Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=f883a
time="2023-11-03T13:28:38Z" level=debug msg="No resources found\n" duration=233.506475ms execID=f883a
time="2023-11-03T13:28:39Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:28:39Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDUxOSwibmJmIjoxNjk5MDE4MTE5LCJpYXQiOjE2OTkwMTgxMTksImp0aSI6ImQ2YmE3Y2E0LTczMzktNDI3ZS1hODFjLWRiYmE2YTJhYzM4MCJ9.42MJpfFGRWw5EJvhN2T96E8dpaunDhKoWsdcpX88-oc --insecure" dir= execID=6d39d
time="2023-11-03T13:28:39Z" level=debug duration=83.640006ms execID=6d39d
time="2023-11-03T13:28:39Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=f1058
time="2023-11-03T13:28:39Z" level=debug duration=2.109098ms execID=f1058
time="2023-11-03T13:28:39Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=749e2
time="2023-11-03T13:28:39Z" level=debug duration=1.707714ms execID=749e2
time="2023-11-03T13:28:39Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=af72e
time="2023-11-03T13:28:39Z" level=debug duration=1.821605ms execID=af72e
time="2023-11-03T13:28:39Z" level=info msg="pkill -9 gpg-agent" dir= execID=eb84d
time="2023-11-03T13:28:39Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=96bd4
time="2023-11-03T13:28:39Z" level=debug duration=9.776215ms execID=96bd4
time="2023-11-03T13:28:39Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=feb1f
time="2023-11-03T13:28:39Z" level=debug duration=32.654325ms execID=feb1f
time="2023-11-03T13:28:39Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=9430d
time="2023-11-03T13:28:39Z" level=debug duration=1.766122ms execID=9430d
time="2023-11-03T13:28:39Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=c1b52
time="2023-11-03T13:28:39Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.02271ms execID=c1b52
time="2023-11-03T13:28:39Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=c2f47
time="2023-11-03T13:28:39Z" level=debug duration=25.965623ms execID=c2f47
time="2023-11-03T13:28:39Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=438b6
time="2023-11-03T13:28:39Z" level=debug duration=22.181558ms execID=438b6
time="2023-11-03T13:28:39Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=1abfb
time="2023-11-03T13:28:39Z" level=debug duration=2.885349ms execID=1abfb
time="2023-11-03T13:28:39Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=a320f
Handling connection for 9081
time="2023-11-03T13:28:39Z" level=debug duration=79.103305ms execID=a320f
time="2023-11-03T13:28:39Z" level=info msg="kubectl create ns argocd-e2e--test-forbidden-namespace-uauqe" dir= execID=32e68
time="2023-11-03T13:28:39Z" level=debug msg="namespace/argocd-e2e--test-forbidden-namespace-uauqe created\n" duration=162.650545ms execID=32e68
time="2023-11-03T13:28:39Z" level=info msg="kubectl label ns argocd-e2e--test-forbidden-namespace-uauqe e2e.argoproj.io=true" dir= execID=1c63d
time="2023-11-03T13:28:40Z" level=debug msg="namespace/argocd-e2e--test-forbidden-namespace-uauqe labeled\n" duration=299.101266ms execID=1c63d
time="2023-11-03T13:28:40Z" level=info msg="clean state" duration=2.680636819s id=TestForbiddenNamespace-uauqe name=TestForbiddenNamespace password=password username=admin
time="2023-11-03T13:28:41Z" level=info msg="../../dist/argocd app create forbidden/test-forbidden-namespace --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-forbidden-namespace-uauqe --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDUxOSwibmJmIjoxNjk5MDE4MTE5LCJpYXQiOjE2OTkwMTgxMTksImp0aSI6ImQ2YmE3Y2E0LTczMzktNDI3ZS1hODFjLWRiYmE2YTJhYzM4MCJ9.42MJpfFGRWw5EJvhN2T96E8dpaunDhKoWsdcpX88-oc --insecure" dir= execID=7bb97
time="2023-11-03T13:28:41Z" level=debug duration=110.278649ms execID=7bb97
time="2023-11-03T13:28:41Z" level=error msg="`../../dist/argocd app create forbidden/test-forbidden-namespace --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-forbidden-namespace-uauqe --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDUxOSwibmJmIjoxNjk5MDE4MTE5LCJpYXQiOjE2OTkwMTgxMTksImp0aSI6ImQ2YmE3Y2E0LTczMzktNDI3ZS1hODFjLWRiYmE2YTJhYzM4MCJ9.42MJpfFGRWw5EJvhN2T96E8dpaunDhKoWsdcpX88-oc --insecure` failed exit status 20: time=\"2023-11-03T13:28:41Z\" level=fatal msg=\"rpc error: code = Unknown desc = error while validating and normalizing app: error getting application's project: application 'test-forbidden-namespace' in namespace 'forbidden' is not allowed to use project 'default'\"" execID=7bb97
time="2023-11-03T13:28:41Z" level=info msg="expectation succeeded: app does not exist"
time="2023-11-03T13:28:41Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestForbiddenNamespace (3.80s)
=== RUN   TestDeletingNamespacedAppStuckInSync
time="2023-11-03T13:28:41Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=c3e4a
time="2023-11-03T13:28:41Z" level=debug msg="namespace \"argocd-e2e--test-forbidden-namespace-uauqe\" deleted\n" duration=249.778275ms execID=c3e4a
time="2023-11-03T13:28:41Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=e4787
time="2023-11-03T13:28:41Z" level=debug msg="No resources found\n" duration=364.337557ms execID=e4787
time="2023-11-03T13:28:41Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=329d6
time="2023-11-03T13:28:42Z" level=debug msg="No resources found\n" duration=159.830688ms execID=329d6
time="2023-11-03T13:28:42Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:28:42Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDUyMiwibmJmIjoxNjk5MDE4MTIyLCJpYXQiOjE2OTkwMTgxMjIsImp0aSI6ImUwMzNjOGQ0LTBmZDUtNGE1Yy1hZDFmLTUwNTY3MDdhY2JlNyJ9.C3JS2EL_2AyUncDf5PYNTXRI5dNlyY7Zxl7toFhIBC0 --insecure" dir= execID=7e463
time="2023-11-03T13:28:42Z" level=debug duration=108.901189ms execID=7e463
time="2023-11-03T13:28:42Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=8f13c
time="2023-11-03T13:28:42Z" level=debug duration=2.246104ms execID=8f13c
time="2023-11-03T13:28:42Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=72a4f
time="2023-11-03T13:28:42Z" level=debug duration=1.771768ms execID=72a4f
time="2023-11-03T13:28:42Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=9b423
time="2023-11-03T13:28:42Z" level=debug duration=1.581318ms execID=9b423
time="2023-11-03T13:28:42Z" level=info msg="pkill -9 gpg-agent" dir= execID=5210c
time="2023-11-03T13:28:42Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=adebc
time="2023-11-03T13:28:42Z" level=debug duration=9.617018ms execID=adebc
time="2023-11-03T13:28:42Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=ae6e9
time="2023-11-03T13:28:43Z" level=debug duration=32.62838ms execID=ae6e9
time="2023-11-03T13:28:43Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=c32f6
time="2023-11-03T13:28:43Z" level=debug duration=1.728814ms execID=c32f6
time="2023-11-03T13:28:43Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=9be31
time="2023-11-03T13:28:43Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.649563ms execID=9be31
time="2023-11-03T13:28:43Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=080d3
time="2023-11-03T13:28:43Z" level=debug duration=37.557662ms execID=080d3
time="2023-11-03T13:28:43Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=ced98
time="2023-11-03T13:28:43Z" level=debug duration=20.44704ms execID=ced98
time="2023-11-03T13:28:43Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=7a6b3
time="2023-11-03T13:28:43Z" level=debug duration=2.720169ms execID=7a6b3
time="2023-11-03T13:28:43Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=c3885
Handling connection for 9081
time="2023-11-03T13:28:43Z" level=debug duration=80.988523ms execID=c3885
time="2023-11-03T13:28:43Z" level=info msg="kubectl create ns argocd-e2e--test-deleting-namespaced-app-stuck-in-sync-tjrnt" dir= execID=851e0
time="2023-11-03T13:28:43Z" level=debug msg="namespace/argocd-e2e--test-deleting-namespaced-app-stuck-in-sync-tjrnt created\n" duration=112.453374ms execID=851e0
time="2023-11-03T13:28:43Z" level=info msg="kubectl label ns argocd-e2e--test-deleting-namespaced-app-stuck-in-sync-tjrnt e2e.argoproj.io=true" dir= execID=9ccdc
time="2023-11-03T13:28:43Z" level=debug msg="namespace/argocd-e2e--test-deleting-namespaced-app-stuck-in-sync-tjrnt labeled\n" duration=288.032752ms execID=9ccdc
time="2023-11-03T13:28:43Z" level=info msg="clean state" duration=2.309712142s id=TestDeletingNamespacedAppStuckInSync-tjrnt name=TestDeletingNamespacedAppStuckInSync password=password username=admin
time="2023-11-03T13:28:44Z" level=info msg="../../dist/argocd app create argocd-e2e-external/test-deleting-namespaced-app-stuck-in-sync --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path hook-custom-health --project default --dest-namespace argocd-e2e--test-deleting-namespaced-app-stuck-in-sync-tjrnt --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDUyMiwibmJmIjoxNjk5MDE4MTIyLCJpYXQiOjE2OTkwMTgxMjIsImp0aSI6ImUwMzNjOGQ0LTBmZDUtNGE1Yy1hZDFmLTUwNTY3MDdhY2JlNyJ9.C3JS2EL_2AyUncDf5PYNTXRI5dNlyY7Zxl7toFhIBC0 --insecure" dir= execID=e8f74
time="2023-11-03T13:28:44Z" level=debug msg="application 'test-deleting-namespaced-app-stuck-in-sync' created\n" duration=237.086649ms execID=e8f74
time="2023-11-03T13:28:44Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:28:44Z" level=info msg="../../dist/argocd app sync argocd-e2e-external/test-deleting-namespaced-app-stuck-in-sync --timeout 30 --async --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDUyMiwibmJmIjoxNjk5MDE4MTIyLCJpYXQiOjE2OTkwMTgxMjIsImp0aSI6ImUwMzNjOGQ0LTBmZDUtNGE1Yy1hZDFmLTUwNTY3MDdhY2JlNyJ9.C3JS2EL_2AyUncDf5PYNTXRI5dNlyY7Zxl7toFhIBC0 --insecure" dir= execID=dd3f6
time="2023-11-03T13:28:44Z" level=debug duration=138.323398ms execID=dd3f6
time="2023-11-03T13:28:44Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:28:44Z" level=info msg="expectation succeeded: operation phase should be Running, is Running"
time="2023-11-03T13:28:44Z" level=info msg="pending: sync status to be OutOfSync, is "
time="2023-11-03T13:28:47Z" level=info msg="pending: sync status to be OutOfSync, is "
time="2023-11-03T13:28:50Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:28:50Z" level=info msg="../../dist/argocd app delete argocd-e2e-external/test-deleting-namespaced-app-stuck-in-sync --cascade=true --yes --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDUyMiwibmJmIjoxNjk5MDE4MTIyLCJpYXQiOjE2OTkwMTgxMjIsImp0aSI6ImUwMzNjOGQ0LTBmZDUtNGE1Yy1hZDFmLTUwNTY3MDdhY2JlNyJ9.C3JS2EL_2AyUncDf5PYNTXRI5dNlyY7Zxl7toFhIBC0 --insecure" dir= execID=4e78d
time="2023-11-03T13:28:51Z" level=debug duration=79.886387ms execID=4e78d
time="2023-11-03T13:28:51Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:28:51Z" level=info msg="expectation succeeded: operation phase should be Running, is Running"
time="2023-11-03T13:28:51Z" level=info msg="../../dist/argocd app terminate-op argocd-e2e-external/test-deleting-namespaced-app-stuck-in-sync --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDUyMiwibmJmIjoxNjk5MDE4MTIyLCJpYXQiOjE2OTkwMTgxMjIsImp0aSI6ImUwMzNjOGQ0LTBmZDUtNGE1Yy1hZDFmLTUwNTY3MDdhY2JlNyJ9.C3JS2EL_2AyUncDf5PYNTXRI5dNlyY7Zxl7toFhIBC0 --insecure" dir= execID=56866
time="2023-11-03T13:28:51Z" level=debug msg="Application 'test-deleting-namespaced-app-stuck-in-sync' operation terminating\n" duration=116.608417ms execID=56866
time="2023-11-03T13:28:51Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:28:51Z" level=info msg="pending: app should not exist"
time="2023-11-03T13:28:54Z" level=info msg="expectation succeeded: app does not exist"
time="2023-11-03T13:28:54Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestDeletingNamespacedAppStuckInSync (12.97s)
=== RUN   TestSimpleListGenerator
time="2023-11-03T13:28:54Z" level=info msg="mkdir -p /tmp/applicationset-e2e" dir= execID=a7f52
time="2023-11-03T13:28:54Z" level=debug duration=2.157022ms execID=a7f52
time="2023-11-03T13:28:54Z" level=info msg="clean state" duration=31.603669ms id= name=TestSimpleListGenerator password=password username=admin
time="2023-11-03T13:28:55Z" level=info msg="action: creating ApplicationSet 'simple-list-generator'"
time="2023-11-03T13:28:55Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:28:55Z" level=info msg="expectation pending: missing app 'my-cluster-guestbook'"
time="2023-11-03T13:28:58Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:28:58Z" level=info msg="action: updating ApplicationSet 'simple-list-generator'"
time="2023-11-03T13:28:58Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:28:58Z" level=info msg="expectation pending: apps are not equal: 'my-cluster-guestbook', diff: {\"spec\":{\"destination\":{\"namespace\":\"guestbook\"}}}\n"
time="2023-11-03T13:29:01Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:29:01Z" level=info msg="action: updating ApplicationSet 'simple-list-generator'"
time="2023-11-03T13:29:01Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:29:01Z" level=info msg="expectation pending: apps are not equal: 'my-cluster-guestbook', diff: {\"metadata\":{\"annotations\":null,\"labels\":null}}\n"
time="2023-11-03T13:29:04Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:29:04Z" level=info msg="expectation succeeded: application set successfully found"
time="2023-11-03T13:29:04Z" level=info msg="action: Deleting ApplicationSet 'simple-list-generator' <nil>"
time="2023-11-03T13:29:04Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:29:04Z" level=info msg="expectation pending: app 'my-cluster-guestbook' should no longer exist"
time="2023-11-03T13:29:07Z" level=info msg="expectation succeeded: all apps do not exist"
--- PASS: TestSimpleListGenerator (13.13s)
=== RUN   TestSimpleListGeneratorGoTemplate
time="2023-11-03T13:29:07Z" level=info msg="mkdir -p /tmp/applicationset-e2e" dir= execID=d733e
time="2023-11-03T13:29:07Z" level=debug duration=2.237377ms execID=d733e
time="2023-11-03T13:29:07Z" level=info msg="clean state" duration=43.818664ms id= name=TestSimpleListGeneratorGoTemplate password=password username=admin
time="2023-11-03T13:29:08Z" level=info msg="action: creating ApplicationSet 'simple-list-generator'"
time="2023-11-03T13:29:08Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:29:08Z" level=info msg="expectation pending: missing app 'my-cluster-guestbook'"
time="2023-11-03T13:29:11Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:29:11Z" level=info msg="action: updating ApplicationSet 'simple-list-generator'"
time="2023-11-03T13:29:11Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:29:11Z" level=info msg="expectation pending: apps are not equal: 'my-cluster-guestbook', diff: {\"spec\":{\"destination\":{\"namespace\":\"guestbook\"}}}\n"
time="2023-11-03T13:29:14Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:29:14Z" level=info msg="action: updating ApplicationSet 'simple-list-generator'"
time="2023-11-03T13:29:14Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:29:14Z" level=info msg="expectation pending: apps are not equal: 'my-cluster-guestbook', diff: {\"metadata\":{\"annotations\":null,\"labels\":null}}\n"
time="2023-11-03T13:29:17Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:29:17Z" level=info msg="expectation succeeded: application set successfully found"
time="2023-11-03T13:29:17Z" level=info msg="action: Deleting ApplicationSet 'simple-list-generator' <nil>"
time="2023-11-03T13:29:17Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:29:17Z" level=info msg="expectation pending: app 'my-cluster-guestbook' should no longer exist"
time="2023-11-03T13:29:20Z" level=info msg="expectation succeeded: all apps do not exist"
--- PASS: TestSimpleListGeneratorGoTemplate (13.15s)
=== RUN   TestSimpleGitDirectoryGenerator
time="2023-11-03T13:29:20Z" level=info msg="mkdir -p /tmp/applicationset-e2e" dir= execID=6b3d9
time="2023-11-03T13:29:20Z" level=debug duration=2.233638ms execID=6b3d9
time="2023-11-03T13:29:20Z" level=info msg="clean state" duration=31.519813ms id= name=TestSimpleGitDirectoryGenerator password=password username=admin
time="2023-11-03T13:29:21Z" level=info msg="action: creating ApplicationSet 'simple-git-generator'"
time="2023-11-03T13:29:21Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:29:21Z" level=info msg="expectation pending: missing app 'kustomize-guestbook'"
time="2023-11-03T13:29:24Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:29:24Z" level=info msg="action: updating ApplicationSet 'simple-git-generator'"
time="2023-11-03T13:29:24Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:29:24Z" level=info msg="expectation pending: apps are not equal: 'kustomize-guestbook', diff: {\"spec\":{\"destination\":{\"namespace\":\"kustomize-guestbook\"}}}\n"
time="2023-11-03T13:29:27Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:29:27Z" level=info msg="action: updating ApplicationSet 'simple-git-generator'"
time="2023-11-03T13:29:27Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:29:27Z" level=info msg="expectation pending: apps are not equal: 'kustomize-guestbook', diff: {\"metadata\":{\"annotations\":null,\"labels\":null}}\n"
time="2023-11-03T13:29:30Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:29:30Z" level=info msg="expectation succeeded: application set successfully found"
time="2023-11-03T13:29:30Z" level=info msg="action: Deleting ApplicationSet 'simple-git-generator' <nil>"
time="2023-11-03T13:29:30Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:29:30Z" level=info msg="expectation pending: app 'kustomize-guestbook' should no longer exist"
time="2023-11-03T13:29:33Z" level=info msg="expectation succeeded: all apps do not exist"
--- PASS: TestSimpleGitDirectoryGenerator (13.22s)
=== RUN   TestSimpleGitDirectoryGeneratorGoTemplate
time="2023-11-03T13:29:33Z" level=info msg="mkdir -p /tmp/applicationset-e2e" dir= execID=41900
time="2023-11-03T13:29:33Z" level=debug duration=2.859172ms execID=41900
time="2023-11-03T13:29:33Z" level=info msg="clean state" duration=40.485295ms id= name=TestSimpleGitDirectoryGeneratorGoTemplate password=password username=admin
time="2023-11-03T13:29:34Z" level=info msg="action: creating ApplicationSet 'simple-git-generator'"
time="2023-11-03T13:29:34Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:29:34Z" level=info msg="expectation pending: missing app 'kustomize-guestbook'"
time="2023-11-03T13:29:37Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:29:37Z" level=info msg="action: updating ApplicationSet 'simple-git-generator'"
time="2023-11-03T13:29:37Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:29:37Z" level=info msg="expectation pending: apps are not equal: 'kustomize-guestbook', diff: {\"spec\":{\"destination\":{\"namespace\":\"kustomize-guestbook\"}}}\n"
time="2023-11-03T13:29:40Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:29:40Z" level=info msg="action: updating ApplicationSet 'simple-git-generator'"
time="2023-11-03T13:29:40Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:29:40Z" level=info msg="expectation pending: apps are not equal: 'kustomize-guestbook', diff: {\"metadata\":{\"annotations\":null,\"labels\":null}}\n"
time="2023-11-03T13:29:43Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:29:43Z" level=info msg="expectation succeeded: application set successfully found"
time="2023-11-03T13:29:43Z" level=info msg="action: Deleting ApplicationSet 'simple-git-generator' <nil>"
time="2023-11-03T13:29:43Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:29:43Z" level=info msg="expectation pending: app 'kustomize-guestbook' should no longer exist"
time="2023-11-03T13:29:46Z" level=info msg="expectation succeeded: all apps do not exist"
--- PASS: TestSimpleGitDirectoryGeneratorGoTemplate (13.22s)
=== RUN   TestSimpleGitFilesGenerator
time="2023-11-03T13:29:46Z" level=info msg="mkdir -p /tmp/applicationset-e2e" dir= execID=4b765
time="2023-11-03T13:29:46Z" level=debug duration=2.012815ms execID=4b765
time="2023-11-03T13:29:46Z" level=info msg="clean state" duration=32.036049ms id= name=TestSimpleGitFilesGenerator password=password username=admin
time="2023-11-03T13:29:47Z" level=info msg="action: creating ApplicationSet 'simple-git-generator'"
time="2023-11-03T13:29:47Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:29:47Z" level=info msg="expectation pending: missing app 'engineering-dev-guestbook'"
time="2023-11-03T13:29:51Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:29:51Z" level=info msg="action: updating ApplicationSet 'simple-git-generator'"
time="2023-11-03T13:29:51Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:29:51Z" level=info msg="expectation pending: apps are not equal: 'engineering-dev-guestbook', diff: {\"spec\":{\"destination\":{\"namespace\":\"guestbook\"}}}\n"
time="2023-11-03T13:29:54Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:29:54Z" level=info msg="action: updating ApplicationSet 'simple-git-generator'"
time="2023-11-03T13:29:54Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:29:54Z" level=info msg="expectation pending: apps are not equal: 'engineering-dev-guestbook', diff: {\"metadata\":{\"annotations\":null,\"labels\":null}}\n"
time="2023-11-03T13:29:57Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:29:57Z" level=info msg="expectation succeeded: application set successfully found"
time="2023-11-03T13:29:57Z" level=info msg="action: Deleting ApplicationSet 'simple-git-generator' <nil>"
time="2023-11-03T13:29:57Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:29:57Z" level=info msg="expectation pending: app 'engineering-dev-guestbook' should no longer exist"
time="2023-11-03T13:30:00Z" level=info msg="expectation succeeded: all apps do not exist"
--- PASS: TestSimpleGitFilesGenerator (13.21s)
=== RUN   TestSimpleGitFilesGeneratorGoTemplate
time="2023-11-03T13:30:00Z" level=info msg="mkdir -p /tmp/applicationset-e2e" dir= execID=5ce7c
time="2023-11-03T13:30:00Z" level=debug duration=1.90752ms execID=5ce7c
time="2023-11-03T13:30:00Z" level=info msg="clean state" duration=42.992983ms id= name=TestSimpleGitFilesGeneratorGoTemplate password=password username=admin
time="2023-11-03T13:30:01Z" level=info msg="action: creating ApplicationSet 'simple-git-generator'"
time="2023-11-03T13:30:01Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:30:01Z" level=info msg="expectation pending: missing app 'engineering-dev-guestbook'"
time="2023-11-03T13:30:04Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:30:04Z" level=info msg="action: updating ApplicationSet 'simple-git-generator'"
time="2023-11-03T13:30:04Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:30:04Z" level=info msg="expectation pending: apps are not equal: 'engineering-dev-guestbook', diff: {\"spec\":{\"destination\":{\"namespace\":\"guestbook\"}}}\n"
time="2023-11-03T13:30:07Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:30:07Z" level=info msg="action: updating ApplicationSet 'simple-git-generator'"
time="2023-11-03T13:30:07Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:30:07Z" level=info msg="expectation pending: apps are not equal: 'engineering-dev-guestbook', diff: {\"metadata\":{\"annotations\":null,\"labels\":null}}\n"
time="2023-11-03T13:30:10Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:30:10Z" level=info msg="expectation succeeded: application set successfully found"
time="2023-11-03T13:30:10Z" level=info msg="action: Deleting ApplicationSet 'simple-git-generator' <nil>"
time="2023-11-03T13:30:10Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:30:10Z" level=info msg="expectation pending: app 'engineering-dev-guestbook' should no longer exist"
time="2023-11-03T13:30:13Z" level=info msg="expectation succeeded: all apps do not exist"
--- PASS: TestSimpleGitFilesGeneratorGoTemplate (13.17s)
=== RUN   TestSimpleGitFilesPreserveResourcesOnDeletionGoTemplate
time="2023-11-03T13:30:13Z" level=info msg="mkdir -p /tmp/applicationset-e2e" dir= execID=14223
time="2023-11-03T13:30:13Z" level=debug duration=2.079378ms execID=14223
time="2023-11-03T13:30:13Z" level=info msg="clean state" duration=38.237288ms id= name=TestSimpleGitFilesPreserveResourcesOnDeletionGoTemplate password=password username=admin
time="2023-11-03T13:30:14Z" level=info msg="action: creating namespace 'applicationset-e2e'"
time="2023-11-03T13:30:14Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:30:14Z" level=info msg="action: creating ApplicationSet 'simple-git-generator'"
time="2023-11-03T13:30:14Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:30:14Z" level=info msg="expectation pending: pod predicate does not match pods"
time="2023-11-03T13:30:17Z" level=info msg="expectation succeeded: pod predicate matched pod named 'guestbook-ui-754d46fbf6-ml2bt'"
time="2023-11-03T13:30:17Z" level=info msg="action: Deleting ApplicationSet 'simple-git-generator' <nil>"
time="2023-11-03T13:30:17Z" level=info msg="expectation succeeded: no error and output contained ''"
    applicationset_test.go:781: Waiting 30 seconds to give the cluster a chance to delete the pods.
time="2023-11-03T13:30:47Z" level=info msg="expectation succeeded: pod predicate matched pod named 'guestbook-ui-754d46fbf6-ml2bt'"
--- PASS: TestSimpleGitFilesPreserveResourcesOnDeletionGoTemplate (34.10s)
=== RUN   TestSimpleSCMProviderGenerator
time="2023-11-03T13:30:59Z" level=info msg="mkdir -p /tmp/applicationset-e2e" dir= execID=14b95
time="2023-11-03T13:30:59Z" level=debug duration=2.27113ms execID=14b95
time="2023-11-03T13:30:59Z" level=info msg="clean state" duration=11.679500958s id= name=TestSimpleSCMProviderGenerator password=password username=admin
time="2023-11-03T13:31:00Z" level=info msg="action: creating ApplicationSet 'simple-scm-provider-generator'"
time="2023-11-03T13:31:00Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:31:00Z" level=info msg="expectation pending: missing app 'argo-cd-guestbook'"
time="2023-11-03T13:31:03Z" level=info msg="expectation pending: missing app 'argo-cd-guestbook'"
time="2023-11-03T13:31:06Z" level=info msg="expectation pending: missing app 'argo-cd-guestbook'"
time="2023-11-03T13:31:09Z" level=info msg="expectation pending: missing app 'argo-cd-guestbook'"
time="2023-11-03T13:31:12Z" level=info msg="expectation pending: missing app 'argo-cd-guestbook'"
time="2023-11-03T13:31:15Z" level=info msg="expectation pending: missing app 'argo-cd-guestbook'"
time="2023-11-03T13:31:18Z" level=info msg="expectation pending: missing app 'argo-cd-guestbook'"
time="2023-11-03T13:31:21Z" level=info msg="expectation pending: missing app 'argo-cd-guestbook'"
time="2023-11-03T13:31:24Z" level=info msg="expectation pending: missing app 'argo-cd-guestbook'"
time="2023-11-03T13:31:27Z" level=info msg="expectation pending: missing app 'argo-cd-guestbook'"
    consequences.go:24: timeout waiting for: missing app 'argo-cd-guestbook'
--- FAIL: TestSimpleSCMProviderGenerator (42.76s)
=== RUN   TestSimpleSCMProviderGeneratorGoTemplate
time="2023-11-03T13:31:30Z" level=info msg="mkdir -p /tmp/applicationset-e2e" dir= execID=4636d
time="2023-11-03T13:31:31Z" level=debug duration=293.113493ms execID=4636d
time="2023-11-03T13:31:31Z" level=info msg="clean state" duration=840.447632ms id= name=TestSimpleSCMProviderGeneratorGoTemplate password=password username=admin
time="2023-11-03T13:31:32Z" level=info msg="action: creating ApplicationSet 'simple-scm-provider-generator'"
time="2023-11-03T13:31:32Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:31:32Z" level=info msg="expectation pending: missing app 'argo-cd-guestbook'"
time="2023-11-03T13:31:35Z" level=info msg="expectation pending: missing app 'argo-cd-guestbook'"
time="2023-11-03T13:31:38Z" level=info msg="expectation pending: missing app 'argo-cd-guestbook'"
time="2023-11-03T13:31:41Z" level=info msg="expectation pending: missing app 'argo-cd-guestbook'"
time="2023-11-03T13:31:44Z" level=info msg="expectation pending: missing app 'argo-cd-guestbook'"
time="2023-11-03T13:31:47Z" level=info msg="expectation pending: missing app 'argo-cd-guestbook'"
time="2023-11-03T13:31:50Z" level=info msg="expectation pending: missing app 'argo-cd-guestbook'"
time="2023-11-03T13:31:53Z" level=info msg="expectation pending: missing app 'argo-cd-guestbook'"
time="2023-11-03T13:31:56Z" level=info msg="expectation pending: missing app 'argo-cd-guestbook'"
time="2023-11-03T13:31:59Z" level=info msg="expectation pending: missing app 'argo-cd-guestbook'"
    consequences.go:24: timeout waiting for: missing app 'argo-cd-guestbook'
--- FAIL: TestSimpleSCMProviderGeneratorGoTemplate (31.91s)
=== RUN   TestCustomApplicationFinalizers
time="2023-11-03T13:32:02Z" level=info msg="mkdir -p /tmp/applicationset-e2e" dir= execID=3d053
time="2023-11-03T13:32:02Z" level=debug duration=2.428005ms execID=3d053
time="2023-11-03T13:32:02Z" level=info msg="clean state" duration=549.350861ms id= name=TestCustomApplicationFinalizers password=password username=admin
time="2023-11-03T13:32:03Z" level=info msg="action: creating ApplicationSet 'simple-list-generator'"
time="2023-11-03T13:32:03Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:32:03Z" level=info msg="expectation pending: missing app 'my-cluster-guestbook'"
time="2023-11-03T13:32:06Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:32:06Z" level=info msg="action: Deleting ApplicationSet 'simple-list-generator' <nil>"
time="2023-11-03T13:32:06Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:32:06Z" level=info msg="expectation pending: app 'my-cluster-guestbook' should no longer exist"
time="2023-11-03T13:32:09Z" level=info msg="expectation succeeded: all apps do not exist"
--- PASS: TestCustomApplicationFinalizers (7.59s)
=== RUN   TestCustomApplicationFinalizersGoTemplate
time="2023-11-03T13:32:09Z" level=info msg="mkdir -p /tmp/applicationset-e2e" dir= execID=959ab
time="2023-11-03T13:32:09Z" level=debug duration=2.229219ms execID=959ab
time="2023-11-03T13:32:09Z" level=info msg="clean state" duration=59.291772ms id= name=TestCustomApplicationFinalizersGoTemplate password=password username=admin
time="2023-11-03T13:32:10Z" level=info msg="action: creating ApplicationSet 'simple-list-generator'"
time="2023-11-03T13:32:10Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:32:10Z" level=info msg="expectation pending: missing app 'my-cluster-guestbook'"
time="2023-11-03T13:32:13Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:32:13Z" level=info msg="action: Deleting ApplicationSet 'simple-list-generator' <nil>"
time="2023-11-03T13:32:13Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:32:13Z" level=info msg="expectation pending: app 'my-cluster-guestbook' should no longer exist"
time="2023-11-03T13:32:16Z" level=info msg="expectation succeeded: all apps do not exist"
--- PASS: TestCustomApplicationFinalizersGoTemplate (7.10s)
=== RUN   TestSimplePullRequestGenerator
time="2023-11-03T13:32:16Z" level=info msg="mkdir -p /tmp/applicationset-e2e" dir= execID=a00f2
time="2023-11-03T13:32:16Z" level=debug duration=6.533613ms execID=a00f2
time="2023-11-03T13:32:16Z" level=info msg="clean state" duration=41.187926ms id= name=TestSimplePullRequestGenerator password=password username=admin
time="2023-11-03T13:32:17Z" level=info msg="action: creating ApplicationSet 'simple-pull-request-generator'"
time="2023-11-03T13:32:17Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:32:17Z" level=info msg="expectation pending: missing app 'guestbook-1'"
time="2023-11-03T13:32:20Z" level=info msg="expectation pending: missing app 'guestbook-1'"
time="2023-11-03T13:32:23Z" level=info msg="expectation pending: missing app 'guestbook-1'"
time="2023-11-03T13:32:26Z" level=info msg="expectation pending: missing app 'guestbook-1'"
time="2023-11-03T13:32:29Z" level=info msg="expectation pending: missing app 'guestbook-1'"
time="2023-11-03T13:32:32Z" level=info msg="expectation pending: missing app 'guestbook-1'"
time="2023-11-03T13:32:35Z" level=info msg="expectation pending: missing app 'guestbook-1'"
time="2023-11-03T13:32:38Z" level=info msg="expectation pending: missing app 'guestbook-1'"
time="2023-11-03T13:32:41Z" level=info msg="expectation pending: missing app 'guestbook-1'"
time="2023-11-03T13:32:44Z" level=info msg="expectation pending: missing app 'guestbook-1'"
    consequences.go:24: timeout waiting for: missing app 'guestbook-1'
--- FAIL: TestSimplePullRequestGenerator (31.11s)
=== RUN   TestSimplePullRequestGeneratorGoTemplate
time="2023-11-03T13:32:48Z" level=info msg="mkdir -p /tmp/applicationset-e2e" dir= execID=b1a08
time="2023-11-03T13:32:48Z" level=debug duration=2.020071ms execID=b1a08
time="2023-11-03T13:32:48Z" level=info msg="clean state" duration=553.042586ms id= name=TestSimplePullRequestGeneratorGoTemplate password=password username=admin
time="2023-11-03T13:32:49Z" level=info msg="action: creating ApplicationSet 'simple-pull-request-generator'"
time="2023-11-03T13:32:49Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:32:49Z" level=info msg="expectation pending: missing app 'guestbook-1'"
time="2023-11-03T13:32:52Z" level=info msg="expectation pending: missing app 'guestbook-1'"
time="2023-11-03T13:32:55Z" level=info msg="expectation pending: missing app 'guestbook-1'"
time="2023-11-03T13:32:58Z" level=info msg="expectation pending: missing app 'guestbook-1'"
time="2023-11-03T13:33:01Z" level=info msg="expectation pending: missing app 'guestbook-1'"
time="2023-11-03T13:33:04Z" level=info msg="expectation pending: missing app 'guestbook-1'"
time="2023-11-03T13:33:07Z" level=info msg="expectation pending: missing app 'guestbook-1'"
time="2023-11-03T13:33:10Z" level=info msg="expectation pending: missing app 'guestbook-1'"
time="2023-11-03T13:33:13Z" level=info msg="expectation pending: missing app 'guestbook-1'"
time="2023-11-03T13:33:16Z" level=info msg="expectation pending: missing app 'guestbook-1'"
    consequences.go:24: timeout waiting for: missing app 'guestbook-1'
--- FAIL: TestSimplePullRequestGeneratorGoTemplate (31.70s)
=== RUN   TestGitGeneratorPrivateRepo
time="2023-11-03T13:33:19Z" level=info msg="../../dist/argocd repo add https://argocd-e2e-server:9443/argo-e2e/testdata.git --username admin --password password --insecure-skip-server-verification --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDUyMiwibmJmIjoxNjk5MDE4MTIyLCJpYXQiOjE2OTkwMTgxMjIsImp0aSI6ImUwMzNjOGQ0LTBmZDUtNGE1Yy1hZDFmLTUwNTY3MDdhY2JlNyJ9.C3JS2EL_2AyUncDf5PYNTXRI5dNlyY7Zxl7toFhIBC0 --insecure" dir= execID=b192b
time="2023-11-03T13:33:19Z" level=debug msg="Repository 'https://argocd-e2e-server:9443/argo-e2e/testdata.git' added\n" duration=239.772852ms execID=b192b
time="2023-11-03T13:33:20Z" level=info msg="mkdir -p /tmp/applicationset-e2e" dir= execID=f914c
time="2023-11-03T13:33:20Z" level=debug duration=2.263692ms execID=f914c
time="2023-11-03T13:33:20Z" level=info msg="clean state" duration=549.651385ms id= name=TestGitGeneratorPrivateRepo password=password username=admin
time="2023-11-03T13:33:21Z" level=info msg="action: creating ApplicationSet 'simple-git-generator-private'"
time="2023-11-03T13:33:21Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:33:21Z" level=info msg="expectation pending: missing app 'https-kustomize-base'"
time="2023-11-03T13:33:24Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:33:24Z" level=info msg="action: Deleting ApplicationSet 'simple-git-generator-private' <nil>"
time="2023-11-03T13:33:24Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:33:24Z" level=info msg="expectation succeeded: all apps do not exist"
--- PASS: TestGitGeneratorPrivateRepo (4.82s)
=== RUN   TestGitGeneratorPrivateRepoGoTemplate
time="2023-11-03T13:33:24Z" level=info msg="../../dist/argocd repo add https://argocd-e2e-server:9443/argo-e2e/testdata.git --username admin --password password --insecure-skip-server-verification --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDUyMiwibmJmIjoxNjk5MDE4MTIyLCJpYXQiOjE2OTkwMTgxMjIsImp0aSI6ImUwMzNjOGQ0LTBmZDUtNGE1Yy1hZDFmLTUwNTY3MDdhY2JlNyJ9.C3JS2EL_2AyUncDf5PYNTXRI5dNlyY7Zxl7toFhIBC0 --insecure" dir= execID=b120f
time="2023-11-03T13:33:24Z" level=debug msg="Repository 'https://argocd-e2e-server:9443/argo-e2e/testdata.git' added\n" duration=102.368916ms execID=b120f
time="2023-11-03T13:33:24Z" level=info msg="mkdir -p /tmp/applicationset-e2e" dir= execID=10beb
time="2023-11-03T13:33:24Z" level=debug duration=2.192588ms execID=10beb
time="2023-11-03T13:33:24Z" level=info msg="clean state" duration=34.694102ms id= name=TestGitGeneratorPrivateRepoGoTemplate password=password username=admin
time="2023-11-03T13:33:25Z" level=info msg="action: creating ApplicationSet 'simple-git-generator-private'"
time="2023-11-03T13:33:25Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:33:25Z" level=info msg="expectation pending: missing app 'https-kustomize-base'"
time="2023-11-03T13:33:28Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:33:28Z" level=info msg="action: Deleting ApplicationSet 'simple-git-generator-private' <nil>"
time="2023-11-03T13:33:28Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:33:28Z" level=info msg="expectation succeeded: all apps do not exist"
--- PASS: TestGitGeneratorPrivateRepoGoTemplate (4.17s)
=== RUN   TestCliAppCommand
time="2023-11-03T13:33:28Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=3c2ca
time="2023-11-03T13:33:28Z" level=debug msg="namespace \"argocd-e2e--test-deleting-namespaced-app-stuck-in-sync-tjrnt\" deleted\n" duration=242.451257ms execID=3c2ca
time="2023-11-03T13:33:28Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=e3a03
time="2023-11-03T13:33:29Z" level=debug msg="No resources found\n" duration=419.510532ms execID=e3a03
time="2023-11-03T13:33:29Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=586f5
time="2023-11-03T13:33:29Z" level=debug msg="No resources found\n" duration=366.193624ms execID=586f5
time="2023-11-03T13:33:30Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:33:30Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDgxMCwibmJmIjoxNjk5MDE4NDEwLCJpYXQiOjE2OTkwMTg0MTAsImp0aSI6ImM2ZTg4ODg4LTcyODEtNDNhYS1iOTZiLTY3MGExNjU2MGFmMyJ9.NCVDSwXp9FsJMaLJ6sZMZggOE-TDASylsiNNZHyeVAU --insecure" dir= execID=a1adf
time="2023-11-03T13:33:30Z" level=debug duration=98.279795ms execID=a1adf
time="2023-11-03T13:33:30Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=060f2
time="2023-11-03T13:33:30Z" level=debug duration=2.053585ms execID=060f2
time="2023-11-03T13:33:30Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=cc4aa
time="2023-11-03T13:33:30Z" level=debug duration=1.585974ms execID=cc4aa
time="2023-11-03T13:33:30Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=64cc1
time="2023-11-03T13:33:30Z" level=debug duration=1.520883ms execID=64cc1
time="2023-11-03T13:33:30Z" level=info msg="pkill -9 gpg-agent" dir= execID=3008e
time="2023-11-03T13:33:30Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=caff8
time="2023-11-03T13:33:30Z" level=debug duration=10.800408ms execID=caff8
time="2023-11-03T13:33:30Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=046c5
time="2023-11-03T13:33:30Z" level=debug duration=92.76734ms execID=046c5
time="2023-11-03T13:33:30Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=45e54
time="2023-11-03T13:33:30Z" level=debug duration=1.923927ms execID=45e54
time="2023-11-03T13:33:30Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=4f0df
time="2023-11-03T13:33:30Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.7785ms execID=4f0df
time="2023-11-03T13:33:30Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=cec34
time="2023-11-03T13:33:30Z" level=debug duration=28.575975ms execID=cec34
time="2023-11-03T13:33:30Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=78b28
time="2023-11-03T13:33:30Z" level=debug duration=23.70066ms execID=78b28
time="2023-11-03T13:33:30Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=3e09b
time="2023-11-03T13:33:30Z" level=debug duration=2.683528ms execID=3e09b
time="2023-11-03T13:33:30Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=19586
Handling connection for 9081
time="2023-11-03T13:33:31Z" level=debug duration=73.500854ms execID=19586
time="2023-11-03T13:33:31Z" level=info msg="kubectl create ns argocd-e2e--test-cli-app-command-fpefz" dir= execID=79f91
time="2023-11-03T13:33:31Z" level=debug msg="namespace/argocd-e2e--test-cli-app-command-fpefz created\n" duration=145.775362ms execID=79f91
time="2023-11-03T13:33:31Z" level=info msg="kubectl label ns argocd-e2e--test-cli-app-command-fpefz e2e.argoproj.io=true" dir= execID=e0803
time="2023-11-03T13:33:31Z" level=debug msg="namespace/argocd-e2e--test-cli-app-command-fpefz labeled\n" duration=266.452906ms execID=e0803
time="2023-11-03T13:33:31Z" level=info msg="clean state" duration=2.845784201s id=TestCliAppCommand-fpefz name=TestCliAppCommand password=password username=admin
time="2023-11-03T13:33:32Z" level=info msg="../../dist/argocd app create test-cli-app-command --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path hook --project default --dest-namespace argocd-e2e--test-cli-app-command-fpefz --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDgxMCwibmJmIjoxNjk5MDE4NDEwLCJpYXQiOjE2OTkwMTg0MTAsImp0aSI6ImM2ZTg4ODg4LTcyODEtNDNhYS1iOTZiLTY3MGExNjU2MGFmMyJ9.NCVDSwXp9FsJMaLJ6sZMZggOE-TDASylsiNNZHyeVAU --insecure" dir= execID=df2ea
time="2023-11-03T13:33:32Z" level=debug msg="application 'test-cli-app-command' created\n" duration=224.658109ms execID=df2ea
time="2023-11-03T13:33:32Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:33:32Z" level=info msg="../../dist/argocd app sync test-cli-app-command --timeout 90 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDgxMCwibmJmIjoxNjk5MDE4NDEwLCJpYXQiOjE2OTkwMTg0MTAsImp0aSI6ImM2ZTg4ODg4LTcyODEtNDNhYS1iOTZiLTY3MGExNjU2MGFmMyJ9.NCVDSwXp9FsJMaLJ6sZMZggOE-TDASylsiNNZHyeVAU --insecure" dir= execID=d551b
time="2023-11-03T13:33:41Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:33:36+00:00                Pod  argocd-e2e--test-cli-app-command-fpefz                   pod  OutOfSync  Missing              \n2023-11-03T13:33:36+00:00                Pod  argocd-e2e--test-cli-app-command-fpefz                   pod  OutOfSync  Missing              pod/pod created\n2023-11-03T13:33:36+00:00                Pod  argocd-e2e--test-cli-app-command-fpefz                  hook   Running    Synced        Sync  pod/hook created\n2023-11-03T13:33:36+00:00                Pod  argocd-e2e--test-cli-app-command-fpefz                   pod    Synced  Progressing              pod/pod created\n2023-11-03T13:33:41+00:00                Pod  argocd-e2e--test-cli-app-command-fpefz                  hook  Succeeded   Synced        Sync  pod/hook created\n2023-11-03T13:33:41+00:00                Pod  argocd-e2e--test-cli-app-command-fpefz                   pod    Synced  Healthy              pod/pod created\n\nName:               argocd-e2e/test-cli-app-command\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-cli-app-command-fpefz\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-cli-app-command\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               hook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (4f7ce43)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      4f7ce437d9fd84171951b8236141afd54f9ff413\nPhase:              Succeeded\nStart:              2023-11-03 13:33:32 +0000 UTC\nFinished:           2023-11-03 13:33:41 +0000 UTC\nDuration:           9s\nMessage:            successfully synced (no more tasks)\n\nGROUP  KIND  NAMESPACE                               NAME  STATUS     HEALTH   HOOK  MESSAGE\n       Pod   argocd-e2e--test-cli-app-command-fpefz  pod   Synced     Healthy        pod/pod created\n       Pod   argocd-e2e--test-cli-app-command-fpefz  hook  Succeeded           Sync  pod/hook created\n" duration=8.600854826s execID=d551b
time="2023-11-03T13:33:41Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:33:41Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:33:41Z" level=info msg="../../dist/argocd app list --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDgxMCwibmJmIjoxNjk5MDE4NDEwLCJpYXQiOjE2OTkwMTg0MTAsImp0aSI6ImM2ZTg4ODg4LTcyODEtNDNhYS1iOTZiLTY3MGExNjU2MGFmMyJ9.NCVDSwXp9FsJMaLJ6sZMZggOE-TDASylsiNNZHyeVAU --insecure" dir= execID=888ad
time="2023-11-03T13:33:41Z" level=debug msg="NAME                             CLUSTER                         NAMESPACE                               PROJECT  STATUS  HEALTH   SYNCPOLICY  CONDITIONS  REPO                                                 PATH  TARGET\nargocd-e2e/test-cli-app-command  https://kubernetes.default.svc  argocd-e2e--test-cli-app-command-fpefz  default  Synced  Healthy  <none>      <none>      http://argocd-e2e-server:9081/argo-e2e/testdata.git  hook  \n" duration=76.053567ms execID=888ad
time="2023-11-03T13:33:41Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCliAppCommand (12.77s)
=== RUN   TestSimpleClusterGenerator
    fixture.go:129: Removing finalizer for:  test-cli-app-command
time="2023-11-03T13:33:41Z" level=info msg="mkdir -p /tmp/applicationset-e2e" dir= execID=bc7ce
time="2023-11-03T13:33:41Z" level=debug duration=2.425214ms execID=bc7ce
time="2023-11-03T13:33:41Z" level=info msg="clean state" duration=565.435438ms id= name=TestSimpleClusterGenerator password=password username=admin
time="2023-11-03T13:33:43Z" level=info msg="Created bearer token secret for ServiceAccount \"argocd-test-argocd-application-controller\""
time="2023-11-03T13:33:43Z" level=info msg="action: creating cluster Secret 'my-secret'"
time="2023-11-03T13:33:43Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:33:43Z" level=info msg="action: creating ApplicationSet 'simple-cluster-generator'"
time="2023-11-03T13:33:43Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:33:43Z" level=info msg="expectation pending: missing app 'cluster1-guestbook'"
time="2023-11-03T13:33:46Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:33:47Z" level=info msg="action: updating ApplicationSet 'simple-cluster-generator'"
time="2023-11-03T13:33:47Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:33:47Z" level=info msg="expectation pending: apps are not equal: 'cluster1-guestbook', diff: {\"spec\":{\"destination\":{\"namespace\":\"guestbook\"}}}\n"
time="2023-11-03T13:33:50Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:33:50Z" level=info msg="action: updating ApplicationSet 'simple-cluster-generator'"
time="2023-11-03T13:33:50Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:33:50Z" level=info msg="expectation pending: apps are not equal: 'cluster1-guestbook', diff: {\"metadata\":{\"annotations\":null,\"labels\":null}}\n"
time="2023-11-03T13:33:53Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:33:53Z" level=info msg="action: Deleting ApplicationSet 'simple-cluster-generator' <nil>"
time="2023-11-03T13:33:53Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:33:53Z" level=info msg="expectation pending: app 'cluster1-guestbook' should no longer exist"
time="2023-11-03T13:33:56Z" level=info msg="expectation succeeded: all apps do not exist"
--- PASS: TestSimpleClusterGenerator (14.70s)
=== RUN   TestClusterGeneratorWithLocalCluster
=== RUN   TestClusterGeneratorWithLocalCluster/specify_local_cluster_by_server_field
time="2023-11-03T13:33:56Z" level=info msg="mkdir -p /tmp/applicationset-e2e" dir= execID=3820f
time="2023-11-03T13:33:56Z" level=debug duration=2.235012ms execID=3820f
time="2023-11-03T13:33:56Z" level=info msg="clean state" duration=37.894631ms id= name=TestClusterGeneratorWithLocalCluster/specify_local_cluster_by_server_field password=password username=admin
time="2023-11-03T13:33:57Z" level=info msg="action: creating ApplicationSet 'in-cluster-generator'"
time="2023-11-03T13:33:57Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:33:57Z" level=info msg="expectation pending: missing app 'in-cluster-guestbook'"
time="2023-11-03T13:34:00Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:34:00Z" level=info msg="action: updating ApplicationSet 'in-cluster-generator'"
time="2023-11-03T13:34:00Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:34:00Z" level=info msg="expectation pending: apps are not equal: 'in-cluster-guestbook', diff: {\"spec\":{\"destination\":{\"namespace\":\"guestbook\"}}}\n"
time="2023-11-03T13:34:03Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:34:03Z" level=info msg="action: updating ApplicationSet 'in-cluster-generator'"
time="2023-11-03T13:34:03Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:34:03Z" level=info msg="expectation pending: apps are not equal: 'in-cluster-guestbook', diff: {\"metadata\":{\"annotations\":null,\"labels\":null}}\n"
time="2023-11-03T13:34:06Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:34:06Z" level=info msg="action: Deleting ApplicationSet 'in-cluster-generator' <nil>"
time="2023-11-03T13:34:06Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:34:06Z" level=info msg="expectation pending: app 'in-cluster-guestbook' should no longer exist"
time="2023-11-03T13:34:09Z" level=info msg="expectation succeeded: all apps do not exist"
=== RUN   TestClusterGeneratorWithLocalCluster/specify_local_cluster_by_name_field
time="2023-11-03T13:34:09Z" level=info msg="mkdir -p /tmp/applicationset-e2e" dir= execID=44388
time="2023-11-03T13:34:09Z" level=debug duration=2.285401ms execID=44388
time="2023-11-03T13:34:09Z" level=info msg="clean state" duration=39.417025ms id= name=TestClusterGeneratorWithLocalCluster/specify_local_cluster_by_name_field password=password username=admin
time="2023-11-03T13:34:10Z" level=info msg="action: creating ApplicationSet 'in-cluster-generator'"
time="2023-11-03T13:34:10Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:34:10Z" level=info msg="expectation pending: missing app 'in-cluster-guestbook'"
time="2023-11-03T13:34:13Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:34:13Z" level=info msg="action: updating ApplicationSet 'in-cluster-generator'"
time="2023-11-03T13:34:13Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:34:13Z" level=info msg="expectation pending: apps are not equal: 'in-cluster-guestbook', diff: {\"spec\":{\"destination\":{\"namespace\":\"guestbook\"}}}\n"
time="2023-11-03T13:34:16Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:34:16Z" level=info msg="action: updating ApplicationSet 'in-cluster-generator'"
time="2023-11-03T13:34:16Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:34:16Z" level=info msg="expectation pending: apps are not equal: 'in-cluster-guestbook', diff: {\"metadata\":{\"annotations\":null,\"labels\":null}}\n"
time="2023-11-03T13:34:19Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:34:19Z" level=info msg="action: Deleting ApplicationSet 'in-cluster-generator' <nil>"
time="2023-11-03T13:34:19Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:34:19Z" level=info msg="expectation pending: app 'in-cluster-guestbook' should no longer exist"
time="2023-11-03T13:34:22Z" level=info msg="expectation succeeded: all apps do not exist"
--- PASS: TestClusterGeneratorWithLocalCluster (26.26s)
    --- PASS: TestClusterGeneratorWithLocalCluster/specify_local_cluster_by_server_field (13.13s)
    --- PASS: TestClusterGeneratorWithLocalCluster/specify_local_cluster_by_name_field (13.13s)
=== RUN   TestSimpleClusterGeneratorAddingCluster
time="2023-11-03T13:34:22Z" level=info msg="mkdir -p /tmp/applicationset-e2e" dir= execID=8858b
time="2023-11-03T13:34:22Z" level=debug duration=2.078282ms execID=8858b
time="2023-11-03T13:34:22Z" level=info msg="clean state" duration=32.773862ms id= name=TestSimpleClusterGeneratorAddingCluster password=password username=admin
time="2023-11-03T13:34:23Z" level=info msg="action: creating cluster Secret 'my-secret'"
time="2023-11-03T13:34:23Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:34:23Z" level=info msg="action: creating ApplicationSet 'simple-cluster-generator'"
time="2023-11-03T13:34:23Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:34:23Z" level=info msg="expectation pending: missing app 'cluster1-guestbook'"
time="2023-11-03T13:34:26Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:34:27Z" level=info msg="action: creating cluster Secret 'my-secret2'"
time="2023-11-03T13:34:27Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:34:27Z" level=info msg="expectation pending: missing app 'cluster2-guestbook'"
time="2023-11-03T13:34:30Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:34:30Z" level=info msg="action: Deleting ApplicationSet 'simple-cluster-generator' <nil>"
time="2023-11-03T13:34:30Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:34:30Z" level=info msg="expectation pending: app 'cluster1-guestbook' should no longer exist"
time="2023-11-03T13:34:33Z" level=info msg="expectation succeeded: all apps do not exist"
--- PASS: TestSimpleClusterGeneratorAddingCluster (11.15s)
=== RUN   TestSimpleClusterGeneratorDeletingCluster
time="2023-11-03T13:34:33Z" level=info msg="mkdir -p /tmp/applicationset-e2e" dir= execID=3c094
time="2023-11-03T13:34:33Z" level=debug duration=2.445362ms execID=3c094
time="2023-11-03T13:34:33Z" level=info msg="clean state" duration=53.980698ms id= name=TestSimpleClusterGeneratorDeletingCluster password=password username=admin
time="2023-11-03T13:34:35Z" level=info msg="action: creating cluster Secret 'my-secret'"
time="2023-11-03T13:34:35Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:34:35Z" level=info msg="action: creating cluster Secret 'my-secret2'"
time="2023-11-03T13:34:35Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:34:35Z" level=info msg="action: creating ApplicationSet 'simple-cluster-generator'"
time="2023-11-03T13:34:35Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:34:35Z" level=info msg="expectation pending: missing app 'cluster1-guestbook'"
time="2023-11-03T13:34:38Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:34:38Z" level=info msg="action: deleting cluster Secret 'my-secret2'"
time="2023-11-03T13:34:38Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:34:38Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:34:38Z" level=info msg="expectation pending: app 'cluster2-guestbook' should no longer exist"
time="2023-11-03T13:34:41Z" level=info msg="expectation succeeded: all apps do not exist"
time="2023-11-03T13:34:41Z" level=info msg="action: Deleting ApplicationSet 'simple-cluster-generator' <nil>"
time="2023-11-03T13:34:41Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:34:41Z" level=info msg="expectation pending: app 'cluster1-guestbook' should no longer exist"
time="2023-11-03T13:34:44Z" level=info msg="expectation succeeded: all apps do not exist"
--- PASS: TestSimpleClusterGeneratorDeletingCluster (11.18s)
=== RUN   TestClusterRoleBinding
time="2023-11-03T13:34:44Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=20275
time="2023-11-03T13:34:44Z" level=debug msg="namespace \"argocd-e2e--test-cli-app-command-fpefz\" deleted\n" duration=233.215511ms execID=20275
time="2023-11-03T13:34:44Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=2420c
time="2023-11-03T13:34:45Z" level=debug msg="No resources found\n" duration=550.38832ms execID=2420c
time="2023-11-03T13:34:45Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=1e79a
time="2023-11-03T13:34:45Z" level=debug msg="No resources found\n" duration=259.914129ms execID=1e79a
time="2023-11-03T13:34:46Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:34:46Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDg4NiwibmJmIjoxNjk5MDE4NDg2LCJpYXQiOjE2OTkwMTg0ODYsImp0aSI6IjBjNzQ4ZTNkLTA3ZDAtNDJhOS05ZTMxLWU2OWY2MzcwOGJlYiJ9.qtG6g9avh21KLpiNBmay13xBz9rIooptppe6S_1N298 --insecure" dir= execID=0a4a0
time="2023-11-03T13:34:46Z" level=debug duration=92.740289ms execID=0a4a0
time="2023-11-03T13:34:46Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=ecfd8
time="2023-11-03T13:34:46Z" level=debug duration=2.039763ms execID=ecfd8
time="2023-11-03T13:34:46Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=e4187
time="2023-11-03T13:34:46Z" level=debug duration=1.704325ms execID=e4187
time="2023-11-03T13:34:46Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=955f9
time="2023-11-03T13:34:46Z" level=debug duration=1.534903ms execID=955f9
time="2023-11-03T13:34:46Z" level=info msg="pkill -9 gpg-agent" dir= execID=450c2
time="2023-11-03T13:34:46Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=87be4
time="2023-11-03T13:34:46Z" level=debug duration=10.158872ms execID=87be4
time="2023-11-03T13:34:46Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=9496f
time="2023-11-03T13:34:46Z" level=debug duration=64.769949ms execID=9496f
time="2023-11-03T13:34:46Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=c3d65
time="2023-11-03T13:34:46Z" level=debug duration=2.048425ms execID=c3d65
time="2023-11-03T13:34:46Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=ed36e
time="2023-11-03T13:34:46Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.860815ms execID=ed36e
time="2023-11-03T13:34:46Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=81369
time="2023-11-03T13:34:47Z" level=debug duration=29.026341ms execID=81369
time="2023-11-03T13:34:47Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=aaf6c
time="2023-11-03T13:34:47Z" level=debug duration=23.53208ms execID=aaf6c
time="2023-11-03T13:34:47Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=43344
time="2023-11-03T13:34:47Z" level=debug duration=2.634786ms execID=43344
time="2023-11-03T13:34:47Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=b6bd3
Handling connection for 9081
time="2023-11-03T13:34:47Z" level=debug duration=62.404294ms execID=b6bd3
time="2023-11-03T13:34:47Z" level=info msg="kubectl create ns argocd-e2e--test-cluster-role-binding-ugkpr" dir= execID=1d8ec
time="2023-11-03T13:34:47Z" level=debug msg="namespace/argocd-e2e--test-cluster-role-binding-ugkpr created\n" duration=161.912836ms execID=1d8ec
time="2023-11-03T13:34:47Z" level=info msg="kubectl label ns argocd-e2e--test-cluster-role-binding-ugkpr e2e.argoproj.io=true" dir= execID=34ba4
time="2023-11-03T13:34:47Z" level=debug msg="namespace/argocd-e2e--test-cluster-role-binding-ugkpr labeled\n" duration=360.848241ms execID=34ba4
time="2023-11-03T13:34:47Z" level=info msg="clean state" duration=2.96911401s id=TestClusterRoleBinding-ugkpr name=TestClusterRoleBinding password=password username=admin
time="2023-11-03T13:34:48Z" level=info msg="../../dist/argocd app create test-cluster-role-binding --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path cluster-role --project default --dest-namespace argocd-e2e--test-cluster-role-binding-ugkpr --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDg4NiwibmJmIjoxNjk5MDE4NDg2LCJpYXQiOjE2OTkwMTg0ODYsImp0aSI6IjBjNzQ4ZTNkLTA3ZDAtNDJhOS05ZTMxLWU2OWY2MzcwOGJlYiJ9.qtG6g9avh21KLpiNBmay13xBz9rIooptppe6S_1N298 --insecure" dir= execID=c9650
time="2023-11-03T13:34:49Z" level=debug msg="application 'test-cluster-role-binding' created\n" duration=376.883288ms execID=c9650
time="2023-11-03T13:34:49Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:34:49Z" level=info msg="../../dist/argocd app sync test-cluster-role-binding --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDg4NiwibmJmIjoxNjk5MDE4NDg2LCJpYXQiOjE2OTkwMTg0ODYsImp0aSI6IjBjNzQ4ZTNkLTA3ZDAtNDJhOS05ZTMxLWU2OWY2MzcwOGJlYiJ9.qtG6g9avh21KLpiNBmay13xBz9rIooptppe6S_1N298 --insecure" dir= execID=00abf
time="2023-11-03T13:34:52Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                   NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:34:49+00:00                Pod  argocd-e2e--test-cluster-role-binding-ugkpr                my-pod  OutOfSync  Missing              \n2023-11-03T13:34:49+00:00  rbac.authorization.k8s.io  ClusterRoleBinding              my-cluster-role-binding                                 \n2023-11-03T13:34:51+00:00  rbac.authorization.k8s.io  ClusterRoleBinding  argocd-e2e--test-cluster-role-binding-ugkpr  my-cluster-role-binding   Running   Synced     PreSync  clusterrolebinding.rbac.authorization.k8s.io/my-cluster-role-binding reconciled. reconciliation required create\n                           missing subjects added:\n                                {Kind:ServiceAccount APIGroup: Name:default Namespace:default}. clusterrolebinding.rbac.authorization.k8s.io/my-cluster-role-binding configured. Warning: resource clusterrolebindings/my-cluster-role-binding is missing the kubectl.kubernetes.io/last-applied-configuration annotation which is required by  apply.  apply should only be used on resources created declaratively by either  create --save-config or  apply. The missing annotation will be patched automatically.\n2023-11-03T13:34:52+00:00  rbac.authorization.k8s.io  ClusterRoleBinding  argocd-e2e--test-cluster-role-binding-ugkpr  my-cluster-role-binding  Succeeded   Synced     PreSync  my-cluster-role-binding created\n2023-11-03T13:34:52+00:00                                    Pod          argocd-e2e--test-cluster-role-binding-ugkpr                my-pod     OutOfSync  Missing              pod/my-pod created\n2023-11-03T13:34:52+00:00                Pod  argocd-e2e--test-cluster-role-binding-ugkpr                my-pod    Synced  Progressing              pod/my-pod created\n\nName:               argocd-e2e/test-cluster-role-binding\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-cluster-role-binding-ugkpr\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-cluster-role-binding\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               cluster-role\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (611b779)\nHealth Status:      Progressing\n\nOperation:          Sync\nSync Revision:      611b779281f977eb68cb93a1c696f57bc1c1c0e4\nPhase:              Succeeded\nStart:              2023-11-03 13:34:49 +0000 UTC\nFinished:           2023-11-03 13:34:52 +0000 UTC\nDuration:           3s\nMessage:            successfully synced (all tasks run)\n\nGROUP                      KIND                NAMESPACE                                    NAME                     STATUS     HEALTH       HOOK     MESSAGE\nrbac.authorization.k8s.io  ClusterRoleBinding  argocd-e2e--test-cluster-role-binding-ugkpr  my-cluster-role-binding  Succeeded               PreSync  my-cluster-role-binding created\n                           Pod                 argocd-e2e--test-cluster-role-binding-ugkpr  my-pod                   Synced     Progressing           pod/my-pod created\nrbac.authorization.k8s.io  ClusterRoleBinding                                               my-cluster-role-binding                                   \n" duration=3.148842964s execID=00abf
time="2023-11-03T13:34:52Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:34:52Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:34:52Z" level=info msg="pending: health to should Healthy, is Progressing"
time="2023-11-03T13:34:55Z" level=info msg="pending: health to should Healthy, is Progressing"
time="2023-11-03T13:34:58Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:34:58Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:34:58Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestClusterRoleBinding (13.54s)
=== RUN   TestClusterList
time="2023-11-03T13:34:58Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=93d14
time="2023-11-03T13:34:58Z" level=debug msg="namespace \"argocd-e2e--test-cluster-role-binding-ugkpr\" deleted\n" duration=287.305384ms execID=93d14
time="2023-11-03T13:34:58Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=ca94b
time="2023-11-03T13:34:58Z" level=debug msg="No resources found\n" duration=379.28265ms execID=ca94b
time="2023-11-03T13:34:58Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=00e0f
time="2023-11-03T13:34:59Z" level=debug msg="No resources found\n" duration=221.110921ms execID=00e0f
time="2023-11-03T13:34:59Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:34:59Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDg5OSwibmJmIjoxNjk5MDE4NDk5LCJpYXQiOjE2OTkwMTg0OTksImp0aSI6IjU5NDNiMDdkLWIxMmUtNDBjNS1iZGIwLThhNWRjMzVhODE3OSJ9.SCgGP8ImGS-GjZzXnlg1h0Qa2GrGn5CcXn0NZG9yrHg --insecure" dir= execID=9f296
time="2023-11-03T13:34:59Z" level=debug duration=124.03536ms execID=9f296
time="2023-11-03T13:34:59Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=f1a9a
time="2023-11-03T13:34:59Z" level=debug duration=2.21065ms execID=f1a9a
time="2023-11-03T13:34:59Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=b65e9
time="2023-11-03T13:34:59Z" level=debug duration=1.82713ms execID=b65e9
time="2023-11-03T13:34:59Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=2559f
time="2023-11-03T13:34:59Z" level=debug duration=1.634144ms execID=2559f
time="2023-11-03T13:34:59Z" level=info msg="pkill -9 gpg-agent" dir= execID=01c6d
time="2023-11-03T13:34:59Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=ad6e3
time="2023-11-03T13:34:59Z" level=debug duration=9.968607ms execID=ad6e3
time="2023-11-03T13:34:59Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=0e7b7
time="2023-11-03T13:35:00Z" level=debug duration=63.454984ms execID=0e7b7
time="2023-11-03T13:35:00Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=a5f14
time="2023-11-03T13:35:00Z" level=debug duration=1.893517ms execID=a5f14
time="2023-11-03T13:35:00Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=0433c
time="2023-11-03T13:35:00Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.138086ms execID=0433c
time="2023-11-03T13:35:00Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=4c048
time="2023-11-03T13:35:00Z" level=debug duration=30.606795ms execID=4c048
time="2023-11-03T13:35:00Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=bddf0
time="2023-11-03T13:35:00Z" level=debug duration=22.671896ms execID=bddf0
time="2023-11-03T13:35:00Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=41620
time="2023-11-03T13:35:00Z" level=debug duration=2.852726ms execID=41620
time="2023-11-03T13:35:00Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=bee16
Handling connection for 9081
time="2023-11-03T13:35:00Z" level=debug duration=75.340489ms execID=bee16
time="2023-11-03T13:35:00Z" level=info msg="kubectl create ns argocd-e2e--test-cluster-list-kwdnc" dir= execID=96ebd
time="2023-11-03T13:35:00Z" level=debug msg="namespace/argocd-e2e--test-cluster-list-kwdnc created\n" duration=164.731063ms execID=96ebd
time="2023-11-03T13:35:00Z" level=info msg="kubectl label ns argocd-e2e--test-cluster-list-kwdnc e2e.argoproj.io=true" dir= execID=31193
time="2023-11-03T13:35:00Z" level=debug msg="namespace/argocd-e2e--test-cluster-list-kwdnc labeled\n" duration=284.922691ms execID=31193
time="2023-11-03T13:35:00Z" level=info msg="clean state" duration=2.438724233s id=TestClusterList-kwdnc name=TestClusterList password=password username=admin
time="2023-11-03T13:35:01Z" level=info msg="../../dist/argocd cluster list --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDg5OSwibmJmIjoxNjk5MDE4NDk5LCJpYXQiOjE2OTkwMTg0OTksImp0aSI6IjU5NDNiMDdkLWIxMmUtNDBjNS1iZGIwLThhNWRjMzVhODE3OSJ9.SCgGP8ImGS-GjZzXnlg1h0Qa2GrGn5CcXn0NZG9yrHg --insecure" dir= execID=9add5
time="2023-11-03T13:35:01Z" level=debug msg="SERVER                          NAME        VERSION  STATUS      MESSAGE  PROJECT\nhttps://kubernetes.default.svc  in-cluster  1.26     Successful           \n" duration=114.976953ms execID=9add5
time="2023-11-03T13:35:01Z" level=info msg="kubectl version -o json" dir=. execID=46707
time="2023-11-03T13:35:01Z" level=debug msg="{\n  \"clientVersion\": {\n    \"major\": \"1\",\n    \"minor\": \"26\",\n    \"gitVersion\": \"v1.26.1\",\n    \"gitCommit\": \"05d83eff7e17160e679898a2a5cd6019ec252c49\",\n    \"gitTreeState\": \"clean\",\n    \"buildDate\": \"2023-06-07T15:39:28Z\",\n    \"goVersion\": \"go1.19.9\",\n    \"compiler\": \"gc\",\n    \"platform\": \"linux/amd64\"\n  },\n  \"kustomizeVersion\": \"v4.5.7\",\n  \"serverVersion\": {\n    \"major\": \"1\",\n    \"minor\": \"26\",\n    \"gitVersion\": \"v1.26.7+c7ee51f\",\n    \"gitCommit\": \"f10a517f7199bdae922a70893d85eb96a76f5c2d\",\n    \"gitTreeState\": \"clean\",\n    \"buildDate\": \"2023-09-11T02:22:18Z\",\n    \"goVersion\": \"go1.19.10 X:strictfipsruntime\",\n    \"compiler\": \"gc\",\n    \"platform\": \"linux/amd64\"\n  }\n}\n" duration=202.246447ms execID=46707
time="2023-11-03T13:35:01Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
time="2023-11-03T13:35:01Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestClusterList (3.76s)
=== RUN   TestClusterAdd
time="2023-11-03T13:35:01Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=8da3f
time="2023-11-03T13:35:02Z" level=debug msg="namespace \"argocd-e2e--test-cluster-list-kwdnc\" deleted\n" duration=240.312091ms execID=8da3f
time="2023-11-03T13:35:02Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=f8af9
time="2023-11-03T13:35:02Z" level=debug msg="No resources found\n" duration=446.721993ms execID=f8af9
time="2023-11-03T13:35:02Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=c8a4b
time="2023-11-03T13:35:02Z" level=debug msg="No resources found\n" duration=173.631352ms execID=c8a4b
time="2023-11-03T13:35:03Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:35:03Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDkwMywibmJmIjoxNjk5MDE4NTAzLCJpYXQiOjE2OTkwMTg1MDMsImp0aSI6IjQwMDQyMmQ3LWZmMzktNGJiYS04ZmM0LTk3OTNmMmFkNDczOSJ9.OLOXO7rmWri1zuribEqvTqIHX4y7trBHUhGRJVhc1Zo --insecure" dir= execID=b8b41
time="2023-11-03T13:35:03Z" level=debug duration=105.690452ms execID=b8b41
time="2023-11-03T13:35:03Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=c02fb
time="2023-11-03T13:35:03Z" level=debug duration=2.213764ms execID=c02fb
time="2023-11-03T13:35:03Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=3bb54
time="2023-11-03T13:35:03Z" level=debug duration=2.034004ms execID=3bb54
time="2023-11-03T13:35:03Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=a9f8b
time="2023-11-03T13:35:03Z" level=debug duration=1.553991ms execID=a9f8b
time="2023-11-03T13:35:03Z" level=info msg="pkill -9 gpg-agent" dir= execID=e33ec
time="2023-11-03T13:35:03Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=687ba
time="2023-11-03T13:35:03Z" level=debug duration=10.050606ms execID=687ba
time="2023-11-03T13:35:03Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=21bb5
time="2023-11-03T13:35:03Z" level=debug duration=47.135999ms execID=21bb5
time="2023-11-03T13:35:03Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=380fb
time="2023-11-03T13:35:03Z" level=debug duration=1.890725ms execID=380fb
time="2023-11-03T13:35:03Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=80607
time="2023-11-03T13:35:03Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.986041ms execID=80607
time="2023-11-03T13:35:03Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=e33cd
time="2023-11-03T13:35:03Z" level=debug duration=27.876038ms execID=e33cd
time="2023-11-03T13:35:03Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=115f7
time="2023-11-03T13:35:03Z" level=debug duration=22.396456ms execID=115f7
time="2023-11-03T13:35:03Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=0b7d4
time="2023-11-03T13:35:03Z" level=debug duration=2.166293ms execID=0b7d4
time="2023-11-03T13:35:03Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=ea49e
Handling connection for 9081
time="2023-11-03T13:35:03Z" level=debug duration=81.219729ms execID=ea49e
time="2023-11-03T13:35:03Z" level=info msg="kubectl create ns argocd-e2e--test-cluster-add-kpmwh" dir= execID=8926a
time="2023-11-03T13:35:03Z" level=debug msg="namespace/argocd-e2e--test-cluster-add-kpmwh created\n" duration=182.232125ms execID=8926a
time="2023-11-03T13:35:03Z" level=info msg="kubectl label ns argocd-e2e--test-cluster-add-kpmwh e2e.argoproj.io=true" dir= execID=ca35e
time="2023-11-03T13:35:04Z" level=debug msg="namespace/argocd-e2e--test-cluster-add-kpmwh labeled\n" duration=304.625555ms execID=ca35e
time="2023-11-03T13:35:04Z" level=info msg="clean state" duration=2.31053347s id=TestClusterAdd-kpmwh name=TestClusterAdd password=password username=admin
time="2023-11-03T13:35:05Z" level=info msg="../../dist/argocd cluster list --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDkwMywibmJmIjoxNjk5MDE4NTAzLCJpYXQiOjE2OTkwMTg1MDMsImp0aSI6IjQwMDQyMmQ3LWZmMzktNGJiYS04ZmM0LTk3OTNmMmFkNDczOSJ9.OLOXO7rmWri1zuribEqvTqIHX4y7trBHUhGRJVhc1Zo --insecure" dir= execID=1607a
time="2023-11-03T13:35:05Z" level=debug msg="SERVER                          NAME              VERSION  STATUS      MESSAGE  PROJECT\nhttps://kubernetes.default.svc  test-cluster-add  1.26     Successful           argo-project\n" duration=65.044784ms execID=1607a
time="2023-11-03T13:35:05Z" level=info msg="kubectl version -o json" dir=. execID=3684f
time="2023-11-03T13:35:05Z" level=debug msg="{\n  \"clientVersion\": {\n    \"major\": \"1\",\n    \"minor\": \"26\",\n    \"gitVersion\": \"v1.26.1\",\n    \"gitCommit\": \"05d83eff7e17160e679898a2a5cd6019ec252c49\",\n    \"gitTreeState\": \"clean\",\n    \"buildDate\": \"2023-06-07T15:39:28Z\",\n    \"goVersion\": \"go1.19.9\",\n    \"compiler\": \"gc\",\n    \"platform\": \"linux/amd64\"\n  },\n  \"kustomizeVersion\": \"v4.5.7\",\n  \"serverVersion\": {\n    \"major\": \"1\",\n    \"minor\": \"26\",\n    \"gitVersion\": \"v1.26.7+c7ee51f\",\n    \"gitCommit\": \"f10a517f7199bdae922a70893d85eb96a76f5c2d\",\n    \"gitTreeState\": \"clean\",\n    \"buildDate\": \"2023-09-11T02:22:18Z\",\n    \"goVersion\": \"go1.19.10 X:strictfipsruntime\",\n    \"compiler\": \"gc\",\n    \"platform\": \"linux/amd64\"\n  }\n}\n" duration=200.28188ms execID=3684f
time="2023-11-03T13:35:05Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestClusterAdd (3.70s)
=== RUN   TestClusterAddPermissionDenied
time="2023-11-03T13:35:05Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=7991a
time="2023-11-03T13:35:05Z" level=debug msg="namespace \"argocd-e2e--test-cluster-add-kpmwh\" deleted\n" duration=234.756561ms execID=7991a
time="2023-11-03T13:35:05Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=3c599
time="2023-11-03T13:35:06Z" level=debug msg="No resources found\n" duration=375.189363ms execID=3c599
time="2023-11-03T13:35:06Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=3e8c9
time="2023-11-03T13:35:06Z" level=debug msg="No resources found\n" duration=246.20348ms execID=3e8c9
time="2023-11-03T13:35:07Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:35:07Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDkwNywibmJmIjoxNjk5MDE4NTA3LCJpYXQiOjE2OTkwMTg1MDcsImp0aSI6ImFhZDEwYjI0LTFmZmUtNDI3Zi1hMWIwLWQ0ZTQ2Mjg0NjJmNSJ9.lW0osJoJWV9DyDKQHEUVeykIz18-ClIu06A5z7MwLr8 --insecure" dir= execID=1ae62
time="2023-11-03T13:35:07Z" level=debug duration=126.173117ms execID=1ae62
time="2023-11-03T13:35:07Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=463b8
time="2023-11-03T13:35:07Z" level=debug duration=2.258164ms execID=463b8
time="2023-11-03T13:35:07Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=8d20c
time="2023-11-03T13:35:07Z" level=debug duration=1.69027ms execID=8d20c
time="2023-11-03T13:35:07Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=1dcfe
time="2023-11-03T13:35:07Z" level=debug duration=1.48427ms execID=1dcfe
time="2023-11-03T13:35:07Z" level=info msg="pkill -9 gpg-agent" dir= execID=bd6de
time="2023-11-03T13:35:07Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=e77fe
time="2023-11-03T13:35:07Z" level=debug duration=9.853831ms execID=e77fe
time="2023-11-03T13:35:07Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=cf524
time="2023-11-03T13:35:07Z" level=debug duration=55.480303ms execID=cf524
time="2023-11-03T13:35:07Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=880e6
time="2023-11-03T13:35:07Z" level=debug duration=1.992215ms execID=880e6
time="2023-11-03T13:35:07Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=69f36
time="2023-11-03T13:35:07Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.075513ms execID=69f36
time="2023-11-03T13:35:07Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=ab42b
time="2023-11-03T13:35:07Z" level=debug duration=27.529168ms execID=ab42b
time="2023-11-03T13:35:07Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=978f5
time="2023-11-03T13:35:07Z" level=debug duration=23.894297ms execID=978f5
time="2023-11-03T13:35:07Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=4b381
time="2023-11-03T13:35:07Z" level=debug duration=2.619652ms execID=4b381
time="2023-11-03T13:35:07Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=08964
Handling connection for 9081
time="2023-11-03T13:35:07Z" level=debug duration=94.180584ms execID=08964
time="2023-11-03T13:35:07Z" level=info msg="kubectl create ns argocd-e2e--test-cluster-add-permission-denied-hdffg" dir= execID=002d5
time="2023-11-03T13:35:07Z" level=debug msg="namespace/argocd-e2e--test-cluster-add-permission-denied-hdffg created\n" duration=152.522339ms execID=002d5
time="2023-11-03T13:35:07Z" level=info msg="kubectl label ns argocd-e2e--test-cluster-add-permission-denied-hdffg e2e.argoproj.io=true" dir= execID=59b94
time="2023-11-03T13:35:08Z" level=debug msg="namespace/argocd-e2e--test-cluster-add-permission-denied-hdffg labeled\n" duration=577.920326ms execID=59b94
time="2023-11-03T13:35:08Z" level=info msg="clean state" duration=2.786222777s id=TestClusterAddPermissionDenied-hdffg name=TestClusterAddPermissionDenied password=password username=admin
time="2023-11-03T13:35:09Z" level=info msg="../../dist/argocd account update-password --account test --current-password J3QcnyLs6kwTxhd50emMGrHPfBOUl2pj --new-password password --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDkwNywibmJmIjoxNjk5MDE4NTA3LCJpYXQiOjE2OTkwMTg1MDcsImp0aSI6ImFhZDEwYjI0LTFmZmUtNDI3Zi1hMWIwLWQ0ZTQ2Mjg0NjJmNSJ9.lW0osJoJWV9DyDKQHEUVeykIz18-ClIu06A5z7MwLr8 --insecure" dir= execID=e2b2d
time="2023-11-03T13:35:10Z" level=debug msg="Password updated\n" duration=755.883268ms execID=e2b2d
time="2023-11-03T13:35:10Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:35:11Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestClusterAddPermissionDenied (6.31s)
=== RUN   TestClusterAddAllowed
time="2023-11-03T13:35:12Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=3fcf3
time="2023-11-03T13:35:12Z" level=debug msg="namespace \"argocd-e2e--test-cluster-add-permission-denied-hdffg\" deleted\n" duration=240.990058ms execID=3fcf3
time="2023-11-03T13:35:12Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=057f1
time="2023-11-03T13:35:12Z" level=debug msg="No resources found\n" duration=453.804044ms execID=057f1
time="2023-11-03T13:35:12Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=a8341
time="2023-11-03T13:35:12Z" level=debug msg="No resources found\n" duration=244.505741ms execID=a8341
time="2023-11-03T13:35:13Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:35:13Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDkxMywibmJmIjoxNjk5MDE4NTEzLCJpYXQiOjE2OTkwMTg1MTMsImp0aSI6ImFiNWUxNjNkLTVlN2YtNDdlMi1iNDk2LTVmNDQ2Y2IyOTAzZCJ9.FA5Igyh7UStQYDBfnFPPUEr4d2t00EvBVYDyiuXiKq8 --insecure" dir= execID=6ecfc
time="2023-11-03T13:35:13Z" level=debug duration=100.911782ms execID=6ecfc
time="2023-11-03T13:35:13Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=c19ba
time="2023-11-03T13:35:13Z" level=debug duration=2.233594ms execID=c19ba
time="2023-11-03T13:35:13Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=25f1b
time="2023-11-03T13:35:13Z" level=debug duration=2.035287ms execID=25f1b
time="2023-11-03T13:35:13Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=575b2
time="2023-11-03T13:35:13Z" level=debug duration=1.571702ms execID=575b2
time="2023-11-03T13:35:13Z" level=info msg="pkill -9 gpg-agent" dir= execID=bcd10
time="2023-11-03T13:35:13Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=b754b
time="2023-11-03T13:35:13Z" level=debug duration=9.575155ms execID=b754b
time="2023-11-03T13:35:13Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=9f0e6
time="2023-11-03T13:35:13Z" level=debug duration=51.774375ms execID=9f0e6
time="2023-11-03T13:35:13Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=c2f74
time="2023-11-03T13:35:13Z" level=debug duration=1.934452ms execID=c2f74
time="2023-11-03T13:35:13Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=84b39
time="2023-11-03T13:35:13Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.100657ms execID=84b39
time="2023-11-03T13:35:13Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=92e3c
time="2023-11-03T13:35:13Z" level=debug duration=32.346704ms execID=92e3c
time="2023-11-03T13:35:13Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=b08a4
time="2023-11-03T13:35:13Z" level=debug duration=20.7086ms execID=b08a4
time="2023-11-03T13:35:13Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=975bd
time="2023-11-03T13:35:13Z" level=debug duration=2.223988ms execID=975bd
time="2023-11-03T13:35:13Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=2e6ed
Handling connection for 9081
time="2023-11-03T13:35:13Z" level=debug duration=81.525468ms execID=2e6ed
time="2023-11-03T13:35:13Z" level=info msg="kubectl create ns argocd-e2e--test-cluster-add-allowed-sepny" dir= execID=f28d9
time="2023-11-03T13:35:14Z" level=debug msg="namespace/argocd-e2e--test-cluster-add-allowed-sepny created\n" duration=177.822818ms execID=f28d9
time="2023-11-03T13:35:14Z" level=info msg="kubectl label ns argocd-e2e--test-cluster-add-allowed-sepny e2e.argoproj.io=true" dir= execID=e2fbb
time="2023-11-03T13:35:14Z" level=debug msg="namespace/argocd-e2e--test-cluster-add-allowed-sepny labeled\n" duration=301.03832ms execID=e2fbb
time="2023-11-03T13:35:14Z" level=info msg="clean state" duration=2.485020454s id=TestClusterAddAllowed-sepny name=TestClusterAddAllowed password=password username=admin
time="2023-11-03T13:35:15Z" level=info msg="../../dist/argocd account update-password --account test --current-password J3QcnyLs6kwTxhd50emMGrHPfBOUl2pj --new-password password --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDkxMywibmJmIjoxNjk5MDE4NTEzLCJpYXQiOjE2OTkwMTg1MTMsImp0aSI6ImFiNWUxNjNkLTVlN2YtNDdlMi1iNDk2LTVmNDQ2Y2IyOTAzZCJ9.FA5Igyh7UStQYDBfnFPPUEr4d2t00EvBVYDyiuXiKq8 --insecure" dir= execID=d2541
time="2023-11-03T13:35:16Z" level=debug msg="Password updated\n" duration=851.989622ms execID=d2541
time="2023-11-03T13:35:16Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:35:18Z" level=info msg="../../dist/argocd cluster list --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJ0ZXN0OmxvZ2luIiwiZXhwIjoxNjk5MTA0OTE2LCJuYmYiOjE2OTkwMTg1MTYsImlhdCI6MTY5OTAxODUxNiwianRpIjoiNzRkMDE0NTktZDQ5Zi00MmFjLWJkZjAtMzA5ZTY5M2Y5MTc1In0.oYX8VwawrYQOxSR5-REIeRg_aYhFF-6Tn7A-1Zi75HM --insecure" dir= execID=68d3d
time="2023-11-03T13:35:18Z" level=debug msg="SERVER                          NAME                      VERSION  STATUS      MESSAGE  PROJECT\nhttps://kubernetes.default.svc  test-cluster-add-allowed  1.26     Successful           argo-project\n" duration=72.205812ms execID=68d3d
time="2023-11-03T13:35:18Z" level=info msg="kubectl version -o json" dir=. execID=67047
time="2023-11-03T13:35:18Z" level=debug msg="{\n  \"clientVersion\": {\n    \"major\": \"1\",\n    \"minor\": \"26\",\n    \"gitVersion\": \"v1.26.1\",\n    \"gitCommit\": \"05d83eff7e17160e679898a2a5cd6019ec252c49\",\n    \"gitTreeState\": \"clean\",\n    \"buildDate\": \"2023-06-07T15:39:28Z\",\n    \"goVersion\": \"go1.19.9\",\n    \"compiler\": \"gc\",\n    \"platform\": \"linux/amd64\"\n  },\n  \"kustomizeVersion\": \"v4.5.7\",\n  \"serverVersion\": {\n    \"major\": \"1\",\n    \"minor\": \"26\",\n    \"gitVersion\": \"v1.26.7+c7ee51f\",\n    \"gitCommit\": \"f10a517f7199bdae922a70893d85eb96a76f5c2d\",\n    \"gitTreeState\": \"clean\",\n    \"buildDate\": \"2023-09-11T02:22:18Z\",\n    \"goVersion\": \"go1.19.10 X:strictfipsruntime\",\n    \"compiler\": \"gc\",\n    \"platform\": \"linux/amd64\"\n  }\n}\n" duration=207.859305ms execID=67047
time="2023-11-03T13:35:18Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestClusterAddAllowed (6.39s)
=== RUN   TestClusterListDenied
time="2023-11-03T13:35:18Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=21001
time="2023-11-03T13:35:18Z" level=debug msg="namespace \"argocd-e2e--test-cluster-add-allowed-sepny\" deleted\n" duration=243.834183ms execID=21001
time="2023-11-03T13:35:18Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=2edf8
time="2023-11-03T13:35:19Z" level=debug msg="No resources found\n" duration=490.171513ms execID=2edf8
time="2023-11-03T13:35:19Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=2073a
time="2023-11-03T13:35:19Z" level=debug msg="No resources found\n" duration=385.492534ms execID=2073a
time="2023-11-03T13:35:20Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:35:20Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDkyMCwibmJmIjoxNjk5MDE4NTIwLCJpYXQiOjE2OTkwMTg1MjAsImp0aSI6ImRlMWMzODVmLTg1YWQtNGViNS1iYzAzLWE4MDlhNTIzOGE0YiJ9.ARxIJluUqcZdhhDCeDLbp5a2rvt1glzmEAcSr_zvlWk --insecure" dir= execID=ef295
time="2023-11-03T13:35:20Z" level=debug duration=77.843966ms execID=ef295
time="2023-11-03T13:35:20Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=5a64e
time="2023-11-03T13:35:20Z" level=debug duration=2.108528ms execID=5a64e
time="2023-11-03T13:35:20Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=4986b
time="2023-11-03T13:35:20Z" level=debug duration=1.734236ms execID=4986b
time="2023-11-03T13:35:20Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=65c62
time="2023-11-03T13:35:20Z" level=debug duration=1.654859ms execID=65c62
time="2023-11-03T13:35:20Z" level=info msg="pkill -9 gpg-agent" dir= execID=3e1ee
time="2023-11-03T13:35:20Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=7682f
time="2023-11-03T13:35:20Z" level=debug duration=11.609424ms execID=7682f
time="2023-11-03T13:35:20Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=a1bc1
time="2023-11-03T13:35:20Z" level=debug duration=34.265792ms execID=a1bc1
time="2023-11-03T13:35:20Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=52c88
time="2023-11-03T13:35:20Z" level=debug duration=1.861006ms execID=52c88
time="2023-11-03T13:35:20Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=44773
time="2023-11-03T13:35:20Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.009158ms execID=44773
time="2023-11-03T13:35:20Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=e2182
time="2023-11-03T13:35:20Z" level=debug duration=27.261446ms execID=e2182
time="2023-11-03T13:35:20Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=376cc
time="2023-11-03T13:35:20Z" level=debug duration=31.85901ms execID=376cc
time="2023-11-03T13:35:20Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=d2099
time="2023-11-03T13:35:20Z" level=debug duration=2.950104ms execID=d2099
time="2023-11-03T13:35:20Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=39b3a
Handling connection for 9081
time="2023-11-03T13:35:20Z" level=debug duration=62.44202ms execID=39b3a
time="2023-11-03T13:35:20Z" level=info msg="kubectl create ns argocd-e2e--test-cluster-list-denied-cxcry" dir= execID=cf479
time="2023-11-03T13:35:20Z" level=debug msg="namespace/argocd-e2e--test-cluster-list-denied-cxcry created\n" duration=171.755639ms execID=cf479
time="2023-11-03T13:35:20Z" level=info msg="kubectl label ns argocd-e2e--test-cluster-list-denied-cxcry e2e.argoproj.io=true" dir= execID=1fcb1
time="2023-11-03T13:35:21Z" level=debug msg="namespace/argocd-e2e--test-cluster-list-denied-cxcry labeled\n" duration=437.052486ms execID=1fcb1
time="2023-11-03T13:35:21Z" level=info msg="clean state" duration=3.065372382s id=TestClusterListDenied-cxcry name=TestClusterListDenied password=password username=admin
time="2023-11-03T13:35:22Z" level=info msg="../../dist/argocd account update-password --account test --current-password J3QcnyLs6kwTxhd50emMGrHPfBOUl2pj --new-password password --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDkyMCwibmJmIjoxNjk5MDE4NTIwLCJpYXQiOjE2OTkwMTg1MjAsImp0aSI6ImRlMWMzODVmLTg1YWQtNGViNS1iYzAzLWE4MDlhNTIzOGE0YiJ9.ARxIJluUqcZdhhDCeDLbp5a2rvt1glzmEAcSr_zvlWk --insecure" dir= execID=ad6ab
time="2023-11-03T13:35:23Z" level=debug msg="Password updated\n" duration=1.168960421s execID=ad6ab
time="2023-11-03T13:35:24Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:35:25Z" level=info msg="../../dist/argocd cluster list --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJ0ZXN0OmxvZ2luIiwiZXhwIjoxNjk5MTA0OTI0LCJuYmYiOjE2OTkwMTg1MjQsImlhdCI6MTY5OTAxODUyNCwianRpIjoiODEwNjU2OTgtNGM5My00ZDE3LWJiZjYtMzVlNzQyZTE5OTVkIn0.jrNW85XPxb_5kfgc0trPSLUM4_JyRcjsM4j5Brr--f0 --insecure" dir= execID=705b3
time="2023-11-03T13:35:25Z" level=debug msg="SERVER  NAME  VERSION  STATUS  MESSAGE  PROJECT\n" duration=118.679518ms execID=705b3
time="2023-11-03T13:35:25Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestClusterListDenied (7.17s)
=== RUN   TestClusterGet
time="2023-11-03T13:35:25Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=7c7a4
time="2023-11-03T13:35:25Z" level=debug msg="namespace \"argocd-e2e--test-cluster-list-denied-cxcry\" deleted\n" duration=274.709634ms execID=7c7a4
time="2023-11-03T13:35:25Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=c585d
time="2023-11-03T13:35:26Z" level=debug msg="No resources found\n" duration=496.064828ms execID=c585d
time="2023-11-03T13:35:26Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=89465
time="2023-11-03T13:35:26Z" level=debug msg="No resources found\n" duration=280.65191ms execID=89465
time="2023-11-03T13:35:27Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:35:27Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDkyNywibmJmIjoxNjk5MDE4NTI3LCJpYXQiOjE2OTkwMTg1MjcsImp0aSI6IjNiZDRiMDgxLWY2NjMtNDNhZi04ZTU4LTJiYTA2ZWEyMGU3NCJ9.v3Xp1QIvUBuKYMQrxpIAOIRE-vOO0pNeu6iOlqQb_LY --insecure" dir= execID=f4365
time="2023-11-03T13:35:27Z" level=debug duration=115.710764ms execID=f4365
time="2023-11-03T13:35:27Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=e8115
time="2023-11-03T13:35:27Z" level=debug duration=2.127444ms execID=e8115
time="2023-11-03T13:35:27Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=0b610
time="2023-11-03T13:35:27Z" level=debug duration=1.690984ms execID=0b610
time="2023-11-03T13:35:27Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=5ea24
time="2023-11-03T13:35:27Z" level=debug duration=1.652698ms execID=5ea24
time="2023-11-03T13:35:27Z" level=info msg="pkill -9 gpg-agent" dir= execID=8fbc2
time="2023-11-03T13:35:27Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=0c04c
time="2023-11-03T13:35:27Z" level=debug duration=9.963334ms execID=0c04c
time="2023-11-03T13:35:27Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=cb07a
time="2023-11-03T13:35:27Z" level=debug duration=33.998815ms execID=cb07a
time="2023-11-03T13:35:27Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=bdb77
time="2023-11-03T13:35:27Z" level=debug duration=2.066474ms execID=bdb77
time="2023-11-03T13:35:27Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=a742e
time="2023-11-03T13:35:27Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.133792ms execID=a742e
time="2023-11-03T13:35:27Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=73cdd
time="2023-11-03T13:35:27Z" level=debug duration=31.185516ms execID=73cdd
time="2023-11-03T13:35:27Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=0ca8e
time="2023-11-03T13:35:27Z" level=debug duration=24.291262ms execID=0ca8e
time="2023-11-03T13:35:27Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=5f781
time="2023-11-03T13:35:27Z" level=debug duration=2.166779ms execID=5f781
time="2023-11-03T13:35:27Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=cc0ac
Handling connection for 9081
time="2023-11-03T13:35:27Z" level=debug duration=81.03585ms execID=cc0ac
time="2023-11-03T13:35:27Z" level=info msg="kubectl create ns argocd-e2e--test-cluster-get-ifwgu" dir= execID=3a121
time="2023-11-03T13:35:27Z" level=debug msg="namespace/argocd-e2e--test-cluster-get-ifwgu created\n" duration=173.329438ms execID=3a121
time="2023-11-03T13:35:27Z" level=info msg="kubectl label ns argocd-e2e--test-cluster-get-ifwgu e2e.argoproj.io=true" dir= execID=a2f35
time="2023-11-03T13:35:28Z" level=debug msg="namespace/argocd-e2e--test-cluster-get-ifwgu labeled\n" duration=318.563772ms execID=a2f35
time="2023-11-03T13:35:28Z" level=info msg="clean state" duration=2.517000097s id=TestClusterGet-ifwgu name=TestClusterGet password=password username=admin
time="2023-11-03T13:35:28Z" level=info msg="../../dist/argocd cluster get https://kubernetes.default.svc --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDkyNywibmJmIjoxNjk5MDE4NTI3LCJpYXQiOjE2OTkwMTg1MjcsImp0aSI6IjNiZDRiMDgxLWY2NjMtNDNhZi04ZTU4LTJiYTA2ZWEyMGU3NCJ9.v3Xp1QIvUBuKYMQrxpIAOIRE-vOO0pNeu6iOlqQb_LY --insecure" dir= execID=5c481
time="2023-11-03T13:35:28Z" level=debug msg="config:\n  tlsClientConfig:\n    insecure: false\nconnectionState:\n  attemptedAt: \"2023-11-03T13:35:26Z\"\n  message: \"\"\n  status: Successful\ninfo:\n  apiVersions:\n  - admissionregistration.k8s.io/v1\n  - admissionregistration.k8s.io/v1/MutatingWebhookConfiguration\n  - admissionregistration.k8s.io/v1/ValidatingWebhookConfiguration\n  - apiextensions.k8s.io/v1\n  - apiextensions.k8s.io/v1/CustomResourceDefinition\n  - apiregistration.k8s.io/v1\n  - apiregistration.k8s.io/v1/APIService\n  - apiserver.openshift.io/v1\n  - apiserver.openshift.io/v1/APIRequestCount\n  - apps.openshift.io/v1\n  - apps.openshift.io/v1/DeploymentConfig\n  - apps/v1\n  - apps/v1/ControllerRevision\n  - apps/v1/DaemonSet\n  - apps/v1/Deployment\n  - apps/v1/ReplicaSet\n  - apps/v1/StatefulSet\n  - argoproj.io/v1alpha1\n  - argoproj.io/v1alpha1/AnalysisRun\n  - argoproj.io/v1alpha1/AnalysisTemplate\n  - argoproj.io/v1alpha1/AppProject\n  - argoproj.io/v1alpha1/Application\n  - argoproj.io/v1alpha1/ApplicationSet\n  - argoproj.io/v1alpha1/ArgoCD\n  - argoproj.io/v1alpha1/ClusterAnalysisTemplate\n  - argoproj.io/v1alpha1/Experiment\n  - argoproj.io/v1alpha1/NonStatusSubResource\n  - argoproj.io/v1alpha1/Rollout\n  - argoproj.io/v1alpha1/RolloutManager\n  - argoproj.io/v1alpha1/StatusSubResource\n  - authorization.openshift.io/v1\n  - authorization.openshift.io/v1/RoleBindingRestriction\n  - autoscaling.openshift.io/v1\n  - autoscaling.openshift.io/v1/ClusterAutoscaler\n  - autoscaling.openshift.io/v1beta1\n  - autoscaling.openshift.io/v1beta1/MachineAutoscaler\n  - autoscaling/v1\n  - autoscaling/v1/HorizontalPodAutoscaler\n  - autoscaling/v2\n  - autoscaling/v2/HorizontalPodAutoscaler\n  - batch/v1\n  - batch/v1/CronJob\n  - batch/v1/Job\n  - build.openshift.io/v1\n  - build.openshift.io/v1/Build\n  - build.openshift.io/v1/BuildConfig\n  - certificates.k8s.io/v1\n  - certificates.k8s.io/v1/CertificateSigningRequest\n  - cloud.network.openshift.io/v1\n  - cloud.network.openshift.io/v1/CloudPrivateIPConfig\n  - cloudcredential.openshift.io/v1\n  - cloudcredential.openshift.io/v1/CredentialsRequest\n  - cluster.open-cluster-management.io/v1alpha1\n  - cluster.open-cluster-management.io/v1alpha1/PlacementDecision\n  - config.openshift.io/v1\n  - config.openshift.io/v1/APIServer\n  - config.openshift.io/v1/Authentication\n  - config.openshift.io/v1/Build\n  - config.openshift.io/v1/ClusterOperator\n  - config.openshift.io/v1/ClusterVersion\n  - config.openshift.io/v1/Console\n  - config.openshift.io/v1/DNS\n  - config.openshift.io/v1/FeatureGate\n  - config.openshift.io/v1/Image\n  - config.openshift.io/v1/ImageContentPolicy\n  - config.openshift.io/v1/ImageDigestMirrorSet\n  - config.openshift.io/v1/ImageTagMirrorSet\n  - config.openshift.io/v1/Infrastructure\n  - config.openshift.io/v1/Ingress\n  - config.openshift.io/v1/Network\n  - config.openshift.io/v1/Node\n  - config.openshift.io/v1/OAuth\n  - config.openshift.io/v1/OperatorHub\n  - config.openshift.io/v1/Project\n  - config.openshift.io/v1/Proxy\n  - config.openshift.io/v1/Scheduler\n  - console.openshift.io/v1\n  - console.openshift.io/v1/ConsoleCLIDownload\n  - console.openshift.io/v1/ConsoleExternalLogLink\n  - console.openshift.io/v1/ConsoleLink\n  - console.openshift.io/v1/ConsoleNotification\n  - console.openshift.io/v1/ConsolePlugin\n  - console.openshift.io/v1/ConsoleQuickStart\n  - console.openshift.io/v1/ConsoleYAMLSample\n  - console.openshift.io/v1alpha1\n  - console.openshift.io/v1alpha1/ConsolePlugin\n  - controlplane.operator.openshift.io/v1alpha1\n  - controlplane.operator.openshift.io/v1alpha1/PodNetworkConnectivityCheck\n  - coordination.k8s.io/v1\n  - coordination.k8s.io/v1/Lease\n  - discovery.k8s.io/v1\n  - discovery.k8s.io/v1/EndpointSlice\n  - events.k8s.io/v1\n  - events.k8s.io/v1/Event\n  - flowcontrol.apiserver.k8s.io/v1beta2\n  - flowcontrol.apiserver.k8s.io/v1beta2/FlowSchema\n  - flowcontrol.apiserver.k8s.io/v1beta2/PriorityLevelConfiguration\n  - flowcontrol.apiserver.k8s.io/v1beta3\n  - flowcontrol.apiserver.k8s.io/v1beta3/FlowSchema\n  - flowcontrol.apiserver.k8s.io/v1beta3/PriorityLevelConfiguration\n  - helm.openshift.io/v1beta1\n  - helm.openshift.io/v1beta1/HelmChartRepository\n  - helm.openshift.io/v1beta1/ProjectHelmChartRepository\n  - image.openshift.io/v1\n  - image.openshift.io/v1/Image\n  - image.openshift.io/v1/ImageStream\n  - imageregistry.operator.openshift.io/v1\n  - imageregistry.operator.openshift.io/v1/Config\n  - imageregistry.operator.openshift.io/v1/ImagePruner\n  - infrastructure.cluster.x-k8s.io/v1alpha5\n  - infrastructure.cluster.x-k8s.io/v1alpha5/Metal3Remediation\n  - infrastructure.cluster.x-k8s.io/v1alpha5/Metal3RemediationTemplate\n  - infrastructure.cluster.x-k8s.io/v1beta1\n  - infrastructure.cluster.x-k8s.io/v1beta1/Metal3Remediation\n  - infrastructure.cluster.x-k8s.io/v1beta1/Metal3RemediationTemplate\n  - ingress.operator.openshift.io/v1\n  - ingress.operator.openshift.io/v1/DNSRecord\n  - k8s.cni.cncf.io/v1\n  - k8s.cni.cncf.io/v1/NetworkAttachmentDefinition\n  - machine.openshift.io/v1\n  - machine.openshift.io/v1/ControlPlaneMachineSet\n  - machine.openshift.io/v1beta1\n  - machine.openshift.io/v1beta1/Machine\n  - machine.openshift.io/v1beta1/MachineHealthCheck\n  - machine.openshift.io/v1beta1/MachineSet\n  - machineconfiguration.openshift.io/v1\n  - machineconfiguration.openshift.io/v1/ContainerRuntimeConfig\n  - machineconfiguration.openshift.io/v1/ControllerConfig\n  - machineconfiguration.openshift.io/v1/KubeletConfig\n  - machineconfiguration.openshift.io/v1/MachineConfig\n  - machineconfiguration.openshift.io/v1/MachineConfigPool\n  - metal3.io/v1alpha1\n  - metal3.io/v1alpha1/BMCEventSubscription\n  - metal3.io/v1alpha1/BareMetalHost\n  - metal3.io/v1alpha1/FirmwareSchema\n  - metal3.io/v1alpha1/HardwareData\n  - metal3.io/v1alpha1/HostFirmwareSettings\n  - metal3.io/v1alpha1/PreprovisioningImage\n  - metal3.io/v1alpha1/Provisioning\n  - migration.k8s.io/v1alpha1\n  - migration.k8s.io/v1alpha1/StorageState\n  - migration.k8s.io/v1alpha1/StorageVersionMigration\n  - monitoring.coreos.com/v1\n  - monitoring.coreos.com/v1/Alertmanager\n  - monitoring.coreos.com/v1/PodMonitor\n  - monitoring.coreos.com/v1/Probe\n  - monitoring.coreos.com/v1/Prometheus\n  - monitoring.coreos.com/v1/PrometheusRule\n  - monitoring.coreos.com/v1/ServiceMonitor\n  - monitoring.coreos.com/v1/ThanosRuler\n  - monitoring.coreos.com/v1alpha1\n  - monitoring.coreos.com/v1alpha1/AlertmanagerConfig\n  - monitoring.coreos.com/v1beta1\n  - monitoring.coreos.com/v1beta1/AlertmanagerConfig\n  - network.openshift.io/v1\n  - network.openshift.io/v1/ClusterNetwork\n  - network.openshift.io/v1/EgressNetworkPolicy\n  - network.openshift.io/v1/HostSubnet\n  - network.openshift.io/v1/NetNamespace\n  - network.operator.openshift.io/v1\n  - network.operator.openshift.io/v1/EgressRouter\n  - network.operator.openshift.io/v1/OperatorPKI\n  - networking.k8s.io/v1\n  - networking.k8s.io/v1/Ingress\n  - networking.k8s.io/v1/IngressClass\n  - networking.k8s.io/v1/NetworkPolicy\n  - node.k8s.io/v1\n  - node.k8s.io/v1/RuntimeClass\n  - oauth.openshift.io/v1\n  - oauth.openshift.io/v1/OAuthAccessToken\n  - oauth.openshift.io/v1/OAuthAuthorizeToken\n  - oauth.openshift.io/v1/OAuthClient\n  - oauth.openshift.io/v1/OAuthClientAuthorization\n  - oauth.openshift.io/v1/UserOAuthAccessToken\n  - operator.openshift.io/v1\n  - operator.openshift.io/v1/Authentication\n  - operator.openshift.io/v1/CSISnapshotController\n  - operator.openshift.io/v1/CloudCredential\n  - operator.openshift.io/v1/ClusterCSIDriver\n  - operator.openshift.io/v1/Config\n  - operator.openshift.io/v1/Console\n  - operator.openshift.io/v1/DNS\n  - operator.openshift.io/v1/Etcd\n  - operator.openshift.io/v1/IngressController\n  - operator.openshift.io/v1/InsightsOperator\n  - operator.openshift.io/v1/KubeAPIServer\n  - operator.openshift.io/v1/KubeControllerManager\n  - operator.openshift.io/v1/KubeScheduler\n  - operator.openshift.io/v1/KubeStorageVersionMigrator\n  - operator.openshift.io/v1/Network\n  - operator.openshift.io/v1/OpenShiftAPIServer\n  - operator.openshift.io/v1/OpenShiftControllerManager\n  - operator.openshift.io/v1/ServiceCA\n  - operator.openshift.io/v1/Storage\n  - operator.openshift.io/v1alpha1\n  - operator.openshift.io/v1alpha1/ImageContentSourcePolicy\n  - operator.tekton.dev/v1alpha1\n  - operator.tekton.dev/v1alpha1/OpenShiftPipelinesAsCode\n  - operator.tekton.dev/v1alpha1/TektonAddon\n  - operator.tekton.dev/v1alpha1/TektonChain\n  - operator.tekton.dev/v1alpha1/TektonConfig\n  - operator.tekton.dev/v1alpha1/TektonHub\n  - operator.tekton.dev/v1alpha1/TektonInstallerSet\n  - operator.tekton.dev/v1alpha1/TektonPipeline\n  - operator.tekton.dev/v1alpha1/TektonResult\n  - operator.tekton.dev/v1alpha1/TektonTrigger\n  - operators.coreos.com/v1\n  - operators.coreos.com/v1/OLMConfig\n  - operators.coreos.com/v1/Operator\n  - operators.coreos.com/v1/OperatorCondition\n  - operators.coreos.com/v1/OperatorGroup\n  - operators.coreos.com/v1alpha1\n  - operators.coreos.com/v1alpha1/CatalogSource\n  - operators.coreos.com/v1alpha1/ClusterServiceVersion\n  - operators.coreos.com/v1alpha1/InstallPlan\n  - operators.coreos.com/v1alpha1/Subscription\n  - operators.coreos.com/v1alpha2\n  - operators.coreos.com/v1alpha2/OperatorGroup\n  - operators.coreos.com/v2\n  - operators.coreos.com/v2/OperatorCondition\n  - performance.openshift.io/v1\n  - performance.openshift.io/v1/PerformanceProfile\n  - performance.openshift.io/v1alpha1\n  - performance.openshift.io/v1alpha1/PerformanceProfile\n  - performance.openshift.io/v2\n  - performance.openshift.io/v2/PerformanceProfile\n  - pipelines.openshift.io/v1alpha1\n  - pipelines.openshift.io/v1alpha1/GitopsService\n  - pipelinesascode.tekton.dev/v1alpha1\n  - pipelinesascode.tekton.dev/v1alpha1/Repository\n  - policy/v1\n  - policy/v1/PodDisruptionBudget\n  - project.openshift.io/v1\n  - project.openshift.io/v1/Project\n  - quota.openshift.io/v1\n  - quota.openshift.io/v1/ClusterResourceQuota\n  - rbac.authorization.k8s.io/v1\n  - rbac.authorization.k8s.io/v1/ClusterRole\n  - rbac.authorization.k8s.io/v1/ClusterRoleBinding\n  - rbac.authorization.k8s.io/v1/Role\n  - rbac.authorization.k8s.io/v1/RoleBinding\n  - resolution.tekton.dev/v1alpha1\n  - resolution.tekton.dev/v1alpha1/ResolutionRequest\n  - resolution.tekton.dev/v1beta1\n  - resolution.tekton.dev/v1beta1/ResolutionRequest\n  - route.openshift.io/v1\n  - route.openshift.io/v1/Route\n  - samples.operator.openshift.io/v1\n  - samples.operator.openshift.io/v1/Config\n  - scheduling.k8s.io/v1\n  - scheduling.k8s.io/v1/PriorityClass\n  - security.internal.openshift.io/v1\n  - security.internal.openshift.io/v1/RangeAllocation\n  - security.openshift.io/v1\n  - security.openshift.io/v1/RangeAllocation\n  - security.openshift.io/v1/SecurityContextConstraints\n  - snapshot.storage.k8s.io/v1\n  - snapshot.storage.k8s.io/v1/VolumeSnapshot\n  - snapshot.storage.k8s.io/v1/VolumeSnapshotClass\n  - snapshot.storage.k8s.io/v1/VolumeSnapshotContent\n  - storage.k8s.io/v1\n  - storage.k8s.io/v1/CSIDriver\n  - storage.k8s.io/v1/CSINode\n  - storage.k8s.io/v1/CSIStorageCapacity\n  - storage.k8s.io/v1/StorageClass\n  - storage.k8s.io/v1/VolumeAttachment\n  - storage.k8s.io/v1beta1\n  - storage.k8s.io/v1beta1/CSIStorageCapacity\n  - tekton.dev/v1\n  - tekton.dev/v1/Pipeline\n  - tekton.dev/v1/PipelineRun\n  - tekton.dev/v1/Task\n  - tekton.dev/v1/TaskRun\n  - tekton.dev/v1alpha1\n  - tekton.dev/v1alpha1/VerificationPolicy\n  - tekton.dev/v1beta1\n  - tekton.dev/v1beta1/ClusterTask\n  - tekton.dev/v1beta1/CustomRun\n  - tekton.dev/v1beta1/Pipeline\n  - tekton.dev/v1beta1/PipelineRun\n  - tekton.dev/v1beta1/Task\n  - tekton.dev/v1beta1/TaskRun\n  - template.openshift.io/v1\n  - template.openshift.io/v1/BrokerTemplateInstance\n  - template.openshift.io/v1/Template\n  - template.openshift.io/v1/TemplateInstance\n  - triggers.tekton.dev/v1alpha1\n  - triggers.tekton.dev/v1alpha1/ClusterInterceptor\n  - triggers.tekton.dev/v1alpha1/ClusterTriggerBinding\n  - triggers.tekton.dev/v1alpha1/EventListener\n  - triggers.tekton.dev/v1alpha1/Interceptor\n  - triggers.tekton.dev/v1alpha1/Trigger\n  - triggers.tekton.dev/v1alpha1/TriggerBinding\n  - triggers.tekton.dev/v1alpha1/TriggerTemplate\n  - triggers.tekton.dev/v1beta1\n  - triggers.tekton.dev/v1beta1/ClusterTriggerBinding\n  - triggers.tekton.dev/v1beta1/EventListener\n  - triggers.tekton.dev/v1beta1/Trigger\n  - triggers.tekton.dev/v1beta1/TriggerBinding\n  - triggers.tekton.dev/v1beta1/TriggerTemplate\n  - tuned.openshift.io/v1\n  - tuned.openshift.io/v1/Profile\n  - tuned.openshift.io/v1/Tuned\n  - user.openshift.io/v1\n  - user.openshift.io/v1/Group\n  - user.openshift.io/v1/Identity\n  - user.openshift.io/v1/User\n  - v1\n  - v1/ConfigMap\n  - v1/Endpoints\n  - v1/Event\n  - v1/LimitRange\n  - v1/Namespace\n  - v1/Node\n  - v1/PersistentVolume\n  - v1/PersistentVolumeClaim\n  - v1/Pod\n  - v1/PodTemplate\n  - v1/ReplicationController\n  - v1/ResourceQuota\n  - v1/Secret\n  - v1/Service\n  - v1/ServiceAccount\n  - whereabouts.cni.cncf.io/v1alpha1\n  - whereabouts.cni.cncf.io/v1alpha1/IPPool\n  - whereabouts.cni.cncf.io/v1alpha1/OverlappingRangeIPReservation\n  applicationsCount: 0\n  cacheInfo:\n    apisCount: 218\n    lastCacheSyncTime: \"2023-11-03T13:34:47Z\"\n    resourcesCount: 5933\n  connectionState:\n    attemptedAt: \"2023-11-03T13:35:26Z\"\n    message: \"\"\n    status: Successful\n  serverVersion: \"1.26\"\nname: in-cluster\nserver: https://kubernetes.default.svc\nserverVersion: \"1.26\"\n" duration=121.820982ms execID=5c481
time="2023-11-03T13:35:28Z" level=info msg="kubectl version -o json" dir=. execID=77215
time="2023-11-03T13:35:28Z" level=debug msg="{\n  \"clientVersion\": {\n    \"major\": \"1\",\n    \"minor\": \"26\",\n    \"gitVersion\": \"v1.26.1\",\n    \"gitCommit\": \"05d83eff7e17160e679898a2a5cd6019ec252c49\",\n    \"gitTreeState\": \"clean\",\n    \"buildDate\": \"2023-06-07T15:39:28Z\",\n    \"goVersion\": \"go1.19.9\",\n    \"compiler\": \"gc\",\n    \"platform\": \"linux/amd64\"\n  },\n  \"kustomizeVersion\": \"v4.5.7\",\n  \"serverVersion\": {\n    \"major\": \"1\",\n    \"minor\": \"26\",\n    \"gitVersion\": \"v1.26.7+c7ee51f\",\n    \"gitCommit\": \"f10a517f7199bdae922a70893d85eb96a76f5c2d\",\n    \"gitTreeState\": \"clean\",\n    \"buildDate\": \"2023-09-11T02:22:18Z\",\n    \"goVersion\": \"go1.19.10 X:strictfipsruntime\",\n    \"compiler\": \"gc\",\n    \"platform\": \"linux/amd64\"\n  }\n}\n" duration=191.042305ms execID=77215
time="2023-11-03T13:35:28Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
time="2023-11-03T13:35:28Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestClusterGet (2.83s)
=== RUN   TestClusterNameInRestAPI
time="2023-11-03T13:35:28Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=08c80
time="2023-11-03T13:35:28Z" level=debug msg="namespace \"argocd-e2e--test-cluster-get-ifwgu\" deleted\n" duration=250.008068ms execID=08c80
time="2023-11-03T13:35:28Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=caeb3
time="2023-11-03T13:35:29Z" level=debug msg="No resources found\n" duration=450.504799ms execID=caeb3
time="2023-11-03T13:35:29Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=6cec8
time="2023-11-03T13:35:29Z" level=debug msg="No resources found\n" duration=244.97918ms execID=6cec8
time="2023-11-03T13:35:29Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:35:30Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDkyOSwibmJmIjoxNjk5MDE4NTI5LCJpYXQiOjE2OTkwMTg1MjksImp0aSI6ImNhNjM0OGY3LTY2YzktNGE5ZS1hNWYwLTQ0OTFmZTAxNzFmNSJ9.RbKOB8oIdN01k5Qh3AuznW6SIDxn_JypbOsgDy8qpk4 --insecure" dir= execID=13c42
time="2023-11-03T13:35:30Z" level=debug duration=121.942213ms execID=13c42
time="2023-11-03T13:35:30Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=b492f
time="2023-11-03T13:35:30Z" level=debug duration=2.278815ms execID=b492f
time="2023-11-03T13:35:30Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=3278f
time="2023-11-03T13:35:30Z" level=debug duration=1.521955ms execID=3278f
time="2023-11-03T13:35:30Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=d6f92
time="2023-11-03T13:35:30Z" level=debug duration=1.479219ms execID=d6f92
time="2023-11-03T13:35:30Z" level=info msg="pkill -9 gpg-agent" dir= execID=741b8
time="2023-11-03T13:35:30Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=2db48
time="2023-11-03T13:35:30Z" level=debug duration=10.362578ms execID=2db48
time="2023-11-03T13:35:30Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=c3bb5
time="2023-11-03T13:35:30Z" level=debug duration=33.416932ms execID=c3bb5
time="2023-11-03T13:35:30Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=301c9
time="2023-11-03T13:35:30Z" level=debug duration=1.790077ms execID=301c9
time="2023-11-03T13:35:30Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=011f4
time="2023-11-03T13:35:30Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.823508ms execID=011f4
time="2023-11-03T13:35:30Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=22050
time="2023-11-03T13:35:30Z" level=debug duration=29.339434ms execID=22050
time="2023-11-03T13:35:30Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=372d5
time="2023-11-03T13:35:30Z" level=debug duration=22.368911ms execID=372d5
time="2023-11-03T13:35:30Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=46290
time="2023-11-03T13:35:30Z" level=debug duration=2.375805ms execID=46290
time="2023-11-03T13:35:30Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=b6294
Handling connection for 9081
time="2023-11-03T13:35:30Z" level=debug duration=91.115397ms execID=b6294
time="2023-11-03T13:35:30Z" level=info msg="kubectl create ns argocd-e2e--test-cluster-name-in-rest-api-dtnke" dir= execID=291fd
time="2023-11-03T13:35:30Z" level=debug msg="namespace/argocd-e2e--test-cluster-name-in-rest-api-dtnke created\n" duration=116.378102ms execID=291fd
time="2023-11-03T13:35:30Z" level=info msg="kubectl label ns argocd-e2e--test-cluster-name-in-rest-api-dtnke e2e.argoproj.io=true" dir= execID=cdabd
time="2023-11-03T13:35:30Z" level=debug msg="namespace/argocd-e2e--test-cluster-name-in-rest-api-dtnke labeled\n" duration=353.168926ms execID=cdabd
time="2023-11-03T13:35:30Z" level=info msg="clean state" duration=2.462674307s id=TestClusterNameInRestAPI-dtnke name=TestClusterNameInRestAPI password=password username=admin
time="2023-11-03T13:35:30Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestClusterNameInRestAPI (2.58s)
=== RUN   TestClusterURLInRestAPI
time="2023-11-03T13:35:30Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=b698e
time="2023-11-03T13:35:31Z" level=debug msg="namespace \"argocd-e2e--test-cluster-name-in-rest-api-dtnke\" deleted\n" duration=241.63216ms execID=b698e
time="2023-11-03T13:35:31Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=7fb07
time="2023-11-03T13:35:31Z" level=debug msg="No resources found\n" duration=524.653431ms execID=7fb07
time="2023-11-03T13:35:31Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=21d6b
time="2023-11-03T13:35:32Z" level=debug msg="No resources found\n" duration=272.459179ms execID=21d6b
time="2023-11-03T13:35:32Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:35:32Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDkzMiwibmJmIjoxNjk5MDE4NTMyLCJpYXQiOjE2OTkwMTg1MzIsImp0aSI6ImZmMjExNGEwLTdlNTUtNDU4Zi04YWU4LTQzYjE4MzlhNTBmMCJ9.0pkHu-ZYDuGZlUagt3Wi8Emfe55hj88W1wGt2ymEQ1Q --insecure" dir= execID=e126a
time="2023-11-03T13:35:33Z" level=debug duration=70.800891ms execID=e126a
time="2023-11-03T13:35:33Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=3b599
time="2023-11-03T13:35:33Z" level=debug duration=2.22969ms execID=3b599
time="2023-11-03T13:35:33Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=85303
time="2023-11-03T13:35:33Z" level=debug duration=1.79285ms execID=85303
time="2023-11-03T13:35:33Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=67e5d
time="2023-11-03T13:35:33Z" level=debug duration=1.651678ms execID=67e5d
time="2023-11-03T13:35:33Z" level=info msg="pkill -9 gpg-agent" dir= execID=3a41b
time="2023-11-03T13:35:33Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=6f096
time="2023-11-03T13:35:33Z" level=debug duration=9.891715ms execID=6f096
time="2023-11-03T13:35:33Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=614e8
time="2023-11-03T13:35:33Z" level=debug duration=37.365981ms execID=614e8
time="2023-11-03T13:35:33Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=c2e3a
time="2023-11-03T13:35:33Z" level=debug duration=1.876151ms execID=c2e3a
time="2023-11-03T13:35:33Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=76676
time="2023-11-03T13:35:33Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.982215ms execID=76676
time="2023-11-03T13:35:33Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=cb69f
time="2023-11-03T13:35:33Z" level=debug duration=39.570634ms execID=cb69f
time="2023-11-03T13:35:33Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=cacc0
time="2023-11-03T13:35:33Z" level=debug duration=22.045153ms execID=cacc0
time="2023-11-03T13:35:33Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=0a72e
time="2023-11-03T13:35:33Z" level=debug duration=2.886781ms execID=0a72e
time="2023-11-03T13:35:33Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=1383d
Handling connection for 9081
time="2023-11-03T13:35:33Z" level=debug duration=61.054158ms execID=1383d
time="2023-11-03T13:35:33Z" level=info msg="kubectl create ns argocd-e2e--test-cluster-url-in-rest-api-bshzj" dir= execID=c1d97
time="2023-11-03T13:35:33Z" level=debug msg="namespace/argocd-e2e--test-cluster-url-in-rest-api-bshzj created\n" duration=140.84758ms execID=c1d97
time="2023-11-03T13:35:33Z" level=info msg="kubectl label ns argocd-e2e--test-cluster-url-in-rest-api-bshzj e2e.argoproj.io=true" dir= execID=95400
time="2023-11-03T13:35:33Z" level=debug msg="namespace/argocd-e2e--test-cluster-url-in-rest-api-bshzj labeled\n" duration=286.709888ms execID=95400
time="2023-11-03T13:35:33Z" level=info msg="clean state" duration=2.793353039s id=TestClusterURLInRestAPI-bshzj name=TestClusterURLInRestAPI password=password username=admin
time="2023-11-03T13:35:33Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestClusterURLInRestAPI (2.91s)
=== RUN   TestClusterDeleteDenied
time="2023-11-03T13:35:33Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=355af
time="2023-11-03T13:35:34Z" level=debug msg="namespace \"argocd-e2e--test-cluster-url-in-rest-api-bshzj\" deleted\n" duration=234.068971ms execID=355af
time="2023-11-03T13:35:34Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=06808
time="2023-11-03T13:35:34Z" level=debug msg="No resources found\n" duration=526.895616ms execID=06808
time="2023-11-03T13:35:34Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=5db4b
time="2023-11-03T13:35:34Z" level=debug msg="No resources found\n" duration=283.912592ms execID=5db4b
time="2023-11-03T13:35:35Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:35:35Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDkzNSwibmJmIjoxNjk5MDE4NTM1LCJpYXQiOjE2OTkwMTg1MzUsImp0aSI6ImEyZDVlNjcxLTU0YTktNDZmNi1hYmM2LWE1MWEwYTY2YTEwMyJ9.ZWuC-ae_da9OaKDbUWS-S5F5t9drWK4cRyIeWP65NvM --insecure" dir= execID=cbac7
time="2023-11-03T13:35:35Z" level=debug duration=76.911578ms execID=cbac7
time="2023-11-03T13:35:35Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=0a498
time="2023-11-03T13:35:35Z" level=debug duration=2.138193ms execID=0a498
time="2023-11-03T13:35:35Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=70b3a
time="2023-11-03T13:35:35Z" level=debug duration=1.679795ms execID=70b3a
time="2023-11-03T13:35:35Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=5046a
time="2023-11-03T13:35:35Z" level=debug duration=19.628443ms execID=5046a
time="2023-11-03T13:35:35Z" level=info msg="pkill -9 gpg-agent" dir= execID=dc192
time="2023-11-03T13:35:35Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=244b0
time="2023-11-03T13:35:35Z" level=debug duration=9.935853ms execID=244b0
time="2023-11-03T13:35:35Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=e0c44
time="2023-11-03T13:35:35Z" level=debug duration=33.248504ms execID=e0c44
time="2023-11-03T13:35:35Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=159ed
time="2023-11-03T13:35:35Z" level=debug duration=1.816218ms execID=159ed
time="2023-11-03T13:35:35Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=8bf2d
time="2023-11-03T13:35:35Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.093147ms execID=8bf2d
time="2023-11-03T13:35:35Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=c2d5b
time="2023-11-03T13:35:36Z" level=debug duration=26.696181ms execID=c2d5b
time="2023-11-03T13:35:36Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=d33a8
time="2023-11-03T13:35:36Z" level=debug duration=25.116182ms execID=d33a8
time="2023-11-03T13:35:36Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=ff61b
time="2023-11-03T13:35:36Z" level=debug duration=2.874131ms execID=ff61b
time="2023-11-03T13:35:36Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=38ba4
Handling connection for 9081
time="2023-11-03T13:35:36Z" level=debug duration=61.698548ms execID=38ba4
time="2023-11-03T13:35:36Z" level=info msg="kubectl create ns argocd-e2e--test-cluster-delete-denied-wjiex" dir= execID=10190
time="2023-11-03T13:35:36Z" level=debug msg="namespace/argocd-e2e--test-cluster-delete-denied-wjiex created\n" duration=186.430171ms execID=10190
time="2023-11-03T13:35:36Z" level=info msg="kubectl label ns argocd-e2e--test-cluster-delete-denied-wjiex e2e.argoproj.io=true" dir= execID=ac0da
time="2023-11-03T13:35:36Z" level=debug msg="namespace/argocd-e2e--test-cluster-delete-denied-wjiex labeled\n" duration=261.338006ms execID=ac0da
time="2023-11-03T13:35:36Z" level=info msg="clean state" duration=2.68503488s id=TestClusterDeleteDenied-wjiex name=TestClusterDeleteDenied password=password username=admin
time="2023-11-03T13:35:37Z" level=info msg="../../dist/argocd account update-password --account test --current-password J3QcnyLs6kwTxhd50emMGrHPfBOUl2pj --new-password password --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDkzNSwibmJmIjoxNjk5MDE4NTM1LCJpYXQiOjE2OTkwMTg1MzUsImp0aSI6ImEyZDVlNjcxLTU0YTktNDZmNi1hYmM2LWE1MWEwYTY2YTEwMyJ9.ZWuC-ae_da9OaKDbUWS-S5F5t9drWK4cRyIeWP65NvM --insecure" dir= execID=bc2b1
time="2023-11-03T13:35:38Z" level=debug msg="Password updated\n" duration=1.06316838s execID=bc2b1
time="2023-11-03T13:35:39Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:35:40Z" level=info msg="../../dist/argocd cluster rm test-cluster-delete-denied --yes --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJ0ZXN0OmxvZ2luIiwiZXhwIjoxNjk5MTA0OTM5LCJuYmYiOjE2OTkwMTg1MzksImlhdCI6MTY5OTAxODUzOSwianRpIjoiZDNiZDY3YmUtNWY0ZS00NTczLWEwZTUtZTg4MjNiZGY4NjE1In0.vrJBOduAvE5rG32BxVtOW4B71k5jv_oCh-MXVtQnJ1E --insecure" dir= execID=eb8ab
time="2023-11-03T13:35:40Z" level=debug duration=114.818488ms execID=eb8ab
time="2023-11-03T13:35:40Z" level=error msg="`../../dist/argocd cluster rm test-cluster-delete-denied --yes --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJ0ZXN0OmxvZ2luIiwiZXhwIjoxNjk5MTA0OTM5LCJuYmYiOjE2OTkwMTg1MzksImlhdCI6MTY5OTAxODUzOSwianRpIjoiZDNiZDY3YmUtNWY0ZS00NTczLWEwZTUtZTg4MjNiZGY4NjE1In0.vrJBOduAvE5rG32BxVtOW4B71k5jv_oCh-MXVtQnJ1E --insecure` failed exit status 20: time=\"2023-11-03T13:35:40Z\" level=fatal msg=\"rpc error: code = PermissionDenied desc = permission denied: clusters, delete, argo-project/https://kubernetes.default.svc, sub: test, iat: 2023-11-03T13:35:39Z\"" execID=eb8ab
time="2023-11-03T13:35:41Z" level=info msg="../../dist/argocd cluster rm https://kubernetes.default.svc --yes --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJ0ZXN0OmxvZ2luIiwiZXhwIjoxNjk5MTA0OTM5LCJuYmYiOjE2OTkwMTg1MzksImlhdCI6MTY5OTAxODUzOSwianRpIjoiZDNiZDY3YmUtNWY0ZS00NTczLWEwZTUtZTg4MjNiZGY4NjE1In0.vrJBOduAvE5rG32BxVtOW4B71k5jv_oCh-MXVtQnJ1E --insecure" dir= execID=82dec
time="2023-11-03T13:35:41Z" level=debug duration=65.067922ms execID=82dec
time="2023-11-03T13:35:41Z" level=error msg="`../../dist/argocd cluster rm https://kubernetes.default.svc --yes --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJ0ZXN0OmxvZ2luIiwiZXhwIjoxNjk5MTA0OTM5LCJuYmYiOjE2OTkwMTg1MzksImlhdCI6MTY5OTAxODUzOSwianRpIjoiZDNiZDY3YmUtNWY0ZS00NTczLWEwZTUtZTg4MjNiZGY4NjE1In0.vrJBOduAvE5rG32BxVtOW4B71k5jv_oCh-MXVtQnJ1E --insecure` failed exit status 20: time=\"2023-11-03T13:35:41Z\" level=fatal msg=\"rpc error: code = PermissionDenied desc = permission denied: clusters, delete, argo-project/https://kubernetes.default.svc, sub: test, iat: 2023-11-03T13:35:39Z\"" execID=82dec
time="2023-11-03T13:35:41Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestClusterDeleteDenied (7.97s)
=== RUN   TestClusterDelete
time="2023-11-03T13:35:41Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=3802d
time="2023-11-03T13:35:42Z" level=debug msg="namespace \"argocd-e2e--test-cluster-delete-denied-wjiex\" deleted\n" duration=168.571377ms execID=3802d
time="2023-11-03T13:35:42Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=33f82
time="2023-11-03T13:35:42Z" level=debug msg="No resources found\n" duration=433.228065ms execID=33f82
time="2023-11-03T13:35:42Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=82890
time="2023-11-03T13:35:42Z" level=debug msg="No resources found\n" duration=238.430487ms execID=82890
time="2023-11-03T13:35:43Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:35:43Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDk0MywibmJmIjoxNjk5MDE4NTQzLCJpYXQiOjE2OTkwMTg1NDMsImp0aSI6IjRkMDExZjlhLTc3YjMtNDZhNC05ZGJhLWE0ZDczN2MyZjk5MSJ9.AX8fwg3bbtOhYPSajs01R0iNJqjPfCsTfvSX7kLUd3E --insecure" dir= execID=01c65
time="2023-11-03T13:35:43Z" level=debug duration=77.794204ms execID=01c65
time="2023-11-03T13:35:43Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=48268
time="2023-11-03T13:35:43Z" level=debug duration=2.187487ms execID=48268
time="2023-11-03T13:35:43Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=d8f5b
time="2023-11-03T13:35:43Z" level=debug duration=1.797548ms execID=d8f5b
time="2023-11-03T13:35:43Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=91dbe
time="2023-11-03T13:35:43Z" level=debug duration=1.499725ms execID=91dbe
time="2023-11-03T13:35:43Z" level=info msg="pkill -9 gpg-agent" dir= execID=81624
time="2023-11-03T13:35:43Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=b773b
time="2023-11-03T13:35:43Z" level=debug duration=10.17976ms execID=b773b
time="2023-11-03T13:35:43Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=d2342
time="2023-11-03T13:35:43Z" level=debug duration=34.364639ms execID=d2342
time="2023-11-03T13:35:43Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=0857d
time="2023-11-03T13:35:43Z" level=debug duration=2.167335ms execID=0857d
time="2023-11-03T13:35:43Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=95f46
time="2023-11-03T13:35:43Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=16.026984ms execID=95f46
time="2023-11-03T13:35:43Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=9f74b
time="2023-11-03T13:35:43Z" level=debug duration=28.508333ms execID=9f74b
time="2023-11-03T13:35:43Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=8d9f1
time="2023-11-03T13:35:43Z" level=debug duration=23.059858ms execID=8d9f1
time="2023-11-03T13:35:43Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=47fc3
time="2023-11-03T13:35:43Z" level=debug duration=2.194017ms execID=47fc3
time="2023-11-03T13:35:43Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=8ade3
Handling connection for 9081
time="2023-11-03T13:35:43Z" level=debug duration=84.067225ms execID=8ade3
time="2023-11-03T13:35:43Z" level=info msg="kubectl create ns argocd-e2e--test-cluster-delete-hdloj" dir= execID=6512d
time="2023-11-03T13:35:43Z" level=debug msg="namespace/argocd-e2e--test-cluster-delete-hdloj created\n" duration=115.298629ms execID=6512d
time="2023-11-03T13:35:43Z" level=info msg="kubectl label ns argocd-e2e--test-cluster-delete-hdloj e2e.argoproj.io=true" dir= execID=bba14
time="2023-11-03T13:35:44Z" level=debug msg="namespace/argocd-e2e--test-cluster-delete-hdloj labeled\n" duration=306.25125ms execID=bba14
time="2023-11-03T13:35:44Z" level=info msg="clean state" duration=2.256338319s id=TestClusterDelete-hdloj name=TestClusterDelete password=password username=admin
time="2023-11-03T13:35:45Z" level=info msg="../../dist/argocd account update-password --account default --current-password J3QcnyLs6kwTxhd50emMGrHPfBOUl2pj --new-password password --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNDk0MywibmJmIjoxNjk5MDE4NTQzLCJpYXQiOjE2OTkwMTg1NDMsImp0aSI6IjRkMDExZjlhLTc3YjMtNDZhNC05ZGJhLWE0ZDczN2MyZjk5MSJ9.AX8fwg3bbtOhYPSajs01R0iNJqjPfCsTfvSX7kLUd3E --insecure" dir= execID=2f05e
time="2023-11-03T13:35:46Z" level=debug msg="Password updated\n" duration=1.11893241s execID=2f05e
time="2023-11-03T13:35:46Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:35:47Z" level=info msg="ServiceAccount \"argocd-manager\" created in namespace \"kube-system\""
time="2023-11-03T13:35:47Z" level=info msg="ClusterRole \"argocd-manager-role\" created"
time="2023-11-03T13:35:47Z" level=info msg="ClusterRoleBinding \"argocd-manager-role-binding\" created"
time="2023-11-03T13:35:48Z" level=info msg="Created bearer token secret for ServiceAccount \"argocd-manager\""
time="2023-11-03T13:35:49Z" level=info msg="kubectl get serviceaccount argocd-manager -n kube-system" dir= execID=79711
time="2023-11-03T13:35:49Z" level=debug msg="NAME             SECRETS   AGE\nargocd-manager   2         2s\n" duration=243.625759ms execID=79711
time="2023-11-03T13:35:49Z" level=info msg="kubectl get clusterrole argocd-manager-role" dir= execID=67146
time="2023-11-03T13:35:49Z" level=debug msg="NAME                  CREATED AT\nargocd-manager-role   2023-11-03T13:35:47Z\n" duration=301.494007ms execID=67146
time="2023-11-03T13:35:49Z" level=info msg="kubectl get clusterrolebinding argocd-manager-role-binding" dir= execID=5b927
time="2023-11-03T13:35:50Z" level=debug msg="NAME                          ROLE                              AGE\nargocd-manager-role-binding   ClusterRole/argocd-manager-role   2s\n" duration=382.422867ms execID=5b927
time="2023-11-03T13:35:50Z" level=info msg="../../dist/argocd cluster rm default --yes --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJkZWZhdWx0OmxvZ2luIiwiZXhwIjoxNjk5MTA0OTQ2LCJuYmYiOjE2OTkwMTg1NDYsImlhdCI6MTY5OTAxODU0NiwianRpIjoiNThiZGY2N2YtMTZmZS00YzlkLThlN2QtOTYwNDM1ZDQ2YmJkIn0.cbMlMHJHjLk9W8MfDLAk5phhkmMYaGDsGcs0PJF0utk --insecure" dir= execID=c7972
time="2023-11-03T13:35:50Z" level=debug msg="Cluster 'default' removed\n" duration=237.329532ms execID=c7972
time="2023-11-03T13:35:50Z" level=error msg="`../../dist/argocd cluster rm default --yes --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJkZWZhdWx0OmxvZ2luIiwiZXhwIjoxNjk5MTA0OTQ2LCJuYmYiOjE2OTkwMTg1NDYsImlhdCI6MTY5OTAxODU0NiwianRpIjoiNThiZGY2N2YtMTZmZS00YzlkLThlN2QtOTYwNDM1ZDQ2YmJkIn0.cbMlMHJHjLk9W8MfDLAk5phhkmMYaGDsGcs0PJF0utk --insecure` failed exit status 20: time=\"2023-11-03T13:35:50Z\" level=fatal msg=\"Context default does not exist in kubeconfig\"" execID=c7972
time="2023-11-03T13:35:50Z" level=info msg="kubectl get serviceaccount argocd-manager -n kube-system" dir= execID=eb753
time="2023-11-03T13:35:50Z" level=debug msg="NAME             SECRETS   AGE\nargocd-manager   2         3s\n" duration=275.385648ms execID=eb753
    cluster_test.go:292: Expected error from not finding serviceaccount argocd-manager but got:
        NAME             SECRETS   AGE
        argocd-manager   2         3s
time="2023-11-03T13:35:50Z" level=info msg="kubectl get clusterrole argocd-manager-role" dir= execID=c57ae
time="2023-11-03T13:35:50Z" level=debug msg="NAME                  CREATED AT\nargocd-manager-role   2023-11-03T13:35:47Z\n" duration=385.569884ms execID=c57ae
    cluster_test.go:297: Expected error from not finding clusterrole argocd-manager-role but got:
        NAME                  CREATED AT
        argocd-manager-role   2023-11-03T13:35:47Z
time="2023-11-03T13:35:50Z" level=info msg="kubectl get clusterrolebinding argocd-manager-role-binding" dir= execID=dea93
time="2023-11-03T13:35:51Z" level=debug msg="NAME                          ROLE                              AGE\nargocd-manager-role-binding   ClusterRole/argocd-manager-role   4s\n" duration=211.309725ms execID=dea93
    cluster_test.go:302: Expected error from not finding clusterrolebinding argocd-manager-role-binding but got:
        NAME                          ROLE                              AGE
        argocd-manager-role-binding   ClusterRole/argocd-manager-role   4s
--- FAIL: TestClusterDelete (9.31s)
=== RUN   TestSimpleClusterDecisionResourceGenerator
time="2023-11-03T13:35:51Z" level=info msg="mkdir -p /tmp/applicationset-e2e" dir= execID=bcc88
time="2023-11-03T13:35:51Z" level=debug duration=2.140582ms execID=bcc88
time="2023-11-03T13:35:51Z" level=info msg="clean state" duration=37.674598ms id= name=TestSimpleClusterDecisionResourceGenerator password=password username=admin
time="2023-11-03T13:35:52Z" level=info msg="action: creating cluster Secret 'my-secret'"
time="2023-11-03T13:35:52Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:35:52Z" level=info msg="action: creating placement role/rolebinding"
time="2023-11-03T13:35:52Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:35:52Z" level=info msg="action: creating configmap 'my-configmap'"
time="2023-11-03T13:35:52Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:35:52Z" level=info msg="action: creating placementDecision 'my-placementdecision'"
time="2023-11-03T13:35:52Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:35:52Z" level=info msg="action: status update placementDecision for '[map[clusterName:cluster1 reason:argotest]]'"
time="2023-11-03T13:35:52Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:35:52Z" level=info msg="action: creating ApplicationSet 'simple-cluster-generator'"
time="2023-11-03T13:35:52Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:35:52Z" level=info msg="expectation pending: missing app 'cluster1-guestbook'"
time="2023-11-03T13:35:55Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:35:55Z" level=info msg="action: updating ApplicationSet 'simple-cluster-generator'"
time="2023-11-03T13:35:55Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:35:55Z" level=info msg="expectation pending: apps are not equal: 'cluster1-guestbook', diff: {\"spec\":{\"destination\":{\"namespace\":\"guestbook\"}}}\n"
time="2023-11-03T13:35:58Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:35:58Z" level=info msg="action: updating ApplicationSet 'simple-cluster-generator'"
time="2023-11-03T13:35:58Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:35:58Z" level=info msg="expectation pending: apps are not equal: 'cluster1-guestbook', diff: {\"metadata\":{\"annotations\":null,\"labels\":null}}\n"
time="2023-11-03T13:36:01Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:36:01Z" level=info msg="action: Deleting ApplicationSet 'simple-cluster-generator' <nil>"
time="2023-11-03T13:36:01Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:36:01Z" level=info msg="expectation pending: app 'cluster1-guestbook' should no longer exist"
time="2023-11-03T13:36:04Z" level=info msg="expectation succeeded: all apps do not exist"
--- PASS: TestSimpleClusterDecisionResourceGenerator (13.69s)
=== RUN   TestSimpleClusterDecisionResourceGeneratorAddingCluster
time="2023-11-03T13:36:04Z" level=info msg="mkdir -p /tmp/applicationset-e2e" dir= execID=4f3ce
time="2023-11-03T13:36:04Z" level=debug duration=2.05687ms execID=4f3ce
time="2023-11-03T13:36:04Z" level=info msg="clean state" duration=53.693632ms id= name=TestSimpleClusterDecisionResourceGeneratorAddingCluster password=password username=admin
time="2023-11-03T13:36:06Z" level=info msg="action: creating cluster Secret 'my-secret'"
time="2023-11-03T13:36:06Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:36:06Z" level=info msg="action: creating placement role/rolebinding"
time="2023-11-03T13:36:06Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:36:06Z" level=info msg="action: status update placementDecision for '[map[clusterName:cluster1 reason:argotest] map[clusterName:cluster2 reason:argotest]]'"
time="2023-11-03T13:36:06Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:36:06Z" level=info msg="action: creating ApplicationSet 'simple-cluster-generator'"
time="2023-11-03T13:36:06Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:36:06Z" level=info msg="expectation pending: missing app 'cluster1-guestbook'"
time="2023-11-03T13:36:09Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:36:09Z" level=info msg="action: creating cluster Secret 'my-secret2'"
time="2023-11-03T13:36:09Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:36:09Z" level=info msg="expectation pending: missing app 'cluster2-guestbook'"
time="2023-11-03T13:36:13Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:36:13Z" level=info msg="action: Deleting ApplicationSet 'simple-cluster-generator' <nil>"
time="2023-11-03T13:36:13Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:36:13Z" level=info msg="expectation pending: app 'cluster1-guestbook' should no longer exist"
time="2023-11-03T13:36:16Z" level=info msg="expectation succeeded: all apps do not exist"
--- PASS: TestSimpleClusterDecisionResourceGeneratorAddingCluster (11.21s)
=== RUN   TestSimpleClusterDecisionResourceGeneratorDeletingClusterSecret
time="2023-11-03T13:36:16Z" level=info msg="mkdir -p /tmp/applicationset-e2e" dir= execID=103bc
time="2023-11-03T13:36:16Z" level=debug duration=2.173222ms execID=103bc
time="2023-11-03T13:36:16Z" level=info msg="clean state" duration=58.533377ms id= name=TestSimpleClusterDecisionResourceGeneratorDeletingClusterSecret password=password username=admin
time="2023-11-03T13:36:17Z" level=info msg="action: creating cluster Secret 'my-secret'"
time="2023-11-03T13:36:17Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:36:18Z" level=info msg="action: creating cluster Secret 'my-secret2'"
time="2023-11-03T13:36:18Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:36:18Z" level=info msg="action: creating placement role/rolebinding"
time="2023-11-03T13:36:18Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:36:18Z" level=info msg="action: status update placementDecision for '[map[clusterName:cluster1 reason:argotest] map[clusterName:cluster2 reason:argotest]]'"
time="2023-11-03T13:36:18Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:36:18Z" level=info msg="action: creating ApplicationSet 'simple-cluster-generator'"
time="2023-11-03T13:36:18Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:36:18Z" level=info msg="expectation pending: missing app 'cluster1-guestbook'"
time="2023-11-03T13:36:21Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:36:21Z" level=info msg="action: deleting cluster Secret 'my-secret2'"
time="2023-11-03T13:36:21Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:36:21Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:36:21Z" level=info msg="expectation pending: app 'cluster2-guestbook' should no longer exist"
time="2023-11-03T13:36:24Z" level=info msg="expectation pending: app 'cluster2-guestbook' should no longer exist"
time="2023-11-03T13:36:27Z" level=info msg="expectation pending: app 'cluster2-guestbook' should no longer exist"
time="2023-11-03T13:36:30Z" level=info msg="expectation succeeded: all apps do not exist"
time="2023-11-03T13:36:30Z" level=info msg="action: Deleting ApplicationSet 'simple-cluster-generator' <nil>"
time="2023-11-03T13:36:30Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:36:30Z" level=info msg="expectation pending: app 'cluster1-guestbook' should no longer exist"
time="2023-11-03T13:36:33Z" level=info msg="expectation succeeded: all apps do not exist"
--- PASS: TestSimpleClusterDecisionResourceGeneratorDeletingClusterSecret (17.22s)
=== RUN   TestSimpleClusterDecisionResourceGeneratorDeletingClusterFromResource
time="2023-11-03T13:36:33Z" level=info msg="mkdir -p /tmp/applicationset-e2e" dir= execID=19271
time="2023-11-03T13:36:33Z" level=debug duration=2.004849ms execID=19271
time="2023-11-03T13:36:33Z" level=info msg="clean state" duration=48.663645ms id= name=TestSimpleClusterDecisionResourceGeneratorDeletingClusterFromResource password=password username=admin
time="2023-11-03T13:36:34Z" level=info msg="action: creating cluster Secret 'my-secret'"
time="2023-11-03T13:36:34Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:36:35Z" level=info msg="action: creating cluster Secret 'my-secret2'"
time="2023-11-03T13:36:35Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:36:35Z" level=info msg="action: creating placement role/rolebinding"
time="2023-11-03T13:36:35Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:36:35Z" level=info msg="action: status update placementDecision for '[map[clusterName:cluster1 reason:argotest] map[clusterName:cluster2 reason:argotest]]'"
time="2023-11-03T13:36:35Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:36:35Z" level=info msg="action: creating ApplicationSet 'simple-cluster-generator'"
time="2023-11-03T13:36:35Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:36:35Z" level=info msg="expectation pending: missing app 'cluster1-guestbook'"
time="2023-11-03T13:36:38Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:36:38Z" level=info msg="action: status update placementDecision for '[map[clusterName:cluster1 reason:argotest]]'"
time="2023-11-03T13:36:38Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:36:38Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:36:38Z" level=info msg="expectation pending: app 'cluster2-guestbook' should no longer exist"
time="2023-11-03T13:36:41Z" level=info msg="expectation succeeded: all apps do not exist"
time="2023-11-03T13:36:41Z" level=info msg="action: Deleting ApplicationSet 'simple-cluster-generator' <nil>"
time="2023-11-03T13:36:41Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:36:41Z" level=info msg="expectation pending: app 'cluster1-guestbook' should no longer exist"
time="2023-11-03T13:36:44Z" level=info msg="expectation succeeded: all apps do not exist"
--- PASS: TestSimpleClusterDecisionResourceGeneratorDeletingClusterFromResource (11.25s)
=== RUN   TestCustomToolWithGitCreds
time="2023-11-03T13:36:44Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=27cb0
time="2023-11-03T13:36:44Z" level=debug msg="namespace \"argocd-e2e--test-cluster-delete-hdloj\" deleted\n" duration=211.69764ms execID=27cb0
time="2023-11-03T13:36:44Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=69909
time="2023-11-03T13:36:45Z" level=debug msg="No resources found\n" duration=430.962193ms execID=69909
time="2023-11-03T13:36:45Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=ce8e3
time="2023-11-03T13:36:45Z" level=debug msg="No resources found\n" duration=222.883513ms execID=ce8e3
time="2023-11-03T13:36:46Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:36:46Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTAwNiwibmJmIjoxNjk5MDE4NjA2LCJpYXQiOjE2OTkwMTg2MDYsImp0aSI6ImZlZGJmZmU1LWJjYjItNDk0Yi04NjA3LTM5YzhlYWI5ZmYyZCJ9.1jFn-ylPaZj7LYu3deTcqdyxtIirn081nRXnKIvIpBg --insecure" dir= execID=8c504
time="2023-11-03T13:36:46Z" level=debug duration=100.620627ms execID=8c504
time="2023-11-03T13:36:46Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=2985f
time="2023-11-03T13:36:46Z" level=debug duration=2.121191ms execID=2985f
time="2023-11-03T13:36:46Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=d5ae4
time="2023-11-03T13:36:46Z" level=debug duration=1.577234ms execID=d5ae4
time="2023-11-03T13:36:46Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=bf60f
time="2023-11-03T13:36:46Z" level=debug duration=1.421141ms execID=bf60f
time="2023-11-03T13:36:46Z" level=info msg="pkill -9 gpg-agent" dir= execID=3a756
time="2023-11-03T13:36:46Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=e038f
time="2023-11-03T13:36:46Z" level=debug duration=9.860046ms execID=e038f
time="2023-11-03T13:36:46Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=bc7f0
time="2023-11-03T13:36:46Z" level=debug duration=55.437934ms execID=bc7f0
time="2023-11-03T13:36:46Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=df7c4
time="2023-11-03T13:36:46Z" level=debug duration=1.904692ms execID=df7c4
time="2023-11-03T13:36:46Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=ff826
time="2023-11-03T13:36:46Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.934424ms execID=ff826
time="2023-11-03T13:36:46Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=3a2e0
time="2023-11-03T13:36:46Z" level=debug duration=25.198367ms execID=3a2e0
time="2023-11-03T13:36:46Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=a5f56
time="2023-11-03T13:36:46Z" level=debug duration=21.876817ms execID=a5f56
time="2023-11-03T13:36:46Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=f1129
time="2023-11-03T13:36:46Z" level=debug duration=2.822255ms execID=f1129
time="2023-11-03T13:36:46Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=cc5dc
Handling connection for 9081
time="2023-11-03T13:36:46Z" level=debug duration=65.402354ms execID=cc5dc
time="2023-11-03T13:36:46Z" level=info msg="kubectl create ns argocd-e2e--test-custom-tool-with-git-creds-pjnae" dir= execID=30b92
time="2023-11-03T13:36:46Z" level=debug msg="namespace/argocd-e2e--test-custom-tool-with-git-creds-pjnae created\n" duration=145.011997ms execID=30b92
time="2023-11-03T13:36:46Z" level=info msg="kubectl label ns argocd-e2e--test-custom-tool-with-git-creds-pjnae e2e.argoproj.io=true" dir= execID=59237
time="2023-11-03T13:36:47Z" level=debug msg="namespace/argocd-e2e--test-custom-tool-with-git-creds-pjnae labeled\n" duration=308.044039ms execID=59237
time="2023-11-03T13:36:47Z" level=info msg="clean state" duration=2.734565705s id=TestCustomToolWithGitCreds-pjnae name=TestCustomToolWithGitCreds password=password username=admin
time="2023-11-03T13:36:47Z" level=info msg="../../dist/argocd cert add-tls argocd-e2e-server --from /argocd-e2e/argo-cd/test/fixture/certs/argocd-test-ca.crt --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTAwNiwibmJmIjoxNjk5MDE4NjA2LCJpYXQiOjE2OTkwMTg2MDYsImp0aSI6ImZlZGJmZmU1LWJjYjItNDk0Yi04NjA3LTM5YzhlYWI5ZmYyZCJ9.1jFn-ylPaZj7LYu3deTcqdyxtIirn081nRXnKIvIpBg --insecure" dir= execID=380e9
time="2023-11-03T13:36:47Z" level=debug msg="Reading TLS certificate data in PEM format from '/argocd-e2e/argo-cd/test/fixture/certs/argocd-test-ca.crt'\nCreated entry with 1 PEM certificates for repository server argocd-e2e-server\n" duration=198.175534ms execID=380e9
time="2023-11-03T13:36:47Z" level=info msg="Waiting for API server to restart"
time="2023-11-03T13:36:47Z" level=info msg="kubectl rollout restart deployment argocd-test-server" dir= execID=7a804
time="2023-11-03T13:36:47Z" level=debug msg="deployment.apps/argocd-test-server restarted\n" duration=269.551694ms execID=7a804
time="2023-11-03T13:36:47Z" level=info msg="kubectl rollout status deployment argocd-test-server" dir= execID=acfa1
time="2023-11-03T13:37:18Z" level=debug msg="Waiting for deployment \"argocd-test-server\" rollout to finish: 1 old replicas are pending termination...\nWaiting for deployment \"argocd-test-server\" rollout to finish: 1 old replicas are pending termination...\ndeployment \"argocd-test-server\" successfully rolled out\n" duration=30.400711586s execID=acfa1
time="2023-11-03T13:37:18Z" level=info msg="Waiting for repo server to restart"
time="2023-11-03T13:37:18Z" level=info msg="kubectl rollout restart deployment argocd-test-repo-server" dir= execID=0e063
time="2023-11-03T13:37:18Z" level=debug msg="deployment.apps/argocd-test-repo-server restarted\n" duration=339.18011ms execID=0e063
time="2023-11-03T13:37:18Z" level=info msg="kubectl rollout status deployment argocd-test-repo-server" dir= execID=37229
time="2023-11-03T13:37:28Z" level=debug msg="Waiting for deployment \"argocd-test-repo-server\" rollout to finish: 1 old replicas are pending termination...\nWaiting for deployment \"argocd-test-repo-server\" rollout to finish: 1 old replicas are pending termination...\ndeployment \"argocd-test-repo-server\" successfully rolled out\n" duration=10.483772621s execID=37229
time="2023-11-03T13:37:38Z" level=info msg="../../dist/argocd repo add https://argocd-e2e-server:9443/argo-e2e/testdata.git --username admin --password password --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTAwNiwibmJmIjoxNjk5MDE4NjA2LCJpYXQiOjE2OTkwMTg2MDYsImp0aSI6ImZlZGJmZmU1LWJjYjItNDk0Yi04NjA3LTM5YzhlYWI5ZmYyZCJ9.1jFn-ylPaZj7LYu3deTcqdyxtIirn081nRXnKIvIpBg --insecure" dir= execID=d19ca
time="2023-11-03T13:37:39Z" level=debug msg="Repository 'https://argocd-e2e-server:9443/argo-e2e/testdata.git' added\n" duration=228.891763ms execID=d19ca
time="2023-11-03T13:37:40Z" level=info msg="../../dist/argocd app create test-custom-tool-with-git-creds --repo https://argocd-e2e-server:9443/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path https-kustomize-base --project default --config-management-plugin test-custom-tool-with-git-creds --dest-namespace argocd-e2e--test-custom-tool-with-git-creds-pjnae --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTAwNiwibmJmIjoxNjk5MDE4NjA2LCJpYXQiOjE2OTkwMTg2MDYsImp0aSI6ImZlZGJmZmU1LWJjYjItNDk0Yi04NjA3LTM5YzhlYWI5ZmYyZCJ9.1jFn-ylPaZj7LYu3deTcqdyxtIirn081nRXnKIvIpBg --insecure" dir= execID=edb4d
time="2023-11-03T13:37:40Z" level=debug msg="application 'test-custom-tool-with-git-creds' created\n" duration=483.649856ms execID=edb4d
time="2023-11-03T13:37:40Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:37:40Z" level=info msg="../../dist/argocd app sync test-custom-tool-with-git-creds --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTAwNiwibmJmIjoxNjk5MDE4NjA2LCJpYXQiOjE2OTkwMTg2MDYsImp0aSI6ImZlZGJmZmU1LWJjYjItNDk0Yi04NjA3LTM5YzhlYWI5ZmYyZCJ9.1jFn-ylPaZj7LYu3deTcqdyxtIirn081nRXnKIvIpBg --insecure" dir= execID=b196f
time="2023-11-03T13:37:41Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:37:40+00:00          ConfigMap  argocd-e2e--test-custom-tool-with-git-creds-pjnae  test-custom-tool-with-git-creds  OutOfSync  Missing              \n2023-11-03T13:37:41+00:00          ConfigMap  argocd-e2e--test-custom-tool-with-git-creds-pjnae  test-custom-tool-with-git-creds  OutOfSync  Missing              configmap/test-custom-tool-with-git-creds created\n2023-11-03T13:37:41+00:00          ConfigMap  argocd-e2e--test-custom-tool-with-git-creds-pjnae  test-custom-tool-with-git-creds    Synced  Missing              configmap/test-custom-tool-with-git-creds created\n\nName:               argocd-e2e/test-custom-tool-with-git-creds\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-custom-tool-with-git-creds-pjnae\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-custom-tool-with-git-creds\nRepo:               https://argocd-e2e-server:9443/argo-e2e/testdata.git\nTarget:             \nPath:               https-kustomize-base\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (10e86b3)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      10e86b3ceb8d91cefccfd58bc783ce9ab76c0039\nPhase:              Succeeded\nStart:              2023-11-03 13:37:40 +0000 UTC\nFinished:           2023-11-03 13:37:41 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                          NAME                             STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-custom-tool-with-git-creds-pjnae  test-custom-tool-with-git-creds  Synced                configmap/test-custom-tool-with-git-creds created\n" duration=893.702035ms execID=b196f
time="2023-11-03T13:37:41Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:37:41Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:37:41Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:37:41Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:37:41Z" level=info msg="kubectl -n argocd-e2e--test-custom-tool-with-git-creds-pjnae get cm test-custom-tool-with-git-creds -o jsonpath={.metadata.annotations.GitAskpass}" dir= execID=ee99c
time="2023-11-03T13:37:41Z" level=debug msg=argocd duration=255.045362ms execID=ee99c
time="2023-11-03T13:37:41Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCustomToolWithGitCreds (57.33s)
=== RUN   TestCustomToolWithGitCredsTemplate
time="2023-11-03T13:37:41Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=94ed7
time="2023-11-03T13:37:42Z" level=debug msg="namespace \"argocd-e2e--test-custom-tool-with-git-creds-pjnae\" deleted\n" duration=230.066828ms execID=94ed7
time="2023-11-03T13:37:42Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=e24dc
time="2023-11-03T13:37:42Z" level=debug msg="No resources found\n" duration=456.222735ms execID=e24dc
time="2023-11-03T13:37:42Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=7dbd9
time="2023-11-03T13:37:42Z" level=debug msg="No resources found\n" duration=163.029711ms execID=7dbd9
time="2023-11-03T13:37:43Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:37:43Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTA2MywibmJmIjoxNjk5MDE4NjYzLCJpYXQiOjE2OTkwMTg2NjMsImp0aSI6IjA0NjZlNzdiLTUyMDMtNDJlYy05ZjM1LWI0NjFkMzNlNDQ0NCJ9.gjH4NJtcTcCFrOSDIFrXRqRQMjj5d6diYVS1ppp7IjI --insecure" dir= execID=7feaa
time="2023-11-03T13:37:43Z" level=debug duration=67.386108ms execID=7feaa
time="2023-11-03T13:37:43Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=4873a
time="2023-11-03T13:37:43Z" level=debug duration=2.009328ms execID=4873a
time="2023-11-03T13:37:43Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=91680
time="2023-11-03T13:37:43Z" level=debug duration=1.793045ms execID=91680
time="2023-11-03T13:37:43Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=f859e
time="2023-11-03T13:37:43Z" level=debug duration=1.597431ms execID=f859e
time="2023-11-03T13:37:43Z" level=info msg="pkill -9 gpg-agent" dir= execID=69140
time="2023-11-03T13:37:43Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=d6272
time="2023-11-03T13:37:43Z" level=debug duration=10.210221ms execID=d6272
time="2023-11-03T13:37:43Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=b94b7
time="2023-11-03T13:37:43Z" level=debug duration=34.440267ms execID=b94b7
time="2023-11-03T13:37:43Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=23418
time="2023-11-03T13:37:43Z" level=debug duration=6.358716ms execID=23418
time="2023-11-03T13:37:43Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=e0593
time="2023-11-03T13:37:43Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.137003ms execID=e0593
time="2023-11-03T13:37:43Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=7a907
time="2023-11-03T13:37:43Z" level=debug duration=29.242792ms execID=7a907
time="2023-11-03T13:37:43Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=1e0ff
time="2023-11-03T13:37:43Z" level=debug duration=22.843981ms execID=1e0ff
time="2023-11-03T13:37:43Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=ec6b0
time="2023-11-03T13:37:43Z" level=debug duration=2.367738ms execID=ec6b0
time="2023-11-03T13:37:43Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=4a3d9
Handling connection for 9081
time="2023-11-03T13:37:43Z" level=debug duration=79.564258ms execID=4a3d9
time="2023-11-03T13:37:43Z" level=info msg="kubectl create ns argocd-e2e--test-custom-tool-with-git-creds-template-agzps" dir= execID=d1181
time="2023-11-03T13:37:43Z" level=debug msg="namespace/argocd-e2e--test-custom-tool-with-git-creds-template-agzps created\n" duration=111.952393ms execID=d1181
time="2023-11-03T13:37:43Z" level=info msg="kubectl label ns argocd-e2e--test-custom-tool-with-git-creds-template-agzps e2e.argoproj.io=true" dir= execID=c26ae
time="2023-11-03T13:37:44Z" level=debug msg="namespace/argocd-e2e--test-custom-tool-with-git-creds-template-agzps labeled\n" duration=264.248269ms execID=c26ae
time="2023-11-03T13:37:44Z" level=info msg="clean state" duration=2.29869383s id=TestCustomToolWithGitCredsTemplate-agzps name=TestCustomToolWithGitCredsTemplate password=password username=admin
time="2023-11-03T13:37:44Z" level=info msg="../../dist/argocd cert add-tls argocd-e2e-server --from /argocd-e2e/argo-cd/test/fixture/certs/argocd-test-ca.crt --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTA2MywibmJmIjoxNjk5MDE4NjYzLCJpYXQiOjE2OTkwMTg2NjMsImp0aSI6IjA0NjZlNzdiLTUyMDMtNDJlYy05ZjM1LWI0NjFkMzNlNDQ0NCJ9.gjH4NJtcTcCFrOSDIFrXRqRQMjj5d6diYVS1ppp7IjI --insecure" dir= execID=7ff98
time="2023-11-03T13:37:44Z" level=debug msg="Reading TLS certificate data in PEM format from '/argocd-e2e/argo-cd/test/fixture/certs/argocd-test-ca.crt'\nCreated entry with 0 PEM certificates for repository server argocd-e2e-server\n" duration=109.847099ms execID=7ff98
time="2023-11-03T13:37:44Z" level=info msg="Waiting for API server to restart"
time="2023-11-03T13:37:44Z" level=info msg="kubectl rollout restart deployment argocd-test-server" dir= execID=30ade
time="2023-11-03T13:37:44Z" level=debug msg="deployment.apps/argocd-test-server restarted\n" duration=504.965025ms execID=30ade
time="2023-11-03T13:37:44Z" level=info msg="kubectl rollout status deployment argocd-test-server" dir= execID=3b106
time="2023-11-03T13:38:15Z" level=debug msg="Waiting for deployment \"argocd-test-server\" rollout to finish: 1 old replicas are pending termination...\nWaiting for deployment \"argocd-test-server\" rollout to finish: 1 old replicas are pending termination...\ndeployment \"argocd-test-server\" successfully rolled out\n" duration=30.42428233s execID=3b106
time="2023-11-03T13:38:15Z" level=info msg="Waiting for repo server to restart"
time="2023-11-03T13:38:15Z" level=info msg="kubectl rollout restart deployment argocd-test-repo-server" dir= execID=088e5
time="2023-11-03T13:38:15Z" level=debug msg="deployment.apps/argocd-test-repo-server restarted\n" duration=236.283083ms execID=088e5
time="2023-11-03T13:38:15Z" level=info msg="kubectl rollout status deployment argocd-test-repo-server" dir= execID=88ff6
time="2023-11-03T13:38:25Z" level=debug msg="Waiting for deployment \"argocd-test-repo-server\" rollout to finish: 1 old replicas are pending termination...\nWaiting for deployment \"argocd-test-repo-server\" rollout to finish: 1 old replicas are pending termination...\ndeployment \"argocd-test-repo-server\" successfully rolled out\n" duration=10.37588366s execID=88ff6
time="2023-11-03T13:38:35Z" level=info msg="../../dist/argocd repocreds add https://argocd-e2e-server:9443/argo-e2e/testdata.git --username admin --password password --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTA2MywibmJmIjoxNjk5MDE4NjYzLCJpYXQiOjE2OTkwMTg2NjMsImp0aSI6IjA0NjZlNzdiLTUyMDMtNDJlYy05ZjM1LWI0NjFkMzNlNDQ0NCJ9.gjH4NJtcTcCFrOSDIFrXRqRQMjj5d6diYVS1ppp7IjI --insecure" dir= execID=24f4f
time="2023-11-03T13:38:35Z" level=debug msg="Repository credentials for 'https://argocd-e2e-server:9443/argo-e2e/testdata.git' added\n" duration=183.85217ms execID=24f4f
time="2023-11-03T13:38:35Z" level=info msg="../../dist/argocd repo add https://argocd-e2e-server:9443/argo-e2e/testdata.git --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTA2MywibmJmIjoxNjk5MDE4NjYzLCJpYXQiOjE2OTkwMTg2NjMsImp0aSI6IjA0NjZlNzdiLTUyMDMtNDJlYy05ZjM1LWI0NjFkMzNlNDQ0NCJ9.gjH4NJtcTcCFrOSDIFrXRqRQMjj5d6diYVS1ppp7IjI --insecure" dir= execID=74326
time="2023-11-03T13:38:36Z" level=debug msg="Repository 'https://argocd-e2e-server:9443/argo-e2e/testdata.git' added\n" duration=211.160653ms execID=74326
time="2023-11-03T13:38:37Z" level=info msg="../../dist/argocd app create test-custom-tool-with-git-creds-template --repo https://argocd-e2e-server:9443/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path https-kustomize-base --project default --config-management-plugin test-custom-tool-with-git-creds-template --dest-namespace argocd-e2e--test-custom-tool-with-git-creds-template-agzps --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTA2MywibmJmIjoxNjk5MDE4NjYzLCJpYXQiOjE2OTkwMTg2NjMsImp0aSI6IjA0NjZlNzdiLTUyMDMtNDJlYy05ZjM1LWI0NjFkMzNlNDQ0NCJ9.gjH4NJtcTcCFrOSDIFrXRqRQMjj5d6diYVS1ppp7IjI --insecure" dir= execID=07065
time="2023-11-03T13:38:37Z" level=debug msg="application 'test-custom-tool-with-git-creds-template' created\n" duration=332.332158ms execID=07065
time="2023-11-03T13:38:37Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:38:37Z" level=info msg="../../dist/argocd app sync test-custom-tool-with-git-creds-template --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTA2MywibmJmIjoxNjk5MDE4NjYzLCJpYXQiOjE2OTkwMTg2NjMsImp0aSI6IjA0NjZlNzdiLTUyMDMtNDJlYy05ZjM1LWI0NjFkMzNlNDQ0NCJ9.gjH4NJtcTcCFrOSDIFrXRqRQMjj5d6diYVS1ppp7IjI --insecure" dir= execID=5cf46
time="2023-11-03T13:38:38Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:38:37+00:00          ConfigMap  argocd-e2e--test-custom-tool-with-git-creds-template-agzps  test-custom-tool-with-git-creds-template  OutOfSync  Missing              \n2023-11-03T13:38:38+00:00          ConfigMap  argocd-e2e--test-custom-tool-with-git-creds-template-agzps  test-custom-tool-with-git-creds-template  OutOfSync  Missing              configmap/test-custom-tool-with-git-creds-template created\n2023-11-03T13:38:38+00:00          ConfigMap  argocd-e2e--test-custom-tool-with-git-creds-template-agzps  test-custom-tool-with-git-creds-template    Synced  Missing              configmap/test-custom-tool-with-git-creds-template created\n\nName:               argocd-e2e/test-custom-tool-with-git-creds-template\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-custom-tool-with-git-creds-template-agzps\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-custom-tool-with-git-creds-template\nRepo:               https://argocd-e2e-server:9443/argo-e2e/testdata.git\nTarget:             \nPath:               https-kustomize-base\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (f3e3960)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      f3e39609de352a370dc3044316cc96f990a091f0\nPhase:              Succeeded\nStart:              2023-11-03 13:38:37 +0000 UTC\nFinished:           2023-11-03 13:38:38 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                                   NAME                                      STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-custom-tool-with-git-creds-template-agzps  test-custom-tool-with-git-creds-template  Synced                configmap/test-custom-tool-with-git-creds-template created\n" duration=1.057333307s execID=5cf46
time="2023-11-03T13:38:38Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:38:38Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:38:38Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:38:38Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:38:38Z" level=info msg="kubectl -n argocd-e2e--test-custom-tool-with-git-creds-template-agzps get cm test-custom-tool-with-git-creds-template -o jsonpath={.metadata.annotations.GitAskpass}" dir= execID=46c32
time="2023-11-03T13:38:38Z" level=debug msg=argocd duration=231.723755ms execID=46c32
time="2023-11-03T13:38:38Z" level=info msg="kubectl -n argocd-e2e--test-custom-tool-with-git-creds-template-agzps get cm test-custom-tool-with-git-creds-template -o jsonpath={.metadata.annotations.GitUsername}" dir= execID=03dde
time="2023-11-03T13:38:39Z" level=debug duration=313.513421ms execID=03dde
time="2023-11-03T13:38:39Z" level=info msg="kubectl -n argocd-e2e--test-custom-tool-with-git-creds-template-agzps get cm test-custom-tool-with-git-creds-template -o jsonpath={.metadata.annotations.GitPassword}" dir= execID=ef068
time="2023-11-03T13:38:39Z" level=debug duration=174.001644ms execID=ef068
time="2023-11-03T13:38:39Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCustomToolWithGitCredsTemplate (57.50s)
=== RUN   TestCustomToolWithEnv
time="2023-11-03T13:38:39Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=ff23f
time="2023-11-03T13:38:39Z" level=debug msg="namespace \"argocd-e2e--test-custom-tool-with-git-creds-template-agzps\" deleted\n" duration=252.662263ms execID=ff23f
time="2023-11-03T13:38:39Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=6bc8b
time="2023-11-03T13:38:40Z" level=debug msg="No resources found\n" duration=506.840187ms execID=6bc8b
time="2023-11-03T13:38:40Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=d1a71
time="2023-11-03T13:38:40Z" level=debug msg="No resources found\n" duration=270.21721ms execID=d1a71
time="2023-11-03T13:38:41Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:38:41Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTEyMSwibmJmIjoxNjk5MDE4NzIxLCJpYXQiOjE2OTkwMTg3MjEsImp0aSI6IjBmYzNiMTNhLWFlY2ItNGQzYy1hNTBkLWJlNGM1ZDljOTVhZiJ9.2xR0M-jdni7ylL4XuV6Bg2bgajo22L-zY8tu0JCTRro --insecure" dir= execID=faf92
time="2023-11-03T13:38:41Z" level=debug duration=72.000678ms execID=faf92
time="2023-11-03T13:38:41Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=2c312
time="2023-11-03T13:38:41Z" level=debug duration=1.919993ms execID=2c312
time="2023-11-03T13:38:41Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=d8a3b
time="2023-11-03T13:38:41Z" level=debug duration=1.413442ms execID=d8a3b
time="2023-11-03T13:38:41Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=83427
time="2023-11-03T13:38:41Z" level=debug duration=1.545864ms execID=83427
time="2023-11-03T13:38:41Z" level=info msg="pkill -9 gpg-agent" dir= execID=a25f5
time="2023-11-03T13:38:41Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=d03d2
time="2023-11-03T13:38:41Z" level=debug duration=28.965253ms execID=d03d2
time="2023-11-03T13:38:41Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=80993
time="2023-11-03T13:38:41Z" level=debug duration=31.573584ms execID=80993
time="2023-11-03T13:38:41Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=fc2a3
time="2023-11-03T13:38:41Z" level=debug duration=1.563673ms execID=fc2a3
time="2023-11-03T13:38:41Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=f85a8
time="2023-11-03T13:38:41Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.832272ms execID=f85a8
time="2023-11-03T13:38:41Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=48084
time="2023-11-03T13:38:41Z" level=debug duration=25.494401ms execID=48084
time="2023-11-03T13:38:41Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=11ad4
time="2023-11-03T13:38:41Z" level=debug duration=28.77222ms execID=11ad4
time="2023-11-03T13:38:41Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=25ab9
time="2023-11-03T13:38:41Z" level=debug duration=3.002362ms execID=25ab9
time="2023-11-03T13:38:41Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=68f29
Handling connection for 9081
time="2023-11-03T13:38:41Z" level=debug duration=62.688302ms execID=68f29
time="2023-11-03T13:38:41Z" level=info msg="kubectl create ns argocd-e2e--test-custom-tool-with-env-malgp" dir= execID=31b56
time="2023-11-03T13:38:41Z" level=debug msg="namespace/argocd-e2e--test-custom-tool-with-env-malgp created\n" duration=133.326372ms execID=31b56
time="2023-11-03T13:38:41Z" level=info msg="kubectl label ns argocd-e2e--test-custom-tool-with-env-malgp e2e.argoproj.io=true" dir= execID=601ff
time="2023-11-03T13:38:41Z" level=debug msg="namespace/argocd-e2e--test-custom-tool-with-env-malgp labeled\n" duration=229.693626ms execID=601ff
time="2023-11-03T13:38:41Z" level=info msg="clean state" duration=2.608791874s id=TestCustomToolWithEnv-malgp name=TestCustomToolWithEnv password=password username=admin
time="2023-11-03T13:38:42Z" level=info msg="../../dist/argocd app create -f /tmp/1607150022 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTEyMSwibmJmIjoxNjk5MDE4NzIxLCJpYXQiOjE2OTkwMTg3MjEsImp0aSI6IjBmYzNiMTNhLWFlY2ItNGQzYy1hNTBkLWJlNGM1ZDljOTVhZiJ9.2xR0M-jdni7ylL4XuV6Bg2bgajo22L-zY8tu0JCTRro --insecure" dir= execID=7d3c4
time="2023-11-03T13:38:43Z" level=debug msg="application 'test-custom-tool-with-env' created\n" duration=227.719843ms execID=7d3c4
time="2023-11-03T13:38:43Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:38:43Z" level=info msg="../../dist/argocd app sync test-custom-tool-with-env --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTEyMSwibmJmIjoxNjk5MDE4NzIxLCJpYXQiOjE2OTkwMTg3MjEsImp0aSI6IjBmYzNiMTNhLWFlY2ItNGQzYy1hNTBkLWJlNGM1ZDljOTVhZiJ9.2xR0M-jdni7ylL4XuV6Bg2bgajo22L-zY8tu0JCTRro --insecure" dir= execID=cff95
time="2023-11-03T13:38:43Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                   NAME         STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:38:43+00:00          ConfigMap  argocd-e2e--test-custom-tool-with-env-malgp  test-custom-tool-with-env  OutOfSync  Missing              \n\nName:               argocd-e2e/test-custom-tool-with-env\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-custom-tool-with-env-malgp\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-custom-tool-with-env\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (77854b5)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      77854b5255301732ba9cca5923663a331b832156\nPhase:              Succeeded\nStart:              2023-11-03 13:38:43 +0000 UTC\nFinished:           2023-11-03 13:38:43 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                    NAME                       STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-custom-tool-with-env-malgp  test-custom-tool-with-env  Synced                configmap/test-custom-tool-with-env created\n" duration=741.278958ms execID=cff95
time="2023-11-03T13:38:43Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:38:43Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:38:43Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:38:43Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:38:44Z" level=info msg="kubectl -n argocd-e2e--test-custom-tool-with-env-malgp get cm test-custom-tool-with-env -o jsonpath={.metadata.annotations.Bar}" dir= execID=f8508
time="2023-11-03T13:38:45Z" level=debug msg=baz duration=262.765759ms execID=f8508
time="2023-11-03T13:38:45Z" level=info msg="kubectl -n argocd-e2e--test-custom-tool-with-env-malgp get cm test-custom-tool-with-env -o jsonpath={.metadata.annotations.Foo}" dir= execID=12699
time="2023-11-03T13:38:45Z" level=debug msg=bar duration=220.446526ms execID=12699
time="2023-11-03T13:38:45Z" level=info msg="kubectl version -o json" dir=. execID=44860
time="2023-11-03T13:38:45Z" level=debug msg="{\n  \"clientVersion\": {\n    \"major\": \"1\",\n    \"minor\": \"26\",\n    \"gitVersion\": \"v1.26.1\",\n    \"gitCommit\": \"05d83eff7e17160e679898a2a5cd6019ec252c49\",\n    \"gitTreeState\": \"clean\",\n    \"buildDate\": \"2023-06-07T15:39:28Z\",\n    \"goVersion\": \"go1.19.9\",\n    \"compiler\": \"gc\",\n    \"platform\": \"linux/amd64\"\n  },\n  \"kustomizeVersion\": \"v4.5.7\",\n  \"serverVersion\": {\n    \"major\": \"1\",\n    \"minor\": \"26\",\n    \"gitVersion\": \"v1.26.7+c7ee51f\",\n    \"gitCommit\": \"f10a517f7199bdae922a70893d85eb96a76f5c2d\",\n    \"gitTreeState\": \"clean\",\n    \"buildDate\": \"2023-09-11T02:22:18Z\",\n    \"goVersion\": \"go1.19.10 X:strictfipsruntime\",\n    \"compiler\": \"gc\",\n    \"platform\": \"linux/amd64\"\n  }\n}\n" duration=269.483398ms execID=44860
time="2023-11-03T13:38:45Z" level=info msg="kubectl -n argocd-e2e--test-custom-tool-with-env-malgp get cm test-custom-tool-with-env -o jsonpath={.metadata.annotations.KubeVersion}" dir= execID=ee082
time="2023-11-03T13:38:45Z" level=debug msg=1.26 duration=223.389397ms execID=ee082
time="2023-11-03T13:38:45Z" level=info msg="kubectl -n argocd-e2e--test-custom-tool-with-env-malgp get cm test-custom-tool-with-env -o jsonpath={.metadata.annotations.KubeApiVersion}" dir= execID=c20d3
time="2023-11-03T13:38:46Z" level=debug msg="admissionregistration.k8s.io/v1,admissionregistration.k8s.io/v1/MutatingWebhookConfiguration,admissionregistration.k8s.io/v1/ValidatingWebhookConfiguration,apiextensions.k8s.io/v1,apiextensions.k8s.io/v1/CustomResourceDefinition,apiregistration.k8s.io/v1,apiregistration.k8s.io/v1/APIService,apiserver.openshift.io/v1,apiserver.openshift.io/v1/APIRequestCount,apps.openshift.io/v1,apps.openshift.io/v1/DeploymentConfig,apps/v1,apps/v1/ControllerRevision,apps/v1/DaemonSet,apps/v1/Deployment,apps/v1/ReplicaSet,apps/v1/StatefulSet,argoproj.io/v1alpha1,argoproj.io/v1alpha1/AnalysisRun,argoproj.io/v1alpha1/AnalysisTemplate,argoproj.io/v1alpha1/AppProject,argoproj.io/v1alpha1/Application,argoproj.io/v1alpha1/ApplicationSet,argoproj.io/v1alpha1/ArgoCD,argoproj.io/v1alpha1/ClusterAnalysisTemplate,argoproj.io/v1alpha1/Experiment,argoproj.io/v1alpha1/NonStatusSubResource,argoproj.io/v1alpha1/Rollout,argoproj.io/v1alpha1/RolloutManager,argoproj.io/v1alpha1/StatusSubResource,authorization.openshift.io/v1,authorization.openshift.io/v1/RoleBindingRestriction,autoscaling.openshift.io/v1,autoscaling.openshift.io/v1/ClusterAutoscaler,autoscaling.openshift.io/v1beta1,autoscaling.openshift.io/v1beta1/MachineAutoscaler,autoscaling/v1,autoscaling/v1/HorizontalPodAutoscaler,autoscaling/v2,autoscaling/v2/HorizontalPodAutoscaler,batch/v1,batch/v1/CronJob,batch/v1/Job,build.openshift.io/v1,build.openshift.io/v1/Build,build.openshift.io/v1/BuildConfig,certificates.k8s.io/v1,certificates.k8s.io/v1/CertificateSigningRequest,cloud.network.openshift.io/v1,cloud.network.openshift.io/v1/CloudPrivateIPConfig,cloudcredential.openshift.io/v1,cloudcredential.openshift.io/v1/CredentialsRequest,cluster.open-cluster-management.io/v1alpha1,cluster.open-cluster-management.io/v1alpha1/PlacementDecision,config.openshift.io/v1,config.openshift.io/v1/APIServer,config.openshift.io/v1/Authentication,config.openshift.io/v1/Build,config.openshift.io/v1/ClusterOperator,config.openshift.io/v1/ClusterVersion,config.openshift.io/v1/Console,config.openshift.io/v1/DNS,config.openshift.io/v1/FeatureGate,config.openshift.io/v1/Image,config.openshift.io/v1/ImageContentPolicy,config.openshift.io/v1/ImageDigestMirrorSet,config.openshift.io/v1/ImageTagMirrorSet,config.openshift.io/v1/Infrastructure,config.openshift.io/v1/Ingress,config.openshift.io/v1/Network,config.openshift.io/v1/Node,config.openshift.io/v1/OAuth,config.openshift.io/v1/OperatorHub,config.openshift.io/v1/Project,config.openshift.io/v1/Proxy,config.openshift.io/v1/Scheduler,console.openshift.io/v1,console.openshift.io/v1/ConsoleCLIDownload,console.openshift.io/v1/ConsoleExternalLogLink,console.openshift.io/v1/ConsoleLink,console.openshift.io/v1/ConsoleNotification,console.openshift.io/v1/ConsolePlugin,console.openshift.io/v1/ConsoleQuickStart,console.openshift.io/v1/ConsoleYAMLSample,console.openshift.io/v1alpha1,console.openshift.io/v1alpha1/ConsolePlugin,controlplane.operator.openshift.io/v1alpha1,controlplane.operator.openshift.io/v1alpha1/PodNetworkConnectivityCheck,coordination.k8s.io/v1,coordination.k8s.io/v1/Lease,discovery.k8s.io/v1,discovery.k8s.io/v1/EndpointSlice,events.k8s.io/v1,events.k8s.io/v1/Event,flowcontrol.apiserver.k8s.io/v1beta2,flowcontrol.apiserver.k8s.io/v1beta2/FlowSchema,flowcontrol.apiserver.k8s.io/v1beta2/PriorityLevelConfiguration,flowcontrol.apiserver.k8s.io/v1beta3,flowcontrol.apiserver.k8s.io/v1beta3/FlowSchema,flowcontrol.apiserver.k8s.io/v1beta3/PriorityLevelConfiguration,helm.openshift.io/v1beta1,helm.openshift.io/v1beta1/HelmChartRepository,helm.openshift.io/v1beta1/ProjectHelmChartRepository,image.openshift.io/v1,image.openshift.io/v1/Image,image.openshift.io/v1/ImageStream,imageregistry.operator.openshift.io/v1,imageregistry.operator.openshift.io/v1/Config,imageregistry.operator.openshift.io/v1/ImagePruner,infrastructure.cluster.x-k8s.io/v1alpha5,infrastructure.cluster.x-k8s.io/v1alpha5/Metal3Remediation,infrastructure.cluster.x-k8s.io/v1alpha5/Metal3RemediationTemplate,infrastructure.cluster.x-k8s.io/v1beta1,infrastructure.cluster.x-k8s.io/v1beta1/Metal3Remediation,infrastructure.cluster.x-k8s.io/v1beta1/Metal3RemediationTemplate,ingress.operator.openshift.io/v1,ingress.operator.openshift.io/v1/DNSRecord,k8s.cni.cncf.io/v1,k8s.cni.cncf.io/v1/NetworkAttachmentDefinition,machine.openshift.io/v1,machine.openshift.io/v1/ControlPlaneMachineSet,machine.openshift.io/v1beta1,machine.openshift.io/v1beta1/Machine,machine.openshift.io/v1beta1/MachineHealthCheck,machine.openshift.io/v1beta1/MachineSet,machineconfiguration.openshift.io/v1,machineconfiguration.openshift.io/v1/ContainerRuntimeConfig,machineconfiguration.openshift.io/v1/ControllerConfig,machineconfiguration.openshift.io/v1/KubeletConfig,machineconfiguration.openshift.io/v1/MachineConfig,machineconfiguration.openshift.io/v1/MachineConfigPool,metal3.io/v1alpha1,metal3.io/v1alpha1/BMCEventSubscription,metal3.io/v1alpha1/BareMetalHost,metal3.io/v1alpha1/FirmwareSchema,metal3.io/v1alpha1/HardwareData,metal3.io/v1alpha1/HostFirmwareSettings,metal3.io/v1alpha1/PreprovisioningImage,metal3.io/v1alpha1/Provisioning,migration.k8s.io/v1alpha1,migration.k8s.io/v1alpha1/StorageState,migration.k8s.io/v1alpha1/StorageVersionMigration,monitoring.coreos.com/v1,monitoring.coreos.com/v1/Alertmanager,monitoring.coreos.com/v1/PodMonitor,monitoring.coreos.com/v1/Probe,monitoring.coreos.com/v1/Prometheus,monitoring.coreos.com/v1/PrometheusRule,monitoring.coreos.com/v1/ServiceMonitor,monitoring.coreos.com/v1/ThanosRuler,monitoring.coreos.com/v1alpha1,monitoring.coreos.com/v1alpha1/AlertmanagerConfig,monitoring.coreos.com/v1beta1,monitoring.coreos.com/v1beta1/AlertmanagerConfig,network.openshift.io/v1,network.openshift.io/v1/ClusterNetwork,network.openshift.io/v1/EgressNetworkPolicy,network.openshift.io/v1/HostSubnet,network.openshift.io/v1/NetNamespace,network.operator.openshift.io/v1,network.operator.openshift.io/v1/EgressRouter,network.operator.openshift.io/v1/OperatorPKI,networking.k8s.io/v1,networking.k8s.io/v1/Ingress,networking.k8s.io/v1/IngressClass,networking.k8s.io/v1/NetworkPolicy,node.k8s.io/v1,node.k8s.io/v1/RuntimeClass,oauth.openshift.io/v1,oauth.openshift.io/v1/OAuthAccessToken,oauth.openshift.io/v1/OAuthAuthorizeToken,oauth.openshift.io/v1/OAuthClient,oauth.openshift.io/v1/OAuthClientAuthorization,oauth.openshift.io/v1/UserOAuthAccessToken,operator.openshift.io/v1,operator.openshift.io/v1/Authentication,operator.openshift.io/v1/CSISnapshotController,operator.openshift.io/v1/CloudCredential,operator.openshift.io/v1/ClusterCSIDriver,operator.openshift.io/v1/Config,operator.openshift.io/v1/Console,operator.openshift.io/v1/DNS,operator.openshift.io/v1/Etcd,operator.openshift.io/v1/IngressController,operator.openshift.io/v1/InsightsOperator,operator.openshift.io/v1/KubeAPIServer,operator.openshift.io/v1/KubeControllerManager,operator.openshift.io/v1/KubeScheduler,operator.openshift.io/v1/KubeStorageVersionMigrator,operator.openshift.io/v1/Network,operator.openshift.io/v1/OpenShiftAPIServer,operator.openshift.io/v1/OpenShiftControllerManager,operator.openshift.io/v1/ServiceCA,operator.openshift.io/v1/Storage,operator.openshift.io/v1alpha1,operator.openshift.io/v1alpha1/ImageContentSourcePolicy,operator.tekton.dev/v1alpha1,operator.tekton.dev/v1alpha1/OpenShiftPipelinesAsCode,operator.tekton.dev/v1alpha1/TektonAddon,operator.tekton.dev/v1alpha1/TektonChain,operator.tekton.dev/v1alpha1/TektonConfig,operator.tekton.dev/v1alpha1/TektonHub,operator.tekton.dev/v1alpha1/TektonInstallerSet,operator.tekton.dev/v1alpha1/TektonPipeline,operator.tekton.dev/v1alpha1/TektonResult,operator.tekton.dev/v1alpha1/TektonTrigger,operators.coreos.com/v1,operators.coreos.com/v1/OLMConfig,operators.coreos.com/v1/Operator,operators.coreos.com/v1/OperatorCondition,operators.coreos.com/v1/OperatorGroup,operators.coreos.com/v1alpha1,operators.coreos.com/v1alpha1/CatalogSource,operators.coreos.com/v1alpha1/ClusterServiceVersion,operators.coreos.com/v1alpha1/InstallPlan,operators.coreos.com/v1alpha1/Subscription,operators.coreos.com/v1alpha2,operators.coreos.com/v1alpha2/OperatorGroup,operators.coreos.com/v2,operators.coreos.com/v2/OperatorCondition,performance.openshift.io/v1,performance.openshift.io/v1/PerformanceProfile,performance.openshift.io/v1alpha1,performance.openshift.io/v1alpha1/PerformanceProfile,performance.openshift.io/v2,performance.openshift.io/v2/PerformanceProfile,pipelines.openshift.io/v1alpha1,pipelines.openshift.io/v1alpha1/GitopsService,pipelinesascode.tekton.dev/v1alpha1,pipelinesascode.tekton.dev/v1alpha1/Repository,policy/v1,policy/v1/PodDisruptionBudget,project.openshift.io/v1,project.openshift.io/v1/Project,quota.openshift.io/v1,quota.openshift.io/v1/ClusterResourceQuota,rbac.authorization.k8s.io/v1,rbac.authorization.k8s.io/v1/ClusterRole,rbac.authorization.k8s.io/v1/ClusterRoleBinding,rbac.authorization.k8s.io/v1/Role,rbac.authorization.k8s.io/v1/RoleBinding,resolution.tekton.dev/v1alpha1,resolution.tekton.dev/v1alpha1/ResolutionRequest,resolution.tekton.dev/v1beta1,resolution.tekton.dev/v1beta1/ResolutionRequest,route.openshift.io/v1,route.openshift.io/v1/Route,samples.operator.openshift.io/v1,samples.operator.openshift.io/v1/Config,scheduling.k8s.io/v1,scheduling.k8s.io/v1/PriorityClass,security.internal.openshift.io/v1,security.internal.openshift.io/v1/RangeAllocation,security.openshift.io/v1,security.openshift.io/v1/RangeAllocation,security.openshift.io/v1/SecurityContextConstraints,snapshot.storage.k8s.io/v1,snapshot.storage.k8s.io/v1/VolumeSnapshot,snapshot.storage.k8s.io/v1/VolumeSnapshotClass,snapshot.storage.k8s.io/v1/VolumeSnapshotContent,storage.k8s.io/v1,storage.k8s.io/v1/CSIDriver,storage.k8s.io/v1/CSINode,storage.k8s.io/v1/CSIStorageCapacity,storage.k8s.io/v1/StorageClass,storage.k8s.io/v1/VolumeAttachment,storage.k8s.io/v1beta1,storage.k8s.io/v1beta1/CSIStorageCapacity,tekton.dev/v1,tekton.dev/v1/Pipeline,tekton.dev/v1/PipelineRun,tekton.dev/v1/Task,tekton.dev/v1/TaskRun,tekton.dev/v1alpha1,tekton.dev/v1alpha1/VerificationPolicy,tekton.dev/v1beta1,tekton.dev/v1beta1/ClusterTask,tekton.dev/v1beta1/CustomRun,tekton.dev/v1beta1/Pipeline,tekton.dev/v1beta1/PipelineRun,tekton.dev/v1beta1/Task,tekton.dev/v1beta1/TaskRun,template.openshift.io/v1,template.openshift.io/v1/BrokerTemplateInstance,template.openshift.io/v1/Template,template.openshift.io/v1/TemplateInstance,triggers.tekton.dev/v1alpha1,triggers.tekton.dev/v1alpha1/ClusterInterceptor,triggers.tekton.dev/v1alpha1/ClusterTriggerBinding,triggers.tekton.dev/v1alpha1/EventListener,triggers.tekton.dev/v1alpha1/Interceptor,triggers.tekton.dev/v1alpha1/Trigger,triggers.tekton.dev/v1alpha1/TriggerBinding,triggers.tekton.dev/v1alpha1/TriggerTemplate,triggers.tekton.dev/v1beta1,triggers.tekton.dev/v1beta1/ClusterTriggerBinding,triggers.tekton.dev/v1beta1/EventListener,triggers.tekton.dev/v1beta1/Trigger,triggers.tekton.dev/v1beta1/TriggerBinding,triggers.tekton.dev/v1beta1/TriggerTemplate,tuned.openshift.io/v1,tuned.openshift.io/v1/Profile,tuned.openshift.io/v1/Tuned,user.openshift.io/v1,user.openshift.io/v1/Group,user.openshift.io/v1/Identity,user.openshift.io/v1/User,v1,v1/ConfigMap,v1/Endpoints,v1/Event,v1/LimitRange,v1/Namespace,v1/Node,v1/PersistentVolume,v1/PersistentVolumeClaim,v1/Pod,v1/PodTemplate,v1/ReplicationController,v1/ResourceQuota,v1/Secret,v1/Service,v1/ServiceAccount,whereabouts.cni.cncf.io/v1alpha1,whereabouts.cni.cncf.io/v1alpha1/IPPool,whereabouts.cni.cncf.io/v1alpha1/OverlappingRangeIPReservation" duration=267.424671ms execID=c20d3
time="2023-11-03T13:38:46Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCustomToolWithEnv (6.90s)
=== RUN   TestCustomToolSyncAndDiffLocal
time="2023-11-03T13:38:46Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=f91ca
time="2023-11-03T13:38:46Z" level=debug msg="namespace \"argocd-e2e--test-custom-tool-with-env-malgp\" deleted\n" duration=270.391701ms execID=f91ca
time="2023-11-03T13:38:46Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=97a97
time="2023-11-03T13:38:47Z" level=debug msg="No resources found\n" duration=690.762002ms execID=97a97
time="2023-11-03T13:38:47Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=55192
time="2023-11-03T13:38:47Z" level=debug msg="No resources found\n" duration=195.66776ms execID=55192
time="2023-11-03T13:38:48Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:38:48Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTEyOCwibmJmIjoxNjk5MDE4NzI4LCJpYXQiOjE2OTkwMTg3MjgsImp0aSI6ImIxMzM5YTAyLTViYmEtNDBhNi1iMThhLTBiNzExNmQ1OWU2NiJ9.33uhwEI4dMdwMu_9xRxn0PID94wOgRhgq0KUj0oX82c --insecure" dir= execID=2c33f
time="2023-11-03T13:38:48Z" level=debug duration=114.316445ms execID=2c33f
time="2023-11-03T13:38:48Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=01275
time="2023-11-03T13:38:48Z" level=debug duration=2.062502ms execID=01275
time="2023-11-03T13:38:48Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=f047e
time="2023-11-03T13:38:48Z" level=debug duration=1.657749ms execID=f047e
time="2023-11-03T13:38:48Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=b05d0
time="2023-11-03T13:38:48Z" level=debug duration=1.445159ms execID=b05d0
time="2023-11-03T13:38:48Z" level=info msg="pkill -9 gpg-agent" dir= execID=b9309
time="2023-11-03T13:38:48Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=26d0d
time="2023-11-03T13:38:48Z" level=debug duration=10.132184ms execID=26d0d
time="2023-11-03T13:38:48Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=d3bd7
time="2023-11-03T13:38:48Z" level=debug duration=45.287373ms execID=d3bd7
time="2023-11-03T13:38:48Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=b183a
time="2023-11-03T13:38:48Z" level=debug duration=2.151586ms execID=b183a
time="2023-11-03T13:38:48Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=40876
time="2023-11-03T13:38:48Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.071719ms execID=40876
time="2023-11-03T13:38:48Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=0f63c
time="2023-11-03T13:38:48Z" level=debug duration=26.987627ms execID=0f63c
time="2023-11-03T13:38:48Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=3de43
time="2023-11-03T13:38:48Z" level=debug duration=21.600404ms execID=3de43
time="2023-11-03T13:38:48Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=610f7
time="2023-11-03T13:38:48Z" level=debug duration=2.160107ms execID=610f7
time="2023-11-03T13:38:48Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=56220
Handling connection for 9081
time="2023-11-03T13:38:48Z" level=debug duration=78.174981ms execID=56220
time="2023-11-03T13:38:48Z" level=info msg="kubectl create ns argocd-e2e--test-custom-tool-sync-and-diff-local-iohkp" dir= execID=bf11d
time="2023-11-03T13:38:48Z" level=debug msg="namespace/argocd-e2e--test-custom-tool-sync-and-diff-local-iohkp created\n" duration=158.649067ms execID=bf11d
time="2023-11-03T13:38:48Z" level=info msg="kubectl label ns argocd-e2e--test-custom-tool-sync-and-diff-local-iohkp e2e.argoproj.io=true" dir= execID=a1c5d
time="2023-11-03T13:38:49Z" level=debug msg="namespace/argocd-e2e--test-custom-tool-sync-and-diff-local-iohkp labeled\n" duration=228.782224ms execID=a1c5d
time="2023-11-03T13:38:49Z" level=info msg="clean state" duration=2.808173595s id=TestCustomToolSyncAndDiffLocal-iohkp name=TestCustomToolSyncAndDiffLocal password=password username=admin
time="2023-11-03T13:38:50Z" level=info msg="../../dist/argocd app create test-custom-tool-sync-and-diff-local --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --config-management-plugin test-custom-tool-sync-and-diff-local --dest-server https://kubernetes.default.svc --path guestbook --project default --config-management-plugin test-custom-tool-sync-and-diff-local --dest-namespace argocd-e2e--test-custom-tool-sync-and-diff-local-iohkp --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTEyOCwibmJmIjoxNjk5MDE4NzI4LCJpYXQiOjE2OTkwMTg3MjgsImp0aSI6ImIxMzM5YTAyLTViYmEtNDBhNi1iMThhLTBiNzExNmQ1OWU2NiJ9.33uhwEI4dMdwMu_9xRxn0PID94wOgRhgq0KUj0oX82c --insecure" dir= execID=78feb
time="2023-11-03T13:38:50Z" level=debug msg="application 'test-custom-tool-sync-and-diff-local' created\n" duration=220.529591ms execID=78feb
time="2023-11-03T13:38:50Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:38:50Z" level=info msg="../../dist/argocd app sync --local testdata/guestbook test-custom-tool-sync-and-diff-local --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTEyOCwibmJmIjoxNjk5MDE4NzI4LCJpYXQiOjE2OTkwMTg3MjgsImp0aSI6ImIxMzM5YTAyLTViYmEtNDBhNi1iMThhLTBiNzExNmQ1OWU2NiJ9.33uhwEI4dMdwMu_9xRxn0PID94wOgRhgq0KUj0oX82c --insecure" dir= execID=d35cd
time="2023-11-03T13:38:51Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                              NAME                    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:38:50+00:00          ConfigMap  argocd-e2e--test-custom-tool-sync-and-diff-local-iohkp  test-custom-tool-sync-and-diff-local  OutOfSync  Missing              \n\nName:               argocd-e2e/test-custom-tool-sync-and-diff-local\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-custom-tool-sync-and-diff-local-iohkp\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-custom-tool-sync-and-diff-local\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to \nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      \nPhase:              Succeeded\nStart:              2023-11-03 13:38:50 +0000 UTC\nFinished:           2023-11-03 13:38:50 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                               NAME                                  STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-custom-tool-sync-and-diff-local-iohkp  test-custom-tool-sync-and-diff-local  Synced                configmap/test-custom-tool-sync-and-diff-local created\n" duration=717.544647ms execID=d35cd
time="2023-11-03T13:38:51Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:38:51Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:38:51Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:38:51Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:38:52Z" level=info msg="../../dist/argocd app sync test-custom-tool-sync-and-diff-local --local testdata/guestbook --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTEyOCwibmJmIjoxNjk5MDE4NzI4LCJpYXQiOjE2OTkwMTg3MjgsImp0aSI6ImIxMzM5YTAyLTViYmEtNDBhNi1iMThhLTBiNzExNmQ1OWU2NiJ9.33uhwEI4dMdwMu_9xRxn0PID94wOgRhgq0KUj0oX82c --insecure" dir= execID=c6b13
time="2023-11-03T13:38:52Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                              NAME                    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:38:52+00:00          ConfigMap  argocd-e2e--test-custom-tool-sync-and-diff-local-iohkp  test-custom-tool-sync-and-diff-local    Synced                       \n2023-11-03T13:38:52+00:00          ConfigMap  argocd-e2e--test-custom-tool-sync-and-diff-local-iohkp  test-custom-tool-sync-and-diff-local    Synced                       configmap/test-custom-tool-sync-and-diff-local unchanged\n\nName:               argocd-e2e/test-custom-tool-sync-and-diff-local\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-custom-tool-sync-and-diff-local-iohkp\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-custom-tool-sync-and-diff-local\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to \nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      \nPhase:              Succeeded\nStart:              2023-11-03 13:38:52 +0000 UTC\nFinished:           2023-11-03 13:38:52 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                               NAME                                  STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-custom-tool-sync-and-diff-local-iohkp  test-custom-tool-sync-and-diff-local  Synced                configmap/test-custom-tool-sync-and-diff-local unchanged\n" duration=706.152133ms execID=c6b13
time="2023-11-03T13:38:52Z" level=info msg="../../dist/argocd app diff test-custom-tool-sync-and-diff-local --local testdata/guestbook --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTEyOCwibmJmIjoxNjk5MDE4NzI4LCJpYXQiOjE2OTkwMTg3MjgsImp0aSI6ImIxMzM5YTAyLTViYmEtNDBhNi1iMThhLTBiNzExNmQ1OWU2NiJ9.33uhwEI4dMdwMu_9xRxn0PID94wOgRhgq0KUj0oX82c --insecure" dir= execID=568c7
time="2023-11-03T13:38:52Z" level=debug duration=139.233515ms execID=568c7
time="2023-11-03T13:38:52Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCustomToolSyncAndDiffLocal (6.64s)
=== RUN   TestCMPDiscoverWithFileName
    fixture.go:901: 
--- SKIP: TestCMPDiscoverWithFileName (0.00s)
=== RUN   TestCMPDiscoverWithFindGlob
time="2023-11-03T13:38:52Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=9208f
time="2023-11-03T13:38:53Z" level=debug msg="namespace \"argocd-e2e--test-custom-tool-sync-and-diff-local-iohkp\" deleted\n" duration=213.926478ms execID=9208f
time="2023-11-03T13:38:53Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=a7bb4
time="2023-11-03T13:38:53Z" level=debug msg="No resources found\n" duration=522.49407ms execID=a7bb4
time="2023-11-03T13:38:53Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=3664f
time="2023-11-03T13:38:53Z" level=debug msg="No resources found\n" duration=280.682802ms execID=3664f
time="2023-11-03T13:38:54Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:38:54Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTEzNCwibmJmIjoxNjk5MDE4NzM0LCJpYXQiOjE2OTkwMTg3MzQsImp0aSI6IjkyMmM2MjQ0LTU5Y2MtNDZkNC1hZTlmLWI0Y2Q2ZDYwMWU5OCJ9.RAhZ9tyBWon_GptXCbyUaYUoxcwjKp2m7nm2t7Pm2V0 --insecure" dir= execID=cdaea
time="2023-11-03T13:38:54Z" level=debug duration=86.19051ms execID=cdaea
time="2023-11-03T13:38:54Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=10c2e
time="2023-11-03T13:38:54Z" level=debug duration=2.07154ms execID=10c2e
time="2023-11-03T13:38:54Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=d647b
time="2023-11-03T13:38:54Z" level=debug duration=1.533ms execID=d647b
time="2023-11-03T13:38:54Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=55e01
time="2023-11-03T13:38:54Z" level=debug duration=1.437003ms execID=55e01
time="2023-11-03T13:38:54Z" level=info msg="pkill -9 gpg-agent" dir= execID=759cb
time="2023-11-03T13:38:54Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=f8473
time="2023-11-03T13:38:54Z" level=debug duration=9.825108ms execID=f8473
time="2023-11-03T13:38:54Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=bd4a4
time="2023-11-03T13:38:54Z" level=debug duration=32.966047ms execID=bd4a4
time="2023-11-03T13:38:54Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=ee3e1
time="2023-11-03T13:38:54Z" level=debug duration=1.845945ms execID=ee3e1
time="2023-11-03T13:38:54Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=31608
time="2023-11-03T13:38:54Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.955135ms execID=31608
time="2023-11-03T13:38:54Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=9a862
time="2023-11-03T13:38:54Z" level=debug duration=40.988029ms execID=9a862
time="2023-11-03T13:38:54Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=b2469
time="2023-11-03T13:38:54Z" level=debug duration=23.348237ms execID=b2469
time="2023-11-03T13:38:54Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=8977c
time="2023-11-03T13:38:54Z" level=debug duration=2.21214ms execID=8977c
time="2023-11-03T13:38:54Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=bfcda
Handling connection for 9081
time="2023-11-03T13:38:55Z" level=debug duration=84.255654ms execID=bfcda
time="2023-11-03T13:38:55Z" level=info msg="kubectl create ns argocd-e2e--test-cmp-discover-with-find-glob-hzsrm" dir= execID=1b4ff
time="2023-11-03T13:38:55Z" level=debug msg="namespace/argocd-e2e--test-cmp-discover-with-find-glob-hzsrm created\n" duration=166.584196ms execID=1b4ff
time="2023-11-03T13:38:55Z" level=info msg="kubectl label ns argocd-e2e--test-cmp-discover-with-find-glob-hzsrm e2e.argoproj.io=true" dir= execID=b9dc9
time="2023-11-03T13:38:55Z" level=debug msg="namespace/argocd-e2e--test-cmp-discover-with-find-glob-hzsrm labeled\n" duration=299.863866ms execID=b9dc9
time="2023-11-03T13:38:55Z" level=info msg="clean state" duration=2.643143459s id=TestCMPDiscoverWithFindGlob-hzsrm name=TestCMPDiscoverWithFindGlob password=password username=admin
time="2023-11-03T13:38:55Z" level=info msg="../../dist/argocd --config-dir-path ./testdata/cmp-find-glob" dir= execID=9249c
time="2023-11-03T13:38:57Z" level=info msg="../../dist/argocd app create test-cmp-discover-with-find-glob --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-cmp-discover-with-find-glob-hzsrm --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTEzNCwibmJmIjoxNjk5MDE4NzM0LCJpYXQiOjE2OTkwMTg3MzQsImp0aSI6IjkyMmM2MjQ0LTU5Y2MtNDZkNC1hZTlmLWI0Y2Q2ZDYwMWU5OCJ9.RAhZ9tyBWon_GptXCbyUaYUoxcwjKp2m7nm2t7Pm2V0 --insecure" dir= execID=d00e7
time="2023-11-03T13:38:57Z" level=debug msg="application 'test-cmp-discover-with-find-glob' created\n" duration=257.122425ms execID=d00e7
time="2023-11-03T13:38:57Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:38:57Z" level=info msg="../../dist/argocd app sync test-cmp-discover-with-find-glob --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTEzNCwibmJmIjoxNjk5MDE4NzM0LCJpYXQiOjE2OTkwMTg3MzQsImp0aSI6IjkyMmM2MjQ0LTU5Y2MtNDZkNC1hZTlmLWI0Y2Q2ZDYwMWU5OCJ9.RAhZ9tyBWon_GptXCbyUaYUoxcwjKp2m7nm2t7Pm2V0 --insecure" dir= execID=3ad51
time="2023-11-03T13:38:58Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:38:57+00:00            Service  argocd-e2e--test-cmp-discover-with-find-glob-hzsrm          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:38:57+00:00   apps  Deployment  argocd-e2e--test-cmp-discover-with-find-glob-hzsrm          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:38:58+00:00            Service  argocd-e2e--test-cmp-discover-with-find-glob-hzsrm          guestbook-ui  OutOfSync  Missing              service/guestbook-ui created\n2023-11-03T13:38:58+00:00   apps  Deployment  argocd-e2e--test-cmp-discover-with-find-glob-hzsrm          guestbook-ui  OutOfSync  Missing              deployment.apps/guestbook-ui created\n2023-11-03T13:38:58+00:00            Service  argocd-e2e--test-cmp-discover-with-find-glob-hzsrm          guestbook-ui    Synced  Healthy              service/guestbook-ui created\n2023-11-03T13:38:58+00:00   apps  Deployment  argocd-e2e--test-cmp-discover-with-find-glob-hzsrm          guestbook-ui    Synced  Healthy              deployment.apps/guestbook-ui created\n\nName:               argocd-e2e/test-cmp-discover-with-find-glob\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-cmp-discover-with-find-glob-hzsrm\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-cmp-discover-with-find-glob\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (e803992)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      e8039925f74217fd89f63b789b8d2bb826cd708b\nPhase:              Succeeded\nStart:              2023-11-03 13:38:57 +0000 UTC\nFinished:           2023-11-03 13:38:58 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                           NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-cmp-discover-with-find-glob-hzsrm  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-cmp-discover-with-find-glob-hzsrm  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=852.508826ms execID=3ad51
time="2023-11-03T13:38:58Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:38:58Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:38:58Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:38:58Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:38:58Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCMPDiscoverWithFindGlob (5.78s)
=== RUN   TestCMPDiscoverWithPluginName
time="2023-11-03T13:38:58Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=4732d
time="2023-11-03T13:38:58Z" level=debug msg="namespace \"argocd-e2e--test-cmp-discover-with-find-glob-hzsrm\" deleted\n" duration=226.667194ms execID=4732d
time="2023-11-03T13:38:58Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=e019e
time="2023-11-03T13:38:59Z" level=debug msg="No resources found\n" duration=492.990175ms execID=e019e
time="2023-11-03T13:38:59Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=548e9
time="2023-11-03T13:38:59Z" level=debug msg="No resources found\n" duration=289.226939ms execID=548e9
time="2023-11-03T13:39:00Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:39:00Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTE0MCwibmJmIjoxNjk5MDE4NzQwLCJpYXQiOjE2OTkwMTg3NDAsImp0aSI6Ijg4NmUxMjRiLTdlYzEtNDljNS1iYWY4LWMzNmJhODI1ZGI0OSJ9.UGL0x5Vk85eG9mmIpKawhistJHRnADNQd7t6W-qhSG0 --insecure" dir= execID=4263b
time="2023-11-03T13:39:00Z" level=debug duration=68.459895ms execID=4263b
time="2023-11-03T13:39:00Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=97dd3
time="2023-11-03T13:39:00Z" level=debug duration=2.346912ms execID=97dd3
time="2023-11-03T13:39:00Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=91d09
time="2023-11-03T13:39:00Z" level=debug duration=1.741633ms execID=91d09
time="2023-11-03T13:39:00Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=c7b1c
time="2023-11-03T13:39:00Z" level=debug duration=1.572194ms execID=c7b1c
time="2023-11-03T13:39:00Z" level=info msg="pkill -9 gpg-agent" dir= execID=903f8
time="2023-11-03T13:39:00Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=afb3c
time="2023-11-03T13:39:00Z" level=debug duration=10.220325ms execID=afb3c
time="2023-11-03T13:39:00Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=df065
time="2023-11-03T13:39:00Z" level=debug duration=40.391994ms execID=df065
time="2023-11-03T13:39:00Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=30934
time="2023-11-03T13:39:00Z" level=debug duration=1.82723ms execID=30934
time="2023-11-03T13:39:00Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=d0776
time="2023-11-03T13:39:01Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=44.059435ms execID=d0776
time="2023-11-03T13:39:01Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=a5673
time="2023-11-03T13:39:01Z" level=debug duration=43.321429ms execID=a5673
time="2023-11-03T13:39:01Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=05a54
time="2023-11-03T13:39:01Z" level=debug duration=24.232626ms execID=05a54
time="2023-11-03T13:39:01Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=f9db8
time="2023-11-03T13:39:01Z" level=debug duration=2.44564ms execID=f9db8
time="2023-11-03T13:39:01Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=846b2
Handling connection for 9081
time="2023-11-03T13:39:01Z" level=debug duration=76.171925ms execID=846b2
time="2023-11-03T13:39:01Z" level=info msg="kubectl create ns argocd-e2e--test-cmp-discover-with-plugin-name-xawlm" dir= execID=b8703
time="2023-11-03T13:39:01Z" level=debug msg="namespace/argocd-e2e--test-cmp-discover-with-plugin-name-xawlm created\n" duration=150.075015ms execID=b8703
time="2023-11-03T13:39:01Z" level=info msg="kubectl label ns argocd-e2e--test-cmp-discover-with-plugin-name-xawlm e2e.argoproj.io=true" dir= execID=b46ab
time="2023-11-03T13:39:01Z" level=debug msg="namespace/argocd-e2e--test-cmp-discover-with-plugin-name-xawlm labeled\n" duration=323.926611ms execID=b46ab
time="2023-11-03T13:39:01Z" level=info msg="clean state" duration=2.991807685s id=TestCMPDiscoverWithPluginName-xawlm name=TestCMPDiscoverWithPluginName password=password username=admin
time="2023-11-03T13:39:01Z" level=info msg="../../dist/argocd --config-dir-path ./testdata/cmp-find-glob" dir= execID=d862b
time="2023-11-03T13:39:03Z" level=info msg="../../dist/argocd app create -f /tmp/822167377 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTE0MCwibmJmIjoxNjk5MDE4NzQwLCJpYXQiOjE2OTkwMTg3NDAsImp0aSI6Ijg4NmUxMjRiLTdlYzEtNDljNS1iYWY4LWMzNmJhODI1ZGI0OSJ9.UGL0x5Vk85eG9mmIpKawhistJHRnADNQd7t6W-qhSG0 --insecure" dir= execID=dc6ce
time="2023-11-03T13:39:03Z" level=debug duration=215.60665ms execID=dc6ce
time="2023-11-03T13:39:03Z" level=error msg="`../../dist/argocd app create -f /tmp/822167377 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTE0MCwibmJmIjoxNjk5MDE4NzQwLCJpYXQiOjE2OTkwMTg3NDAsImp0aSI6Ijg4NmUxMjRiLTdlYzEtNDljNS1iYWY4LWMzNmJhODI1ZGI0OSJ9.UGL0x5Vk85eG9mmIpKawhistJHRnADNQd7t6W-qhSG0 --insecure` failed exit status 20: time=\"2023-11-03T13:39:03Z\" level=fatal msg=\"rpc error: code = InvalidArgument desc = application spec for test-cmp-discover-with-plugin-name is invalid: InvalidSpecError: Unable to generate manifests in guestbook: rpc error: code = Unknown desc = plugin sidecar failed. couldn't find cmp-server plugin with name cmp-find-glob-v1.0 supporting the given repository\"" execID=dc6ce
    custom_tool_test.go:254: failed expectation: error
--- FAIL: TestCMPDiscoverWithPluginName (5.21s)
=== RUN   TestCMPDiscoverWithFindCommandWithEnv
    fixture.go:901: 
--- SKIP: TestCMPDiscoverWithFindCommandWithEnv (0.00s)
=== RUN   TestPruneResourceFromCMP
time="2023-11-03T13:39:03Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=028c8
time="2023-11-03T13:39:04Z" level=debug msg="namespace \"argocd-e2e--test-cmp-discover-with-plugin-name-xawlm\" deleted\n" duration=224.196722ms execID=028c8
time="2023-11-03T13:39:04Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=23d5f
time="2023-11-03T13:39:04Z" level=debug msg="No resources found\n" duration=389.401683ms execID=23d5f
time="2023-11-03T13:39:04Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=28938
time="2023-11-03T13:39:04Z" level=debug msg="No resources found\n" duration=241.512685ms execID=28938
time="2023-11-03T13:39:05Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:39:05Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTE0NSwibmJmIjoxNjk5MDE4NzQ1LCJpYXQiOjE2OTkwMTg3NDUsImp0aSI6IjMwNTE1M2Y1LWU3NWItNDQ4MS04M2YyLThkNjgzZTBjMDAzYSJ9.5o-u3tb085ZZ9Syz0zWVqtG_X4PRvBphrefTV5Cx-HQ --insecure" dir= execID=5ec55
time="2023-11-03T13:39:05Z" level=debug duration=95.961368ms execID=5ec55
time="2023-11-03T13:39:05Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=fb4fe
time="2023-11-03T13:39:05Z" level=debug duration=2.140568ms execID=fb4fe
time="2023-11-03T13:39:05Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=629dd
time="2023-11-03T13:39:05Z" level=debug duration=2.089544ms execID=629dd
time="2023-11-03T13:39:05Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=77fd1
time="2023-11-03T13:39:05Z" level=debug duration=1.73227ms execID=77fd1
time="2023-11-03T13:39:05Z" level=info msg="pkill -9 gpg-agent" dir= execID=f91ef
time="2023-11-03T13:39:05Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=566ea
time="2023-11-03T13:39:05Z" level=debug duration=10.365622ms execID=566ea
time="2023-11-03T13:39:05Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=d5f8c
time="2023-11-03T13:39:05Z" level=debug duration=34.298944ms execID=d5f8c
time="2023-11-03T13:39:05Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=ad4dc
time="2023-11-03T13:39:05Z" level=debug duration=1.924471ms execID=ad4dc
time="2023-11-03T13:39:05Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=23f0b
time="2023-11-03T13:39:05Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.469897ms execID=23f0b
time="2023-11-03T13:39:05Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=d68f1
time="2023-11-03T13:39:05Z" level=debug duration=31.896431ms execID=d68f1
time="2023-11-03T13:39:05Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=11a49
time="2023-11-03T13:39:05Z" level=debug duration=22.506835ms execID=11a49
time="2023-11-03T13:39:05Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=de0f6
time="2023-11-03T13:39:05Z" level=debug duration=2.212278ms execID=de0f6
time="2023-11-03T13:39:05Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=e6782
Handling connection for 9081
time="2023-11-03T13:39:05Z" level=debug duration=82.73848ms execID=e6782
time="2023-11-03T13:39:05Z" level=info msg="kubectl create ns argocd-e2e--test-prune-resource-from-cmp-okmmt" dir= execID=a4dad
time="2023-11-03T13:39:06Z" level=debug msg="namespace/argocd-e2e--test-prune-resource-from-cmp-okmmt created\n" duration=116.373155ms execID=a4dad
time="2023-11-03T13:39:06Z" level=info msg="kubectl label ns argocd-e2e--test-prune-resource-from-cmp-okmmt e2e.argoproj.io=true" dir= execID=2e0d7
time="2023-11-03T13:39:06Z" level=debug msg="namespace/argocd-e2e--test-prune-resource-from-cmp-okmmt labeled\n" duration=350.793928ms execID=2e0d7
time="2023-11-03T13:39:06Z" level=info msg="clean state" duration=2.55807899s id=TestPruneResourceFromCMP-okmmt name=TestPruneResourceFromCMP password=password username=admin
time="2023-11-03T13:39:06Z" level=info msg="../../dist/argocd --config-dir-path ./testdata/cmp-find-glob" dir= execID=17fad
time="2023-11-03T13:39:08Z" level=info msg="../../dist/argocd app create test-prune-resource-from-cmp --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-prune-resource-from-cmp-okmmt --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTE0NSwibmJmIjoxNjk5MDE4NzQ1LCJpYXQiOjE2OTkwMTg3NDUsImp0aSI6IjMwNTE1M2Y1LWU3NWItNDQ4MS04M2YyLThkNjgzZTBjMDAzYSJ9.5o-u3tb085ZZ9Syz0zWVqtG_X4PRvBphrefTV5Cx-HQ --insecure" dir= execID=91bc0
time="2023-11-03T13:39:08Z" level=debug msg="application 'test-prune-resource-from-cmp' created\n" duration=283.708435ms execID=91bc0
time="2023-11-03T13:39:08Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:39:08Z" level=info msg="../../dist/argocd app sync test-prune-resource-from-cmp --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTE0NSwibmJmIjoxNjk5MDE4NzQ1LCJpYXQiOjE2OTkwMTg3NDUsImp0aSI6IjMwNTE1M2Y1LWU3NWItNDQ4MS04M2YyLThkNjgzZTBjMDAzYSJ9.5o-u3tb085ZZ9Syz0zWVqtG_X4PRvBphrefTV5Cx-HQ --insecure" dir= execID=6bd30
time="2023-11-03T13:39:09Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:39:08+00:00            Service  argocd-e2e--test-prune-resource-from-cmp-okmmt          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:39:08+00:00   apps  Deployment  argocd-e2e--test-prune-resource-from-cmp-okmmt          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:39:09+00:00            Service  argocd-e2e--test-prune-resource-from-cmp-okmmt          guestbook-ui    Synced  Healthy              \n2023-11-03T13:39:09+00:00            Service  argocd-e2e--test-prune-resource-from-cmp-okmmt          guestbook-ui    Synced   Healthy              service/guestbook-ui created\n2023-11-03T13:39:09+00:00   apps  Deployment  argocd-e2e--test-prune-resource-from-cmp-okmmt          guestbook-ui  OutOfSync  Missing              deployment.apps/guestbook-ui created\n2023-11-03T13:39:09+00:00   apps  Deployment  argocd-e2e--test-prune-resource-from-cmp-okmmt          guestbook-ui    Synced  Healthy              deployment.apps/guestbook-ui created\n\nName:               argocd-e2e/test-prune-resource-from-cmp\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-prune-resource-from-cmp-okmmt\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-prune-resource-from-cmp\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (ba0754d)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      ba0754dde2a63daf02e795380431927d243e5dde\nPhase:              Succeeded\nStart:              2023-11-03 13:39:08 +0000 UTC\nFinished:           2023-11-03 13:39:09 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                       NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-prune-resource-from-cmp-okmmt  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-prune-resource-from-cmp-okmmt  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=1.034913117s execID=6bd30
time="2023-11-03T13:39:09Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:39:09Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:39:09Z" level=info msg="../../dist/argocd app delete test-prune-resource-from-cmp --cascade=true --yes --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTE0NSwibmJmIjoxNjk5MDE4NzQ1LCJpYXQiOjE2OTkwMTg3NDUsImp0aSI6IjMwNTE1M2Y1LWU3NWItNDQ4MS04M2YyLThkNjgzZTBjMDAzYSJ9.5o-u3tb085ZZ9Syz0zWVqtG_X4PRvBphrefTV5Cx-HQ --insecure" dir= execID=6f0cc
time="2023-11-03T13:39:09Z" level=debug duration=118.538107ms execID=6f0cc
time="2023-11-03T13:39:09Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:39:09Z" level=info msg="pending: app should not exist"
time="2023-11-03T13:39:12Z" level=info msg="expectation succeeded: app does not exist"
time="2023-11-03T13:39:12Z" level=info msg="kubectl -n argocd-e2e--test-prune-resource-from-cmp-okmmt get deployment guestbook-ui" dir= execID=78784
time="2023-11-03T13:39:13Z" level=debug duration=241.901858ms execID=78784
time="2023-11-03T13:39:13Z" level=error msg="`kubectl -n argocd-e2e--test-prune-resource-from-cmp-okmmt get deployment guestbook-ui` failed exit status 1: Error from server (NotFound): deployments.apps \"guestbook-ui\" not found" execID=78784
time="2023-11-03T13:39:13Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestPruneResourceFromCMP (9.26s)
=== RUN   TestCMPWithSymlinkPartialFiles
time="2023-11-03T13:39:13Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=b9c1c
time="2023-11-03T13:39:13Z" level=debug msg="namespace \"argocd-e2e--test-prune-resource-from-cmp-okmmt\" deleted\n" duration=257.066076ms execID=b9c1c
time="2023-11-03T13:39:13Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=ea26c
time="2023-11-03T13:39:13Z" level=debug msg="No resources found\n" duration=442.249655ms execID=ea26c
time="2023-11-03T13:39:13Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=d0621
time="2023-11-03T13:39:14Z" level=debug msg="No resources found\n" duration=191.152032ms execID=d0621
time="2023-11-03T13:39:14Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:39:14Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTE1NCwibmJmIjoxNjk5MDE4NzU0LCJpYXQiOjE2OTkwMTg3NTQsImp0aSI6IjBhZjk0MTk2LTRiZTctNDZkNC1iOWFiLWJjNDE1N2I3OTdhMyJ9.dOI_nk3-ehtoY37qChMdU0pWBZZtmX0uO8FnhJGWCOQ --insecure" dir= execID=b860d
time="2023-11-03T13:39:14Z" level=debug duration=93.065791ms execID=b860d
time="2023-11-03T13:39:14Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=4f6dc
time="2023-11-03T13:39:14Z" level=debug duration=2.124333ms execID=4f6dc
time="2023-11-03T13:39:14Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=de904
time="2023-11-03T13:39:14Z" level=debug duration=1.688714ms execID=de904
time="2023-11-03T13:39:14Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=6cc25
time="2023-11-03T13:39:14Z" level=debug duration=1.517965ms execID=6cc25
time="2023-11-03T13:39:14Z" level=info msg="pkill -9 gpg-agent" dir= execID=ba3ab
time="2023-11-03T13:39:14Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=d59e2
time="2023-11-03T13:39:14Z" level=debug duration=9.872891ms execID=d59e2
time="2023-11-03T13:39:14Z" level=info msg="cp -Rf testdata2 /tmp/argo-e2e/testdata.git" dir= execID=7ebb9
time="2023-11-03T13:39:14Z" level=debug duration=9.131098ms execID=7ebb9
time="2023-11-03T13:39:14Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=c8db1
time="2023-11-03T13:39:14Z" level=debug duration=1.580395ms execID=c8db1
time="2023-11-03T13:39:14Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=16b70
time="2023-11-03T13:39:14Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.851249ms execID=16b70
time="2023-11-03T13:39:14Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=391aa
time="2023-11-03T13:39:14Z" level=debug duration=3.807206ms execID=391aa
time="2023-11-03T13:39:14Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=c3cf0
time="2023-11-03T13:39:14Z" level=debug duration=7.054095ms execID=c3cf0
time="2023-11-03T13:39:14Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=6a6aa
time="2023-11-03T13:39:14Z" level=debug duration=1.974095ms execID=6a6aa
time="2023-11-03T13:39:14Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=4711f
Handling connection for 9081
time="2023-11-03T13:39:14Z" level=debug duration=52.611278ms execID=4711f
time="2023-11-03T13:39:14Z" level=info msg="kubectl create ns argocd-e2e--test-cmp-with-symlink-partial-files-dvsmp" dir= execID=d5d42
time="2023-11-03T13:39:15Z" level=debug msg="namespace/argocd-e2e--test-cmp-with-symlink-partial-files-dvsmp created\n" duration=179.473994ms execID=d5d42
time="2023-11-03T13:39:15Z" level=info msg="kubectl label ns argocd-e2e--test-cmp-with-symlink-partial-files-dvsmp e2e.argoproj.io=true" dir= execID=b7c06
time="2023-11-03T13:39:15Z" level=debug msg="namespace/argocd-e2e--test-cmp-with-symlink-partial-files-dvsmp labeled\n" duration=278.535384ms execID=b7c06
time="2023-11-03T13:39:15Z" level=info msg="clean state" duration=2.297919347s id=TestCMPWithSymlinkPartialFiles-dvsmp name=TestCMPWithSymlinkPartialFiles password=password username=admin
time="2023-11-03T13:39:15Z" level=info msg="../../dist/argocd --config-dir-path ./testdata2/cmp-symlink" dir= execID=d8238
time="2023-11-03T13:39:17Z" level=info msg="../../dist/argocd app create test-cmp-with-symlink-partial-files --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook-partial-symlink-files --project default --dest-namespace argocd-e2e--test-cmp-with-symlink-partial-files-dvsmp --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTE1NCwibmJmIjoxNjk5MDE4NzU0LCJpYXQiOjE2OTkwMTg3NTQsImp0aSI6IjBhZjk0MTk2LTRiZTctNDZkNC1iOWFiLWJjNDE1N2I3OTdhMyJ9.dOI_nk3-ehtoY37qChMdU0pWBZZtmX0uO8FnhJGWCOQ --insecure" dir= execID=99526
time="2023-11-03T13:39:17Z" level=debug duration=199.956559ms execID=99526
time="2023-11-03T13:39:17Z" level=error msg="`../../dist/argocd app create test-cmp-with-symlink-partial-files --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook-partial-symlink-files --project default --dest-namespace argocd-e2e--test-cmp-with-symlink-partial-files-dvsmp --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTE1NCwibmJmIjoxNjk5MDE4NzU0LCJpYXQiOjE2OTkwMTg3NTQsImp0aSI6IjBhZjk0MTk2LTRiZTctNDZkNC1iOWFiLWJjNDE1N2I3OTdhMyJ9.dOI_nk3-ehtoY37qChMdU0pWBZZtmX0uO8FnhJGWCOQ --insecure` failed exit status 20: time=\"2023-11-03T13:39:17Z\" level=fatal msg=\"rpc error: code = InvalidArgument desc = application spec for test-cmp-with-symlink-partial-files is invalid: InvalidSpecError: Unable to generate manifests in guestbook-partial-symlink-files: rpc error: code = Unknown desc = `kustomize build .guestbook-partial-symlink-files` failed exit status 1: Error: accumulating resources: accumulation err='accumulating resources from './guestbook-ui-deployment.yaml': security; file '.guestbook-partial-symlink-files/guestbook-ui-deployment.yaml' is not in or below '.guestbook-partial-symlink-files'': must build at directory: '.guestbook-partial-symlink-files/guestbook-ui-deployment.yaml': file is not directory\"" execID=99526
    actions.go:209: failed expectation: error
--- FAIL: TestCMPWithSymlinkPartialFiles (4.50s)
=== RUN   TestCMPWithSymlinkFiles
time="2023-11-03T13:39:17Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=f5507
time="2023-11-03T13:39:17Z" level=debug msg="namespace \"argocd-e2e--test-cmp-with-symlink-partial-files-dvsmp\" deleted\n" duration=185.142021ms execID=f5507
time="2023-11-03T13:39:17Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=1be9e
time="2023-11-03T13:39:18Z" level=debug msg="No resources found\n" duration=542.115746ms execID=1be9e
time="2023-11-03T13:39:18Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=ddd81
time="2023-11-03T13:39:18Z" level=debug msg="No resources found\n" duration=257.957151ms execID=ddd81
time="2023-11-03T13:39:19Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:39:19Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTE1OSwibmJmIjoxNjk5MDE4NzU5LCJpYXQiOjE2OTkwMTg3NTksImp0aSI6Ijg5ODQyMTQyLTNjMGQtNDM5ZC05MzU4LWY1YjdiZDg3YThjNSJ9.x-KBv2pHZCG53etzlA6Pg3QpuleKaeu8PU49e_HU9bs --insecure" dir= execID=087ce
time="2023-11-03T13:39:19Z" level=debug duration=111.182192ms execID=087ce
time="2023-11-03T13:39:19Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=dd471
time="2023-11-03T13:39:19Z" level=debug duration=2.073852ms execID=dd471
time="2023-11-03T13:39:19Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=b7b18
time="2023-11-03T13:39:19Z" level=debug duration=1.552772ms execID=b7b18
time="2023-11-03T13:39:19Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=80b13
time="2023-11-03T13:39:19Z" level=debug duration=1.570321ms execID=80b13
time="2023-11-03T13:39:19Z" level=info msg="pkill -9 gpg-agent" dir= execID=2b7df
time="2023-11-03T13:39:19Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=92372
time="2023-11-03T13:39:19Z" level=debug duration=10.354876ms execID=92372
time="2023-11-03T13:39:19Z" level=info msg="cp -Rf testdata2 /tmp/argo-e2e/testdata.git" dir= execID=dd280
time="2023-11-03T13:39:19Z" level=debug duration=3.50176ms execID=dd280
time="2023-11-03T13:39:19Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=5829a
time="2023-11-03T13:39:19Z" level=debug duration=1.711062ms execID=5829a
time="2023-11-03T13:39:19Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=d7691
time="2023-11-03T13:39:19Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.281669ms execID=d7691
time="2023-11-03T13:39:19Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=c94fe
time="2023-11-03T13:39:19Z" level=debug duration=5.002025ms execID=c94fe
time="2023-11-03T13:39:19Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=8670e
time="2023-11-03T13:39:19Z" level=debug duration=6.481422ms execID=8670e
time="2023-11-03T13:39:19Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=d05fe
time="2023-11-03T13:39:19Z" level=debug duration=2.116682ms execID=d05fe
time="2023-11-03T13:39:19Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=54a13
Handling connection for 9081
time="2023-11-03T13:39:20Z" level=debug duration=67.301132ms execID=54a13
time="2023-11-03T13:39:20Z" level=info msg="kubectl create ns argocd-e2e--test-cmp-with-symlink-files-oghhj" dir= execID=c9067
time="2023-11-03T13:39:20Z" level=debug msg="namespace/argocd-e2e--test-cmp-with-symlink-files-oghhj created\n" duration=116.559ms execID=c9067
time="2023-11-03T13:39:20Z" level=info msg="kubectl label ns argocd-e2e--test-cmp-with-symlink-files-oghhj e2e.argoproj.io=true" dir= execID=0c2ce
time="2023-11-03T13:39:20Z" level=debug msg="namespace/argocd-e2e--test-cmp-with-symlink-files-oghhj labeled\n" duration=260.734173ms execID=0c2ce
time="2023-11-03T13:39:20Z" level=info msg="clean state" duration=2.798301513s id=TestCMPWithSymlinkFiles-oghhj name=TestCMPWithSymlinkFiles password=password username=admin
time="2023-11-03T13:39:20Z" level=info msg="../../dist/argocd --config-dir-path ./testdata2/cmp-symlink" dir= execID=b4ebf
time="2023-11-03T13:39:22Z" level=info msg="../../dist/argocd app create test-cmp-with-symlink-files --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook-symlink-files --project default --dest-namespace argocd-e2e--test-cmp-with-symlink-files-oghhj --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTE1OSwibmJmIjoxNjk5MDE4NzU5LCJpYXQiOjE2OTkwMTg3NTksImp0aSI6Ijg5ODQyMTQyLTNjMGQtNDM5ZC05MzU4LWY1YjdiZDg3YThjNSJ9.x-KBv2pHZCG53etzlA6Pg3QpuleKaeu8PU49e_HU9bs --insecure" dir= execID=e59f0
time="2023-11-03T13:39:22Z" level=debug duration=204.374109ms execID=e59f0
time="2023-11-03T13:39:22Z" level=error msg="`../../dist/argocd app create test-cmp-with-symlink-files --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook-symlink-files --project default --dest-namespace argocd-e2e--test-cmp-with-symlink-files-oghhj --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTE1OSwibmJmIjoxNjk5MDE4NzU5LCJpYXQiOjE2OTkwMTg3NTksImp0aSI6Ijg5ODQyMTQyLTNjMGQtNDM5ZC05MzU4LWY1YjdiZDg3YThjNSJ9.x-KBv2pHZCG53etzlA6Pg3QpuleKaeu8PU49e_HU9bs --insecure` failed exit status 20: time=\"2023-11-03T13:39:22Z\" level=fatal msg=\"rpc error: code = InvalidArgument desc = application spec for test-cmp-with-symlink-files is invalid: InvalidSpecError: Unable to generate manifests in guestbook-symlink-files: rpc error: code = Unknown desc = `kustomize build .guestbook-symlink-files` failed exit status 1: Error: unable to find one of 'kustomization.yaml', 'kustomization.yml' or 'Kustomization' in directory '.guestbook-symlink-files'\"" execID=e59f0
    actions.go:209: failed expectation: error
--- FAIL: TestCMPWithSymlinkFiles (5.01s)
=== RUN   TestCMPWithSymlinkFolder
time="2023-11-03T13:39:22Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=3b528
time="2023-11-03T13:39:22Z" level=debug msg="namespace \"argocd-e2e--test-cmp-with-symlink-files-oghhj\" deleted\n" duration=252.684969ms execID=3b528
time="2023-11-03T13:39:22Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=30444
time="2023-11-03T13:39:23Z" level=debug msg="No resources found\n" duration=432.081897ms execID=30444
time="2023-11-03T13:39:23Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=2f8cf
time="2023-11-03T13:39:23Z" level=debug msg="No resources found\n" duration=372.325591ms execID=2f8cf
time="2023-11-03T13:39:24Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:39:24Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTE2NCwibmJmIjoxNjk5MDE4NzY0LCJpYXQiOjE2OTkwMTg3NjQsImp0aSI6ImZmYWM5M2YyLWFhYzEtNDYzYy04MjNmLWQ5Y2ViMzUyMmQwZSJ9.wNEIOsDik0eEUbap2CA1sWBaUm1P9SLX9nrL4MZhS_A --insecure" dir= execID=83c24
time="2023-11-03T13:39:24Z" level=debug duration=67.644013ms execID=83c24
time="2023-11-03T13:39:24Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=11658
time="2023-11-03T13:39:24Z" level=debug duration=2.060121ms execID=11658
time="2023-11-03T13:39:24Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=079ed
time="2023-11-03T13:39:24Z" level=debug duration=1.528318ms execID=079ed
time="2023-11-03T13:39:24Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=16555
time="2023-11-03T13:39:24Z" level=debug duration=1.495754ms execID=16555
time="2023-11-03T13:39:24Z" level=info msg="pkill -9 gpg-agent" dir= execID=29cb7
time="2023-11-03T13:39:24Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=030a7
time="2023-11-03T13:39:24Z" level=debug duration=9.9901ms execID=030a7
time="2023-11-03T13:39:24Z" level=info msg="cp -Rf testdata2 /tmp/argo-e2e/testdata.git" dir= execID=82530
time="2023-11-03T13:39:24Z" level=debug duration=3.398077ms execID=82530
time="2023-11-03T13:39:24Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=49809
time="2023-11-03T13:39:24Z" level=debug duration=1.446137ms execID=49809
time="2023-11-03T13:39:24Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=47ec0
time="2023-11-03T13:39:24Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.853341ms execID=47ec0
time="2023-11-03T13:39:24Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=2bf2a
time="2023-11-03T13:39:24Z" level=debug duration=3.924097ms execID=2bf2a
time="2023-11-03T13:39:24Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=d84e1
time="2023-11-03T13:39:24Z" level=debug duration=6.493613ms execID=d84e1
time="2023-11-03T13:39:24Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=97ce2
time="2023-11-03T13:39:24Z" level=debug duration=2.107729ms execID=97ce2
time="2023-11-03T13:39:24Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=60dfb
Handling connection for 9081
time="2023-11-03T13:39:24Z" level=debug duration=66.699518ms execID=60dfb
time="2023-11-03T13:39:24Z" level=info msg="kubectl create ns argocd-e2e--test-cmp-with-symlink-folder-fcotw" dir= execID=80dbb
time="2023-11-03T13:39:24Z" level=debug msg="namespace/argocd-e2e--test-cmp-with-symlink-folder-fcotw created\n" duration=122.276027ms execID=80dbb
time="2023-11-03T13:39:24Z" level=info msg="kubectl label ns argocd-e2e--test-cmp-with-symlink-folder-fcotw e2e.argoproj.io=true" dir= execID=ec191
time="2023-11-03T13:39:25Z" level=debug msg="namespace/argocd-e2e--test-cmp-with-symlink-folder-fcotw labeled\n" duration=287.543906ms execID=ec191
time="2023-11-03T13:39:25Z" level=info msg="clean state" duration=2.423530079s id=TestCMPWithSymlinkFolder-fcotw name=TestCMPWithSymlinkFolder password=password username=admin
time="2023-11-03T13:39:25Z" level=info msg="../../dist/argocd --config-dir-path ./testdata2/cmp-symlink" dir= execID=63d51
time="2023-11-03T13:39:27Z" level=info msg="../../dist/argocd app create test-cmp-with-symlink-folder --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook-symlink-folder --project default --dest-namespace argocd-e2e--test-cmp-with-symlink-folder-fcotw --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTE2NCwibmJmIjoxNjk5MDE4NzY0LCJpYXQiOjE2OTkwMTg3NjQsImp0aSI6ImZmYWM5M2YyLWFhYzEtNDYzYy04MjNmLWQ5Y2ViMzUyMmQwZSJ9.wNEIOsDik0eEUbap2CA1sWBaUm1P9SLX9nrL4MZhS_A --insecure" dir= execID=f240b
time="2023-11-03T13:39:27Z" level=debug msg="application 'test-cmp-with-symlink-folder' created\n" duration=207.728059ms execID=f240b
time="2023-11-03T13:39:27Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:39:27Z" level=info msg="../../dist/argocd app sync test-cmp-with-symlink-folder --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTE2NCwibmJmIjoxNjk5MDE4NzY0LCJpYXQiOjE2OTkwMTg3NjQsImp0aSI6ImZmYWM5M2YyLWFhYzEtNDYzYy04MjNmLWQ5Y2ViMzUyMmQwZSJ9.wNEIOsDik0eEUbap2CA1sWBaUm1P9SLX9nrL4MZhS_A --insecure" dir= execID=a55dc
time="2023-11-03T13:39:27Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n\nName:               argocd-e2e/test-cmp-with-symlink-folder\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-cmp-with-symlink-folder-fcotw\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-cmp-with-symlink-folder\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook-symlink-folder\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (4c2fccb)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      4c2fccb947cc7adb2ac47ef04ce36c1e51ef0a3f\nPhase:              Succeeded\nStart:              2023-11-03 13:39:27 +0000 UTC\nFinished:           2023-11-03 13:39:27 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (no more tasks)\n" duration=234.576051ms execID=a55dc
time="2023-11-03T13:39:27Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:39:27Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:39:27Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:39:27Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:39:27Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCMPWithSymlinkFolder (4.89s)
=== RUN   TestDeclarativeHappyApp
time="2023-11-03T13:39:27Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=0b89b
time="2023-11-03T13:39:27Z" level=debug msg="namespace \"argocd-e2e--test-cmp-with-symlink-folder-fcotw\" deleted\n" duration=172.568722ms execID=0b89b
time="2023-11-03T13:39:27Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=3e9a3
time="2023-11-03T13:39:28Z" level=debug msg="No resources found\n" duration=371.282602ms execID=3e9a3
time="2023-11-03T13:39:28Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=5df1e
time="2023-11-03T13:39:28Z" level=debug msg="No resources found\n" duration=223.210421ms execID=5df1e
time="2023-11-03T13:39:29Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:39:29Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTE2OSwibmJmIjoxNjk5MDE4NzY5LCJpYXQiOjE2OTkwMTg3NjksImp0aSI6Ijk0YTc4N2FlLTg4MGMtNDg2YS04OWQzLWE1NzhiYzA0ZTM4NiJ9.RfpKV2TKz0LLlmnzUEENGrFDIfDc77CPaoCZ8xn8lU8 --insecure" dir= execID=3b37f
time="2023-11-03T13:39:29Z" level=debug duration=88.240552ms execID=3b37f
time="2023-11-03T13:39:29Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=d7050
time="2023-11-03T13:39:29Z" level=debug duration=2.277431ms execID=d7050
time="2023-11-03T13:39:29Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=56dc9
time="2023-11-03T13:39:29Z" level=debug duration=1.63816ms execID=56dc9
time="2023-11-03T13:39:29Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=bfaa8
time="2023-11-03T13:39:29Z" level=debug duration=1.43216ms execID=bfaa8
time="2023-11-03T13:39:29Z" level=info msg="pkill -9 gpg-agent" dir= execID=53e49
time="2023-11-03T13:39:29Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=c9d5b
time="2023-11-03T13:39:29Z" level=debug duration=11.315832ms execID=c9d5b
time="2023-11-03T13:39:29Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=4d716
time="2023-11-03T13:39:29Z" level=debug duration=34.651081ms execID=4d716
time="2023-11-03T13:39:29Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=50605
time="2023-11-03T13:39:29Z" level=debug duration=26.959111ms execID=50605
time="2023-11-03T13:39:29Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=81ac6
time="2023-11-03T13:39:29Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=5.095986ms execID=81ac6
time="2023-11-03T13:39:29Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=e3820
time="2023-11-03T13:39:29Z" level=debug duration=30.042697ms execID=e3820
time="2023-11-03T13:39:29Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=3eed6
time="2023-11-03T13:39:29Z" level=debug duration=22.679303ms execID=3eed6
time="2023-11-03T13:39:29Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=ac4b9
time="2023-11-03T13:39:29Z" level=debug duration=2.608995ms execID=ac4b9
time="2023-11-03T13:39:29Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=a84fb
Handling connection for 9081
time="2023-11-03T13:39:29Z" level=debug duration=80.158885ms execID=a84fb
time="2023-11-03T13:39:29Z" level=info msg="kubectl create ns argocd-e2e--test-declarative-happy-app-asmpx" dir= execID=26fbf
time="2023-11-03T13:39:29Z" level=debug msg="namespace/argocd-e2e--test-declarative-happy-app-asmpx created\n" duration=160.371018ms execID=26fbf
time="2023-11-03T13:39:29Z" level=info msg="kubectl label ns argocd-e2e--test-declarative-happy-app-asmpx e2e.argoproj.io=true" dir= execID=9c002
time="2023-11-03T13:39:30Z" level=debug msg="namespace/argocd-e2e--test-declarative-happy-app-asmpx labeled\n" duration=301.282981ms execID=9c002
time="2023-11-03T13:39:30Z" level=info msg="clean state" duration=2.504834368s id=TestDeclarativeHappyApp-asmpx name=TestDeclarativeHappyApp password=password username=admin
time="2023-11-03T13:39:31Z" level=info msg="kubectl -n argocd-e2e apply -f /tmp/1686069131" dir= execID=3da1e
time="2023-11-03T13:39:32Z" level=debug msg="application.argoproj.io/test-declarative-happy-app created\n" duration=1.399472959s execID=3da1e
time="2023-11-03T13:39:32Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:39:32Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:39:32Z" level=info msg="pending: health to should Missing, is "
time="2023-11-03T13:39:35Z" level=info msg="expectation succeeded: health to should Missing, is Missing"
time="2023-11-03T13:39:35Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:39:35Z" level=info msg="../../dist/argocd app sync test-declarative-happy-app --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTE2OSwibmJmIjoxNjk5MDE4NzY5LCJpYXQiOjE2OTkwMTg3NjksImp0aSI6Ijk0YTc4N2FlLTg4MGMtNDg2YS04OWQzLWE1NzhiYzA0ZTM4NiJ9.RfpKV2TKz0LLlmnzUEENGrFDIfDc77CPaoCZ8xn8lU8 --insecure" dir= execID=4e857
time="2023-11-03T13:39:36Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                    NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:39:35+00:00            Service  argocd-e2e--test-declarative-happy-app-asmpx          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:39:35+00:00   apps  Deployment  argocd-e2e--test-declarative-happy-app-asmpx          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:39:36+00:00            Service  argocd-e2e--test-declarative-happy-app-asmpx          guestbook-ui    Synced  Healthy              \n2023-11-03T13:39:36+00:00   apps  Deployment  argocd-e2e--test-declarative-happy-app-asmpx          guestbook-ui    Synced  Progressing              \n2023-11-03T13:39:36+00:00            Service  argocd-e2e--test-declarative-happy-app-asmpx          guestbook-ui    Synced  Healthy                  service/guestbook-ui created\n2023-11-03T13:39:36+00:00   apps  Deployment  argocd-e2e--test-declarative-happy-app-asmpx          guestbook-ui    Synced  Progressing              deployment.apps/guestbook-ui created\n2023-11-03T13:39:36+00:00   apps  Deployment  argocd-e2e--test-declarative-happy-app-asmpx          guestbook-ui    Synced  Healthy              deployment.apps/guestbook-ui created\n\nName:               argocd-e2e/test-declarative-happy-app\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-declarative-happy-app-asmpx\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-declarative-happy-app\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             HEAD\nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to HEAD (906023b)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      906023b02cc76f40c3efef8d1f6790d92b4e06f9\nPhase:              Succeeded\nStart:              2023-11-03 13:39:35 +0000 UTC\nFinished:           2023-11-03 13:39:36 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                     NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-declarative-happy-app-asmpx  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-declarative-happy-app-asmpx  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=931.848201ms execID=4e857
time="2023-11-03T13:39:36Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:39:36Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:39:36Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:39:36Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:39:36Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestDeclarativeHappyApp (8.87s)
=== RUN   TestDeclarativeInvalidPath
time="2023-11-03T13:39:36Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=59848
time="2023-11-03T13:39:36Z" level=debug msg="namespace \"argocd-e2e--test-declarative-happy-app-asmpx\" deleted\n" duration=212.826885ms execID=59848
time="2023-11-03T13:39:36Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=a935c
time="2023-11-03T13:39:37Z" level=debug msg="No resources found\n" duration=442.664628ms execID=a935c
time="2023-11-03T13:39:37Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=46a1b
time="2023-11-03T13:39:37Z" level=debug msg="No resources found\n" duration=251.883565ms execID=46a1b
time="2023-11-03T13:39:37Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:39:37Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTE3NywibmJmIjoxNjk5MDE4Nzc3LCJpYXQiOjE2OTkwMTg3NzcsImp0aSI6IjQ2YWJjY2U2LWE5ZjctNDY2My04YmYzLTgwZTE1MmRiMTg0YSJ9.Zj1z_Qmnd-PUNoDYG7InTJhi2DFD2jyhYqPy6sgBx-c --insecure" dir= execID=6d1a1
time="2023-11-03T13:39:38Z" level=debug duration=74.67037ms execID=6d1a1
time="2023-11-03T13:39:38Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=105b3
time="2023-11-03T13:39:38Z" level=debug duration=2.319684ms execID=105b3
time="2023-11-03T13:39:38Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=41d67
time="2023-11-03T13:39:38Z" level=debug duration=3.622244ms execID=41d67
time="2023-11-03T13:39:38Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=bd234
time="2023-11-03T13:39:38Z" level=debug duration=2.164027ms execID=bd234
time="2023-11-03T13:39:38Z" level=info msg="pkill -9 gpg-agent" dir= execID=8ad8b
time="2023-11-03T13:39:38Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=31af0
time="2023-11-03T13:39:38Z" level=debug duration=98.132504ms execID=31af0
time="2023-11-03T13:39:38Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=257a9
time="2023-11-03T13:39:38Z" level=debug duration=217.788884ms execID=257a9
time="2023-11-03T13:39:38Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=7b453
time="2023-11-03T13:39:38Z" level=debug duration=1.856062ms execID=7b453
time="2023-11-03T13:39:38Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=b3bb2
time="2023-11-03T13:39:38Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.071097ms execID=b3bb2
time="2023-11-03T13:39:38Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=afed6
time="2023-11-03T13:39:38Z" level=debug duration=28.402754ms execID=afed6
time="2023-11-03T13:39:38Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=5b627
time="2023-11-03T13:39:38Z" level=debug duration=22.444893ms execID=5b627
time="2023-11-03T13:39:38Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=1a510
time="2023-11-03T13:39:38Z" level=debug duration=2.277078ms execID=1a510
time="2023-11-03T13:39:38Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=8370e
Handling connection for 9081
time="2023-11-03T13:39:38Z" level=debug duration=76.762267ms execID=8370e
time="2023-11-03T13:39:38Z" level=info msg="kubectl create ns argocd-e2e--test-declarative-invalid-path-xdttv" dir= execID=0653f
time="2023-11-03T13:39:38Z" level=debug msg="namespace/argocd-e2e--test-declarative-invalid-path-xdttv created\n" duration=172.378566ms execID=0653f
time="2023-11-03T13:39:38Z" level=info msg="kubectl label ns argocd-e2e--test-declarative-invalid-path-xdttv e2e.argoproj.io=true" dir= execID=0197e
time="2023-11-03T13:39:39Z" level=debug msg="namespace/argocd-e2e--test-declarative-invalid-path-xdttv labeled\n" duration=291.690749ms execID=0197e
time="2023-11-03T13:39:39Z" level=info msg="clean state" duration=2.859738721s id=TestDeclarativeInvalidPath-xdttv name=TestDeclarativeInvalidPath password=password username=admin
time="2023-11-03T13:39:40Z" level=info msg="kubectl -n argocd-e2e apply -f /tmp/2577219255" dir= execID=15178
time="2023-11-03T13:39:41Z" level=debug msg="application.argoproj.io/test-declarative-invalid-path created\n" duration=977.376723ms execID=15178
time="2023-11-03T13:39:41Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:39:41Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:39:41Z" level=info msg="pending: health to should Healthy, is "
time="2023-11-03T13:39:44Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:39:44Z" level=info msg="expectation succeeded: sync status to be Unknown, is Unknown"
time="2023-11-03T13:39:44Z" level=info msg="expectation succeeded: condition {ComparisonError garbage: app path does not exist} in [{ComparisonError rpc error: code = Unknown desc = garbage: app path does not exist 2023-11-03 13:39:41 +0000 UTC}]"
time="2023-11-03T13:39:44Z" level=info msg="../../dist/argocd app delete test-declarative-invalid-path --cascade=false --yes --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTE3NywibmJmIjoxNjk5MDE4Nzc3LCJpYXQiOjE2OTkwMTg3NzcsImp0aSI6IjQ2YWJjY2U2LWE5ZjctNDY2My04YmYzLTgwZTE1MmRiMTg0YSJ9.Zj1z_Qmnd-PUNoDYG7InTJhi2DFD2jyhYqPy6sgBx-c --insecure" dir= execID=d1934
time="2023-11-03T13:39:44Z" level=debug duration=75.718284ms execID=d1934
time="2023-11-03T13:39:44Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:39:44Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:39:44Z" level=info msg="expectation succeeded: app does not exist"
time="2023-11-03T13:39:44Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestDeclarativeInvalidPath (7.94s)
=== RUN   TestDeclarativeInvalidProject
time="2023-11-03T13:39:44Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=275a7
time="2023-11-03T13:39:44Z" level=debug msg="namespace \"argocd-e2e--test-declarative-invalid-path-xdttv\" deleted\n" duration=260.871211ms execID=275a7
time="2023-11-03T13:39:44Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=3d66d
time="2023-11-03T13:39:45Z" level=debug msg="No resources found\n" duration=431.860454ms execID=3d66d
time="2023-11-03T13:39:45Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=a12c1
time="2023-11-03T13:39:45Z" level=debug msg="No resources found\n" duration=265.009259ms execID=a12c1
time="2023-11-03T13:39:46Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:39:46Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTE4NiwibmJmIjoxNjk5MDE4Nzg2LCJpYXQiOjE2OTkwMTg3ODYsImp0aSI6ImM5NDQ1ZTRmLWNjZTYtNDYwYS1hN2M5LThlZTZmNDM1MWJiYiJ9.8WCn0b8N_77HMsJm-e7pZEy1AP0hCviT3N3TtqwFw2s --insecure" dir= execID=d698b
time="2023-11-03T13:39:46Z" level=debug duration=105.785595ms execID=d698b
time="2023-11-03T13:39:46Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=7933c
time="2023-11-03T13:39:46Z" level=debug duration=2.062384ms execID=7933c
time="2023-11-03T13:39:46Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=3bd46
time="2023-11-03T13:39:46Z" level=debug duration=1.625884ms execID=3bd46
time="2023-11-03T13:39:46Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=33ca3
time="2023-11-03T13:39:46Z" level=debug duration=1.483903ms execID=33ca3
time="2023-11-03T13:39:46Z" level=info msg="pkill -9 gpg-agent" dir= execID=8a5eb
time="2023-11-03T13:39:46Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=309b3
time="2023-11-03T13:39:46Z" level=debug duration=10.515111ms execID=309b3
time="2023-11-03T13:39:46Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=dc2ab
time="2023-11-03T13:39:46Z" level=debug duration=34.486332ms execID=dc2ab
time="2023-11-03T13:39:46Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=100eb
time="2023-11-03T13:39:46Z" level=debug duration=2.047313ms execID=100eb
time="2023-11-03T13:39:46Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=f0b78
time="2023-11-03T13:39:46Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.85655ms execID=f0b78
time="2023-11-03T13:39:46Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=79c23
time="2023-11-03T13:39:46Z" level=debug duration=30.626189ms execID=79c23
time="2023-11-03T13:39:46Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=38055
time="2023-11-03T13:39:46Z" level=debug duration=178.998331ms execID=38055
time="2023-11-03T13:39:46Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=830ac
time="2023-11-03T13:39:46Z" level=debug duration=5.027604ms execID=830ac
time="2023-11-03T13:39:46Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=75549
Handling connection for 9081
time="2023-11-03T13:39:46Z" level=debug duration=96.223264ms execID=75549
time="2023-11-03T13:39:46Z" level=info msg="kubectl create ns argocd-e2e--test-declarative-invalid-project-smbqe" dir= execID=67f3b
time="2023-11-03T13:39:46Z" level=debug msg="namespace/argocd-e2e--test-declarative-invalid-project-smbqe created\n" duration=138.249972ms execID=67f3b
time="2023-11-03T13:39:46Z" level=info msg="kubectl label ns argocd-e2e--test-declarative-invalid-project-smbqe e2e.argoproj.io=true" dir= execID=61c5b
time="2023-11-03T13:39:47Z" level=debug msg="namespace/argocd-e2e--test-declarative-invalid-project-smbqe labeled\n" duration=259.867557ms execID=61c5b
time="2023-11-03T13:39:47Z" level=info msg="clean state" duration=2.796368587s id=TestDeclarativeInvalidProject-smbqe name=TestDeclarativeInvalidProject password=password username=admin
time="2023-11-03T13:39:48Z" level=info msg="kubectl -n argocd-e2e apply -f /tmp/3212456289" dir= execID=0271c
time="2023-11-03T13:39:49Z" level=debug msg="application.argoproj.io/test-declarative-invalid-project created\n" duration=1.096895604s execID=0271c
time="2023-11-03T13:39:49Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:39:49Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:39:49Z" level=info msg="expectation succeeded: health to should Unknown, is Unknown"
time="2023-11-03T13:39:49Z" level=info msg="expectation succeeded: sync status to be Unknown, is Unknown"
time="2023-11-03T13:39:49Z" level=info msg="expectation succeeded: condition {InvalidSpecError Application referencing project garbage which does not exist} in [{InvalidSpecError Application referencing project garbage which does not exist 2023-11-03 13:39:49 +0000 UTC}]"
time="2023-11-03T13:39:49Z" level=info msg="../../dist/argocd app delete test-declarative-invalid-project --cascade=false --yes --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTE4NiwibmJmIjoxNjk5MDE4Nzg2LCJpYXQiOjE2OTkwMTg3ODYsImp0aSI6ImM5NDQ1ZTRmLWNjZTYtNDYwYS1hN2M5LThlZTZmNDM1MWJiYiJ9.8WCn0b8N_77HMsJm-e7pZEy1AP0hCviT3N3TtqwFw2s --insecure" dir= execID=758ff
time="2023-11-03T13:39:49Z" level=debug duration=128.946807ms execID=758ff
time="2023-11-03T13:39:49Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:39:49Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:39:49Z" level=info msg="expectation succeeded: app does not exist"
time="2023-11-03T13:39:49Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestDeclarativeInvalidProject (5.04s)
=== RUN   TestDeclarativeInvalidRepoURL
time="2023-11-03T13:39:49Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=ab8be
time="2023-11-03T13:39:49Z" level=debug msg="namespace \"argocd-e2e--test-declarative-invalid-project-smbqe\" deleted\n" duration=227.88087ms execID=ab8be
time="2023-11-03T13:39:49Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=c34c4
time="2023-11-03T13:39:50Z" level=debug msg="No resources found\n" duration=526.127241ms execID=c34c4
time="2023-11-03T13:39:50Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=f9f5d
time="2023-11-03T13:39:50Z" level=debug msg="No resources found\n" duration=256.274256ms execID=f9f5d
time="2023-11-03T13:39:51Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:39:51Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTE5MSwibmJmIjoxNjk5MDE4NzkxLCJpYXQiOjE2OTkwMTg3OTEsImp0aSI6IjE5NzBkYjA2LTA5NTUtNGEwNy1hYjZkLTgyNzc1MjU4OGVhZCJ9.w_tVpuunQhBFf526D7FLuCoMyC2Vagz7WfqczQq4vZI --insecure" dir= execID=548d2
time="2023-11-03T13:39:51Z" level=debug duration=147.431486ms execID=548d2
time="2023-11-03T13:39:51Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=bca99
time="2023-11-03T13:39:51Z" level=debug duration=2.780248ms execID=bca99
time="2023-11-03T13:39:51Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=31684
time="2023-11-03T13:39:51Z" level=debug duration=1.823773ms execID=31684
time="2023-11-03T13:39:51Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=c2b2d
time="2023-11-03T13:39:51Z" level=debug duration=1.848431ms execID=c2b2d
time="2023-11-03T13:39:51Z" level=info msg="pkill -9 gpg-agent" dir= execID=2fde7
time="2023-11-03T13:39:51Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=ca1bc
time="2023-11-03T13:39:51Z" level=debug duration=10.448942ms execID=ca1bc
time="2023-11-03T13:39:51Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=291ba
time="2023-11-03T13:39:51Z" level=debug duration=35.240895ms execID=291ba
time="2023-11-03T13:39:51Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=31b9f
time="2023-11-03T13:39:51Z" level=debug duration=2.230464ms execID=31b9f
time="2023-11-03T13:39:51Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=202a5
time="2023-11-03T13:39:51Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.602978ms execID=202a5
time="2023-11-03T13:39:51Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=49c97
time="2023-11-03T13:39:51Z" level=debug duration=25.250924ms execID=49c97
time="2023-11-03T13:39:51Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=1cae6
time="2023-11-03T13:39:51Z" level=debug duration=121.350191ms execID=1cae6
time="2023-11-03T13:39:51Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=b97da
time="2023-11-03T13:39:51Z" level=debug duration=2.871745ms execID=b97da
time="2023-11-03T13:39:51Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=1a7e6
Handling connection for 9081
time="2023-11-03T13:39:51Z" level=debug duration=91.896928ms execID=1a7e6
time="2023-11-03T13:39:51Z" level=info msg="kubectl create ns argocd-e2e--test-declarative-invalid-repo-url-sjxdr" dir= execID=45b30
time="2023-11-03T13:39:52Z" level=debug msg="namespace/argocd-e2e--test-declarative-invalid-repo-url-sjxdr created\n" duration=146.330039ms execID=45b30
time="2023-11-03T13:39:52Z" level=info msg="kubectl label ns argocd-e2e--test-declarative-invalid-repo-url-sjxdr e2e.argoproj.io=true" dir= execID=84978
time="2023-11-03T13:39:52Z" level=debug msg="namespace/argocd-e2e--test-declarative-invalid-repo-url-sjxdr labeled\n" duration=351.950902ms execID=84978
time="2023-11-03T13:39:52Z" level=info msg="clean state" duration=3.053268681s id=TestDeclarativeInvalidRepoURL-sjxdr name=TestDeclarativeInvalidRepoURL password=password username=admin
time="2023-11-03T13:39:53Z" level=info msg="kubectl -n argocd-e2e apply -f /tmp/3399687374" dir= execID=abb41
time="2023-11-03T13:39:54Z" level=debug msg="application.argoproj.io/test-declarative-invalid-repo-url created\n" duration=1.297529134s execID=abb41
time="2023-11-03T13:39:54Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:39:54Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:39:54Z" level=info msg="pending: health to should Healthy, is "
time="2023-11-03T13:39:57Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:39:57Z" level=info msg="expectation succeeded: sync status to be Unknown, is Unknown"
time="2023-11-03T13:39:57Z" level=info msg="expectation succeeded: condition {ComparisonError repository not found} in [{ComparisonError rpc error: code = Unknown desc = repository not found 2023-11-03 13:39:54 +0000 UTC}]"
time="2023-11-03T13:39:57Z" level=info msg="../../dist/argocd app delete test-declarative-invalid-repo-url --cascade=false --yes --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTE5MSwibmJmIjoxNjk5MDE4NzkxLCJpYXQiOjE2OTkwMTg3OTEsImp0aSI6IjE5NzBkYjA2LTA5NTUtNGEwNy1hYjZkLTgyNzc1MjU4OGVhZCJ9.w_tVpuunQhBFf526D7FLuCoMyC2Vagz7WfqczQq4vZI --insecure" dir= execID=1a94d
time="2023-11-03T13:39:57Z" level=debug duration=81.741816ms execID=1a94d
time="2023-11-03T13:39:57Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:39:57Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:39:57Z" level=info msg="expectation succeeded: app does not exist"
time="2023-11-03T13:39:57Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestDeclarativeInvalidRepoURL (8.46s)
=== RUN   TestDeployment
time="2023-11-03T13:39:57Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=dfca2
time="2023-11-03T13:39:58Z" level=debug msg="namespace \"argocd-e2e--test-declarative-invalid-repo-url-sjxdr\" deleted\n" duration=279.663201ms execID=dfca2
time="2023-11-03T13:39:58Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=c8d24
time="2023-11-03T13:39:58Z" level=debug msg="No resources found\n" duration=561.943875ms execID=c8d24
time="2023-11-03T13:39:58Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=d7851
time="2023-11-03T13:39:58Z" level=debug msg="No resources found\n" duration=246.379273ms execID=d7851
time="2023-11-03T13:39:59Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:39:59Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTE5OSwibmJmIjoxNjk5MDE4Nzk5LCJpYXQiOjE2OTkwMTg3OTksImp0aSI6IjNmYjJmZjcwLTY4NDMtNGEwOS1hMTliLWE2MzM2NTBkMjY1OSJ9.yj201UEwwktriFMbewweM2TIpTtrbHZjk3OCHPPi_sg --insecure" dir= execID=3cd33
time="2023-11-03T13:40:00Z" level=debug duration=128.780273ms execID=3cd33
time="2023-11-03T13:40:00Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=21e34
time="2023-11-03T13:40:00Z" level=debug duration=2.134222ms execID=21e34
time="2023-11-03T13:40:00Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=9f63f
time="2023-11-03T13:40:00Z" level=debug duration=1.637763ms execID=9f63f
time="2023-11-03T13:40:00Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=d4629
time="2023-11-03T13:40:00Z" level=debug duration=1.537657ms execID=d4629
time="2023-11-03T13:40:00Z" level=info msg="pkill -9 gpg-agent" dir= execID=2cb42
time="2023-11-03T13:40:00Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=3ff87
time="2023-11-03T13:40:00Z" level=debug duration=10.143808ms execID=3ff87
time="2023-11-03T13:40:00Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=19735
time="2023-11-03T13:40:00Z" level=debug duration=74.429383ms execID=19735
time="2023-11-03T13:40:00Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=845bc
time="2023-11-03T13:40:00Z" level=debug duration=2.004819ms execID=845bc
time="2023-11-03T13:40:00Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=b15d9
time="2023-11-03T13:40:00Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.23971ms execID=b15d9
time="2023-11-03T13:40:00Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=56184
time="2023-11-03T13:40:00Z" level=debug duration=27.944855ms execID=56184
time="2023-11-03T13:40:00Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=d423e
time="2023-11-03T13:40:00Z" level=debug duration=22.431463ms execID=d423e
time="2023-11-03T13:40:00Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=8039e
time="2023-11-03T13:40:00Z" level=debug duration=2.034572ms execID=8039e
time="2023-11-03T13:40:00Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=e408c
Handling connection for 9081
time="2023-11-03T13:40:00Z" level=debug duration=72.746769ms execID=e408c
time="2023-11-03T13:40:00Z" level=info msg="kubectl create ns argocd-e2e--test-deployment-zusnf" dir= execID=86ed0
time="2023-11-03T13:40:00Z" level=debug msg="namespace/argocd-e2e--test-deployment-zusnf created\n" duration=165.566025ms execID=86ed0
time="2023-11-03T13:40:00Z" level=info msg="kubectl label ns argocd-e2e--test-deployment-zusnf e2e.argoproj.io=true" dir= execID=1d271
time="2023-11-03T13:40:00Z" level=debug msg="namespace/argocd-e2e--test-deployment-zusnf labeled\n" duration=373.044531ms execID=1d271
time="2023-11-03T13:40:00Z" level=info msg="clean state" duration=3.096244769s id=TestDeployment-zusnf name=TestDeployment password=password username=admin
time="2023-11-03T13:40:01Z" level=info msg="../../dist/argocd app create test-deployment --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path deployment --project default --dest-namespace argocd-e2e--test-deployment-zusnf --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTE5OSwibmJmIjoxNjk5MDE4Nzk5LCJpYXQiOjE2OTkwMTg3OTksImp0aSI6IjNmYjJmZjcwLTY4NDMtNGEwOS1hMTliLWE2MzM2NTBkMjY1OSJ9.yj201UEwwktriFMbewweM2TIpTtrbHZjk3OCHPPi_sg --insecure" dir= execID=4c0f5
time="2023-11-03T13:40:02Z" level=debug msg="application 'test-deployment' created\n" duration=257.269998ms execID=4c0f5
time="2023-11-03T13:40:02Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:40:02Z" level=info msg="../../dist/argocd app sync test-deployment --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTE5OSwibmJmIjoxNjk5MDE4Nzk5LCJpYXQiOjE2OTkwMTg3OTksImp0aSI6IjNmYjJmZjcwLTY4NDMtNGEwOS1hMTliLWE2MzM2NTBkMjY1OSJ9.yj201UEwwktriFMbewweM2TIpTtrbHZjk3OCHPPi_sg --insecure" dir= execID=64bb3
time="2023-11-03T13:40:03Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                         NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:40:02+00:00   apps  Deployment  argocd-e2e--test-deployment-zusnf      nginx-deployment  OutOfSync  Missing              \n\nName:               argocd-e2e/test-deployment\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-deployment-zusnf\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-deployment\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               deployment\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (f15df4d)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      f15df4d6b2b21a76bf79940c7b713291385780d2\nPhase:              Succeeded\nStart:              2023-11-03 13:40:02 +0000 UTC\nFinished:           2023-11-03 13:40:02 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                          NAME              STATUS  HEALTH   HOOK  MESSAGE\napps   Deployment  argocd-e2e--test-deployment-zusnf  nginx-deployment  Synced  Healthy        deployment.apps/nginx-deployment created\n" duration=1.01824934s execID=64bb3
time="2023-11-03T13:40:03Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:40:03Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:40:03Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:40:03Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:40:03Z" level=info msg=patching jsonPatch="[\n    {\n        \"op\": \"replace\",\n        \"path\": \"/spec/template/spec/containers/0/image\",\n        \"value\": \"nginx:1.17.4-alpine\"\n    }\n]" path=deployment/deployment.yaml
time="2023-11-03T13:40:03Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:40:03Z" level=info msg=JSON bytes="{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"app\":\"nginx\"},\"name\":\"nginx-deployment\"},\"spec\":{\"replicas\":0,\"selector\":{\"matchLabels\":{\"app\":\"nginx\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"nginx\"}},\"spec\":{\"containers\":[{\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"name\":\"nginx\",\"ports\":[{\"containerPort\":80}]}]}}}}"
time="2023-11-03T13:40:03Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:40:03Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=0992e
time="2023-11-03T13:40:03Z" level=debug msg="diff --git a/deployment/deployment.yaml b/deployment/deployment.yaml\nindex 92e22a2..ca6cdd9 100644\n--- a/deployment/deployment.yaml\n+++ b/deployment/deployment.yaml\n@@ -1,9 +1,9 @@\n apiVersion: apps/v1\n kind: Deployment\n metadata:\n-  name: nginx-deployment\n   labels:\n     app: nginx\n+  name: nginx-deployment\n spec:\n   replicas: 0\n   selector:\n@@ -15,7 +15,7 @@ spec:\n         app: nginx\n     spec:\n       containers:\n-        - name: nginx\n-          image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-          ports:\n-            - containerPort: 80\n+      - image: nginx:1.17.4-alpine\n+        name: nginx\n+        ports:\n+        - containerPort: 80\n" duration=5.000059ms execID=0992e
time="2023-11-03T13:40:03Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=4bf6b
time="2023-11-03T13:40:03Z" level=debug msg="[master 49ada01] patch\n 1 file changed, 5 insertions(+), 5 deletions(-)\n" duration=12.49263ms execID=4bf6b
time="2023-11-03T13:40:03Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=d92a1
Handling connection for 9081
time="2023-11-03T13:40:03Z" level=debug duration=49.734236ms execID=d92a1
time="2023-11-03T13:40:03Z" level=info msg="../../dist/argocd app sync test-deployment --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTE5OSwibmJmIjoxNjk5MDE4Nzk5LCJpYXQiOjE2OTkwMTg3OTksImp0aSI6IjNmYjJmZjcwLTY4NDMtNGEwOS1hMTliLWE2MzM2NTBkMjY1OSJ9.yj201UEwwktriFMbewweM2TIpTtrbHZjk3OCHPPi_sg --insecure" dir= execID=7ed17
time="2023-11-03T13:40:04Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                         NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:40:03+00:00   apps  Deployment  argocd-e2e--test-deployment-zusnf      nginx-deployment    Synced  Healthy              \n2023-11-03T13:40:04+00:00   apps  Deployment  argocd-e2e--test-deployment-zusnf      nginx-deployment    Synced  Healthy              deployment.apps/nginx-deployment configured\n2023-11-03T13:40:04+00:00   apps  Deployment  argocd-e2e--test-deployment-zusnf      nginx-deployment  OutOfSync  Progressing              deployment.apps/nginx-deployment configured\n\nName:               argocd-e2e/test-deployment\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-deployment-zusnf\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-deployment\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               deployment\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (49ada01)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      49ada0169f4fc1a3588021e73390e5cde57d8a01\nPhase:              Succeeded\nStart:              2023-11-03 13:40:03 +0000 UTC\nFinished:           2023-11-03 13:40:04 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                          NAME              STATUS  HEALTH   HOOK  MESSAGE\napps   Deployment  argocd-e2e--test-deployment-zusnf  nginx-deployment  Synced  Healthy        deployment.apps/nginx-deployment configured\n" duration=1.268341992s execID=7ed17
time="2023-11-03T13:40:04Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:40:04Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestDeployment (6.72s)
=== RUN   TestDeploymentWithAnnotationTrackingMode
time="2023-11-03T13:40:04Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=c98d8
time="2023-11-03T13:40:04Z" level=debug msg="namespace \"argocd-e2e--test-deployment-zusnf\" deleted\n" duration=279.332097ms execID=c98d8
time="2023-11-03T13:40:04Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=5d7af
time="2023-11-03T13:40:05Z" level=debug msg="No resources found\n" duration=389.214982ms execID=5d7af
time="2023-11-03T13:40:05Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=8da89
time="2023-11-03T13:40:05Z" level=debug msg="No resources found\n" duration=251.395112ms execID=8da89
time="2023-11-03T13:40:06Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:40:06Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTIwNiwibmJmIjoxNjk5MDE4ODA2LCJpYXQiOjE2OTkwMTg4MDYsImp0aSI6ImRjOGExOTQyLWViYmYtNDNjZi05MjRkLTRmYmNiZWFkOWI2MiJ9.fPywhO-2QMC9FAw6heT9D4XFF-Iqz9LTfqB8C7rWlME --insecure" dir= execID=32c54
time="2023-11-03T13:40:06Z" level=debug duration=145.512277ms execID=32c54
time="2023-11-03T13:40:06Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=44f35
time="2023-11-03T13:40:06Z" level=debug duration=1.963857ms execID=44f35
time="2023-11-03T13:40:06Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=8f3cd
time="2023-11-03T13:40:06Z" level=debug duration=1.593703ms execID=8f3cd
time="2023-11-03T13:40:06Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=362c1
time="2023-11-03T13:40:06Z" level=debug duration=1.623364ms execID=362c1
time="2023-11-03T13:40:06Z" level=info msg="pkill -9 gpg-agent" dir= execID=ab4e3
time="2023-11-03T13:40:06Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=07178
time="2023-11-03T13:40:06Z" level=debug duration=9.942711ms execID=07178
time="2023-11-03T13:40:06Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=092f3
time="2023-11-03T13:40:06Z" level=debug duration=35.357647ms execID=092f3
time="2023-11-03T13:40:06Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=1f900
time="2023-11-03T13:40:06Z" level=debug duration=1.945051ms execID=1f900
time="2023-11-03T13:40:06Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=262a3
time="2023-11-03T13:40:06Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.397991ms execID=262a3
time="2023-11-03T13:40:06Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=a1556
time="2023-11-03T13:40:06Z" level=debug duration=33.963263ms execID=a1556
time="2023-11-03T13:40:06Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=7deea
time="2023-11-03T13:40:06Z" level=debug duration=23.002991ms execID=7deea
time="2023-11-03T13:40:06Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=662a1
time="2023-11-03T13:40:06Z" level=debug duration=2.269096ms execID=662a1
time="2023-11-03T13:40:06Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=d3e27
Handling connection for 9081
time="2023-11-03T13:40:06Z" level=debug duration=64.194185ms execID=d3e27
time="2023-11-03T13:40:06Z" level=info msg="kubectl create ns argocd-e2e--test-deployment-with-annotation-tracking-mode-jtdqi" dir= execID=f98f6
time="2023-11-03T13:40:06Z" level=debug msg="namespace/argocd-e2e--test-deployment-with-annotation-tracking-mode-jtdqi created\n" duration=149.825458ms execID=f98f6
time="2023-11-03T13:40:06Z" level=info msg="kubectl label ns argocd-e2e--test-deployment-with-annotation-tracking-mode-jtdqi e2e.argoproj.io=true" dir= execID=44bae
time="2023-11-03T13:40:07Z" level=debug msg="namespace/argocd-e2e--test-deployment-with-annotation-tracking-mode-jtdqi labeled\n" duration=310.433132ms execID=44bae
time="2023-11-03T13:40:07Z" level=info msg="clean state" duration=2.728603295s id=TestDeploymentWithAnnotationTrackingMode-jtdqi name=TestDeploymentWithAnnotationTrackingMode password=password username=admin
time="2023-11-03T13:40:08Z" level=info msg="../../dist/argocd app create test-deployment-with-annotation-tracking-mode --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path deployment --project default --dest-namespace argocd-e2e--test-deployment-with-annotation-tracking-mode-jtdqi --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTIwNiwibmJmIjoxNjk5MDE4ODA2LCJpYXQiOjE2OTkwMTg4MDYsImp0aSI6ImRjOGExOTQyLWViYmYtNDNjZi05MjRkLTRmYmNiZWFkOWI2MiJ9.fPywhO-2QMC9FAw6heT9D4XFF-Iqz9LTfqB8C7rWlME --insecure" dir= execID=6d010
time="2023-11-03T13:40:08Z" level=debug msg="application 'test-deployment-with-annotation-tracking-mode' created\n" duration=256.163228ms execID=6d010
time="2023-11-03T13:40:08Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:40:08Z" level=info msg="../../dist/argocd app sync test-deployment-with-annotation-tracking-mode --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTIwNiwibmJmIjoxNjk5MDE4ODA2LCJpYXQiOjE2OTkwMTg4MDYsImp0aSI6ImRjOGExOTQyLWViYmYtNDNjZi05MjRkLTRmYmNiZWFkOWI2MiJ9.fPywhO-2QMC9FAw6heT9D4XFF-Iqz9LTfqB8C7rWlME --insecure" dir= execID=58927
time="2023-11-03T13:40:13Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:40:13+00:00   apps  Deployment  argocd-e2e--test-deployment-with-annotation-tracking-mode-jtdqi      nginx-deployment  OutOfSync  Missing              \n2023-11-03T13:40:13+00:00   apps  Deployment  argocd-e2e--test-deployment-with-annotation-tracking-mode-jtdqi      nginx-deployment  OutOfSync  Missing              deployment.apps/nginx-deployment created\n2023-11-03T13:40:13+00:00   apps  Deployment  argocd-e2e--test-deployment-with-annotation-tracking-mode-jtdqi      nginx-deployment    Synced  Progressing              deployment.apps/nginx-deployment created\n2023-11-03T13:40:13+00:00   apps  Deployment  argocd-e2e--test-deployment-with-annotation-tracking-mode-jtdqi      nginx-deployment    Synced  Healthy              deployment.apps/nginx-deployment created\n\nName:               argocd-e2e/test-deployment-with-annotation-tracking-mode\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-deployment-with-annotation-tracking-mode-jtdqi\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-deployment-with-annotation-tracking-mode\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               deployment\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (5252471)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      5252471f816803cca8069a85dd1d442d9fb67ea3\nPhase:              Succeeded\nStart:              2023-11-03 13:40:08 +0000 UTC\nFinished:           2023-11-03 13:40:13 +0000 UTC\nDuration:           5s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                                        NAME              STATUS  HEALTH   HOOK  MESSAGE\napps   Deployment  argocd-e2e--test-deployment-with-annotation-tracking-mode-jtdqi  nginx-deployment  Synced  Healthy        deployment.apps/nginx-deployment created\n" duration=5.326323577s execID=58927
time="2023-11-03T13:40:13Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:40:13Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:40:13Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:40:13Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:40:13Z" level=info msg="../../dist/argocd app manifests test-deployment-with-annotation-tracking-mode --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTIwNiwibmJmIjoxNjk5MDE4ODA2LCJpYXQiOjE2OTkwMTg4MDYsImp0aSI6ImRjOGExOTQyLWViYmYtNDNjZi05MjRkLTRmYmNiZWFkOWI2MiJ9.fPywhO-2QMC9FAw6heT9D4XFF-Iqz9LTfqB8C7rWlME --insecure" dir= execID=8233c
time="2023-11-03T13:40:14Z" level=debug msg="---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  annotations:\n    argocd.argoproj.io/tracking-id: test-deployment-with-annotation-tracking-mode:apps/Deployment:argocd-e2e--test-deployment-with-annotation-tracking-mode-jtdqi/nginx-deployment\n  labels:\n    app: nginx\n  name: nginx-deployment\n  namespace: argocd-e2e--test-deployment-with-annotation-tracking-mode-jtdqi\nspec:\n  replicas: 0\n  selector:\n    matchLabels:\n      app: nginx\n  template:\n    metadata:\n      labels:\n        app: nginx\n    spec:\n      containers:\n      - image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n        name: nginx\n        ports:\n        - containerPort: 80\n\n" duration=99.01558ms execID=8233c
time="2023-11-03T13:40:14Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestDeploymentWithAnnotationTrackingMode (9.47s)
=== RUN   TestDeploymentWithLabelTrackingMode
time="2023-11-03T13:40:14Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=49be3
time="2023-11-03T13:40:14Z" level=debug msg="namespace \"argocd-e2e--test-deployment-with-annotation-tracking-mode-jtdqi\" deleted\n" duration=277.350427ms execID=49be3
time="2023-11-03T13:40:14Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=dffc5
time="2023-11-03T13:40:14Z" level=debug msg="No resources found\n" duration=350.823063ms execID=dffc5
time="2023-11-03T13:40:14Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=81fde
time="2023-11-03T13:40:15Z" level=debug msg="No resources found\n" duration=318.194535ms execID=81fde
time="2023-11-03T13:40:15Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:40:15Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTIxNSwibmJmIjoxNjk5MDE4ODE1LCJpYXQiOjE2OTkwMTg4MTUsImp0aSI6IjczNTdkMDBiLWYxYmEtNGY5Yi05M2JlLTNiOTgzN2U2NGFjYSJ9._kJ9Ld8nXIxuQVWXgaAVnRQ2UHotsM3NQExW858tyb4 --insecure" dir= execID=c05be
time="2023-11-03T13:40:15Z" level=debug duration=89.958814ms execID=c05be
time="2023-11-03T13:40:15Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=971a5
time="2023-11-03T13:40:15Z" level=debug duration=1.986548ms execID=971a5
time="2023-11-03T13:40:15Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=d5007
time="2023-11-03T13:40:15Z" level=debug duration=1.563858ms execID=d5007
time="2023-11-03T13:40:15Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=bf357
time="2023-11-03T13:40:15Z" level=debug duration=2.176062ms execID=bf357
time="2023-11-03T13:40:15Z" level=info msg="pkill -9 gpg-agent" dir= execID=b0160
time="2023-11-03T13:40:15Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=ed9e0
time="2023-11-03T13:40:15Z" level=debug duration=9.804727ms execID=ed9e0
time="2023-11-03T13:40:15Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=e798b
time="2023-11-03T13:40:15Z" level=debug duration=46.359179ms execID=e798b
time="2023-11-03T13:40:15Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=2fc53
time="2023-11-03T13:40:15Z" level=debug duration=1.929441ms execID=2fc53
time="2023-11-03T13:40:15Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=1d548
time="2023-11-03T13:40:15Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.234046ms execID=1d548
time="2023-11-03T13:40:15Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=08e6f
time="2023-11-03T13:40:15Z" level=debug duration=28.260927ms execID=08e6f
time="2023-11-03T13:40:15Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=6f951
time="2023-11-03T13:40:15Z" level=debug duration=22.635033ms execID=6f951
time="2023-11-03T13:40:15Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=fb6f0
time="2023-11-03T13:40:15Z" level=debug duration=2.499012ms execID=fb6f0
time="2023-11-03T13:40:15Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=e7841
Handling connection for 9081
time="2023-11-03T13:40:16Z" level=debug duration=79.052157ms execID=e7841
time="2023-11-03T13:40:16Z" level=info msg="kubectl create ns argocd-e2e--test-deployment-with-label-tracking-mode-xfldi" dir= execID=7e7da
time="2023-11-03T13:40:16Z" level=debug msg="namespace/argocd-e2e--test-deployment-with-label-tracking-mode-xfldi created\n" duration=178.492072ms execID=7e7da
time="2023-11-03T13:40:16Z" level=info msg="kubectl label ns argocd-e2e--test-deployment-with-label-tracking-mode-xfldi e2e.argoproj.io=true" dir= execID=df4f0
time="2023-11-03T13:40:16Z" level=debug msg="namespace/argocd-e2e--test-deployment-with-label-tracking-mode-xfldi labeled\n" duration=297.432466ms execID=df4f0
time="2023-11-03T13:40:16Z" level=info msg="clean state" duration=2.522700034s id=TestDeploymentWithLabelTrackingMode-xfldi name=TestDeploymentWithLabelTrackingMode password=password username=admin
time="2023-11-03T13:40:17Z" level=info msg="../../dist/argocd app create test-deployment-with-label-tracking-mode --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path deployment --project default --dest-namespace argocd-e2e--test-deployment-with-label-tracking-mode-xfldi --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTIxNSwibmJmIjoxNjk5MDE4ODE1LCJpYXQiOjE2OTkwMTg4MTUsImp0aSI6IjczNTdkMDBiLWYxYmEtNGY5Yi05M2JlLTNiOTgzN2U2NGFjYSJ9._kJ9Ld8nXIxuQVWXgaAVnRQ2UHotsM3NQExW858tyb4 --insecure" dir= execID=98d0b
time="2023-11-03T13:40:17Z" level=debug msg="application 'test-deployment-with-label-tracking-mode' created\n" duration=232.090832ms execID=98d0b
time="2023-11-03T13:40:17Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:40:17Z" level=info msg="../../dist/argocd app sync test-deployment-with-label-tracking-mode --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTIxNSwibmJmIjoxNjk5MDE4ODE1LCJpYXQiOjE2OTkwMTg4MTUsImp0aSI6IjczNTdkMDBiLWYxYmEtNGY5Yi05M2JlLTNiOTgzN2U2NGFjYSJ9._kJ9Ld8nXIxuQVWXgaAVnRQ2UHotsM3NQExW858tyb4 --insecure" dir= execID=eb933
time="2023-11-03T13:40:22Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:40:21+00:00   apps  Deployment  argocd-e2e--test-deployment-with-label-tracking-mode-xfldi      nginx-deployment  OutOfSync  Missing              \n2023-11-03T13:40:21+00:00   apps  Deployment  argocd-e2e--test-deployment-with-label-tracking-mode-xfldi      nginx-deployment  OutOfSync  Missing              deployment.apps/nginx-deployment created\n2023-11-03T13:40:21+00:00   apps  Deployment  argocd-e2e--test-deployment-with-label-tracking-mode-xfldi      nginx-deployment    Synced  Progressing              deployment.apps/nginx-deployment created\n\nName:               argocd-e2e/test-deployment-with-label-tracking-mode\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-deployment-with-label-tracking-mode-xfldi\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-deployment-with-label-tracking-mode\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               deployment\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (c7bb4b8)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      c7bb4b8274aa8dc56b4eb84f6dd76c16365e56c6\nPhase:              Succeeded\nStart:              2023-11-03 13:40:17 +0000 UTC\nFinished:           2023-11-03 13:40:21 +0000 UTC\nDuration:           4s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                                   NAME              STATUS  HEALTH   HOOK  MESSAGE\napps   Deployment  argocd-e2e--test-deployment-with-label-tracking-mode-xfldi  nginx-deployment  Synced  Healthy        deployment.apps/nginx-deployment created\n" duration=4.232793449s execID=eb933
time="2023-11-03T13:40:22Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:40:22Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:40:22Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:40:22Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:40:22Z" level=info msg="../../dist/argocd app manifests test-deployment-with-label-tracking-mode --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTIxNSwibmJmIjoxNjk5MDE4ODE1LCJpYXQiOjE2OTkwMTg4MTUsImp0aSI6IjczNTdkMDBiLWYxYmEtNGY5Yi05M2JlLTNiOTgzN2U2NGFjYSJ9._kJ9Ld8nXIxuQVWXgaAVnRQ2UHotsM3NQExW858tyb4 --insecure" dir= execID=04ee4
time="2023-11-03T13:40:22Z" level=debug msg="---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  labels:\n    app: nginx\n    app.kubernetes.io/instance: test-deployment-with-label-tracking-mode\n  name: nginx-deployment\n  namespace: argocd-e2e--test-deployment-with-label-tracking-mode-xfldi\nspec:\n  replicas: 0\n  selector:\n    matchLabels:\n      app: nginx\n  template:\n    metadata:\n      labels:\n        app: nginx\n    spec:\n      containers:\n      - image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n        name: nginx\n        ports:\n        - containerPort: 80\n\n" duration=70.85882ms execID=04ee4
time="2023-11-03T13:40:22Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestDeploymentWithLabelTrackingMode (8.10s)
=== RUN   TestDeploymentWithoutTrackingMode
time="2023-11-03T13:40:22Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=509df
time="2023-11-03T13:40:22Z" level=debug msg="namespace \"argocd-e2e--test-deployment-with-label-tracking-mode-xfldi\" deleted\n" duration=284.41664ms execID=509df
time="2023-11-03T13:40:22Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=e3967
time="2023-11-03T13:40:22Z" level=debug msg="No resources found\n" duration=307.91134ms execID=e3967
time="2023-11-03T13:40:22Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=4a6c5
time="2023-11-03T13:40:23Z" level=debug msg="No resources found\n" duration=256.672291ms execID=4a6c5
time="2023-11-03T13:40:23Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:40:23Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTIyMywibmJmIjoxNjk5MDE4ODIzLCJpYXQiOjE2OTkwMTg4MjMsImp0aSI6IjExNTRjNWIzLTIyNDctNDA4Ni05Mzg1LTgyYTYxN2NjOWFmNyJ9.LK5gaKVC-8wy2UrXGUkZWi5wLDwQcUpZWVv29QaGg6s --insecure" dir= execID=7e7c1
time="2023-11-03T13:40:24Z" level=debug duration=101.998821ms execID=7e7c1
time="2023-11-03T13:40:24Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=53f03
time="2023-11-03T13:40:24Z" level=debug duration=2.113487ms execID=53f03
time="2023-11-03T13:40:24Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=31de5
time="2023-11-03T13:40:24Z" level=debug duration=1.909091ms execID=31de5
time="2023-11-03T13:40:24Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=6b11a
time="2023-11-03T13:40:24Z" level=debug duration=1.516001ms execID=6b11a
time="2023-11-03T13:40:24Z" level=info msg="pkill -9 gpg-agent" dir= execID=40c48
time="2023-11-03T13:40:24Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=e0d8c
time="2023-11-03T13:40:24Z" level=debug duration=9.902498ms execID=e0d8c
time="2023-11-03T13:40:24Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=71c69
time="2023-11-03T13:40:24Z" level=debug duration=35.020006ms execID=71c69
time="2023-11-03T13:40:24Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=8e649
time="2023-11-03T13:40:24Z" level=debug duration=1.901176ms execID=8e649
time="2023-11-03T13:40:24Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=0231f
time="2023-11-03T13:40:24Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.056245ms execID=0231f
time="2023-11-03T13:40:24Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=ee408
time="2023-11-03T13:40:24Z" level=debug duration=33.195822ms execID=ee408
time="2023-11-03T13:40:24Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=26150
time="2023-11-03T13:40:24Z" level=debug duration=23.090037ms execID=26150
time="2023-11-03T13:40:24Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=d53a2
time="2023-11-03T13:40:24Z" level=debug duration=2.532334ms execID=d53a2
time="2023-11-03T13:40:24Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=8541b
Handling connection for 9081
time="2023-11-03T13:40:24Z" level=debug duration=66.853806ms execID=8541b
time="2023-11-03T13:40:24Z" level=info msg="kubectl create ns argocd-e2e--test-deployment-without-tracking-mode-rmvcv" dir= execID=1e1ef
time="2023-11-03T13:40:24Z" level=debug msg="namespace/argocd-e2e--test-deployment-without-tracking-mode-rmvcv created\n" duration=150.481134ms execID=1e1ef
time="2023-11-03T13:40:24Z" level=info msg="kubectl label ns argocd-e2e--test-deployment-without-tracking-mode-rmvcv e2e.argoproj.io=true" dir= execID=b5aae
time="2023-11-03T13:40:24Z" level=debug msg="namespace/argocd-e2e--test-deployment-without-tracking-mode-rmvcv labeled\n" duration=312.147007ms execID=b5aae
time="2023-11-03T13:40:24Z" level=info msg="clean state" duration=2.659474849s id=TestDeploymentWithoutTrackingMode-rmvcv name=TestDeploymentWithoutTrackingMode password=password username=admin
time="2023-11-03T13:40:25Z" level=info msg="../../dist/argocd app create test-deployment-without-tracking-mode --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path deployment --project default --dest-namespace argocd-e2e--test-deployment-without-tracking-mode-rmvcv --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTIyMywibmJmIjoxNjk5MDE4ODIzLCJpYXQiOjE2OTkwMTg4MjMsImp0aSI6IjExNTRjNWIzLTIyNDctNDA4Ni05Mzg1LTgyYTYxN2NjOWFmNyJ9.LK5gaKVC-8wy2UrXGUkZWi5wLDwQcUpZWVv29QaGg6s --insecure" dir= execID=bd25f
time="2023-11-03T13:40:26Z" level=debug msg="application 'test-deployment-without-tracking-mode' created\n" duration=269.526167ms execID=bd25f
time="2023-11-03T13:40:26Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:40:26Z" level=info msg="../../dist/argocd app sync test-deployment-without-tracking-mode --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTIyMywibmJmIjoxNjk5MDE4ODIzLCJpYXQiOjE2OTkwMTg4MjMsImp0aSI6IjExNTRjNWIzLTIyNDctNDA4Ni05Mzg1LTgyYTYxN2NjOWFmNyJ9.LK5gaKVC-8wy2UrXGUkZWi5wLDwQcUpZWVv29QaGg6s --insecure" dir= execID=dc790
time="2023-11-03T13:40:27Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                               NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:40:26+00:00   apps  Deployment  argocd-e2e--test-deployment-without-tracking-mode-rmvcv      nginx-deployment  OutOfSync  Missing              \n\nName:               argocd-e2e/test-deployment-without-tracking-mode\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-deployment-without-tracking-mode-rmvcv\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-deployment-without-tracking-mode\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               deployment\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (dde6c79)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      dde6c795619b331fd3705e14585525d4a31bc5d8\nPhase:              Succeeded\nStart:              2023-11-03 13:40:26 +0000 UTC\nFinished:           2023-11-03 13:40:26 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                                NAME              STATUS  HEALTH   HOOK  MESSAGE\napps   Deployment  argocd-e2e--test-deployment-without-tracking-mode-rmvcv  nginx-deployment  Synced  Healthy        deployment.apps/nginx-deployment created\n" duration=1.016474278s execID=dc790
time="2023-11-03T13:40:27Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:40:27Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:40:27Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:40:27Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:40:27Z" level=info msg="../../dist/argocd app manifests test-deployment-without-tracking-mode --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTIyMywibmJmIjoxNjk5MDE4ODIzLCJpYXQiOjE2OTkwMTg4MjMsImp0aSI6IjExNTRjNWIzLTIyNDctNDA4Ni05Mzg1LTgyYTYxN2NjOWFmNyJ9.LK5gaKVC-8wy2UrXGUkZWi5wLDwQcUpZWVv29QaGg6s --insecure" dir= execID=28c16
time="2023-11-03T13:40:27Z" level=debug msg="---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  labels:\n    app: nginx\n    app.kubernetes.io/instance: test-deployment-without-tracking-mode\n  name: nginx-deployment\n  namespace: argocd-e2e--test-deployment-without-tracking-mode-rmvcv\nspec:\n  replicas: 0\n  selector:\n    matchLabels:\n      app: nginx\n  template:\n    metadata:\n      labels:\n        app: nginx\n    spec:\n      containers:\n      - image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n        name: nginx\n        ports:\n        - containerPort: 80\n\n" duration=63.696388ms execID=28c16
time="2023-11-03T13:40:27Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestDeploymentWithoutTrackingMode (5.03s)
=== RUN   TestPatch
time="2023-11-03T13:40:27Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=58af6
time="2023-11-03T13:40:27Z" level=debug msg="namespace \"argocd-e2e--test-deployment-without-tracking-mode-rmvcv\" deleted\n" duration=233.224913ms execID=58af6
time="2023-11-03T13:40:27Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=e7331
time="2023-11-03T13:40:28Z" level=debug msg="No resources found\n" duration=451.592789ms execID=e7331
time="2023-11-03T13:40:28Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=36aad
time="2023-11-03T13:40:28Z" level=debug msg="No resources found\n" duration=308.795844ms execID=36aad
time="2023-11-03T13:40:29Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:40:29Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTIyOSwibmJmIjoxNjk5MDE4ODI5LCJpYXQiOjE2OTkwMTg4MjksImp0aSI6IjNlNjYyMmZjLWM2NGItNDc1MS05MTI1LWFjZTEzMzM3YjkwNyJ9.KMXhRAyvaYXTu_oH2P9DWMuVNKyW6337XCBYS3AhVHs --insecure" dir= execID=5f454
time="2023-11-03T13:40:29Z" level=debug duration=116.019687ms execID=5f454
time="2023-11-03T13:40:29Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=8b6ff
time="2023-11-03T13:40:29Z" level=debug duration=2.133436ms execID=8b6ff
time="2023-11-03T13:40:29Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=8ec54
time="2023-11-03T13:40:29Z" level=debug duration=1.415151ms execID=8ec54
time="2023-11-03T13:40:29Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=f58f3
time="2023-11-03T13:40:29Z" level=debug duration=1.174712ms execID=f58f3
time="2023-11-03T13:40:29Z" level=info msg="pkill -9 gpg-agent" dir= execID=f1d26
time="2023-11-03T13:40:29Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=3d381
time="2023-11-03T13:40:29Z" level=debug duration=9.388505ms execID=3d381
time="2023-11-03T13:40:29Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=7417f
time="2023-11-03T13:40:29Z" level=debug duration=36.424331ms execID=7417f
time="2023-11-03T13:40:29Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=b04fd
time="2023-11-03T13:40:29Z" level=debug duration=1.975455ms execID=b04fd
time="2023-11-03T13:40:29Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=7bf58
time="2023-11-03T13:40:29Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.203954ms execID=7bf58
time="2023-11-03T13:40:29Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=6aba6
time="2023-11-03T13:40:29Z" level=debug duration=26.405016ms execID=6aba6
time="2023-11-03T13:40:29Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=5084d
time="2023-11-03T13:40:29Z" level=debug duration=23.79814ms execID=5084d
time="2023-11-03T13:40:29Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=1d72d
time="2023-11-03T13:40:29Z" level=debug duration=2.414303ms execID=1d72d
time="2023-11-03T13:40:29Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=b7409
Handling connection for 9081
time="2023-11-03T13:40:29Z" level=debug duration=84.044999ms execID=b7409
time="2023-11-03T13:40:29Z" level=info msg="kubectl create ns argocd-e2e--test-patch-ymhig" dir= execID=1ca08
time="2023-11-03T13:40:29Z" level=debug msg="namespace/argocd-e2e--test-patch-ymhig created\n" duration=177.271683ms execID=1ca08
time="2023-11-03T13:40:29Z" level=info msg="kubectl label ns argocd-e2e--test-patch-ymhig e2e.argoproj.io=true" dir= execID=d3838
time="2023-11-03T13:40:30Z" level=debug msg="namespace/argocd-e2e--test-patch-ymhig labeled\n" duration=307.468222ms execID=d3838
time="2023-11-03T13:40:30Z" level=info msg="clean state" duration=3.003585864s id=TestPatch-ymhig name=TestPatch password=password username=admin
time="2023-11-03T13:40:31Z" level=info msg=adding path=two-nice-pods/pod-3.yaml
time="2023-11-03T13:40:31Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=58284
time="2023-11-03T13:40:31Z" level=debug duration=5.043832ms execID=58284
time="2023-11-03T13:40:31Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=ab5cd
time="2023-11-03T13:40:31Z" level=debug duration=7.475514ms execID=ab5cd
time="2023-11-03T13:40:31Z" level=info msg="git commit -am add file" dir=/tmp/argo-e2e/testdata.git execID=df025
time="2023-11-03T13:40:31Z" level=debug msg="[master 4b378f1] add file\n 1 file changed, 12 insertions(+)\n create mode 100644 two-nice-pods/pod-3.yaml\n" duration=9.214519ms execID=df025
time="2023-11-03T13:40:31Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=19c7f
Handling connection for 9081
time="2023-11-03T13:40:31Z" level=debug duration=36.773925ms execID=19c7f
time="2023-11-03T13:40:31Z" level=info msg="../../dist/argocd app create test-patch --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path two-nice-pods --project default --dest-namespace argocd-e2e--test-patch-ymhig --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTIyOSwibmJmIjoxNjk5MDE4ODI5LCJpYXQiOjE2OTkwMTg4MjksImp0aSI6IjNlNjYyMmZjLWM2NGItNDc1MS05MTI1LWFjZTEzMzM3YjkwNyJ9.KMXhRAyvaYXTu_oH2P9DWMuVNKyW6337XCBYS3AhVHs --insecure" dir= execID=73e90
time="2023-11-03T13:40:31Z" level=debug msg="application 'test-patch' created\n" duration=281.563402ms execID=73e90
time="2023-11-03T13:40:31Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:40:31Z" level=info msg="../../dist/argocd app sync test-patch --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTIyOSwibmJmIjoxNjk5MDE4ODI5LCJpYXQiOjE2OTkwMTg4MjksImp0aSI6IjNlNjYyMmZjLWM2NGItNDc1MS05MTI1LWFjZTEzMzM3YjkwNyJ9.KMXhRAyvaYXTu_oH2P9DWMuVNKyW6337XCBYS3AhVHs --insecure" dir= execID=5e865
time="2023-11-03T13:40:32Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                    NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:40:31+00:00                Pod  argocd-e2e--test-patch-ymhig                 pod-1  OutOfSync  Missing              \n2023-11-03T13:40:31+00:00                Pod  argocd-e2e--test-patch-ymhig                 pod-2  OutOfSync  Missing              \n2023-11-03T13:40:31+00:00                Pod  argocd-e2e--test-patch-ymhig                 pod-3  OutOfSync  Missing              \n2023-11-03T13:40:32+00:00                Pod  argocd-e2e--test-patch-ymhig                 pod-2  OutOfSync  Missing              pod/pod-2 created\n2023-11-03T13:40:32+00:00                Pod  argocd-e2e--test-patch-ymhig                 pod-3  OutOfSync  Missing              pod/pod-3 created\n2023-11-03T13:40:32+00:00                Pod  argocd-e2e--test-patch-ymhig                 pod-1  OutOfSync  Missing              pod/pod-1 created\n2023-11-03T13:40:32+00:00                Pod  argocd-e2e--test-patch-ymhig                 pod-3    Synced  Progressing              pod/pod-3 created\n2023-11-03T13:40:32+00:00                Pod  argocd-e2e--test-patch-ymhig                 pod-1    Synced  Progressing              pod/pod-1 created\n2023-11-03T13:40:32+00:00                Pod  argocd-e2e--test-patch-ymhig                 pod-2    Synced  Progressing              pod/pod-2 created\n\nName:               argocd-e2e/test-patch\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-patch-ymhig\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-patch\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               two-nice-pods\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (4b378f1)\nHealth Status:      Progressing\n\nOperation:          Sync\nSync Revision:      4b378f1afdf0a77df2043625875c550a6d26d706\nPhase:              Succeeded\nStart:              2023-11-03 13:40:31 +0000 UTC\nFinished:           2023-11-03 13:40:32 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND  NAMESPACE                     NAME   STATUS  HEALTH       HOOK  MESSAGE\n       Pod   argocd-e2e--test-patch-ymhig  pod-3  Synced  Progressing        pod/pod-3 created\n       Pod   argocd-e2e--test-patch-ymhig  pod-1  Synced  Progressing        pod/pod-1 created\n       Pod   argocd-e2e--test-patch-ymhig  pod-2  Synced  Progressing        pod/pod-2 created\n" duration=1.107047735s execID=5e865
time="2023-11-03T13:40:32Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:40:32Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:40:32Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:40:32Z" level=info msg=deleting path=two-nice-pods/pod-1.yaml
time="2023-11-03T13:40:32Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=b7633
time="2023-11-03T13:40:32Z" level=debug msg="diff --git a/two-nice-pods/pod-1.yaml b/two-nice-pods/pod-1.yaml\ndeleted file mode 100644\nindex 95187dd..0000000\n--- a/two-nice-pods/pod-1.yaml\n+++ /dev/null\n@@ -1,12 +0,0 @@\n-apiVersion: v1\n-kind: Pod\n-metadata:\n-  name: pod-1\n-spec:\n-  containers:\n-    - name: main\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      command:\n-        - \"true\"\n-  restartPolicy: Never\n" duration=4.831982ms execID=b7633
time="2023-11-03T13:40:32Z" level=info msg="git commit -am delete" dir=/tmp/argo-e2e/testdata.git execID=bbdca
time="2023-11-03T13:40:32Z" level=debug msg="[master 5898532] delete\n 1 file changed, 12 deletions(-)\n delete mode 100644 two-nice-pods/pod-1.yaml\n" duration=8.190042ms execID=bbdca
time="2023-11-03T13:40:32Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=ae7d1
Handling connection for 9081
time="2023-11-03T13:40:32Z" level=debug duration=40.939187ms execID=ae7d1
time="2023-11-03T13:40:32Z" level=info msg=patching jsonPatch="[{\"op\": \"add\", \"path\": \"/metadata/annotations\", \"value\": {\"bar\": \"Baz\"}}]" path=two-nice-pods/pod-2.yaml
time="2023-11-03T13:40:32Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:40:32Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"name\":\"pod-2\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:40:32Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:40:32Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=3b77a
time="2023-11-03T13:40:32Z" level=debug msg="diff --git a/two-nice-pods/pod-2.yaml b/two-nice-pods/pod-2.yaml\nindex 588d281..8504485 100644\n--- a/two-nice-pods/pod-2.yaml\n+++ b/two-nice-pods/pod-2.yaml\n@@ -1,12 +1,14 @@\n apiVersion: v1\n kind: Pod\n metadata:\n+  annotations:\n+    bar: Baz\n   name: pod-2\n spec:\n   containers:\n-    - name: main\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      command:\n-        - \"true\"\n+  - command:\n+    - \"true\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n   restartPolicy: Never\n" duration=3.071922ms execID=3b77a
time="2023-11-03T13:40:32Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=702c6
time="2023-11-03T13:40:32Z" level=debug msg="[master a9d5c9c] patch\n 1 file changed, 7 insertions(+), 5 deletions(-)\n" duration=8.802605ms execID=702c6
time="2023-11-03T13:40:32Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=1fbf7
Handling connection for 9081
time="2023-11-03T13:40:32Z" level=debug duration=45.728721ms execID=1fbf7
time="2023-11-03T13:40:32Z" level=info msg=adding path=two-nice-pods/pod-4.yaml
time="2023-11-03T13:40:32Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=6959d
time="2023-11-03T13:40:32Z" level=debug duration=7.401775ms execID=6959d
time="2023-11-03T13:40:32Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=bb513
time="2023-11-03T13:40:32Z" level=debug duration=5.454589ms execID=bb513
time="2023-11-03T13:40:32Z" level=info msg="git commit -am add file" dir=/tmp/argo-e2e/testdata.git execID=802bc
time="2023-11-03T13:40:32Z" level=debug msg="[master 414f6b9] add file\n 1 file changed, 12 insertions(+)\n create mode 100644 two-nice-pods/pod-4.yaml\n" duration=8.400563ms execID=802bc
time="2023-11-03T13:40:32Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=806a1
Handling connection for 9081
time="2023-11-03T13:40:32Z" level=debug duration=47.495794ms execID=806a1
time="2023-11-03T13:40:32Z" level=info msg="../../dist/argocd app get test-patch --hard-refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTIyOSwibmJmIjoxNjk5MDE4ODI5LCJpYXQiOjE2OTkwMTg4MjksImp0aSI6IjNlNjYyMmZjLWM2NGItNDc1MS05MTI1LWFjZTEzMzM3YjkwNyJ9.KMXhRAyvaYXTu_oH2P9DWMuVNKyW6337XCBYS3AhVHs --insecure" dir= execID=7b1e6
time="2023-11-03T13:40:33Z" level=debug msg="Name:               argocd-e2e/test-patch\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-patch-ymhig\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-patch\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               two-nice-pods\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (414f6b9)\nHealth Status:      Missing\n\nGROUP  KIND  NAMESPACE                     NAME   STATUS     HEALTH       HOOK  MESSAGE\n       Pod   argocd-e2e--test-patch-ymhig  pod-3  Synced     Progressing        pod/pod-3 created\n       Pod   argocd-e2e--test-patch-ymhig  pod-1  OutOfSync  Progressing        pod/pod-1 created\n       Pod   argocd-e2e--test-patch-ymhig  pod-2  OutOfSync  Progressing        pod/pod-2 created\n       Pod   argocd-e2e--test-patch-ymhig  pod-4  OutOfSync  Missing            \n" duration=331.511371ms execID=7b1e6
time="2023-11-03T13:40:33Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:40:33Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:40:33Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestPatch (6.00s)
=== RUN   TestGitSubmoduleSSHSupport
    fixture.go:910: 
--- SKIP: TestGitSubmoduleSSHSupport (0.00s)
=== RUN   TestGitSubmoduleHTTPSSupport
    fixture.go:910: 
--- SKIP: TestGitSubmoduleHTTPSSupport (0.00s)
=== RUN   TestHelmHooksAreCreated
time="2023-11-03T13:40:33Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=8d134
time="2023-11-03T13:40:33Z" level=debug msg="namespace \"argocd-e2e--test-patch-ymhig\" deleted\n" duration=229.749275ms execID=8d134
time="2023-11-03T13:40:33Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=6424c
time="2023-11-03T13:40:34Z" level=debug msg="No resources found\n" duration=487.370636ms execID=6424c
time="2023-11-03T13:40:34Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=e96ad
time="2023-11-03T13:40:34Z" level=debug msg="No resources found\n" duration=220.856416ms execID=e96ad
time="2023-11-03T13:40:35Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:40:35Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTIzNSwibmJmIjoxNjk5MDE4ODM1LCJpYXQiOjE2OTkwMTg4MzUsImp0aSI6IjZjNjJmYzAxLTgxNWQtNGRlNy1hZTM0LWU0ZDA2OTc5YjAxYSJ9.QwMIjNvbOT7RHmT1ozuHKOVm6psd-V3ggEbySjuCE5c --insecure" dir= execID=3c049
time="2023-11-03T13:40:35Z" level=debug duration=113.733414ms execID=3c049
time="2023-11-03T13:40:35Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=a9452
time="2023-11-03T13:40:35Z" level=debug duration=2.090506ms execID=a9452
time="2023-11-03T13:40:35Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=d505d
time="2023-11-03T13:40:35Z" level=debug duration=1.683932ms execID=d505d
time="2023-11-03T13:40:35Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=ab094
time="2023-11-03T13:40:35Z" level=debug duration=1.643948ms execID=ab094
time="2023-11-03T13:40:35Z" level=info msg="pkill -9 gpg-agent" dir= execID=5f840
time="2023-11-03T13:40:35Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=67b5d
time="2023-11-03T13:40:35Z" level=debug duration=9.953934ms execID=67b5d
time="2023-11-03T13:40:35Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=76aeb
time="2023-11-03T13:40:35Z" level=debug duration=34.851437ms execID=76aeb
time="2023-11-03T13:40:35Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=15e2d
time="2023-11-03T13:40:35Z" level=debug duration=1.857137ms execID=15e2d
time="2023-11-03T13:40:35Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=ae252
time="2023-11-03T13:40:35Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.111652ms execID=ae252
time="2023-11-03T13:40:35Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=25c83
time="2023-11-03T13:40:35Z" level=debug duration=27.619617ms execID=25c83
time="2023-11-03T13:40:35Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=1c712
time="2023-11-03T13:40:35Z" level=debug duration=23.20047ms execID=1c712
time="2023-11-03T13:40:35Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=adbb9
time="2023-11-03T13:40:35Z" level=debug duration=2.75815ms execID=adbb9
time="2023-11-03T13:40:35Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=6560f
Handling connection for 9081
time="2023-11-03T13:40:35Z" level=debug duration=64.081303ms execID=6560f
time="2023-11-03T13:40:35Z" level=info msg="kubectl create ns argocd-e2e--test-helm-hooks-are-created-adehv" dir= execID=20473
time="2023-11-03T13:40:35Z" level=debug msg="namespace/argocd-e2e--test-helm-hooks-are-created-adehv created\n" duration=158.736689ms execID=20473
time="2023-11-03T13:40:35Z" level=info msg="kubectl label ns argocd-e2e--test-helm-hooks-are-created-adehv e2e.argoproj.io=true" dir= execID=7b375
time="2023-11-03T13:40:35Z" level=debug msg="namespace/argocd-e2e--test-helm-hooks-are-created-adehv labeled\n" duration=262.585648ms execID=7b375
time="2023-11-03T13:40:35Z" level=info msg="clean state" duration=2.792633296s id=TestHelmHooksAreCreated-adehv name=TestHelmHooksAreCreated password=password username=admin
time="2023-11-03T13:40:36Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/metadata/annotations\", \"value\": {\"helm.sh/hook\": \"pre-install\"}}]" path=hook/hook.yaml
time="2023-11-03T13:40:36Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:40:36Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/hook\":\"Sync\"},\"name\":\"hook\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:40:36Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:40:36Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=d7233
time="2023-11-03T13:40:36Z" level=debug msg="diff --git a/hook/hook.yaml b/hook/hook.yaml\nindex ca89c3d..e259973 100644\n--- a/hook/hook.yaml\n+++ b/hook/hook.yaml\n@@ -2,13 +2,13 @@ apiVersion: v1\n kind: Pod\n metadata:\n   annotations:\n-    argocd.argoproj.io/hook: Sync\n+    helm.sh/hook: pre-install\n   name: hook\n spec:\n   containers:\n-    - command:\n-        - \"true\"\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      name: main\n-  restartPolicy: Never\n\\ No newline at end of file\n+  - command:\n+    - \"true\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n+  restartPolicy: Never\n" duration=4.985593ms execID=d7233
time="2023-11-03T13:40:36Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=39ddf
time="2023-11-03T13:40:36Z" level=debug msg="[master cd087af] patch\n 1 file changed, 7 insertions(+), 7 deletions(-)\n" duration=12.146599ms execID=39ddf
time="2023-11-03T13:40:36Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=b00a6
Handling connection for 9081
time="2023-11-03T13:40:37Z" level=debug duration=33.408322ms execID=b00a6
time="2023-11-03T13:40:37Z" level=info msg="../../dist/argocd app create test-helm-hooks-are-created --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path hook --project default --dest-namespace argocd-e2e--test-helm-hooks-are-created-adehv --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTIzNSwibmJmIjoxNjk5MDE4ODM1LCJpYXQiOjE2OTkwMTg4MzUsImp0aSI6IjZjNjJmYzAxLTgxNWQtNGRlNy1hZTM0LWU0ZDA2OTc5YjAxYSJ9.QwMIjNvbOT7RHmT1ozuHKOVm6psd-V3ggEbySjuCE5c --insecure" dir= execID=a2491
time="2023-11-03T13:40:37Z" level=debug msg="application 'test-helm-hooks-are-created' created\n" duration=209.883927ms execID=a2491
time="2023-11-03T13:40:37Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:40:37Z" level=info msg="../../dist/argocd app sync test-helm-hooks-are-created --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTIzNSwibmJmIjoxNjk5MDE4ODM1LCJpYXQiOjE2OTkwMTg4MzUsImp0aSI6IjZjNjJmYzAxLTgxNWQtNGRlNy1hZTM0LWU0ZDA2OTc5YjAxYSJ9.QwMIjNvbOT7RHmT1ozuHKOVm6psd-V3ggEbySjuCE5c --insecure" dir= execID=7719f
time="2023-11-03T13:40:42Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                     NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:40:37+00:00                Pod  argocd-e2e--test-helm-hooks-are-created-adehv                   pod  OutOfSync  Missing              \n2023-11-03T13:40:37+00:00                Pod  argocd-e2e--test-helm-hooks-are-created-adehv                  hook                                 \n2023-11-03T13:40:39+00:00                Pod  argocd-e2e--test-helm-hooks-are-created-adehv                  hook   Running   Synced     PreSync  pod/hook created\n2023-11-03T13:40:42+00:00                Pod  argocd-e2e--test-helm-hooks-are-created-adehv                  hook  Succeeded   Synced     PreSync  pod/hook created\n2023-11-03T13:40:42+00:00                Pod  argocd-e2e--test-helm-hooks-are-created-adehv                   pod  OutOfSync  Missing              pod/pod created\n2023-11-03T13:40:42+00:00                Pod  argocd-e2e--test-helm-hooks-are-created-adehv                   pod    Synced  Progressing              pod/pod created\n\nName:               argocd-e2e/test-helm-hooks-are-created\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-helm-hooks-are-created-adehv\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-helm-hooks-are-created\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               hook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (cd087af)\nHealth Status:      Progressing\n\nOperation:          Sync\nSync Revision:      cd087afab5f0607b4c2d360fc47bd3350d2433a8\nPhase:              Succeeded\nStart:              2023-11-03 13:40:37 +0000 UTC\nFinished:           2023-11-03 13:40:42 +0000 UTC\nDuration:           5s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND  NAMESPACE                                      NAME  STATUS     HEALTH       HOOK     MESSAGE\n       Pod   argocd-e2e--test-helm-hooks-are-created-adehv  hook  Succeeded               PreSync  pod/hook created\n       Pod   argocd-e2e--test-helm-hooks-are-created-adehv  pod   Synced     Progressing           pod/pod created\n" duration=5.610054857s execID=7719f
time="2023-11-03T13:40:42Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:40:42Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:40:42Z" level=info msg="pending: health to should Healthy, is Progressing"
time="2023-11-03T13:40:45Z" level=info msg="pending: health to should Healthy, is Progressing"
time="2023-11-03T13:40:48Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:40:48Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:40:48Z" level=info msg="expectation succeeded: found resource result { v1 Pod argocd-e2e--test-helm-hooks-are-created-adehv hook  pod/hook created PreSync Succeeded PreSync}"
time="2023-11-03T13:40:48Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestHelmHooksAreCreated (15.74s)
=== RUN   TestHelmHookWeight
time="2023-11-03T13:40:48Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=c28e2
time="2023-11-03T13:40:49Z" level=debug msg="namespace \"argocd-e2e--test-helm-hooks-are-created-adehv\" deleted\n" duration=172.627347ms execID=c28e2
time="2023-11-03T13:40:49Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=70ebc
time="2023-11-03T13:40:49Z" level=debug msg="No resources found\n" duration=339.552199ms execID=70ebc
time="2023-11-03T13:40:49Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=7db80
time="2023-11-03T13:40:49Z" level=debug msg="No resources found\n" duration=250.479229ms execID=7db80
time="2023-11-03T13:40:50Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:40:50Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTI1MCwibmJmIjoxNjk5MDE4ODUwLCJpYXQiOjE2OTkwMTg4NTAsImp0aSI6IjVmOWNlMjc3LTVkYjAtNDcyOS1iMDNkLWQ1ZTNkYWZiNTMxNCJ9.x4XFAIW4VOTkJLIWHgy1SSv4YKbqE_EowNjZ20dmChA --insecure" dir= execID=da268
time="2023-11-03T13:40:50Z" level=debug duration=101.750568ms execID=da268
time="2023-11-03T13:40:50Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=d877b
time="2023-11-03T13:40:50Z" level=debug duration=2.127431ms execID=d877b
time="2023-11-03T13:40:50Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=82bff
time="2023-11-03T13:40:50Z" level=debug duration=1.768159ms execID=82bff
time="2023-11-03T13:40:50Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=1b978
time="2023-11-03T13:40:50Z" level=debug duration=1.362674ms execID=1b978
time="2023-11-03T13:40:50Z" level=info msg="pkill -9 gpg-agent" dir= execID=00431
time="2023-11-03T13:40:50Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=9648c
time="2023-11-03T13:40:50Z" level=debug duration=10.059688ms execID=9648c
time="2023-11-03T13:40:50Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=0efe4
time="2023-11-03T13:40:50Z" level=debug duration=34.200674ms execID=0efe4
time="2023-11-03T13:40:50Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=7a9ce
time="2023-11-03T13:40:50Z" level=debug duration=1.924245ms execID=7a9ce
time="2023-11-03T13:40:50Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=78501
time="2023-11-03T13:40:50Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.959428ms execID=78501
time="2023-11-03T13:40:50Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=21cd9
time="2023-11-03T13:40:50Z" level=debug duration=25.2476ms execID=21cd9
time="2023-11-03T13:40:50Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=8d173
time="2023-11-03T13:40:50Z" level=debug duration=19.871391ms execID=8d173
time="2023-11-03T13:40:50Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=d9acf
time="2023-11-03T13:40:50Z" level=debug duration=2.329463ms execID=d9acf
time="2023-11-03T13:40:50Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=694b8
Handling connection for 9081
time="2023-11-03T13:40:50Z" level=debug duration=66.56598ms execID=694b8
time="2023-11-03T13:40:50Z" level=info msg="kubectl create ns argocd-e2e--test-helm-hook-weight-jcoxa" dir= execID=03a27
time="2023-11-03T13:40:50Z" level=debug msg="namespace/argocd-e2e--test-helm-hook-weight-jcoxa created\n" duration=126.530108ms execID=03a27
time="2023-11-03T13:40:50Z" level=info msg="kubectl label ns argocd-e2e--test-helm-hook-weight-jcoxa e2e.argoproj.io=true" dir= execID=ea89f
time="2023-11-03T13:40:51Z" level=debug msg="namespace/argocd-e2e--test-helm-hook-weight-jcoxa labeled\n" duration=332.748981ms execID=ea89f
time="2023-11-03T13:40:51Z" level=info msg="clean state" duration=2.326483652s id=TestHelmHookWeight-jcoxa name=TestHelmHookWeight password=password username=admin
time="2023-11-03T13:40:52Z" level=info msg=patching jsonPatch="[\n\t{\"op\": \"replace\", \"path\": \"/metadata/annotations\", \"value\": {\"argocd.argoproj.io/hook\": \"Sync\", \"helm.sh/hook-weight\": \"-1\"}},\n\t{\"op\": \"replace\", \"path\": \"/spec/containers/0/command/0\", \"value\": \"false\"}\n]" path=hook/hook.yaml
time="2023-11-03T13:40:52Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:40:52Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/hook\":\"Sync\"},\"name\":\"hook\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:40:52Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:40:52Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=a10db
time="2023-11-03T13:40:52Z" level=debug msg="diff --git a/hook/hook.yaml b/hook/hook.yaml\nindex ca89c3d..bb38194 100644\n--- a/hook/hook.yaml\n+++ b/hook/hook.yaml\n@@ -3,12 +3,13 @@ kind: Pod\n metadata:\n   annotations:\n     argocd.argoproj.io/hook: Sync\n+    helm.sh/hook-weight: \"-1\"\n   name: hook\n spec:\n   containers:\n-    - command:\n-        - \"true\"\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      name: main\n-  restartPolicy: Never\n\\ No newline at end of file\n+  - command:\n+    - \"false\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n+  restartPolicy: Never\n" duration=4.931284ms execID=a10db
time="2023-11-03T13:40:52Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=9b295
time="2023-11-03T13:40:52Z" level=debug msg="[master fd9d373] patch\n 1 file changed, 7 insertions(+), 6 deletions(-)\n" duration=11.802645ms execID=9b295
time="2023-11-03T13:40:52Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=530fe
Handling connection for 9081
time="2023-11-03T13:40:52Z" level=debug duration=34.803398ms execID=530fe
time="2023-11-03T13:40:52Z" level=info msg="../../dist/argocd app create test-helm-hook-weight --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path hook --project default --dest-namespace argocd-e2e--test-helm-hook-weight-jcoxa --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTI1MCwibmJmIjoxNjk5MDE4ODUwLCJpYXQiOjE2OTkwMTg4NTAsImp0aSI6IjVmOWNlMjc3LTVkYjAtNDcyOS1iMDNkLWQ1ZTNkYWZiNTMxNCJ9.x4XFAIW4VOTkJLIWHgy1SSv4YKbqE_EowNjZ20dmChA --insecure" dir= execID=fc94c
time="2023-11-03T13:40:52Z" level=debug msg="application 'test-helm-hook-weight' created\n" duration=258.265483ms execID=fc94c
time="2023-11-03T13:40:52Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:40:52Z" level=info msg="../../dist/argocd app sync test-helm-hook-weight --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTI1MCwibmJmIjoxNjk5MDE4ODUwLCJpYXQiOjE2OTkwMTg4NTAsImp0aSI6IjVmOWNlMjc3LTVkYjAtNDcyOS1iMDNkLWQ1ZTNkYWZiNTMxNCJ9.x4XFAIW4VOTkJLIWHgy1SSv4YKbqE_EowNjZ20dmChA --insecure" dir= execID=00dd7
time="2023-11-03T13:40:57Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                               NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:40:52+00:00                Pod  argocd-e2e--test-helm-hook-weight-jcoxa                   pod  OutOfSync  Missing              \n2023-11-03T13:40:53+00:00                Pod  argocd-e2e--test-helm-hook-weight-jcoxa                  hook                                 \n2023-11-03T13:40:55+00:00                Pod  argocd-e2e--test-helm-hook-weight-jcoxa                  hook   Running   Synced        Sync  pod/hook created\n2023-11-03T13:40:57+00:00                Pod  argocd-e2e--test-helm-hook-weight-jcoxa                  hook    Failed   Synced        Sync  container \"main\" failed with exit code 1\n\nName:               argocd-e2e/test-helm-hook-weight\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-helm-hook-weight-jcoxa\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-helm-hook-weight\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               hook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (fd9d373)\nHealth Status:      Missing\n\nOperation:          Sync\nSync Revision:      fd9d373462015c840c5a441dca46b920b635a4ad\nPhase:              Failed\nStart:              2023-11-03 13:40:52 +0000 UTC\nFinished:           2023-11-03 13:40:57 +0000 UTC\nDuration:           5s\nMessage:            one or more synchronization tasks completed unsuccessfully\n\nGROUP  KIND  NAMESPACE                                NAME  STATUS     HEALTH   HOOK  MESSAGE\n       Pod   argocd-e2e--test-helm-hook-weight-jcoxa  hook  Failed              Sync  container \"main\" failed with exit code 1\n       Pod   argocd-e2e--test-helm-hook-weight-jcoxa  pod   OutOfSync  Missing        \n" duration=4.66683372s execID=00dd7
time="2023-11-03T13:40:57Z" level=error msg="`../../dist/argocd app sync test-helm-hook-weight --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTI1MCwibmJmIjoxNjk5MDE4ODUwLCJpYXQiOjE2OTkwMTg4NTAsImp0aSI6IjVmOWNlMjc3LTVkYjAtNDcyOS1iMDNkLWQ1ZTNkYWZiNTMxNCJ9.x4XFAIW4VOTkJLIWHgy1SSv4YKbqE_EowNjZ20dmChA --insecure` failed exit status 1: time=\"2023-11-03T13:40:57Z\" level=fatal msg=\"Operation has completed with phase: Failed\"" execID=00dd7
time="2023-11-03T13:40:57Z" level=info msg="expectation succeeded: operation phase should be Failed, is Failed"
time="2023-11-03T13:40:57Z" level=info msg="expectation succeeded: right number of results, want 1, got 1"
time="2023-11-03T13:40:57Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestHelmHookWeight (8.32s)
=== RUN   TestHelmHookDeletePolicy
time="2023-11-03T13:40:57Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=31996
time="2023-11-03T13:40:57Z" level=debug msg="namespace \"argocd-e2e--test-helm-hook-weight-jcoxa\" deleted\n" duration=268.433872ms execID=31996
time="2023-11-03T13:40:57Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=fbe4e
time="2023-11-03T13:40:58Z" level=debug msg="No resources found\n" duration=447.584796ms execID=fbe4e
time="2023-11-03T13:40:58Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=d3c13
time="2023-11-03T13:40:58Z" level=debug msg="No resources found\n" duration=267.864888ms execID=d3c13
time="2023-11-03T13:40:59Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:40:59Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTI1OCwibmJmIjoxNjk5MDE4ODU4LCJpYXQiOjE2OTkwMTg4NTgsImp0aSI6IjM1NDEwZjU3LTU0MzItNGFjOC04Yjk1LWRlNDgzNGNlNTQ5YiJ9.P3Wgk4cdDMhh3BtoRKpsumP5auvLXFlM3a1Rb7HyRiE --insecure" dir= execID=3bbd9
time="2023-11-03T13:40:59Z" level=debug duration=94.440281ms execID=3bbd9
time="2023-11-03T13:40:59Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=e7da5
time="2023-11-03T13:40:59Z" level=debug duration=2.021039ms execID=e7da5
time="2023-11-03T13:40:59Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=75df4
time="2023-11-03T13:40:59Z" level=debug duration=1.522343ms execID=75df4
time="2023-11-03T13:40:59Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=d1935
time="2023-11-03T13:40:59Z" level=debug duration=1.499788ms execID=d1935
time="2023-11-03T13:40:59Z" level=info msg="pkill -9 gpg-agent" dir= execID=477ff
time="2023-11-03T13:40:59Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=f93d2
time="2023-11-03T13:40:59Z" level=debug duration=9.021158ms execID=f93d2
time="2023-11-03T13:40:59Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=6a150
time="2023-11-03T13:40:59Z" level=debug duration=35.123341ms execID=6a150
time="2023-11-03T13:40:59Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=d95ad
time="2023-11-03T13:40:59Z" level=debug duration=1.817659ms execID=d95ad
time="2023-11-03T13:40:59Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=9c7a9
time="2023-11-03T13:40:59Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.587368ms execID=9c7a9
time="2023-11-03T13:40:59Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=5055a
time="2023-11-03T13:40:59Z" level=debug duration=29.495994ms execID=5055a
time="2023-11-03T13:40:59Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=6a32e
time="2023-11-03T13:40:59Z" level=debug duration=23.096603ms execID=6a32e
time="2023-11-03T13:40:59Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=9b7e2
time="2023-11-03T13:40:59Z" level=debug duration=2.204954ms execID=9b7e2
time="2023-11-03T13:40:59Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=0133a
Handling connection for 9081
time="2023-11-03T13:40:59Z" level=debug duration=76.598626ms execID=0133a
time="2023-11-03T13:40:59Z" level=info msg="kubectl create ns argocd-e2e--test-helm-hook-delete-policy-hdykc" dir= execID=23ef9
time="2023-11-03T13:40:59Z" level=debug msg="namespace/argocd-e2e--test-helm-hook-delete-policy-hdykc created\n" duration=133.225082ms execID=23ef9
time="2023-11-03T13:40:59Z" level=info msg="kubectl label ns argocd-e2e--test-helm-hook-delete-policy-hdykc e2e.argoproj.io=true" dir= execID=e2838
time="2023-11-03T13:40:59Z" level=debug msg="namespace/argocd-e2e--test-helm-hook-delete-policy-hdykc labeled\n" duration=347.453968ms execID=e2838
time="2023-11-03T13:40:59Z" level=info msg="clean state" duration=2.611191847s id=TestHelmHookDeletePolicy-hdykc name=TestHelmHookDeletePolicy password=password username=admin
time="2023-11-03T13:41:00Z" level=info msg=patching jsonPatch="[{\"op\": \"add\", \"path\": \"/metadata/annotations/helm.sh~1hook-delete-policy\", \"value\": \"hook-succeeded\"}]" path=hook/hook.yaml
time="2023-11-03T13:41:00Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:41:00Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/hook\":\"Sync\"},\"name\":\"hook\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:41:00Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:41:00Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=83313
time="2023-11-03T13:41:00Z" level=debug msg="diff --git a/hook/hook.yaml b/hook/hook.yaml\nindex ca89c3d..215e496 100644\n--- a/hook/hook.yaml\n+++ b/hook/hook.yaml\n@@ -3,12 +3,13 @@ kind: Pod\n metadata:\n   annotations:\n     argocd.argoproj.io/hook: Sync\n+    helm.sh/hook-delete-policy: hook-succeeded\n   name: hook\n spec:\n   containers:\n-    - command:\n-        - \"true\"\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      name: main\n-  restartPolicy: Never\n\\ No newline at end of file\n+  - command:\n+    - \"true\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n+  restartPolicy: Never\n" duration=6.011995ms execID=83313
time="2023-11-03T13:41:00Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=d7cdd
time="2023-11-03T13:41:00Z" level=debug msg="[master 5061781] patch\n 1 file changed, 7 insertions(+), 6 deletions(-)\n" duration=14.222009ms execID=d7cdd
time="2023-11-03T13:41:00Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=a7dce
Handling connection for 9081
time="2023-11-03T13:41:00Z" level=debug duration=41.820046ms execID=a7dce
time="2023-11-03T13:41:00Z" level=info msg="../../dist/argocd app create test-helm-hook-delete-policy --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path hook --project default --dest-namespace argocd-e2e--test-helm-hook-delete-policy-hdykc --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTI1OCwibmJmIjoxNjk5MDE4ODU4LCJpYXQiOjE2OTkwMTg4NTgsImp0aSI6IjM1NDEwZjU3LTU0MzItNGFjOC04Yjk1LWRlNDgzNGNlNTQ5YiJ9.P3Wgk4cdDMhh3BtoRKpsumP5auvLXFlM3a1Rb7HyRiE --insecure" dir= execID=250d1
time="2023-11-03T13:41:01Z" level=debug msg="application 'test-helm-hook-delete-policy' created\n" duration=264.773643ms execID=250d1
time="2023-11-03T13:41:01Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:41:01Z" level=info msg="../../dist/argocd app sync test-helm-hook-delete-policy --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTI1OCwibmJmIjoxNjk5MDE4ODU4LCJpYXQiOjE2OTkwMTg4NTgsImp0aSI6IjM1NDEwZjU3LTU0MzItNGFjOC04Yjk1LWRlNDgzNGNlNTQ5YiJ9.P3Wgk4cdDMhh3BtoRKpsumP5auvLXFlM3a1Rb7HyRiE --insecure" dir= execID=5efc6
time="2023-11-03T13:41:07Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                      NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:41:01+00:00                Pod  argocd-e2e--test-helm-hook-delete-policy-hdykc                   pod  OutOfSync  Missing              \n2023-11-03T13:41:01+00:00                Pod  argocd-e2e--test-helm-hook-delete-policy-hdykc                  hook   Running    Synced        Sync  pod/hook created\n2023-11-03T13:41:01+00:00                Pod  argocd-e2e--test-helm-hook-delete-policy-hdykc                   pod  OutOfSync  Missing              pod/pod created\n2023-11-03T13:41:01+00:00                Pod  argocd-e2e--test-helm-hook-delete-policy-hdykc                   pod    Synced  Progressing              pod/pod created\n2023-11-03T13:41:06+00:00                Pod  argocd-e2e--test-helm-hook-delete-policy-hdykc                   pod    Synced  Healthy              pod/pod created\n2023-11-03T13:41:07+00:00                Pod  argocd-e2e--test-helm-hook-delete-policy-hdykc                  hook  Succeeded   Synced        Sync  pod/hook created\n\nName:               argocd-e2e/test-helm-hook-delete-policy\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-helm-hook-delete-policy-hdykc\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-helm-hook-delete-policy\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               hook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (5061781)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      50617813ad8aebe213174f74eda53f841099b722\nPhase:              Succeeded\nStart:              2023-11-03 13:41:01 +0000 UTC\nFinished:           2023-11-03 13:41:07 +0000 UTC\nDuration:           6s\nMessage:            successfully synced (no more tasks)\n\nGROUP  KIND  NAMESPACE                                       NAME  STATUS     HEALTH   HOOK  MESSAGE\n       Pod   argocd-e2e--test-helm-hook-delete-policy-hdykc  hook  Succeeded           Sync  pod/hook created\n       Pod   argocd-e2e--test-helm-hook-delete-policy-hdykc  pod   Synced     Healthy        pod/pod created\n" duration=6.047454543s execID=5efc6
time="2023-11-03T13:41:07Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:41:07Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:41:07Z" level=info msg="expectation succeeded: right number of results, want 2, got 2"
time="2023-11-03T13:41:07Z" level=info msg="expectation succeeded: pod predicate did not match any pod"
time="2023-11-03T13:41:07Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestHelmHookDeletePolicy (10.00s)
=== RUN   TestDeclarativeHelm
time="2023-11-03T13:41:07Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=7a66f
time="2023-11-03T13:41:07Z" level=debug msg="namespace \"argocd-e2e--test-helm-hook-delete-policy-hdykc\" deleted\n" duration=162.351263ms execID=7a66f
time="2023-11-03T13:41:07Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=25704
time="2023-11-03T13:41:07Z" level=debug msg="No resources found\n" duration=373.774737ms execID=25704
time="2023-11-03T13:41:07Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=8437a
time="2023-11-03T13:41:08Z" level=debug msg="No resources found\n" duration=260.372041ms execID=8437a
time="2023-11-03T13:41:08Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:41:08Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTI2OCwibmJmIjoxNjk5MDE4ODY4LCJpYXQiOjE2OTkwMTg4NjgsImp0aSI6ImU1MjY5YWFmLTRhYTYtNDViZi1iYzYwLWIwNzc0YmY3ZmUzMSJ9.PVUupaQAGnERzlAokUQeE3RXnG4AhwDcYy-909wp5mA --insecure" dir= execID=70de3
time="2023-11-03T13:41:08Z" level=debug duration=82.803224ms execID=70de3
time="2023-11-03T13:41:08Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=63ceb
time="2023-11-03T13:41:08Z" level=debug duration=2.325429ms execID=63ceb
time="2023-11-03T13:41:08Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=6fd75
time="2023-11-03T13:41:08Z" level=debug duration=1.615166ms execID=6fd75
time="2023-11-03T13:41:08Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=11413
time="2023-11-03T13:41:08Z" level=debug duration=1.388676ms execID=11413
time="2023-11-03T13:41:08Z" level=info msg="pkill -9 gpg-agent" dir= execID=6d949
time="2023-11-03T13:41:08Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=88e2a
time="2023-11-03T13:41:08Z" level=debug duration=59.91212ms execID=88e2a
time="2023-11-03T13:41:08Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=6a5f7
time="2023-11-03T13:41:08Z" level=debug duration=37.658273ms execID=6a5f7
time="2023-11-03T13:41:08Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=5e64f
time="2023-11-03T13:41:08Z" level=debug duration=2.039665ms execID=5e64f
time="2023-11-03T13:41:08Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=89b95
time="2023-11-03T13:41:08Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.933907ms execID=89b95
time="2023-11-03T13:41:08Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=1212a
time="2023-11-03T13:41:08Z" level=debug duration=24.802257ms execID=1212a
time="2023-11-03T13:41:08Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=af5f9
time="2023-11-03T13:41:08Z" level=debug duration=30.481692ms execID=af5f9
time="2023-11-03T13:41:08Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=07b60
time="2023-11-03T13:41:08Z" level=debug duration=3.428958ms execID=07b60
time="2023-11-03T13:41:08Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=58be0
Handling connection for 9081
time="2023-11-03T13:41:08Z" level=debug duration=61.719909ms execID=58be0
time="2023-11-03T13:41:08Z" level=info msg="kubectl create ns argocd-e2e--test-declarative-helm-ndibj" dir= execID=42e2e
time="2023-11-03T13:41:09Z" level=debug msg="namespace/argocd-e2e--test-declarative-helm-ndibj created\n" duration=160.388682ms execID=42e2e
time="2023-11-03T13:41:09Z" level=info msg="kubectl label ns argocd-e2e--test-declarative-helm-ndibj e2e.argoproj.io=true" dir= execID=13426
time="2023-11-03T13:41:09Z" level=debug msg="namespace/argocd-e2e--test-declarative-helm-ndibj labeled\n" duration=293.108678ms execID=13426
time="2023-11-03T13:41:09Z" level=info msg="clean state" duration=2.230245209s id=TestDeclarativeHelm-ndibj name=TestDeclarativeHelm password=password username=admin
time="2023-11-03T13:41:10Z" level=info msg="kubectl -n argocd-e2e apply -f /tmp/1649687569" dir= execID=2d0b8
time="2023-11-03T13:41:11Z" level=debug msg="application.argoproj.io/test-declarative-helm created\n" duration=1.109218865s execID=2d0b8
time="2023-11-03T13:41:11Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:41:11Z" level=info msg="../../dist/argocd app sync test-declarative-helm --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTI2OCwibmJmIjoxNjk5MDE4ODY4LCJpYXQiOjE2OTkwMTg4NjgsImp0aSI6ImU1MjY5YWFmLTRhYTYtNDViZi1iYzYwLWIwNzc0YmY3ZmUzMSJ9.PVUupaQAGnERzlAokUQeE3RXnG4AhwDcYy-909wp5mA --insecure" dir= execID=2ba8b
time="2023-11-03T13:41:12Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                               NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:41:11+00:00          ConfigMap  argocd-e2e--test-declarative-helm-ndibj                my-map  OutOfSync  Missing              \n2023-11-03T13:41:12+00:00          ConfigMap  argocd-e2e--test-declarative-helm-ndibj                my-map  OutOfSync  Missing              configmap/my-map created\n2023-11-03T13:41:12+00:00          ConfigMap  argocd-e2e--test-declarative-helm-ndibj                my-map    Synced  Missing              configmap/my-map created\n\nName:               argocd-e2e/test-declarative-helm\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-declarative-helm-ndibj\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-declarative-helm\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             HEAD\nPath:               helm\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to HEAD (1a41c26)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      1a41c262371a878563ff9bb540241bdf812cd64a\nPhase:              Succeeded\nStart:              2023-11-03 13:41:11 +0000 UTC\nFinished:           2023-11-03 13:41:12 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-declarative-helm-ndibj  my-map  Synced                configmap/my-map created\n" duration=897.284419ms execID=2ba8b
time="2023-11-03T13:41:12Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:41:12Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:41:12Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:41:12Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:41:12Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestDeclarativeHelm (5.26s)
=== RUN   TestDeclarativeHelmInvalidValuesFile
time="2023-11-03T13:41:12Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=dcd99
time="2023-11-03T13:41:12Z" level=debug msg="namespace \"argocd-e2e--test-declarative-helm-ndibj\" deleted\n" duration=303.177449ms execID=dcd99
time="2023-11-03T13:41:12Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=380af
time="2023-11-03T13:41:13Z" level=debug msg="No resources found\n" duration=492.634986ms execID=380af
time="2023-11-03T13:41:13Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=7f406
time="2023-11-03T13:41:13Z" level=debug msg="No resources found\n" duration=307.364965ms execID=7f406
time="2023-11-03T13:41:14Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:41:14Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTI3NCwibmJmIjoxNjk5MDE4ODc0LCJpYXQiOjE2OTkwMTg4NzQsImp0aSI6IjEwM2NhMjY5LTIxY2QtNDkzNS04OGNhLWQ1MzFiZTAyMjcyOSJ9.6sqZw794-PH8nzxpBiQ5DdITU9nuLX-zl377akPg6s0 --insecure" dir= execID=a5609
time="2023-11-03T13:41:14Z" level=debug duration=82.973707ms execID=a5609
time="2023-11-03T13:41:14Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=7c3e5
time="2023-11-03T13:41:14Z" level=debug duration=2.109116ms execID=7c3e5
time="2023-11-03T13:41:14Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=25240
time="2023-11-03T13:41:14Z" level=debug duration=1.713478ms execID=25240
time="2023-11-03T13:41:14Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=d8722
time="2023-11-03T13:41:14Z" level=debug duration=1.457003ms execID=d8722
time="2023-11-03T13:41:14Z" level=info msg="pkill -9 gpg-agent" dir= execID=20cdb
time="2023-11-03T13:41:14Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=2b965
time="2023-11-03T13:41:14Z" level=debug duration=58.297192ms execID=2b965
time="2023-11-03T13:41:14Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=726cf
time="2023-11-03T13:41:14Z" level=debug duration=39.334004ms execID=726cf
time="2023-11-03T13:41:14Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=31424
time="2023-11-03T13:41:14Z" level=debug duration=1.924847ms execID=31424
time="2023-11-03T13:41:14Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=285a9
time="2023-11-03T13:41:14Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.20115ms execID=285a9
time="2023-11-03T13:41:14Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=a5cf5
time="2023-11-03T13:41:14Z" level=debug duration=28.151008ms execID=a5cf5
time="2023-11-03T13:41:14Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=713c7
time="2023-11-03T13:41:14Z" level=debug duration=30.946046ms execID=713c7
time="2023-11-03T13:41:14Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=ba070
time="2023-11-03T13:41:14Z" level=debug duration=2.275415ms execID=ba070
time="2023-11-03T13:41:14Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=0aaf1
Handling connection for 9081
time="2023-11-03T13:41:14Z" level=debug duration=60.280525ms execID=0aaf1
time="2023-11-03T13:41:14Z" level=info msg="kubectl create ns argocd-e2e--test-declarative-helm-invalid-values-file-nrwyk" dir= execID=44cea
time="2023-11-03T13:41:14Z" level=debug msg="namespace/argocd-e2e--test-declarative-helm-invalid-values-file-nrwyk created\n" duration=156.653814ms execID=44cea
time="2023-11-03T13:41:14Z" level=info msg="kubectl label ns argocd-e2e--test-declarative-helm-invalid-values-file-nrwyk e2e.argoproj.io=true" dir= execID=122e0
time="2023-11-03T13:41:15Z" level=debug msg="namespace/argocd-e2e--test-declarative-helm-invalid-values-file-nrwyk labeled\n" duration=314.832973ms execID=122e0
time="2023-11-03T13:41:15Z" level=info msg="clean state" duration=2.788348744s id=TestDeclarativeHelmInvalidValuesFile-nrwyk name=TestDeclarativeHelmInvalidValuesFile password=password username=admin
time="2023-11-03T13:41:16Z" level=info msg="kubectl -n argocd-e2e apply -f /tmp/466124865" dir= execID=438d9
time="2023-11-03T13:41:17Z" level=debug msg="application.argoproj.io/test-declarative-helm-invalid-values-file created\n" duration=1.057483978s execID=438d9
time="2023-11-03T13:41:17Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:41:17Z" level=info msg="pending: health to should Healthy, is "
time="2023-11-03T13:41:20Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:41:20Z" level=info msg="expectation succeeded: sync status to be Unknown, is Unknown"
time="2023-11-03T13:41:20Z" level=info msg="expectation succeeded: condition {ComparisonError does-not-exist-values.yaml: no such file or directory} in [{ComparisonError rpc error: code = Unknown desc = `helm template . --name-template test-declarative-helm-invalid-values-file --namespace argocd-e2e--test-declarative-helm-invalid-values-file-nrwyk --kube-version 1.26 --values .helm/does-not-exist-values.yaml --api-versions admissionregistration.k8s.io/v1 --api-versions admissionregistration.k8s.io/v1/MutatingWebhookConfiguration --api-versions admissionregistration.k8s.io/v1/ValidatingWebhookConfiguration --api-versions apiextensions.k8s.io/v1 --api-versions apiextensions.k8s.io/v1/CustomResourceDefinition --api-versions apiregistration.k8s.io/v1 --api-versions apiregistration.k8s.io/v1/APIService --api-versions apiserver.openshift.io/v1 --api-versions apiserver.openshift.io/v1/APIRequestCount --api-versions apps.openshift.io/v1 --api-versions apps.openshift.io/v1/DeploymentConfig --api-versions apps/v1 --api-versions apps/v1/ControllerRevision --api-versions apps/v1/DaemonSet --api-versions apps/v1/Deployment --api-versions apps/v1/ReplicaSet --api-versions apps/v1/StatefulSet --api-versions argoproj.io/v1alpha1 --api-versions argoproj.io/v1alpha1/AnalysisRun --api-versions argoproj.io/v1alpha1/AnalysisTemplate --api-versions argoproj.io/v1alpha1/AppProject --api-versions argoproj.io/v1alpha1/Application --api-versions argoproj.io/v1alpha1/ApplicationSet --api-versions argoproj.io/v1alpha1/ArgoCD --api-versions argoproj.io/v1alpha1/ClusterAnalysisTemplate --api-versions argoproj.io/v1alpha1/Experiment --api-versions argoproj.io/v1alpha1/NonStatusSubResource --api-versions argoproj.io/v1alpha1/Rollout --api-versions argoproj.io/v1alpha1/RolloutManager --api-versions argoproj.io/v1alpha1/StatusSubResource --api-versions authorization.openshift.io/v1 --api-versions authorization.openshift.io/v1/RoleBindingRestriction --api-versions autoscaling.openshift.io/v1 --api-versions autoscaling.openshift.io/v1/ClusterAutoscaler --api-versions autoscaling.openshift.io/v1beta1 --api-versions autoscaling.openshift.io/v1beta1/MachineAutoscaler --api-versions autoscaling/v1 --api-versions autoscaling/v1/HorizontalPodAutoscaler --api-versions autoscaling/v2 --api-versions autoscaling/v2/HorizontalPodAutoscaler --api-versions batch/v1 --api-versions batch/v1/CronJob --api-versions batch/v1/Job --api-versions build.openshift.io/v1 --api-versions build.openshift.io/v1/Build --api-versions build.openshift.io/v1/BuildConfig --api-versions certificates.k8s.io/v1 --api-versions certificates.k8s.io/v1/CertificateSigningRequest --api-versions cloud.network.openshift.io/v1 --api-versions cloud.network.openshift.io/v1/CloudPrivateIPConfig --api-versions cloudcredential.openshift.io/v1 --api-versions cloudcredential.openshift.io/v1/CredentialsRequest --api-versions cluster.open-cluster-management.io/v1alpha1 --api-versions cluster.open-cluster-management.io/v1alpha1/PlacementDecision --api-versions config.openshift.io/v1 --api-versions config.openshift.io/v1/APIServer --api-versions config.openshift.io/v1/Authentication --api-versions config.openshift.io/v1/Build --api-versions config.openshift.io/v1/ClusterOperator --api-versions config.openshift.io/v1/ClusterVersion --api-versions config.openshift.io/v1/Console --api-versions config.openshift.io/v1/DNS --api-versions config.openshift.io/v1/FeatureGate --api-versions config.openshift.io/v1/Image --api-versions config.openshift.io/v1/ImageContentPolicy --api-versions config.openshift.io/v1/ImageDigestMirrorSet --api-versions config.openshift.io/v1/ImageTagMirrorSet --api-versions config.openshift.io/v1/Infrastructure --api-versions config.openshift.io/v1/Ingress --api-versions config.openshift.io/v1/Network --api-versions config.openshift.io/v1/Node --api-versions config.openshift.io/v1/OAuth --api-versions config.openshift.io/v1/OperatorHub --api-versions config.openshift.io/v1/Project --api-versions config.openshift.io/v1/Proxy --api-versions config.openshift.io/v1/Scheduler --api-versions console.openshift.io/v1 --api-versions console.openshift.io/v1/ConsoleCLIDownload --api-versions console.openshift.io/v1/ConsoleExternalLogLink --api-versions console.openshift.io/v1/ConsoleLink --api-versions console.openshift.io/v1/ConsoleNotification --api-versions console.openshift.io/v1/ConsolePlugin --api-versions console.openshift.io/v1/ConsoleQuickStart --api-versions console.openshift.io/v1/ConsoleYAMLSample --api-versions console.openshift.io/v1alpha1 --api-versions console.openshift.io/v1alpha1/ConsolePlugin --api-versions controlplane.operator.openshift.io/v1alpha1 --api-versions controlplane.operator.openshift.io/v1alpha1/PodNetworkConnectivityCheck --api-versions coordination.k8s.io/v1 --api-versions coordination.k8s.io/v1/Lease --api-versions discovery.k8s.io/v1 --api-versions discovery.k8s.io/v1/EndpointSlice --api-versions events.k8s.io/v1 --api-versions events.k8s.io/v1/Event --api-versions flowcontrol.apiserver.k8s.io/v1beta2 --api-versions flowcontrol.apiserver.k8s.io/v1beta2/FlowSchema --api-versions flowcontrol.apiserver.k8s.io/v1beta2/PriorityLevelConfiguration --api-versions flowcontrol.apiserver.k8s.io/v1beta3 --api-versions flowcontrol.apiserver.k8s.io/v1beta3/FlowSchema --api-versions flowcontrol.apiserver.k8s.io/v1beta3/PriorityLevelConfiguration --api-versions helm.openshift.io/v1beta1 --api-versions helm.openshift.io/v1beta1/HelmChartRepository --api-versions helm.openshift.io/v1beta1/ProjectHelmChartRepository --api-versions image.openshift.io/v1 --api-versions image.openshift.io/v1/Image --api-versions image.openshift.io/v1/ImageStream --api-versions imageregistry.operator.openshift.io/v1 --api-versions imageregistry.operator.openshift.io/v1/Config --api-versions imageregistry.operator.openshift.io/v1/ImagePruner --api-versions infrastructure.cluster.x-k8s.io/v1alpha5 --api-versions infrastructure.cluster.x-k8s.io/v1alpha5/Metal3Remediation --api-versions infrastructure.cluster.x-k8s.io/v1alpha5/Metal3RemediationTemplate --api-versions infrastructure.cluster.x-k8s.io/v1beta1 --api-versions infrastructure.cluster.x-k8s.io/v1beta1/Metal3Remediation --api-versions infrastructure.cluster.x-k8s.io/v1beta1/Metal3RemediationTemplate --api-versions ingress.operator.openshift.io/v1 --api-versions ingress.operator.openshift.io/v1/DNSRecord --api-versions k8s.cni.cncf.io/v1 --api-versions k8s.cni.cncf.io/v1/NetworkAttachmentDefinition --api-versions machine.openshift.io/v1 --api-versions machine.openshift.io/v1/ControlPlaneMachineSet --api-versions machine.openshift.io/v1beta1 --api-versions machine.openshift.io/v1beta1/Machine --api-versions machine.openshift.io/v1beta1/MachineHealthCheck --api-versions machine.openshift.io/v1beta1/MachineSet --api-versions machineconfiguration.openshift.io/v1 --api-versions machineconfiguration.openshift.io/v1/ContainerRuntimeConfig --api-versions machineconfiguration.openshift.io/v1/ControllerConfig --api-versions machineconfiguration.openshift.io/v1/KubeletConfig --api-versions machineconfiguration.openshift.io/v1/MachineConfig --api-versions machineconfiguration.openshift.io/v1/MachineConfigPool --api-versions metal3.io/v1alpha1 --api-versions metal3.io/v1alpha1/BMCEventSubscription --api-versions metal3.io/v1alpha1/BareMetalHost --api-versions metal3.io/v1alpha1/FirmwareSchema --api-versions metal3.io/v1alpha1/HardwareData --api-versions metal3.io/v1alpha1/HostFirmwareSettings --api-versions metal3.io/v1alpha1/PreprovisioningImage --api-versions metal3.io/v1alpha1/Provisioning --api-versions migration.k8s.io/v1alpha1 --api-versions migration.k8s.io/v1alpha1/StorageState --api-versions migration.k8s.io/v1alpha1/StorageVersionMigration --api-versions monitoring.coreos.com/v1 --api-versions monitoring.coreos.com/v1/Alertmanager --api-versions monitoring.coreos.com/v1/PodMonitor --api-versions monitoring.coreos.com/v1/Probe --api-versions monitoring.coreos.com/v1/Prometheus --api-versions monitoring.coreos.com/v1/PrometheusRule --api-versions monitoring.coreos.com/v1/ServiceMonitor --api-versions monitoring.coreos.com/v1/ThanosRuler --api-versions monitoring.coreos.com/v1alpha1 --api-versions monitoring.coreos.com/v1alpha1/AlertmanagerConfig --api-versions monitoring.coreos.com/v1beta1 --api-versions monitoring.coreos.com/v1beta1/AlertmanagerConfig --api-versions network.openshift.io/v1 --api-versions network.openshift.io/v1/ClusterNetwork --api-versions network.openshift.io/v1/EgressNetworkPolicy --api-versions network.openshift.io/v1/HostSubnet --api-versions network.openshift.io/v1/NetNamespace --api-versions network.operator.openshift.io/v1 --api-versions network.operator.openshift.io/v1/EgressRouter --api-versions network.operator.openshift.io/v1/OperatorPKI --api-versions networking.k8s.io/v1 --api-versions networking.k8s.io/v1/Ingress --api-versions networking.k8s.io/v1/IngressClass --api-versions networking.k8s.io/v1/NetworkPolicy --api-versions node.k8s.io/v1 --api-versions node.k8s.io/v1/RuntimeClass --api-versions oauth.openshift.io/v1 --api-versions oauth.openshift.io/v1/OAuthAccessToken --api-versions oauth.openshift.io/v1/OAuthAuthorizeToken --api-versions oauth.openshift.io/v1/OAuthClient --api-versions oauth.openshift.io/v1/OAuthClientAuthorization --api-versions oauth.openshift.io/v1/UserOAuthAccessToken --api-versions operator.openshift.io/v1 --api-versions operator.openshift.io/v1/Authentication --api-versions operator.openshift.io/v1/CSISnapshotController --api-versions operator.openshift.io/v1/CloudCredential --api-versions operator.openshift.io/v1/ClusterCSIDriver --api-versions operator.openshift.io/v1/Config --api-versions operator.openshift.io/v1/Console --api-versions operator.openshift.io/v1/DNS --api-versions operator.openshift.io/v1/Etcd --api-versions operator.openshift.io/v1/IngressController --api-versions operator.openshift.io/v1/InsightsOperator --api-versions operator.openshift.io/v1/KubeAPIServer --api-versions operator.openshift.io/v1/KubeControllerManager --api-versions operator.openshift.io/v1/KubeScheduler --api-versions operator.openshift.io/v1/KubeStorageVersionMigrator --api-versions operator.openshift.io/v1/Network --api-versions operator.openshift.io/v1/OpenShiftAPIServer --api-versions operator.openshift.io/v1/OpenShiftControllerManager --api-versions operator.openshift.io/v1/ServiceCA --api-versions operator.openshift.io/v1/Storage --api-versions operator.openshift.io/v1alpha1 --api-versions operator.openshift.io/v1alpha1/ImageContentSourcePolicy --api-versions operator.tekton.dev/v1alpha1 --api-versions operator.tekton.dev/v1alpha1/OpenShiftPipelinesAsCode --api-versions operator.tekton.dev/v1alpha1/TektonAddon --api-versions operator.tekton.dev/v1alpha1/TektonChain --api-versions operator.tekton.dev/v1alpha1/TektonConfig --api-versions operator.tekton.dev/v1alpha1/TektonHub --api-versions operator.tekton.dev/v1alpha1/TektonInstallerSet --api-versions operator.tekton.dev/v1alpha1/TektonPipeline --api-versions operator.tekton.dev/v1alpha1/TektonResult --api-versions operator.tekton.dev/v1alpha1/TektonTrigger --api-versions operators.coreos.com/v1 --api-versions operators.coreos.com/v1/OLMConfig --api-versions operators.coreos.com/v1/Operator --api-versions operators.coreos.com/v1/OperatorCondition --api-versions operators.coreos.com/v1/OperatorGroup --api-versions operators.coreos.com/v1alpha1 --api-versions operators.coreos.com/v1alpha1/CatalogSource --api-versions operators.coreos.com/v1alpha1/ClusterServiceVersion --api-versions operators.coreos.com/v1alpha1/InstallPlan --api-versions operators.coreos.com/v1alpha1/Subscription --api-versions operators.coreos.com/v1alpha2 --api-versions operators.coreos.com/v1alpha2/OperatorGroup --api-versions operators.coreos.com/v2 --api-versions operators.coreos.com/v2/OperatorCondition --api-versions performance.openshift.io/v1 --api-versions performance.openshift.io/v1/PerformanceProfile --api-versions performance.openshift.io/v1alpha1 --api-versions performance.openshift.io/v1alpha1/PerformanceProfile --api-versions performance.openshift.io/v2 --api-versions performance.openshift.io/v2/PerformanceProfile --api-versions pipelines.openshift.io/v1alpha1 --api-versions pipelines.openshift.io/v1alpha1/GitopsService --api-versions pipelinesascode.tekton.dev/v1alpha1 --api-versions pipelinesascode.tekton.dev/v1alpha1/Repository --api-versions policy/v1 --api-versions policy/v1/PodDisruptionBudget --api-versions project.openshift.io/v1 --api-versions project.openshift.io/v1/Project --api-versions quota.openshift.io/v1 --api-versions quota.openshift.io/v1/ClusterResourceQuota --api-versions rbac.authorization.k8s.io/v1 --api-versions rbac.authorization.k8s.io/v1/ClusterRole --api-versions rbac.authorization.k8s.io/v1/ClusterRoleBinding --api-versions rbac.authorization.k8s.io/v1/Role --api-versions rbac.authorization.k8s.io/v1/RoleBinding --api-versions resolution.tekton.dev/v1alpha1 --api-versions resolution.tekton.dev/v1alpha1/ResolutionRequest --api-versions resolution.tekton.dev/v1beta1 --api-versions resolution.tekton.dev/v1beta1/ResolutionRequest --api-versions route.openshift.io/v1 --api-versions route.openshift.io/v1/Route --api-versions samples.operator.openshift.io/v1 --api-versions samples.operator.openshift.io/v1/Config --api-versions scheduling.k8s.io/v1 --api-versions scheduling.k8s.io/v1/PriorityClass --api-versions security.internal.openshift.io/v1 --api-versions security.internal.openshift.io/v1/RangeAllocation --api-versions security.openshift.io/v1 --api-versions security.openshift.io/v1/RangeAllocation --api-versions security.openshift.io/v1/SecurityContextConstraints --api-versions snapshot.storage.k8s.io/v1 --api-versions snapshot.storage.k8s.io/v1/VolumeSnapshot --api-versions snapshot.storage.k8s.io/v1/VolumeSnapshotClass --api-versions snapshot.storage.k8s.io/v1/VolumeSnapshotContent --api-versions storage.k8s.io/v1 --api-versions storage.k8s.io/v1/CSIDriver --api-versions storage.k8s.io/v1/CSINode --api-versions storage.k8s.io/v1/CSIStorageCapacity --api-versions storage.k8s.io/v1/StorageClass --api-versions storage.k8s.io/v1/VolumeAttachment --api-versions storage.k8s.io/v1beta1 --api-versions storage.k8s.io/v1beta1/CSIStorageCapacity --api-versions tekton.dev/v1 --api-versions tekton.dev/v1/Pipeline --api-versions tekton.dev/v1/PipelineRun --api-versions tekton.dev/v1/Task --api-versions tekton.dev/v1/TaskRun --api-versions tekton.dev/v1alpha1 --api-versions tekton.dev/v1alpha1/VerificationPolicy --api-versions tekton.dev/v1beta1 --api-versions tekton.dev/v1beta1/ClusterTask --api-versions tekton.dev/v1beta1/CustomRun --api-versions tekton.dev/v1beta1/Pipeline --api-versions tekton.dev/v1beta1/PipelineRun --api-versions tekton.dev/v1beta1/Task --api-versions tekton.dev/v1beta1/TaskRun --api-versions template.openshift.io/v1 --api-versions template.openshift.io/v1/BrokerTemplateInstance --api-versions template.openshift.io/v1/Template --api-versions template.openshift.io/v1/TemplateInstance --api-versions triggers.tekton.dev/v1alpha1 --api-versions triggers.tekton.dev/v1alpha1/ClusterInterceptor --api-versions triggers.tekton.dev/v1alpha1/ClusterTriggerBinding --api-versions triggers.tekton.dev/v1alpha1/EventListener --api-versions triggers.tekton.dev/v1alpha1/Interceptor --api-versions triggers.tekton.dev/v1alpha1/Trigger --api-versions triggers.tekton.dev/v1alpha1/TriggerBinding --api-versions triggers.tekton.dev/v1alpha1/TriggerTemplate --api-versions triggers.tekton.dev/v1beta1 --api-versions triggers.tekton.dev/v1beta1/ClusterTriggerBinding --api-versions triggers.tekton.dev/v1beta1/EventListener --api-versions triggers.tekton.dev/v1beta1/Trigger --api-versions triggers.tekton.dev/v1beta1/TriggerBinding --api-versions triggers.tekton.dev/v1beta1/TriggerTemplate --api-versions tuned.openshift.io/v1 --api-versions tuned.openshift.io/v1/Profile --api-versions tuned.openshift.io/v1/Tuned --api-versions user.openshift.io/v1 --api-versions user.openshift.io/v1/Group --api-versions user.openshift.io/v1/Identity --api-versions user.openshift.io/v1/User --api-versions v1 --api-versions v1/ConfigMap --api-versions v1/Endpoints --api-versions v1/Event --api-versions v1/LimitRange --api-versions v1/Namespace --api-versions v1/Node --api-versions v1/PersistentVolume --api-versions v1/PersistentVolumeClaim --api-versions v1/Pod --api-versions v1/PodTemplate --api-versions v1/ReplicationController --api-versions v1/ResourceQuota --api-versions v1/Secret --api-versions v1/Service --api-versions v1/ServiceAccount --api-versions whereabouts.cni.cncf.io/v1alpha1 --api-versions whereabouts.cni.cncf.io/v1alpha1/IPPool --api-versions whereabouts.cni.cncf.io/v1alpha1/OverlappingRangeIPReservation --include-crds` failed exit status 1: Error: open .helm/does-not-exist-values.yaml: no such file or directory 2023-11-03 13:41:17 +0000 UTC}]"
time="2023-11-03T13:41:20Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestDeclarativeHelmInvalidValuesFile (7.88s)
=== RUN   TestHelmRepo
time="2023-11-03T13:41:20Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=2cbbb
time="2023-11-03T13:41:20Z" level=debug msg="namespace \"argocd-e2e--test-declarative-helm-invalid-values-file-nrwyk\" deleted\n" duration=321.823195ms execID=2cbbb
time="2023-11-03T13:41:20Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=6eb67
time="2023-11-03T13:41:21Z" level=debug msg="No resources found\n" duration=360.455923ms execID=6eb67
time="2023-11-03T13:41:21Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=1f7ea
time="2023-11-03T13:41:21Z" level=debug msg="No resources found\n" duration=163.560112ms execID=1f7ea
time="2023-11-03T13:41:21Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:41:21Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTI4MSwibmJmIjoxNjk5MDE4ODgxLCJpYXQiOjE2OTkwMTg4ODEsImp0aSI6IjUxMTFhZTNjLTkxZTMtNGNmOC05ZTYwLTI5YWVlYzBlOTQ4NCJ9.lAZC78Nmbt8KMcwfAyUXC_baFTuLQVPaON8seaWFQkA --insecure" dir= execID=5e969
time="2023-11-03T13:41:22Z" level=debug duration=81.47141ms execID=5e969
time="2023-11-03T13:41:22Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=b3c16
time="2023-11-03T13:41:22Z" level=debug duration=2.019227ms execID=b3c16
time="2023-11-03T13:41:22Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=afad0
time="2023-11-03T13:41:22Z" level=debug duration=1.808295ms execID=afad0
time="2023-11-03T13:41:22Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=2e61b
time="2023-11-03T13:41:22Z" level=debug duration=1.522793ms execID=2e61b
time="2023-11-03T13:41:22Z" level=info msg="pkill -9 gpg-agent" dir= execID=e2fcd
time="2023-11-03T13:41:22Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=d9082
time="2023-11-03T13:41:22Z" level=debug duration=9.616115ms execID=d9082
time="2023-11-03T13:41:22Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=d5480
time="2023-11-03T13:41:22Z" level=debug duration=61.21145ms execID=d5480
time="2023-11-03T13:41:22Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=7ac0a
time="2023-11-03T13:41:22Z" level=debug duration=1.980466ms execID=7ac0a
time="2023-11-03T13:41:22Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=ecfca
time="2023-11-03T13:41:22Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.908989ms execID=ecfca
time="2023-11-03T13:41:22Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=eb128
time="2023-11-03T13:41:22Z" level=debug duration=28.442311ms execID=eb128
time="2023-11-03T13:41:22Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=0d875
time="2023-11-03T13:41:22Z" level=debug duration=34.413073ms execID=0d875
time="2023-11-03T13:41:22Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=b357b
time="2023-11-03T13:41:22Z" level=debug duration=2.97318ms execID=b357b
time="2023-11-03T13:41:22Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=fb719
Handling connection for 9081
time="2023-11-03T13:41:22Z" level=debug duration=61.526312ms execID=fb719
time="2023-11-03T13:41:22Z" level=info msg="kubectl create ns argocd-e2e--test-helm-repo-sbwjr" dir= execID=39cad
time="2023-11-03T13:41:22Z" level=debug msg="namespace/argocd-e2e--test-helm-repo-sbwjr created\n" duration=229.291497ms execID=39cad
time="2023-11-03T13:41:22Z" level=info msg="kubectl label ns argocd-e2e--test-helm-repo-sbwjr e2e.argoproj.io=true" dir= execID=be5e7
time="2023-11-03T13:41:22Z" level=debug msg="namespace/argocd-e2e--test-helm-repo-sbwjr labeled\n" duration=303.840589ms execID=be5e7
time="2023-11-03T13:41:22Z" level=info msg="clean state" duration=2.472295743s id=TestHelmRepo-sbwjr name=TestHelmRepo password=password username=admin
time="2023-11-03T13:41:22Z" level=info msg="../../dist/argocd cert add-tls argocd-e2e-server --from /argocd-e2e/argo-cd/test/fixture/certs/argocd-test-ca.crt --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTI4MSwibmJmIjoxNjk5MDE4ODgxLCJpYXQiOjE2OTkwMTg4ODEsImp0aSI6IjUxMTFhZTNjLTkxZTMtNGNmOC05ZTYwLTI5YWVlYzBlOTQ4NCJ9.lAZC78Nmbt8KMcwfAyUXC_baFTuLQVPaON8seaWFQkA --insecure" dir= execID=75b8b
time="2023-11-03T13:41:22Z" level=debug msg="Reading TLS certificate data in PEM format from '/argocd-e2e/argo-cd/test/fixture/certs/argocd-test-ca.crt'\nCreated entry with 0 PEM certificates for repository server argocd-e2e-server\n" duration=129.63472ms execID=75b8b
time="2023-11-03T13:41:22Z" level=info msg="Waiting for API server to restart"
time="2023-11-03T13:41:22Z" level=info msg="kubectl rollout restart deployment argocd-test-server" dir= execID=59842
time="2023-11-03T13:41:23Z" level=debug msg="deployment.apps/argocd-test-server restarted\n" duration=367.406694ms execID=59842
time="2023-11-03T13:41:23Z" level=info msg="kubectl rollout status deployment argocd-test-server" dir= execID=8682f
time="2023-11-03T13:41:53Z" level=debug msg="Waiting for deployment \"argocd-test-server\" rollout to finish: 1 old replicas are pending termination...\nWaiting for deployment \"argocd-test-server\" rollout to finish: 1 old replicas are pending termination...\ndeployment \"argocd-test-server\" successfully rolled out\n" duration=30.365481241s execID=8682f
time="2023-11-03T13:41:53Z" level=info msg="Waiting for repo server to restart"
time="2023-11-03T13:41:53Z" level=info msg="kubectl rollout restart deployment argocd-test-repo-server" dir= execID=5336f
time="2023-11-03T13:41:53Z" level=debug msg="deployment.apps/argocd-test-repo-server restarted\n" duration=250.17871ms execID=5336f
time="2023-11-03T13:41:53Z" level=info msg="kubectl rollout status deployment argocd-test-repo-server" dir= execID=02143
time="2023-11-03T13:42:04Z" level=debug msg="Waiting for deployment \"argocd-test-repo-server\" rollout to finish: 1 old replicas are pending termination...\nWaiting for deployment \"argocd-test-repo-server\" rollout to finish: 1 old replicas are pending termination...\ndeployment \"argocd-test-repo-server\" successfully rolled out\n" duration=10.487797017s execID=02143
time="2023-11-03T13:42:14Z" level=info msg="../../dist/argocd repo add https://argocd-e2e-server:9444/helm-repo --username admin --password password --tls-client-cert-path /argocd-e2e/argo-cd/test/fixture/certs/argocd-test-client.crt --tls-client-cert-key-path /argocd-e2e/argo-cd/test/fixture/certs/argocd-test-client.key --type helm --name custom-repo --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTI4MSwibmJmIjoxNjk5MDE4ODgxLCJpYXQiOjE2OTkwMTg4ODEsImp0aSI6IjUxMTFhZTNjLTkxZTMtNGNmOC05ZTYwLTI5YWVlYzBlOTQ4NCJ9.lAZC78Nmbt8KMcwfAyUXC_baFTuLQVPaON8seaWFQkA --insecure" dir= execID=45a05
time="2023-11-03T13:42:14Z" level=debug msg="Repository 'https://argocd-e2e-server:9444/helm-repo' added\n" duration=224.0289ms execID=45a05
time="2023-11-03T13:42:15Z" level=info msg="../../dist/argocd app create test-helm-repo --repo https://argocd-e2e-server:9444/helm-repo --dest-server https://kubernetes.default.svc --helm-chart helm --project default --revision 1.0.0 --dest-namespace argocd-e2e--test-helm-repo-sbwjr --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTI4MSwibmJmIjoxNjk5MDE4ODgxLCJpYXQiOjE2OTkwMTg4ODEsImp0aSI6IjUxMTFhZTNjLTkxZTMtNGNmOC05ZTYwLTI5YWVlYzBlOTQ4NCJ9.lAZC78Nmbt8KMcwfAyUXC_baFTuLQVPaON8seaWFQkA --insecure" dir= execID=7e56c
time="2023-11-03T13:42:16Z" level=debug msg="application 'test-helm-repo' created\n" duration=340.440065ms execID=7e56c
time="2023-11-03T13:42:16Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:42:16Z" level=info msg="../../dist/argocd app sync test-helm-repo --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTI4MSwibmJmIjoxNjk5MDE4ODgxLCJpYXQiOjE2OTkwMTg4ODEsImp0aSI6IjUxMTFhZTNjLTkxZTMtNGNmOC05ZTYwLTI5YWVlYzBlOTQ4NCJ9.lAZC78Nmbt8KMcwfAyUXC_baFTuLQVPaON8seaWFQkA --insecure" dir= execID=e11d9
time="2023-11-03T13:42:16Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                        NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:42:16+00:00          ConfigMap  argocd-e2e--test-helm-repo-sbwjr                my-map  OutOfSync  Missing              \n2023-11-03T13:42:16+00:00          ConfigMap  argocd-e2e--test-helm-repo-sbwjr                my-map  OutOfSync  Missing              configmap/my-map created\n2023-11-03T13:42:16+00:00          ConfigMap  argocd-e2e--test-helm-repo-sbwjr                my-map    Synced  Missing              configmap/my-map created\n\nName:               argocd-e2e/test-helm-repo\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-helm-repo-sbwjr\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-helm-repo\nRepo:               https://argocd-e2e-server:9444/helm-repo\nTarget:             1.0.0\nPath:               \nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to 1.0.0\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      1.0.0\nPhase:              Succeeded\nStart:              2023-11-03 13:42:16 +0000 UTC\nFinished:           2023-11-03 13:42:16 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                         NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-helm-repo-sbwjr  my-map  Synced                configmap/my-map created\n" duration=821.419814ms execID=e11d9
time="2023-11-03T13:42:16Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:42:16Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:42:16Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:42:16Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:42:16Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestHelmRepo (56.57s)
=== RUN   TestHelmValues
time="2023-11-03T13:42:16Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=06d5e
time="2023-11-03T13:42:17Z" level=debug msg="namespace \"argocd-e2e--test-helm-repo-sbwjr\" deleted\n" duration=258.741967ms execID=06d5e
time="2023-11-03T13:42:17Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=4f255
time="2023-11-03T13:42:17Z" level=debug msg="No resources found\n" duration=583.202614ms execID=4f255
time="2023-11-03T13:42:17Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=82370
time="2023-11-03T13:42:18Z" level=debug msg="No resources found\n" duration=421.092453ms execID=82370
time="2023-11-03T13:42:19Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:42:19Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTMzOSwibmJmIjoxNjk5MDE4OTM5LCJpYXQiOjE2OTkwMTg5MzksImp0aSI6ImUyYzBjNzcwLTVkMmQtNGE0Yy1iMzcxLWIyMmIxNGNlMzljZCJ9.csNIZcXC_ECElVIoYa0VvuXSwYxb-jA4uhNp5mSjsuo --insecure" dir= execID=b836c
time="2023-11-03T13:42:19Z" level=debug duration=97.900008ms execID=b836c
time="2023-11-03T13:42:19Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=a3483
time="2023-11-03T13:42:19Z" level=debug duration=2.195479ms execID=a3483
time="2023-11-03T13:42:19Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=1e876
time="2023-11-03T13:42:19Z" level=debug duration=1.673629ms execID=1e876
time="2023-11-03T13:42:19Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=23325
time="2023-11-03T13:42:19Z" level=debug duration=1.613601ms execID=23325
time="2023-11-03T13:42:19Z" level=info msg="pkill -9 gpg-agent" dir= execID=b87c7
time="2023-11-03T13:42:19Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=2c889
time="2023-11-03T13:42:19Z" level=debug duration=130.47193ms execID=2c889
time="2023-11-03T13:42:19Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=8af77
time="2023-11-03T13:42:20Z" level=debug duration=809.437118ms execID=8af77
time="2023-11-03T13:42:20Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=5bc92
time="2023-11-03T13:42:20Z" level=debug duration=2.000971ms execID=5bc92
time="2023-11-03T13:42:20Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=436e4
time="2023-11-03T13:42:20Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=88.108663ms execID=436e4
time="2023-11-03T13:42:20Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=fbf51
time="2023-11-03T13:42:20Z" level=debug duration=409.695684ms execID=fbf51
time="2023-11-03T13:42:20Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=0bd68
time="2023-11-03T13:42:21Z" level=debug duration=204.917751ms execID=0bd68
time="2023-11-03T13:42:21Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=9f7e6
time="2023-11-03T13:42:21Z" level=debug duration=2.857423ms execID=9f7e6
time="2023-11-03T13:42:21Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=77c98
Handling connection for 9081
time="2023-11-03T13:42:21Z" level=debug duration=94.477106ms execID=77c98
time="2023-11-03T13:42:21Z" level=info msg="kubectl create ns argocd-e2e--test-helm-values-dtbhm" dir= execID=7cdf6
time="2023-11-03T13:42:21Z" level=debug msg="namespace/argocd-e2e--test-helm-values-dtbhm created\n" duration=189.109978ms execID=7cdf6
time="2023-11-03T13:42:21Z" level=info msg="kubectl label ns argocd-e2e--test-helm-values-dtbhm e2e.argoproj.io=true" dir= execID=aa833
time="2023-11-03T13:42:21Z" level=debug msg="namespace/argocd-e2e--test-helm-values-dtbhm labeled\n" duration=320.96234ms execID=aa833
time="2023-11-03T13:42:21Z" level=info msg="clean state" duration=4.725186292s id=TestHelmValues-dtbhm name=TestHelmValues password=password username=admin
time="2023-11-03T13:42:22Z" level=info msg=adding path=helm/foo.yml
time="2023-11-03T13:42:22Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=a8483
time="2023-11-03T13:42:22Z" level=debug duration=3.382407ms execID=a8483
time="2023-11-03T13:42:22Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=a611d
time="2023-11-03T13:42:22Z" level=debug duration=3.900207ms execID=a611d
time="2023-11-03T13:42:22Z" level=info msg="git commit -am add file" dir=/tmp/argo-e2e/testdata.git execID=d0433
time="2023-11-03T13:42:22Z" level=debug msg="[master 44ca6b7] add file\n 1 file changed, 0 insertions(+), 0 deletions(-)\n create mode 100644 helm/foo.yml\n" duration=73.45672ms execID=d0433
time="2023-11-03T13:42:22Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=1d6b2
Handling connection for 9081
time="2023-11-03T13:42:22Z" level=debug duration=37.442727ms execID=1d6b2
time="2023-11-03T13:42:22Z" level=info msg="../../dist/argocd app create test-helm-values --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path helm --project default --dest-namespace argocd-e2e--test-helm-values-dtbhm --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTMzOSwibmJmIjoxNjk5MDE4OTM5LCJpYXQiOjE2OTkwMTg5MzksImp0aSI6ImUyYzBjNzcwLTVkMmQtNGE0Yy1iMzcxLWIyMmIxNGNlMzljZCJ9.csNIZcXC_ECElVIoYa0VvuXSwYxb-jA4uhNp5mSjsuo --insecure" dir= execID=31fef
time="2023-11-03T13:42:23Z" level=debug msg="application 'test-helm-values' created\n" duration=325.580079ms execID=31fef
time="2023-11-03T13:42:23Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:42:23Z" level=info msg="../../dist/argocd app set test-helm-values --values foo.yml --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTMzOSwibmJmIjoxNjk5MDE4OTM5LCJpYXQiOjE2OTkwMTg5MzksImp0aSI6ImUyYzBjNzcwLTVkMmQtNGE0Yy1iMzcxLWIyMmIxNGNlMzljZCJ9.csNIZcXC_ECElVIoYa0VvuXSwYxb-jA4uhNp5mSjsuo --insecure" dir= execID=6f009
time="2023-11-03T13:42:23Z" level=debug duration=238.126265ms execID=6f009
time="2023-11-03T13:42:23Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:42:23Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestHelmValues (6.41s)
=== RUN   TestHelmIgnoreMissingValueFiles
time="2023-11-03T13:42:23Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=2604c
time="2023-11-03T13:42:23Z" level=debug msg="namespace \"argocd-e2e--test-helm-values-dtbhm\" deleted\n" duration=241.489946ms execID=2604c
time="2023-11-03T13:42:23Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=b4c5d
time="2023-11-03T13:42:24Z" level=debug msg="No resources found\n" duration=377.401953ms execID=b4c5d
time="2023-11-03T13:42:24Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=ae907
time="2023-11-03T13:42:24Z" level=debug msg="No resources found\n" duration=252.132438ms execID=ae907
time="2023-11-03T13:42:25Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:42:25Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTM0NSwibmJmIjoxNjk5MDE4OTQ1LCJpYXQiOjE2OTkwMTg5NDUsImp0aSI6IjM0ODg4MmU4LWQ1NTItNGFhNy1hNmQ2LTRkZjdlYzk3MzAwNyJ9.SK51vvM4z24MbAqLE70qga2xFeCIiWmF4qFTwx7-CK0 --insecure" dir= execID=413e3
time="2023-11-03T13:42:25Z" level=debug duration=99.607707ms execID=413e3
time="2023-11-03T13:42:25Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=944bd
time="2023-11-03T13:42:25Z" level=debug duration=1.978255ms execID=944bd
time="2023-11-03T13:42:25Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=2ad73
time="2023-11-03T13:42:25Z" level=debug duration=1.623803ms execID=2ad73
time="2023-11-03T13:42:25Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=f377e
time="2023-11-03T13:42:25Z" level=debug duration=1.469329ms execID=f377e
time="2023-11-03T13:42:25Z" level=info msg="pkill -9 gpg-agent" dir= execID=05432
time="2023-11-03T13:42:25Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=fa104
time="2023-11-03T13:42:25Z" level=debug duration=9.648899ms execID=fa104
time="2023-11-03T13:42:25Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=7e26f
time="2023-11-03T13:42:25Z" level=debug duration=40.138628ms execID=7e26f
time="2023-11-03T13:42:25Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=4925d
time="2023-11-03T13:42:25Z" level=debug duration=2.017882ms execID=4925d
time="2023-11-03T13:42:25Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=c58d6
time="2023-11-03T13:42:25Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.35555ms execID=c58d6
time="2023-11-03T13:42:25Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=063c0
time="2023-11-03T13:42:25Z" level=debug duration=28.721457ms execID=063c0
time="2023-11-03T13:42:25Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=ff61d
time="2023-11-03T13:42:25Z" level=debug duration=23.241911ms execID=ff61d
time="2023-11-03T13:42:25Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=667d5
time="2023-11-03T13:42:25Z" level=debug duration=7.478162ms execID=667d5
time="2023-11-03T13:42:25Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=7afc2
Handling connection for 9081
time="2023-11-03T13:42:25Z" level=debug duration=65.982016ms execID=7afc2
time="2023-11-03T13:42:25Z" level=info msg="kubectl create ns argocd-e2e--test-helm-ignore-missing-value-files-rbojj" dir= execID=1ac1e
time="2023-11-03T13:42:25Z" level=debug msg="namespace/argocd-e2e--test-helm-ignore-missing-value-files-rbojj created\n" duration=164.900938ms execID=1ac1e
time="2023-11-03T13:42:25Z" level=info msg="kubectl label ns argocd-e2e--test-helm-ignore-missing-value-files-rbojj e2e.argoproj.io=true" dir= execID=9fdfe
time="2023-11-03T13:42:26Z" level=debug msg="namespace/argocd-e2e--test-helm-ignore-missing-value-files-rbojj labeled\n" duration=294.29267ms execID=9fdfe
time="2023-11-03T13:42:26Z" level=info msg="clean state" duration=2.711440321s id=TestHelmIgnoreMissingValueFiles-rbojj name=TestHelmIgnoreMissingValueFiles password=password username=admin
time="2023-11-03T13:42:27Z" level=info msg="kubectl -n argocd-e2e apply -f /tmp/2607274562" dir= execID=07367
time="2023-11-03T13:42:28Z" level=debug msg="application.argoproj.io/test-helm-ignore-missing-value-files created\n" duration=1.272913246s execID=07367
time="2023-11-03T13:42:28Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:42:28Z" level=info msg="../../dist/argocd app set test-helm-ignore-missing-value-files --ignore-missing-value-files --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTM0NSwibmJmIjoxNjk5MDE4OTQ1LCJpYXQiOjE2OTkwMTg5NDUsImp0aSI6IjM0ODg4MmU4LWQ1NTItNGFhNy1hNmQ2LTRkZjdlYzk3MzAwNyJ9.SK51vvM4z24MbAqLE70qga2xFeCIiWmF4qFTwx7-CK0 --insecure" dir= execID=0a07a
time="2023-11-03T13:42:28Z" level=debug duration=248.101011ms execID=0a07a
time="2023-11-03T13:42:28Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:42:28Z" level=info msg="../../dist/argocd app sync test-helm-ignore-missing-value-files --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTM0NSwibmJmIjoxNjk5MDE4OTQ1LCJpYXQiOjE2OTkwMTg5NDUsImp0aSI6IjM0ODg4MmU4LWQ1NTItNGFhNy1hNmQ2LTRkZjdlYzk3MzAwNyJ9.SK51vvM4z24MbAqLE70qga2xFeCIiWmF4qFTwx7-CK0 --insecure" dir= execID=177dc
time="2023-11-03T13:42:29Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:42:28+00:00          ConfigMap  argocd-e2e--test-helm-ignore-missing-value-files-rbojj                my-map  OutOfSync  Missing              \n2023-11-03T13:42:29+00:00          ConfigMap  argocd-e2e--test-helm-ignore-missing-value-files-rbojj                my-map  OutOfSync  Missing              configmap/my-map created\n2023-11-03T13:42:29+00:00          ConfigMap  argocd-e2e--test-helm-ignore-missing-value-files-rbojj                my-map    Synced  Missing              configmap/my-map created\n\nName:               argocd-e2e/test-helm-ignore-missing-value-files\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-helm-ignore-missing-value-files-rbojj\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-helm-ignore-missing-value-files\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             HEAD\nPath:               helm\nHelm Values:        does-not-exist-values.yaml\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to HEAD (389f56f)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      389f56ff72294e45e21f6af6be1aa8eb1a9aebe0\nPhase:              Succeeded\nStart:              2023-11-03 13:42:28 +0000 UTC\nFinished:           2023-11-03 13:42:29 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                               NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-helm-ignore-missing-value-files-rbojj  my-map  Synced                configmap/my-map created\n" duration=811.338475ms execID=177dc
time="2023-11-03T13:42:29Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:42:29Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:42:29Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:42:29Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:42:29Z" level=info msg="../../dist/argocd app unset test-helm-ignore-missing-value-files --ignore-missing-value-files --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTM0NSwibmJmIjoxNjk5MDE4OTQ1LCJpYXQiOjE2OTkwMTg5NDUsImp0aSI6IjM0ODg4MmU4LWQ1NTItNGFhNy1hNmQ2LTRkZjdlYzk3MzAwNyJ9.SK51vvM4z24MbAqLE70qga2xFeCIiWmF4qFTwx7-CK0 --insecure" dir= execID=ef18c
time="2023-11-03T13:42:29Z" level=debug duration=152.653283ms execID=ef18c
time="2023-11-03T13:42:29Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:42:29Z" level=info msg="../../dist/argocd app sync test-helm-ignore-missing-value-files --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTM0NSwibmJmIjoxNjk5MDE4OTQ1LCJpYXQiOjE2OTkwMTg5NDUsImp0aSI6IjM0ODg4MmU4LWQ1NTItNGFhNy1hNmQ2LTRkZjdlYzk3MzAwNyJ9.SK51vvM4z24MbAqLE70qga2xFeCIiWmF4qFTwx7-CK0 --insecure" dir= execID=6c758
time="2023-11-03T13:42:29Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                              NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:42:29+00:00          ConfigMap  argocd-e2e--test-helm-ignore-missing-value-files-rbojj                my-map   Unknown                       \n\nName:               argocd-e2e/test-helm-ignore-missing-value-files\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-helm-ignore-missing-value-files-rbojj\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-helm-ignore-missing-value-files\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             HEAD\nPath:               helm\nHelm Values:        does-not-exist-values.yaml\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Unknown\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      \nPhase:              Error\nStart:              2023-11-03 13:42:29 +0000 UTC\nFinished:           2023-11-03 13:42:29 +0000 UTC\nDuration:           0s\nMessage:            ComparisonError: rpc error: code = Unknown desc = Manifest generation error (cached): `helm template . --name-template test-helm-ignore-missing-value-files --namespace argocd-e2e--test-helm-ignore-missing-value-files-rbojj --kube-version 1.26 --values .helm/does-not-exist-values.yaml --api-versions admissionregistration.k8s.io/v1 --api-versions admissionregistration.k8s.io/v1/MutatingWebhookConfiguration --api-versions admissionregistration.k8s.io/v1/ValidatingWebhookConfiguration --api-versions apiextensions.k8s.io/v1 --api-versions apiextensions.k8s.io/v1/CustomResourceDefinition --api-versions apiregistration.k8s.io/v1 --api-versions apiregistration.k8s.io/v1/APIService --api-versions apiserver.openshift.io/v1 --api-versions apiserver.openshift.io/v1/APIRequestCount --api-versions apps.openshift.io/v1 --api-versions apps.openshift.io/v1/DeploymentConfig --api-versions apps/v1 --api-versions apps/v1/ControllerRevision --api-versions apps/v1/DaemonSet --api-versions apps/v1/Deployment --api-versions apps/v1/ReplicaSet --api-versions apps/v1/StatefulSet --api-versions argoproj.io/v1alpha1 --api-versions argoproj.io/v1alpha1/AnalysisRun --api-versions argoproj.io/v1alpha1/AnalysisTemplate --api-versions argoproj.io/v1alpha1/AppProject --api-versions argoproj.io/v1alpha1/Application --api-versions argoproj.io/v1alpha1/ApplicationSet --api-versions argoproj.io/v1alpha1/ArgoCD --api-versions argoproj.io/v1alpha1/ClusterAnalysisTemplate --api-versions argoproj.io/v1alpha1/Experiment --api-versions argoproj.io/v1alpha1/NonStatusSubResource --api-versions argoproj.io/v1alpha1/Rollout --api-versions argoproj.io/v1alpha1/RolloutManager --api-versions argoproj.io/v1alpha1/StatusSubResource --api-versions authorization.openshift.io/v1 --api-versions authorization.openshift.io/v1/RoleBindingRestriction --api-versions autoscaling.openshift.io/v1 --api-versions autoscaling.openshift.io/v1/ClusterAutoscaler --api-versions autoscaling.openshift.io/v1beta1 --api-versions autoscaling.openshift.io/v1beta1/MachineAutoscaler --api-versions autoscaling/v1 --api-versions autoscaling/v1/HorizontalPodAutoscaler --api-versions autoscaling/v2 --api-versions autoscaling/v2/HorizontalPodAutoscaler --api-versions batch/v1 --api-versions batch/v1/CronJob --api-versions batch/v1/Job --api-versions build.openshift.io/v1 --api-versions build.openshift.io/v1/Build --api-versions build.openshift.io/v1/BuildConfig --api-versions certificates.k8s.io/v1 --api-versions certificates.k8s.io/v1/CertificateSigningRequest --api-versions cloud.network.openshift.io/v1 --api-versions cloud.network.openshift.io/v1/CloudPrivateIPConfig --api-versions cloudcredential.openshift.io/v1 --api-versions cloudcredential.openshift.io/v1/CredentialsRequest --api-versions cluster.open-cluster-management.io/v1alpha1 --api-versions cluster.open-cluster-management.io/v1alpha1/PlacementDecision --api-versions config.openshift.io/v1 --api-versions config.openshift.io/v1/APIServer --api-versions config.openshift.io/v1/Authentication --api-versions config.openshift.io/v1/Build --api-versions config.openshift.io/v1/ClusterOperator --api-versions config.openshift.io/v1/ClusterVersion --api-versions config.openshift.io/v1/Console --api-versions config.openshift.io/v1/DNS --api-versions config.openshift.io/v1/FeatureGate --api-versions config.openshift.io/v1/Image --api-versions config.openshift.io/v1/ImageContentPolicy --api-versions config.openshift.io/v1/ImageDigestMirrorSet --api-versions config.openshift.io/v1/ImageTagMirrorSet --api-versions config.openshift.io/v1/Infrastructure --api-versions config.openshift.io/v1/Ingress --api-versions config.openshift.io/v1/Network --api-versions config.openshift.io/v1/Node --api-versions config.openshift.io/v1/OAuth --api-versions config.openshift.io/v1/OperatorHub --api-versions config.openshift.io/v1/Project --api-versions config.openshift.io/v1/Proxy --api-versions config.openshift.io/v1/Scheduler --api-versions console.openshift.io/v1 --api-versions console.openshift.io/v1/ConsoleCLIDownload --api-versions console.openshift.io/v1/ConsoleExternalLogLink --api-versions console.openshift.io/v1/ConsoleLink --api-versions console.openshift.io/v1/ConsoleNotification --api-versions console.openshift.io/v1/ConsolePlugin --api-versions console.openshift.io/v1/ConsoleQuickStart --api-versions console.openshift.io/v1/ConsoleYAMLSample --api-versions console.openshift.io/v1alpha1 --api-versions console.openshift.io/v1alpha1/ConsolePlugin --api-versions controlplane.operator.openshift.io/v1alpha1 --api-versions controlplane.operator.openshift.io/v1alpha1/PodNetworkConnectivityCheck --api-versions coordination.k8s.io/v1 --api-versions coordination.k8s.io/v1/Lease --api-versions discovery.k8s.io/v1 --api-versions discovery.k8s.io/v1/EndpointSlice --api-versions events.k8s.io/v1 --api-versions events.k8s.io/v1/Event --api-versions flowcontrol.apiserver.k8s.io/v1beta2 --api-versions flowcontrol.apiserver.k8s.io/v1beta2/FlowSchema --api-versions flowcontrol.apiserver.k8s.io/v1beta2/PriorityLevelConfiguration --api-versions flowcontrol.apiserver.k8s.io/v1beta3 --api-versions flowcontrol.apiserver.k8s.io/v1beta3/FlowSchema --api-versions flowcontrol.apiserver.k8s.io/v1beta3/PriorityLevelConfiguration --api-versions helm.openshift.io/v1beta1 --api-versions helm.openshift.io/v1beta1/HelmChartRepository --api-versions helm.openshift.io/v1beta1/ProjectHelmChartRepository --api-versions image.openshift.io/v1 --api-versions image.openshift.io/v1/Image --api-versions image.openshift.io/v1/ImageStream --api-versions imageregistry.operator.openshift.io/v1 --api-versions imageregistry.operator.openshift.io/v1/Config --api-versions imageregistry.operator.openshift.io/v1/ImagePruner --api-versions infrastructure.cluster.x-k8s.io/v1alpha5 --api-versions infrastructure.cluster.x-k8s.io/v1alpha5/Metal3Remediation --api-versions infrastructure.cluster.x-k8s.io/v1alpha5/Metal3RemediationTemplate --api-versions infrastructure.cluster.x-k8s.io/v1beta1 --api-versions infrastructure.cluster.x-k8s.io/v1beta1/Metal3Remediation --api-versions infrastructure.cluster.x-k8s.io/v1beta1/Metal3RemediationTemplate --api-versions ingress.operator.openshift.io/v1 --api-versions ingress.operator.openshift.io/v1/DNSRecord --api-versions k8s.cni.cncf.io/v1 --api-versions k8s.cni.cncf.io/v1/NetworkAttachmentDefinition --api-versions machine.openshift.io/v1 --api-versions machine.openshift.io/v1/ControlPlaneMachineSet --api-versions machine.openshift.io/v1beta1 --api-versions machine.openshift.io/v1beta1/Machine --api-versions machine.openshift.io/v1beta1/MachineHealthCheck --api-versions machine.openshift.io/v1beta1/MachineSet --api-versions machineconfiguration.openshift.io/v1 --api-versions machineconfiguration.openshift.io/v1/ContainerRuntimeConfig --api-versions machineconfiguration.openshift.io/v1/ControllerConfig --api-versions machineconfiguration.openshift.io/v1/KubeletConfig --api-versions machineconfiguration.openshift.io/v1/MachineConfig --api-versions machineconfiguration.openshift.io/v1/MachineConfigPool --api-versions metal3.io/v1alpha1 --api-versions metal3.io/v1alpha1/BMCEventSubscription --api-versions metal3.io/v1alpha1/BareMetalHost --api-versions metal3.io/v1alpha1/FirmwareSchema --api-versions metal3.io/v1alpha1/HardwareData --api-versions metal3.io/v1alpha1/HostFirmwareSettings --api-versions metal3.io/v1alpha1/PreprovisioningImage --api-versions metal3.io/v1alpha1/Provisioning --api-versions migration.k8s.io/v1alpha1 --api-versions migration.k8s.io/v1alpha1/StorageState --api-versions migration.k8s.io/v1alpha1/StorageVersionMigration --api-versions monitoring.coreos.com/v1 --api-versions monitoring.coreos.com/v1/Alertmanager --api-versions monitoring.coreos.com/v1/PodMonitor --api-versions monitoring.coreos.com/v1/Probe --api-versions monitoring.coreos.com/v1/Prometheus --api-versions monitoring.coreos.com/v1/PrometheusRule --api-versions monitoring.coreos.com/v1/ServiceMonitor --api-versions monitoring.coreos.com/v1/ThanosRuler --api-versions monitoring.coreos.com/v1alpha1 --api-versions monitoring.coreos.com/v1alpha1/AlertmanagerConfig --api-versions monitoring.coreos.com/v1beta1 --api-versions monitoring.coreos.com/v1beta1/AlertmanagerConfig --api-versions network.openshift.io/v1 --api-versions network.openshift.io/v1/ClusterNetwork --api-versions network.openshift.io/v1/EgressNetworkPolicy --api-versions network.openshift.io/v1/HostSubnet --api-versions network.openshift.io/v1/NetNamespace --api-versions network.operator.openshift.io/v1 --api-versions network.operator.openshift.io/v1/EgressRouter --api-versions network.operator.openshift.io/v1/OperatorPKI --api-versions networking.k8s.io/v1 --api-versions networking.k8s.io/v1/Ingress --api-versions networking.k8s.io/v1/IngressClass --api-versions networking.k8s.io/v1/NetworkPolicy --api-versions node.k8s.io/v1 --api-versions node.k8s.io/v1/RuntimeClass --api-versions oauth.openshift.io/v1 --api-versions oauth.openshift.io/v1/OAuthAccessToken --api-versions oauth.openshift.io/v1/OAuthAuthorizeToken --api-versions oauth.openshift.io/v1/OAuthClient --api-versions oauth.openshift.io/v1/OAuthClientAuthorization --api-versions oauth.openshift.io/v1/UserOAuthAccessToken --api-versions operator.openshift.io/v1 --api-versions operator.openshift.io/v1/Authentication --api-versions operator.openshift.io/v1/CSISnapshotController --api-versions operator.openshift.io/v1/CloudCredential --api-versions operator.openshift.io/v1/ClusterCSIDriver --api-versions operator.openshift.io/v1/Config --api-versions operator.openshift.io/v1/Console --api-versions operator.openshift.io/v1/DNS --api-versions operator.openshift.io/v1/Etcd --api-versions operator.openshift.io/v1/IngressController --api-versions operator.openshift.io/v1/InsightsOperator --api-versions operator.openshift.io/v1/KubeAPIServer --api-versions operator.openshift.io/v1/KubeControllerManager --api-versions operator.openshift.io/v1/KubeScheduler --api-versions operator.openshift.io/v1/KubeStorageVersionMigrator --api-versions operator.openshift.io/v1/Network --api-versions operator.openshift.io/v1/OpenShiftAPIServer --api-versions operator.openshift.io/v1/OpenShiftControllerManager --api-versions operator.openshift.io/v1/ServiceCA --api-versions operator.openshift.io/v1/Storage --api-versions operator.openshift.io/v1alpha1 --api-versions operator.openshift.io/v1alpha1/ImageContentSourcePolicy --api-versions operator.tekton.dev/v1alpha1 --api-versions operator.tekton.dev/v1alpha1/OpenShiftPipelinesAsCode --api-versions operator.tekton.dev/v1alpha1/TektonAddon --api-versions operator.tekton.dev/v1alpha1/TektonChain --api-versions operator.tekton.dev/v1alpha1/TektonConfig --api-versions operator.tekton.dev/v1alpha1/TektonHub --api-versions operator.tekton.dev/v1alpha1/TektonInstallerSet --api-versions operator.tekton.dev/v1alpha1/TektonPipeline --api-versions operator.tekton.dev/v1alpha1/TektonResult --api-versions operator.tekton.dev/v1alpha1/TektonTrigger --api-versions operators.coreos.com/v1 --api-versions operators.coreos.com/v1/OLMConfig --api-versions operators.coreos.com/v1/Operator --api-versions operators.coreos.com/v1/OperatorCondition --api-versions operators.coreos.com/v1/OperatorGroup --api-versions operators.coreos.com/v1alpha1 --api-versions operators.coreos.com/v1alpha1/CatalogSource --api-versions operators.coreos.com/v1alpha1/ClusterServiceVersion --api-versions operators.coreos.com/v1alpha1/InstallPlan --api-versions operators.coreos.com/v1alpha1/Subscription --api-versions operators.coreos.com/v1alpha2 --api-versions operators.coreos.com/v1alpha2/OperatorGroup --api-versions operators.coreos.com/v2 --api-versions operators.coreos.com/v2/OperatorCondition --api-versions performance.openshift.io/v1 --api-versions performance.openshift.io/v1/PerformanceProfile --api-versions performance.openshift.io/v1alpha1 --api-versions performance.openshift.io/v1alpha1/PerformanceProfile --api-versions performance.openshift.io/v2 --api-versions performance.openshift.io/v2/PerformanceProfile --api-versions pipelines.openshift.io/v1alpha1 --api-versions pipelines.openshift.io/v1alpha1/GitopsService --api-versions pipelinesascode.tekton.dev/v1alpha1 --api-versions pipelinesascode.tekton.dev/v1alpha1/Repository --api-versions policy/v1 --api-versions policy/v1/PodDisruptionBudget --api-versions project.openshift.io/v1 --api-versions project.openshift.io/v1/Project --api-versions quota.openshift.io/v1 --api-versions quota.openshift.io/v1/ClusterResourceQuota --api-versions rbac.authorization.k8s.io/v1 --api-versions rbac.authorization.k8s.io/v1/ClusterRole --api-versions rbac.authorization.k8s.io/v1/ClusterRoleBinding --api-versions rbac.authorization.k8s.io/v1/Role --api-versions rbac.authorization.k8s.io/v1/RoleBinding --api-versions resolution.tekton.dev/v1alpha1 --api-versions resolution.tekton.dev/v1alpha1/ResolutionRequest --api-versions resolution.tekton.dev/v1beta1 --api-versions resolution.tekton.dev/v1beta1/ResolutionRequest --api-versions route.openshift.io/v1 --api-versions route.openshift.io/v1/Route --api-versions samples.operator.openshift.io/v1 --api-versions samples.operator.openshift.io/v1/Config --api-versions scheduling.k8s.io/v1 --api-versions scheduling.k8s.io/v1/PriorityClass --api-versions security.internal.openshift.io/v1 --api-versions security.internal.openshift.io/v1/RangeAllocation --api-versions security.openshift.io/v1 --api-versions security.openshift.io/v1/RangeAllocation --api-versions security.openshift.io/v1/SecurityContextConstraints --api-versions snapshot.storage.k8s.io/v1 --api-versions snapshot.storage.k8s.io/v1/VolumeSnapshot --api-versions snapshot.storage.k8s.io/v1/VolumeSnapshotClass --api-versions snapshot.storage.k8s.io/v1/VolumeSnapshotContent --api-versions storage.k8s.io/v1 --api-versions storage.k8s.io/v1/CSIDriver --api-versions storage.k8s.io/v1/CSINode --api-versions storage.k8s.io/v1/CSIStorageCapacity --api-versions storage.k8s.io/v1/StorageClass --api-versions storage.k8s.io/v1/VolumeAttachment --api-versions storage.k8s.io/v1beta1 --api-versions storage.k8s.io/v1beta1/CSIStorageCapacity --api-versions tekton.dev/v1 --api-versions tekton.dev/v1/Pipeline --api-versions tekton.dev/v1/PipelineRun --api-versions tekton.dev/v1/Task --api-versions tekton.dev/v1/TaskRun --api-versions tekton.dev/v1alpha1 --api-versions tekton.dev/v1alpha1/VerificationPolicy --api-versions tekton.dev/v1beta1 --api-versions tekton.dev/v1beta1/ClusterTask --api-versions tekton.dev/v1beta1/CustomRun --api-versions tekton.dev/v1beta1/Pipeline --api-versions tekton.dev/v1beta1/PipelineRun --api-versions tekton.dev/v1beta1/Task --api-versions tekton.dev/v1beta1/TaskRun --api-versions template.openshift.io/v1 --api-versions template.openshift.io/v1/BrokerTemplateInstance --api-versions template.openshift.io/v1/Template --api-versions template.openshift.io/v1/TemplateInstance --api-versions triggers.tekton.dev/v1alpha1 --api-versions triggers.tekton.dev/v1alpha1/ClusterInterceptor --api-versions triggers.tekton.dev/v1alpha1/ClusterTriggerBinding --api-versions triggers.tekton.dev/v1alpha1/EventListener --api-versions triggers.tekton.dev/v1alpha1/Interceptor --api-versions triggers.tekton.dev/v1alpha1/Trigger --api-versions triggers.tekton.dev/v1alpha1/TriggerBinding --api-versions triggers.tekton.dev/v1alpha1/TriggerTemplate --api-versions triggers.tekton.dev/v1beta1 --api-versions triggers.tekton.dev/v1beta1/ClusterTriggerBinding --api-versions triggers.tekton.dev/v1beta1/EventListener --api-versions triggers.tekton.dev/v1beta1/Trigger --api-versions triggers.tekton.dev/v1beta1/TriggerBinding --api-versions triggers.tekton.dev/v1beta1/TriggerTemplate --api-versions tuned.openshift.io/v1 --api-versions tuned.openshift.io/v1/Profile --api-versions tuned.openshift.io/v1/Tuned --api-versions user.openshift.io/v1 --api-versions user.openshift.io/v1/Group --api-versions user.openshift.io/v1/Identity --api-versions user.openshift.io/v1/User --api-versions v1 --api-versions v1/ConfigMap --api-versions v1/Endpoints --api-versions v1/Event --api-versions v1/LimitRange --api-versions v1/Namespace --api-versions v1/Node --api-versions v1/PersistentVolume --api-versions v1/PersistentVolumeClaim --api-versions v1/Pod --api-versions v1/PodTemplate --api-versions v1/ReplicationController --api-versions v1/ResourceQuota --api-versions v1/Secret --api-versions v1/Service --api-versions v1/ServiceAccount --api-versions whereabouts.cni.cncf.io/v1alpha1 --api-versions whereabouts.cni.cncf.io/v1alpha1/IPPool --api-versions whereabouts.cni.cncf.io/v1alpha1/OverlappingRangeIPReservation --include-crds` failed exit status 1: Error: open .helm/does-not-exist-values.yaml: no such file or directory\n\nGROUP  KIND       NAMESPACE                                               NAME    STATUS   HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-helm-ignore-missing-value-files-rbojj  my-map  Unknown                \n" duration=386.86732ms execID=6c758
time="2023-11-03T13:42:29Z" level=error msg="`../../dist/argocd app sync test-helm-ignore-missing-value-files --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTM0NSwibmJmIjoxNjk5MDE4OTQ1LCJpYXQiOjE2OTkwMTg5NDUsImp0aSI6IjM0ODg4MmU4LWQ1NTItNGFhNy1hNmQ2LTRkZjdlYzk3MzAwNyJ9.SK51vvM4z24MbAqLE70qga2xFeCIiWmF4qFTwx7-CK0 --insecure` failed exit status 1: time=\"2023-11-03T13:42:29Z\" level=fatal msg=\"Operation has completed with phase: Error\"" execID=6c758
time="2023-11-03T13:42:29Z" level=info msg="expectation succeeded: error 'Error: open .*does-not-exist-values.yaml: no such file or directory'"
time="2023-11-03T13:42:29Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestHelmIgnoreMissingValueFiles (6.62s)
=== RUN   TestHelmValuesMultipleUnset
time="2023-11-03T13:42:30Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=5244c
time="2023-11-03T13:42:30Z" level=debug msg="namespace \"argocd-e2e--test-helm-ignore-missing-value-files-rbojj\" deleted\n" duration=244.643241ms execID=5244c
time="2023-11-03T13:42:30Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=ef103
time="2023-11-03T13:42:30Z" level=debug msg="No resources found\n" duration=525.098031ms execID=ef103
time="2023-11-03T13:42:30Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=f17ce
time="2023-11-03T13:42:31Z" level=debug msg="No resources found\n" duration=294.436165ms execID=f17ce
time="2023-11-03T13:42:31Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:42:31Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTM1MSwibmJmIjoxNjk5MDE4OTUxLCJpYXQiOjE2OTkwMTg5NTEsImp0aSI6ImZmMTg3MjY0LThlYjUtNGMzYy05ZmVmLTk4NGNjZmYwODJlNCJ9.qtcyeKFkY2wdM2MuI_7JmeVgcnZfUY_7gvR1ww1YaxQ --insecure" dir= execID=89858
time="2023-11-03T13:42:32Z" level=debug duration=697.783201ms execID=89858
time="2023-11-03T13:42:36Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=74342
time="2023-11-03T13:42:36Z" level=debug duration=94.401912ms execID=74342
time="2023-11-03T13:42:36Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=9ebe4
time="2023-11-03T13:42:36Z" level=debug duration=2.616201ms execID=9ebe4
time="2023-11-03T13:42:36Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=e8a43
time="2023-11-03T13:42:36Z" level=debug duration=2.210835ms execID=e8a43
time="2023-11-03T13:42:36Z" level=info msg="pkill -9 gpg-agent" dir= execID=c61df
time="2023-11-03T13:42:36Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=bba6c
time="2023-11-03T13:42:36Z" level=debug duration=12.648035ms execID=bba6c
time="2023-11-03T13:42:36Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=42617
time="2023-11-03T13:42:37Z" level=debug duration=1.094799018s execID=42617
time="2023-11-03T13:42:37Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=1b4a7
time="2023-11-03T13:42:37Z" level=debug duration=2.182423ms execID=1b4a7
time="2023-11-03T13:42:37Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=15737
time="2023-11-03T13:42:37Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=6.377655ms execID=15737
time="2023-11-03T13:42:37Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=52935
time="2023-11-03T13:42:38Z" level=debug duration=489.295841ms execID=52935
time="2023-11-03T13:42:38Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=c59eb
time="2023-11-03T13:42:38Z" level=debug duration=21.568004ms execID=c59eb
time="2023-11-03T13:42:38Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=7b01d
time="2023-11-03T13:42:38Z" level=debug duration=2.826867ms execID=7b01d
time="2023-11-03T13:42:38Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=dbcfc
Handling connection for 9081
time="2023-11-03T13:42:38Z" level=debug duration=66.574696ms execID=dbcfc
time="2023-11-03T13:42:38Z" level=info msg="kubectl create ns argocd-e2e--test-helm-values-multiple-unset-ngpbz" dir= execID=c201a
time="2023-11-03T13:42:38Z" level=debug msg="namespace/argocd-e2e--test-helm-values-multiple-unset-ngpbz created\n" duration=196.326998ms execID=c201a
time="2023-11-03T13:42:38Z" level=info msg="kubectl label ns argocd-e2e--test-helm-values-multiple-unset-ngpbz e2e.argoproj.io=true" dir= execID=0979a
time="2023-11-03T13:42:38Z" level=debug msg="namespace/argocd-e2e--test-helm-values-multiple-unset-ngpbz labeled\n" duration=225.25996ms execID=0979a
time="2023-11-03T13:42:38Z" level=info msg="clean state" duration=8.993688114s id=TestHelmValuesMultipleUnset-ngpbz name=TestHelmValuesMultipleUnset password=password username=admin
time="2023-11-03T13:42:39Z" level=info msg=adding path=helm/foo.yml
time="2023-11-03T13:42:39Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=96999
time="2023-11-03T13:42:39Z" level=debug duration=3.30057ms execID=96999
time="2023-11-03T13:42:39Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=f0592
time="2023-11-03T13:42:39Z" level=debug duration=4.122411ms execID=f0592
time="2023-11-03T13:42:39Z" level=info msg="git commit -am add file" dir=/tmp/argo-e2e/testdata.git execID=2c95e
time="2023-11-03T13:42:40Z" level=debug msg="[master d82255e] add file\n 1 file changed, 0 insertions(+), 0 deletions(-)\n create mode 100644 helm/foo.yml\n" duration=168.706802ms execID=2c95e
time="2023-11-03T13:42:40Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=a1526
Handling connection for 9081
time="2023-11-03T13:42:40Z" level=debug duration=41.936915ms execID=a1526
time="2023-11-03T13:42:40Z" level=info msg=adding path=helm/baz.yml
time="2023-11-03T13:42:40Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=632c4
time="2023-11-03T13:42:40Z" level=debug duration=3.004599ms execID=632c4
time="2023-11-03T13:42:40Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=c0721
time="2023-11-03T13:42:40Z" level=debug duration=3.763581ms execID=c0721
time="2023-11-03T13:42:40Z" level=info msg="git commit -am add file" dir=/tmp/argo-e2e/testdata.git execID=679e4
time="2023-11-03T13:42:40Z" level=debug msg="[master 1b1a035] add file\n 1 file changed, 0 insertions(+), 0 deletions(-)\n create mode 100644 helm/baz.yml\n" duration=250.963286ms execID=679e4
time="2023-11-03T13:42:40Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=4f174
Handling connection for 9081
time="2023-11-03T13:42:40Z" level=debug duration=38.622553ms execID=4f174
time="2023-11-03T13:42:40Z" level=info msg="../../dist/argocd app create test-helm-values-multiple-unset --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path helm --project default --dest-namespace argocd-e2e--test-helm-values-multiple-unset-ngpbz --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTM1MSwibmJmIjoxNjk5MDE4OTUxLCJpYXQiOjE2OTkwMTg5NTEsImp0aSI6ImZmMTg3MjY0LThlYjUtNGMzYy05ZmVmLTk4NGNjZmYwODJlNCJ9.qtcyeKFkY2wdM2MuI_7JmeVgcnZfUY_7gvR1ww1YaxQ --insecure" dir= execID=09951
time="2023-11-03T13:42:40Z" level=debug msg="application 'test-helm-values-multiple-unset' created\n" duration=441.957975ms execID=09951
time="2023-11-03T13:42:40Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:42:40Z" level=info msg="../../dist/argocd app set test-helm-values-multiple-unset --values foo.yml --values baz.yml --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTM1MSwibmJmIjoxNjk5MDE4OTUxLCJpYXQiOjE2OTkwMTg5NTEsImp0aSI6ImZmMTg3MjY0LThlYjUtNGMzYy05ZmVmLTk4NGNjZmYwODJlNCJ9.qtcyeKFkY2wdM2MuI_7JmeVgcnZfUY_7gvR1ww1YaxQ --insecure" dir= execID=e7a6d
time="2023-11-03T13:42:41Z" level=debug duration=420.122355ms execID=e7a6d
time="2023-11-03T13:42:41Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:42:41Z" level=info msg="../../dist/argocd app unset test-helm-values-multiple-unset --values foo.yml --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTM1MSwibmJmIjoxNjk5MDE4OTUxLCJpYXQiOjE2OTkwMTg5NTEsImp0aSI6ImZmMTg3MjY0LThlYjUtNGMzYy05ZmVmLTk4NGNjZmYwODJlNCJ9.qtcyeKFkY2wdM2MuI_7JmeVgcnZfUY_7gvR1ww1YaxQ --insecure" dir= execID=12736
time="2023-11-03T13:42:41Z" level=debug duration=193.876582ms execID=12736
time="2023-11-03T13:42:41Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:42:41Z" level=info msg="../../dist/argocd app unset test-helm-values-multiple-unset --values baz.yml --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTM1MSwibmJmIjoxNjk5MDE4OTUxLCJpYXQiOjE2OTkwMTg5NTEsImp0aSI6ImZmMTg3MjY0LThlYjUtNGMzYy05ZmVmLTk4NGNjZmYwODJlNCJ9.qtcyeKFkY2wdM2MuI_7JmeVgcnZfUY_7gvR1ww1YaxQ --insecure" dir= execID=7c0a8
time="2023-11-03T13:42:41Z" level=debug duration=178.571308ms execID=7c0a8
time="2023-11-03T13:42:41Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:42:41Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestHelmValuesMultipleUnset (11.76s)
=== RUN   TestHelmValuesLiteralFileLocal
time="2023-11-03T13:42:41Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=e0b24
time="2023-11-03T13:42:42Z" level=debug msg="namespace \"argocd-e2e--test-helm-values-multiple-unset-ngpbz\" deleted\n" duration=263.124527ms execID=e0b24
time="2023-11-03T13:42:42Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=05d93
time="2023-11-03T13:42:42Z" level=debug msg="No resources found\n" duration=474.774024ms execID=05d93
time="2023-11-03T13:42:42Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=6297c
time="2023-11-03T13:42:42Z" level=debug msg="No resources found\n" duration=254.452449ms execID=6297c
time="2023-11-03T13:42:43Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:42:43Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTM2MywibmJmIjoxNjk5MDE4OTYzLCJpYXQiOjE2OTkwMTg5NjMsImp0aSI6IjAyMTY1MzhhLTI0MTUtNDNlMy04MmZlLWNhYjAyZmNhMDJhMSJ9.zdLMVp0Y9hsfyrGqreh4SxDDDsIczseE6VQlAyFXM5o --insecure" dir= execID=ee041
time="2023-11-03T13:42:43Z" level=debug duration=174.590189ms execID=ee041
time="2023-11-03T13:42:45Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=bc18f
time="2023-11-03T13:42:45Z" level=debug duration=194.316013ms execID=bc18f
time="2023-11-03T13:42:45Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=c1157
time="2023-11-03T13:42:45Z" level=debug duration=197.659979ms execID=c1157
time="2023-11-03T13:42:45Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=f74f4
time="2023-11-03T13:42:45Z" level=debug duration=199.809324ms execID=f74f4
time="2023-11-03T13:42:45Z" level=info msg="pkill -9 gpg-agent" dir= execID=37397
time="2023-11-03T13:42:45Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=24691
time="2023-11-03T13:42:45Z" level=debug duration=209.727224ms execID=24691
time="2023-11-03T13:42:45Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=7a1d9
time="2023-11-03T13:42:45Z" level=debug duration=36.237386ms execID=7a1d9
time="2023-11-03T13:42:45Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=1664c
time="2023-11-03T13:42:45Z" level=debug duration=2.147953ms execID=1664c
time="2023-11-03T13:42:45Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=783da
time="2023-11-03T13:42:45Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.349886ms execID=783da
time="2023-11-03T13:42:45Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=f89a7
time="2023-11-03T13:42:45Z" level=debug duration=27.501194ms execID=f89a7
time="2023-11-03T13:42:45Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=15a9a
time="2023-11-03T13:42:46Z" level=debug duration=223.910689ms execID=15a9a
time="2023-11-03T13:42:46Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=81dce
time="2023-11-03T13:42:46Z" level=debug duration=2.881669ms execID=81dce
time="2023-11-03T13:42:46Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=1f1db
Handling connection for 9081
time="2023-11-03T13:42:46Z" level=debug duration=691.043596ms execID=1f1db
time="2023-11-03T13:42:46Z" level=info msg="kubectl create ns argocd-e2e--test-helm-values-literal-file-local-duehk" dir= execID=11005
time="2023-11-03T13:42:46Z" level=debug msg="namespace/argocd-e2e--test-helm-values-literal-file-local-duehk created\n" duration=171.857371ms execID=11005
time="2023-11-03T13:42:46Z" level=info msg="kubectl label ns argocd-e2e--test-helm-values-literal-file-local-duehk e2e.argoproj.io=true" dir= execID=89a92
time="2023-11-03T13:42:47Z" level=debug msg="namespace/argocd-e2e--test-helm-values-literal-file-local-duehk labeled\n" duration=332.582416ms execID=89a92
time="2023-11-03T13:42:47Z" level=info msg="clean state" duration=5.613677054s id=TestHelmValuesLiteralFileLocal-duehk name=TestHelmValuesLiteralFileLocal password=password username=admin
time="2023-11-03T13:42:48Z" level=info msg="../../dist/argocd app create test-helm-values-literal-file-local --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path helm --project default --dest-namespace argocd-e2e--test-helm-values-literal-file-local-duehk --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTM2MywibmJmIjoxNjk5MDE4OTYzLCJpYXQiOjE2OTkwMTg5NjMsImp0aSI6IjAyMTY1MzhhLTI0MTUtNDNlMy04MmZlLWNhYjAyZmNhMDJhMSJ9.zdLMVp0Y9hsfyrGqreh4SxDDDsIczseE6VQlAyFXM5o --insecure" dir= execID=36973
time="2023-11-03T13:42:49Z" level=debug msg="application 'test-helm-values-literal-file-local' created\n" duration=898.0277ms execID=36973
time="2023-11-03T13:42:49Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:42:49Z" level=info msg="../../dist/argocd app set test-helm-values-literal-file-local --values-literal-file testdata/helm/baz.yaml --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTM2MywibmJmIjoxNjk5MDE4OTYzLCJpYXQiOjE2OTkwMTg5NjMsImp0aSI6IjAyMTY1MzhhLTI0MTUtNDNlMy04MmZlLWNhYjAyZmNhMDJhMSJ9.zdLMVp0Y9hsfyrGqreh4SxDDDsIczseE6VQlAyFXM5o --insecure" dir= execID=d435c
time="2023-11-03T13:42:50Z" level=debug duration=1.042709s execID=d435c
time="2023-11-03T13:42:50Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:42:50Z" level=info msg="../../dist/argocd app unset test-helm-values-literal-file-local --values-literal --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTM2MywibmJmIjoxNjk5MDE4OTYzLCJpYXQiOjE2OTkwMTg5NjMsImp0aSI6IjAyMTY1MzhhLTI0MTUtNDNlMy04MmZlLWNhYjAyZmNhMDJhMSJ9.zdLMVp0Y9hsfyrGqreh4SxDDDsIczseE6VQlAyFXM5o --insecure" dir= execID=b137c
time="2023-11-03T13:42:50Z" level=debug duration=99.566293ms execID=b137c
time="2023-11-03T13:42:50Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:42:50Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestHelmValuesLiteralFileLocal (8.67s)
=== RUN   TestHelmValuesLiteralFileRemote
    helm_test.go:236: Listening at address: [::]:38727
time="2023-11-03T13:42:50Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=62bde
time="2023-11-03T13:42:50Z" level=debug msg="namespace \"argocd-e2e--test-helm-values-literal-file-local-duehk\" deleted\n" duration=225.340121ms execID=62bde
time="2023-11-03T13:42:50Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=8b53f
time="2023-11-03T13:42:51Z" level=debug msg="No resources found\n" duration=428.846872ms execID=8b53f
time="2023-11-03T13:42:51Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=9bad7
time="2023-11-03T13:42:51Z" level=debug msg="No resources found\n" duration=263.094993ms execID=9bad7
time="2023-11-03T13:42:52Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:42:52Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTM3MiwibmJmIjoxNjk5MDE4OTcyLCJpYXQiOjE2OTkwMTg5NzIsImp0aSI6IjVhNDdhN2ZkLWMwYjYtNDcxOS1iNzdhLTVhZmIxMzAxOGU3MCJ9.jOdwhZ-dJ8NN9fMg7qYkJlD3kuFYMRhz_i5eIl_0ckc --insecure" dir= execID=d2961
time="2023-11-03T13:42:52Z" level=debug duration=79.752477ms execID=d2961
time="2023-11-03T13:42:52Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=fc2e8
time="2023-11-03T13:42:52Z" level=debug duration=2.040962ms execID=fc2e8
time="2023-11-03T13:42:52Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=05bd0
time="2023-11-03T13:42:52Z" level=debug duration=1.824886ms execID=05bd0
time="2023-11-03T13:42:52Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=5f8ae
time="2023-11-03T13:42:52Z" level=debug duration=1.649786ms execID=5f8ae
time="2023-11-03T13:42:52Z" level=info msg="pkill -9 gpg-agent" dir= execID=ce147
time="2023-11-03T13:42:52Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=ce41a
time="2023-11-03T13:42:52Z" level=debug duration=10.130398ms execID=ce41a
time="2023-11-03T13:42:52Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=9a7d2
time="2023-11-03T13:42:52Z" level=debug duration=52.664215ms execID=9a7d2
time="2023-11-03T13:42:52Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=2855d
time="2023-11-03T13:42:52Z" level=debug duration=2.201645ms execID=2855d
time="2023-11-03T13:42:52Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=c5c04
time="2023-11-03T13:42:52Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.675641ms execID=c5c04
time="2023-11-03T13:42:52Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=e8151
time="2023-11-03T13:42:52Z" level=debug duration=28.639266ms execID=e8151
time="2023-11-03T13:42:52Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=bed04
time="2023-11-03T13:42:52Z" level=debug duration=33.911549ms execID=bed04
time="2023-11-03T13:42:52Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=14c0b
time="2023-11-03T13:42:52Z" level=debug duration=2.53268ms execID=14c0b
time="2023-11-03T13:42:52Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=4c522
Handling connection for 9081
time="2023-11-03T13:42:52Z" level=debug duration=98.694979ms execID=4c522
time="2023-11-03T13:42:52Z" level=info msg="kubectl create ns argocd-e2e--test-helm-values-literal-file-remote-yfihh" dir= execID=7fcec
time="2023-11-03T13:42:52Z" level=debug msg="namespace/argocd-e2e--test-helm-values-literal-file-remote-yfihh created\n" duration=196.285369ms execID=7fcec
time="2023-11-03T13:42:52Z" level=info msg="kubectl label ns argocd-e2e--test-helm-values-literal-file-remote-yfihh e2e.argoproj.io=true" dir= execID=6fe43
time="2023-11-03T13:42:53Z" level=debug msg="namespace/argocd-e2e--test-helm-values-literal-file-remote-yfihh labeled\n" duration=300.248423ms execID=6fe43
time="2023-11-03T13:42:53Z" level=info msg="clean state" duration=2.644808035s id=TestHelmValuesLiteralFileRemote-yfihh name=TestHelmValuesLiteralFileRemote password=password username=admin
time="2023-11-03T13:42:54Z" level=info msg="../../dist/argocd app create test-helm-values-literal-file-remote --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path helm --project default --dest-namespace argocd-e2e--test-helm-values-literal-file-remote-yfihh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTM3MiwibmJmIjoxNjk5MDE4OTcyLCJpYXQiOjE2OTkwMTg5NzIsImp0aSI6IjVhNDdhN2ZkLWMwYjYtNDcxOS1iNzdhLTVhZmIxMzAxOGU3MCJ9.jOdwhZ-dJ8NN9fMg7qYkJlD3kuFYMRhz_i5eIl_0ckc --insecure" dir= execID=279a2
time="2023-11-03T13:42:54Z" level=debug msg="application 'test-helm-values-literal-file-remote' created\n" duration=603.35114ms execID=279a2
time="2023-11-03T13:42:54Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:42:54Z" level=info msg="../../dist/argocd app set test-helm-values-literal-file-remote --values-literal-file http://[::]:38727 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTM3MiwibmJmIjoxNjk5MDE4OTcyLCJpYXQiOjE2OTkwMTg5NzIsImp0aSI6IjVhNDdhN2ZkLWMwYjYtNDcxOS1iNzdhLTVhZmIxMzAxOGU3MCJ9.jOdwhZ-dJ8NN9fMg7qYkJlD3kuFYMRhz_i5eIl_0ckc --insecure" dir= execID=8b17a
time="2023-11-03T13:42:56Z" level=debug duration=1.800115879s execID=8b17a
time="2023-11-03T13:42:56Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:42:56Z" level=info msg="../../dist/argocd app unset test-helm-values-literal-file-remote --values-literal --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTM3MiwibmJmIjoxNjk5MDE4OTcyLCJpYXQiOjE2OTkwMTg5NzIsImp0aSI6IjVhNDdhN2ZkLWMwYjYtNDcxOS1iNzdhLTVhZmIxMzAxOGU3MCJ9.jOdwhZ-dJ8NN9fMg7qYkJlD3kuFYMRhz_i5eIl_0ckc --insecure" dir= execID=d3b09
time="2023-11-03T13:42:56Z" level=debug duration=495.982242ms execID=d3b09
time="2023-11-03T13:42:56Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:42:56Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestHelmValuesLiteralFileRemote (6.55s)
=== RUN   TestHelmCrdHook
time="2023-11-03T13:42:56Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=0b9af
time="2023-11-03T13:42:57Z" level=debug msg="namespace \"argocd-e2e--test-helm-values-literal-file-remote-yfihh\" deleted\n" duration=181.669389ms execID=0b9af
time="2023-11-03T13:42:57Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=4baea
time="2023-11-03T13:42:57Z" level=debug msg="No resources found\n" duration=436.339061ms execID=4baea
time="2023-11-03T13:42:57Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=90d74
time="2023-11-03T13:42:58Z" level=debug msg="No resources found\n" duration=650.642291ms execID=90d74
time="2023-11-03T13:42:58Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:42:59Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTM3OCwibmJmIjoxNjk5MDE4OTc4LCJpYXQiOjE2OTkwMTg5NzgsImp0aSI6ImM2ZGE0YzQ1LWRlYjYtNGMxYi1iZmViLWI5YTk1NmQyOGNhOCJ9.AukNWl2l8EDtD3V8v90Eb5eYF_6Nusp5rLuEizHMlh0 --insecure" dir= execID=9ac76
time="2023-11-03T13:42:59Z" level=debug duration=435.430688ms execID=9ac76
time="2023-11-03T13:43:04Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=2a73f
time="2023-11-03T13:43:04Z" level=debug duration=5.603583ms execID=2a73f
time="2023-11-03T13:43:04Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=f8211
time="2023-11-03T13:43:04Z" level=debug duration=2.445989ms execID=f8211
time="2023-11-03T13:43:04Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=3ec99
time="2023-11-03T13:43:04Z" level=debug duration=1.827206ms execID=3ec99
time="2023-11-03T13:43:04Z" level=info msg="pkill -9 gpg-agent" dir= execID=c5845
time="2023-11-03T13:43:04Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=49ce8
time="2023-11-03T13:43:04Z" level=debug duration=92.676826ms execID=49ce8
time="2023-11-03T13:43:04Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=5a18c
time="2023-11-03T13:43:05Z" level=debug duration=895.24903ms execID=5a18c
time="2023-11-03T13:43:05Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=e2e63
time="2023-11-03T13:43:05Z" level=debug duration=2.069345ms execID=e2e63
time="2023-11-03T13:43:05Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=87f44
time="2023-11-03T13:43:05Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=7.5551ms execID=87f44
time="2023-11-03T13:43:05Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=d3820
time="2023-11-03T13:43:05Z" level=debug duration=489.099249ms execID=d3820
time="2023-11-03T13:43:05Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=966c8
time="2023-11-03T13:43:06Z" level=debug duration=995.019415ms execID=966c8
time="2023-11-03T13:43:06Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=8ae3b
time="2023-11-03T13:43:06Z" level=debug duration=3.836723ms execID=8ae3b
time="2023-11-03T13:43:06Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=421b3
Handling connection for 9081
time="2023-11-03T13:43:07Z" level=debug duration=99.529894ms execID=421b3
time="2023-11-03T13:43:07Z" level=info msg="kubectl create ns argocd-e2e--test-helm-crd-hook-ljpsn" dir= execID=2c088
time="2023-11-03T13:43:07Z" level=debug msg="namespace/argocd-e2e--test-helm-crd-hook-ljpsn created\n" duration=145.392705ms execID=2c088
time="2023-11-03T13:43:07Z" level=info msg="kubectl label ns argocd-e2e--test-helm-crd-hook-ljpsn e2e.argoproj.io=true" dir= execID=7ca3e
time="2023-11-03T13:43:07Z" level=debug msg="namespace/argocd-e2e--test-helm-crd-hook-ljpsn labeled\n" duration=277.451437ms execID=7ca3e
time="2023-11-03T13:43:07Z" level=info msg="clean state" duration=10.514220096s id=TestHelmCrdHook-ljpsn name=TestHelmCrdHook password=password username=admin
time="2023-11-03T13:43:08Z" level=info msg="../../dist/argocd app create test-helm-crd-hook --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path helm-crd --project default --dest-namespace argocd-e2e--test-helm-crd-hook-ljpsn --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTM3OCwibmJmIjoxNjk5MDE4OTc4LCJpYXQiOjE2OTkwMTg5NzgsImp0aSI6ImM2ZGE0YzQ1LWRlYjYtNGMxYi1iZmViLWI5YTk1NmQyOGNhOCJ9.AukNWl2l8EDtD3V8v90Eb5eYF_6Nusp5rLuEizHMlh0 --insecure" dir= execID=d1ea6
time="2023-11-03T13:43:08Z" level=debug msg="application 'test-helm-crd-hook' created\n" duration=326.140749ms execID=d1ea6
time="2023-11-03T13:43:08Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:43:08Z" level=info msg="../../dist/argocd app sync test-helm-crd-hook --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTM3OCwibmJmIjoxNjk5MDE4OTc4LCJpYXQiOjE2OTkwMTg5NzgsImp0aSI6ImM2ZGE0YzQ1LWRlYjYtNGMxYi1iZmViLWI5YTk1NmQyOGNhOCJ9.AukNWl2l8EDtD3V8v90Eb5eYF_6Nusp5rLuEizHMlh0 --insecure" dir= execID=5184e
time="2023-11-03T13:43:12Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:43:09+00:00  apiextensions.k8s.io  CustomResourceDefinition                                        crontabs.stable.example.com  OutOfSync  Missing              \n2023-11-03T13:43:09+00:00  stable.example.com       CronTab                argocd-e2e--test-helm-crd-hook-ljpsn  test-helm-crd-hook-inst      OutOfSync  Missing              \n2023-11-03T13:43:12+00:00  apiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-helm-crd-hook-ljpsn  crontabs.stable.example.com   Running    Synced              customresourcedefinition.apiextensions.k8s.io/crontabs.stable.example.com created\n2023-11-03T13:43:12+00:00  stable.example.com       CronTab                argocd-e2e--test-helm-crd-hook-ljpsn  test-helm-crd-hook-inst      OutOfSync  Missing              crontab.stable.example.com/test-helm-crd-hook-inst created\n2023-11-03T13:43:12+00:00  stable.example.com       CronTab                argocd-e2e--test-helm-crd-hook-ljpsn  test-helm-crd-hook-inst        Synced  Missing              crontab.stable.example.com/test-helm-crd-hook-inst created\n2023-11-03T13:43:12+00:00  apiextensions.k8s.io  CustomResourceDefinition                                        crontabs.stable.example.com    Synced  Missing              \n\nName:               argocd-e2e/test-helm-crd-hook\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-helm-crd-hook-ljpsn\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-helm-crd-hook\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               helm-crd\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (de10fec)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      de10fec529478bb2a2725b2a26b7735e0861769e\nPhase:              Succeeded\nStart:              2023-11-03 13:43:08 +0000 UTC\nFinished:           2023-11-03 13:43:12 +0000 UTC\nDuration:           4s\nMessage:            successfully synced (all tasks run)\n\nGROUP                 KIND                      NAMESPACE                             NAME                         STATUS   HEALTH  HOOK  MESSAGE\napiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-helm-crd-hook-ljpsn  crontabs.stable.example.com  Running  Synced        customresourcedefinition.apiextensions.k8s.io/crontabs.stable.example.com created\nstable.example.com    CronTab                   argocd-e2e--test-helm-crd-hook-ljpsn  test-helm-crd-hook-inst      Synced                 crontab.stable.example.com/test-helm-crd-hook-inst created\napiextensions.k8s.io  CustomResourceDefinition                                        crontabs.stable.example.com  Synced                 \n" duration=4.136767651s execID=5184e
time="2023-11-03T13:43:12Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:43:12Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:43:12Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:43:12Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:43:12Z" level=info msg="expectation succeeded: right number of results, want 2, got 2"
time="2023-11-03T13:43:12Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestHelmCrdHook (16.00s)
=== RUN   TestHelmReleaseName
time="2023-11-03T13:43:12Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=5b513
time="2023-11-03T13:43:13Z" level=debug msg="namespace \"argocd-e2e--test-helm-crd-hook-ljpsn\" deleted\n" duration=247.833151ms execID=5b513
time="2023-11-03T13:43:13Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=f534c
time="2023-11-03T13:43:13Z" level=debug msg="No resources found\n" duration=478.021913ms execID=f534c
time="2023-11-03T13:43:13Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=1b3e2
time="2023-11-03T13:43:14Z" level=debug msg="No resources found\n" duration=320.578734ms execID=1b3e2
time="2023-11-03T13:43:14Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:43:14Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTM5NCwibmJmIjoxNjk5MDE4OTk0LCJpYXQiOjE2OTkwMTg5OTQsImp0aSI6ImI2NTUzYjg2LTdiMmItNDM5Ni05YTdhLTFjMDI1NTIzNjMzNiJ9.MjWzZ4MCFqwCKU5mef945ZZQK3EeCK6h-fAHhrMWuqs --insecure" dir= execID=6d303
time="2023-11-03T13:43:14Z" level=debug duration=81.544877ms execID=6d303
time="2023-11-03T13:43:15Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=85464
time="2023-11-03T13:43:15Z" level=debug duration=2.817435ms execID=85464
time="2023-11-03T13:43:15Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=b9dc2
time="2023-11-03T13:43:15Z" level=debug duration=2.355805ms execID=b9dc2
time="2023-11-03T13:43:15Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=67eae
time="2023-11-03T13:43:15Z" level=debug duration=1.482278ms execID=67eae
time="2023-11-03T13:43:15Z" level=info msg="pkill -9 gpg-agent" dir= execID=b59d8
time="2023-11-03T13:43:15Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=2bcdc
time="2023-11-03T13:43:15Z" level=debug duration=92.142856ms execID=2bcdc
time="2023-11-03T13:43:15Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=58bad
time="2023-11-03T13:43:15Z" level=debug duration=307.341963ms execID=58bad
time="2023-11-03T13:43:15Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=59318
time="2023-11-03T13:43:15Z" level=debug duration=2.011405ms execID=59318
time="2023-11-03T13:43:15Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=b167a
time="2023-11-03T13:43:15Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=184.263031ms execID=b167a
time="2023-11-03T13:43:15Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=46094
time="2023-11-03T13:43:15Z" level=debug duration=32.108036ms execID=46094
time="2023-11-03T13:43:15Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=751b3
time="2023-11-03T13:43:15Z" level=debug duration=22.13574ms execID=751b3
time="2023-11-03T13:43:15Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=d6c4e
time="2023-11-03T13:43:15Z" level=debug duration=2.839136ms execID=d6c4e
time="2023-11-03T13:43:15Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=c6b42
Handling connection for 9081
time="2023-11-03T13:43:16Z" level=debug duration=142.391799ms execID=c6b42
time="2023-11-03T13:43:16Z" level=info msg="kubectl create ns argocd-e2e--test-helm-release-name-vgrdo" dir= execID=15976
time="2023-11-03T13:43:16Z" level=debug msg="namespace/argocd-e2e--test-helm-release-name-vgrdo created\n" duration=146.649261ms execID=15976
time="2023-11-03T13:43:16Z" level=info msg="kubectl label ns argocd-e2e--test-helm-release-name-vgrdo e2e.argoproj.io=true" dir= execID=f3316
time="2023-11-03T13:43:16Z" level=debug msg="namespace/argocd-e2e--test-helm-release-name-vgrdo labeled\n" duration=271.734534ms execID=f3316
time="2023-11-03T13:43:16Z" level=info msg="clean state" duration=3.608814638s id=TestHelmReleaseName-vgrdo name=TestHelmReleaseName password=password username=admin
time="2023-11-03T13:43:17Z" level=info msg="../../dist/argocd app create test-helm-release-name --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path helm --project default --dest-namespace argocd-e2e--test-helm-release-name-vgrdo --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTM5NCwibmJmIjoxNjk5MDE4OTk0LCJpYXQiOjE2OTkwMTg5OTQsImp0aSI6ImI2NTUzYjg2LTdiMmItNDM5Ni05YTdhLTFjMDI1NTIzNjMzNiJ9.MjWzZ4MCFqwCKU5mef945ZZQK3EeCK6h-fAHhrMWuqs --insecure" dir= execID=faf1e
time="2023-11-03T13:43:18Z" level=debug msg="application 'test-helm-release-name' created\n" duration=623.590785ms execID=faf1e
time="2023-11-03T13:43:18Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:43:18Z" level=info msg="../../dist/argocd app set test-helm-release-name --release-name foo --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTM5NCwibmJmIjoxNjk5MDE4OTk0LCJpYXQiOjE2OTkwMTg5OTQsImp0aSI6ImI2NTUzYjg2LTdiMmItNDM5Ni05YTdhLTFjMDI1NTIzNjMzNiJ9.MjWzZ4MCFqwCKU5mef945ZZQK3EeCK6h-fAHhrMWuqs --insecure" dir= execID=9eacf
time="2023-11-03T13:43:18Z" level=debug duration=205.009157ms execID=9eacf
time="2023-11-03T13:43:18Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:43:18Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestHelmReleaseName (5.44s)
=== RUN   TestHelmSet
time="2023-11-03T13:43:18Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=b2b0c
time="2023-11-03T13:43:18Z" level=debug msg="namespace \"argocd-e2e--test-helm-release-name-vgrdo\" deleted\n" duration=233.503209ms execID=b2b0c
time="2023-11-03T13:43:18Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=a439c
time="2023-11-03T13:43:19Z" level=debug msg="No resources found\n" duration=485.280034ms execID=a439c
time="2023-11-03T13:43:19Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=27d94
time="2023-11-03T13:43:19Z" level=debug msg="No resources found\n" duration=316.034883ms execID=27d94
time="2023-11-03T13:43:20Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:43:20Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTQwMCwibmJmIjoxNjk5MDE5MDAwLCJpYXQiOjE2OTkwMTkwMDAsImp0aSI6ImI0NGFmNjljLWRjYTAtNGM4MS04M2JhLTBkZjg4NDQ5YWRiZSJ9.3JSc6u8fWLhzp0g8Hyy1N7TyaD3fbsv23A7NQqXLzDg --insecure" dir= execID=f52ec
time="2023-11-03T13:43:20Z" level=debug duration=75.923339ms execID=f52ec
time="2023-11-03T13:43:22Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=5e5c8
time="2023-11-03T13:43:22Z" level=debug duration=3.225564ms execID=5e5c8
time="2023-11-03T13:43:22Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=a9f1b
time="2023-11-03T13:43:22Z" level=debug duration=1.6109ms execID=a9f1b
time="2023-11-03T13:43:22Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=1e889
time="2023-11-03T13:43:22Z" level=debug duration=2.075618ms execID=1e889
time="2023-11-03T13:43:22Z" level=info msg="pkill -9 gpg-agent" dir= execID=ade2e
time="2023-11-03T13:43:22Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=b8be4
time="2023-11-03T13:43:22Z" level=debug duration=11.377212ms execID=b8be4
time="2023-11-03T13:43:22Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=09dbb
time="2023-11-03T13:43:24Z" level=debug duration=1.887815433s execID=09dbb
time="2023-11-03T13:43:24Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=820e7
time="2023-11-03T13:43:24Z" level=debug duration=2.075726ms execID=820e7
time="2023-11-03T13:43:24Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=25ce0
time="2023-11-03T13:43:24Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=10.173838ms execID=25ce0
time="2023-11-03T13:43:24Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=900f0
time="2023-11-03T13:43:24Z" level=debug duration=385.625498ms execID=900f0
time="2023-11-03T13:43:24Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=e4b3f
time="2023-11-03T13:43:25Z" level=debug duration=1.300380129s execID=e4b3f
time="2023-11-03T13:43:25Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=19b49
time="2023-11-03T13:43:25Z" level=debug duration=3.065282ms execID=19b49
time="2023-11-03T13:43:25Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=a6374
Handling connection for 9081
time="2023-11-03T13:43:26Z" level=debug duration=91.016831ms execID=a6374
time="2023-11-03T13:43:26Z" level=info msg="kubectl create ns argocd-e2e--test-helm-set-xfbrs" dir= execID=edb5f
time="2023-11-03T13:43:26Z" level=debug msg="namespace/argocd-e2e--test-helm-set-xfbrs created\n" duration=194.574869ms execID=edb5f
time="2023-11-03T13:43:26Z" level=info msg="kubectl label ns argocd-e2e--test-helm-set-xfbrs e2e.argoproj.io=true" dir= execID=28bba
time="2023-11-03T13:43:26Z" level=debug msg="namespace/argocd-e2e--test-helm-set-xfbrs labeled\n" duration=303.623413ms execID=28bba
time="2023-11-03T13:43:26Z" level=info msg="clean state" duration=8.149016537s id=TestHelmSet-xfbrs name=TestHelmSet password=password username=admin
time="2023-11-03T13:43:27Z" level=info msg="../../dist/argocd app create test-helm-set --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path helm --project default --dest-namespace argocd-e2e--test-helm-set-xfbrs --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTQwMCwibmJmIjoxNjk5MDE5MDAwLCJpYXQiOjE2OTkwMTkwMDAsImp0aSI6ImI0NGFmNjljLWRjYTAtNGM4MS04M2JhLTBkZjg4NDQ5YWRiZSJ9.3JSc6u8fWLhzp0g8Hyy1N7TyaD3fbsv23A7NQqXLzDg --insecure" dir= execID=68f41
time="2023-11-03T13:43:27Z" level=debug msg="application 'test-helm-set' created\n" duration=312.978281ms execID=68f41
time="2023-11-03T13:43:27Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:43:27Z" level=info msg="../../dist/argocd app set test-helm-set --helm-set foo=bar --helm-set foo=baz --helm-set app=$ARGOCD_APP_NAME --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTQwMCwibmJmIjoxNjk5MDE5MDAwLCJpYXQiOjE2OTkwMTkwMDAsImp0aSI6ImI0NGFmNjljLWRjYTAtNGM4MS04M2JhLTBkZjg4NDQ5YWRiZSJ9.3JSc6u8fWLhzp0g8Hyy1N7TyaD3fbsv23A7NQqXLzDg --insecure" dir= execID=29bea
time="2023-11-03T13:43:28Z" level=debug duration=301.114505ms execID=29bea
time="2023-11-03T13:43:28Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:43:28Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestHelmSet (9.77s)
=== RUN   TestHelmSetString
time="2023-11-03T13:43:28Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=63813
time="2023-11-03T13:43:28Z" level=debug msg="namespace \"argocd-e2e--test-helm-set-xfbrs\" deleted\n" duration=245.045043ms execID=63813
time="2023-11-03T13:43:28Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=99676
time="2023-11-03T13:43:28Z" level=debug msg="No resources found\n" duration=449.368518ms execID=99676
time="2023-11-03T13:43:28Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=82dcc
time="2023-11-03T13:43:29Z" level=debug msg="No resources found\n" duration=276.074488ms execID=82dcc
time="2023-11-03T13:43:30Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:43:30Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTQwOSwibmJmIjoxNjk5MDE5MDA5LCJpYXQiOjE2OTkwMTkwMDksImp0aSI6ImQ2ZTBlMWJkLWFhYjctNDliZi1iMmFlLTA1MDQxNWQ1MzBkMyJ9.eHoHXtIhi_-gjySbBk5sk0NOprbPt4ugAKLOZQdNw2k --insecure" dir= execID=a5e26
time="2023-11-03T13:43:30Z" level=debug duration=94.947957ms execID=a5e26
time="2023-11-03T13:43:32Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=1d764
time="2023-11-03T13:43:32Z" level=debug duration=89.659416ms execID=1d764
time="2023-11-03T13:43:32Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=512b6
time="2023-11-03T13:43:32Z" level=debug duration=2.794501ms execID=512b6
time="2023-11-03T13:43:32Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=31ce9
time="2023-11-03T13:43:32Z" level=debug duration=1.759578ms execID=31ce9
time="2023-11-03T13:43:32Z" level=info msg="pkill -9 gpg-agent" dir= execID=fb818
time="2023-11-03T13:43:32Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=9691f
time="2023-11-03T13:43:32Z" level=debug duration=11.265611ms execID=9691f
time="2023-11-03T13:43:32Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=5c586
time="2023-11-03T13:43:33Z" level=debug duration=784.86042ms execID=5c586
time="2023-11-03T13:43:33Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=9630d
time="2023-11-03T13:43:33Z" level=debug duration=3.137091ms execID=9630d
time="2023-11-03T13:43:33Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=e1b09
time="2023-11-03T13:43:33Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=98.278536ms execID=e1b09
time="2023-11-03T13:43:33Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=518c4
time="2023-11-03T13:43:34Z" level=debug duration=1.499866061s execID=518c4
time="2023-11-03T13:43:34Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=0566a
time="2023-11-03T13:43:36Z" level=debug duration=1.399165424s execID=0566a
time="2023-11-03T13:43:36Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=f6627
time="2023-11-03T13:43:36Z" level=debug duration=498.584784ms execID=f6627
time="2023-11-03T13:43:36Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=315ff
Handling connection for 9081
time="2023-11-03T13:43:40Z" level=debug duration=3.598530329s execID=315ff
time="2023-11-03T13:43:40Z" level=info msg="kubectl create ns argocd-e2e--test-helm-set-string-jtaxr" dir= execID=319b1
time="2023-11-03T13:43:40Z" level=debug msg="namespace/argocd-e2e--test-helm-set-string-jtaxr created\n" duration=356.098414ms execID=319b1
time="2023-11-03T13:43:40Z" level=info msg="kubectl label ns argocd-e2e--test-helm-set-string-jtaxr e2e.argoproj.io=true" dir= execID=2bf81
time="2023-11-03T13:43:41Z" level=debug msg="namespace/argocd-e2e--test-helm-set-string-jtaxr labeled\n" duration=272.77992ms execID=2bf81
time="2023-11-03T13:43:41Z" level=info msg="clean state" duration=12.906898885s id=TestHelmSetString-jtaxr name=TestHelmSetString password=password username=admin
time="2023-11-03T13:43:42Z" level=info msg="../../dist/argocd app create test-helm-set-string --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path helm --project default --dest-namespace argocd-e2e--test-helm-set-string-jtaxr --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTQwOSwibmJmIjoxNjk5MDE5MDA5LCJpYXQiOjE2OTkwMTkwMDksImp0aSI6ImQ2ZTBlMWJkLWFhYjctNDliZi1iMmFlLTA1MDQxNWQ1MzBkMyJ9.eHoHXtIhi_-gjySbBk5sk0NOprbPt4ugAKLOZQdNw2k --insecure" dir= execID=ef1e8
time="2023-11-03T13:43:42Z" level=debug msg="application 'test-helm-set-string' created\n" duration=294.263576ms execID=ef1e8
time="2023-11-03T13:43:42Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:43:42Z" level=info msg="../../dist/argocd app set test-helm-set-string --helm-set-string foo=bar --helm-set-string foo=baz --helm-set-string app=$ARGOCD_APP_NAME --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTQwOSwibmJmIjoxNjk5MDE5MDA5LCJpYXQiOjE2OTkwMTkwMDksImp0aSI6ImQ2ZTBlMWJkLWFhYjctNDliZi1iMmFlLTA1MDQxNWQ1MzBkMyJ9.eHoHXtIhi_-gjySbBk5sk0NOprbPt4ugAKLOZQdNw2k --insecure" dir= execID=ee83b
time="2023-11-03T13:43:42Z" level=debug duration=346.236996ms execID=ee83b
time="2023-11-03T13:43:42Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:43:42Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestHelmSetString (14.55s)
=== RUN   TestHelmSetFile
time="2023-11-03T13:43:42Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=9b065
time="2023-11-03T13:43:42Z" level=debug msg="namespace \"argocd-e2e--test-helm-set-string-jtaxr\" deleted\n" duration=207.536513ms execID=9b065
time="2023-11-03T13:43:42Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=fa45f
time="2023-11-03T13:43:43Z" level=debug msg="No resources found\n" duration=431.29057ms execID=fa45f
time="2023-11-03T13:43:43Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=87f62
time="2023-11-03T13:43:43Z" level=debug msg="No resources found\n" duration=162.153647ms execID=87f62
time="2023-11-03T13:43:44Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:43:44Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTQyNCwibmJmIjoxNjk5MDE5MDI0LCJpYXQiOjE2OTkwMTkwMjQsImp0aSI6ImNlZTU4OGRhLTk0M2MtNDhhZi1iMzc1LWMzMzEyZmVjMzJhZCJ9.JUA4xGiSx6lBw6xPziWPga3nt0lor_524FYF6Uun6vY --insecure" dir= execID=5eedc
time="2023-11-03T13:43:44Z" level=debug duration=129.247912ms execID=5eedc
time="2023-11-03T13:43:47Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=5d588
time="2023-11-03T13:43:47Z" level=debug duration=2.176901ms execID=5d588
time="2023-11-03T13:43:47Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=67e67
time="2023-11-03T13:43:47Z" level=debug duration=1.536765ms execID=67e67
time="2023-11-03T13:43:47Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=4e0bf
time="2023-11-03T13:43:47Z" level=debug duration=1.634976ms execID=4e0bf
time="2023-11-03T13:43:47Z" level=info msg="pkill -9 gpg-agent" dir= execID=4fd41
time="2023-11-03T13:43:47Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=98943
time="2023-11-03T13:43:47Z" level=debug duration=10.128345ms execID=98943
time="2023-11-03T13:43:47Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=180ac
time="2023-11-03T13:43:47Z" level=debug duration=33.482114ms execID=180ac
time="2023-11-03T13:43:47Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=5803c
time="2023-11-03T13:43:47Z" level=debug duration=1.585208ms execID=5803c
time="2023-11-03T13:43:47Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=5e7f4
time="2023-11-03T13:43:47Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.829279ms execID=5e7f4
time="2023-11-03T13:43:47Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=6857f
time="2023-11-03T13:43:47Z" level=debug duration=28.713992ms execID=6857f
time="2023-11-03T13:43:47Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=47b93
time="2023-11-03T13:43:47Z" level=debug duration=28.126162ms execID=47b93
time="2023-11-03T13:43:47Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=04605
time="2023-11-03T13:43:47Z" level=debug duration=2.975826ms execID=04605
time="2023-11-03T13:43:47Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=8a29a
Handling connection for 9081
time="2023-11-03T13:43:47Z" level=debug duration=62.110837ms execID=8a29a
time="2023-11-03T13:43:47Z" level=info msg="kubectl create ns argocd-e2e--test-helm-set-file-shnta" dir= execID=d2d36
time="2023-11-03T13:43:47Z" level=debug msg="namespace/argocd-e2e--test-helm-set-file-shnta created\n" duration=156.396153ms execID=d2d36
time="2023-11-03T13:43:47Z" level=info msg="kubectl label ns argocd-e2e--test-helm-set-file-shnta e2e.argoproj.io=true" dir= execID=6b78a
time="2023-11-03T13:43:47Z" level=debug msg="namespace/argocd-e2e--test-helm-set-file-shnta labeled\n" duration=271.016319ms execID=6b78a
time="2023-11-03T13:43:47Z" level=info msg="clean state" duration=4.939725473s id=TestHelmSetFile-shnta name=TestHelmSetFile password=password username=admin
time="2023-11-03T13:43:48Z" level=info msg="../../dist/argocd app create test-helm-set-file --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path helm --project default --dest-namespace argocd-e2e--test-helm-set-file-shnta --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTQyNCwibmJmIjoxNjk5MDE5MDI0LCJpYXQiOjE2OTkwMTkwMjQsImp0aSI6ImNlZTU4OGRhLTk0M2MtNDhhZi1iMzc1LWMzMzEyZmVjMzJhZCJ9.JUA4xGiSx6lBw6xPziWPga3nt0lor_524FYF6Uun6vY --insecure" dir= execID=91304
time="2023-11-03T13:43:48Z" level=debug msg="application 'test-helm-set-file' created\n" duration=239.262583ms execID=91304
time="2023-11-03T13:43:48Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:43:48Z" level=info msg="../../dist/argocd app set test-helm-set-file --helm-set-file foo=bar.yaml --helm-set-file foo=baz.yaml --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTQyNCwibmJmIjoxNjk5MDE5MDI0LCJpYXQiOjE2OTkwMTkwMjQsImp0aSI6ImNlZTU4OGRhLTk0M2MtNDhhZi1iMzc1LWMzMzEyZmVjMzJhZCJ9.JUA4xGiSx6lBw6xPziWPga3nt0lor_524FYF6Uun6vY --insecure" dir= execID=03570
time="2023-11-03T13:43:49Z" level=debug duration=281.345963ms execID=03570
time="2023-11-03T13:43:49Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:43:49Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestHelmSetFile (6.47s)
=== RUN   TestHelmSetEnv
time="2023-11-03T13:43:49Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=18c18
time="2023-11-03T13:43:49Z" level=debug msg="namespace \"argocd-e2e--test-helm-set-file-shnta\" deleted\n" duration=239.681201ms execID=18c18
time="2023-11-03T13:43:49Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=928fa
time="2023-11-03T13:43:49Z" level=debug msg="No resources found\n" duration=391.386058ms execID=928fa
time="2023-11-03T13:43:49Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=bbfb7
time="2023-11-03T13:43:50Z" level=debug msg="No resources found\n" duration=290.056974ms execID=bbfb7
time="2023-11-03T13:43:50Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:43:50Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTQzMCwibmJmIjoxNjk5MDE5MDMwLCJpYXQiOjE2OTkwMTkwMzAsImp0aSI6IjllNDQ3NjViLWZkNDYtNGQ3Ni1hNThhLWUxMGU3ZjgxNGI4NSJ9.lv512aBWAvLWXRnayAlpTN-dx8OzSr0xpByiiQPSsSY --insecure" dir= execID=387ab
time="2023-11-03T13:43:51Z" level=debug duration=111.710558ms execID=387ab
time="2023-11-03T13:43:58Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=14c9e
time="2023-11-03T13:43:58Z" level=debug duration=2.101307ms execID=14c9e
time="2023-11-03T13:43:58Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=596b8
time="2023-11-03T13:43:58Z" level=debug duration=1.876014ms execID=596b8
time="2023-11-03T13:43:58Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=f1d5a
time="2023-11-03T13:43:58Z" level=debug duration=1.575472ms execID=f1d5a
time="2023-11-03T13:43:58Z" level=info msg="pkill -9 gpg-agent" dir= execID=1a484
time="2023-11-03T13:43:58Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=20643
time="2023-11-03T13:43:58Z" level=debug duration=72.50481ms execID=20643
time="2023-11-03T13:43:58Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=8837b
time="2023-11-03T13:43:58Z" level=debug duration=209.154271ms execID=8837b
time="2023-11-03T13:43:58Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=ab990
time="2023-11-03T13:43:58Z" level=debug duration=1.962168ms execID=ab990
time="2023-11-03T13:43:58Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=00140
time="2023-11-03T13:43:58Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=7.763564ms execID=00140
time="2023-11-03T13:43:58Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=7704c
time="2023-11-03T13:43:59Z" level=debug duration=486.761767ms execID=7704c
time="2023-11-03T13:43:59Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=0807e
time="2023-11-03T13:43:59Z" level=debug duration=21.94321ms execID=0807e
time="2023-11-03T13:43:59Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=6e1ba
time="2023-11-03T13:43:59Z" level=debug duration=2.841038ms execID=6e1ba
time="2023-11-03T13:43:59Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=a73b5
Handling connection for 9081
time="2023-11-03T13:43:59Z" level=debug duration=163.077179ms execID=a73b5
time="2023-11-03T13:43:59Z" level=info msg="kubectl create ns argocd-e2e--test-helm-set-env-fivpd" dir= execID=53fea
time="2023-11-03T13:43:59Z" level=debug msg="namespace/argocd-e2e--test-helm-set-env-fivpd created\n" duration=194.502867ms execID=53fea
time="2023-11-03T13:43:59Z" level=info msg="kubectl label ns argocd-e2e--test-helm-set-env-fivpd e2e.argoproj.io=true" dir= execID=360e8
time="2023-11-03T13:44:00Z" level=debug msg="namespace/argocd-e2e--test-helm-set-env-fivpd labeled\n" duration=326.90854ms execID=360e8
time="2023-11-03T13:44:00Z" level=info msg="clean state" duration=10.982133737s id=TestHelmSetEnv-fivpd name=TestHelmSetEnv password=password username=admin
time="2023-11-03T13:44:01Z" level=info msg="../../dist/argocd app create test-helm-set-env --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path helm-values --project default --dest-namespace argocd-e2e--test-helm-set-env-fivpd --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTQzMCwibmJmIjoxNjk5MDE5MDMwLCJpYXQiOjE2OTkwMTkwMzAsImp0aSI6IjllNDQ3NjViLWZkNDYtNGQ3Ni1hNThhLWUxMGU3ZjgxNGI4NSJ9.lv512aBWAvLWXRnayAlpTN-dx8OzSr0xpByiiQPSsSY --insecure" dir= execID=a69bf
time="2023-11-03T13:44:01Z" level=debug msg="application 'test-helm-set-env' created\n" duration=283.585882ms execID=a69bf
time="2023-11-03T13:44:01Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:44:01Z" level=info msg="../../dist/argocd app set test-helm-set-env --helm-set foo=$ARGOCD_APP_NAME --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTQzMCwibmJmIjoxNjk5MDE5MDMwLCJpYXQiOjE2OTkwMTkwMzAsImp0aSI6IjllNDQ3NjViLWZkNDYtNGQ3Ni1hNThhLWUxMGU3ZjgxNGI4NSJ9.lv512aBWAvLWXRnayAlpTN-dx8OzSr0xpByiiQPSsSY --insecure" dir= execID=28ab6
time="2023-11-03T13:44:01Z" level=debug duration=323.2426ms execID=28ab6
time="2023-11-03T13:44:01Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:44:01Z" level=info msg="../../dist/argocd app sync test-helm-set-env --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTQzMCwibmJmIjoxNjk5MDE5MDMwLCJpYXQiOjE2OTkwMTkwMzAsImp0aSI6IjllNDQ3NjViLWZkNDYtNGQ3Ni1hNThhLWUxMGU3ZjgxNGI4NSJ9.lv512aBWAvLWXRnayAlpTN-dx8OzSr0xpByiiQPSsSY --insecure" dir= execID=76466
time="2023-11-03T13:44:05Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                           NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:44:01+00:00          ConfigMap  argocd-e2e--test-helm-set-env-fivpd                my-map  OutOfSync  Missing              \n2023-11-03T13:44:05+00:00          ConfigMap  argocd-e2e--test-helm-set-env-fivpd                my-map  OutOfSync  Missing              configmap/my-map created\n2023-11-03T13:44:05+00:00          ConfigMap  argocd-e2e--test-helm-set-env-fivpd                my-map    Synced  Missing              configmap/my-map created\n\nName:               argocd-e2e/test-helm-set-env\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-helm-set-env-fivpd\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-helm-set-env\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               helm-values\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (c2b55fe)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      c2b55fe361a1c263bc5b8fa298aef7a3cd1573f0\nPhase:              Succeeded\nStart:              2023-11-03 13:44:01 +0000 UTC\nFinished:           2023-11-03 13:44:05 +0000 UTC\nDuration:           4s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                            NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-helm-set-env-fivpd  my-map  Synced                configmap/my-map created\n" duration=3.508778093s execID=76466
time="2023-11-03T13:44:05Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:44:05Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:44:05Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:44:05Z" level=info msg="kubectl -n argocd-e2e--test-helm-set-env-fivpd get cm my-map -o jsonpath={.data.foo}" dir=. execID=8f7c8
time="2023-11-03T13:44:05Z" level=debug msg=test-helm-set-env duration=309.786044ms execID=8f7c8
time="2023-11-03T13:44:05Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestHelmSetEnv (16.46s)
=== RUN   TestHelmSetStringEnv
time="2023-11-03T13:44:05Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=26f89
time="2023-11-03T13:44:05Z" level=debug msg="namespace \"argocd-e2e--test-helm-set-env-fivpd\" deleted\n" duration=250.904865ms execID=26f89
time="2023-11-03T13:44:05Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=6f64a
time="2023-11-03T13:44:06Z" level=debug msg="No resources found\n" duration=463.492523ms execID=6f64a
time="2023-11-03T13:44:06Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=952a2
time="2023-11-03T13:44:06Z" level=debug msg="No resources found\n" duration=259.238857ms execID=952a2
time="2023-11-03T13:44:07Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:44:07Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTQ0NywibmJmIjoxNjk5MDE5MDQ3LCJpYXQiOjE2OTkwMTkwNDcsImp0aSI6IjVkNTRmY2I0LWRmOTAtNDk5Mi04ZjM4LWRhMjMzZThhZTBhMyJ9.LqKi3Rf5bslKnwnlwqZhbPGaBiBGG_JWXSaDtr5gNUs --insecure" dir= execID=ad29b
time="2023-11-03T13:44:07Z" level=debug duration=99.182758ms execID=ad29b
time="2023-11-03T13:44:07Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=97260
time="2023-11-03T13:44:07Z" level=debug duration=2.069169ms execID=97260
time="2023-11-03T13:44:07Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=9435e
time="2023-11-03T13:44:07Z" level=debug duration=1.69027ms execID=9435e
time="2023-11-03T13:44:07Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=7efac
time="2023-11-03T13:44:07Z" level=debug duration=1.973224ms execID=7efac
time="2023-11-03T13:44:07Z" level=info msg="pkill -9 gpg-agent" dir= execID=b0f59
time="2023-11-03T13:44:07Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=c3447
time="2023-11-03T13:44:07Z" level=debug duration=38.189454ms execID=c3447
time="2023-11-03T13:44:07Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=f7b14
time="2023-11-03T13:44:07Z" level=debug duration=37.076732ms execID=f7b14
time="2023-11-03T13:44:07Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=26076
time="2023-11-03T13:44:07Z" level=debug duration=2.234397ms execID=26076
time="2023-11-03T13:44:07Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=7f515
time="2023-11-03T13:44:07Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.297738ms execID=7f515
time="2023-11-03T13:44:07Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=273a4
time="2023-11-03T13:44:07Z" level=debug duration=28.169053ms execID=273a4
time="2023-11-03T13:44:07Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=abaee
time="2023-11-03T13:44:07Z" level=debug duration=33.147275ms execID=abaee
time="2023-11-03T13:44:07Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=f173b
time="2023-11-03T13:44:07Z" level=debug duration=2.877687ms execID=f173b
time="2023-11-03T13:44:07Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=cee96
Handling connection for 9081
time="2023-11-03T13:44:08Z" level=debug duration=64.403069ms execID=cee96
time="2023-11-03T13:44:08Z" level=info msg="kubectl create ns argocd-e2e--test-helm-set-string-env-gfyse" dir= execID=202ca
time="2023-11-03T13:44:08Z" level=debug msg="namespace/argocd-e2e--test-helm-set-string-env-gfyse created\n" duration=146.734943ms execID=202ca
time="2023-11-03T13:44:08Z" level=info msg="kubectl label ns argocd-e2e--test-helm-set-string-env-gfyse e2e.argoproj.io=true" dir= execID=0fd61
time="2023-11-03T13:44:08Z" level=debug msg="namespace/argocd-e2e--test-helm-set-string-env-gfyse labeled\n" duration=304.208268ms execID=0fd61
time="2023-11-03T13:44:08Z" level=info msg="clean state" duration=2.831470123s id=TestHelmSetStringEnv-gfyse name=TestHelmSetStringEnv password=password username=admin
time="2023-11-03T13:44:09Z" level=info msg="../../dist/argocd app create test-helm-set-string-env --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path helm-values --project default --dest-namespace argocd-e2e--test-helm-set-string-env-gfyse --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTQ0NywibmJmIjoxNjk5MDE5MDQ3LCJpYXQiOjE2OTkwMTkwNDcsImp0aSI6IjVkNTRmY2I0LWRmOTAtNDk5Mi04ZjM4LWRhMjMzZThhZTBhMyJ9.LqKi3Rf5bslKnwnlwqZhbPGaBiBGG_JWXSaDtr5gNUs --insecure" dir= execID=5070f
time="2023-11-03T13:44:10Z" level=debug msg="application 'test-helm-set-string-env' created\n" duration=573.344787ms execID=5070f
time="2023-11-03T13:44:10Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:44:10Z" level=info msg="../../dist/argocd app set test-helm-set-string-env --helm-set-string foo=$ARGOCD_APP_NAME --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTQ0NywibmJmIjoxNjk5MDE5MDQ3LCJpYXQiOjE2OTkwMTkwNDcsImp0aSI6IjVkNTRmY2I0LWRmOTAtNDk5Mi04ZjM4LWRhMjMzZThhZTBhMyJ9.LqKi3Rf5bslKnwnlwqZhbPGaBiBGG_JWXSaDtr5gNUs --insecure" dir= execID=0821f
time="2023-11-03T13:44:11Z" level=debug duration=1.17271506s execID=0821f
time="2023-11-03T13:44:11Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:44:11Z" level=info msg="../../dist/argocd app sync test-helm-set-string-env --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTQ0NywibmJmIjoxNjk5MDE5MDQ3LCJpYXQiOjE2OTkwMTkwNDcsImp0aSI6IjVkNTRmY2I0LWRmOTAtNDk5Mi04ZjM4LWRhMjMzZThhZTBhMyJ9.LqKi3Rf5bslKnwnlwqZhbPGaBiBGG_JWXSaDtr5gNUs --insecure" dir= execID=6f2f8
time="2023-11-03T13:44:12Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                  NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:44:11+00:00          ConfigMap  argocd-e2e--test-helm-set-string-env-gfyse                my-map  OutOfSync  Missing              \n\nName:               argocd-e2e/test-helm-set-string-env\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-helm-set-string-env-gfyse\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-helm-set-string-env\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               helm-values\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (a65286b)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      a65286b4b9a9cd508a9e8f64498ce3d25eb126a4\nPhase:              Succeeded\nStart:              2023-11-03 13:44:11 +0000 UTC\nFinished:           2023-11-03 13:44:11 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                   NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-helm-set-string-env-gfyse  my-map  Synced                configmap/my-map created\n" duration=820.12708ms execID=6f2f8
time="2023-11-03T13:44:12Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:44:12Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:44:12Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:44:12Z" level=info msg="kubectl -n argocd-e2e--test-helm-set-string-env-gfyse get cm my-map -o jsonpath={.data.foo}" dir=. execID=667fc
time="2023-11-03T13:44:12Z" level=debug msg=test-helm-set-string-env duration=205.991107ms execID=667fc
time="2023-11-03T13:44:12Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestHelmSetStringEnv (6.62s)
=== RUN   TestKubeVersion
time="2023-11-03T13:44:12Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=34146
time="2023-11-03T13:44:12Z" level=debug msg="namespace \"argocd-e2e--test-helm-set-string-env-gfyse\" deleted\n" duration=252.479425ms execID=34146
time="2023-11-03T13:44:12Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=06e28
time="2023-11-03T13:44:12Z" level=debug msg="No resources found\n" duration=351.041107ms execID=06e28
time="2023-11-03T13:44:12Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=352fc
time="2023-11-03T13:44:13Z" level=debug msg="No resources found\n" duration=227.774725ms execID=352fc
time="2023-11-03T13:44:13Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:44:13Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTQ1MywibmJmIjoxNjk5MDE5MDUzLCJpYXQiOjE2OTkwMTkwNTMsImp0aSI6IjBlZWExNDFlLTkyMzEtNDgwZS1iNmRkLTlmZWE4MjAxYzc5NCJ9.ImE-9Ei0r-Wy6oK4UeZbHp-rI0sgVhGKfaZnAU4Rsas --insecure" dir= execID=88f85
time="2023-11-03T13:44:13Z" level=debug duration=110.014804ms execID=88f85
time="2023-11-03T13:44:13Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=7e587
time="2023-11-03T13:44:13Z" level=debug duration=2.15063ms execID=7e587
time="2023-11-03T13:44:13Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=f42c9
time="2023-11-03T13:44:13Z" level=debug duration=1.625349ms execID=f42c9
time="2023-11-03T13:44:13Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=df159
time="2023-11-03T13:44:13Z" level=debug duration=1.879653ms execID=df159
time="2023-11-03T13:44:13Z" level=info msg="pkill -9 gpg-agent" dir= execID=1f451
time="2023-11-03T13:44:13Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=a1db9
time="2023-11-03T13:44:13Z" level=debug duration=9.876282ms execID=a1db9
time="2023-11-03T13:44:13Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=83819
time="2023-11-03T13:44:13Z" level=debug duration=35.174041ms execID=83819
time="2023-11-03T13:44:13Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=fc953
time="2023-11-03T13:44:13Z" level=debug duration=1.790433ms execID=fc953
time="2023-11-03T13:44:13Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=ea1d4
time="2023-11-03T13:44:13Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.99196ms execID=ea1d4
time="2023-11-03T13:44:13Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=9d981
time="2023-11-03T13:44:13Z" level=debug duration=36.358708ms execID=9d981
time="2023-11-03T13:44:13Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=7685a
time="2023-11-03T13:44:13Z" level=debug duration=22.732046ms execID=7685a
time="2023-11-03T13:44:13Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=10080
time="2023-11-03T13:44:13Z" level=debug duration=2.177658ms execID=10080
time="2023-11-03T13:44:13Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=f71af
Handling connection for 9081
time="2023-11-03T13:44:14Z" level=debug duration=77.725556ms execID=f71af
time="2023-11-03T13:44:14Z" level=info msg="kubectl create ns argocd-e2e--test-kube-version-jzueq" dir= execID=58019
time="2023-11-03T13:44:14Z" level=debug msg="namespace/argocd-e2e--test-kube-version-jzueq created\n" duration=166.708845ms execID=58019
time="2023-11-03T13:44:14Z" level=info msg="kubectl label ns argocd-e2e--test-kube-version-jzueq e2e.argoproj.io=true" dir= execID=d5765
time="2023-11-03T13:44:14Z" level=debug msg="namespace/argocd-e2e--test-kube-version-jzueq labeled\n" duration=338.348464ms execID=d5765
time="2023-11-03T13:44:14Z" level=info msg="clean state" duration=2.314995269s id=TestKubeVersion-jzueq name=TestKubeVersion password=password username=admin
time="2023-11-03T13:44:15Z" level=info msg="../../dist/argocd app create test-kube-version --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path helm-kube-version --project default --dest-namespace argocd-e2e--test-kube-version-jzueq --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTQ1MywibmJmIjoxNjk5MDE5MDUzLCJpYXQiOjE2OTkwMTkwNTMsImp0aSI6IjBlZWExNDFlLTkyMzEtNDgwZS1iNmRkLTlmZWE4MjAxYzc5NCJ9.ImE-9Ei0r-Wy6oK4UeZbHp-rI0sgVhGKfaZnAU4Rsas --insecure" dir= execID=7cfa5
time="2023-11-03T13:44:15Z" level=debug msg="application 'test-kube-version' created\n" duration=366.573139ms execID=7cfa5
time="2023-11-03T13:44:15Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:44:15Z" level=info msg="../../dist/argocd app sync test-kube-version --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTQ1MywibmJmIjoxNjk5MDE5MDUzLCJpYXQiOjE2OTkwMTkwNTMsImp0aSI6IjBlZWExNDFlLTkyMzEtNDgwZS1iNmRkLTlmZWE4MjAxYzc5NCJ9.ImE-9Ei0r-Wy6oK4UeZbHp-rI0sgVhGKfaZnAU4Rsas --insecure" dir= execID=9d015
time="2023-11-03T13:44:16Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                           NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:44:16+00:00          ConfigMap  argocd-e2e--test-kube-version-jzueq                my-map  OutOfSync  Missing              \n2023-11-03T13:44:16+00:00          ConfigMap  argocd-e2e--test-kube-version-jzueq                my-map  OutOfSync  Missing              configmap/my-map created\n2023-11-03T13:44:16+00:00          ConfigMap  argocd-e2e--test-kube-version-jzueq                my-map    Synced  Missing              configmap/my-map created\n\nName:               argocd-e2e/test-kube-version\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-kube-version-jzueq\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-kube-version\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               helm-kube-version\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (f451195)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      f45119564d60a9f10a15a800d464f14302d1b98d\nPhase:              Succeeded\nStart:              2023-11-03 13:44:16 +0000 UTC\nFinished:           2023-11-03 13:44:16 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                            NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-kube-version-jzueq  my-map  Synced                configmap/my-map created\n" duration=815.158161ms execID=9d015
time="2023-11-03T13:44:16Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:44:16Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:44:16Z" level=info msg="kubectl -n argocd-e2e--test-kube-version-jzueq get cm my-map -o jsonpath={.data.kubeVersion}" dir=. execID=4bece
time="2023-11-03T13:44:16Z" level=debug msg=v1.26.0 duration=183.371881ms execID=4bece
time="2023-11-03T13:44:16Z" level=info msg="kubectl version -o json" dir=. execID=18c66
time="2023-11-03T13:44:17Z" level=debug msg="{\n  \"clientVersion\": {\n    \"major\": \"1\",\n    \"minor\": \"26\",\n    \"gitVersion\": \"v1.26.1\",\n    \"gitCommit\": \"05d83eff7e17160e679898a2a5cd6019ec252c49\",\n    \"gitTreeState\": \"clean\",\n    \"buildDate\": \"2023-06-07T15:39:28Z\",\n    \"goVersion\": \"go1.19.9\",\n    \"compiler\": \"gc\",\n    \"platform\": \"linux/amd64\"\n  },\n  \"kustomizeVersion\": \"v4.5.7\",\n  \"serverVersion\": {\n    \"major\": \"1\",\n    \"minor\": \"26\",\n    \"gitVersion\": \"v1.26.7+c7ee51f\",\n    \"gitCommit\": \"f10a517f7199bdae922a70893d85eb96a76f5c2d\",\n    \"gitTreeState\": \"clean\",\n    \"buildDate\": \"2023-09-11T02:22:18Z\",\n    \"goVersion\": \"go1.19.10 X:strictfipsruntime\",\n    \"compiler\": \"gc\",\n    \"platform\": \"linux/amd64\"\n  }\n}\n" duration=207.397148ms execID=18c66
time="2023-11-03T13:44:17Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestKubeVersion (4.91s)
=== RUN   TestHelmValuesHiddenDirectory
time="2023-11-03T13:44:17Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=096cf
time="2023-11-03T13:44:17Z" level=debug msg="namespace \"argocd-e2e--test-kube-version-jzueq\" deleted\n" duration=250.676438ms execID=096cf
time="2023-11-03T13:44:17Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=13b82
time="2023-11-03T13:44:18Z" level=debug msg="No resources found\n" duration=780.934137ms execID=13b82
time="2023-11-03T13:44:18Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=6b848
time="2023-11-03T13:44:18Z" level=debug msg="No resources found\n" duration=315.389651ms execID=6b848
time="2023-11-03T13:44:19Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:44:19Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTQ1OSwibmJmIjoxNjk5MDE5MDU5LCJpYXQiOjE2OTkwMTkwNTksImp0aSI6ImZkZGNjM2Y1LTIzNjItNGI5MC04YTc1LWZlMzdiNjY5NWE5MSJ9.Sk5tb5HEPervvN-HoVyjhbKtRPGcBy63C0GIYuncsTA --insecure" dir= execID=ed7e0
time="2023-11-03T13:44:19Z" level=debug duration=125.578144ms execID=ed7e0
time="2023-11-03T13:44:19Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=5d5e0
time="2023-11-03T13:44:19Z" level=debug duration=2.207699ms execID=5d5e0
time="2023-11-03T13:44:19Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=dd12e
time="2023-11-03T13:44:19Z" level=debug duration=1.876113ms execID=dd12e
time="2023-11-03T13:44:19Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=99062
time="2023-11-03T13:44:19Z" level=debug duration=1.792301ms execID=99062
time="2023-11-03T13:44:19Z" level=info msg="pkill -9 gpg-agent" dir= execID=a8c53
time="2023-11-03T13:44:19Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=09eb3
time="2023-11-03T13:44:19Z" level=debug duration=10.771563ms execID=09eb3
time="2023-11-03T13:44:19Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=87987
time="2023-11-03T13:44:19Z" level=debug duration=34.912834ms execID=87987
time="2023-11-03T13:44:19Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=34a41
time="2023-11-03T13:44:19Z" level=debug duration=1.856858ms execID=34a41
time="2023-11-03T13:44:19Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=ef791
time="2023-11-03T13:44:19Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.580214ms execID=ef791
time="2023-11-03T13:44:19Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=c6d51
time="2023-11-03T13:44:19Z" level=debug duration=51.75032ms execID=c6d51
time="2023-11-03T13:44:19Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=cb169
time="2023-11-03T13:44:19Z" level=debug duration=23.836949ms execID=cb169
time="2023-11-03T13:44:19Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=5befc
time="2023-11-03T13:44:19Z" level=debug duration=2.82116ms execID=5befc
time="2023-11-03T13:44:19Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=f20f6
Handling connection for 9081
time="2023-11-03T13:44:19Z" level=debug duration=81.111489ms execID=f20f6
time="2023-11-03T13:44:19Z" level=info msg="kubectl create ns argocd-e2e--test-helm-values-hidden-directory-oveny" dir= execID=0602f
time="2023-11-03T13:44:19Z" level=debug msg="namespace/argocd-e2e--test-helm-values-hidden-directory-oveny created\n" duration=131.123325ms execID=0602f
time="2023-11-03T13:44:19Z" level=info msg="kubectl label ns argocd-e2e--test-helm-values-hidden-directory-oveny e2e.argoproj.io=true" dir= execID=1b062
time="2023-11-03T13:44:20Z" level=debug msg="namespace/argocd-e2e--test-helm-values-hidden-directory-oveny labeled\n" duration=343.452458ms execID=1b062
time="2023-11-03T13:44:20Z" level=info msg="clean state" duration=3.068080771s id=TestHelmValuesHiddenDirectory-oveny name=TestHelmValuesHiddenDirectory password=password username=admin
time="2023-11-03T13:44:21Z" level=info msg=adding path=.hidden-helm/foo.yaml
time="2023-11-03T13:44:21Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=ba831
time="2023-11-03T13:44:21Z" level=debug duration=6.094311ms execID=ba831
time="2023-11-03T13:44:21Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=447b5
time="2023-11-03T13:44:21Z" level=debug duration=9.10474ms execID=447b5
time="2023-11-03T13:44:21Z" level=info msg="git commit -am add file" dir=/tmp/argo-e2e/testdata.git execID=e8056
time="2023-11-03T13:44:21Z" level=debug msg="[master f16dc46] add file\n 1 file changed, 0 insertions(+), 0 deletions(-)\n create mode 100644 .hidden-helm/foo.yaml\n" duration=10.256225ms execID=e8056
time="2023-11-03T13:44:21Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=19e9c
Handling connection for 9081
time="2023-11-03T13:44:21Z" level=debug duration=36.506375ms execID=19e9c
time="2023-11-03T13:44:21Z" level=info msg="../../dist/argocd app create test-helm-values-hidden-directory --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path .hidden-helm --project default --dest-namespace argocd-e2e--test-helm-values-hidden-directory-oveny --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTQ1OSwibmJmIjoxNjk5MDE5MDU5LCJpYXQiOjE2OTkwMTkwNTksImp0aSI6ImZkZGNjM2Y1LTIzNjItNGI5MC04YTc1LWZlMzdiNjY5NWE5MSJ9.Sk5tb5HEPervvN-HoVyjhbKtRPGcBy63C0GIYuncsTA --insecure" dir= execID=7d83b
time="2023-11-03T13:44:21Z" level=debug msg="application 'test-helm-values-hidden-directory' created\n" duration=286.973264ms execID=7d83b
time="2023-11-03T13:44:21Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:44:21Z" level=info msg="../../dist/argocd app set test-helm-values-hidden-directory --values foo.yaml --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTQ1OSwibmJmIjoxNjk5MDE5MDU5LCJpYXQiOjE2OTkwMTkwNTksImp0aSI6ImZkZGNjM2Y1LTIzNjItNGI5MC04YTc1LWZlMzdiNjY5NWE5MSJ9.Sk5tb5HEPervvN-HoVyjhbKtRPGcBy63C0GIYuncsTA --insecure" dir= execID=012d6
time="2023-11-03T13:44:21Z" level=debug duration=239.505604ms execID=012d6
time="2023-11-03T13:44:21Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:44:21Z" level=info msg="../../dist/argocd app sync test-helm-values-hidden-directory --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTQ1OSwibmJmIjoxNjk5MDE5MDU5LCJpYXQiOjE2OTkwMTkwNTksImp0aSI6ImZkZGNjM2Y1LTIzNjItNGI5MC04YTc1LWZlMzdiNjY5NWE5MSJ9.Sk5tb5HEPervvN-HoVyjhbKtRPGcBy63C0GIYuncsTA --insecure" dir= execID=b1ce8
time="2023-11-03T13:44:22Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                           NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:44:21+00:00          ConfigMap  argocd-e2e--test-helm-values-hidden-directory-oveny                my-map  OutOfSync  Missing              \n2023-11-03T13:44:22+00:00          ConfigMap  argocd-e2e--test-helm-values-hidden-directory-oveny                my-map  OutOfSync  Missing              configmap/my-map created\n2023-11-03T13:44:22+00:00          ConfigMap  argocd-e2e--test-helm-values-hidden-directory-oveny                my-map    Synced  Missing              configmap/my-map created\n\nName:               argocd-e2e/test-helm-values-hidden-directory\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-helm-values-hidden-directory-oveny\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-helm-values-hidden-directory\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               .hidden-helm\nHelm Values:        foo.yaml\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (f16dc46)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      f16dc46f7dd4f75e16d0ac54ae1ec070c9148b21\nPhase:              Succeeded\nStart:              2023-11-03 13:44:21 +0000 UTC\nFinished:           2023-11-03 13:44:22 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                            NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-helm-values-hidden-directory-oveny  my-map  Synced                configmap/my-map created\n" duration=651.735491ms execID=b1ce8
time="2023-11-03T13:44:22Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:44:22Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:44:22Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:44:22Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:44:22Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestHelmValuesHiddenDirectory (5.33s)
=== RUN   TestHelmWithDependencies
time="2023-11-03T13:44:22Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=0ea1f
time="2023-11-03T13:44:22Z" level=debug msg="namespace \"argocd-e2e--test-helm-values-hidden-directory-oveny\" deleted\n" duration=215.544599ms execID=0ea1f
time="2023-11-03T13:44:22Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=f5929
time="2023-11-03T13:44:23Z" level=debug msg="No resources found\n" duration=482.580399ms execID=f5929
time="2023-11-03T13:44:23Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=286c8
time="2023-11-03T13:44:23Z" level=debug msg="No resources found\n" duration=308.046411ms execID=286c8
time="2023-11-03T13:44:24Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:44:24Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTQ2NCwibmJmIjoxNjk5MDE5MDY0LCJpYXQiOjE2OTkwMTkwNjQsImp0aSI6IjhiOGVhMDA4LWVhMTYtNGJiYi1iNGY3LWEyOGZhZTI0MGVmZiJ9.y2hlgIKWddyEF7ssCXL79CY2xRTne_HrYIZtxjiAetI --insecure" dir= execID=b63aa
time="2023-11-03T13:44:24Z" level=debug duration=128.476274ms execID=b63aa
time="2023-11-03T13:44:24Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=e5c87
time="2023-11-03T13:44:24Z" level=debug duration=2.11884ms execID=e5c87
time="2023-11-03T13:44:24Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=09b03
time="2023-11-03T13:44:24Z" level=debug duration=2.028361ms execID=09b03
time="2023-11-03T13:44:24Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=66a17
time="2023-11-03T13:44:24Z" level=debug duration=2.055325ms execID=66a17
time="2023-11-03T13:44:24Z" level=info msg="pkill -9 gpg-agent" dir= execID=dba07
time="2023-11-03T13:44:24Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=036ef
time="2023-11-03T13:44:24Z" level=debug duration=10.615674ms execID=036ef
time="2023-11-03T13:44:24Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=7364e
time="2023-11-03T13:44:24Z" level=debug duration=113.128392ms execID=7364e
time="2023-11-03T13:44:24Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=00e5a
time="2023-11-03T13:44:24Z" level=debug duration=1.8844ms execID=00e5a
time="2023-11-03T13:44:24Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=a85e9
time="2023-11-03T13:44:24Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.384287ms execID=a85e9
time="2023-11-03T13:44:24Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=bf804
time="2023-11-03T13:44:24Z" level=debug duration=27.112181ms execID=bf804
time="2023-11-03T13:44:24Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=eb275
time="2023-11-03T13:44:25Z" level=debug duration=24.209637ms execID=eb275
time="2023-11-03T13:44:25Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=f51de
time="2023-11-03T13:44:25Z" level=debug duration=8.932929ms execID=f51de
time="2023-11-03T13:44:25Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=4907d
Handling connection for 9081
time="2023-11-03T13:44:25Z" level=debug duration=63.215538ms execID=4907d
time="2023-11-03T13:44:25Z" level=info msg="kubectl create ns argocd-e2e--test-helm-with-dependencies-uzcsx" dir= execID=eb2bf
time="2023-11-03T13:44:25Z" level=debug msg="namespace/argocd-e2e--test-helm-with-dependencies-uzcsx created\n" duration=257.72352ms execID=eb2bf
time="2023-11-03T13:44:25Z" level=info msg="kubectl label ns argocd-e2e--test-helm-with-dependencies-uzcsx e2e.argoproj.io=true" dir= execID=ee539
time="2023-11-03T13:44:25Z" level=debug msg="namespace/argocd-e2e--test-helm-with-dependencies-uzcsx labeled\n" duration=307.311457ms execID=ee539
time="2023-11-03T13:44:25Z" level=info msg="clean state" duration=3.17089549s id=TestHelmWithDependencies-uzcsx name=TestHelmWithDependencies password=password username=admin
time="2023-11-03T13:44:25Z" level=info msg="../../dist/argocd cert add-tls argocd-e2e-server --from /argocd-e2e/argo-cd/test/fixture/certs/argocd-test-ca.crt --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTQ2NCwibmJmIjoxNjk5MDE5MDY0LCJpYXQiOjE2OTkwMTkwNjQsImp0aSI6IjhiOGVhMDA4LWVhMTYtNGJiYi1iNGY3LWEyOGZhZTI0MGVmZiJ9.y2hlgIKWddyEF7ssCXL79CY2xRTne_HrYIZtxjiAetI --insecure" dir= execID=c1dfd
time="2023-11-03T13:44:25Z" level=debug msg="Reading TLS certificate data in PEM format from '/argocd-e2e/argo-cd/test/fixture/certs/argocd-test-ca.crt'\nCreated entry with 0 PEM certificates for repository server argocd-e2e-server\n" duration=112.705975ms execID=c1dfd
time="2023-11-03T13:44:25Z" level=info msg="Waiting for API server to restart"
time="2023-11-03T13:44:25Z" level=info msg="kubectl rollout restart deployment argocd-test-server" dir= execID=6d71e
time="2023-11-03T13:44:26Z" level=debug msg="deployment.apps/argocd-test-server restarted\n" duration=358.094462ms execID=6d71e
time="2023-11-03T13:44:26Z" level=info msg="kubectl rollout status deployment argocd-test-server" dir= execID=5b20d
time="2023-11-03T13:44:56Z" level=debug msg="Waiting for deployment \"argocd-test-server\" rollout to finish: 1 old replicas are pending termination...\nWaiting for deployment \"argocd-test-server\" rollout to finish: 1 old replicas are pending termination...\ndeployment \"argocd-test-server\" successfully rolled out\n" duration=30.470202643s execID=5b20d
time="2023-11-03T13:44:56Z" level=info msg="Waiting for repo server to restart"
time="2023-11-03T13:44:56Z" level=info msg="kubectl rollout restart deployment argocd-test-repo-server" dir= execID=ae085
time="2023-11-03T13:44:56Z" level=debug msg="deployment.apps/argocd-test-repo-server restarted\n" duration=249.537107ms execID=ae085
time="2023-11-03T13:44:56Z" level=info msg="kubectl rollout status deployment argocd-test-repo-server" dir= execID=7394d
time="2023-11-03T13:45:07Z" level=debug msg="Waiting for deployment \"argocd-test-repo-server\" rollout to finish: 1 old replicas are pending termination...\nWaiting for deployment \"argocd-test-repo-server\" rollout to finish: 1 old replicas are pending termination...\ndeployment \"argocd-test-repo-server\" successfully rolled out\n" duration=10.459231924s execID=7394d
time="2023-11-03T13:45:17Z" level=info msg="../../dist/argocd repo add https://argocd-e2e-server:9444/helm-repo --username admin --password password --tls-client-cert-path /argocd-e2e/argo-cd/test/fixture/certs/argocd-test-client.crt --tls-client-cert-key-path /argocd-e2e/argo-cd/test/fixture/certs/argocd-test-client.key --type helm --name custom-repo --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTQ2NCwibmJmIjoxNjk5MDE5MDY0LCJpYXQiOjE2OTkwMTkwNjQsImp0aSI6IjhiOGVhMDA4LWVhMTYtNGJiYi1iNGY3LWEyOGZhZTI0MGVmZiJ9.y2hlgIKWddyEF7ssCXL79CY2xRTne_HrYIZtxjiAetI --insecure" dir= execID=b5643
time="2023-11-03T13:45:17Z" level=debug msg="Repository 'https://argocd-e2e-server:9444/helm-repo' added\n" duration=219.626314ms execID=b5643
time="2023-11-03T13:45:18Z" level=info msg="../../dist/argocd app create test-helm-with-dependencies --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --helm-version  --dest-server https://kubernetes.default.svc --path helm-with-dependencies --project default --helm-pass-credentials --dest-namespace argocd-e2e--test-helm-with-dependencies-uzcsx --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTQ2NCwibmJmIjoxNjk5MDE5MDY0LCJpYXQiOjE2OTkwMTkwNjQsImp0aSI6IjhiOGVhMDA4LWVhMTYtNGJiYi1iNGY3LWEyOGZhZTI0MGVmZiJ9.y2hlgIKWddyEF7ssCXL79CY2xRTne_HrYIZtxjiAetI --insecure" dir= execID=afd4c
time="2023-11-03T13:45:18Z" level=debug msg="application 'test-helm-with-dependencies' created\n" duration=384.761559ms execID=afd4c
time="2023-11-03T13:45:18Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:45:18Z" level=info msg="../../dist/argocd app sync test-helm-with-dependencies --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTQ2NCwibmJmIjoxNjk5MDE5MDY0LCJpYXQiOjE2OTkwMTkwNjQsImp0aSI6IjhiOGVhMDA4LWVhMTYtNGJiYi1iNGY3LWEyOGZhZTI0MGVmZiJ9.y2hlgIKWddyEF7ssCXL79CY2xRTne_HrYIZtxjiAetI --insecure" dir= execID=5740f
time="2023-11-03T13:45:19Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:45:19+00:00          ConfigMap  argocd-e2e--test-helm-with-dependencies-uzcsx                my-map  OutOfSync  Missing              \n\nName:               argocd-e2e/test-helm-with-dependencies\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-helm-with-dependencies-uzcsx\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-helm-with-dependencies\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               helm-with-dependencies\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (4e11d54)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      4e11d541476ccf95d69b4d5527b55a1cbab9e51b\nPhase:              Succeeded\nStart:              2023-11-03 13:45:19 +0000 UTC\nFinished:           2023-11-03 13:45:19 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                      NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-helm-with-dependencies-uzcsx  my-map  Synced                configmap/my-map created\n" duration=788.491907ms execID=5740f
time="2023-11-03T13:45:19Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:45:19Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:45:19Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestHelmWithDependencies (57.23s)
=== RUN   TestHelmWithMultipleDependencies
time="2023-11-03T13:45:19Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=1acd9
time="2023-11-03T13:45:20Z" level=debug msg="namespace \"argocd-e2e--test-helm-with-dependencies-uzcsx\" deleted\n" duration=286.815314ms execID=1acd9
time="2023-11-03T13:45:20Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=24c11
time="2023-11-03T13:45:20Z" level=debug msg="No resources found\n" duration=465.120433ms execID=24c11
time="2023-11-03T13:45:20Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=bf9e3
time="2023-11-03T13:45:20Z" level=debug msg="No resources found\n" duration=342.656233ms execID=bf9e3
time="2023-11-03T13:45:21Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:45:21Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTUyMSwibmJmIjoxNjk5MDE5MTIxLCJpYXQiOjE2OTkwMTkxMjEsImp0aSI6IjFlMTJkM2I3LWVjMDMtNGYzNi1iOTlhLWE4ODgyZjU5OTBiMyJ9.VEo7v396UoijdxZ0Edq7WCH3qK0XmrTqsAJlapOZEHs --insecure" dir= execID=17d69
time="2023-11-03T13:45:21Z" level=debug duration=128.261816ms execID=17d69
time="2023-11-03T13:45:21Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=da874
time="2023-11-03T13:45:21Z" level=debug duration=3.038309ms execID=da874
time="2023-11-03T13:45:21Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=4496d
time="2023-11-03T13:45:21Z" level=debug duration=1.664202ms execID=4496d
time="2023-11-03T13:45:21Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=716db
time="2023-11-03T13:45:21Z" level=debug duration=1.43724ms execID=716db
time="2023-11-03T13:45:21Z" level=info msg="pkill -9 gpg-agent" dir= execID=53437
time="2023-11-03T13:45:21Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=157f2
time="2023-11-03T13:45:21Z" level=debug duration=10.954449ms execID=157f2
time="2023-11-03T13:45:21Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=136b5
time="2023-11-03T13:45:21Z" level=debug duration=34.645181ms execID=136b5
time="2023-11-03T13:45:21Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=abff1
time="2023-11-03T13:45:21Z" level=debug duration=1.665733ms execID=abff1
time="2023-11-03T13:45:21Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=8938c
time="2023-11-03T13:45:21Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.824807ms execID=8938c
time="2023-11-03T13:45:21Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=eb22f
time="2023-11-03T13:45:21Z" level=debug duration=25.245712ms execID=eb22f
time="2023-11-03T13:45:21Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=9bee9
time="2023-11-03T13:45:21Z" level=debug duration=32.349542ms execID=9bee9
time="2023-11-03T13:45:21Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=77a63
time="2023-11-03T13:45:21Z" level=debug duration=2.732307ms execID=77a63
time="2023-11-03T13:45:21Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=8e686
Handling connection for 9081
time="2023-11-03T13:45:21Z" level=debug duration=65.345639ms execID=8e686
time="2023-11-03T13:45:21Z" level=info msg="kubectl create ns argocd-e2e--test-helm-with-multiple-dependencies-cquml" dir= execID=ec782
time="2023-11-03T13:45:22Z" level=debug msg="namespace/argocd-e2e--test-helm-with-multiple-dependencies-cquml created\n" duration=155.117353ms execID=ec782
time="2023-11-03T13:45:22Z" level=info msg="kubectl label ns argocd-e2e--test-helm-with-multiple-dependencies-cquml e2e.argoproj.io=true" dir= execID=84bc1
time="2023-11-03T13:45:22Z" level=debug msg="namespace/argocd-e2e--test-helm-with-multiple-dependencies-cquml labeled\n" duration=261.226593ms execID=84bc1
time="2023-11-03T13:45:22Z" level=info msg="clean state" duration=2.617479275s id=TestHelmWithMultipleDependencies-cquml name=TestHelmWithMultipleDependencies password=password username=admin
time="2023-11-03T13:45:22Z" level=info msg="../../dist/argocd cert add-tls argocd-e2e-server --from /argocd-e2e/argo-cd/test/fixture/certs/argocd-test-ca.crt --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTUyMSwibmJmIjoxNjk5MDE5MTIxLCJpYXQiOjE2OTkwMTkxMjEsImp0aSI6IjFlMTJkM2I3LWVjMDMtNGYzNi1iOTlhLWE4ODgyZjU5OTBiMyJ9.VEo7v396UoijdxZ0Edq7WCH3qK0XmrTqsAJlapOZEHs --insecure" dir= execID=fbb97
time="2023-11-03T13:45:22Z" level=debug msg="Reading TLS certificate data in PEM format from '/argocd-e2e/argo-cd/test/fixture/certs/argocd-test-ca.crt'\nCreated entry with 0 PEM certificates for repository server argocd-e2e-server\n" duration=110.680019ms execID=fbb97
time="2023-11-03T13:45:22Z" level=info msg="Waiting for API server to restart"
time="2023-11-03T13:45:22Z" level=info msg="kubectl rollout restart deployment argocd-test-server" dir= execID=c8eb2
time="2023-11-03T13:45:22Z" level=debug msg="deployment.apps/argocd-test-server restarted\n" duration=288.628954ms execID=c8eb2
time="2023-11-03T13:45:22Z" level=info msg="kubectl rollout status deployment argocd-test-server" dir= execID=d5169
time="2023-11-03T13:45:53Z" level=debug msg="Waiting for deployment \"argocd-test-server\" rollout to finish: 1 old replicas are pending termination...\nWaiting for deployment \"argocd-test-server\" rollout to finish: 1 old replicas are pending termination...\ndeployment \"argocd-test-server\" successfully rolled out\n" duration=30.387535499s execID=d5169
time="2023-11-03T13:45:53Z" level=info msg="Waiting for repo server to restart"
time="2023-11-03T13:45:53Z" level=info msg="kubectl rollout restart deployment argocd-test-repo-server" dir= execID=ab6b7
time="2023-11-03T13:45:53Z" level=debug msg="deployment.apps/argocd-test-repo-server restarted\n" duration=227.180594ms execID=ab6b7
time="2023-11-03T13:45:53Z" level=info msg="kubectl rollout status deployment argocd-test-repo-server" dir= execID=cc45e
time="2023-11-03T13:46:03Z" level=debug msg="Waiting for deployment \"argocd-test-repo-server\" rollout to finish: 1 old replicas are pending termination...\nWaiting for deployment \"argocd-test-repo-server\" rollout to finish: 1 old replicas are pending termination...\ndeployment \"argocd-test-repo-server\" successfully rolled out\n" duration=10.489784053s execID=cc45e
time="2023-11-03T13:46:13Z" level=info msg="../../dist/argocd repocreds add https://argocd-e2e-server:9444/helm-repo --username admin --password password --tls-client-cert-path /argocd-e2e/argo-cd/test/fixture/certs/argocd-test-client.crt --tls-client-cert-key-path /argocd-e2e/argo-cd/test/fixture/certs/argocd-test-client.key --type helm --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTUyMSwibmJmIjoxNjk5MDE5MTIxLCJpYXQiOjE2OTkwMTkxMjEsImp0aSI6IjFlMTJkM2I3LWVjMDMtNGYzNi1iOTlhLWE4ODgyZjU5OTBiMyJ9.VEo7v396UoijdxZ0Edq7WCH3qK0XmrTqsAJlapOZEHs --insecure" dir= execID=e99ba
time="2023-11-03T13:46:14Z" level=debug msg="Repository credentials for 'https://argocd-e2e-server:9444/helm-repo' added\n" duration=195.659045ms execID=e99ba
time="2023-11-03T13:46:15Z" level=info msg="../../dist/argocd app create test-helm-with-multiple-dependencies --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path helm-with-multiple-dependencies --project default --helm-pass-credentials --dest-namespace argocd-e2e--test-helm-with-multiple-dependencies-cquml --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTUyMSwibmJmIjoxNjk5MDE5MTIxLCJpYXQiOjE2OTkwMTkxMjEsImp0aSI6IjFlMTJkM2I3LWVjMDMtNGYzNi1iOTlhLWE4ODgyZjU5OTBiMyJ9.VEo7v396UoijdxZ0Edq7WCH3qK0XmrTqsAJlapOZEHs --insecure" dir= execID=7c8e8
time="2023-11-03T13:46:15Z" level=debug duration=407.732811ms execID=7c8e8
time="2023-11-03T13:46:15Z" level=error msg="`../../dist/argocd app create test-helm-with-multiple-dependencies --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path helm-with-multiple-dependencies --project default --helm-pass-credentials --dest-namespace argocd-e2e--test-helm-with-multiple-dependencies-cquml --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTUyMSwibmJmIjoxNjk5MDE5MTIxLCJpYXQiOjE2OTkwMTkxMjEsImp0aSI6IjFlMTJkM2I3LWVjMDMtNGYzNi1iOTlhLWE4ODgyZjU5OTBiMyJ9.VEo7v396UoijdxZ0Edq7WCH3qK0XmrTqsAJlapOZEHs --insecure` failed exit status 20: time=\"2023-11-03T13:46:15Z\" level=fatal msg=\"rpc error: code = InvalidArgument desc = application spec for test-helm-with-multiple-dependencies is invalid: InvalidSpecError: Unable to generate manifests in helm-with-multiple-dependencies: rpc error: code = Unknown desc = `helm repo add --pass-credentials https:--localhost:9444-argo-e2e-testdata.git-helm-repo-local https://localhost:9444/argo-e2e/testdata.git/helm-repo/local` failed exit status 1: Error: looks like \\\"https://localhost:9444/argo-e2e/testdata.git/helm-repo/local\\\" is not a valid chart repository or cannot be reached: Get \\\"https://localhost:9444/argo-e2e/testdata.git/helm-repo/local/index.yaml\\\": dial tcp [::1]:9444: connect: connection refused\"" execID=7c8e8
    actions.go:209: failed expectation: error
--- FAIL: TestHelmWithMultipleDependencies (55.73s)
=== RUN   TestHelmWithDependenciesLegacyRepo
time="2023-11-03T13:46:15Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=e35c8
time="2023-11-03T13:46:15Z" level=debug msg="namespace \"argocd-e2e--test-helm-with-multiple-dependencies-cquml\" deleted\n" duration=232.437734ms execID=e35c8
time="2023-11-03T13:46:15Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=e1fdb
time="2023-11-03T13:46:16Z" level=debug msg="No resources found\n" duration=338.986865ms execID=e1fdb
time="2023-11-03T13:46:16Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=476b4
time="2023-11-03T13:46:16Z" level=debug msg="No resources found\n" duration=230.721334ms execID=476b4
time="2023-11-03T13:46:17Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:46:17Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTU3NywibmJmIjoxNjk5MDE5MTc3LCJpYXQiOjE2OTkwMTkxNzcsImp0aSI6ImVkZDhiNjgxLTdmMDItNDhkYy04MjBiLWU1OWNhODhjMTliNCJ9.Qh7h085rx2ry_wZI8MvdKQk_KBJ2f-8OzjA_9xrKJ38 --insecure" dir= execID=6bc6d
time="2023-11-03T13:46:17Z" level=debug duration=79.306675ms execID=6bc6d
time="2023-11-03T13:46:17Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=8e071
time="2023-11-03T13:46:17Z" level=debug duration=2.10328ms execID=8e071
time="2023-11-03T13:46:17Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=a1b87
time="2023-11-03T13:46:17Z" level=debug duration=1.641703ms execID=a1b87
time="2023-11-03T13:46:17Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=ce6c7
time="2023-11-03T13:46:17Z" level=debug duration=1.569279ms execID=ce6c7
time="2023-11-03T13:46:17Z" level=info msg="pkill -9 gpg-agent" dir= execID=e2c0e
time="2023-11-03T13:46:17Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=04872
time="2023-11-03T13:46:17Z" level=debug duration=9.97308ms execID=04872
time="2023-11-03T13:46:17Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=e20b6
time="2023-11-03T13:46:17Z" level=debug duration=42.82528ms execID=e20b6
time="2023-11-03T13:46:17Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=1c484
time="2023-11-03T13:46:17Z" level=debug duration=2.126346ms execID=1c484
time="2023-11-03T13:46:17Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=c7e23
time="2023-11-03T13:46:17Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.322768ms execID=c7e23
time="2023-11-03T13:46:17Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=29818
time="2023-11-03T13:46:17Z" level=debug duration=28.245482ms execID=29818
time="2023-11-03T13:46:17Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=09c52
time="2023-11-03T13:46:17Z" level=debug duration=22.776237ms execID=09c52
time="2023-11-03T13:46:17Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=93c35
time="2023-11-03T13:46:17Z" level=debug duration=7.696548ms execID=93c35
time="2023-11-03T13:46:17Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=a5e99
Handling connection for 9081
time="2023-11-03T13:46:17Z" level=debug duration=60.949459ms execID=a5e99
time="2023-11-03T13:46:17Z" level=info msg="kubectl create ns argocd-e2e--test-helm-with-dependencies-legacy-repo-vyhgb" dir= execID=66d23
time="2023-11-03T13:46:17Z" level=debug msg="namespace/argocd-e2e--test-helm-with-dependencies-legacy-repo-vyhgb created\n" duration=170.434067ms execID=66d23
time="2023-11-03T13:46:17Z" level=info msg="kubectl label ns argocd-e2e--test-helm-with-dependencies-legacy-repo-vyhgb e2e.argoproj.io=true" dir= execID=71302
time="2023-11-03T13:46:18Z" level=debug msg="namespace/argocd-e2e--test-helm-with-dependencies-legacy-repo-vyhgb labeled\n" duration=366.85943ms execID=71302
time="2023-11-03T13:46:18Z" level=info msg="clean state" duration=2.580382402s id=TestHelmWithDependenciesLegacyRepo-vyhgb name=TestHelmWithDependenciesLegacyRepo password=password username=admin
time="2023-11-03T13:46:18Z" level=info msg="../../dist/argocd cert add-tls argocd-e2e-server --from /argocd-e2e/argo-cd/test/fixture/certs/argocd-test-ca.crt --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTU3NywibmJmIjoxNjk5MDE5MTc3LCJpYXQiOjE2OTkwMTkxNzcsImp0aSI6ImVkZDhiNjgxLTdmMDItNDhkYy04MjBiLWU1OWNhODhjMTliNCJ9.Qh7h085rx2ry_wZI8MvdKQk_KBJ2f-8OzjA_9xrKJ38 --insecure" dir= execID=3f970
time="2023-11-03T13:46:18Z" level=debug msg="Reading TLS certificate data in PEM format from '/argocd-e2e/argo-cd/test/fixture/certs/argocd-test-ca.crt'\nCreated entry with 0 PEM certificates for repository server argocd-e2e-server\n" duration=113.671002ms execID=3f970
time="2023-11-03T13:46:18Z" level=info msg="Waiting for API server to restart"
time="2023-11-03T13:46:18Z" level=info msg="kubectl rollout restart deployment argocd-test-server" dir= execID=1032b
time="2023-11-03T13:46:18Z" level=debug msg="deployment.apps/argocd-test-server restarted\n" duration=323.31074ms execID=1032b
time="2023-11-03T13:46:18Z" level=info msg="kubectl rollout status deployment argocd-test-server" dir= execID=ea006
time="2023-11-03T13:46:48Z" level=debug msg="Waiting for deployment \"argocd-test-server\" rollout to finish: 1 old replicas are pending termination...\nWaiting for deployment \"argocd-test-server\" rollout to finish: 1 old replicas are pending termination...\ndeployment \"argocd-test-server\" successfully rolled out\n" duration=30.452793342s execID=ea006
time="2023-11-03T13:46:48Z" level=info msg="Waiting for repo server to restart"
time="2023-11-03T13:46:48Z" level=info msg="kubectl rollout restart deployment argocd-test-repo-server" dir= execID=f75f9
time="2023-11-03T13:46:49Z" level=debug msg="deployment.apps/argocd-test-repo-server restarted\n" duration=242.139499ms execID=f75f9
time="2023-11-03T13:46:49Z" level=info msg="kubectl rollout status deployment argocd-test-repo-server" dir= execID=27a1c
time="2023-11-03T13:46:59Z" level=debug msg="Waiting for deployment \"argocd-test-repo-server\" rollout to finish: 1 old replicas are pending termination...\nWaiting for deployment \"argocd-test-repo-server\" rollout to finish: 1 old replicas are pending termination...\ndeployment \"argocd-test-repo-server\" successfully rolled out\n" duration=10.431093149s execID=27a1c
time="2023-11-03T13:47:09Z" level=info msg="kubectl create secret generic helm-repo -n argocd-e2e --from-file=certSecret=/argocd-e2e/argo-cd/test/fixture/certs/argocd-test-client.crt --from-file=keySecret=/argocd-e2e/argo-cd/test/fixture/certs/argocd-test-client.key --from-literal=username=admin --from-literal=password=password" dir= execID=9e023
time="2023-11-03T13:47:09Z" level=debug msg="secret/helm-repo created\n" duration=127.661845ms execID=9e023
time="2023-11-03T13:47:10Z" level=info msg="../../dist/argocd app create test-helm-with-dependencies-legacy-repo --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --helm-version  --dest-server https://kubernetes.default.svc --path helm-with-dependencies --project default --helm-pass-credentials --dest-namespace argocd-e2e--test-helm-with-dependencies-legacy-repo-vyhgb --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTU3NywibmJmIjoxNjk5MDE5MTc3LCJpYXQiOjE2OTkwMTkxNzcsImp0aSI6ImVkZDhiNjgxLTdmMDItNDhkYy04MjBiLWU1OWNhODhjMTliNCJ9.Qh7h085rx2ry_wZI8MvdKQk_KBJ2f-8OzjA_9xrKJ38 --insecure" dir= execID=f8fa1
time="2023-11-03T13:47:11Z" level=debug msg="application 'test-helm-with-dependencies-legacy-repo' created\n" duration=397.877633ms execID=f8fa1
time="2023-11-03T13:47:11Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:47:11Z" level=info msg="../../dist/argocd app sync test-helm-with-dependencies-legacy-repo --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTU3NywibmJmIjoxNjk5MDE5MTc3LCJpYXQiOjE2OTkwMTkxNzcsImp0aSI6ImVkZDhiNjgxLTdmMDItNDhkYy04MjBiLWU1OWNhODhjMTliNCJ9.Qh7h085rx2ry_wZI8MvdKQk_KBJ2f-8OzjA_9xrKJ38 --insecure" dir= execID=a1ad1
time="2023-11-03T13:47:11Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:47:11+00:00          ConfigMap  argocd-e2e--test-helm-with-dependencies-legacy-repo-vyhgb                my-map  OutOfSync  Missing              \n\nName:               argocd-e2e/test-helm-with-dependencies-legacy-repo\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-helm-with-dependencies-legacy-repo-vyhgb\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-helm-with-dependencies-legacy-repo\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               helm-with-dependencies\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (cecaa5f)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      cecaa5f6c64dacc692b93bc15832f7248d745052\nPhase:              Succeeded\nStart:              2023-11-03 13:47:11 +0000 UTC\nFinished:           2023-11-03 13:47:11 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                                  NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-helm-with-dependencies-legacy-repo-vyhgb  my-map  Synced                configmap/my-map created\n" duration=834.721893ms execID=a1ad1
time="2023-11-03T13:47:11Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:47:11Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:47:11Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestHelmWithDependenciesLegacyRepo (56.54s)
=== RUN   TestHelm3CRD
time="2023-11-03T13:47:12Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=0b627
time="2023-11-03T13:47:12Z" level=debug msg="namespace \"argocd-e2e--test-helm-with-dependencies-legacy-repo-vyhgb\" deleted\n" duration=293.019589ms execID=0b627
time="2023-11-03T13:47:12Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=a9c33
time="2023-11-03T13:47:12Z" level=debug msg="No resources found\n" duration=425.651393ms execID=a9c33
time="2023-11-03T13:47:12Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=ec2b0
time="2023-11-03T13:47:13Z" level=debug msg="No resources found\n" duration=297.071707ms execID=ec2b0
time="2023-11-03T13:47:14Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:47:14Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTYzMywibmJmIjoxNjk5MDE5MjMzLCJpYXQiOjE2OTkwMTkyMzMsImp0aSI6ImExZjJkODk0LTUxN2ItNGFkNC1iNDUzLWJhNDkwMzFlMDRkMCJ9.PGzByMd_pWCzfLK74cddVVuv8G-uo3szMESE2RcrK40 --insecure" dir= execID=4eddd
time="2023-11-03T13:47:14Z" level=debug duration=84.932825ms execID=4eddd
time="2023-11-03T13:47:14Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=17914
time="2023-11-03T13:47:14Z" level=debug duration=2.099484ms execID=17914
time="2023-11-03T13:47:14Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=0da6d
time="2023-11-03T13:47:14Z" level=debug duration=1.573578ms execID=0da6d
time="2023-11-03T13:47:14Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=f3fa0
time="2023-11-03T13:47:14Z" level=debug duration=1.785063ms execID=f3fa0
time="2023-11-03T13:47:14Z" level=info msg="pkill -9 gpg-agent" dir= execID=35cf3
time="2023-11-03T13:47:14Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=67ea2
time="2023-11-03T13:47:14Z" level=debug duration=9.799252ms execID=67ea2
time="2023-11-03T13:47:14Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=d72f0
time="2023-11-03T13:47:14Z" level=debug duration=52.153472ms execID=d72f0
time="2023-11-03T13:47:14Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=b9e6b
time="2023-11-03T13:47:14Z" level=debug duration=2.007016ms execID=b9e6b
time="2023-11-03T13:47:14Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=6b41b
time="2023-11-03T13:47:14Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.255383ms execID=6b41b
time="2023-11-03T13:47:14Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=6ad20
time="2023-11-03T13:47:14Z" level=debug duration=28.217696ms execID=6ad20
time="2023-11-03T13:47:14Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=aa3d0
time="2023-11-03T13:47:14Z" level=debug duration=20.604309ms execID=aa3d0
time="2023-11-03T13:47:14Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=58c8c
time="2023-11-03T13:47:14Z" level=debug duration=2.791101ms execID=58c8c
time="2023-11-03T13:47:14Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=409e6
Handling connection for 9081
time="2023-11-03T13:47:14Z" level=debug duration=75.295074ms execID=409e6
time="2023-11-03T13:47:14Z" level=info msg="kubectl create ns argocd-e2e--test-helm3-crd-gnttk" dir= execID=45e48
time="2023-11-03T13:47:14Z" level=debug msg="namespace/argocd-e2e--test-helm3-crd-gnttk created\n" duration=208.48436ms execID=45e48
time="2023-11-03T13:47:14Z" level=info msg="kubectl label ns argocd-e2e--test-helm3-crd-gnttk e2e.argoproj.io=true" dir= execID=9e7d2
time="2023-11-03T13:47:14Z" level=debug msg="namespace/argocd-e2e--test-helm3-crd-gnttk labeled\n" duration=250.124358ms execID=9e7d2
time="2023-11-03T13:47:14Z" level=info msg="clean state" duration=2.845089672s id=TestHelm3CRD-gnttk name=TestHelm3CRD password=password username=admin
time="2023-11-03T13:47:15Z" level=info msg="../../dist/argocd app create test-helm3-crd --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path helm3-crd --project default --dest-namespace argocd-e2e--test-helm3-crd-gnttk --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTYzMywibmJmIjoxNjk5MDE5MjMzLCJpYXQiOjE2OTkwMTkyMzMsImp0aSI6ImExZjJkODk0LTUxN2ItNGFkNC1iNDUzLWJhNDkwMzFlMDRkMCJ9.PGzByMd_pWCzfLK74cddVVuv8G-uo3szMESE2RcrK40 --insecure" dir= execID=ac208
time="2023-11-03T13:47:16Z" level=debug msg="application 'test-helm3-crd' created\n" duration=242.612515ms execID=ac208
time="2023-11-03T13:47:16Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:47:16Z" level=info msg="../../dist/argocd app sync test-helm3-crd --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTYzMywibmJmIjoxNjk5MDE5MjMzLCJpYXQiOjE2OTkwMTkyMzMsImp0aSI6ImExZjJkODk0LTUxN2ItNGFkNC1iNDUzLWJhNDkwMzFlMDRkMCJ9.PGzByMd_pWCzfLK74cddVVuv8G-uo3szMESE2RcrK40 --insecure" dir= execID=f9f95
time="2023-11-03T13:47:19Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:47:16+00:00  apiextensions.k8s.io  CustomResourceDefinition                                    crontabs.stable.example.com  OutOfSync                       \n2023-11-03T13:47:16+00:00                         ConfigMap                argocd-e2e--test-helm3-crd-gnttk                my-map         OutOfSync  Missing              \n2023-11-03T13:47:16+00:00          ConfigMap  argocd-e2e--test-helm3-crd-gnttk                my-map    Synced  Missing              \n\nName:               argocd-e2e/test-helm3-crd\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-helm3-crd-gnttk\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-helm3-crd\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               helm3-crd\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (16a0853)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      16a0853a519a5ea264872166beb73dbe21ad616f\nPhase:              Succeeded\nStart:              2023-11-03 13:47:16 +0000 UTC\nFinished:           2023-11-03 13:47:16 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP                 KIND                      NAMESPACE                         NAME                         STATUS   HEALTH  HOOK  MESSAGE\n                      ConfigMap                 argocd-e2e--test-helm3-crd-gnttk  my-map                       Synced                 configmap/my-map created\napiextensions.k8s.io  CustomResourceDefinition  argocd-e2e--test-helm3-crd-gnttk  crontabs.stable.example.com  Running  Synced        customresourcedefinition.apiextensions.k8s.io/crontabs.stable.example.com configured\napiextensions.k8s.io  CustomResourceDefinition                                    crontabs.stable.example.com  Synced                 \n" duration=3.05300607s execID=f9f95
time="2023-11-03T13:47:19Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:47:19Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:47:19Z" level=info msg="expectation succeeded: resource 'CustomResourceDefinition/crontabs.stable.example.com' sync status should be Synced, is Synced"
time="2023-11-03T13:47:19Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestHelm3CRD (7.15s)
=== RUN   TestHelmRepoDiffLocal
time="2023-11-03T13:47:19Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=715f7
time="2023-11-03T13:47:19Z" level=debug msg="namespace \"argocd-e2e--test-helm3-crd-gnttk\" deleted\n" duration=238.91501ms execID=715f7
time="2023-11-03T13:47:19Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=be080
time="2023-11-03T13:47:19Z" level=debug msg="No resources found\n" duration=434.658163ms execID=be080
time="2023-11-03T13:47:19Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=62a41
time="2023-11-03T13:47:20Z" level=debug msg="No resources found\n" duration=269.253211ms execID=62a41
time="2023-11-03T13:47:20Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:47:20Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTY0MCwibmJmIjoxNjk5MDE5MjQwLCJpYXQiOjE2OTkwMTkyNDAsImp0aSI6ImNjYjVjOGZmLWRlNjgtNGYxNy04M2ZkLWUzYzllZGVmMzVjMyJ9.td27H23fXNNl2-R3uAMZptr35huFII4VytTep-0cxTA --insecure" dir= execID=c1a24
time="2023-11-03T13:47:20Z" level=debug duration=150.740341ms execID=c1a24
time="2023-11-03T13:47:20Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=78074
time="2023-11-03T13:47:20Z" level=debug duration=2.020202ms execID=78074
time="2023-11-03T13:47:20Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=52854
time="2023-11-03T13:47:20Z" level=debug duration=1.683837ms execID=52854
time="2023-11-03T13:47:20Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=7b17e
time="2023-11-03T13:47:20Z" level=debug duration=2.031561ms execID=7b17e
time="2023-11-03T13:47:20Z" level=info msg="pkill -9 gpg-agent" dir= execID=84a7c
time="2023-11-03T13:47:20Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=7e64e
time="2023-11-03T13:47:21Z" level=debug duration=9.541978ms execID=7e64e
time="2023-11-03T13:47:21Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=2a221
time="2023-11-03T13:47:21Z" level=debug duration=37.185549ms execID=2a221
time="2023-11-03T13:47:21Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=69ce7
time="2023-11-03T13:47:21Z" level=debug duration=2.058769ms execID=69ce7
time="2023-11-03T13:47:21Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=7057a
time="2023-11-03T13:47:21Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.20131ms execID=7057a
time="2023-11-03T13:47:21Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=13133
time="2023-11-03T13:47:21Z" level=debug duration=27.651017ms execID=13133
time="2023-11-03T13:47:21Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=3de1a
time="2023-11-03T13:47:21Z" level=debug duration=21.081521ms execID=3de1a
time="2023-11-03T13:47:21Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=0cbdb
time="2023-11-03T13:47:21Z" level=debug duration=2.207055ms execID=0cbdb
time="2023-11-03T13:47:21Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=5a89e
Handling connection for 9081
time="2023-11-03T13:47:21Z" level=debug duration=80.315572ms execID=5a89e
time="2023-11-03T13:47:21Z" level=info msg="kubectl create ns argocd-e2e--test-helm-repo-diff-local-bfmfe" dir= execID=5d413
time="2023-11-03T13:47:21Z" level=debug msg="namespace/argocd-e2e--test-helm-repo-diff-local-bfmfe created\n" duration=145.005672ms execID=5d413
time="2023-11-03T13:47:21Z" level=info msg="kubectl label ns argocd-e2e--test-helm-repo-diff-local-bfmfe e2e.argoproj.io=true" dir= execID=48347
time="2023-11-03T13:47:21Z" level=debug msg="namespace/argocd-e2e--test-helm-repo-diff-local-bfmfe labeled\n" duration=315.822775ms execID=48347
time="2023-11-03T13:47:21Z" level=info msg="clean state" duration=2.502955595s id=TestHelmRepoDiffLocal-bfmfe name=TestHelmRepoDiffLocal password=password username=admin
time="2023-11-03T13:47:21Z" level=info msg="../../dist/argocd cert add-tls argocd-e2e-server --from /argocd-e2e/argo-cd/test/fixture/certs/argocd-test-ca.crt --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTY0MCwibmJmIjoxNjk5MDE5MjQwLCJpYXQiOjE2OTkwMTkyNDAsImp0aSI6ImNjYjVjOGZmLWRlNjgtNGYxNy04M2ZkLWUzYzllZGVmMzVjMyJ9.td27H23fXNNl2-R3uAMZptr35huFII4VytTep-0cxTA --insecure" dir= execID=3f4f9
time="2023-11-03T13:47:21Z" level=debug msg="Reading TLS certificate data in PEM format from '/argocd-e2e/argo-cd/test/fixture/certs/argocd-test-ca.crt'\nCreated entry with 0 PEM certificates for repository server argocd-e2e-server\n" duration=106.572884ms execID=3f4f9
time="2023-11-03T13:47:21Z" level=info msg="Waiting for API server to restart"
time="2023-11-03T13:47:21Z" level=info msg="kubectl rollout restart deployment argocd-test-server" dir= execID=21e4e
time="2023-11-03T13:47:22Z" level=debug msg="deployment.apps/argocd-test-server restarted\n" duration=306.555949ms execID=21e4e
time="2023-11-03T13:47:22Z" level=info msg="kubectl rollout status deployment argocd-test-server" dir= execID=0decd
time="2023-11-03T13:47:52Z" level=debug msg="Waiting for deployment \"argocd-test-server\" rollout to finish: 1 old replicas are pending termination...\nWaiting for deployment \"argocd-test-server\" rollout to finish: 1 old replicas are pending termination...\ndeployment \"argocd-test-server\" successfully rolled out\n" duration=30.444615337s execID=0decd
time="2023-11-03T13:47:52Z" level=info msg="Waiting for repo server to restart"
time="2023-11-03T13:47:52Z" level=info msg="kubectl rollout restart deployment argocd-test-repo-server" dir= execID=756bc
time="2023-11-03T13:47:52Z" level=debug msg="deployment.apps/argocd-test-repo-server restarted\n" duration=225.878315ms execID=756bc
time="2023-11-03T13:47:52Z" level=info msg="kubectl rollout status deployment argocd-test-repo-server" dir= execID=bf9e7
time="2023-11-03T13:48:03Z" level=debug msg="Waiting for deployment \"argocd-test-repo-server\" rollout to finish: 1 old replicas are pending termination...\nWaiting for deployment \"argocd-test-repo-server\" rollout to finish: 1 old replicas are pending termination...\ndeployment \"argocd-test-repo-server\" successfully rolled out\n" duration=10.392824071s execID=bf9e7
time="2023-11-03T13:48:13Z" level=info msg="../../dist/argocd repo add https://argocd-e2e-server:9444/helm-repo --username admin --password password --tls-client-cert-path /argocd-e2e/argo-cd/test/fixture/certs/argocd-test-client.crt --tls-client-cert-key-path /argocd-e2e/argo-cd/test/fixture/certs/argocd-test-client.key --type helm --name custom-repo --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTY0MCwibmJmIjoxNjk5MDE5MjQwLCJpYXQiOjE2OTkwMTkyNDAsImp0aSI6ImNjYjVjOGZmLWRlNjgtNGYxNy04M2ZkLWUzYzllZGVmMzVjMyJ9.td27H23fXNNl2-R3uAMZptr35huFII4VytTep-0cxTA --insecure" dir= execID=42eb8
time="2023-11-03T13:48:13Z" level=debug msg="Repository 'https://argocd-e2e-server:9444/helm-repo' added\n" duration=274.316768ms execID=42eb8
time="2023-11-03T13:48:14Z" level=info msg="../../dist/argocd app create test-helm-repo-diff-local --repo https://argocd-e2e-server:9444/helm-repo --dest-server https://kubernetes.default.svc --helm-chart helm --project default --revision 1.0.0 --dest-namespace argocd-e2e--test-helm-repo-diff-local-bfmfe --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTY0MCwibmJmIjoxNjk5MDE5MjQwLCJpYXQiOjE2OTkwMTkyNDAsImp0aSI6ImNjYjVjOGZmLWRlNjgtNGYxNy04M2ZkLWUzYzllZGVmMzVjMyJ9.td27H23fXNNl2-R3uAMZptr35huFII4VytTep-0cxTA --insecure" dir= execID=ad027
time="2023-11-03T13:48:14Z" level=debug msg="application 'test-helm-repo-diff-local' created\n" duration=283.595321ms execID=ad027
time="2023-11-03T13:48:14Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:48:14Z" level=info msg="../../dist/argocd app sync test-helm-repo-diff-local --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTY0MCwibmJmIjoxNjk5MDE5MjQwLCJpYXQiOjE2OTkwMTkyNDAsImp0aSI6ImNjYjVjOGZmLWRlNjgtNGYxNy04M2ZkLWUzYzllZGVmMzVjMyJ9.td27H23fXNNl2-R3uAMZptr35huFII4VytTep-0cxTA --insecure" dir= execID=2bba8
time="2023-11-03T13:48:17Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                   NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:48:14+00:00          ConfigMap  argocd-e2e--test-helm-repo-diff-local-bfmfe                my-map  OutOfSync  Missing              \n2023-11-03T13:48:17+00:00          ConfigMap  argocd-e2e--test-helm-repo-diff-local-bfmfe                my-map  OutOfSync  Missing              configmap/my-map created\n2023-11-03T13:48:17+00:00          ConfigMap  argocd-e2e--test-helm-repo-diff-local-bfmfe                my-map    Synced  Missing              configmap/my-map created\n\nName:               argocd-e2e/test-helm-repo-diff-local\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-helm-repo-diff-local-bfmfe\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-helm-repo-diff-local\nRepo:               https://argocd-e2e-server:9444/helm-repo\nTarget:             1.0.0\nPath:               \nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to 1.0.0\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      1.0.0\nPhase:              Succeeded\nStart:              2023-11-03 13:48:14 +0000 UTC\nFinished:           2023-11-03 13:48:17 +0000 UTC\nDuration:           3s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                    NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-helm-repo-diff-local-bfmfe  my-map  Synced                configmap/my-map created\n" duration=3.253792369s execID=2bba8
time="2023-11-03T13:48:17Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:48:17Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:48:17Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:48:17Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:48:17Z" level=info msg="helm repo add custom-repo http://127.0.0.1:9081/helm-repo --username admin --password password --cert-file ../fixture/certs/argocd-test-client.crt --key-file ../fixture/certs/argocd-test-client.key --ca-file ../fixture/certs/argocd-test-ca.crt" dir= execID=34f7d
Handling connection for 9081
time="2023-11-03T13:48:18Z" level=debug msg="\"custom-repo\" has been added to your repositories\n" duration=30.653136ms execID=34f7d
time="2023-11-03T13:48:18Z" level=info msg="../../dist/argocd app diff test-helm-repo-diff-local --local testdata/helm --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTY0MCwibmJmIjoxNjk5MDE5MjQwLCJpYXQiOjE2OTkwMTkyNDAsImp0aSI6ImNjYjVjOGZmLWRlNjgtNGYxNy04M2ZkLWUzYzllZGVmMzVjMyJ9.td27H23fXNNl2-R3uAMZptr35huFII4VytTep-0cxTA --insecure" dir= execID=8f132
time="2023-11-03T13:48:18Z" level=debug duration=196.545737ms execID=8f132
time="2023-11-03T13:48:18Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestHelmRepoDiffLocal (59.09s)
=== RUN   TestHelmOCIRegistry
    fixture.go:901: 
--- SKIP: TestHelmOCIRegistry (0.00s)
=== RUN   TestGitWithHelmOCIRegistryDependencies
    fixture.go:901: 
--- SKIP: TestGitWithHelmOCIRegistryDependencies (0.00s)
=== RUN   TestHelmOCIRegistryWithDependencies
    fixture.go:901: 
--- SKIP: TestHelmOCIRegistryWithDependencies (0.00s)
=== RUN   TestTemplatesGitWithHelmOCIDependencies
    fixture.go:901: 
--- SKIP: TestTemplatesGitWithHelmOCIDependencies (0.00s)
=== RUN   TestTemplatesHelmOCIWithDependencies
    fixture.go:901: 
--- SKIP: TestTemplatesHelmOCIWithDependencies (0.00s)
=== RUN   TestPreSyncHookSuccessful
time="2023-11-03T13:48:18Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=2c2ba
time="2023-11-03T13:48:18Z" level=debug msg="namespace \"argocd-e2e--test-helm-repo-diff-local-bfmfe\" deleted\n" duration=167.124849ms execID=2c2ba
time="2023-11-03T13:48:18Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=ff72e
time="2023-11-03T13:48:18Z" level=debug msg="No resources found\n" duration=443.488288ms execID=ff72e
time="2023-11-03T13:48:18Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=d72c7
time="2023-11-03T13:48:19Z" level=debug msg="No resources found\n" duration=252.222182ms execID=d72c7
time="2023-11-03T13:48:20Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:48:20Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTcwMCwibmJmIjoxNjk5MDE5MzAwLCJpYXQiOjE2OTkwMTkzMDAsImp0aSI6ImM4ZjI4YWVjLWJjZTgtNDcxMi04MjZhLWM4YjNhYjFlMDc4NCJ9.Oaq_5VPB6Y2CZTW0tFvJlMYk6t-PR6sdiugdYLfZcTw --insecure" dir= execID=29868
time="2023-11-03T13:48:20Z" level=debug duration=105.48628ms execID=29868
time="2023-11-03T13:48:20Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=6006c
time="2023-11-03T13:48:20Z" level=debug duration=2.017734ms execID=6006c
time="2023-11-03T13:48:20Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=3d514
time="2023-11-03T13:48:20Z" level=debug duration=1.817653ms execID=3d514
time="2023-11-03T13:48:20Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=e12bd
time="2023-11-03T13:48:20Z" level=debug duration=1.416781ms execID=e12bd
time="2023-11-03T13:48:20Z" level=info msg="pkill -9 gpg-agent" dir= execID=4e36b
time="2023-11-03T13:48:20Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=6beb2
time="2023-11-03T13:48:20Z" level=debug duration=9.785454ms execID=6beb2
time="2023-11-03T13:48:20Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=5a692
time="2023-11-03T13:48:20Z" level=debug duration=34.726511ms execID=5a692
time="2023-11-03T13:48:20Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=0725c
time="2023-11-03T13:48:20Z" level=debug duration=2.520397ms execID=0725c
time="2023-11-03T13:48:20Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=c6a8e
time="2023-11-03T13:48:20Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.876005ms execID=c6a8e
time="2023-11-03T13:48:20Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=776f1
time="2023-11-03T13:48:20Z" level=debug duration=34.07679ms execID=776f1
time="2023-11-03T13:48:20Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=cc2ee
time="2023-11-03T13:48:20Z" level=debug duration=21.086726ms execID=cc2ee
time="2023-11-03T13:48:20Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=1d2f0
time="2023-11-03T13:48:20Z" level=debug duration=2.301664ms execID=1d2f0
time="2023-11-03T13:48:20Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=cfee2
Handling connection for 9081
time="2023-11-03T13:48:20Z" level=debug duration=80.054969ms execID=cfee2
time="2023-11-03T13:48:20Z" level=info msg="kubectl create ns argocd-e2e--test-pre-sync-hook-successful-ugyhb" dir= execID=22f38
time="2023-11-03T13:48:20Z" level=debug msg="namespace/argocd-e2e--test-pre-sync-hook-successful-ugyhb created\n" duration=117.66209ms execID=22f38
time="2023-11-03T13:48:20Z" level=info msg="kubectl label ns argocd-e2e--test-pre-sync-hook-successful-ugyhb e2e.argoproj.io=true" dir= execID=7dc2a
time="2023-11-03T13:48:20Z" level=debug msg="namespace/argocd-e2e--test-pre-sync-hook-successful-ugyhb labeled\n" duration=277.241742ms execID=7dc2a
time="2023-11-03T13:48:20Z" level=info msg="clean state" duration=2.621073075s id=TestPreSyncHookSuccessful-ugyhb name=TestPreSyncHookSuccessful password=password username=admin
time="2023-11-03T13:48:21Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/metadata/annotations\", \"value\": {\"argocd.argoproj.io/hook\": \"PreSync\"}}]" path=hook/hook.yaml
time="2023-11-03T13:48:21Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:48:21Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/hook\":\"Sync\"},\"name\":\"hook\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:48:21Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:48:21Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=6bfda
time="2023-11-03T13:48:21Z" level=debug msg="diff --git a/hook/hook.yaml b/hook/hook.yaml\nindex ca89c3d..3b3b2f2 100644\n--- a/hook/hook.yaml\n+++ b/hook/hook.yaml\n@@ -2,13 +2,13 @@ apiVersion: v1\n kind: Pod\n metadata:\n   annotations:\n-    argocd.argoproj.io/hook: Sync\n+    argocd.argoproj.io/hook: PreSync\n   name: hook\n spec:\n   containers:\n-    - command:\n-        - \"true\"\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      name: main\n-  restartPolicy: Never\n\\ No newline at end of file\n+  - command:\n+    - \"true\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n+  restartPolicy: Never\n" duration=4.790802ms execID=6bfda
time="2023-11-03T13:48:21Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=2e096
time="2023-11-03T13:48:21Z" level=debug msg="[master 313064f] patch\n 1 file changed, 7 insertions(+), 7 deletions(-)\n" duration=10.808223ms execID=2e096
time="2023-11-03T13:48:21Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=c227b
Handling connection for 9081
time="2023-11-03T13:48:21Z" level=debug duration=34.869735ms execID=c227b
time="2023-11-03T13:48:21Z" level=info msg="../../dist/argocd app create test-pre-sync-hook-successful --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path hook --project default --dest-namespace argocd-e2e--test-pre-sync-hook-successful-ugyhb --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTcwMCwibmJmIjoxNjk5MDE5MzAwLCJpYXQiOjE2OTkwMTkzMDAsImp0aSI6ImM4ZjI4YWVjLWJjZTgtNDcxMi04MjZhLWM4YjNhYjFlMDc4NCJ9.Oaq_5VPB6Y2CZTW0tFvJlMYk6t-PR6sdiugdYLfZcTw --insecure" dir= execID=2c81a
time="2023-11-03T13:48:22Z" level=debug msg="application 'test-pre-sync-hook-successful' created\n" duration=260.735606ms execID=2c81a
time="2023-11-03T13:48:22Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:48:22Z" level=info msg="../../dist/argocd app sync test-pre-sync-hook-successful --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTcwMCwibmJmIjoxNjk5MDE5MzAwLCJpYXQiOjE2OTkwMTkzMDAsImp0aSI6ImM4ZjI4YWVjLWJjZTgtNDcxMi04MjZhLWM4YjNhYjFlMDc4NCJ9.Oaq_5VPB6Y2CZTW0tFvJlMYk6t-PR6sdiugdYLfZcTw --insecure" dir= execID=4b279
time="2023-11-03T13:48:29Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                       NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:48:22+00:00                Pod  argocd-e2e--test-pre-sync-hook-successful-ugyhb                   pod  OutOfSync  Missing              \n2023-11-03T13:48:23+00:00                Pod  argocd-e2e--test-pre-sync-hook-successful-ugyhb                  hook                                 \n2023-11-03T13:48:26+00:00                Pod  argocd-e2e--test-pre-sync-hook-successful-ugyhb                  hook   Running   Synced     PreSync  pod/hook created\n2023-11-03T13:48:29+00:00                Pod  argocd-e2e--test-pre-sync-hook-successful-ugyhb                   pod  OutOfSync  Missing              pod/pod created\n2023-11-03T13:48:29+00:00                Pod  argocd-e2e--test-pre-sync-hook-successful-ugyhb                  hook  Succeeded   Synced     PreSync  pod/hook created\n2023-11-03T13:48:29+00:00                Pod  argocd-e2e--test-pre-sync-hook-successful-ugyhb                   pod    Synced  Progressing              pod/pod created\n\nName:               argocd-e2e/test-pre-sync-hook-successful\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-pre-sync-hook-successful-ugyhb\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-pre-sync-hook-successful\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               hook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (313064f)\nHealth Status:      Progressing\n\nOperation:          Sync\nSync Revision:      313064f6bec586f9fc81ff0d026cf427dc25be53\nPhase:              Succeeded\nStart:              2023-11-03 13:48:22 +0000 UTC\nFinished:           2023-11-03 13:48:29 +0000 UTC\nDuration:           7s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND  NAMESPACE                                        NAME  STATUS     HEALTH       HOOK     MESSAGE\n       Pod   argocd-e2e--test-pre-sync-hook-successful-ugyhb  hook  Succeeded               PreSync  pod/hook created\n       Pod   argocd-e2e--test-pre-sync-hook-successful-ugyhb  pod   Synced     Progressing           pod/pod created\n" duration=7.438886986s execID=4b279
time="2023-11-03T13:48:29Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:48:29Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:48:29Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:48:29Z" level=info msg="expectation succeeded: resource 'Pod/pod' sync status should be Synced, is Synced"
time="2023-11-03T13:48:29Z" level=info msg="pending: resource 'Pod/pod' health should be Healthy, is Progressing"
time="2023-11-03T13:48:32Z" level=info msg="pending: resource 'Pod/pod' health should be Healthy, is Progressing"
time="2023-11-03T13:48:35Z" level=info msg="expectation succeeded: resource 'Pod/pod' health should be Healthy, is Healthy"
time="2023-11-03T13:48:35Z" level=info msg="expectation succeeded: right number of results, want 2, got 2"
time="2023-11-03T13:48:35Z" level=info msg="expectation succeeded: found resource result { v1 Pod argocd-e2e--test-pre-sync-hook-successful-ugyhb hook  pod/hook created PreSync Succeeded PreSync}"
time="2023-11-03T13:48:35Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestPreSyncHookSuccessful (17.42s)
=== RUN   TestSyncHookSuccessful
time="2023-11-03T13:48:35Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=2f610
time="2023-11-03T13:48:35Z" level=debug msg="namespace \"argocd-e2e--test-pre-sync-hook-successful-ugyhb\" deleted\n" duration=231.763637ms execID=2f610
time="2023-11-03T13:48:35Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=f853c
time="2023-11-03T13:48:36Z" level=debug msg="No resources found\n" duration=466.219844ms execID=f853c
time="2023-11-03T13:48:36Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=f19fd
time="2023-11-03T13:48:36Z" level=debug msg="No resources found\n" duration=249.31048ms execID=f19fd
time="2023-11-03T13:48:37Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:48:37Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTcxNywibmJmIjoxNjk5MDE5MzE3LCJpYXQiOjE2OTkwMTkzMTcsImp0aSI6ImNlOTQyMzAyLWQzNjUtNGIwYi1iMzZmLTRhMjNkZWQzNWI5NCJ9.4tqP-ezzZUYAJX0tBvpY0m3M2eUnQEZgasGeP3B6tzQ --insecure" dir= execID=3adcf
time="2023-11-03T13:48:37Z" level=debug duration=94.360242ms execID=3adcf
time="2023-11-03T13:48:37Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=b25cf
time="2023-11-03T13:48:37Z" level=debug duration=2.069246ms execID=b25cf
time="2023-11-03T13:48:37Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=2d9dc
time="2023-11-03T13:48:37Z" level=debug duration=1.680172ms execID=2d9dc
time="2023-11-03T13:48:37Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=6533d
time="2023-11-03T13:48:37Z" level=debug duration=1.562584ms execID=6533d
time="2023-11-03T13:48:37Z" level=info msg="pkill -9 gpg-agent" dir= execID=47469
time="2023-11-03T13:48:37Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=170ae
time="2023-11-03T13:48:37Z" level=debug duration=14.985882ms execID=170ae
time="2023-11-03T13:48:37Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=5aa21
time="2023-11-03T13:48:37Z" level=debug duration=33.306672ms execID=5aa21
time="2023-11-03T13:48:37Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=51e7c
time="2023-11-03T13:48:37Z" level=debug duration=1.825367ms execID=51e7c
time="2023-11-03T13:48:37Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=327a7
time="2023-11-03T13:48:37Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.072213ms execID=327a7
time="2023-11-03T13:48:37Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=ddfe4
time="2023-11-03T13:48:37Z" level=debug duration=26.817049ms execID=ddfe4
time="2023-11-03T13:48:37Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=42fb4
time="2023-11-03T13:48:37Z" level=debug duration=22.525392ms execID=42fb4
time="2023-11-03T13:48:37Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=67888
time="2023-11-03T13:48:37Z" level=debug duration=2.277667ms execID=67888
time="2023-11-03T13:48:37Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=52f98
Handling connection for 9081
time="2023-11-03T13:48:37Z" level=debug duration=74.145765ms execID=52f98
time="2023-11-03T13:48:37Z" level=info msg="kubectl create ns argocd-e2e--test-sync-hook-successful-ymklm" dir= execID=c729c
time="2023-11-03T13:48:38Z" level=debug msg="namespace/argocd-e2e--test-sync-hook-successful-ymklm created\n" duration=196.895019ms execID=c729c
time="2023-11-03T13:48:38Z" level=info msg="kubectl label ns argocd-e2e--test-sync-hook-successful-ymklm e2e.argoproj.io=true" dir= execID=3675e
time="2023-11-03T13:48:38Z" level=debug msg="namespace/argocd-e2e--test-sync-hook-successful-ymklm labeled\n" duration=260.293272ms execID=3675e
time="2023-11-03T13:48:38Z" level=info msg="clean state" duration=2.705176932s id=TestSyncHookSuccessful-ymklm name=TestSyncHookSuccessful password=password username=admin
time="2023-11-03T13:48:39Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/metadata/annotations\", \"value\": {\"argocd.argoproj.io/hook\": \"Sync\"}}]" path=hook/hook.yaml
time="2023-11-03T13:48:39Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:48:39Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/hook\":\"Sync\"},\"name\":\"hook\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:48:39Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:48:39Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=4277f
time="2023-11-03T13:48:39Z" level=debug msg="diff --git a/hook/hook.yaml b/hook/hook.yaml\nindex ca89c3d..7f59d91 100644\n--- a/hook/hook.yaml\n+++ b/hook/hook.yaml\n@@ -6,9 +6,9 @@ metadata:\n   name: hook\n spec:\n   containers:\n-    - command:\n-        - \"true\"\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      name: main\n-  restartPolicy: Never\n\\ No newline at end of file\n+  - command:\n+    - \"true\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n+  restartPolicy: Never\n" duration=4.674494ms execID=4277f
time="2023-11-03T13:48:39Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=06b12
time="2023-11-03T13:48:39Z" level=debug msg="[master 8cc564b] patch\n 1 file changed, 6 insertions(+), 6 deletions(-)\n" duration=11.580406ms execID=06b12
time="2023-11-03T13:48:39Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=b1919
Handling connection for 9081
time="2023-11-03T13:48:39Z" level=debug duration=40.026526ms execID=b1919
time="2023-11-03T13:48:39Z" level=info msg="../../dist/argocd app create test-sync-hook-successful --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path hook --project default --dest-namespace argocd-e2e--test-sync-hook-successful-ymklm --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTcxNywibmJmIjoxNjk5MDE5MzE3LCJpYXQiOjE2OTkwMTkzMTcsImp0aSI6ImNlOTQyMzAyLWQzNjUtNGIwYi1iMzZmLTRhMjNkZWQzNWI5NCJ9.4tqP-ezzZUYAJX0tBvpY0m3M2eUnQEZgasGeP3B6tzQ --insecure" dir= execID=aeead
time="2023-11-03T13:48:39Z" level=debug msg="application 'test-sync-hook-successful' created\n" duration=431.869588ms execID=aeead
time="2023-11-03T13:48:39Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:48:39Z" level=info msg="../../dist/argocd app sync test-sync-hook-successful --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTcxNywibmJmIjoxNjk5MDE5MzE3LCJpYXQiOjE2OTkwMTkzMTcsImp0aSI6ImNlOTQyMzAyLWQzNjUtNGIwYi1iMzZmLTRhMjNkZWQzNWI5NCJ9.4tqP-ezzZUYAJX0tBvpY0m3M2eUnQEZgasGeP3B6tzQ --insecure" dir= execID=3c288
time="2023-11-03T13:48:45Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                   NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:48:40+00:00                Pod  argocd-e2e--test-sync-hook-successful-ymklm                   pod  OutOfSync  Missing              \n2023-11-03T13:48:40+00:00                Pod  argocd-e2e--test-sync-hook-successful-ymklm                  hook   Running    Synced        Sync  pod/hook created\n2023-11-03T13:48:40+00:00                Pod  argocd-e2e--test-sync-hook-successful-ymklm                   pod  OutOfSync  Missing              pod/pod created\n2023-11-03T13:48:40+00:00                Pod  argocd-e2e--test-sync-hook-successful-ymklm                   pod    Synced  Progressing              pod/pod created\n2023-11-03T13:48:45+00:00                Pod  argocd-e2e--test-sync-hook-successful-ymklm                   pod    Synced  Healthy              pod/pod created\n2023-11-03T13:48:45+00:00                Pod  argocd-e2e--test-sync-hook-successful-ymklm                  hook  Succeeded   Synced        Sync  pod/hook created\n\nName:               argocd-e2e/test-sync-hook-successful\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-sync-hook-successful-ymklm\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-sync-hook-successful\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               hook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (8cc564b)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      8cc564b47c205c7cf0cbefd2e850cae4821bc1d0\nPhase:              Succeeded\nStart:              2023-11-03 13:48:40 +0000 UTC\nFinished:           2023-11-03 13:48:45 +0000 UTC\nDuration:           5s\nMessage:            successfully synced (no more tasks)\n\nGROUP  KIND  NAMESPACE                                    NAME  STATUS     HEALTH   HOOK  MESSAGE\n       Pod   argocd-e2e--test-sync-hook-successful-ymklm  hook  Succeeded           Sync  pod/hook created\n       Pod   argocd-e2e--test-sync-hook-successful-ymklm  pod   Synced     Healthy        pod/pod created\n" duration=5.634449557s execID=3c288
time="2023-11-03T13:48:45Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:48:45Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:48:45Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:48:45Z" level=info msg="expectation succeeded: resource 'Pod/pod' sync status should be Synced, is Synced"
time="2023-11-03T13:48:45Z" level=info msg="expectation succeeded: resource 'Pod/pod' health should be Healthy, is Healthy"
time="2023-11-03T13:48:45Z" level=info msg="expectation succeeded: right number of results, want 2, got 2"
time="2023-11-03T13:48:45Z" level=info msg="expectation succeeded: found resource result { v1 Pod argocd-e2e--test-sync-hook-successful-ymklm hook  pod/hook created Sync Succeeded Sync}"
time="2023-11-03T13:48:45Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestSyncHookSuccessful (9.86s)
=== RUN   TestPostSyncHookSuccessful
time="2023-11-03T13:48:45Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=e6fee
time="2023-11-03T13:48:45Z" level=debug msg="namespace \"argocd-e2e--test-sync-hook-successful-ymklm\" deleted\n" duration=211.775082ms execID=e6fee
time="2023-11-03T13:48:45Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=8a945
time="2023-11-03T13:48:46Z" level=debug msg="No resources found\n" duration=514.041067ms execID=8a945
time="2023-11-03T13:48:46Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=f82ec
time="2023-11-03T13:48:46Z" level=debug msg="No resources found\n" duration=256.731666ms execID=f82ec
time="2023-11-03T13:48:47Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:48:47Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTcyNywibmJmIjoxNjk5MDE5MzI3LCJpYXQiOjE2OTkwMTkzMjcsImp0aSI6IjU2YWM5OTJmLTQxZGItNDI2YS04OWI2LWNiNmMxNWFmYTAzMSJ9.6PaO9OBQJP_-Dskcz8MU7ln4gpe5-wYZcxLf_7SNdeY --insecure" dir= execID=29801
time="2023-11-03T13:48:47Z" level=debug duration=92.794272ms execID=29801
time="2023-11-03T13:48:47Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=b3061
time="2023-11-03T13:48:47Z" level=debug duration=1.858957ms execID=b3061
time="2023-11-03T13:48:47Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=9ab09
time="2023-11-03T13:48:47Z" level=debug duration=1.579759ms execID=9ab09
time="2023-11-03T13:48:47Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=38e12
time="2023-11-03T13:48:47Z" level=debug duration=1.476519ms execID=38e12
time="2023-11-03T13:48:47Z" level=info msg="pkill -9 gpg-agent" dir= execID=cc940
time="2023-11-03T13:48:47Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=da659
time="2023-11-03T13:48:47Z" level=debug duration=9.506636ms execID=da659
time="2023-11-03T13:48:47Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=c00ea
time="2023-11-03T13:48:47Z" level=debug duration=39.588013ms execID=c00ea
time="2023-11-03T13:48:47Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=1d3ae
time="2023-11-03T13:48:47Z" level=debug duration=1.83401ms execID=1d3ae
time="2023-11-03T13:48:47Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=c10e2
time="2023-11-03T13:48:47Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.032973ms execID=c10e2
time="2023-11-03T13:48:47Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=e2ea3
time="2023-11-03T13:48:47Z" level=debug duration=25.796901ms execID=e2ea3
time="2023-11-03T13:48:47Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=7326b
time="2023-11-03T13:48:47Z" level=debug duration=21.151796ms execID=7326b
time="2023-11-03T13:48:47Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=f4231
time="2023-11-03T13:48:47Z" level=debug duration=2.035415ms execID=f4231
time="2023-11-03T13:48:47Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=1f69f
Handling connection for 9081
time="2023-11-03T13:48:47Z" level=debug duration=73.913346ms execID=1f69f
time="2023-11-03T13:48:47Z" level=info msg="kubectl create ns argocd-e2e--test-post-sync-hook-successful-erfrp" dir= execID=d3800
time="2023-11-03T13:48:47Z" level=debug msg="namespace/argocd-e2e--test-post-sync-hook-successful-erfrp created\n" duration=286.584265ms execID=d3800
time="2023-11-03T13:48:47Z" level=info msg="kubectl label ns argocd-e2e--test-post-sync-hook-successful-erfrp e2e.argoproj.io=true" dir= execID=0b310
time="2023-11-03T13:48:48Z" level=debug msg="namespace/argocd-e2e--test-post-sync-hook-successful-erfrp labeled\n" duration=805.922008ms execID=0b310
time="2023-11-03T13:48:48Z" level=info msg="clean state" duration=3.265331898s id=TestPostSyncHookSuccessful-erfrp name=TestPostSyncHookSuccessful password=password username=admin
time="2023-11-03T13:48:49Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/metadata/annotations\", \"value\": {\"argocd.argoproj.io/hook\": \"PostSync\"}}]" path=hook/hook.yaml
time="2023-11-03T13:48:49Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:48:49Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/hook\":\"Sync\"},\"name\":\"hook\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:48:49Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:48:49Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=81e6b
time="2023-11-03T13:48:49Z" level=debug msg="diff --git a/hook/hook.yaml b/hook/hook.yaml\nindex ca89c3d..a76f181 100644\n--- a/hook/hook.yaml\n+++ b/hook/hook.yaml\n@@ -2,13 +2,13 @@ apiVersion: v1\n kind: Pod\n metadata:\n   annotations:\n-    argocd.argoproj.io/hook: Sync\n+    argocd.argoproj.io/hook: PostSync\n   name: hook\n spec:\n   containers:\n-    - command:\n-        - \"true\"\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      name: main\n-  restartPolicy: Never\n\\ No newline at end of file\n+  - command:\n+    - \"true\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n+  restartPolicy: Never\n" duration=4.823861ms execID=81e6b
time="2023-11-03T13:48:49Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=9ca7f
time="2023-11-03T13:48:49Z" level=debug msg="[master c98c664] patch\n 1 file changed, 7 insertions(+), 7 deletions(-)\n" duration=11.247227ms execID=9ca7f
time="2023-11-03T13:48:49Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=bf145
Handling connection for 9081
time="2023-11-03T13:48:49Z" level=debug duration=37.173161ms execID=bf145
time="2023-11-03T13:48:49Z" level=info msg="../../dist/argocd app create test-post-sync-hook-successful --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path hook --project default --dest-namespace argocd-e2e--test-post-sync-hook-successful-erfrp --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTcyNywibmJmIjoxNjk5MDE5MzI3LCJpYXQiOjE2OTkwMTkzMjcsImp0aSI6IjU2YWM5OTJmLTQxZGItNDI2YS04OWI2LWNiNmMxNWFmYTAzMSJ9.6PaO9OBQJP_-Dskcz8MU7ln4gpe5-wYZcxLf_7SNdeY --insecure" dir= execID=39df8
time="2023-11-03T13:48:50Z" level=debug msg="application 'test-post-sync-hook-successful' created\n" duration=282.727813ms execID=39df8
time="2023-11-03T13:48:50Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:48:50Z" level=info msg="../../dist/argocd app sync test-post-sync-hook-successful --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTcyNywibmJmIjoxNjk5MDE5MzI3LCJpYXQiOjE2OTkwMTkzMjcsImp0aSI6IjU2YWM5OTJmLTQxZGItNDI2YS04OWI2LWNiNmMxNWFmYTAzMSJ9.6PaO9OBQJP_-Dskcz8MU7ln4gpe5-wYZcxLf_7SNdeY --insecure" dir= execID=df144
time="2023-11-03T13:49:01Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                        NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:48:50+00:00                Pod  argocd-e2e--test-post-sync-hook-successful-erfrp                   pod  OutOfSync  Missing              \n2023-11-03T13:48:51+00:00                Pod  argocd-e2e--test-post-sync-hook-successful-erfrp                   pod    Synced  Progressing              \n2023-11-03T13:48:53+00:00                Pod  argocd-e2e--test-post-sync-hook-successful-erfrp                   pod    Synced  Progressing              pod/pod created\n2023-11-03T13:48:56+00:00                Pod  argocd-e2e--test-post-sync-hook-successful-erfrp                   pod    Synced  Healthy              pod/pod created\n2023-11-03T13:48:56+00:00                Pod  argocd-e2e--test-post-sync-hook-successful-erfrp                  hook   Running   Synced    PostSync  pod/hook created\n2023-11-03T13:49:01+00:00                Pod  argocd-e2e--test-post-sync-hook-successful-erfrp                  hook  Succeeded   Synced    PostSync  pod/hook created\n\nName:               argocd-e2e/test-post-sync-hook-successful\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-post-sync-hook-successful-erfrp\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-post-sync-hook-successful\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               hook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (c98c664)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      c98c664b5a551924ec217f47dba1d86ba2a6ac45\nPhase:              Succeeded\nStart:              2023-11-03 13:48:50 +0000 UTC\nFinished:           2023-11-03 13:49:01 +0000 UTC\nDuration:           11s\nMessage:            successfully synced (no more tasks)\n\nGROUP  KIND  NAMESPACE                                         NAME  STATUS     HEALTH   HOOK      MESSAGE\n       Pod   argocd-e2e--test-post-sync-hook-successful-erfrp  pod   Synced     Healthy            pod/pod created\n       Pod   argocd-e2e--test-post-sync-hook-successful-erfrp  hook  Succeeded           PostSync  pod/hook created\n" duration=11.198196724s execID=df144
time="2023-11-03T13:49:01Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:49:01Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:49:01Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:49:01Z" level=info msg="expectation succeeded: resource 'Pod/pod' sync status should be Synced, is Synced"
time="2023-11-03T13:49:01Z" level=info msg="expectation succeeded: resource 'Pod/pod' health should be Healthy, is Healthy"
time="2023-11-03T13:49:01Z" level=info msg="expectation succeeded: right number of results, want 2, got 2"
time="2023-11-03T13:49:01Z" level=info msg="expectation succeeded: found resource result { v1 Pod argocd-e2e--test-post-sync-hook-successful-erfrp hook  pod/hook created PostSync Succeeded PostSync}"
time="2023-11-03T13:49:01Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestPostSyncHookSuccessful (15.83s)
=== RUN   TestHookDiff
time="2023-11-03T13:49:01Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=581e6
time="2023-11-03T13:49:01Z" level=debug msg="namespace \"argocd-e2e--test-post-sync-hook-successful-erfrp\" deleted\n" duration=244.399005ms execID=581e6
time="2023-11-03T13:49:01Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=97302
time="2023-11-03T13:49:02Z" level=debug msg="No resources found\n" duration=463.312699ms execID=97302
time="2023-11-03T13:49:02Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=f95a8
time="2023-11-03T13:49:02Z" level=debug msg="No resources found\n" duration=255.498029ms execID=f95a8
time="2023-11-03T13:49:02Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:49:02Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTc0MiwibmJmIjoxNjk5MDE5MzQyLCJpYXQiOjE2OTkwMTkzNDIsImp0aSI6IjZiYWE0YzFlLWE0OTYtNGY5NS1hM2Q3LWYyYjcwMWE1YzliYSJ9.nYov7Apjv1awlgiKFTSW1UKVghSn9KePdCxkqKxv9F0 --insecure" dir= execID=6f3e7
time="2023-11-03T13:49:03Z" level=debug duration=68.074793ms execID=6f3e7
time="2023-11-03T13:49:03Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=966a7
time="2023-11-03T13:49:03Z" level=debug duration=1.980008ms execID=966a7
time="2023-11-03T13:49:03Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=b3514
time="2023-11-03T13:49:03Z" level=debug duration=46.072758ms execID=b3514
time="2023-11-03T13:49:03Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=8123f
time="2023-11-03T13:49:03Z" level=debug duration=1.67499ms execID=8123f
time="2023-11-03T13:49:03Z" level=info msg="pkill -9 gpg-agent" dir= execID=8e1e7
time="2023-11-03T13:49:03Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=bf475
time="2023-11-03T13:49:03Z" level=debug duration=9.917381ms execID=bf475
time="2023-11-03T13:49:03Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=7969a
time="2023-11-03T13:49:03Z" level=debug duration=34.51571ms execID=7969a
time="2023-11-03T13:49:03Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=a01de
time="2023-11-03T13:49:03Z" level=debug duration=1.926069ms execID=a01de
time="2023-11-03T13:49:03Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=d5b02
time="2023-11-03T13:49:03Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.015827ms execID=d5b02
time="2023-11-03T13:49:03Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=0d3c0
time="2023-11-03T13:49:03Z" level=debug duration=27.283715ms execID=0d3c0
time="2023-11-03T13:49:03Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=4e07a
time="2023-11-03T13:49:03Z" level=debug duration=35.083197ms execID=4e07a
time="2023-11-03T13:49:03Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=b85e2
time="2023-11-03T13:49:03Z" level=debug duration=2.322374ms execID=b85e2
time="2023-11-03T13:49:03Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=7c95c
Handling connection for 9081
time="2023-11-03T13:49:03Z" level=debug duration=62.271514ms execID=7c95c
time="2023-11-03T13:49:03Z" level=info msg="kubectl create ns argocd-e2e--test-hook-diff-dkytc" dir= execID=37c39
time="2023-11-03T13:49:03Z" level=debug msg="namespace/argocd-e2e--test-hook-diff-dkytc created\n" duration=163.748349ms execID=37c39
time="2023-11-03T13:49:03Z" level=info msg="kubectl label ns argocd-e2e--test-hook-diff-dkytc e2e.argoproj.io=true" dir= execID=1e6b6
time="2023-11-03T13:49:03Z" level=debug msg="namespace/argocd-e2e--test-hook-diff-dkytc labeled\n" duration=292.168457ms execID=1e6b6
time="2023-11-03T13:49:03Z" level=info msg="clean state" duration=2.427742199s id=TestHookDiff-dkytc name=TestHookDiff password=password username=admin
time="2023-11-03T13:49:04Z" level=info msg="../../dist/argocd app create test-hook-diff --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path hook --project default --dest-namespace argocd-e2e--test-hook-diff-dkytc --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTc0MiwibmJmIjoxNjk5MDE5MzQyLCJpYXQiOjE2OTkwMTkzNDIsImp0aSI6IjZiYWE0YzFlLWE0OTYtNGY5NS1hM2Q3LWYyYjcwMWE1YzliYSJ9.nYov7Apjv1awlgiKFTSW1UKVghSn9KePdCxkqKxv9F0 --insecure" dir= execID=e72e8
time="2023-11-03T13:49:05Z" level=debug msg="application 'test-hook-diff' created\n" duration=254.207548ms execID=e72e8
time="2023-11-03T13:49:05Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:49:05Z" level=info msg="../../dist/argocd app diff test-hook-diff --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTc0MiwibmJmIjoxNjk5MDE5MzQyLCJpYXQiOjE2OTkwMTkzNDIsImp0aSI6IjZiYWE0YzFlLWE0OTYtNGY5NS1hM2Q3LWYyYjcwMWE1YzliYSJ9.nYov7Apjv1awlgiKFTSW1UKVghSn9KePdCxkqKxv9F0 --insecure" dir= execID=c12cc
time="2023-11-03T13:49:05Z" level=debug msg="\n===== /Pod argocd-e2e--test-hook-diff-dkytc/pod ======\n" duration=186.86415ms execID=c12cc
time="2023-11-03T13:49:05Z" level=error msg="`../../dist/argocd app diff test-hook-diff --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTc0MiwibmJmIjoxNjk5MDE5MzQyLCJpYXQiOjE2OTkwMTkzNDIsImp0aSI6IjZiYWE0YzFlLWE0OTYtNGY5NS1hM2Q3LWYyYjcwMWE1YzliYSJ9.nYov7Apjv1awlgiKFTSW1UKVghSn9KePdCxkqKxv9F0 --insecure` failed exit status 1" execID=c12cc
    hook_test.go:61: 
        	Error Trace:	/argocd-e2e/argo-cd/test/e2e/hook_test.go:61
        	            				/argocd-e2e/argo-cd/test/e2e/fixture/app/consequences.go:47
        	            				/argocd-e2e/argo-cd/test/e2e/hook_test.go:58
        	Error:      	"\n===== /Pod argocd-e2e--test-hook-diff-dkytc/pod ======" does not contain "name: pod"
        	Test:       	TestHookDiff
--- FAIL: TestHookDiff (3.88s)
=== RUN   TestPreSyncHookFailure
time="2023-11-03T13:49:05Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=cb684
time="2023-11-03T13:49:05Z" level=debug msg="namespace \"argocd-e2e--test-hook-diff-dkytc\" deleted\n" duration=182.05157ms execID=cb684
time="2023-11-03T13:49:05Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=abdcb
time="2023-11-03T13:49:05Z" level=debug msg="No resources found\n" duration=446.319248ms execID=abdcb
time="2023-11-03T13:49:05Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=5aa1f
time="2023-11-03T13:49:06Z" level=debug msg="No resources found\n" duration=260.423445ms execID=5aa1f
time="2023-11-03T13:49:06Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:49:06Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTc0NiwibmJmIjoxNjk5MDE5MzQ2LCJpYXQiOjE2OTkwMTkzNDYsImp0aSI6ImEyMWUyODRiLTFhMTktNDY4MS05MjNmLTkzZmI0YmU2NzQ3MCJ9.34oq_cDT4Fjnhzx7xTd8xC4HhZ5YwrqlCpeoi-fPans --insecure" dir= execID=0564d
time="2023-11-03T13:49:06Z" level=debug duration=116.222339ms execID=0564d
time="2023-11-03T13:49:06Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=c50e5
time="2023-11-03T13:49:06Z" level=debug duration=2.027734ms execID=c50e5
time="2023-11-03T13:49:06Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=10e68
time="2023-11-03T13:49:06Z" level=debug duration=1.625293ms execID=10e68
time="2023-11-03T13:49:06Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=dce3c
time="2023-11-03T13:49:06Z" level=debug duration=1.445261ms execID=dce3c
time="2023-11-03T13:49:06Z" level=info msg="pkill -9 gpg-agent" dir= execID=c2e62
time="2023-11-03T13:49:06Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=0463f
time="2023-11-03T13:49:06Z" level=debug duration=9.895015ms execID=0463f
time="2023-11-03T13:49:06Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=1a80f
time="2023-11-03T13:49:07Z" level=debug duration=35.755749ms execID=1a80f
time="2023-11-03T13:49:07Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=2252e
time="2023-11-03T13:49:07Z" level=debug duration=1.485581ms execID=2252e
time="2023-11-03T13:49:07Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=a72f7
time="2023-11-03T13:49:07Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.680171ms execID=a72f7
time="2023-11-03T13:49:07Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=921b3
time="2023-11-03T13:49:07Z" level=debug duration=24.886459ms execID=921b3
time="2023-11-03T13:49:07Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=9e1fe
time="2023-11-03T13:49:07Z" level=debug duration=22.155286ms execID=9e1fe
time="2023-11-03T13:49:07Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=a4993
time="2023-11-03T13:49:07Z" level=debug duration=2.755386ms execID=a4993
time="2023-11-03T13:49:07Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=da3a9
Handling connection for 9081
time="2023-11-03T13:49:07Z" level=debug duration=64.914275ms execID=da3a9
time="2023-11-03T13:49:07Z" level=info msg="kubectl create ns argocd-e2e--test-pre-sync-hook-failure-hsiha" dir= execID=5990c
time="2023-11-03T13:49:07Z" level=debug msg="namespace/argocd-e2e--test-pre-sync-hook-failure-hsiha created\n" duration=167.020255ms execID=5990c
time="2023-11-03T13:49:07Z" level=info msg="kubectl label ns argocd-e2e--test-pre-sync-hook-failure-hsiha e2e.argoproj.io=true" dir= execID=1a51a
time="2023-11-03T13:49:07Z" level=debug msg="namespace/argocd-e2e--test-pre-sync-hook-failure-hsiha labeled\n" duration=245.321538ms execID=1a51a
time="2023-11-03T13:49:07Z" level=info msg="clean state" duration=2.327044361s id=TestPreSyncHookFailure-hsiha name=TestPreSyncHookFailure password=password username=admin
time="2023-11-03T13:49:08Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/metadata/annotations\", \"value\": {\"argocd.argoproj.io/hook\": \"PreSync\"}}]" path=hook/hook.yaml
time="2023-11-03T13:49:08Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:49:08Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/hook\":\"Sync\"},\"name\":\"hook\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:49:08Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:49:08Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=3924f
time="2023-11-03T13:49:08Z" level=debug msg="diff --git a/hook/hook.yaml b/hook/hook.yaml\nindex ca89c3d..3b3b2f2 100644\n--- a/hook/hook.yaml\n+++ b/hook/hook.yaml\n@@ -2,13 +2,13 @@ apiVersion: v1\n kind: Pod\n metadata:\n   annotations:\n-    argocd.argoproj.io/hook: Sync\n+    argocd.argoproj.io/hook: PreSync\n   name: hook\n spec:\n   containers:\n-    - command:\n-        - \"true\"\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      name: main\n-  restartPolicy: Never\n\\ No newline at end of file\n+  - command:\n+    - \"true\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n+  restartPolicy: Never\n" duration=3.559978ms execID=3924f
time="2023-11-03T13:49:08Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=0f1aa
time="2023-11-03T13:49:08Z" level=debug msg="[master 85e3ffc] patch\n 1 file changed, 7 insertions(+), 7 deletions(-)\n" duration=8.540992ms execID=0f1aa
time="2023-11-03T13:49:08Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=bba9d
Handling connection for 9081
time="2023-11-03T13:49:08Z" level=debug duration=39.894186ms execID=bba9d
time="2023-11-03T13:49:08Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/spec/containers/0/command\", \"value\": [\"false\"]}]" path=hook/hook.yaml
time="2023-11-03T13:49:08Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:49:08Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/hook\":\"PreSync\"},\"name\":\"hook\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:49:08Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:49:08Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=b3156
time="2023-11-03T13:49:08Z" level=debug msg="diff --git a/hook/hook.yaml b/hook/hook.yaml\nindex 3b3b2f2..bd36116 100644\n--- a/hook/hook.yaml\n+++ b/hook/hook.yaml\n@@ -7,7 +7,7 @@ metadata:\n spec:\n   containers:\n   - command:\n-    - \"true\"\n+    - \"false\"\n     image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n     imagePullPolicy: IfNotPresent\n     name: main\n" duration=3.444394ms execID=b3156
time="2023-11-03T13:49:08Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=b9fa0
time="2023-11-03T13:49:08Z" level=debug msg="[master 9892f58] patch\n 1 file changed, 1 insertion(+), 1 deletion(-)\n" duration=7.500437ms execID=b9fa0
time="2023-11-03T13:49:08Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=c86d8
Handling connection for 9081
time="2023-11-03T13:49:08Z" level=debug duration=38.904261ms execID=c86d8
time="2023-11-03T13:49:08Z" level=info msg="../../dist/argocd app create test-pre-sync-hook-failure --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path hook --project default --dest-namespace argocd-e2e--test-pre-sync-hook-failure-hsiha --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTc0NiwibmJmIjoxNjk5MDE5MzQ2LCJpYXQiOjE2OTkwMTkzNDYsImp0aSI6ImEyMWUyODRiLTFhMTktNDY4MS05MjNmLTkzZmI0YmU2NzQ3MCJ9.34oq_cDT4Fjnhzx7xTd8xC4HhZ5YwrqlCpeoi-fPans --insecure" dir= execID=9cb02
time="2023-11-03T13:49:08Z" level=debug msg="application 'test-pre-sync-hook-failure' created\n" duration=287.414708ms execID=9cb02
time="2023-11-03T13:49:08Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:49:08Z" level=info msg="../../dist/argocd app sync test-pre-sync-hook-failure --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTc0NiwibmJmIjoxNjk5MDE5MzQ2LCJpYXQiOjE2OTkwMTkzNDYsImp0aSI6ImEyMWUyODRiLTFhMTktNDY4MS05MjNmLTkzZmI0YmU2NzQ3MCJ9.34oq_cDT4Fjnhzx7xTd8xC4HhZ5YwrqlCpeoi-fPans --insecure" dir= execID=003fa
time="2023-11-03T13:49:14Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                    NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:49:09+00:00                Pod  argocd-e2e--test-pre-sync-hook-failure-hsiha                   pod  OutOfSync  Missing              \n2023-11-03T13:49:09+00:00                Pod  argocd-e2e--test-pre-sync-hook-failure-hsiha                  hook                                 \n2023-11-03T13:49:11+00:00                Pod  argocd-e2e--test-pre-sync-hook-failure-hsiha                  hook   Running   Synced     PreSync  pod/hook created\n2023-11-03T13:49:14+00:00                Pod  argocd-e2e--test-pre-sync-hook-failure-hsiha                  hook    Failed   Synced     PreSync  container \"main\" failed with exit code 1\n\nName:               argocd-e2e/test-pre-sync-hook-failure\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-pre-sync-hook-failure-hsiha\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-pre-sync-hook-failure\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               hook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (9892f58)\nHealth Status:      Missing\n\nOperation:          Sync\nSync Revision:      9892f5815ab4b362fae821607f5ccac78b10c740\nPhase:              Failed\nStart:              2023-11-03 13:49:09 +0000 UTC\nFinished:           2023-11-03 13:49:14 +0000 UTC\nDuration:           5s\nMessage:            one or more synchronization tasks completed unsuccessfully\n\nGROUP  KIND  NAMESPACE                                     NAME  STATUS     HEALTH   HOOK     MESSAGE\n       Pod   argocd-e2e--test-pre-sync-hook-failure-hsiha  hook  Failed              PreSync  container \"main\" failed with exit code 1\n       Pod   argocd-e2e--test-pre-sync-hook-failure-hsiha  pod   OutOfSync  Missing           \n" duration=5.680879739s execID=003fa
time="2023-11-03T13:49:14Z" level=error msg="`../../dist/argocd app sync test-pre-sync-hook-failure --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTc0NiwibmJmIjoxNjk5MDE5MzQ2LCJpYXQiOjE2OTkwMTkzNDYsImp0aSI6ImEyMWUyODRiLTFhMTktNDY4MS05MjNmLTkzZmI0YmU2NzQ3MCJ9.34oq_cDT4Fjnhzx7xTd8xC4HhZ5YwrqlCpeoi-fPans --insecure` failed exit status 1: time=\"2023-11-03T13:49:14Z\" level=fatal msg=\"Operation has completed with phase: Failed\"" execID=003fa
time="2023-11-03T13:49:14Z" level=info msg="expectation succeeded: error 'hook  Failed              PreSync'"
time="2023-11-03T13:49:14Z" level=info msg="expectation succeeded: error 'pod   OutOfSync  Missing'"
time="2023-11-03T13:49:14Z" level=info msg="expectation succeeded: operation phase should be Failed, is Failed"
time="2023-11-03T13:49:14Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:49:14Z" level=info msg="expectation succeeded: right number of results, want 1, got 1"
time="2023-11-03T13:49:14Z" level=info msg="expectation succeeded: resource 'Pod/pod' sync status should be OutOfSync, is OutOfSync"
time="2023-11-03T13:49:14Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestPreSyncHookFailure (9.42s)
=== RUN   TestSyncHookFailure
time="2023-11-03T13:49:14Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=bb8c4
time="2023-11-03T13:49:14Z" level=debug msg="namespace \"argocd-e2e--test-pre-sync-hook-failure-hsiha\" deleted\n" duration=279.665652ms execID=bb8c4
time="2023-11-03T13:49:14Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=597d2
time="2023-11-03T13:49:15Z" level=debug msg="No resources found\n" duration=471.387873ms execID=597d2
time="2023-11-03T13:49:15Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=635d6
time="2023-11-03T13:49:15Z" level=debug msg="No resources found\n" duration=375.008673ms execID=635d6
time="2023-11-03T13:49:16Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:49:16Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTc1NiwibmJmIjoxNjk5MDE5MzU2LCJpYXQiOjE2OTkwMTkzNTYsImp0aSI6IjhkNzU3ZDg3LTZmOTUtNDM3Ny04OWMyLWIyZjhmNGIxODg2YiJ9.NIKtDFOtpKJiWyVzf0j1wHRjEaIt483oj642NRTPHqo --insecure" dir= execID=b87fd
time="2023-11-03T13:49:16Z" level=debug duration=71.34544ms execID=b87fd
time="2023-11-03T13:49:16Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=3d529
time="2023-11-03T13:49:16Z" level=debug duration=2.113874ms execID=3d529
time="2023-11-03T13:49:16Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=cf8e0
time="2023-11-03T13:49:16Z" level=debug duration=1.466975ms execID=cf8e0
time="2023-11-03T13:49:16Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=16158
time="2023-11-03T13:49:16Z" level=debug duration=1.447382ms execID=16158
time="2023-11-03T13:49:16Z" level=info msg="pkill -9 gpg-agent" dir= execID=1276b
time="2023-11-03T13:49:16Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=2a0a9
time="2023-11-03T13:49:16Z" level=debug duration=10.017802ms execID=2a0a9
time="2023-11-03T13:49:16Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=6ba6b
time="2023-11-03T13:49:16Z" level=debug duration=33.883417ms execID=6ba6b
time="2023-11-03T13:49:16Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=e8dc6
time="2023-11-03T13:49:16Z" level=debug duration=1.704459ms execID=e8dc6
time="2023-11-03T13:49:16Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=9b5a3
time="2023-11-03T13:49:16Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.305623ms execID=9b5a3
time="2023-11-03T13:49:16Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=d5c57
time="2023-11-03T13:49:16Z" level=debug duration=33.289101ms execID=d5c57
time="2023-11-03T13:49:16Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=a3b7d
time="2023-11-03T13:49:16Z" level=debug duration=21.776912ms execID=a3b7d
time="2023-11-03T13:49:16Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=08ae6
time="2023-11-03T13:49:16Z" level=debug duration=2.10982ms execID=08ae6
time="2023-11-03T13:49:16Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=9701b
Handling connection for 9081
time="2023-11-03T13:49:17Z" level=debug duration=284.958449ms execID=9701b
time="2023-11-03T13:49:17Z" level=info msg="kubectl create ns argocd-e2e--test-sync-hook-failure-qigyi" dir= execID=ecbb2
time="2023-11-03T13:49:17Z" level=debug msg="namespace/argocd-e2e--test-sync-hook-failure-qigyi created\n" duration=96.850659ms execID=ecbb2
time="2023-11-03T13:49:17Z" level=info msg="kubectl label ns argocd-e2e--test-sync-hook-failure-qigyi e2e.argoproj.io=true" dir= execID=c4930
time="2023-11-03T13:49:17Z" level=debug msg="namespace/argocd-e2e--test-sync-hook-failure-qigyi labeled\n" duration=317.718265ms execID=c4930
time="2023-11-03T13:49:17Z" level=info msg="clean state" duration=2.951414817s id=TestSyncHookFailure-qigyi name=TestSyncHookFailure password=password username=admin
time="2023-11-03T13:49:18Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/spec/containers/0/command/0\", \"value\": \"false\"}]" path=hook/hook.yaml
time="2023-11-03T13:49:18Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:49:18Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/hook\":\"Sync\"},\"name\":\"hook\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:49:18Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:49:18Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=4187e
time="2023-11-03T13:49:18Z" level=debug msg="diff --git a/hook/hook.yaml b/hook/hook.yaml\nindex ca89c3d..6ccc881 100644\n--- a/hook/hook.yaml\n+++ b/hook/hook.yaml\n@@ -6,9 +6,9 @@ metadata:\n   name: hook\n spec:\n   containers:\n-    - command:\n-        - \"true\"\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      name: main\n-  restartPolicy: Never\n\\ No newline at end of file\n+  - command:\n+    - \"false\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n+  restartPolicy: Never\n" duration=5.1758ms execID=4187e
time="2023-11-03T13:49:18Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=3dd0c
time="2023-11-03T13:49:18Z" level=debug msg="[master aab8c25] patch\n 1 file changed, 6 insertions(+), 6 deletions(-)\n" duration=12.731844ms execID=3dd0c
time="2023-11-03T13:49:18Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=1ad01
Handling connection for 9081
time="2023-11-03T13:49:18Z" level=debug duration=42.148138ms execID=1ad01
time="2023-11-03T13:49:18Z" level=info msg="../../dist/argocd app create test-sync-hook-failure --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path hook --project default --dest-namespace argocd-e2e--test-sync-hook-failure-qigyi --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTc1NiwibmJmIjoxNjk5MDE5MzU2LCJpYXQiOjE2OTkwMTkzNTYsImp0aSI6IjhkNzU3ZDg3LTZmOTUtNDM3Ny04OWMyLWIyZjhmNGIxODg2YiJ9.NIKtDFOtpKJiWyVzf0j1wHRjEaIt483oj642NRTPHqo --insecure" dir= execID=413f5
time="2023-11-03T13:49:19Z" level=debug msg="application 'test-sync-hook-failure' created\n" duration=474.562462ms execID=413f5
time="2023-11-03T13:49:19Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:49:19Z" level=info msg="../../dist/argocd app sync test-sync-hook-failure --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTc1NiwibmJmIjoxNjk5MDE5MzU2LCJpYXQiOjE2OTkwMTkzNTYsImp0aSI6IjhkNzU3ZDg3LTZmOTUtNDM3Ny04OWMyLWIyZjhmNGIxODg2YiJ9.NIKtDFOtpKJiWyVzf0j1wHRjEaIt483oj642NRTPHqo --insecure" dir= execID=3a028
time="2023-11-03T13:49:25Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:49:19+00:00                Pod  argocd-e2e--test-sync-hook-failure-qigyi                   pod  OutOfSync  Missing              \n2023-11-03T13:49:20+00:00                Pod  argocd-e2e--test-sync-hook-failure-qigyi                  hook                                     \n2023-11-03T13:49:20+00:00                Pod  argocd-e2e--test-sync-hook-failure-qigyi                   pod    Synced  Progressing              \n2023-11-03T13:49:20+00:00                Pod  argocd-e2e--test-sync-hook-failure-qigyi                   pod    Synced  Progressing              pod/pod created\n2023-11-03T13:49:20+00:00                Pod  argocd-e2e--test-sync-hook-failure-qigyi                  hook   Running   Synced            Sync  pod/hook created\n2023-11-03T13:49:24+00:00                Pod  argocd-e2e--test-sync-hook-failure-qigyi                   pod    Synced  Healthy              pod/pod created\n2023-11-03T13:49:25+00:00                Pod  argocd-e2e--test-sync-hook-failure-qigyi                  hook    Failed   Synced        Sync  container \"main\" failed with exit code 1\n\nName:               argocd-e2e/test-sync-hook-failure\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-sync-hook-failure-qigyi\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-sync-hook-failure\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               hook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (aab8c25)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      aab8c2513441a9f6369885e4df637e5aea4404b3\nPhase:              Failed\nStart:              2023-11-03 13:49:19 +0000 UTC\nFinished:           2023-11-03 13:49:25 +0000 UTC\nDuration:           6s\nMessage:            one or more synchronization tasks completed unsuccessfully\n\nGROUP  KIND  NAMESPACE                                 NAME  STATUS  HEALTH   HOOK  MESSAGE\n       Pod   argocd-e2e--test-sync-hook-failure-qigyi  pod   Synced  Healthy        pod/pod created\n       Pod   argocd-e2e--test-sync-hook-failure-qigyi  hook  Failed           Sync  container \"main\" failed with exit code 1\n" duration=6.267882693s execID=3a028
time="2023-11-03T13:49:25Z" level=error msg="`../../dist/argocd app sync test-sync-hook-failure --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTc1NiwibmJmIjoxNjk5MDE5MzU2LCJpYXQiOjE2OTkwMTkzNTYsImp0aSI6IjhkNzU3ZDg3LTZmOTUtNDM3Ny04OWMyLWIyZjhmNGIxODg2YiJ9.NIKtDFOtpKJiWyVzf0j1wHRjEaIt483oj642NRTPHqo --insecure` failed exit status 1: time=\"2023-11-03T13:49:25Z\" level=fatal msg=\"Operation has completed with phase: Failed\"" execID=3a028
time="2023-11-03T13:49:25Z" level=info msg="expectation succeeded: operation phase should be Failed, is Failed"
time="2023-11-03T13:49:25Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:49:25Z" level=info msg="expectation succeeded: right number of results, want 2, got 2"
time="2023-11-03T13:49:25Z" level=info msg="expectation succeeded: resource 'Pod/pod' sync status should be Synced, is Synced"
time="2023-11-03T13:49:25Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestSyncHookFailure (10.78s)
=== RUN   TestSyncHookResourceFailure
time="2023-11-03T13:49:25Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=66ba0
time="2023-11-03T13:49:25Z" level=debug msg="namespace \"argocd-e2e--test-sync-hook-failure-qigyi\" deleted\n" duration=196.10956ms execID=66ba0
time="2023-11-03T13:49:25Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=53964
time="2023-11-03T13:49:26Z" level=debug msg="No resources found\n" duration=357.0386ms execID=53964
time="2023-11-03T13:49:26Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=7e276
time="2023-11-03T13:49:26Z" level=debug msg="No resources found\n" duration=234.312876ms execID=7e276
time="2023-11-03T13:49:27Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:49:27Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTc2NywibmJmIjoxNjk5MDE5MzY3LCJpYXQiOjE2OTkwMTkzNjcsImp0aSI6ImFhNzRmYTFkLTkwNGItNDg0MS04ZDc5LTQ5ZjVmY2MxZWJhNyJ9.LMp0tfj_PpREKLZTep9-rM77lw8X3dbgalu07qdCJXo --insecure" dir= execID=f767e
time="2023-11-03T13:49:27Z" level=debug duration=86.519949ms execID=f767e
time="2023-11-03T13:49:27Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=f8205
time="2023-11-03T13:49:27Z" level=debug duration=2.118556ms execID=f8205
time="2023-11-03T13:49:27Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=ac9ff
time="2023-11-03T13:49:27Z" level=debug duration=1.494846ms execID=ac9ff
time="2023-11-03T13:49:27Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=d259a
time="2023-11-03T13:49:27Z" level=debug duration=1.412881ms execID=d259a
time="2023-11-03T13:49:27Z" level=info msg="pkill -9 gpg-agent" dir= execID=453e5
time="2023-11-03T13:49:27Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=320f4
time="2023-11-03T13:49:27Z" level=debug duration=9.670749ms execID=320f4
time="2023-11-03T13:49:27Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=0b011
time="2023-11-03T13:49:27Z" level=debug duration=37.79667ms execID=0b011
time="2023-11-03T13:49:27Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=7b799
time="2023-11-03T13:49:27Z" level=debug duration=1.950912ms execID=7b799
time="2023-11-03T13:49:27Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=d9e42
time="2023-11-03T13:49:27Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.861298ms execID=d9e42
time="2023-11-03T13:49:27Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=0a2dc
time="2023-11-03T13:49:27Z" level=debug duration=26.292606ms execID=0a2dc
time="2023-11-03T13:49:27Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=a9e9a
time="2023-11-03T13:49:27Z" level=debug duration=20.452564ms execID=a9e9a
time="2023-11-03T13:49:27Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=8bb1f
time="2023-11-03T13:49:27Z" level=debug duration=1.952469ms execID=8bb1f
time="2023-11-03T13:49:27Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=ff0ed
Handling connection for 9081
time="2023-11-03T13:49:27Z" level=debug duration=73.633649ms execID=ff0ed
time="2023-11-03T13:49:27Z" level=info msg="kubectl create ns argocd-e2e--test-sync-hook-resource-failure-pxeex" dir= execID=ef911
time="2023-11-03T13:49:27Z" level=debug msg="namespace/argocd-e2e--test-sync-hook-resource-failure-pxeex created\n" duration=128.462117ms execID=ef911
time="2023-11-03T13:49:27Z" level=info msg="kubectl label ns argocd-e2e--test-sync-hook-resource-failure-pxeex e2e.argoproj.io=true" dir= execID=a2823
time="2023-11-03T13:49:27Z" level=debug msg="namespace/argocd-e2e--test-sync-hook-resource-failure-pxeex labeled\n" duration=263.35344ms execID=a2823
time="2023-11-03T13:49:27Z" level=info msg="clean state" duration=2.439377758s id=TestSyncHookResourceFailure-pxeex name=TestSyncHookResourceFailure password=password username=admin
time="2023-11-03T13:49:28Z" level=info msg="../../dist/argocd app create test-sync-hook-resource-failure --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path hook-and-deployment --project default --dest-namespace argocd-e2e--test-sync-hook-resource-failure-pxeex --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTc2NywibmJmIjoxNjk5MDE5MzY3LCJpYXQiOjE2OTkwMTkzNjcsImp0aSI6ImFhNzRmYTFkLTkwNGItNDg0MS04ZDc5LTQ5ZjVmY2MxZWJhNyJ9.LMp0tfj_PpREKLZTep9-rM77lw8X3dbgalu07qdCJXo --insecure" dir= execID=37786
time="2023-11-03T13:49:29Z" level=debug msg="application 'test-sync-hook-resource-failure' created\n" duration=232.117073ms execID=37786
time="2023-11-03T13:49:29Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:49:29Z" level=info msg="../../dist/argocd app sync test-sync-hook-resource-failure --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTc2NywibmJmIjoxNjk5MDE5MzY3LCJpYXQiOjE2OTkwMTkzNjcsImp0aSI6ImFhNzRmYTFkLTkwNGItNDg0MS04ZDc5LTQ5ZjVmY2MxZWJhNyJ9.LMp0tfj_PpREKLZTep9-rM77lw8X3dbgalu07qdCJXo --insecure" dir= execID=e8858
time="2023-11-03T13:49:35Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:49:29+00:00   apps  Deployment  argocd-e2e--test-sync-hook-resource-failure-pxeex         my-deployment  OutOfSync  Missing              \n2023-11-03T13:49:29+00:00   apps  Deployment  argocd-e2e--test-sync-hook-resource-failure-pxeex         my-deployment  OutOfSync  Missing              deployment.apps/my-deployment created\n2023-11-03T13:49:29+00:00  batch         Job  argocd-e2e--test-sync-hook-resource-failure-pxeex               my-hook   Running    Synced        Sync  job.batch/my-hook created\n2023-11-03T13:49:29+00:00   apps  Deployment  argocd-e2e--test-sync-hook-resource-failure-pxeex         my-deployment    Synced  Progressing              deployment.apps/my-deployment created\n2023-11-03T13:49:35+00:00  batch         Job  argocd-e2e--test-sync-hook-resource-failure-pxeex               my-hook  Succeeded   Synced        Sync  job.batch/my-hook created\n\nName:               argocd-e2e/test-sync-hook-resource-failure\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-sync-hook-resource-failure-pxeex\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-sync-hook-resource-failure\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               hook-and-deployment\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (06d3fc5)\nHealth Status:      Progressing\n\nOperation:          Sync\nSync Revision:      06d3fc52bc52b8ce9d03100e81476bf702e31772\nPhase:              Succeeded\nStart:              2023-11-03 13:49:29 +0000 UTC\nFinished:           2023-11-03 13:49:35 +0000 UTC\nDuration:           6s\nMessage:            successfully synced (no more tasks)\n\nGROUP  KIND        NAMESPACE                                          NAME           STATUS     HEALTH       HOOK  MESSAGE\napps   Deployment  argocd-e2e--test-sync-hook-resource-failure-pxeex  my-deployment  Synced     Progressing        deployment.apps/my-deployment created\nbatch  Job         argocd-e2e--test-sync-hook-resource-failure-pxeex  my-hook        Succeeded               Sync  job.batch/my-hook created\n" duration=6.384700597s execID=e8858
time="2023-11-03T13:49:35Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:49:35Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:49:35Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:49:35Z" level=info msg="expectation succeeded: health to should Progressing, is Progressing"
time="2023-11-03T13:49:35Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestSyncHookResourceFailure (10.07s)
=== RUN   TestPostSyncHookFailure
time="2023-11-03T13:49:35Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=444a5
time="2023-11-03T13:49:35Z" level=debug msg="namespace \"argocd-e2e--test-sync-hook-resource-failure-pxeex\" deleted\n" duration=220.363881ms execID=444a5
time="2023-11-03T13:49:35Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=16114
time="2023-11-03T13:49:36Z" level=debug msg="No resources found\n" duration=447.958366ms execID=16114
time="2023-11-03T13:49:36Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=056dd
time="2023-11-03T13:49:36Z" level=debug msg="No resources found\n" duration=232.480268ms execID=056dd
time="2023-11-03T13:49:37Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:49:37Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTc3NywibmJmIjoxNjk5MDE5Mzc3LCJpYXQiOjE2OTkwMTkzNzcsImp0aSI6IjFmYTNmMjQ1LWFlMmItNGUyNS1hNWU5LTkzNTEwMTVjYTI5MiJ9.yVULO4b34_m7nCC26avpuoSVc23vPxAYxVi_qdNrN-I --insecure" dir= execID=86ef6
time="2023-11-03T13:49:37Z" level=debug duration=74.569004ms execID=86ef6
time="2023-11-03T13:49:37Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=8696f
time="2023-11-03T13:49:37Z" level=debug duration=2.032713ms execID=8696f
time="2023-11-03T13:49:37Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=1a190
time="2023-11-03T13:49:37Z" level=debug duration=34.066225ms execID=1a190
time="2023-11-03T13:49:37Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=1e026
time="2023-11-03T13:49:37Z" level=debug duration=1.64473ms execID=1e026
time="2023-11-03T13:49:37Z" level=info msg="pkill -9 gpg-agent" dir= execID=9b12a
time="2023-11-03T13:49:37Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=dac88
time="2023-11-03T13:49:37Z" level=debug duration=10.094822ms execID=dac88
time="2023-11-03T13:49:37Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=c2a9a
time="2023-11-03T13:49:37Z" level=debug duration=36.882217ms execID=c2a9a
time="2023-11-03T13:49:37Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=06806
time="2023-11-03T13:49:37Z" level=debug duration=1.737693ms execID=06806
time="2023-11-03T13:49:37Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=87137
time="2023-11-03T13:49:37Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.645865ms execID=87137
time="2023-11-03T13:49:37Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=ff377
time="2023-11-03T13:49:37Z" level=debug duration=25.122297ms execID=ff377
time="2023-11-03T13:49:37Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=24947
time="2023-11-03T13:49:37Z" level=debug duration=32.566883ms execID=24947
time="2023-11-03T13:49:37Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=8f552
time="2023-11-03T13:49:37Z" level=debug duration=2.747132ms execID=8f552
time="2023-11-03T13:49:37Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=bedde
Handling connection for 9081
time="2023-11-03T13:49:37Z" level=debug duration=60.680719ms execID=bedde
time="2023-11-03T13:49:37Z" level=info msg="kubectl create ns argocd-e2e--test-post-sync-hook-failure-xuhzg" dir= execID=e5325
time="2023-11-03T13:49:37Z" level=debug msg="namespace/argocd-e2e--test-post-sync-hook-failure-xuhzg created\n" duration=154.246406ms execID=e5325
time="2023-11-03T13:49:37Z" level=info msg="kubectl label ns argocd-e2e--test-post-sync-hook-failure-xuhzg e2e.argoproj.io=true" dir= execID=2dd3e
time="2023-11-03T13:49:38Z" level=debug msg="namespace/argocd-e2e--test-post-sync-hook-failure-xuhzg labeled\n" duration=369.682917ms execID=2dd3e
time="2023-11-03T13:49:38Z" level=info msg="clean state" duration=2.741117085s id=TestPostSyncHookFailure-xuhzg name=TestPostSyncHookFailure password=password username=admin
time="2023-11-03T13:49:39Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/metadata/annotations\", \"value\": {\"argocd.argoproj.io/hook\": \"PostSync\"}}]" path=hook/hook.yaml
time="2023-11-03T13:49:39Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:49:39Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/hook\":\"Sync\"},\"name\":\"hook\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:49:39Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:49:39Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=3457b
time="2023-11-03T13:49:39Z" level=debug msg="diff --git a/hook/hook.yaml b/hook/hook.yaml\nindex ca89c3d..a76f181 100644\n--- a/hook/hook.yaml\n+++ b/hook/hook.yaml\n@@ -2,13 +2,13 @@ apiVersion: v1\n kind: Pod\n metadata:\n   annotations:\n-    argocd.argoproj.io/hook: Sync\n+    argocd.argoproj.io/hook: PostSync\n   name: hook\n spec:\n   containers:\n-    - command:\n-        - \"true\"\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      name: main\n-  restartPolicy: Never\n\\ No newline at end of file\n+  - command:\n+    - \"true\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n+  restartPolicy: Never\n" duration=5.149812ms execID=3457b
time="2023-11-03T13:49:39Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=4f199
time="2023-11-03T13:49:39Z" level=debug msg="[master dbe57ac] patch\n 1 file changed, 7 insertions(+), 7 deletions(-)\n" duration=14.489495ms execID=4f199
time="2023-11-03T13:49:39Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=01c45
Handling connection for 9081
time="2023-11-03T13:49:39Z" level=debug duration=53.489543ms execID=01c45
time="2023-11-03T13:49:39Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/spec/containers/0/command/0\", \"value\": \"false\"}]" path=hook/hook.yaml
time="2023-11-03T13:49:39Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:49:39Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/hook\":\"PostSync\"},\"name\":\"hook\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:49:39Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:49:39Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=b0d80
time="2023-11-03T13:49:39Z" level=debug msg="diff --git a/hook/hook.yaml b/hook/hook.yaml\nindex a76f181..61560d1 100644\n--- a/hook/hook.yaml\n+++ b/hook/hook.yaml\n@@ -7,7 +7,7 @@ metadata:\n spec:\n   containers:\n   - command:\n-    - \"true\"\n+    - \"false\"\n     image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n     imagePullPolicy: IfNotPresent\n     name: main\n" duration=3.024537ms execID=b0d80
time="2023-11-03T13:49:39Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=ef2e2
time="2023-11-03T13:49:39Z" level=debug msg="[master d721f44] patch\n 1 file changed, 1 insertion(+), 1 deletion(-)\n" duration=7.082529ms execID=ef2e2
time="2023-11-03T13:49:39Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=bf8a8
Handling connection for 9081
time="2023-11-03T13:49:39Z" level=debug duration=40.401527ms execID=bf8a8
time="2023-11-03T13:49:39Z" level=info msg="../../dist/argocd app create test-post-sync-hook-failure --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path hook --project default --dest-namespace argocd-e2e--test-post-sync-hook-failure-xuhzg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTc3NywibmJmIjoxNjk5MDE5Mzc3LCJpYXQiOjE2OTkwMTkzNzcsImp0aSI6IjFmYTNmMjQ1LWFlMmItNGUyNS1hNWU5LTkzNTEwMTVjYTI5MiJ9.yVULO4b34_m7nCC26avpuoSVc23vPxAYxVi_qdNrN-I --insecure" dir= execID=0ad17
time="2023-11-03T13:49:39Z" level=debug msg="application 'test-post-sync-hook-failure' created\n" duration=280.88714ms execID=0ad17
time="2023-11-03T13:49:39Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:49:39Z" level=info msg="../../dist/argocd app sync test-post-sync-hook-failure --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTc3NywibmJmIjoxNjk5MDE5Mzc3LCJpYXQiOjE2OTkwMTkzNzcsImp0aSI6IjFmYTNmMjQ1LWFlMmItNGUyNS1hNWU5LTkzNTEwMTVjYTI5MiJ9.yVULO4b34_m7nCC26avpuoSVc23vPxAYxVi_qdNrN-I --insecure" dir= execID=fe0a0
time="2023-11-03T13:49:49Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                     NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:49:39+00:00                Pod  argocd-e2e--test-post-sync-hook-failure-xuhzg                   pod  OutOfSync  Missing              \n2023-11-03T13:49:40+00:00                Pod  argocd-e2e--test-post-sync-hook-failure-xuhzg                   pod    Synced  Progressing              \n2023-11-03T13:49:42+00:00                Pod  argocd-e2e--test-post-sync-hook-failure-xuhzg                   pod    Synced  Progressing              pod/pod created\n2023-11-03T13:49:44+00:00                Pod  argocd-e2e--test-post-sync-hook-failure-xuhzg                   pod    Synced  Healthy              pod/pod created\n2023-11-03T13:49:44+00:00                Pod  argocd-e2e--test-post-sync-hook-failure-xuhzg                  hook   Running   Synced    PostSync  pod/hook created\n2023-11-03T13:49:49+00:00                Pod  argocd-e2e--test-post-sync-hook-failure-xuhzg                  hook    Failed   Synced    PostSync  container \"main\" failed with exit code 1\n\nName:               argocd-e2e/test-post-sync-hook-failure\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-post-sync-hook-failure-xuhzg\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-post-sync-hook-failure\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               hook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (d721f44)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      d721f4413826764028da78904bb7d7254a69de47\nPhase:              Failed\nStart:              2023-11-03 13:49:39 +0000 UTC\nFinished:           2023-11-03 13:49:49 +0000 UTC\nDuration:           10s\nMessage:            one or more synchronization tasks completed unsuccessfully\n\nGROUP  KIND  NAMESPACE                                      NAME  STATUS  HEALTH   HOOK      MESSAGE\n       Pod   argocd-e2e--test-post-sync-hook-failure-xuhzg  pod   Synced  Healthy            pod/pod created\n       Pod   argocd-e2e--test-post-sync-hook-failure-xuhzg  hook  Failed           PostSync  container \"main\" failed with exit code 1\n" duration=9.786038712s execID=fe0a0
time="2023-11-03T13:49:49Z" level=error msg="`../../dist/argocd app sync test-post-sync-hook-failure --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTc3NywibmJmIjoxNjk5MDE5Mzc3LCJpYXQiOjE2OTkwMTkzNzcsImp0aSI6IjFmYTNmMjQ1LWFlMmItNGUyNS1hNWU5LTkzNTEwMTVjYTI5MiJ9.yVULO4b34_m7nCC26avpuoSVc23vPxAYxVi_qdNrN-I --insecure` failed exit status 1: time=\"2023-11-03T13:49:49Z\" level=fatal msg=\"Operation has completed with phase: Failed\"" execID=fe0a0
time="2023-11-03T13:49:49Z" level=info msg="expectation succeeded: operation phase should be Failed, is Failed"
time="2023-11-03T13:49:49Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:49:49Z" level=info msg="expectation succeeded: right number of results, want 2, got 2"
time="2023-11-03T13:49:49Z" level=info msg="expectation succeeded: resource 'Pod/pod' sync status should be Synced, is Synced"
time="2023-11-03T13:49:49Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestPostSyncHookFailure (13.95s)
=== RUN   TestPostSyncHookPodFailure
time="2023-11-03T13:49:49Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=68afd
time="2023-11-03T13:49:49Z" level=debug msg="namespace \"argocd-e2e--test-post-sync-hook-failure-xuhzg\" deleted\n" duration=239.582379ms execID=68afd
time="2023-11-03T13:49:49Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=06a7a
time="2023-11-03T13:49:50Z" level=debug msg="No resources found\n" duration=491.035993ms execID=06a7a
time="2023-11-03T13:49:50Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=495bb
time="2023-11-03T13:49:50Z" level=debug msg="No resources found\n" duration=308.892843ms execID=495bb
time="2023-11-03T13:49:51Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:49:51Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTc5MSwibmJmIjoxNjk5MDE5MzkxLCJpYXQiOjE2OTkwMTkzOTEsImp0aSI6ImI1MGZkNDNlLTJhMzYtNDEzNS1iYmZkLTNiZmQ3NDk0NTFkZiJ9.zbO804mRUxcruz9wjZrx2VCR7k07lZLTSmy_5Yf3wzQ --insecure" dir= execID=c33dd
time="2023-11-03T13:49:51Z" level=debug duration=68.898306ms execID=c33dd
time="2023-11-03T13:49:51Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=76d61
time="2023-11-03T13:49:51Z" level=debug duration=1.999426ms execID=76d61
time="2023-11-03T13:49:51Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=73590
time="2023-11-03T13:49:51Z" level=debug duration=1.513894ms execID=73590
time="2023-11-03T13:49:51Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=bc4c4
time="2023-11-03T13:49:51Z" level=debug duration=1.361992ms execID=bc4c4
time="2023-11-03T13:49:51Z" level=info msg="pkill -9 gpg-agent" dir= execID=be039
time="2023-11-03T13:49:51Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=cd6eb
time="2023-11-03T13:49:51Z" level=debug duration=9.723063ms execID=cd6eb
time="2023-11-03T13:49:51Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=d2080
time="2023-11-03T13:49:51Z" level=debug duration=34.596638ms execID=d2080
time="2023-11-03T13:49:51Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=23832
time="2023-11-03T13:49:51Z" level=debug duration=1.992422ms execID=23832
time="2023-11-03T13:49:51Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=9fe64
time="2023-11-03T13:49:51Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.115016ms execID=9fe64
time="2023-11-03T13:49:51Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=9285c
time="2023-11-03T13:49:51Z" level=debug duration=26.338926ms execID=9285c
time="2023-11-03T13:49:51Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=8c235
time="2023-11-03T13:49:51Z" level=debug duration=22.635202ms execID=8c235
time="2023-11-03T13:49:51Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=a957d
time="2023-11-03T13:49:51Z" level=debug duration=2.822415ms execID=a957d
time="2023-11-03T13:49:51Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=faa6d
Handling connection for 9081
time="2023-11-03T13:49:51Z" level=debug duration=78.327987ms execID=faa6d
time="2023-11-03T13:49:51Z" level=info msg="kubectl create ns argocd-e2e--test-post-sync-hook-pod-failure-pdrra" dir= execID=b8ed1
time="2023-11-03T13:49:51Z" level=debug msg="namespace/argocd-e2e--test-post-sync-hook-pod-failure-pdrra created\n" duration=110.133499ms execID=b8ed1
time="2023-11-03T13:49:51Z" level=info msg="kubectl label ns argocd-e2e--test-post-sync-hook-pod-failure-pdrra e2e.argoproj.io=true" dir= execID=cb2c5
time="2023-11-03T13:49:51Z" level=debug msg="namespace/argocd-e2e--test-post-sync-hook-pod-failure-pdrra labeled\n" duration=273.10117ms execID=cb2c5
time="2023-11-03T13:49:51Z" level=info msg="clean state" duration=2.511637056s id=TestPostSyncHookPodFailure-pdrra name=TestPostSyncHookPodFailure password=password username=admin
time="2023-11-03T13:49:52Z" level=info msg=patching jsonPatch="[{\"op\": \"add\", \"path\": \"/metadata/annotations\", \"value\": {\"argocd.argoproj.io/hook\": \"PostSync\"}}]" path=hook/hook.yaml
time="2023-11-03T13:49:52Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:49:52Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/hook\":\"Sync\"},\"name\":\"hook\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:49:52Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:49:52Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=87b99
time="2023-11-03T13:49:52Z" level=debug msg="diff --git a/hook/hook.yaml b/hook/hook.yaml\nindex ca89c3d..a76f181 100644\n--- a/hook/hook.yaml\n+++ b/hook/hook.yaml\n@@ -2,13 +2,13 @@ apiVersion: v1\n kind: Pod\n metadata:\n   annotations:\n-    argocd.argoproj.io/hook: Sync\n+    argocd.argoproj.io/hook: PostSync\n   name: hook\n spec:\n   containers:\n-    - command:\n-        - \"true\"\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      name: main\n-  restartPolicy: Never\n\\ No newline at end of file\n+  - command:\n+    - \"true\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n+  restartPolicy: Never\n" duration=4.767369ms execID=87b99
time="2023-11-03T13:49:52Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=66e1c
time="2023-11-03T13:49:52Z" level=debug msg="[master 135a2d9] patch\n 1 file changed, 7 insertions(+), 7 deletions(-)\n" duration=10.654377ms execID=66e1c
time="2023-11-03T13:49:52Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=a58fc
Handling connection for 9081
time="2023-11-03T13:49:53Z" level=debug duration=36.930842ms execID=a58fc
time="2023-11-03T13:49:53Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/spec/containers/0/command/0\", \"value\": \"false\"}]" path=hook/pod.yaml
time="2023-11-03T13:49:53Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:49:53Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"name\":\"pod\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:49:53Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:49:53Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=a6ddc
time="2023-11-03T13:49:53Z" level=debug msg="diff --git a/hook/pod.yaml b/hook/pod.yaml\nindex 001aa52..36740dc 100644\n--- a/hook/pod.yaml\n+++ b/hook/pod.yaml\n@@ -4,9 +4,9 @@ metadata:\n   name: pod\n spec:\n   containers:\n-    - name: main\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      command:\n-        - \"true\"\n+  - command:\n+    - \"false\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n   restartPolicy: Never\n" duration=2.850402ms execID=a6ddc
time="2023-11-03T13:49:53Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=82f3d
time="2023-11-03T13:49:53Z" level=debug msg="[master 18d747d] patch\n 1 file changed, 5 insertions(+), 5 deletions(-)\n" duration=6.693914ms execID=82f3d
time="2023-11-03T13:49:53Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=5e533
Handling connection for 9081
time="2023-11-03T13:49:53Z" level=debug duration=43.818358ms execID=5e533
time="2023-11-03T13:49:53Z" level=info msg="../../dist/argocd app create test-post-sync-hook-pod-failure --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path hook --project default --dest-namespace argocd-e2e--test-post-sync-hook-pod-failure-pdrra --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTc5MSwibmJmIjoxNjk5MDE5MzkxLCJpYXQiOjE2OTkwMTkzOTEsImp0aSI6ImI1MGZkNDNlLTJhMzYtNDEzNS1iYmZkLTNiZmQ3NDk0NTFkZiJ9.zbO804mRUxcruz9wjZrx2VCR7k07lZLTSmy_5Yf3wzQ --insecure" dir= execID=6b3a9
time="2023-11-03T13:49:53Z" level=debug msg="application 'test-post-sync-hook-pod-failure' created\n" duration=253.8126ms execID=6b3a9
time="2023-11-03T13:49:53Z" level=info msg="../../dist/argocd app sync test-post-sync-hook-pod-failure --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTc5MSwibmJmIjoxNjk5MDE5MzkxLCJpYXQiOjE2OTkwMTkzOTEsImp0aSI6ImI1MGZkNDNlLTJhMzYtNDEzNS1iYmZkLTNiZmQ3NDk0NTFkZiJ9.zbO804mRUxcruz9wjZrx2VCR7k07lZLTSmy_5Yf3wzQ --insecure" dir= execID=95ecd
time="2023-11-03T13:49:59Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:49:53+00:00                Pod  argocd-e2e--test-post-sync-hook-pod-failure-pdrra                   pod  OutOfSync  Missing              \n2023-11-03T13:49:53+00:00                Pod  argocd-e2e--test-post-sync-hook-pod-failure-pdrra                   pod    Synced  Progressing              \n2023-11-03T13:49:55+00:00                Pod  argocd-e2e--test-post-sync-hook-pod-failure-pdrra                   pod    Synced  Progressing              pod/pod created\n2023-11-03T13:49:59+00:00                Pod  argocd-e2e--test-post-sync-hook-pod-failure-pdrra                   pod    Synced  Progressing              container \"main\" failed with exit code 1\n2023-11-03T13:49:59+00:00                Pod  argocd-e2e--test-post-sync-hook-pod-failure-pdrra                   pod    Synced  Degraded              container \"main\" failed with exit code 1\n\nName:               argocd-e2e/test-post-sync-hook-pod-failure\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-post-sync-hook-pod-failure-pdrra\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-post-sync-hook-pod-failure\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               hook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (18d747d)\nHealth Status:      Degraded\n\nOperation:          Sync\nSync Revision:      18d747d6e5e9e6e6b9ac7f5d1ebb0b3c845ca517\nPhase:              Failed\nStart:              2023-11-03 13:49:53 +0000 UTC\nFinished:           2023-11-03 13:49:59 +0000 UTC\nDuration:           6s\nMessage:            one or more synchronization tasks completed unsuccessfully\n\nGROUP  KIND  NAMESPACE                                          NAME  STATUS  HEALTH    HOOK  MESSAGE\n       Pod   argocd-e2e--test-post-sync-hook-pod-failure-pdrra  pod   Synced  Degraded        container \"main\" failed with exit code 1\n" duration=6.117716995s execID=95ecd
time="2023-11-03T13:49:59Z" level=error msg="`../../dist/argocd app sync test-post-sync-hook-pod-failure --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTc5MSwibmJmIjoxNjk5MDE5MzkxLCJpYXQiOjE2OTkwMTkzOTEsImp0aSI6ImI1MGZkNDNlLTJhMzYtNDEzNS1iYmZkLTNiZmQ3NDk0NTFkZiJ9.zbO804mRUxcruz9wjZrx2VCR7k07lZLTSmy_5Yf3wzQ --insecure` failed exit status 1: time=\"2023-11-03T13:49:59Z\" level=fatal msg=\"Operation has completed with phase: Failed\"" execID=95ecd
time="2023-11-03T13:49:59Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:49:59Z" level=info msg="expectation succeeded: resource 'Pod/pod' sync status should be Synced, is Synced"
time="2023-11-03T13:49:59Z" level=info msg="expectation succeeded: resource 'Pod/pod' health should be Degraded, is Degraded"
time="2023-11-03T13:49:59Z" level=info msg="expectation succeeded: right number of results, want 1, got 1"
time="2023-11-03T13:49:59Z" level=info msg="expectation succeeded: pod predicate did not match any pod"
time="2023-11-03T13:49:59Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestPostSyncHookPodFailure (10.02s)
=== RUN   TestSyncFailHookPodFailure
time="2023-11-03T13:49:59Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=1cb5f
time="2023-11-03T13:49:59Z" level=debug msg="namespace \"argocd-e2e--test-post-sync-hook-pod-failure-pdrra\" deleted\n" duration=149.108393ms execID=1cb5f
time="2023-11-03T13:49:59Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=9888b
time="2023-11-03T13:50:00Z" level=debug msg="No resources found\n" duration=427.83014ms execID=9888b
time="2023-11-03T13:50:00Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=4c9b2
time="2023-11-03T13:50:00Z" level=debug msg="No resources found\n" duration=168.073794ms execID=4c9b2
time="2023-11-03T13:50:00Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:50:00Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTgwMCwibmJmIjoxNjk5MDE5NDAwLCJpYXQiOjE2OTkwMTk0MDAsImp0aSI6ImUwNjVmYWI4LWQ5MWMtNGFhMi05YjQyLWUxNDJkYmIyNTJjMCJ9.b_XfBv5Mm-gP2Tiu08QVD0qhEooEGJ_M-U-TUQc21ag --insecure" dir= execID=7821d
time="2023-11-03T13:50:01Z" level=debug duration=102.981027ms execID=7821d
time="2023-11-03T13:50:01Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=744a9
time="2023-11-03T13:50:01Z" level=debug duration=2.040788ms execID=744a9
time="2023-11-03T13:50:01Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=7b19d
time="2023-11-03T13:50:01Z" level=debug duration=1.478271ms execID=7b19d
time="2023-11-03T13:50:01Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=94ea7
time="2023-11-03T13:50:01Z" level=debug duration=1.573305ms execID=94ea7
time="2023-11-03T13:50:01Z" level=info msg="pkill -9 gpg-agent" dir= execID=848d0
time="2023-11-03T13:50:01Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=939cd
time="2023-11-03T13:50:01Z" level=debug duration=9.680871ms execID=939cd
time="2023-11-03T13:50:01Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=d1f79
time="2023-11-03T13:50:01Z" level=debug duration=44.918093ms execID=d1f79
time="2023-11-03T13:50:01Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=5b5f0
time="2023-11-03T13:50:01Z" level=debug duration=2.068907ms execID=5b5f0
time="2023-11-03T13:50:01Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=f17df
time="2023-11-03T13:50:01Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.018858ms execID=f17df
time="2023-11-03T13:50:01Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=323bf
time="2023-11-03T13:50:01Z" level=debug duration=31.870087ms execID=323bf
time="2023-11-03T13:50:01Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=1c5bd
time="2023-11-03T13:50:01Z" level=debug duration=29.197334ms execID=1c5bd
time="2023-11-03T13:50:01Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=f9832
time="2023-11-03T13:50:01Z" level=debug duration=2.977412ms execID=f9832
time="2023-11-03T13:50:01Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=f7ded
Handling connection for 9081
time="2023-11-03T13:50:01Z" level=debug duration=78.667557ms execID=f7ded
time="2023-11-03T13:50:01Z" level=info msg="kubectl create ns argocd-e2e--test-sync-fail-hook-pod-failure-gxrtu" dir= execID=aefdb
time="2023-11-03T13:50:01Z" level=debug msg="namespace/argocd-e2e--test-sync-fail-hook-pod-failure-gxrtu created\n" duration=167.959895ms execID=aefdb
time="2023-11-03T13:50:01Z" level=info msg="kubectl label ns argocd-e2e--test-sync-fail-hook-pod-failure-gxrtu e2e.argoproj.io=true" dir= execID=6a9b3
time="2023-11-03T13:50:01Z" level=debug msg="namespace/argocd-e2e--test-sync-fail-hook-pod-failure-gxrtu labeled\n" duration=193.565404ms execID=6a9b3
time="2023-11-03T13:50:01Z" level=info msg="clean state" duration=2.1877242s id=TestSyncFailHookPodFailure-gxrtu name=TestSyncFailHookPodFailure password=password username=admin
time="2023-11-03T13:50:02Z" level=info msg=adding path=hook/sync-fail-hook.yaml
time="2023-11-03T13:50:02Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=1d565
time="2023-11-03T13:50:02Z" level=debug duration=4.687648ms execID=1d565
time="2023-11-03T13:50:02Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=08c27
time="2023-11-03T13:50:02Z" level=debug duration=7.361995ms execID=08c27
time="2023-11-03T13:50:02Z" level=info msg="git commit -am add file" dir=/tmp/argo-e2e/testdata.git execID=b0795
time="2023-11-03T13:50:02Z" level=debug msg="[master a4d249f] add file\n 1 file changed, 15 insertions(+)\n create mode 100644 hook/sync-fail-hook.yaml\n" duration=8.321326ms execID=b0795
time="2023-11-03T13:50:02Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=5cb61
Handling connection for 9081
time="2023-11-03T13:50:02Z" level=debug duration=47.58715ms execID=5cb61
time="2023-11-03T13:50:02Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/metadata/annotations\", \"value\": {\"argocd.argoproj.io/hook\": \"PostSync\"}}]" path=hook/hook.yaml
time="2023-11-03T13:50:02Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:50:02Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/hook\":\"Sync\"},\"name\":\"hook\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:50:02Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:50:02Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=c4c79
time="2023-11-03T13:50:02Z" level=debug msg="diff --git a/hook/hook.yaml b/hook/hook.yaml\nindex ca89c3d..a76f181 100644\n--- a/hook/hook.yaml\n+++ b/hook/hook.yaml\n@@ -2,13 +2,13 @@ apiVersion: v1\n kind: Pod\n metadata:\n   annotations:\n-    argocd.argoproj.io/hook: Sync\n+    argocd.argoproj.io/hook: PostSync\n   name: hook\n spec:\n   containers:\n-    - command:\n-        - \"true\"\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      name: main\n-  restartPolicy: Never\n\\ No newline at end of file\n+  - command:\n+    - \"true\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n+  restartPolicy: Never\n" duration=3.291356ms execID=c4c79
time="2023-11-03T13:50:02Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=0b229
time="2023-11-03T13:50:02Z" level=debug msg="[master 526733d] patch\n 1 file changed, 7 insertions(+), 7 deletions(-)\n" duration=7.894938ms execID=0b229
time="2023-11-03T13:50:02Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=ca8b9
Handling connection for 9081
time="2023-11-03T13:50:02Z" level=debug duration=58.270925ms execID=ca8b9
time="2023-11-03T13:50:02Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/spec/containers/0/command/0\", \"value\": \"false\"}]" path=hook/hook.yaml
time="2023-11-03T13:50:02Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:50:02Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/hook\":\"PostSync\"},\"name\":\"hook\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:50:02Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:50:02Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=9cb13
time="2023-11-03T13:50:02Z" level=debug msg="diff --git a/hook/hook.yaml b/hook/hook.yaml\nindex a76f181..61560d1 100644\n--- a/hook/hook.yaml\n+++ b/hook/hook.yaml\n@@ -7,7 +7,7 @@ metadata:\n spec:\n   containers:\n   - command:\n-    - \"true\"\n+    - \"false\"\n     image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n     imagePullPolicy: IfNotPresent\n     name: main\n" duration=3.475696ms execID=9cb13
time="2023-11-03T13:50:02Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=7e398
time="2023-11-03T13:50:02Z" level=debug msg="[master a35e2b3] patch\n 1 file changed, 1 insertion(+), 1 deletion(-)\n" duration=8.615888ms execID=7e398
time="2023-11-03T13:50:02Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=06a49
Handling connection for 9081
time="2023-11-03T13:50:02Z" level=debug duration=62.769588ms execID=06a49
time="2023-11-03T13:50:02Z" level=info msg="../../dist/argocd app create test-sync-fail-hook-pod-failure --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path hook --project default --dest-namespace argocd-e2e--test-sync-fail-hook-pod-failure-gxrtu --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTgwMCwibmJmIjoxNjk5MDE5NDAwLCJpYXQiOjE2OTkwMTk0MDAsImp0aSI6ImUwNjVmYWI4LWQ5MWMtNGFhMi05YjQyLWUxNDJkYmIyNTJjMCJ9.b_XfBv5Mm-gP2Tiu08QVD0qhEooEGJ_M-U-TUQc21ag --insecure" dir= execID=dc129
time="2023-11-03T13:50:03Z" level=debug msg="application 'test-sync-fail-hook-pod-failure' created\n" duration=277.473585ms execID=dc129
time="2023-11-03T13:50:03Z" level=info msg="../../dist/argocd app sync test-sync-fail-hook-pod-failure --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTgwMCwibmJmIjoxNjk5MDE5NDAwLCJpYXQiOjE2OTkwMTk0MDAsImp0aSI6ImUwNjVmYWI4LWQ5MWMtNGFhMi05YjQyLWUxNDJkYmIyNTJjMCJ9.b_XfBv5Mm-gP2Tiu08QVD0qhEooEGJ_M-U-TUQc21ag --insecure" dir= execID=a8216
time="2023-11-03T13:50:19Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                         NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:50:03+00:00                Pod  argocd-e2e--test-sync-fail-hook-pod-failure-gxrtu                   pod  OutOfSync  Missing              \n2023-11-03T13:50:03+00:00                Pod  argocd-e2e--test-sync-fail-hook-pod-failure-gxrtu                   pod    Synced  Progressing              \n2023-11-03T13:50:05+00:00                Pod  argocd-e2e--test-sync-fail-hook-pod-failure-gxrtu                   pod    Synced  Progressing              pod/pod created\n2023-11-03T13:50:09+00:00                Pod  argocd-e2e--test-sync-fail-hook-pod-failure-gxrtu                   pod    Synced  Healthy              pod/pod created\n2023-11-03T13:50:09+00:00                Pod  argocd-e2e--test-sync-fail-hook-pod-failure-gxrtu                  hook   Running   Synced    PostSync  pod/hook created\n2023-11-03T13:50:14+00:00                Pod  argocd-e2e--test-sync-fail-hook-pod-failure-gxrtu                  hook    Failed   Synced    PostSync  container \"main\" failed with exit code 1\n2023-11-03T13:50:14+00:00                Pod  argocd-e2e--test-sync-fail-hook-pod-failure-gxrtu        sync-fail-hook   Running   Synced    SyncFail  pod/sync-fail-hook created\n2023-11-03T13:50:19+00:00                Pod  argocd-e2e--test-sync-fail-hook-pod-failure-gxrtu        sync-fail-hook  Succeeded   Synced    SyncFail  pod/sync-fail-hook created\n\nName:               argocd-e2e/test-sync-fail-hook-pod-failure\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-sync-fail-hook-pod-failure-gxrtu\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-sync-fail-hook-pod-failure\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               hook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (a35e2b3)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      a35e2b312a4227bf9fa2de4f0a8ac340eed31e54\nPhase:              Failed\nStart:              2023-11-03 13:50:03 +0000 UTC\nFinished:           2023-11-03 13:50:19 +0000 UTC\nDuration:           16s\nMessage:            one or more synchronization tasks completed unsuccessfully\n\nGROUP  KIND  NAMESPACE                                          NAME            STATUS     HEALTH   HOOK      MESSAGE\n       Pod   argocd-e2e--test-sync-fail-hook-pod-failure-gxrtu  pod             Synced     Healthy            pod/pod created\n       Pod   argocd-e2e--test-sync-fail-hook-pod-failure-gxrtu  hook            Failed              PostSync  container \"main\" failed with exit code 1\n       Pod   argocd-e2e--test-sync-fail-hook-pod-failure-gxrtu  sync-fail-hook  Succeeded           SyncFail  pod/sync-fail-hook created\n" duration=16.412419609s execID=a8216
time="2023-11-03T13:50:19Z" level=error msg="`../../dist/argocd app sync test-sync-fail-hook-pod-failure --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTgwMCwibmJmIjoxNjk5MDE5NDAwLCJpYXQiOjE2OTkwMTk0MDAsImp0aSI6ImUwNjVmYWI4LWQ5MWMtNGFhMi05YjQyLWUxNDJkYmIyNTJjMCJ9.b_XfBv5Mm-gP2Tiu08QVD0qhEooEGJ_M-U-TUQc21ag --insecure` failed exit status 1: time=\"2023-11-03T13:50:19Z\" level=fatal msg=\"Operation has completed with phase: Failed\"" execID=a8216
time="2023-11-03T13:50:19Z" level=info msg="expectation succeeded: found resource result { v1 Pod argocd-e2e--test-sync-fail-hook-pod-failure-gxrtu sync-fail-hook  pod/sync-fail-hook created SyncFail Succeeded SyncFail}"
time="2023-11-03T13:50:19Z" level=info msg="expectation succeeded: operation phase should be Failed, is Failed"
time="2023-11-03T13:50:19Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestSyncFailHookPodFailure (20.15s)
=== RUN   TestSyncFailHookPodFailureSyncFailFailure
time="2023-11-03T13:50:19Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=e7c65
time="2023-11-03T13:50:19Z" level=debug msg="namespace \"argocd-e2e--test-sync-fail-hook-pod-failure-gxrtu\" deleted\n" duration=183.084854ms execID=e7c65
time="2023-11-03T13:50:19Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=f4404
time="2023-11-03T13:50:20Z" level=debug msg="No resources found\n" duration=499.996151ms execID=f4404
time="2023-11-03T13:50:20Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=f37b5
time="2023-11-03T13:50:20Z" level=debug msg="No resources found\n" duration=282.628195ms execID=f37b5
time="2023-11-03T13:50:21Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:50:21Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTgyMSwibmJmIjoxNjk5MDE5NDIxLCJpYXQiOjE2OTkwMTk0MjEsImp0aSI6ImNhYTgxYTE4LTk3YmUtNGNhNi04ZTMyLTU5NzVhZWE2YzY0ZCJ9.0x3XKCdCfHrd0TnaWPJzikmbB-aYQBuw891sj2CsWGQ --insecure" dir= execID=71e1c
time="2023-11-03T13:50:21Z" level=debug duration=144.790526ms execID=71e1c
time="2023-11-03T13:50:21Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=8256d
time="2023-11-03T13:50:21Z" level=debug duration=2.04747ms execID=8256d
time="2023-11-03T13:50:21Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=e2a38
time="2023-11-03T13:50:21Z" level=debug duration=1.472284ms execID=e2a38
time="2023-11-03T13:50:21Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=96917
time="2023-11-03T13:50:21Z" level=debug duration=1.430023ms execID=96917
time="2023-11-03T13:50:21Z" level=info msg="pkill -9 gpg-agent" dir= execID=07efa
time="2023-11-03T13:50:21Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=e3ded
time="2023-11-03T13:50:21Z" level=debug duration=10.157127ms execID=e3ded
time="2023-11-03T13:50:21Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=dbe1e
time="2023-11-03T13:50:21Z" level=debug duration=60.836884ms execID=dbe1e
time="2023-11-03T13:50:21Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=a810f
time="2023-11-03T13:50:21Z" level=debug duration=2.04716ms execID=a810f
time="2023-11-03T13:50:21Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=5f8ba
time="2023-11-03T13:50:21Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.922214ms execID=5f8ba
time="2023-11-03T13:50:21Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=11d01
time="2023-11-03T13:50:21Z" level=debug duration=27.495944ms execID=11d01
time="2023-11-03T13:50:21Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=cf595
time="2023-11-03T13:50:21Z" level=debug duration=20.195712ms execID=cf595
time="2023-11-03T13:50:21Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=e1d23
time="2023-11-03T13:50:21Z" level=debug duration=2.848619ms execID=e1d23
time="2023-11-03T13:50:21Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=4be1d
Handling connection for 9081
time="2023-11-03T13:50:22Z" level=debug duration=77.531425ms execID=4be1d
time="2023-11-03T13:50:22Z" level=info msg="kubectl create ns argocd-e2e--test-sync-fail-hook-pod-failure-sync-fail-fai-qrcvm" dir= execID=e4610
time="2023-11-03T13:50:22Z" level=debug msg="namespace/argocd-e2e--test-sync-fail-hook-pod-failure-sync-fail-fai-qrcvm created\n" duration=157.022864ms execID=e4610
time="2023-11-03T13:50:22Z" level=info msg="kubectl label ns argocd-e2e--test-sync-fail-hook-pod-failure-sync-fail-fai-qrcvm e2e.argoproj.io=true" dir= execID=351ff
time="2023-11-03T13:50:22Z" level=debug msg="namespace/argocd-e2e--test-sync-fail-hook-pod-failure-sync-fail-fai-qrcvm labeled\n" duration=299.028492ms execID=351ff
time="2023-11-03T13:50:22Z" level=info msg="clean state" duration=2.91088481s id=TestSyncFailHookPodFailureSyncFailFailure-qrcvm name=TestSyncFailHookPodFailureSyncFailFailure password=password username=admin
time="2023-11-03T13:50:23Z" level=info msg=adding path=hook/successful-sync-fail-hook.yaml
time="2023-11-03T13:50:23Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=0a3f2
time="2023-11-03T13:50:23Z" level=debug duration=4.762129ms execID=0a3f2
time="2023-11-03T13:50:23Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=9112a
time="2023-11-03T13:50:23Z" level=debug duration=7.309512ms execID=9112a
time="2023-11-03T13:50:23Z" level=info msg="git commit -am add file" dir=/tmp/argo-e2e/testdata.git execID=30159
time="2023-11-03T13:50:23Z" level=debug msg="[master 19f8b00] add file\n 1 file changed, 15 insertions(+)\n create mode 100644 hook/successful-sync-fail-hook.yaml\n" duration=9.223548ms execID=30159
time="2023-11-03T13:50:23Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=64958
Handling connection for 9081
time="2023-11-03T13:50:23Z" level=debug duration=39.164083ms execID=64958
time="2023-11-03T13:50:23Z" level=info msg=adding path=hook/failed-sync-fail-hook.yaml
time="2023-11-03T13:50:23Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=743d6
time="2023-11-03T13:50:23Z" level=debug duration=3.016255ms execID=743d6
time="2023-11-03T13:50:23Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=e8b2e
time="2023-11-03T13:50:23Z" level=debug duration=3.78269ms execID=e8b2e
time="2023-11-03T13:50:23Z" level=info msg="git commit -am add file" dir=/tmp/argo-e2e/testdata.git execID=8c4ae
time="2023-11-03T13:50:23Z" level=debug msg="[master d935720] add file\n 1 file changed, 15 insertions(+)\n create mode 100644 hook/failed-sync-fail-hook.yaml\n" duration=7.052868ms execID=8c4ae
time="2023-11-03T13:50:23Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=a9272
Handling connection for 9081
time="2023-11-03T13:50:23Z" level=debug duration=40.836716ms execID=a9272
time="2023-11-03T13:50:23Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/metadata/annotations\", \"value\": {\"argocd.argoproj.io/hook\": \"PostSync\"}}]" path=hook/hook.yaml
time="2023-11-03T13:50:23Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:50:23Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/hook\":\"Sync\"},\"name\":\"hook\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:50:23Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:50:23Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=8618a
time="2023-11-03T13:50:23Z" level=debug msg="diff --git a/hook/hook.yaml b/hook/hook.yaml\nindex ca89c3d..a76f181 100644\n--- a/hook/hook.yaml\n+++ b/hook/hook.yaml\n@@ -2,13 +2,13 @@ apiVersion: v1\n kind: Pod\n metadata:\n   annotations:\n-    argocd.argoproj.io/hook: Sync\n+    argocd.argoproj.io/hook: PostSync\n   name: hook\n spec:\n   containers:\n-    - command:\n-        - \"true\"\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      name: main\n-  restartPolicy: Never\n\\ No newline at end of file\n+  - command:\n+    - \"true\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n+  restartPolicy: Never\n" duration=3.473399ms execID=8618a
time="2023-11-03T13:50:23Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=c1365
time="2023-11-03T13:50:23Z" level=debug msg="[master d73ce99] patch\n 1 file changed, 7 insertions(+), 7 deletions(-)\n" duration=7.95102ms execID=c1365
time="2023-11-03T13:50:23Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=5675e
Handling connection for 9081
time="2023-11-03T13:50:23Z" level=debug duration=39.084157ms execID=5675e
time="2023-11-03T13:50:23Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/spec/containers/0/command/0\", \"value\": \"false\"}]" path=hook/hook.yaml
time="2023-11-03T13:50:23Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:50:23Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/hook\":\"PostSync\"},\"name\":\"hook\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:50:23Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:50:23Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=c17b4
time="2023-11-03T13:50:23Z" level=debug msg="diff --git a/hook/hook.yaml b/hook/hook.yaml\nindex a76f181..61560d1 100644\n--- a/hook/hook.yaml\n+++ b/hook/hook.yaml\n@@ -7,7 +7,7 @@ metadata:\n spec:\n   containers:\n   - command:\n-    - \"true\"\n+    - \"false\"\n     image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n     imagePullPolicy: IfNotPresent\n     name: main\n" duration=2.886789ms execID=c17b4
time="2023-11-03T13:50:23Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=6967a
time="2023-11-03T13:50:23Z" level=debug msg="[master 0b571fc] patch\n 1 file changed, 1 insertion(+), 1 deletion(-)\n" duration=7.236087ms execID=6967a
time="2023-11-03T13:50:23Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=a12f9
Handling connection for 9081
time="2023-11-03T13:50:23Z" level=debug duration=40.170911ms execID=a12f9
time="2023-11-03T13:50:23Z" level=info msg="../../dist/argocd app create test-sync-fail-hook-pod-failure-sync-fail-failure --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path hook --project default --dest-namespace argocd-e2e--test-sync-fail-hook-pod-failure-sync-fail-fai-qrcvm --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTgyMSwibmJmIjoxNjk5MDE5NDIxLCJpYXQiOjE2OTkwMTk0MjEsImp0aSI6ImNhYTgxYTE4LTk3YmUtNGNhNi04ZTMyLTU5NzVhZWE2YzY0ZCJ9.0x3XKCdCfHrd0TnaWPJzikmbB-aYQBuw891sj2CsWGQ --insecure" dir= execID=8a0e2
time="2023-11-03T13:50:23Z" level=debug msg="application 'test-sync-fail-hook-pod-failure-sync-fail-failure' created\n" duration=246.091143ms execID=8a0e2
time="2023-11-03T13:50:23Z" level=info msg="../../dist/argocd app sync test-sync-fail-hook-pod-failure-sync-fail-failure --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTgyMSwibmJmIjoxNjk5MDE5NDIxLCJpYXQiOjE2OTkwMTk0MjEsImp0aSI6ImNhYTgxYTE4LTk3YmUtNGNhNi04ZTMyLTU5NzVhZWE2YzY0ZCJ9.0x3XKCdCfHrd0TnaWPJzikmbB-aYQBuw891sj2CsWGQ --insecure" dir= execID=b87a7
time="2023-11-03T13:50:39Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:50:24+00:00                Pod  argocd-e2e--test-sync-fail-hook-pod-failure-sync-fail-fai-qrcvm                   pod  OutOfSync  Missing              \n2023-11-03T13:50:24+00:00                Pod  argocd-e2e--test-sync-fail-hook-pod-failure-sync-fail-fai-qrcvm                   pod    Synced  Progressing              \n2023-11-03T13:50:26+00:00                Pod  argocd-e2e--test-sync-fail-hook-pod-failure-sync-fail-fai-qrcvm                   pod    Synced  Progressing              pod/pod created\n2023-11-03T13:50:29+00:00                Pod  argocd-e2e--test-sync-fail-hook-pod-failure-sync-fail-fai-qrcvm                   pod    Synced  Healthy              pod/pod created\n2023-11-03T13:50:29+00:00                Pod  argocd-e2e--test-sync-fail-hook-pod-failure-sync-fail-fai-qrcvm                  hook   Running   Synced    PostSync  pod/hook created\n2023-11-03T13:50:34+00:00                Pod  argocd-e2e--test-sync-fail-hook-pod-failure-sync-fail-fai-qrcvm                  hook         Failed   Synced    PostSync  container \"main\" failed with exit code 1\n2023-11-03T13:50:34+00:00                Pod  argocd-e2e--test-sync-fail-hook-pod-failure-sync-fail-fai-qrcvm  successful-sync-fail-hook   Running   Synced    SyncFail  pod/successful-sync-fail-hook created\n2023-11-03T13:50:34+00:00                Pod  argocd-e2e--test-sync-fail-hook-pod-failure-sync-fail-fai-qrcvm  failed-sync-fail-hook       Running   Synced    SyncFail  pod/failed-sync-fail-hook created\n2023-11-03T13:50:39+00:00                Pod  argocd-e2e--test-sync-fail-hook-pod-failure-sync-fail-fai-qrcvm  failed-sync-fail-hook        Failed    Synced    SyncFail  container \"main\" failed with exit code 1\n2023-11-03T13:50:39+00:00                Pod  argocd-e2e--test-sync-fail-hook-pod-failure-sync-fail-fai-qrcvm  successful-sync-fail-hook  Succeeded   Synced    SyncFail  pod/successful-sync-fail-hook created\n\nName:               argocd-e2e/test-sync-fail-hook-pod-failure-sync-fail-failure\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-sync-fail-hook-pod-failure-sync-fail-fai-qrcvm\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-sync-fail-hook-pod-failure-sync-fail-failure\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               hook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (0b571fc)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      0b571fc0ef5abb60ad00bdbc550be98f194fe03d\nPhase:              Failed\nStart:              2023-11-03 13:50:24 +0000 UTC\nFinished:           2023-11-03 13:50:39 +0000 UTC\nDuration:           15s\nMessage:            one or more synchronization tasks completed unsuccessfully\n\nGROUP  KIND  NAMESPACE                                                        NAME                       STATUS     HEALTH   HOOK      MESSAGE\n       Pod   argocd-e2e--test-sync-fail-hook-pod-failure-sync-fail-fai-qrcvm  pod                        Synced     Healthy            pod/pod created\n       Pod   argocd-e2e--test-sync-fail-hook-pod-failure-sync-fail-fai-qrcvm  hook                       Failed              PostSync  container \"main\" failed with exit code 1\n       Pod   argocd-e2e--test-sync-fail-hook-pod-failure-sync-fail-fai-qrcvm  successful-sync-fail-hook  Succeeded           SyncFail  pod/successful-sync-fail-hook created\n       Pod   argocd-e2e--test-sync-fail-hook-pod-failure-sync-fail-fai-qrcvm  failed-sync-fail-hook      Failed              SyncFail  container \"main\" failed with exit code 1\n" duration=15.617919839s execID=b87a7
time="2023-11-03T13:50:39Z" level=error msg="`../../dist/argocd app sync test-sync-fail-hook-pod-failure-sync-fail-failure --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTgyMSwibmJmIjoxNjk5MDE5NDIxLCJpYXQiOjE2OTkwMTk0MjEsImp0aSI6ImNhYTgxYTE4LTk3YmUtNGNhNi04ZTMyLTU5NzVhZWE2YzY0ZCJ9.0x3XKCdCfHrd0TnaWPJzikmbB-aYQBuw891sj2CsWGQ --insecure` failed exit status 1: time=\"2023-11-03T13:50:39Z\" level=fatal msg=\"Operation has completed with phase: Failed\"" execID=b87a7
time="2023-11-03T13:50:39Z" level=info msg="expectation succeeded: found resource result { v1 Pod argocd-e2e--test-sync-fail-hook-pod-failure-sync-fail-fai-qrcvm successful-sync-fail-hook  pod/successful-sync-fail-hook created SyncFail Succeeded SyncFail}"
time="2023-11-03T13:50:39Z" level=info msg="expectation succeeded: found resource result { v1 Pod argocd-e2e--test-sync-fail-hook-pod-failure-sync-fail-fai-qrcvm failed-sync-fail-hook  container \"main\" failed with exit code 1 SyncFail Failed SyncFail}"
time="2023-11-03T13:50:39Z" level=info msg="expectation succeeded: operation phase should be Failed, is Failed"
time="2023-11-03T13:50:39Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestSyncFailHookPodFailureSyncFailFailure (20.01s)
=== RUN   TestHookDeletePolicyHookSucceededHookExit0
time="2023-11-03T13:50:39Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=531d5
time="2023-11-03T13:50:39Z" level=debug msg="namespace \"argocd-e2e--test-sync-fail-hook-pod-failure-sync-fail-fai-qrcvm\" deleted\n" duration=176.424487ms execID=531d5
time="2023-11-03T13:50:39Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=86ac0
time="2023-11-03T13:50:40Z" level=debug msg="No resources found\n" duration=495.409488ms execID=86ac0
time="2023-11-03T13:50:40Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=d227c
time="2023-11-03T13:50:40Z" level=debug msg="No resources found\n" duration=300.750464ms execID=d227c
time="2023-11-03T13:50:41Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:50:41Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTg0MSwibmJmIjoxNjk5MDE5NDQxLCJpYXQiOjE2OTkwMTk0NDEsImp0aSI6ImI5MzBmNjE2LWVkZmYtNGMxOC04YjQzLWZiZDJmMjg5ODQzMyJ9.kt7RK3t4JJnzHmdobT5PwmITUcmsxxXrpFQyUp4INnc --insecure" dir= execID=c8297
time="2023-11-03T13:50:41Z" level=debug duration=93.174271ms execID=c8297
time="2023-11-03T13:50:41Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=eaeb8
time="2023-11-03T13:50:41Z" level=debug duration=2.212664ms execID=eaeb8
time="2023-11-03T13:50:41Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=c63b4
time="2023-11-03T13:50:41Z" level=debug duration=1.784708ms execID=c63b4
time="2023-11-03T13:50:41Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=1d513
time="2023-11-03T13:50:41Z" level=debug duration=1.554242ms execID=1d513
time="2023-11-03T13:50:41Z" level=info msg="pkill -9 gpg-agent" dir= execID=24be3
time="2023-11-03T13:50:41Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=dd2e4
time="2023-11-03T13:50:41Z" level=debug duration=10.419815ms execID=dd2e4
time="2023-11-03T13:50:41Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=ae4e5
time="2023-11-03T13:50:41Z" level=debug duration=81.537627ms execID=ae4e5
time="2023-11-03T13:50:41Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=3fa45
time="2023-11-03T13:50:41Z" level=debug duration=2.19825ms execID=3fa45
time="2023-11-03T13:50:41Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=169b0
time="2023-11-03T13:50:41Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.184984ms execID=169b0
time="2023-11-03T13:50:41Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=1b79a
time="2023-11-03T13:50:41Z" level=debug duration=25.521224ms execID=1b79a
time="2023-11-03T13:50:41Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=4c67c
time="2023-11-03T13:50:41Z" level=debug duration=20.228222ms execID=4c67c
time="2023-11-03T13:50:41Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=3e23b
time="2023-11-03T13:50:41Z" level=debug duration=2.122141ms execID=3e23b
time="2023-11-03T13:50:41Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=4d610
Handling connection for 9081
time="2023-11-03T13:50:41Z" level=debug duration=70.725024ms execID=4d610
time="2023-11-03T13:50:41Z" level=info msg="kubectl create ns argocd-e2e--test-hook-delete-policy-hook-succeeded-hook-e-crrsv" dir= execID=a3b54
time="2023-11-03T13:50:41Z" level=debug msg="namespace/argocd-e2e--test-hook-delete-policy-hook-succeeded-hook-e-crrsv created\n" duration=142.763081ms execID=a3b54
time="2023-11-03T13:50:41Z" level=info msg="kubectl label ns argocd-e2e--test-hook-delete-policy-hook-succeeded-hook-e-crrsv e2e.argoproj.io=true" dir= execID=6cbce
time="2023-11-03T13:50:42Z" level=debug msg="namespace/argocd-e2e--test-hook-delete-policy-hook-succeeded-hook-e-crrsv labeled\n" duration=300.36373ms execID=6cbce
time="2023-11-03T13:50:42Z" level=info msg="clean state" duration=2.499278116s id=TestHookDeletePolicyHookSucceededHookExit0-crrsv name=TestHookDeletePolicyHookSucceededHookExit0 password=password username=admin
time="2023-11-03T13:50:43Z" level=info msg=patching jsonPatch="[{\"op\": \"add\", \"path\": \"/metadata/annotations/argocd.argoproj.io~1hook-delete-policy\", \"value\": \"HookSucceeded\"}]" path=hook/hook.yaml
time="2023-11-03T13:50:43Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:50:43Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/hook\":\"Sync\"},\"name\":\"hook\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:50:43Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:50:43Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=72df6
time="2023-11-03T13:50:43Z" level=debug msg="diff --git a/hook/hook.yaml b/hook/hook.yaml\nindex ca89c3d..4901b02 100644\n--- a/hook/hook.yaml\n+++ b/hook/hook.yaml\n@@ -3,12 +3,13 @@ kind: Pod\n metadata:\n   annotations:\n     argocd.argoproj.io/hook: Sync\n+    argocd.argoproj.io/hook-delete-policy: HookSucceeded\n   name: hook\n spec:\n   containers:\n-    - command:\n-        - \"true\"\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      name: main\n-  restartPolicy: Never\n\\ No newline at end of file\n+  - command:\n+    - \"true\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n+  restartPolicy: Never\n" duration=5.196854ms execID=72df6
time="2023-11-03T13:50:43Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=f6dc4
time="2023-11-03T13:50:43Z" level=debug msg="[master 07a39ec] patch\n 1 file changed, 7 insertions(+), 6 deletions(-)\n" duration=14.079841ms execID=f6dc4
time="2023-11-03T13:50:43Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=1bf68
Handling connection for 9081
time="2023-11-03T13:50:43Z" level=debug duration=44.687899ms execID=1bf68
time="2023-11-03T13:50:43Z" level=info msg="../../dist/argocd app create test-hook-delete-policy-hook-succeeded-hook-exit0 --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path hook --project default --dest-namespace argocd-e2e--test-hook-delete-policy-hook-succeeded-hook-e-crrsv --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTg0MSwibmJmIjoxNjk5MDE5NDQxLCJpYXQiOjE2OTkwMTk0NDEsImp0aSI6ImI5MzBmNjE2LWVkZmYtNGMxOC04YjQzLWZiZDJmMjg5ODQzMyJ9.kt7RK3t4JJnzHmdobT5PwmITUcmsxxXrpFQyUp4INnc --insecure" dir= execID=9246b
time="2023-11-03T13:50:43Z" level=debug msg="application 'test-hook-delete-policy-hook-succeeded-hook-exit0' created\n" duration=274.664626ms execID=9246b
time="2023-11-03T13:50:43Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:50:43Z" level=info msg="../../dist/argocd app sync test-hook-delete-policy-hook-succeeded-hook-exit0 --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTg0MSwibmJmIjoxNjk5MDE5NDQxLCJpYXQiOjE2OTkwMTk0NDEsImp0aSI6ImI5MzBmNjE2LWVkZmYtNGMxOC04YjQzLWZiZDJmMjg5ODQzMyJ9.kt7RK3t4JJnzHmdobT5PwmITUcmsxxXrpFQyUp4INnc --insecure" dir= execID=c7fc5
time="2023-11-03T13:50:48Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                                       NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:50:43+00:00                Pod  argocd-e2e--test-hook-delete-policy-hook-succeeded-hook-e-crrsv                   pod  OutOfSync  Missing              \n2023-11-03T13:50:44+00:00                Pod  argocd-e2e--test-hook-delete-policy-hook-succeeded-hook-e-crrsv                  hook   Running    Synced        Sync  pod/hook created\n2023-11-03T13:50:44+00:00                Pod  argocd-e2e--test-hook-delete-policy-hook-succeeded-hook-e-crrsv                   pod  OutOfSync  Missing              pod/pod created\n2023-11-03T13:50:44+00:00                Pod  argocd-e2e--test-hook-delete-policy-hook-succeeded-hook-e-crrsv                   pod    Synced  Progressing              pod/pod created\n2023-11-03T13:50:48+00:00                Pod  argocd-e2e--test-hook-delete-policy-hook-succeeded-hook-e-crrsv                   pod    Synced  Healthy              pod/pod created\n2023-11-03T13:50:48+00:00                Pod  argocd-e2e--test-hook-delete-policy-hook-succeeded-hook-e-crrsv                  hook  Succeeded   Synced        Sync  pod/hook created\n\nName:               argocd-e2e/test-hook-delete-policy-hook-succeeded-hook-exit0\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-hook-delete-policy-hook-succeeded-hook-e-crrsv\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-hook-delete-policy-hook-succeeded-hook-exit0\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               hook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (07a39ec)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      07a39ec12fdbe4cb8e129daaf4194b8392884f7f\nPhase:              Succeeded\nStart:              2023-11-03 13:50:43 +0000 UTC\nFinished:           2023-11-03 13:50:48 +0000 UTC\nDuration:           5s\nMessage:            successfully synced (no more tasks)\n\nGROUP  KIND  NAMESPACE                                                        NAME  STATUS     HEALTH   HOOK  MESSAGE\n       Pod   argocd-e2e--test-hook-delete-policy-hook-succeeded-hook-e-crrsv  hook  Succeeded           Sync  pod/hook created\n       Pod   argocd-e2e--test-hook-delete-policy-hook-succeeded-hook-e-crrsv  pod   Synced     Healthy        pod/pod created\n" duration=5.147328208s execID=c7fc5
time="2023-11-03T13:50:48Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:50:48Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:50:48Z" level=info msg="expectation succeeded: pod predicate did not match any pod"
time="2023-11-03T13:50:48Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestHookDeletePolicyHookSucceededHookExit0 (9.00s)
=== RUN   TestHookDeletePolicyHookSucceededHookExit1
time="2023-11-03T13:50:48Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=55173
time="2023-11-03T13:50:48Z" level=debug msg="namespace \"argocd-e2e--test-hook-delete-policy-hook-succeeded-hook-e-crrsv\" deleted\n" duration=168.020336ms execID=55173
time="2023-11-03T13:50:48Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=d9f50
time="2023-11-03T13:50:49Z" level=debug msg="No resources found\n" duration=439.587729ms execID=d9f50
time="2023-11-03T13:50:49Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=0f80c
time="2023-11-03T13:50:49Z" level=debug msg="No resources found\n" duration=242.198682ms execID=0f80c
time="2023-11-03T13:50:50Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:50:50Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTg1MCwibmJmIjoxNjk5MDE5NDUwLCJpYXQiOjE2OTkwMTk0NTAsImp0aSI6IjU5MWM5NjViLTgwZGItNGQwNC1hNzIwLTEwMTQxOWNlMWY1YiJ9.KGANKuN4a5gJSnDqfQfYOA8IF1Mov2hpXru69kVjGhM --insecure" dir= execID=f3234
time="2023-11-03T13:50:50Z" level=debug duration=126.455395ms execID=f3234
time="2023-11-03T13:50:50Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=bc78a
time="2023-11-03T13:50:50Z" level=debug duration=1.923603ms execID=bc78a
time="2023-11-03T13:50:50Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=a788a
time="2023-11-03T13:50:50Z" level=debug duration=1.579703ms execID=a788a
time="2023-11-03T13:50:50Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=1757a
time="2023-11-03T13:50:50Z" level=debug duration=1.441475ms execID=1757a
time="2023-11-03T13:50:50Z" level=info msg="pkill -9 gpg-agent" dir= execID=52a4d
time="2023-11-03T13:50:50Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=275da
time="2023-11-03T13:50:50Z" level=debug duration=9.555543ms execID=275da
time="2023-11-03T13:50:50Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=1c0bf
time="2023-11-03T13:50:50Z" level=debug duration=37.095091ms execID=1c0bf
time="2023-11-03T13:50:50Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=8e672
time="2023-11-03T13:50:50Z" level=debug duration=1.778378ms execID=8e672
time="2023-11-03T13:50:50Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=66c1c
time="2023-11-03T13:50:50Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.781977ms execID=66c1c
time="2023-11-03T13:50:50Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=135f4
time="2023-11-03T13:50:50Z" level=debug duration=28.35658ms execID=135f4
time="2023-11-03T13:50:50Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=dfac5
time="2023-11-03T13:50:50Z" level=debug duration=21.84228ms execID=dfac5
time="2023-11-03T13:50:50Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=f72b1
time="2023-11-03T13:50:50Z" level=debug duration=2.077265ms execID=f72b1
time="2023-11-03T13:50:50Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=ea59b
Handling connection for 9081
time="2023-11-03T13:50:50Z" level=debug duration=74.802847ms execID=ea59b
time="2023-11-03T13:50:50Z" level=info msg="kubectl create ns argocd-e2e--test-hook-delete-policy-hook-succeeded-hook-e-nzazy" dir= execID=8a119
time="2023-11-03T13:50:50Z" level=debug msg="namespace/argocd-e2e--test-hook-delete-policy-hook-succeeded-hook-e-nzazy created\n" duration=161.030876ms execID=8a119
time="2023-11-03T13:50:50Z" level=info msg="kubectl label ns argocd-e2e--test-hook-delete-policy-hook-succeeded-hook-e-nzazy e2e.argoproj.io=true" dir= execID=42240
time="2023-11-03T13:50:50Z" level=debug msg="namespace/argocd-e2e--test-hook-delete-policy-hook-succeeded-hook-e-nzazy labeled\n" duration=228.155251ms execID=42240
time="2023-11-03T13:50:50Z" level=info msg="clean state" duration=2.229248373s id=TestHookDeletePolicyHookSucceededHookExit1-nzazy name=TestHookDeletePolicyHookSucceededHookExit1 password=password username=admin
time="2023-11-03T13:50:51Z" level=info msg=patching jsonPatch="[{\"op\": \"add\", \"path\": \"/metadata/annotations/argocd.argoproj.io~1hook-delete-policy\", \"value\": \"HookSucceeded\"}]" path=hook/hook.yaml
time="2023-11-03T13:50:51Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:50:51Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/hook\":\"Sync\"},\"name\":\"hook\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:50:51Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:50:51Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=e2ba0
time="2023-11-03T13:50:51Z" level=debug msg="diff --git a/hook/hook.yaml b/hook/hook.yaml\nindex ca89c3d..4901b02 100644\n--- a/hook/hook.yaml\n+++ b/hook/hook.yaml\n@@ -3,12 +3,13 @@ kind: Pod\n metadata:\n   annotations:\n     argocd.argoproj.io/hook: Sync\n+    argocd.argoproj.io/hook-delete-policy: HookSucceeded\n   name: hook\n spec:\n   containers:\n-    - command:\n-        - \"true\"\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      name: main\n-  restartPolicy: Never\n\\ No newline at end of file\n+  - command:\n+    - \"true\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n+  restartPolicy: Never\n" duration=4.767956ms execID=e2ba0
time="2023-11-03T13:50:51Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=744c9
time="2023-11-03T13:50:51Z" level=debug msg="[master d35ddad] patch\n 1 file changed, 7 insertions(+), 6 deletions(-)\n" duration=10.823232ms execID=744c9
time="2023-11-03T13:50:51Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=e9ea1
Handling connection for 9081
time="2023-11-03T13:50:51Z" level=debug duration=39.053174ms execID=e9ea1
time="2023-11-03T13:50:51Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/spec/containers/0/command/0\", \"value\": \"false\"}]" path=hook/hook.yaml
time="2023-11-03T13:50:51Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:50:51Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/hook\":\"Sync\",\"argocd.argoproj.io/hook-delete-policy\":\"HookSucceeded\"},\"name\":\"hook\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:50:51Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:50:51Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=b74f1
time="2023-11-03T13:50:51Z" level=debug msg="diff --git a/hook/hook.yaml b/hook/hook.yaml\nindex 4901b02..ea05c3e 100644\n--- a/hook/hook.yaml\n+++ b/hook/hook.yaml\n@@ -8,7 +8,7 @@ metadata:\n spec:\n   containers:\n   - command:\n-    - \"true\"\n+    - \"false\"\n     image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n     imagePullPolicy: IfNotPresent\n     name: main\n" duration=3.543017ms execID=b74f1
time="2023-11-03T13:50:51Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=0aa77
time="2023-11-03T13:50:51Z" level=debug msg="[master 7dc49ce] patch\n 1 file changed, 1 insertion(+), 1 deletion(-)\n" duration=7.412101ms execID=0aa77
time="2023-11-03T13:50:51Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=68eac
Handling connection for 9081
time="2023-11-03T13:50:51Z" level=debug duration=37.761048ms execID=68eac
time="2023-11-03T13:50:51Z" level=info msg="../../dist/argocd app create test-hook-delete-policy-hook-succeeded-hook-exit1 --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path hook --project default --dest-namespace argocd-e2e--test-hook-delete-policy-hook-succeeded-hook-e-nzazy --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTg1MCwibmJmIjoxNjk5MDE5NDUwLCJpYXQiOjE2OTkwMTk0NTAsImp0aSI6IjU5MWM5NjViLTgwZGItNGQwNC1hNzIwLTEwMTQxOWNlMWY1YiJ9.KGANKuN4a5gJSnDqfQfYOA8IF1Mov2hpXru69kVjGhM --insecure" dir= execID=6d2bd
time="2023-11-03T13:50:52Z" level=debug msg="application 'test-hook-delete-policy-hook-succeeded-hook-exit1' created\n" duration=266.388329ms execID=6d2bd
time="2023-11-03T13:50:52Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:50:52Z" level=info msg="../../dist/argocd app sync test-hook-delete-policy-hook-succeeded-hook-exit1 --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTg1MCwibmJmIjoxNjk5MDE5NDUwLCJpYXQiOjE2OTkwMTk0NTAsImp0aSI6IjU5MWM5NjViLTgwZGItNGQwNC1hNzIwLTEwMTQxOWNlMWY1YiJ9.KGANKuN4a5gJSnDqfQfYOA8IF1Mov2hpXru69kVjGhM --insecure" dir= execID=4714a
time="2023-11-03T13:50:57Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                                       NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:50:52+00:00                Pod  argocd-e2e--test-hook-delete-policy-hook-succeeded-hook-e-nzazy                   pod  OutOfSync  Missing              \n2023-11-03T13:50:52+00:00                Pod  argocd-e2e--test-hook-delete-policy-hook-succeeded-hook-e-nzazy                   pod  OutOfSync  Missing              pod/pod created\n2023-11-03T13:50:52+00:00                Pod  argocd-e2e--test-hook-delete-policy-hook-succeeded-hook-e-nzazy                  hook   Running    Synced        Sync  pod/hook created\n2023-11-03T13:50:52+00:00                Pod  argocd-e2e--test-hook-delete-policy-hook-succeeded-hook-e-nzazy                   pod    Synced  Progressing              pod/pod created\n2023-11-03T13:50:57+00:00                Pod  argocd-e2e--test-hook-delete-policy-hook-succeeded-hook-e-nzazy                  hook    Failed   Synced        Sync  container \"main\" failed with exit code 1\n\nName:               argocd-e2e/test-hook-delete-policy-hook-succeeded-hook-exit1\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-hook-delete-policy-hook-succeeded-hook-e-nzazy\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-hook-delete-policy-hook-succeeded-hook-exit1\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               hook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (7dc49ce)\nHealth Status:      Progressing\n\nOperation:          Sync\nSync Revision:      7dc49ce1df0a438fb79ceac4d9be9ce7fb17257e\nPhase:              Failed\nStart:              2023-11-03 13:50:52 +0000 UTC\nFinished:           2023-11-03 13:50:57 +0000 UTC\nDuration:           5s\nMessage:            one or more synchronization tasks completed unsuccessfully\n\nGROUP  KIND  NAMESPACE                                                        NAME  STATUS  HEALTH       HOOK  MESSAGE\n       Pod   argocd-e2e--test-hook-delete-policy-hook-succeeded-hook-e-nzazy  pod   Synced  Progressing        pod/pod created\n       Pod   argocd-e2e--test-hook-delete-policy-hook-succeeded-hook-e-nzazy  hook  Failed               Sync  container \"main\" failed with exit code 1\n" duration=5.36942979s execID=4714a
time="2023-11-03T13:50:57Z" level=error msg="`../../dist/argocd app sync test-hook-delete-policy-hook-succeeded-hook-exit1 --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTg1MCwibmJmIjoxNjk5MDE5NDUwLCJpYXQiOjE2OTkwMTk0NTAsImp0aSI6IjU5MWM5NjViLTgwZGItNGQwNC1hNzIwLTEwMTQxOWNlMWY1YiJ9.KGANKuN4a5gJSnDqfQfYOA8IF1Mov2hpXru69kVjGhM --insecure` failed exit status 1: time=\"2023-11-03T13:50:57Z\" level=fatal msg=\"Operation has completed with phase: Failed\"" execID=4714a
time="2023-11-03T13:50:57Z" level=info msg="expectation succeeded: operation phase should be Failed, is Failed"
time="2023-11-03T13:50:57Z" level=info msg="expectation succeeded: right number of results, want 2, got 2"
time="2023-11-03T13:50:57Z" level=info msg="expectation succeeded: pod predicate matched pod named 'hook'"
time="2023-11-03T13:50:57Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestHookDeletePolicyHookSucceededHookExit1 (8.99s)
=== RUN   TestHookDeletePolicyHookFailedHookExit0
time="2023-11-03T13:50:57Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=50f44
time="2023-11-03T13:50:57Z" level=debug msg="namespace \"argocd-e2e--test-hook-delete-policy-hook-succeeded-hook-e-nzazy\" deleted\n" duration=255.737662ms execID=50f44
time="2023-11-03T13:50:57Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=01926
time="2023-11-03T13:50:58Z" level=debug msg="No resources found\n" duration=398.927527ms execID=01926
time="2023-11-03T13:50:58Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=13070
time="2023-11-03T13:50:58Z" level=debug msg="No resources found\n" duration=297.199413ms execID=13070
time="2023-11-03T13:50:59Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:50:59Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTg1OSwibmJmIjoxNjk5MDE5NDU5LCJpYXQiOjE2OTkwMTk0NTksImp0aSI6ImYxOTI5NGU3LTY3ODAtNGQ3Mi04Y2Y2LTdkOGYzYThmZWNlMSJ9.EGK6xvfO7zxxfpttGOSAV0Ga8ZtcKM7NwbS_oGtPUfg --insecure" dir= execID=e92ff
time="2023-11-03T13:50:59Z" level=debug duration=68.218698ms execID=e92ff
time="2023-11-03T13:50:59Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=46836
time="2023-11-03T13:50:59Z" level=debug duration=19.775452ms execID=46836
time="2023-11-03T13:50:59Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=6f26e
time="2023-11-03T13:50:59Z" level=debug duration=1.622188ms execID=6f26e
time="2023-11-03T13:50:59Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=f0927
time="2023-11-03T13:50:59Z" level=debug duration=1.649882ms execID=f0927
time="2023-11-03T13:50:59Z" level=info msg="pkill -9 gpg-agent" dir= execID=7f4c0
time="2023-11-03T13:50:59Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=0a7d1
time="2023-11-03T13:50:59Z" level=debug duration=9.981733ms execID=0a7d1
time="2023-11-03T13:50:59Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=ae3ef
time="2023-11-03T13:50:59Z" level=debug duration=35.045429ms execID=ae3ef
time="2023-11-03T13:50:59Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=8f207
time="2023-11-03T13:50:59Z" level=debug duration=1.667617ms execID=8f207
time="2023-11-03T13:50:59Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=850f1
time="2023-11-03T13:50:59Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.69756ms execID=850f1
time="2023-11-03T13:50:59Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=c5c9d
time="2023-11-03T13:50:59Z" level=debug duration=23.764623ms execID=c5c9d
time="2023-11-03T13:50:59Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=c70f5
time="2023-11-03T13:50:59Z" level=debug duration=24.967999ms execID=c70f5
time="2023-11-03T13:50:59Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=a3214
time="2023-11-03T13:50:59Z" level=debug duration=2.762975ms execID=a3214
time="2023-11-03T13:50:59Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=ba44e
Handling connection for 9081
time="2023-11-03T13:50:59Z" level=debug duration=61.397669ms execID=ba44e
time="2023-11-03T13:50:59Z" level=info msg="kubectl create ns argocd-e2e--test-hook-delete-policy-hook-failed-hook-exit-estar" dir= execID=14d65
time="2023-11-03T13:50:59Z" level=debug msg="namespace/argocd-e2e--test-hook-delete-policy-hook-failed-hook-exit-estar created\n" duration=158.680946ms execID=14d65
time="2023-11-03T13:50:59Z" level=info msg="kubectl label ns argocd-e2e--test-hook-delete-policy-hook-failed-hook-exit-estar e2e.argoproj.io=true" dir= execID=0fa16
time="2023-11-03T13:51:00Z" level=debug msg="namespace/argocd-e2e--test-hook-delete-policy-hook-failed-hook-exit-estar labeled\n" duration=274.276187ms execID=0fa16
time="2023-11-03T13:51:00Z" level=info msg="clean state" duration=2.411564928s id=TestHookDeletePolicyHookFailedHookExit0-estar name=TestHookDeletePolicyHookFailedHookExit0 password=password username=admin
time="2023-11-03T13:51:01Z" level=info msg=patching jsonPatch="[{\"op\": \"add\", \"path\": \"/metadata/annotations/argocd.argoproj.io~1hook-delete-policy\", \"value\": \"HookFailed\"}]" path=hook/hook.yaml
time="2023-11-03T13:51:01Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:51:01Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/hook\":\"Sync\"},\"name\":\"hook\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:51:01Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:51:01Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=d1575
time="2023-11-03T13:51:01Z" level=debug msg="diff --git a/hook/hook.yaml b/hook/hook.yaml\nindex ca89c3d..96e035f 100644\n--- a/hook/hook.yaml\n+++ b/hook/hook.yaml\n@@ -3,12 +3,13 @@ kind: Pod\n metadata:\n   annotations:\n     argocd.argoproj.io/hook: Sync\n+    argocd.argoproj.io/hook-delete-policy: HookFailed\n   name: hook\n spec:\n   containers:\n-    - command:\n-        - \"true\"\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      name: main\n-  restartPolicy: Never\n\\ No newline at end of file\n+  - command:\n+    - \"true\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n+  restartPolicy: Never\n" duration=5.582174ms execID=d1575
time="2023-11-03T13:51:01Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=46ff4
time="2023-11-03T13:51:01Z" level=debug msg="[master 6e20364] patch\n 1 file changed, 7 insertions(+), 6 deletions(-)\n" duration=12.548637ms execID=46ff4
time="2023-11-03T13:51:01Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=2379a
Handling connection for 9081
time="2023-11-03T13:51:01Z" level=debug duration=39.125758ms execID=2379a
time="2023-11-03T13:51:01Z" level=info msg="../../dist/argocd app create test-hook-delete-policy-hook-failed-hook-exit0 --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path hook --project default --dest-namespace argocd-e2e--test-hook-delete-policy-hook-failed-hook-exit-estar --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTg1OSwibmJmIjoxNjk5MDE5NDU5LCJpYXQiOjE2OTkwMTk0NTksImp0aSI6ImYxOTI5NGU3LTY3ODAtNGQ3Mi04Y2Y2LTdkOGYzYThmZWNlMSJ9.EGK6xvfO7zxxfpttGOSAV0Ga8ZtcKM7NwbS_oGtPUfg --insecure" dir= execID=df1bb
time="2023-11-03T13:51:01Z" level=debug msg="application 'test-hook-delete-policy-hook-failed-hook-exit0' created\n" duration=254.106041ms execID=df1bb
time="2023-11-03T13:51:01Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:51:01Z" level=info msg="../../dist/argocd app sync test-hook-delete-policy-hook-failed-hook-exit0 --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTg1OSwibmJmIjoxNjk5MDE5NDU5LCJpYXQiOjE2OTkwMTk0NTksImp0aSI6ImYxOTI5NGU3LTY3ODAtNGQ3Mi04Y2Y2LTdkOGYzYThmZWNlMSJ9.EGK6xvfO7zxxfpttGOSAV0Ga8ZtcKM7NwbS_oGtPUfg --insecure" dir= execID=183fe
time="2023-11-03T13:51:08Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                                       NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:51:01+00:00                Pod  argocd-e2e--test-hook-delete-policy-hook-failed-hook-exit-estar                   pod  OutOfSync  Missing              \n2023-11-03T13:51:02+00:00                Pod  argocd-e2e--test-hook-delete-policy-hook-failed-hook-exit-estar                   pod  OutOfSync  Missing              pod/pod created\n2023-11-03T13:51:02+00:00                Pod  argocd-e2e--test-hook-delete-policy-hook-failed-hook-exit-estar                  hook   Running    Synced        Sync  pod/hook created\n2023-11-03T13:51:02+00:00                Pod  argocd-e2e--test-hook-delete-policy-hook-failed-hook-exit-estar                   pod    Synced  Progressing              pod/pod created\n2023-11-03T13:51:08+00:00                Pod  argocd-e2e--test-hook-delete-policy-hook-failed-hook-exit-estar                   pod    Synced  Healthy              pod/pod created\n2023-11-03T13:51:08+00:00                Pod  argocd-e2e--test-hook-delete-policy-hook-failed-hook-exit-estar                  hook  Succeeded   Synced        Sync  pod/hook created\n\nName:               argocd-e2e/test-hook-delete-policy-hook-failed-hook-exit0\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-hook-delete-policy-hook-failed-hook-exit-estar\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-hook-delete-policy-hook-failed-hook-exit0\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               hook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (6e20364)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      6e2036426c1d379d7c28ead42ce3fd8b67b8a2de\nPhase:              Succeeded\nStart:              2023-11-03 13:51:01 +0000 UTC\nFinished:           2023-11-03 13:51:08 +0000 UTC\nDuration:           7s\nMessage:            successfully synced (no more tasks)\n\nGROUP  KIND  NAMESPACE                                                        NAME  STATUS     HEALTH   HOOK  MESSAGE\n       Pod   argocd-e2e--test-hook-delete-policy-hook-failed-hook-exit-estar  pod   Synced     Healthy        pod/pod created\n       Pod   argocd-e2e--test-hook-delete-policy-hook-failed-hook-exit-estar  hook  Succeeded           Sync  pod/hook created\n" duration=7.283795773s execID=183fe
time="2023-11-03T13:51:08Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:51:08Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:51:08Z" level=info msg="expectation succeeded: right number of results, want 2, got 2"
time="2023-11-03T13:51:08Z" level=info msg="expectation succeeded: pod predicate matched pod named 'hook'"
time="2023-11-03T13:51:08Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestHookDeletePolicyHookFailedHookExit0 (11.03s)
=== RUN   TestHookDeletePolicyHookFailedHookExit1
time="2023-11-03T13:51:08Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=17f9c
time="2023-11-03T13:51:08Z" level=debug msg="namespace \"argocd-e2e--test-hook-delete-policy-hook-failed-hook-exit-estar\" deleted\n" duration=249.354657ms execID=17f9c
time="2023-11-03T13:51:08Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=1359b
time="2023-11-03T13:51:09Z" level=debug msg="No resources found\n" duration=442.68883ms execID=1359b
time="2023-11-03T13:51:09Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=f87c0
time="2023-11-03T13:51:09Z" level=debug msg="No resources found\n" duration=260.853127ms execID=f87c0
time="2023-11-03T13:51:10Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:51:10Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTg3MCwibmJmIjoxNjk5MDE5NDcwLCJpYXQiOjE2OTkwMTk0NzAsImp0aSI6IjRhNDM5MDg5LTRmNmQtNGRhMC1iMjVlLWM1MDIyYTFjYTQyMiJ9.5ENDcTL5juQZXRfgiyLponn2yJAjIGTURju2sv_YQio --insecure" dir= execID=55b05
time="2023-11-03T13:51:10Z" level=debug duration=76.821669ms execID=55b05
time="2023-11-03T13:51:10Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=36816
time="2023-11-03T13:51:10Z" level=debug duration=2.023589ms execID=36816
time="2023-11-03T13:51:10Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=9c24f
time="2023-11-03T13:51:10Z" level=debug duration=1.592296ms execID=9c24f
time="2023-11-03T13:51:10Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=4ba41
time="2023-11-03T13:51:10Z" level=debug duration=1.469524ms execID=4ba41
time="2023-11-03T13:51:10Z" level=info msg="pkill -9 gpg-agent" dir= execID=dd7cf
time="2023-11-03T13:51:10Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=9a8d6
time="2023-11-03T13:51:10Z" level=debug duration=9.945562ms execID=9a8d6
time="2023-11-03T13:51:10Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=7933c
time="2023-11-03T13:51:10Z" level=debug duration=40.133583ms execID=7933c
time="2023-11-03T13:51:10Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=df014
time="2023-11-03T13:51:10Z" level=debug duration=1.77438ms execID=df014
time="2023-11-03T13:51:10Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=677cd
time="2023-11-03T13:51:10Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.002646ms execID=677cd
time="2023-11-03T13:51:10Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=1836a
time="2023-11-03T13:51:10Z" level=debug duration=38.889235ms execID=1836a
time="2023-11-03T13:51:10Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=616b5
time="2023-11-03T13:51:10Z" level=debug duration=22.727989ms execID=616b5
time="2023-11-03T13:51:10Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=b387e
time="2023-11-03T13:51:10Z" level=debug duration=2.865872ms execID=b387e
time="2023-11-03T13:51:10Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=14e7b
Handling connection for 9081
time="2023-11-03T13:51:11Z" level=debug duration=68.152199ms execID=14e7b
time="2023-11-03T13:51:11Z" level=info msg="kubectl create ns argocd-e2e--test-hook-delete-policy-hook-failed-hook-exit-meeti" dir= execID=31c1e
time="2023-11-03T13:51:11Z" level=debug msg="namespace/argocd-e2e--test-hook-delete-policy-hook-failed-hook-exit-meeti created\n" duration=142.612328ms execID=31c1e
time="2023-11-03T13:51:11Z" level=info msg="kubectl label ns argocd-e2e--test-hook-delete-policy-hook-failed-hook-exit-meeti e2e.argoproj.io=true" dir= execID=aee4c
time="2023-11-03T13:51:11Z" level=debug msg="namespace/argocd-e2e--test-hook-delete-policy-hook-failed-hook-exit-meeti labeled\n" duration=359.55805ms execID=aee4c
time="2023-11-03T13:51:11Z" level=info msg="clean state" duration=2.88749086s id=TestHookDeletePolicyHookFailedHookExit1-meeti name=TestHookDeletePolicyHookFailedHookExit1 password=password username=admin
time="2023-11-03T13:51:12Z" level=info msg=patching jsonPatch="[{\"op\": \"add\", \"path\": \"/metadata/annotations/argocd.argoproj.io~1hook-delete-policy\", \"value\": \"HookFailed\"}]" path=hook/hook.yaml
time="2023-11-03T13:51:12Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:51:12Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/hook\":\"Sync\"},\"name\":\"hook\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:51:12Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:51:12Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=c502e
time="2023-11-03T13:51:12Z" level=debug msg="diff --git a/hook/hook.yaml b/hook/hook.yaml\nindex ca89c3d..96e035f 100644\n--- a/hook/hook.yaml\n+++ b/hook/hook.yaml\n@@ -3,12 +3,13 @@ kind: Pod\n metadata:\n   annotations:\n     argocd.argoproj.io/hook: Sync\n+    argocd.argoproj.io/hook-delete-policy: HookFailed\n   name: hook\n spec:\n   containers:\n-    - command:\n-        - \"true\"\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      name: main\n-  restartPolicy: Never\n\\ No newline at end of file\n+  - command:\n+    - \"true\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n+  restartPolicy: Never\n" duration=5.025516ms execID=c502e
time="2023-11-03T13:51:12Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=bfd3c
time="2023-11-03T13:51:12Z" level=debug msg="[master e1354a6] patch\n 1 file changed, 7 insertions(+), 6 deletions(-)\n" duration=11.989351ms execID=bfd3c
time="2023-11-03T13:51:12Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=ee99f
Handling connection for 9081
time="2023-11-03T13:51:12Z" level=debug duration=40.08884ms execID=ee99f
time="2023-11-03T13:51:12Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/spec/containers/0/command/0\", \"value\": \"false\"}]" path=hook/hook.yaml
time="2023-11-03T13:51:12Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:51:12Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/hook\":\"Sync\",\"argocd.argoproj.io/hook-delete-policy\":\"HookFailed\"},\"name\":\"hook\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:51:12Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:51:12Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=ea384
time="2023-11-03T13:51:12Z" level=debug msg="diff --git a/hook/hook.yaml b/hook/hook.yaml\nindex 96e035f..c4ff2a5 100644\n--- a/hook/hook.yaml\n+++ b/hook/hook.yaml\n@@ -8,7 +8,7 @@ metadata:\n spec:\n   containers:\n   - command:\n-    - \"true\"\n+    - \"false\"\n     image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n     imagePullPolicy: IfNotPresent\n     name: main\n" duration=3.611395ms execID=ea384
time="2023-11-03T13:51:12Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=66403
time="2023-11-03T13:51:12Z" level=debug msg="[master ccd5d3c] patch\n 1 file changed, 1 insertion(+), 1 deletion(-)\n" duration=7.255756ms execID=66403
time="2023-11-03T13:51:12Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=3e8b3
Handling connection for 9081
time="2023-11-03T13:51:12Z" level=debug duration=40.103113ms execID=3e8b3
time="2023-11-03T13:51:12Z" level=info msg="../../dist/argocd app create test-hook-delete-policy-hook-failed-hook-exit1 --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path hook --project default --dest-namespace argocd-e2e--test-hook-delete-policy-hook-failed-hook-exit-meeti --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTg3MCwibmJmIjoxNjk5MDE5NDcwLCJpYXQiOjE2OTkwMTk0NzAsImp0aSI6IjRhNDM5MDg5LTRmNmQtNGRhMC1iMjVlLWM1MDIyYTFjYTQyMiJ9.5ENDcTL5juQZXRfgiyLponn2yJAjIGTURju2sv_YQio --insecure" dir= execID=5d2d5
time="2023-11-03T13:51:12Z" level=debug msg="application 'test-hook-delete-policy-hook-failed-hook-exit1' created\n" duration=256.548643ms execID=5d2d5
time="2023-11-03T13:51:12Z" level=info msg="../../dist/argocd app sync test-hook-delete-policy-hook-failed-hook-exit1 --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTg3MCwibmJmIjoxNjk5MDE5NDcwLCJpYXQiOjE2OTkwMTk0NzAsImp0aSI6IjRhNDM5MDg5LTRmNmQtNGRhMC1iMjVlLWM1MDIyYTFjYTQyMiJ9.5ENDcTL5juQZXRfgiyLponn2yJAjIGTURju2sv_YQio --insecure" dir= execID=7a6db
time="2023-11-03T13:51:18Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:51:13+00:00                Pod  argocd-e2e--test-hook-delete-policy-hook-failed-hook-exit-meeti                   pod  OutOfSync  Missing              \n2023-11-03T13:51:13+00:00                Pod  argocd-e2e--test-hook-delete-policy-hook-failed-hook-exit-meeti                  hook   Running    Synced        Sync  pod/hook created\n2023-11-03T13:51:13+00:00                Pod  argocd-e2e--test-hook-delete-policy-hook-failed-hook-exit-meeti                   pod  OutOfSync  Missing              pod/pod created\n2023-11-03T13:51:13+00:00                Pod  argocd-e2e--test-hook-delete-policy-hook-failed-hook-exit-meeti                   pod    Synced  Progressing              pod/pod created\n2023-11-03T13:51:18+00:00                Pod  argocd-e2e--test-hook-delete-policy-hook-failed-hook-exit-meeti                   pod    Synced  Healthy              pod/pod created\n2023-11-03T13:51:18+00:00                Pod  argocd-e2e--test-hook-delete-policy-hook-failed-hook-exit-meeti                  hook    Failed   Synced        Sync  container \"main\" failed with exit code 1\n\nName:               argocd-e2e/test-hook-delete-policy-hook-failed-hook-exit1\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-hook-delete-policy-hook-failed-hook-exit-meeti\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-hook-delete-policy-hook-failed-hook-exit1\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               hook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (ccd5d3c)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      ccd5d3c3dadc3c40171e37a8ef0a32a9f0b2854a\nPhase:              Failed\nStart:              2023-11-03 13:51:13 +0000 UTC\nFinished:           2023-11-03 13:51:18 +0000 UTC\nDuration:           5s\nMessage:            one or more synchronization tasks completed unsuccessfully\n\nGROUP  KIND  NAMESPACE                                                        NAME  STATUS  HEALTH   HOOK  MESSAGE\n       Pod   argocd-e2e--test-hook-delete-policy-hook-failed-hook-exit-meeti  hook  Failed           Sync  container \"main\" failed with exit code 1\n       Pod   argocd-e2e--test-hook-delete-policy-hook-failed-hook-exit-meeti  pod   Synced  Healthy        pod/pod created\n" duration=5.798337465s execID=7a6db
time="2023-11-03T13:51:18Z" level=error msg="`../../dist/argocd app sync test-hook-delete-policy-hook-failed-hook-exit1 --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTg3MCwibmJmIjoxNjk5MDE5NDcwLCJpYXQiOjE2OTkwMTk0NzAsImp0aSI6IjRhNDM5MDg5LTRmNmQtNGRhMC1iMjVlLWM1MDIyYTFjYTQyMiJ9.5ENDcTL5juQZXRfgiyLponn2yJAjIGTURju2sv_YQio --insecure` failed exit status 1: time=\"2023-11-03T13:51:18Z\" level=fatal msg=\"Operation has completed with phase: Failed\"" execID=7a6db
time="2023-11-03T13:51:18Z" level=info msg="expectation succeeded: operation phase should be Failed, is Failed"
time="2023-11-03T13:51:18Z" level=info msg="expectation succeeded: right number of results, want 2, got 2"
time="2023-11-03T13:51:18Z" level=info msg="expectation succeeded: pod predicate did not match any pod"
time="2023-11-03T13:51:18Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestHookDeletePolicyHookFailedHookExit1 (10.07s)
=== RUN   TestHookBeforeHookCreation
time="2023-11-03T13:51:18Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=f7a90
time="2023-11-03T13:51:19Z" level=debug msg="namespace \"argocd-e2e--test-hook-delete-policy-hook-failed-hook-exit-meeti\" deleted\n" duration=257.773181ms execID=f7a90
time="2023-11-03T13:51:19Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=09991
time="2023-11-03T13:51:19Z" level=debug msg="No resources found\n" duration=514.777846ms execID=09991
time="2023-11-03T13:51:19Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=b56ab
time="2023-11-03T13:51:19Z" level=debug msg="No resources found\n" duration=232.683698ms execID=b56ab
time="2023-11-03T13:51:20Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:51:20Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTg4MCwibmJmIjoxNjk5MDE5NDgwLCJpYXQiOjE2OTkwMTk0ODAsImp0aSI6ImZhMjk4YTQ3LTBiYWUtNDA0Yi1hOTc1LTE0YzE1MjUwNDllYSJ9.jmsCPsSv8oZuJtk1VifNV0ejJOKuBzB7LjGb-FcFwcM --insecure" dir= execID=ac383
time="2023-11-03T13:51:20Z" level=debug duration=92.649392ms execID=ac383
time="2023-11-03T13:51:20Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=58f9d
time="2023-11-03T13:51:20Z" level=debug duration=1.985268ms execID=58f9d
time="2023-11-03T13:51:20Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=f60fc
time="2023-11-03T13:51:20Z" level=debug duration=1.460986ms execID=f60fc
time="2023-11-03T13:51:20Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=fc418
time="2023-11-03T13:51:20Z" level=debug duration=1.3936ms execID=fc418
time="2023-11-03T13:51:20Z" level=info msg="pkill -9 gpg-agent" dir= execID=99b7c
time="2023-11-03T13:51:20Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=cf1b2
time="2023-11-03T13:51:20Z" level=debug duration=9.59207ms execID=cf1b2
time="2023-11-03T13:51:20Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=24006
time="2023-11-03T13:51:21Z" level=debug duration=34.596939ms execID=24006
time="2023-11-03T13:51:21Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=5a5be
time="2023-11-03T13:51:21Z" level=debug duration=1.831286ms execID=5a5be
time="2023-11-03T13:51:21Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=c92f4
time="2023-11-03T13:51:21Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.624423ms execID=c92f4
time="2023-11-03T13:51:21Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=f8a91
time="2023-11-03T13:51:21Z" level=debug duration=29.585912ms execID=f8a91
time="2023-11-03T13:51:21Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=ef9b0
time="2023-11-03T13:51:21Z" level=debug duration=19.303437ms execID=ef9b0
time="2023-11-03T13:51:21Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=1412e
time="2023-11-03T13:51:21Z" level=debug duration=2.082762ms execID=1412e
time="2023-11-03T13:51:21Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=47e22
Handling connection for 9081
time="2023-11-03T13:51:21Z" level=debug duration=131.728867ms execID=47e22
time="2023-11-03T13:51:21Z" level=info msg="kubectl create ns argocd-e2e--test-hook-before-hook-creation-cumup" dir= execID=a33c0
time="2023-11-03T13:51:21Z" level=debug msg="namespace/argocd-e2e--test-hook-before-hook-creation-cumup created\n" duration=129.785188ms execID=a33c0
time="2023-11-03T13:51:21Z" level=info msg="kubectl label ns argocd-e2e--test-hook-before-hook-creation-cumup e2e.argoproj.io=true" dir= execID=06c38
time="2023-11-03T13:51:21Z" level=debug msg="namespace/argocd-e2e--test-hook-before-hook-creation-cumup labeled\n" duration=303.163423ms execID=06c38
time="2023-11-03T13:51:21Z" level=info msg="clean state" duration=2.918416709s id=TestHookBeforeHookCreation-cumup name=TestHookBeforeHookCreation password=password username=admin
time="2023-11-03T13:51:22Z" level=info msg=patching jsonPatch="[{\"op\": \"add\", \"path\": \"/metadata/annotations/argocd.argoproj.io~1hook-delete-policy\", \"value\": \"BeforeHookCreation\"}]" path=hook/hook.yaml
time="2023-11-03T13:51:22Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:51:22Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/hook\":\"Sync\"},\"name\":\"hook\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:51:22Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:51:22Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=ac5f7
time="2023-11-03T13:51:22Z" level=debug msg="diff --git a/hook/hook.yaml b/hook/hook.yaml\nindex ca89c3d..57b9f52 100644\n--- a/hook/hook.yaml\n+++ b/hook/hook.yaml\n@@ -3,12 +3,13 @@ kind: Pod\n metadata:\n   annotations:\n     argocd.argoproj.io/hook: Sync\n+    argocd.argoproj.io/hook-delete-policy: BeforeHookCreation\n   name: hook\n spec:\n   containers:\n-    - command:\n-        - \"true\"\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      name: main\n-  restartPolicy: Never\n\\ No newline at end of file\n+  - command:\n+    - \"true\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n+  restartPolicy: Never\n" duration=3.72158ms execID=ac5f7
time="2023-11-03T13:51:22Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=5e314
time="2023-11-03T13:51:22Z" level=debug msg="[master 0e51f8a] patch\n 1 file changed, 7 insertions(+), 6 deletions(-)\n" duration=8.884245ms execID=5e314
time="2023-11-03T13:51:22Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=5b564
Handling connection for 9081
time="2023-11-03T13:51:22Z" level=debug duration=39.70821ms execID=5b564
time="2023-11-03T13:51:22Z" level=info msg="../../dist/argocd app create test-hook-before-hook-creation --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path hook --project default --dest-namespace argocd-e2e--test-hook-before-hook-creation-cumup --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTg4MCwibmJmIjoxNjk5MDE5NDgwLCJpYXQiOjE2OTkwMTk0ODAsImp0aSI6ImZhMjk4YTQ3LTBiYWUtNDA0Yi1hOTc1LTE0YzE1MjUwNDllYSJ9.jmsCPsSv8oZuJtk1VifNV0ejJOKuBzB7LjGb-FcFwcM --insecure" dir= execID=40e1f
time="2023-11-03T13:51:22Z" level=debug msg="application 'test-hook-before-hook-creation' created\n" duration=264.354706ms execID=40e1f
time="2023-11-03T13:51:22Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:51:22Z" level=info msg="../../dist/argocd app sync test-hook-before-hook-creation --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTg4MCwibmJmIjoxNjk5MDE5NDgwLCJpYXQiOjE2OTkwMTk0ODAsImp0aSI6ImZhMjk4YTQ3LTBiYWUtNDA0Yi1hOTc1LTE0YzE1MjUwNDllYSJ9.jmsCPsSv8oZuJtk1VifNV0ejJOKuBzB7LjGb-FcFwcM --insecure" dir= execID=ba9a7
time="2023-11-03T13:51:28Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                        NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:51:23+00:00                Pod  argocd-e2e--test-hook-before-hook-creation-cumup                   pod  OutOfSync  Missing              \n2023-11-03T13:51:23+00:00                Pod  argocd-e2e--test-hook-before-hook-creation-cumup                   pod  OutOfSync  Missing              pod/pod created\n2023-11-03T13:51:23+00:00                Pod  argocd-e2e--test-hook-before-hook-creation-cumup                  hook   Running    Synced        Sync  pod/hook created\n2023-11-03T13:51:23+00:00                Pod  argocd-e2e--test-hook-before-hook-creation-cumup                   pod    Synced  Progressing              pod/pod created\n2023-11-03T13:51:27+00:00                Pod  argocd-e2e--test-hook-before-hook-creation-cumup                   pod    Synced  Healthy              pod/pod created\n2023-11-03T13:51:28+00:00                Pod  argocd-e2e--test-hook-before-hook-creation-cumup                  hook  Succeeded   Synced        Sync  pod/hook created\n\nName:               argocd-e2e/test-hook-before-hook-creation\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-hook-before-hook-creation-cumup\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-hook-before-hook-creation\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               hook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (0e51f8a)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      0e51f8a23e220075c800f81d839ae38d58e30180\nPhase:              Succeeded\nStart:              2023-11-03 13:51:23 +0000 UTC\nFinished:           2023-11-03 13:51:28 +0000 UTC\nDuration:           5s\nMessage:            successfully synced (no more tasks)\n\nGROUP  KIND  NAMESPACE                                         NAME  STATUS     HEALTH   HOOK  MESSAGE\n       Pod   argocd-e2e--test-hook-before-hook-creation-cumup  hook  Succeeded           Sync  pod/hook created\n       Pod   argocd-e2e--test-hook-before-hook-creation-cumup  pod   Synced     Healthy        pod/pod created\n" duration=5.736652022s execID=ba9a7
time="2023-11-03T13:51:28Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:51:28Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:51:28Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:51:28Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:51:28Z" level=info msg="expectation succeeded: right number of results, want 2, got 2"
time="2023-11-03T13:51:28Z" level=info msg="expectation succeeded: pod predicate matched pod named 'hook'"
time="2023-11-03T13:51:28Z" level=info msg="kubectl -n argocd-e2e--test-hook-before-hook-creation-cumup get pod hook -o jsonpath={.metadata.creationTimestamp}" dir=. execID=fd498
time="2023-11-03T13:51:29Z" level=debug msg="2023-11-03T13:51:23Z" duration=311.866272ms execID=fd498
time="2023-11-03T13:51:31Z" level=info msg="../../dist/argocd app sync test-hook-before-hook-creation --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTg4MCwibmJmIjoxNjk5MDE5NDgwLCJpYXQiOjE2OTkwMTk0ODAsImp0aSI6ImZhMjk4YTQ3LTBiYWUtNDA0Yi1hOTc1LTE0YzE1MjUwNDllYSJ9.jmsCPsSv8oZuJtk1VifNV0ejJOKuBzB7LjGb-FcFwcM --insecure" dir= execID=307cd
time="2023-11-03T13:51:36Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                        NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:51:31+00:00                Pod  argocd-e2e--test-hook-before-hook-creation-cumup                  hook                                 \n2023-11-03T13:51:31+00:00                Pod  argocd-e2e--test-hook-before-hook-creation-cumup                   pod    Synced  Healthy              \n2023-11-03T13:51:32+00:00                Pod  argocd-e2e--test-hook-before-hook-creation-cumup                   pod    Synced  Healthy              pod/pod unchanged\n2023-11-03T13:51:32+00:00                Pod  argocd-e2e--test-hook-before-hook-creation-cumup                  hook   Running   Synced        Sync  pod/hook created\n2023-11-03T13:51:36+00:00                Pod  argocd-e2e--test-hook-before-hook-creation-cumup                  hook  Succeeded   Synced        Sync  pod/hook created\n\nName:               argocd-e2e/test-hook-before-hook-creation\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-hook-before-hook-creation-cumup\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-hook-before-hook-creation\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               hook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (0e51f8a)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      0e51f8a23e220075c800f81d839ae38d58e30180\nPhase:              Succeeded\nStart:              2023-11-03 13:51:31 +0000 UTC\nFinished:           2023-11-03 13:51:36 +0000 UTC\nDuration:           5s\nMessage:            successfully synced (no more tasks)\n\nGROUP  KIND  NAMESPACE                                         NAME  STATUS     HEALTH   HOOK  MESSAGE\n       Pod   argocd-e2e--test-hook-before-hook-creation-cumup  pod   Synced     Healthy        pod/pod unchanged\n       Pod   argocd-e2e--test-hook-before-hook-creation-cumup  hook  Succeeded           Sync  pod/hook created\n" duration=5.664614967s execID=307cd
time="2023-11-03T13:51:36Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:51:36Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:51:36Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:51:36Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:51:36Z" level=info msg="expectation succeeded: right number of results, want 2, got 2"
time="2023-11-03T13:51:36Z" level=info msg="expectation succeeded: pod predicate matched pod named 'hook'"
time="2023-11-03T13:51:36Z" level=info msg="kubectl -n argocd-e2e--test-hook-before-hook-creation-cumup get pod hook -o jsonpath={.metadata.creationTimestamp}" dir=. execID=d3942
time="2023-11-03T13:51:36Z" level=debug msg="2023-11-03T13:51:32Z" duration=198.770474ms execID=d3942
time="2023-11-03T13:51:36Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestHookBeforeHookCreation (18.23s)
=== RUN   TestHookBeforeHookCreationFailure
time="2023-11-03T13:51:36Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=a1d68
time="2023-11-03T13:51:37Z" level=debug msg="namespace \"argocd-e2e--test-hook-before-hook-creation-cumup\" deleted\n" duration=236.106048ms execID=a1d68
time="2023-11-03T13:51:37Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=abc0d
time="2023-11-03T13:51:37Z" level=debug msg="No resources found\n" duration=367.924699ms execID=abc0d
time="2023-11-03T13:51:37Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=058c6
time="2023-11-03T13:51:37Z" level=debug msg="No resources found\n" duration=260.635027ms execID=058c6
time="2023-11-03T13:51:38Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:51:38Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTg5OCwibmJmIjoxNjk5MDE5NDk4LCJpYXQiOjE2OTkwMTk0OTgsImp0aSI6IjhhNWMyMWRiLTg0N2MtNDc3NC04YTk5LTZkOWQ2MGYyZWY1ZSJ9.k8D6-FHazFxFrCsDk1Pt5VUdkdvoeELqCUEjQfgtCgI --insecure" dir= execID=0af24
time="2023-11-03T13:51:38Z" level=debug duration=127.929931ms execID=0af24
time="2023-11-03T13:51:39Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=c1df2
time="2023-11-03T13:51:39Z" level=debug duration=2.004411ms execID=c1df2
time="2023-11-03T13:51:39Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=a6afe
time="2023-11-03T13:51:39Z" level=debug duration=1.807898ms execID=a6afe
time="2023-11-03T13:51:39Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=9d4f5
time="2023-11-03T13:51:39Z" level=debug duration=1.484809ms execID=9d4f5
time="2023-11-03T13:51:39Z" level=info msg="pkill -9 gpg-agent" dir= execID=801ac
time="2023-11-03T13:51:39Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=ec74a
time="2023-11-03T13:51:39Z" level=debug duration=10.235665ms execID=ec74a
time="2023-11-03T13:51:39Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=85db5
time="2023-11-03T13:51:39Z" level=debug duration=37.237797ms execID=85db5
time="2023-11-03T13:51:39Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=e023e
time="2023-11-03T13:51:39Z" level=debug duration=2.019792ms execID=e023e
time="2023-11-03T13:51:39Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=07e4d
time="2023-11-03T13:51:39Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.940899ms execID=07e4d
time="2023-11-03T13:51:39Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=472b4
time="2023-11-03T13:51:39Z" level=debug duration=26.322175ms execID=472b4
time="2023-11-03T13:51:39Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=6051c
time="2023-11-03T13:51:39Z" level=debug duration=21.200127ms execID=6051c
time="2023-11-03T13:51:39Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=92471
time="2023-11-03T13:51:39Z" level=debug duration=2.296114ms execID=92471
time="2023-11-03T13:51:39Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=3c321
Handling connection for 9081
time="2023-11-03T13:51:39Z" level=debug duration=63.383499ms execID=3c321
time="2023-11-03T13:51:39Z" level=info msg="kubectl create ns argocd-e2e--test-hook-before-hook-creation-failure-lmxdz" dir= execID=04aed
time="2023-11-03T13:51:39Z" level=debug msg="namespace/argocd-e2e--test-hook-before-hook-creation-failure-lmxdz created\n" duration=168.027929ms execID=04aed
time="2023-11-03T13:51:39Z" level=info msg="kubectl label ns argocd-e2e--test-hook-before-hook-creation-failure-lmxdz e2e.argoproj.io=true" dir= execID=16b00
time="2023-11-03T13:51:39Z" level=debug msg="namespace/argocd-e2e--test-hook-before-hook-creation-failure-lmxdz labeled\n" duration=370.810793ms execID=16b00
time="2023-11-03T13:51:39Z" level=info msg="clean state" duration=2.780623884s id=TestHookBeforeHookCreationFailure-lmxdz name=TestHookBeforeHookCreationFailure password=password username=admin
time="2023-11-03T13:51:40Z" level=info msg=patching jsonPatch="[\n\t{\"op\": \"add\", \"path\": \"/metadata/annotations/argocd.argoproj.io~1hook-delete-policy\", \"value\": \"BeforeHookCreation\"},\n\t{\"op\": \"replace\", \"path\": \"/spec/containers/0/command\", \"value\": [\"sleep\", \"3\"]}\n]" path=hook/hook.yaml
time="2023-11-03T13:51:40Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:51:40Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/hook\":\"Sync\"},\"name\":\"hook\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:51:40Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:51:40Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=10d2b
time="2023-11-03T13:51:40Z" level=debug msg="diff --git a/hook/hook.yaml b/hook/hook.yaml\nindex ca89c3d..aa5540d 100644\n--- a/hook/hook.yaml\n+++ b/hook/hook.yaml\n@@ -3,12 +3,14 @@ kind: Pod\n metadata:\n   annotations:\n     argocd.argoproj.io/hook: Sync\n+    argocd.argoproj.io/hook-delete-policy: BeforeHookCreation\n   name: hook\n spec:\n   containers:\n-    - command:\n-        - \"true\"\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      name: main\n-  restartPolicy: Never\n\\ No newline at end of file\n+  - command:\n+    - sleep\n+    - \"3\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n+  restartPolicy: Never\n" duration=4.85222ms execID=10d2b
time="2023-11-03T13:51:40Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=6cf1b
time="2023-11-03T13:51:40Z" level=debug msg="[master 06d7f57] patch\n 1 file changed, 8 insertions(+), 6 deletions(-)\n" duration=12.056882ms execID=6cf1b
time="2023-11-03T13:51:40Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=e4039
Handling connection for 9081
time="2023-11-03T13:51:40Z" level=debug duration=39.852338ms execID=e4039
time="2023-11-03T13:51:40Z" level=info msg="../../dist/argocd app create test-hook-before-hook-creation-failure --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path hook --project default --dest-namespace argocd-e2e--test-hook-before-hook-creation-failure-lmxdz --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTg5OCwibmJmIjoxNjk5MDE5NDk4LCJpYXQiOjE2OTkwMTk0OTgsImp0aSI6IjhhNWMyMWRiLTg0N2MtNDc3NC04YTk5LTZkOWQ2MGYyZWY1ZSJ9.k8D6-FHazFxFrCsDk1Pt5VUdkdvoeELqCUEjQfgtCgI --insecure" dir= execID=67286
time="2023-11-03T13:51:41Z" level=debug msg="application 'test-hook-before-hook-creation-failure' created\n" duration=226.741332ms execID=67286
time="2023-11-03T13:51:41Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:51:41Z" level=info msg="../../dist/argocd app sync test-hook-before-hook-creation-failure --timeout 1 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTg5OCwibmJmIjoxNjk5MDE5NDk4LCJpYXQiOjE2OTkwMTk0OTgsImp0aSI6IjhhNWMyMWRiLTg0N2MtNDc3NC04YTk5LTZkOWQ2MGYyZWY1ZSJ9.k8D6-FHazFxFrCsDk1Pt5VUdkdvoeELqCUEjQfgtCgI --insecure" dir= execID=5bb98
time="2023-11-03T13:51:42Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:51:41+00:00                Pod  argocd-e2e--test-hook-before-hook-creation-failure-lmxdz                   pod  OutOfSync  Missing              \n2023-11-03T13:51:41+00:00                Pod  argocd-e2e--test-hook-before-hook-creation-failure-lmxdz                  hook   Running    Synced        Sync  pod/hook created\n2023-11-03T13:51:41+00:00                Pod  argocd-e2e--test-hook-before-hook-creation-failure-lmxdz                   pod  OutOfSync  Missing              pod/pod created\n2023-11-03T13:51:41+00:00                Pod  argocd-e2e--test-hook-before-hook-creation-failure-lmxdz                   pod    Synced  Progressing              pod/pod created\n" duration=1.103561384s execID=5bb98
time="2023-11-03T13:51:42Z" level=error msg="`../../dist/argocd app sync test-hook-before-hook-creation-failure --timeout 1 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTg5OCwibmJmIjoxNjk5MDE5NDk4LCJpYXQiOjE2OTkwMTk0OTgsImp0aSI6IjhhNWMyMWRiLTg0N2MtNDc3NC04YTk5LTZkOWQ2MGYyZWY1ZSJ9.k8D6-FHazFxFrCsDk1Pt5VUdkdvoeELqCUEjQfgtCgI --insecure` failed exit status 20: time=\"2023-11-03T13:51:42Z\" level=fatal msg=\"rpc error: code = Canceled desc = context canceled\"" execID=5bb98
time="2023-11-03T13:51:42Z" level=info msg="../../dist/argocd app terminate-op test-hook-before-hook-creation-failure --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTg5OCwibmJmIjoxNjk5MDE5NDk4LCJpYXQiOjE2OTkwMTk0OTgsImp0aSI6IjhhNWMyMWRiLTg0N2MtNDc3NC04YTk5LTZkOWQ2MGYyZWY1ZSJ9.k8D6-FHazFxFrCsDk1Pt5VUdkdvoeELqCUEjQfgtCgI --insecure" dir= execID=01a3e
time="2023-11-03T13:51:42Z" level=debug msg="Application 'test-hook-before-hook-creation-failure' operation terminating\n" duration=110.522245ms execID=01a3e
time="2023-11-03T13:51:42Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:51:42Z" level=info msg="pending: operation phase should be Failed, is Terminating"
time="2023-11-03T13:51:45Z" level=info msg="expectation succeeded: operation phase should be Failed, is Failed"
time="2023-11-03T13:51:45Z" level=info msg="expectation succeeded: right number of results, want 2, got 2"
time="2023-11-03T13:51:45Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestHookBeforeHookCreationFailure (8.30s)
=== RUN   TestHookSkip
time="2023-11-03T13:51:45Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=db495
time="2023-11-03T13:51:45Z" level=debug msg="namespace \"argocd-e2e--test-hook-before-hook-creation-failure-lmxdz\" deleted\n" duration=256.102171ms execID=db495
time="2023-11-03T13:51:45Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=813aa
time="2023-11-03T13:51:47Z" level=debug msg="No resources found\n" duration=1.573428238s execID=813aa
time="2023-11-03T13:51:47Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=bd6bb
time="2023-11-03T13:51:48Z" level=debug msg="No resources found\n" duration=1.412728384s execID=bd6bb
time="2023-11-03T13:51:49Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:51:49Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTkwOSwibmJmIjoxNjk5MDE5NTA5LCJpYXQiOjE2OTkwMTk1MDksImp0aSI6ImFjNmZhMjlkLWM1NWItNGNhYS1iZmY3LTBiMDQ5MTA5MTc3NiJ9.ikAI-BaJCHDsyaI01VuwVb5cNci8SruSTO6qaV0ZUi8 --insecure" dir= execID=56ed1
time="2023-11-03T13:51:49Z" level=debug duration=92.04646ms execID=56ed1
time="2023-11-03T13:51:49Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=5682b
time="2023-11-03T13:51:49Z" level=debug duration=2.174365ms execID=5682b
time="2023-11-03T13:51:49Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=7d8af
time="2023-11-03T13:51:49Z" level=debug duration=1.594025ms execID=7d8af
time="2023-11-03T13:51:49Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=a5b7a
time="2023-11-03T13:51:49Z" level=debug duration=1.434415ms execID=a5b7a
time="2023-11-03T13:51:49Z" level=info msg="pkill -9 gpg-agent" dir= execID=32bd0
time="2023-11-03T13:51:49Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=a731a
time="2023-11-03T13:51:49Z" level=debug duration=10.222048ms execID=a731a
time="2023-11-03T13:51:49Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=20d1f
time="2023-11-03T13:51:49Z" level=debug duration=34.023676ms execID=20d1f
time="2023-11-03T13:51:49Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=08fa2
time="2023-11-03T13:51:49Z" level=debug duration=1.951933ms execID=08fa2
time="2023-11-03T13:51:49Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=d5750
time="2023-11-03T13:51:49Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.655466ms execID=d5750
time="2023-11-03T13:51:49Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=019c8
time="2023-11-03T13:51:49Z" level=debug duration=26.386744ms execID=019c8
time="2023-11-03T13:51:49Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=11968
time="2023-11-03T13:51:49Z" level=debug duration=24.408676ms execID=11968
time="2023-11-03T13:51:49Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=f7f06
time="2023-11-03T13:51:49Z" level=debug duration=2.33087ms execID=f7f06
time="2023-11-03T13:51:49Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=94ffa
Handling connection for 9081
time="2023-11-03T13:51:49Z" level=debug duration=81.852785ms execID=94ffa
time="2023-11-03T13:51:49Z" level=info msg="kubectl create ns argocd-e2e--test-hook-skip-adzkc" dir= execID=d723a
time="2023-11-03T13:51:49Z" level=debug msg="namespace/argocd-e2e--test-hook-skip-adzkc created\n" duration=126.495195ms execID=d723a
time="2023-11-03T13:51:49Z" level=info msg="kubectl label ns argocd-e2e--test-hook-skip-adzkc e2e.argoproj.io=true" dir= execID=d440e
time="2023-11-03T13:51:50Z" level=debug msg="namespace/argocd-e2e--test-hook-skip-adzkc labeled\n" duration=271.503386ms execID=d440e
time="2023-11-03T13:51:50Z" level=info msg="clean state" duration=4.905851529s id=TestHookSkip-adzkc name=TestHookSkip password=password username=admin
time="2023-11-03T13:51:51Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/metadata/annotations\", \"value\": {\"argocd.argoproj.io/hook\": \"Skip\"}}]" path=hook/pod.yaml
time="2023-11-03T13:51:51Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:51:51Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"name\":\"pod\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:51:51Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:51:51Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=a1276
time="2023-11-03T13:51:51Z" level=debug msg="diff --git a/hook/pod.yaml b/hook/pod.yaml\nindex 001aa52..e79bc24 100644\n--- a/hook/pod.yaml\n+++ b/hook/pod.yaml\n@@ -1,12 +1,14 @@\n apiVersion: v1\n kind: Pod\n metadata:\n+  annotations:\n+    argocd.argoproj.io/hook: Skip\n   name: pod\n spec:\n   containers:\n-    - name: main\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      command:\n-        - \"true\"\n+  - command:\n+    - \"true\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n   restartPolicy: Never\n" duration=5.071437ms execID=a1276
time="2023-11-03T13:51:51Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=6aad5
time="2023-11-03T13:51:51Z" level=debug msg="[master 33a30b2] patch\n 1 file changed, 7 insertions(+), 5 deletions(-)\n" duration=13.439816ms execID=6aad5
time="2023-11-03T13:51:51Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=881a7
Handling connection for 9081
time="2023-11-03T13:51:51Z" level=debug duration=39.467571ms execID=881a7
time="2023-11-03T13:51:51Z" level=info msg="../../dist/argocd app create test-hook-skip --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path hook --project default --dest-namespace argocd-e2e--test-hook-skip-adzkc --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTkwOSwibmJmIjoxNjk5MDE5NTA5LCJpYXQiOjE2OTkwMTk1MDksImp0aSI6ImFjNmZhMjlkLWM1NWItNGNhYS1iZmY3LTBiMDQ5MTA5MTc3NiJ9.ikAI-BaJCHDsyaI01VuwVb5cNci8SruSTO6qaV0ZUi8 --insecure" dir= execID=7214d
time="2023-11-03T13:51:51Z" level=debug msg="application 'test-hook-skip' created\n" duration=218.989204ms execID=7214d
time="2023-11-03T13:51:51Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:51:51Z" level=info msg="../../dist/argocd app sync test-hook-skip --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTkwOSwibmJmIjoxNjk5MDE5NTA5LCJpYXQiOjE2OTkwMTk1MDksImp0aSI6ImFjNmZhMjlkLWM1NWItNGNhYS1iZmY3LTBiMDQ5MTA5MTc3NiJ9.ikAI-BaJCHDsyaI01VuwVb5cNci8SruSTO6qaV0ZUi8 --insecure" dir= execID=8cc20
time="2023-11-03T13:51:57Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                        NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:51:51+00:00                Pod  argocd-e2e--test-hook-skip-adzkc                   pod                                 \n2023-11-03T13:51:52+00:00                Pod  argocd-e2e--test-hook-skip-adzkc                  hook   Running   Synced        Sync  pod/hook created\n2023-11-03T13:51:57+00:00                Pod  argocd-e2e--test-hook-skip-adzkc                  hook  Succeeded   Synced        Sync  pod/hook created\n\nName:               argocd-e2e/test-hook-skip\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-hook-skip-adzkc\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-hook-skip\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               hook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (33a30b2)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      33a30b230013cc42d2215698fabd70d79d2c7f43\nPhase:              Succeeded\nStart:              2023-11-03 13:51:51 +0000 UTC\nFinished:           2023-11-03 13:51:57 +0000 UTC\nDuration:           6s\nMessage:            successfully synced (no more tasks)\n\nGROUP  KIND  NAMESPACE                         NAME  STATUS     HEALTH  HOOK  MESSAGE\n       Pod   argocd-e2e--test-hook-skip-adzkc  hook  Succeeded          Sync  pod/hook created\n       Pod   argocd-e2e--test-hook-skip-adzkc  pod                            \n" duration=6.316868486s execID=8cc20
time="2023-11-03T13:51:57Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:51:57Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:51:57Z" level=info msg="expectation succeeded: right number of results, want 1, got 1"
time="2023-11-03T13:51:57Z" level=info msg="expectation succeeded: pod predicate did not match any pod"
time="2023-11-03T13:51:57Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestHookSkip (12.52s)
=== RUN   TestNamingNonHookResource
time="2023-11-03T13:51:57Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=09af0
time="2023-11-03T13:51:58Z" level=debug msg="namespace \"argocd-e2e--test-hook-skip-adzkc\" deleted\n" duration=325.147301ms execID=09af0
time="2023-11-03T13:51:58Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=b353f
time="2023-11-03T13:51:58Z" level=debug msg="No resources found\n" duration=371.088211ms execID=b353f
time="2023-11-03T13:51:58Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=08c80
time="2023-11-03T13:51:58Z" level=debug msg="No resources found\n" duration=158.570378ms execID=08c80
time="2023-11-03T13:51:59Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:51:59Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTkxOSwibmJmIjoxNjk5MDE5NTE5LCJpYXQiOjE2OTkwMTk1MTksImp0aSI6IjY3YmI2YTAzLTE4MzMtNDUyYy05YmVjLTQ1MzA0ZGE1OWY4NyJ9.V8ZyGaduS__dw43fwxQ3xqWnw5mEtxsiIt0HrYShoXI --insecure" dir= execID=38d9b
time="2023-11-03T13:51:59Z" level=debug duration=86.210599ms execID=38d9b
time="2023-11-03T13:51:59Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=db94d
time="2023-11-03T13:51:59Z" level=debug duration=2.28305ms execID=db94d
time="2023-11-03T13:51:59Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=b6e89
time="2023-11-03T13:51:59Z" level=debug duration=1.485323ms execID=b6e89
time="2023-11-03T13:51:59Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=435d6
time="2023-11-03T13:51:59Z" level=debug duration=1.389524ms execID=435d6
time="2023-11-03T13:51:59Z" level=info msg="pkill -9 gpg-agent" dir= execID=9cd27
time="2023-11-03T13:51:59Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=7d000
time="2023-11-03T13:51:59Z" level=debug duration=10.397515ms execID=7d000
time="2023-11-03T13:51:59Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=da16f
time="2023-11-03T13:51:59Z" level=debug duration=60.380136ms execID=da16f
time="2023-11-03T13:51:59Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=0dce7
time="2023-11-03T13:51:59Z" level=debug duration=1.867193ms execID=0dce7
time="2023-11-03T13:51:59Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=9f311
time="2023-11-03T13:51:59Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.143927ms execID=9f311
time="2023-11-03T13:51:59Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=4d316
time="2023-11-03T13:51:59Z" level=debug duration=27.846226ms execID=4d316
time="2023-11-03T13:51:59Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=08098
time="2023-11-03T13:51:59Z" level=debug duration=21.259831ms execID=08098
time="2023-11-03T13:51:59Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=a4b54
time="2023-11-03T13:51:59Z" level=debug duration=2.620591ms execID=a4b54
time="2023-11-03T13:51:59Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=9abc7
Handling connection for 9081
time="2023-11-03T13:51:59Z" level=debug duration=71.318433ms execID=9abc7
time="2023-11-03T13:51:59Z" level=info msg="kubectl create ns argocd-e2e--test-naming-non-hook-resource-llbnn" dir= execID=7f6d6
time="2023-11-03T13:51:59Z" level=debug msg="namespace/argocd-e2e--test-naming-non-hook-resource-llbnn created\n" duration=102.80267ms execID=7f6d6
time="2023-11-03T13:51:59Z" level=info msg="kubectl label ns argocd-e2e--test-naming-non-hook-resource-llbnn e2e.argoproj.io=true" dir= execID=dc2a1
time="2023-11-03T13:51:59Z" level=debug msg="namespace/argocd-e2e--test-naming-non-hook-resource-llbnn labeled\n" duration=239.093928ms execID=dc2a1
time="2023-11-03T13:51:59Z" level=info msg="clean state" duration=2.172459864s id=TestNamingNonHookResource-llbnn name=TestNamingNonHookResource password=password username=admin
time="2023-11-03T13:52:00Z" level=info msg=patching jsonPatch="[{\"op\": \"remove\", \"path\": \"/metadata/name\"}]" path=hook/pod.yaml
time="2023-11-03T13:52:00Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:52:00Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"name\":\"pod\"},\"spec\":{\"containers\":[{\"command\":[\"true\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}],\"restartPolicy\":\"Never\"}}"
time="2023-11-03T13:52:00Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:52:00Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=a1f92
time="2023-11-03T13:52:00Z" level=debug msg="diff --git a/hook/pod.yaml b/hook/pod.yaml\nindex 001aa52..f6c99fb 100644\n--- a/hook/pod.yaml\n+++ b/hook/pod.yaml\n@@ -1,12 +1,11 @@\n apiVersion: v1\n kind: Pod\n-metadata:\n-  name: pod\n+metadata: {}\n spec:\n   containers:\n-    - name: main\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      command:\n-        - \"true\"\n+  - command:\n+    - \"true\"\n+    image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n+    imagePullPolicy: IfNotPresent\n+    name: main\n   restartPolicy: Never\n" duration=5.294894ms execID=a1f92
time="2023-11-03T13:52:00Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=9202c
time="2023-11-03T13:52:00Z" level=debug msg="[master a45d4d1] patch\n 1 file changed, 6 insertions(+), 7 deletions(-)\n" duration=13.354725ms execID=9202c
time="2023-11-03T13:52:00Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=e6d51
Handling connection for 9081
time="2023-11-03T13:52:00Z" level=debug duration=40.537342ms execID=e6d51
time="2023-11-03T13:52:00Z" level=info msg="../../dist/argocd app create test-naming-non-hook-resource --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path hook --project default --dest-namespace argocd-e2e--test-naming-non-hook-resource-llbnn --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTkxOSwibmJmIjoxNjk5MDE5NTE5LCJpYXQiOjE2OTkwMTk1MTksImp0aSI6IjY3YmI2YTAzLTE4MzMtNDUyYy05YmVjLTQ1MzA0ZGE1OWY4NyJ9.V8ZyGaduS__dw43fwxQ3xqWnw5mEtxsiIt0HrYShoXI --insecure" dir= execID=9eb79
time="2023-11-03T13:52:01Z" level=debug msg="application 'test-naming-non-hook-resource' created\n" duration=283.265834ms execID=9eb79
time="2023-11-03T13:52:01Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:52:01Z" level=info msg="../../dist/argocd app sync test-naming-non-hook-resource --timeout 30 --async --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTkxOSwibmJmIjoxNjk5MDE5NTE5LCJpYXQiOjE2OTkwMTk1MTksImp0aSI6IjY3YmI2YTAzLTE4MzMtNDUyYy05YmVjLTQ1MzA0ZGE1OWY4NyJ9.V8ZyGaduS__dw43fwxQ3xqWnw5mEtxsiIt0HrYShoXI --insecure" dir= execID=c5a29
time="2023-11-03T13:52:01Z" level=debug duration=119.530522ms execID=c5a29
time="2023-11-03T13:52:01Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:52:01Z" level=info msg="pending: operation phase should be Failed, is Running"
time="2023-11-03T13:52:04Z" level=info msg="expectation succeeded: operation phase should be Failed, is Failed"
time="2023-11-03T13:52:04Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNamingNonHookResource (6.65s)
=== RUN   TestAutomaticallyNamingUnnamedHook
    fixture.go:901: 
--- SKIP: TestAutomaticallyNamingUnnamedHook (0.00s)
=== RUN   TestJsonnetAppliedCorrectly
time="2023-11-03T13:52:04Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=c3614
time="2023-11-03T13:52:04Z" level=debug msg="namespace \"argocd-e2e--test-naming-non-hook-resource-llbnn\" deleted\n" duration=224.145077ms execID=c3614
time="2023-11-03T13:52:04Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=f8657
time="2023-11-03T13:52:05Z" level=debug msg="No resources found\n" duration=472.608295ms execID=f8657
time="2023-11-03T13:52:05Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=8ec9f
time="2023-11-03T13:52:05Z" level=debug msg="No resources found\n" duration=282.558196ms execID=8ec9f
time="2023-11-03T13:52:06Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:52:06Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTkyNiwibmJmIjoxNjk5MDE5NTI2LCJpYXQiOjE2OTkwMTk1MjYsImp0aSI6IjY3OWUyMTNlLTY4YzItNGNjOC1iY2Q3LWExN2ExNTFiMTEzOSJ9.GPAMzm57UrsVBsHhfzl8tU2D2zw-fjpwtadBxXlyvdg --insecure" dir= execID=4e20e
time="2023-11-03T13:52:06Z" level=debug duration=116.805508ms execID=4e20e
time="2023-11-03T13:52:06Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=4fc1f
time="2023-11-03T13:52:06Z" level=debug duration=1.987333ms execID=4fc1f
time="2023-11-03T13:52:06Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=4ab66
time="2023-11-03T13:52:06Z" level=debug duration=1.522295ms execID=4ab66
time="2023-11-03T13:52:06Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=4de93
time="2023-11-03T13:52:06Z" level=debug duration=1.541831ms execID=4de93
time="2023-11-03T13:52:06Z" level=info msg="pkill -9 gpg-agent" dir= execID=6bb29
time="2023-11-03T13:52:06Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=f56a6
time="2023-11-03T13:52:06Z" level=debug duration=9.98411ms execID=f56a6
time="2023-11-03T13:52:06Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=63ac7
time="2023-11-03T13:52:06Z" level=debug duration=35.911514ms execID=63ac7
time="2023-11-03T13:52:06Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=27383
time="2023-11-03T13:52:06Z" level=debug duration=2.121042ms execID=27383
time="2023-11-03T13:52:06Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=01d86
time="2023-11-03T13:52:06Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.041568ms execID=01d86
time="2023-11-03T13:52:06Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=407d7
time="2023-11-03T13:52:06Z" level=debug duration=28.174214ms execID=407d7
time="2023-11-03T13:52:06Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=1165c
time="2023-11-03T13:52:06Z" level=debug duration=22.753424ms execID=1165c
time="2023-11-03T13:52:06Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=2ad06
time="2023-11-03T13:52:06Z" level=debug duration=2.369303ms execID=2ad06
time="2023-11-03T13:52:06Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=ee72c
Handling connection for 9081
time="2023-11-03T13:52:06Z" level=debug duration=112.736103ms execID=ee72c
time="2023-11-03T13:52:06Z" level=info msg="kubectl create ns argocd-e2e--test-jsonnet-applied-correctly-qbmwz" dir= execID=74a53
time="2023-11-03T13:52:06Z" level=debug msg="namespace/argocd-e2e--test-jsonnet-applied-correctly-qbmwz created\n" duration=165.862459ms execID=74a53
time="2023-11-03T13:52:06Z" level=info msg="kubectl label ns argocd-e2e--test-jsonnet-applied-correctly-qbmwz e2e.argoproj.io=true" dir= execID=bd63d
time="2023-11-03T13:52:07Z" level=debug msg="namespace/argocd-e2e--test-jsonnet-applied-correctly-qbmwz labeled\n" duration=274.918674ms execID=bd63d
time="2023-11-03T13:52:07Z" level=info msg="clean state" duration=2.72006063s id=TestJsonnetAppliedCorrectly-qbmwz name=TestJsonnetAppliedCorrectly password=password username=admin
time="2023-11-03T13:52:08Z" level=info msg="../../dist/argocd app create test-jsonnet-applied-correctly --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path jsonnet-tla --project default --dest-namespace argocd-e2e--test-jsonnet-applied-correctly-qbmwz --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTkyNiwibmJmIjoxNjk5MDE5NTI2LCJpYXQiOjE2OTkwMTk1MjYsImp0aSI6IjY3OWUyMTNlLTY4YzItNGNjOC1iY2Q3LWExN2ExNTFiMTEzOSJ9.GPAMzm57UrsVBsHhfzl8tU2D2zw-fjpwtadBxXlyvdg --insecure" dir= execID=20ec9
time="2023-11-03T13:52:08Z" level=debug msg="application 'test-jsonnet-applied-correctly' created\n" duration=295.693115ms execID=20ec9
time="2023-11-03T13:52:08Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:52:08Z" level=info msg="../../dist/argocd app sync test-jsonnet-applied-correctly --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTkyNiwibmJmIjoxNjk5MDE5NTI2LCJpYXQiOjE2OTkwMTk1MjYsImp0aSI6IjY3OWUyMTNlLTY4YzItNGNjOC1iY2Q3LWExN2ExNTFiMTEzOSJ9.GPAMzm57UrsVBsHhfzl8tU2D2zw-fjpwtadBxXlyvdg --insecure" dir= execID=b7d94
time="2023-11-03T13:52:09Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:52:08+00:00            Service  argocd-e2e--test-jsonnet-applied-correctly-qbmwz  jsonnet-guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:52:08+00:00   apps  Deployment  argocd-e2e--test-jsonnet-applied-correctly-qbmwz  jsonnet-guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:52:09+00:00            Service  argocd-e2e--test-jsonnet-applied-correctly-qbmwz  jsonnet-guestbook-ui    Synced  Progressing              \n2023-11-03T13:52:09+00:00            Service  argocd-e2e--test-jsonnet-applied-correctly-qbmwz  jsonnet-guestbook-ui    Synced   Progressing              service/jsonnet-guestbook-ui created\n2023-11-03T13:52:09+00:00   apps  Deployment  argocd-e2e--test-jsonnet-applied-correctly-qbmwz  jsonnet-guestbook-ui  OutOfSync  Missing                  deployment.apps/jsonnet-guestbook-ui created\n2023-11-03T13:52:09+00:00   apps  Deployment  argocd-e2e--test-jsonnet-applied-correctly-qbmwz  jsonnet-guestbook-ui    Synced  Progressing              deployment.apps/jsonnet-guestbook-ui created\n\nName:               argocd-e2e/test-jsonnet-applied-correctly\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-jsonnet-applied-correctly-qbmwz\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-jsonnet-applied-correctly\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               jsonnet-tla\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (a000f8a)\nHealth Status:      Progressing\n\nOperation:          Sync\nSync Revision:      a000f8a68a14b75d78b3744a8d7133293e01db01\nPhase:              Succeeded\nStart:              2023-11-03 13:52:08 +0000 UTC\nFinished:           2023-11-03 13:52:09 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                         NAME                  STATUS  HEALTH       HOOK  MESSAGE\n       Service     argocd-e2e--test-jsonnet-applied-correctly-qbmwz  jsonnet-guestbook-ui  Synced  Progressing        service/jsonnet-guestbook-ui created\napps   Deployment  argocd-e2e--test-jsonnet-applied-correctly-qbmwz  jsonnet-guestbook-ui  Synced  Progressing        deployment.apps/jsonnet-guestbook-ui created\n" duration=951.905803ms execID=b7d94
time="2023-11-03T13:52:09Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:52:09Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:52:09Z" level=info msg="../../dist/argocd app manifests test-jsonnet-applied-correctly --source live --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTkyNiwibmJmIjoxNjk5MDE5NTI2LCJpYXQiOjE2OTkwMTk1MjYsImp0aSI6IjY3OWUyMTNlLTY4YzItNGNjOC1iY2Q3LWExN2ExNTFiMTEzOSJ9.GPAMzm57UrsVBsHhfzl8tU2D2zw-fjpwtadBxXlyvdg --insecure" dir= execID=88af7
time="2023-11-03T13:52:09Z" level=debug msg="---\napiVersion: v1\nkind: Service\nmetadata:\n  annotations:\n    kubectl.kubernetes.io/last-applied-configuration: |\n      {\"apiVersion\":\"v1\",\"kind\":\"Service\",\"metadata\":{\"annotations\":{},\"labels\":{\"app.kubernetes.io/instance\":\"test-jsonnet-applied-correctly\"},\"name\":\"jsonnet-guestbook-ui\",\"namespace\":\"argocd-e2e--test-jsonnet-applied-correctly-qbmwz\"},\"spec\":{\"ports\":[{\"port\":80,\"targetPort\":80}],\"selector\":{\"app\":\"jsonnet-guestbook-ui\"},\"type\":\"LoadBalancer\"}}\n  creationTimestamp: \"2023-11-03T13:52:09Z\"\n  finalizers:\n  - service.kubernetes.io/load-balancer-cleanup\n  labels:\n    app.kubernetes.io/instance: test-jsonnet-applied-correctly\n  managedFields:\n  - apiVersion: v1\n    fieldsType: FieldsV1\n    fieldsV1:\n      f:metadata:\n        f:annotations:\n          .: {}\n          f:kubectl.kubernetes.io/last-applied-configuration: {}\n        f:labels:\n          .: {}\n          f:app.kubernetes.io/instance: {}\n      f:spec:\n        f:allocateLoadBalancerNodePorts: {}\n        f:externalTrafficPolicy: {}\n        f:internalTrafficPolicy: {}\n        f:ports:\n          .: {}\n          k:{\"port\":80,\"protocol\":\"TCP\"}:\n            .: {}\n            f:port: {}\n            f:protocol: {}\n            f:targetPort: {}\n        f:selector: {}\n        f:sessionAffinity: {}\n        f:type: {}\n    manager: argocd-controller\n    operation: Update\n    time: \"2023-11-03T13:52:09Z\"\n  - apiVersion: v1\n    fieldsType: FieldsV1\n    fieldsV1:\n      f:metadata:\n        f:finalizers:\n          .: {}\n          v:\"service.kubernetes.io/load-balancer-cleanup\": {}\n    manager: openstack-cloud-controller-manager\n    operation: Update\n    subresource: status\n    time: \"2023-11-03T13:52:09Z\"\n  name: jsonnet-guestbook-ui\n  namespace: argocd-e2e--test-jsonnet-applied-correctly-qbmwz\n  resourceVersion: \"36287826\"\n  uid: e839578a-4a74-49a1-bfb0-bb9d07bd18b5\nspec:\n  allocateLoadBalancerNodePorts: true\n  clusterIP: 172.30.209.253\n  clusterIPs:\n  - 172.30.209.253\n  externalTrafficPolicy: Cluster\n  internalTrafficPolicy: Cluster\n  ipFamilies:\n  - IPv4\n  ipFamilyPolicy: SingleStack\n  ports:\n  - nodePort: 32097\n    port: 80\n    protocol: TCP\n    targetPort: 80\n  selector:\n    app: jsonnet-guestbook-ui\n  sessionAffinity: None\n  type: LoadBalancer\nstatus:\n  loadBalancer: {}\n\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  annotations:\n    deployment.kubernetes.io/revision: \"1\"\n    kubectl.kubernetes.io/last-applied-configuration: |\n      {\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app.kubernetes.io/instance\":\"test-jsonnet-applied-correctly\"},\"name\":\"jsonnet-guestbook-ui\",\"namespace\":\"argocd-e2e--test-jsonnet-applied-correctly-qbmwz\"},\"spec\":{\"replicas\":1,\"revisionHistoryLimit\":3,\"selector\":{\"matchLabels\":{\"app\":\"jsonnet-guestbook-ui\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"jsonnet-guestbook-ui\"}},\"spec\":{\"containers\":[{\"image\":\"gcr.io/heptio-images/ks-guestbook-demo:0.2\",\"name\":\"jsonnet-guestbook-ui\",\"ports\":[{\"containerPort\":80}]}]}}}}\n  creationTimestamp: \"2023-11-03T13:52:09Z\"\n  generation: 1\n  labels:\n    app.kubernetes.io/instance: test-jsonnet-applied-correctly\n  managedFields:\n  - apiVersion: apps/v1\n    fieldsType: FieldsV1\n    fieldsV1:\n      f:metadata:\n        f:annotations:\n          .: {}\n          f:kubectl.kubernetes.io/last-applied-configuration: {}\n        f:labels:\n          .: {}\n          f:app.kubernetes.io/instance: {}\n      f:spec:\n        f:progressDeadlineSeconds: {}\n        f:replicas: {}\n        f:revisionHistoryLimit: {}\n        f:selector: {}\n        f:strategy:\n          f:rollingUpdate:\n            .: {}\n            f:maxSurge: {}\n            f:maxUnavailable: {}\n          f:type: {}\n        f:template:\n          f:metadata:\n            f:labels:\n              .: {}\n              f:app: {}\n          f:spec:\n            f:containers:\n              k:{\"name\":\"jsonnet-guestbook-ui\"}:\n                .: {}\n                f:image: {}\n                f:imagePullPolicy: {}\n                f:name: {}\n                f:ports:\n                  .: {}\n                  k:{\"containerPort\":80,\"protocol\":\"TCP\"}:\n                    .: {}\n                    f:containerPort: {}\n                    f:protocol: {}\n                f:resources: {}\n                f:terminationMessagePath: {}\n                f:terminationMessagePolicy: {}\n            f:dnsPolicy: {}\n            f:restartPolicy: {}\n            f:schedulerName: {}\n            f:securityContext: {}\n            f:terminationGracePeriodSeconds: {}\n    manager: argocd-controller\n    operation: Update\n    time: \"2023-11-03T13:52:09Z\"\n  - apiVersion: apps/v1\n    fieldsType: FieldsV1\n    fieldsV1:\n      f:metadata:\n        f:annotations:\n          f:deployment.kubernetes.io/revision: {}\n      f:status:\n        f:conditions:\n          .: {}\n          k:{\"type\":\"Available\"}:\n            .: {}\n            f:lastTransitionTime: {}\n            f:lastUpdateTime: {}\n            f:message: {}\n            f:reason: {}\n            f:status: {}\n            f:type: {}\n          k:{\"type\":\"Progressing\"}:\n            .: {}\n            f:lastTransitionTime: {}\n            f:lastUpdateTime: {}\n            f:message: {}\n            f:reason: {}\n            f:status: {}\n            f:type: {}\n        f:observedGeneration: {}\n        f:replicas: {}\n        f:unavailableReplicas: {}\n        f:updatedReplicas: {}\n    manager: kube-controller-manager\n    operation: Update\n    subresource: status\n    time: \"2023-11-03T13:52:09Z\"\n  name: jsonnet-guestbook-ui\n  namespace: argocd-e2e--test-jsonnet-applied-correctly-qbmwz\n  resourceVersion: \"36287833\"\n  uid: 5a2eb1f3-8ab8-4946-b6e3-cf0064f14ace\nspec:\n  progressDeadlineSeconds: 600\n  replicas: 1\n  revisionHistoryLimit: 3\n  selector:\n    matchLabels:\n      app: jsonnet-guestbook-ui\n  strategy:\n    rollingUpdate:\n      maxSurge: 25%\n      maxUnavailable: 25%\n    type: RollingUpdate\n  template:\n    metadata:\n      creationTimestamp: null\n      labels:\n        app: jsonnet-guestbook-ui\n    spec:\n      containers:\n      - image: gcr.io/heptio-images/ks-guestbook-demo:0.2\n        imagePullPolicy: IfNotPresent\n        name: jsonnet-guestbook-ui\n        ports:\n        - containerPort: 80\n          protocol: TCP\n        resources: {}\n        terminationMessagePath: /dev/termination-log\n        terminationMessagePolicy: File\n      dnsPolicy: ClusterFirst\n      restartPolicy: Always\n      schedulerName: default-scheduler\n      securityContext: {}\n      terminationGracePeriodSeconds: 30\nstatus:\n  conditions:\n  - lastTransitionTime: \"2023-11-03T13:52:09Z\"\n    lastUpdateTime: \"2023-11-03T13:52:09Z\"\n    message: Deployment does not have minimum availability.\n    reason: MinimumReplicasUnavailable\n    status: \"False\"\n    type: Available\n  - lastTransitionTime: \"2023-11-03T13:52:09Z\"\n    lastUpdateTime: \"2023-11-03T13:52:09Z\"\n    message: ReplicaSet \"jsonnet-guestbook-ui-7d4f7ff69b\" is progressing.\n    reason: ReplicaSetUpdated\n    status: \"True\"\n    type: Progressing\n  observedGeneration: 1\n  replicas: 1\n  unavailableReplicas: 1\n  updatedReplicas: 1\n\n" duration=85.69503ms execID=88af7
time="2023-11-03T13:52:09Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestJsonnetAppliedCorrectly (5.07s)
=== RUN   TestJsonnetTlaParameterAppliedCorrectly
time="2023-11-03T13:52:09Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=223c5
time="2023-11-03T13:52:09Z" level=debug msg="namespace \"argocd-e2e--test-jsonnet-applied-correctly-qbmwz\" deleted\n" duration=249.794917ms execID=223c5
time="2023-11-03T13:52:09Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=b18fb
time="2023-11-03T13:52:10Z" level=debug msg="No resources found\n" duration=347.31195ms execID=b18fb
time="2023-11-03T13:52:10Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=c32c2
time="2023-11-03T13:52:10Z" level=debug msg="No resources found\n" duration=226.501373ms execID=c32c2
time="2023-11-03T13:52:11Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:52:11Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTkzMSwibmJmIjoxNjk5MDE5NTMxLCJpYXQiOjE2OTkwMTk1MzEsImp0aSI6IjU4NGJmNWE3LTYyODgtNDc3Mi05OWQ2LWM5MTBmMjhhMjUwZiJ9.mcDBVR9LuYlZpCvbU23MrAimLlQKBCA_1VkmV-Rg4fw --insecure" dir= execID=c5ea5
time="2023-11-03T13:52:11Z" level=debug duration=83.807852ms execID=c5ea5
time="2023-11-03T13:52:11Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=ec735
time="2023-11-03T13:52:11Z" level=debug duration=2.114488ms execID=ec735
time="2023-11-03T13:52:11Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=ed0b3
time="2023-11-03T13:52:11Z" level=debug duration=1.721591ms execID=ed0b3
time="2023-11-03T13:52:11Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=cd89e
time="2023-11-03T13:52:11Z" level=debug duration=1.397385ms execID=cd89e
time="2023-11-03T13:52:11Z" level=info msg="pkill -9 gpg-agent" dir= execID=4535e
time="2023-11-03T13:52:11Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=a374b
time="2023-11-03T13:52:11Z" level=debug duration=9.996283ms execID=a374b
time="2023-11-03T13:52:11Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=01c38
time="2023-11-03T13:52:11Z" level=debug duration=34.291092ms execID=01c38
time="2023-11-03T13:52:11Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=a54b4
time="2023-11-03T13:52:11Z" level=debug duration=1.794861ms execID=a54b4
time="2023-11-03T13:52:11Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=068b8
time="2023-11-03T13:52:11Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=23.276934ms execID=068b8
time="2023-11-03T13:52:11Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=2206f
time="2023-11-03T13:52:11Z" level=debug duration=26.772005ms execID=2206f
time="2023-11-03T13:52:11Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=3dcab
time="2023-11-03T13:52:11Z" level=debug duration=22.330116ms execID=3dcab
time="2023-11-03T13:52:11Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=1f06a
time="2023-11-03T13:52:11Z" level=debug duration=2.601496ms execID=1f06a
time="2023-11-03T13:52:11Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=c127c
Handling connection for 9081
time="2023-11-03T13:52:11Z" level=debug duration=85.80136ms execID=c127c
time="2023-11-03T13:52:11Z" level=info msg="kubectl create ns argocd-e2e--test-jsonnet-tla-parameter-applied-correctly-lbsfm" dir= execID=42a94
time="2023-11-03T13:52:11Z" level=debug msg="namespace/argocd-e2e--test-jsonnet-tla-parameter-applied-correctly-lbsfm created\n" duration=161.20186ms execID=42a94
time="2023-11-03T13:52:11Z" level=info msg="kubectl label ns argocd-e2e--test-jsonnet-tla-parameter-applied-correctly-lbsfm e2e.argoproj.io=true" dir= execID=569aa
time="2023-11-03T13:52:12Z" level=debug msg="namespace/argocd-e2e--test-jsonnet-tla-parameter-applied-correctly-lbsfm labeled\n" duration=223.420406ms execID=569aa
time="2023-11-03T13:52:12Z" level=info msg="clean state" duration=2.571965766s id=TestJsonnetTlaParameterAppliedCorrectly-lbsfm name=TestJsonnetTlaParameterAppliedCorrectly password=password username=admin
time="2023-11-03T13:52:13Z" level=info msg="../../dist/argocd app create test-jsonnet-tla-parameter-applied-correctly --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --jsonnet-tla-str name=testing-tla --jsonnet-tla-code replicas=0 --dest-server https://kubernetes.default.svc --path jsonnet-tla --project default --dest-namespace argocd-e2e--test-jsonnet-tla-parameter-applied-correctly-lbsfm --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTkzMSwibmJmIjoxNjk5MDE5NTMxLCJpYXQiOjE2OTkwMTk1MzEsImp0aSI6IjU4NGJmNWE3LTYyODgtNDc3Mi05OWQ2LWM5MTBmMjhhMjUwZiJ9.mcDBVR9LuYlZpCvbU23MrAimLlQKBCA_1VkmV-Rg4fw --insecure" dir= execID=6312b
time="2023-11-03T13:52:13Z" level=debug msg="application 'test-jsonnet-tla-parameter-applied-correctly' created\n" duration=296.273745ms execID=6312b
time="2023-11-03T13:52:13Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:52:13Z" level=info msg="../../dist/argocd app sync test-jsonnet-tla-parameter-applied-correctly --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTkzMSwibmJmIjoxNjk5MDE5NTMxLCJpYXQiOjE2OTkwMTk1MzEsImp0aSI6IjU4NGJmNWE3LTYyODgtNDc3Mi05OWQ2LWM5MTBmMjhhMjUwZiJ9.mcDBVR9LuYlZpCvbU23MrAimLlQKBCA_1VkmV-Rg4fw --insecure" dir= execID=0f70c
time="2023-11-03T13:52:14Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                                      NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:52:13+00:00            Service  argocd-e2e--test-jsonnet-tla-parameter-applied-correctly-lbsfm           testing-tla  OutOfSync  Missing              \n2023-11-03T13:52:13+00:00   apps  Deployment  argocd-e2e--test-jsonnet-tla-parameter-applied-correctly-lbsfm           testing-tla  OutOfSync  Missing              \n\nName:               argocd-e2e/test-jsonnet-tla-parameter-applied-correctly\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-jsonnet-tla-parameter-applied-correctly-lbsfm\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-jsonnet-tla-parameter-applied-correctly\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               jsonnet-tla\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (587ea0d)\nHealth Status:      Progressing\n\nOperation:          Sync\nSync Revision:      587ea0d6fafacc854eed64688ee62db99427b987\nPhase:              Succeeded\nStart:              2023-11-03 13:52:13 +0000 UTC\nFinished:           2023-11-03 13:52:13 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                                       NAME         STATUS  HEALTH       HOOK  MESSAGE\n       Service     argocd-e2e--test-jsonnet-tla-parameter-applied-correctly-lbsfm  testing-tla  Synced  Progressing        service/testing-tla created\napps   Deployment  argocd-e2e--test-jsonnet-tla-parameter-applied-correctly-lbsfm  testing-tla  Synced  Healthy            deployment.apps/testing-tla created\n" duration=808.477984ms execID=0f70c
time="2023-11-03T13:52:14Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:52:14Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:52:14Z" level=info msg="../../dist/argocd app manifests test-jsonnet-tla-parameter-applied-correctly --source live --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTkzMSwibmJmIjoxNjk5MDE5NTMxLCJpYXQiOjE2OTkwMTk1MzEsImp0aSI6IjU4NGJmNWE3LTYyODgtNDc3Mi05OWQ2LWM5MTBmMjhhMjUwZiJ9.mcDBVR9LuYlZpCvbU23MrAimLlQKBCA_1VkmV-Rg4fw --insecure" dir= execID=7d935
time="2023-11-03T13:52:14Z" level=debug msg="---\napiVersion: v1\nkind: Service\nmetadata:\n  annotations:\n    kubectl.kubernetes.io/last-applied-configuration: |\n      {\"apiVersion\":\"v1\",\"kind\":\"Service\",\"metadata\":{\"annotations\":{},\"labels\":{\"app.kubernetes.io/instance\":\"test-jsonnet-tla-parameter-applied-correctly\"},\"name\":\"testing-tla\",\"namespace\":\"argocd-e2e--test-jsonnet-tla-parameter-applied-correctly-lbsfm\"},\"spec\":{\"ports\":[{\"port\":80,\"targetPort\":80}],\"selector\":{\"app\":\"testing-tla\"},\"type\":\"LoadBalancer\"}}\n  creationTimestamp: \"2023-11-03T13:52:13Z\"\n  labels:\n    app.kubernetes.io/instance: test-jsonnet-tla-parameter-applied-correctly\n  managedFields:\n  - apiVersion: v1\n    fieldsType: FieldsV1\n    fieldsV1:\n      f:metadata:\n        f:annotations:\n          .: {}\n          f:kubectl.kubernetes.io/last-applied-configuration: {}\n        f:labels:\n          .: {}\n          f:app.kubernetes.io/instance: {}\n      f:spec:\n        f:allocateLoadBalancerNodePorts: {}\n        f:externalTrafficPolicy: {}\n        f:internalTrafficPolicy: {}\n        f:ports:\n          .: {}\n          k:{\"port\":80,\"protocol\":\"TCP\"}:\n            .: {}\n            f:port: {}\n            f:protocol: {}\n            f:targetPort: {}\n        f:selector: {}\n        f:sessionAffinity: {}\n        f:type: {}\n    manager: argocd-controller\n    operation: Update\n    time: \"2023-11-03T13:52:13Z\"\n  name: testing-tla\n  namespace: argocd-e2e--test-jsonnet-tla-parameter-applied-correctly-lbsfm\n  resourceVersion: \"36287982\"\n  uid: 1167a284-129e-4e94-b245-ea1b9872825d\nspec:\n  allocateLoadBalancerNodePorts: true\n  clusterIP: 172.30.144.221\n  clusterIPs:\n  - 172.30.144.221\n  externalTrafficPolicy: Cluster\n  internalTrafficPolicy: Cluster\n  ipFamilies:\n  - IPv4\n  ipFamilyPolicy: SingleStack\n  ports:\n  - nodePort: 32401\n    port: 80\n    protocol: TCP\n    targetPort: 80\n  selector:\n    app: testing-tla\n  sessionAffinity: None\n  type: LoadBalancer\nstatus:\n  loadBalancer: {}\n\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  annotations:\n    deployment.kubernetes.io/revision: \"1\"\n    kubectl.kubernetes.io/last-applied-configuration: |\n      {\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app.kubernetes.io/instance\":\"test-jsonnet-tla-parameter-applied-correctly\"},\"name\":\"testing-tla\",\"namespace\":\"argocd-e2e--test-jsonnet-tla-parameter-applied-correctly-lbsfm\"},\"spec\":{\"replicas\":0,\"revisionHistoryLimit\":3,\"selector\":{\"matchLabels\":{\"app\":\"testing-tla\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testing-tla\"}},\"spec\":{\"containers\":[{\"image\":\"gcr.io/heptio-images/ks-guestbook-demo:0.2\",\"name\":\"testing-tla\",\"ports\":[{\"containerPort\":80}]}]}}}}\n  creationTimestamp: \"2023-11-03T13:52:13Z\"\n  generation: 1\n  labels:\n    app.kubernetes.io/instance: test-jsonnet-tla-parameter-applied-correctly\n  managedFields:\n  - apiVersion: apps/v1\n    fieldsType: FieldsV1\n    fieldsV1:\n      f:metadata:\n        f:annotations:\n          .: {}\n          f:kubectl.kubernetes.io/last-applied-configuration: {}\n        f:labels:\n          .: {}\n          f:app.kubernetes.io/instance: {}\n      f:spec:\n        f:progressDeadlineSeconds: {}\n        f:replicas: {}\n        f:revisionHistoryLimit: {}\n        f:selector: {}\n        f:strategy:\n          f:rollingUpdate:\n            .: {}\n            f:maxSurge: {}\n            f:maxUnavailable: {}\n          f:type: {}\n        f:template:\n          f:metadata:\n            f:labels:\n              .: {}\n              f:app: {}\n          f:spec:\n            f:containers:\n              k:{\"name\":\"testing-tla\"}:\n                .: {}\n                f:image: {}\n                f:imagePullPolicy: {}\n                f:name: {}\n                f:ports:\n                  .: {}\n                  k:{\"containerPort\":80,\"protocol\":\"TCP\"}:\n                    .: {}\n                    f:containerPort: {}\n                    f:protocol: {}\n                f:resources: {}\n                f:terminationMessagePath: {}\n                f:terminationMessagePolicy: {}\n            f:dnsPolicy: {}\n            f:restartPolicy: {}\n            f:schedulerName: {}\n            f:securityContext: {}\n            f:terminationGracePeriodSeconds: {}\n    manager: argocd-controller\n    operation: Update\n    time: \"2023-11-03T13:52:13Z\"\n  - apiVersion: apps/v1\n    fieldsType: FieldsV1\n    fieldsV1:\n      f:metadata:\n        f:annotations:\n          f:deployment.kubernetes.io/revision: {}\n      f:status:\n        f:conditions:\n          .: {}\n          k:{\"type\":\"Available\"}:\n            .: {}\n            f:lastTransitionTime: {}\n            f:lastUpdateTime: {}\n            f:message: {}\n            f:reason: {}\n            f:status: {}\n            f:type: {}\n          k:{\"type\":\"Progressing\"}:\n            .: {}\n            f:lastTransitionTime: {}\n            f:lastUpdateTime: {}\n            f:message: {}\n            f:reason: {}\n            f:status: {}\n            f:type: {}\n        f:observedGeneration: {}\n    manager: kube-controller-manager\n    operation: Update\n    subresource: status\n    time: \"2023-11-03T13:52:14Z\"\n  name: testing-tla\n  namespace: argocd-e2e--test-jsonnet-tla-parameter-applied-correctly-lbsfm\n  resourceVersion: \"36287992\"\n  uid: e3f8cd8d-3b32-4a4c-a017-33d78d3c53bb\nspec:\n  progressDeadlineSeconds: 600\n  replicas: 0\n  revisionHistoryLimit: 3\n  selector:\n    matchLabels:\n      app: testing-tla\n  strategy:\n    rollingUpdate:\n      maxSurge: 25%\n      maxUnavailable: 25%\n    type: RollingUpdate\n  template:\n    metadata:\n      creationTimestamp: null\n      labels:\n        app: testing-tla\n    spec:\n      containers:\n      - image: gcr.io/heptio-images/ks-guestbook-demo:0.2\n        imagePullPolicy: IfNotPresent\n        name: testing-tla\n        ports:\n        - containerPort: 80\n          protocol: TCP\n        resources: {}\n        terminationMessagePath: /dev/termination-log\n        terminationMessagePolicy: File\n      dnsPolicy: ClusterFirst\n      restartPolicy: Always\n      schedulerName: default-scheduler\n      securityContext: {}\n      terminationGracePeriodSeconds: 30\nstatus:\n  conditions:\n  - lastTransitionTime: \"2023-11-03T13:52:14Z\"\n    lastUpdateTime: \"2023-11-03T13:52:14Z\"\n    message: Deployment has minimum availability.\n    reason: MinimumReplicasAvailable\n    status: \"True\"\n    type: Available\n  - lastTransitionTime: \"2023-11-03T13:52:13Z\"\n    lastUpdateTime: \"2023-11-03T13:52:14Z\"\n    message: ReplicaSet \"testing-tla-96c44766b\" has successfully progressed.\n    reason: NewReplicaSetAvailable\n    status: \"True\"\n    type: Progressing\n  observedGeneration: 1\n\n" duration=87.477745ms execID=7d935
time="2023-11-03T13:52:14Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestJsonnetTlaParameterAppliedCorrectly (4.78s)
=== RUN   TestJsonnetTlaEnv
time="2023-11-03T13:52:14Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=e6671
time="2023-11-03T13:52:14Z" level=debug msg="namespace \"argocd-e2e--test-jsonnet-tla-parameter-applied-correctly-lbsfm\" deleted\n" duration=257.598382ms execID=e6671
time="2023-11-03T13:52:14Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=831a9
time="2023-11-03T13:52:15Z" level=debug msg="No resources found\n" duration=448.322236ms execID=831a9
time="2023-11-03T13:52:15Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=0dbc5
time="2023-11-03T13:52:15Z" level=debug msg="No resources found\n" duration=219.674018ms execID=0dbc5
time="2023-11-03T13:52:16Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:52:16Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTkzNiwibmJmIjoxNjk5MDE5NTM2LCJpYXQiOjE2OTkwMTk1MzYsImp0aSI6ImUyYmMyMjQzLTNmMDQtNDg4Yy04NWNmLTkzM2U2MTc0NjRiNiJ9.5-hj-lp4_b9_NAjEhcX0keWi37Qh58SnkTAOTUFV2po --insecure" dir= execID=f147a
time="2023-11-03T13:52:16Z" level=debug duration=121.248411ms execID=f147a
time="2023-11-03T13:52:16Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=25932
time="2023-11-03T13:52:16Z" level=debug duration=2.864788ms execID=25932
time="2023-11-03T13:52:16Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=17491
time="2023-11-03T13:52:16Z" level=debug duration=1.612588ms execID=17491
time="2023-11-03T13:52:16Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=edfbb
time="2023-11-03T13:52:16Z" level=debug duration=2.039775ms execID=edfbb
time="2023-11-03T13:52:16Z" level=info msg="pkill -9 gpg-agent" dir= execID=b2d27
time="2023-11-03T13:52:16Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=a9b02
time="2023-11-03T13:52:16Z" level=debug duration=10.368955ms execID=a9b02
time="2023-11-03T13:52:16Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=5e307
time="2023-11-03T13:52:16Z" level=debug duration=66.317031ms execID=5e307
time="2023-11-03T13:52:16Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=b6ba3
time="2023-11-03T13:52:16Z" level=debug duration=1.846722ms execID=b6ba3
time="2023-11-03T13:52:16Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=0998b
time="2023-11-03T13:52:16Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.985396ms execID=0998b
time="2023-11-03T13:52:16Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=b66cf
time="2023-11-03T13:52:16Z" level=debug duration=25.304387ms execID=b66cf
time="2023-11-03T13:52:16Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=5abdb
time="2023-11-03T13:52:16Z" level=debug duration=21.087087ms execID=5abdb
time="2023-11-03T13:52:16Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=743d5
time="2023-11-03T13:52:16Z" level=debug duration=2.158768ms execID=743d5
time="2023-11-03T13:52:16Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=607ed
Handling connection for 9081
time="2023-11-03T13:52:16Z" level=debug duration=72.727899ms execID=607ed
time="2023-11-03T13:52:16Z" level=info msg="kubectl create ns argocd-e2e--test-jsonnet-tla-env-floyx" dir= execID=41da4
time="2023-11-03T13:52:16Z" level=debug msg="namespace/argocd-e2e--test-jsonnet-tla-env-floyx created\n" duration=107.874015ms execID=41da4
time="2023-11-03T13:52:16Z" level=info msg="kubectl label ns argocd-e2e--test-jsonnet-tla-env-floyx e2e.argoproj.io=true" dir= execID=f5087
time="2023-11-03T13:52:17Z" level=debug msg="namespace/argocd-e2e--test-jsonnet-tla-env-floyx labeled\n" duration=355.463677ms execID=f5087
time="2023-11-03T13:52:17Z" level=info msg="clean state" duration=2.888608854s id=TestJsonnetTlaEnv-floyx name=TestJsonnetTlaEnv password=password username=admin
time="2023-11-03T13:52:18Z" level=info msg="../../dist/argocd app create test-jsonnet-tla-env --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --jsonnet-tla-str foo=$ARGOCD_APP_NAME --jsonnet-tla-code bar='$ARGOCD_APP_NAME' --dest-server https://kubernetes.default.svc --path jsonnet-tla-cm --project default --dest-namespace argocd-e2e--test-jsonnet-tla-env-floyx --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTkzNiwibmJmIjoxNjk5MDE5NTM2LCJpYXQiOjE2OTkwMTk1MzYsImp0aSI6ImUyYmMyMjQzLTNmMDQtNDg4Yy04NWNmLTkzM2U2MTc0NjRiNiJ9.5-hj-lp4_b9_NAjEhcX0keWi37Qh58SnkTAOTUFV2po --insecure" dir= execID=cf617
time="2023-11-03T13:52:18Z" level=debug msg="application 'test-jsonnet-tla-env' created\n" duration=235.365987ms execID=cf617
time="2023-11-03T13:52:18Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:52:18Z" level=info msg="../../dist/argocd app sync test-jsonnet-tla-env --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTkzNiwibmJmIjoxNjk5MDE5NTM2LCJpYXQiOjE2OTkwMTk1MzYsImp0aSI6ImUyYmMyMjQzLTNmMDQtNDg4Yy04NWNmLTkzM2U2MTc0NjRiNiJ9.5-hj-lp4_b9_NAjEhcX0keWi37Qh58SnkTAOTUFV2po --insecure" dir= execID=8bb18
time="2023-11-03T13:52:19Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                              NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:52:18+00:00          ConfigMap  argocd-e2e--test-jsonnet-tla-env-floyx                my-map  OutOfSync  Missing              \n\nName:               argocd-e2e/test-jsonnet-tla-env\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-jsonnet-tla-env-floyx\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-jsonnet-tla-env\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               jsonnet-tla-cm\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (7557c28)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      7557c2838cfb6657c6929edd58672c3f72a4f79a\nPhase:              Succeeded\nStart:              2023-11-03 13:52:18 +0000 UTC\nFinished:           2023-11-03 13:52:18 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                               NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-jsonnet-tla-env-floyx  my-map  Synced                configmap/my-map created\n" duration=703.192726ms execID=8bb18
time="2023-11-03T13:52:19Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:52:19Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:52:19Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:52:19Z" level=info msg="kubectl -n argocd-e2e--test-jsonnet-tla-env-floyx get cm my-map -o jsonpath={.data.foo}" dir=. execID=c8f8f
time="2023-11-03T13:52:19Z" level=debug msg=test-jsonnet-tla-env duration=230.684623ms execID=c8f8f
time="2023-11-03T13:52:19Z" level=info msg="kubectl -n argocd-e2e--test-jsonnet-tla-env-floyx get cm my-map -o jsonpath={.data.bar}" dir=. execID=50ed3
time="2023-11-03T13:52:19Z" level=debug msg=test-jsonnet-tla-env duration=297.098948ms execID=50ed3
time="2023-11-03T13:52:19Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestJsonnetTlaEnv (5.37s)
=== RUN   TestJsonnetExtVarEnv
time="2023-11-03T13:52:19Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=a4f3f
time="2023-11-03T13:52:19Z" level=debug msg="namespace \"argocd-e2e--test-jsonnet-tla-env-floyx\" deleted\n" duration=274.039038ms execID=a4f3f
time="2023-11-03T13:52:19Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=3b8d9
time="2023-11-03T13:52:20Z" level=debug msg="No resources found\n" duration=565.651579ms execID=3b8d9
time="2023-11-03T13:52:20Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=632a3
time="2023-11-03T13:52:20Z" level=debug msg="No resources found\n" duration=242.144332ms execID=632a3
time="2023-11-03T13:52:21Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:52:21Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk0MSwibmJmIjoxNjk5MDE5NTQxLCJpYXQiOjE2OTkwMTk1NDEsImp0aSI6ImI0OTc1NWFmLTQwMzQtNGM0OS1iYzkzLWVhMDkwNzM3NmM0YiJ9.72M5Ksk5cfa5YV4XdvKu26pAmmIWakOB_vuIX-fgnjg --insecure" dir= execID=7eb59
time="2023-11-03T13:52:21Z" level=debug duration=77.248075ms execID=7eb59
time="2023-11-03T13:52:21Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=b56c8
time="2023-11-03T13:52:21Z" level=debug duration=1.928391ms execID=b56c8
time="2023-11-03T13:52:21Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=d555d
time="2023-11-03T13:52:21Z" level=debug duration=1.496277ms execID=d555d
time="2023-11-03T13:52:21Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=71655
time="2023-11-03T13:52:21Z" level=debug duration=1.394809ms execID=71655
time="2023-11-03T13:52:21Z" level=info msg="pkill -9 gpg-agent" dir= execID=4ad5b
time="2023-11-03T13:52:21Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=b3030
time="2023-11-03T13:52:21Z" level=debug duration=9.759693ms execID=b3030
time="2023-11-03T13:52:21Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=36528
time="2023-11-03T13:52:21Z" level=debug duration=40.978389ms execID=36528
time="2023-11-03T13:52:21Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=6d858
time="2023-11-03T13:52:21Z" level=debug duration=1.831725ms execID=6d858
time="2023-11-03T13:52:21Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=46cf0
time="2023-11-03T13:52:21Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.118492ms execID=46cf0
time="2023-11-03T13:52:21Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=8a523
time="2023-11-03T13:52:21Z" level=debug duration=27.334383ms execID=8a523
time="2023-11-03T13:52:21Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=6c32a
time="2023-11-03T13:52:21Z" level=debug duration=21.745495ms execID=6c32a
time="2023-11-03T13:52:21Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=23c38
time="2023-11-03T13:52:21Z" level=debug duration=2.224543ms execID=23c38
time="2023-11-03T13:52:21Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=7b487
Handling connection for 9081
time="2023-11-03T13:52:22Z" level=debug duration=82.764053ms execID=7b487
time="2023-11-03T13:52:22Z" level=info msg="kubectl create ns argocd-e2e--test-jsonnet-ext-var-env-czkjy" dir= execID=bd01b
time="2023-11-03T13:52:22Z" level=debug msg="namespace/argocd-e2e--test-jsonnet-ext-var-env-czkjy created\n" duration=156.134568ms execID=bd01b
time="2023-11-03T13:52:22Z" level=info msg="kubectl label ns argocd-e2e--test-jsonnet-ext-var-env-czkjy e2e.argoproj.io=true" dir= execID=e5bb6
time="2023-11-03T13:52:22Z" level=debug msg="namespace/argocd-e2e--test-jsonnet-ext-var-env-czkjy labeled\n" duration=301.043901ms execID=e5bb6
time="2023-11-03T13:52:22Z" level=info msg="clean state" duration=2.89844917s id=TestJsonnetExtVarEnv-czkjy name=TestJsonnetExtVarEnv password=password username=admin
time="2023-11-03T13:52:23Z" level=info msg="../../dist/argocd app create test-jsonnet-ext-var-env --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --jsonnet-ext-var-str foo=$ARGOCD_APP_NAME --jsonnet-ext-var-code bar='$ARGOCD_APP_NAME' --dest-server https://kubernetes.default.svc --path jsonnet-ext-var --project default --dest-namespace argocd-e2e--test-jsonnet-ext-var-env-czkjy --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk0MSwibmJmIjoxNjk5MDE5NTQxLCJpYXQiOjE2OTkwMTk1NDEsImp0aSI6ImI0OTc1NWFmLTQwMzQtNGM0OS1iYzkzLWVhMDkwNzM3NmM0YiJ9.72M5Ksk5cfa5YV4XdvKu26pAmmIWakOB_vuIX-fgnjg --insecure" dir= execID=6b66c
time="2023-11-03T13:52:23Z" level=debug msg="application 'test-jsonnet-ext-var-env' created\n" duration=301.543329ms execID=6b66c
time="2023-11-03T13:52:23Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:52:23Z" level=info msg="../../dist/argocd app sync test-jsonnet-ext-var-env --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk0MSwibmJmIjoxNjk5MDE5NTQxLCJpYXQiOjE2OTkwMTk1NDEsImp0aSI6ImI0OTc1NWFmLTQwMzQtNGM0OS1iYzkzLWVhMDkwNzM3NmM0YiJ9.72M5Ksk5cfa5YV4XdvKu26pAmmIWakOB_vuIX-fgnjg --insecure" dir= execID=c2104
time="2023-11-03T13:52:24Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                  NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:52:24+00:00          ConfigMap  argocd-e2e--test-jsonnet-ext-var-env-czkjy                my-map  OutOfSync  Missing              \n2023-11-03T13:52:24+00:00          ConfigMap  argocd-e2e--test-jsonnet-ext-var-env-czkjy                my-map  OutOfSync  Missing              configmap/my-map created\n2023-11-03T13:52:24+00:00          ConfigMap  argocd-e2e--test-jsonnet-ext-var-env-czkjy                my-map    Synced  Missing              configmap/my-map created\n\nName:               argocd-e2e/test-jsonnet-ext-var-env\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-jsonnet-ext-var-env-czkjy\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-jsonnet-ext-var-env\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               jsonnet-ext-var\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (c1e45cf)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      c1e45cfa7ec71e25062516feb10188f6f28ff025\nPhase:              Succeeded\nStart:              2023-11-03 13:52:23 +0000 UTC\nFinished:           2023-11-03 13:52:24 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                   NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-jsonnet-ext-var-env-czkjy  my-map  Synced                configmap/my-map created\n" duration=745.551678ms execID=c2104
time="2023-11-03T13:52:24Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:52:24Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:52:24Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:52:24Z" level=info msg="kubectl -n argocd-e2e--test-jsonnet-ext-var-env-czkjy get cm my-map -o jsonpath={.data.foo}" dir=. execID=bf766
time="2023-11-03T13:52:24Z" level=debug msg=test-jsonnet-ext-var-env duration=244.784244ms execID=bf766
time="2023-11-03T13:52:24Z" level=info msg="kubectl -n argocd-e2e--test-jsonnet-ext-var-env-czkjy get cm my-map -o jsonpath={.data.bar}" dir=. execID=95651
time="2023-11-03T13:52:25Z" level=debug msg=test-jsonnet-ext-var-env duration=309.737552ms execID=95651
time="2023-11-03T13:52:25Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestJsonnetExtVarEnv (5.52s)
=== RUN   TestJsonnetNestedDirWithImports
time="2023-11-03T13:52:25Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=4080f
time="2023-11-03T13:52:25Z" level=debug msg="namespace \"argocd-e2e--test-jsonnet-ext-var-env-czkjy\" deleted\n" duration=257.704985ms execID=4080f
time="2023-11-03T13:52:25Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=78419
time="2023-11-03T13:52:25Z" level=debug msg="No resources found\n" duration=442.053924ms execID=78419
time="2023-11-03T13:52:25Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=1e67a
time="2023-11-03T13:52:26Z" level=debug msg="No resources found\n" duration=232.823287ms execID=1e67a
time="2023-11-03T13:52:27Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:52:27Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk0NywibmJmIjoxNjk5MDE5NTQ3LCJpYXQiOjE2OTkwMTk1NDcsImp0aSI6IjJmMjg0ZTdmLWJjMmItNGNiNy04OWViLWU4ZmI1YmFlZTk5NyJ9.mG7vXniLlVTVQdirMx9C_-5iQKXMkBqxiTX0DbUhy9s --insecure" dir= execID=ee1ff
time="2023-11-03T13:52:27Z" level=debug duration=95.538467ms execID=ee1ff
time="2023-11-03T13:52:27Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=39fba
time="2023-11-03T13:52:27Z" level=debug duration=2.01983ms execID=39fba
time="2023-11-03T13:52:27Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=8f9fd
time="2023-11-03T13:52:27Z" level=debug duration=1.833724ms execID=8f9fd
time="2023-11-03T13:52:27Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=a389e
time="2023-11-03T13:52:27Z" level=debug duration=1.61243ms execID=a389e
time="2023-11-03T13:52:27Z" level=info msg="pkill -9 gpg-agent" dir= execID=8acef
time="2023-11-03T13:52:27Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=ea708
time="2023-11-03T13:52:27Z" level=debug duration=9.895342ms execID=ea708
time="2023-11-03T13:52:27Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=7e4ef
time="2023-11-03T13:52:27Z" level=debug duration=34.082532ms execID=7e4ef
time="2023-11-03T13:52:27Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=980f7
time="2023-11-03T13:52:27Z" level=debug duration=18.468998ms execID=980f7
time="2023-11-03T13:52:27Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=ae94f
time="2023-11-03T13:52:27Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.303586ms execID=ae94f
time="2023-11-03T13:52:27Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=74f98
time="2023-11-03T13:52:27Z" level=debug duration=27.752315ms execID=74f98
time="2023-11-03T13:52:27Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=4b938
time="2023-11-03T13:52:27Z" level=debug duration=22.290807ms execID=4b938
time="2023-11-03T13:52:27Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=3c5b3
time="2023-11-03T13:52:27Z" level=debug duration=2.281341ms execID=3c5b3
time="2023-11-03T13:52:27Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=2d158
Handling connection for 9081
time="2023-11-03T13:52:27Z" level=debug duration=83.138535ms execID=2d158
time="2023-11-03T13:52:27Z" level=info msg="kubectl create ns argocd-e2e--test-jsonnet-nested-dir-with-imports-rtkwr" dir= execID=949d7
time="2023-11-03T13:52:27Z" level=debug msg="namespace/argocd-e2e--test-jsonnet-nested-dir-with-imports-rtkwr created\n" duration=160.393915ms execID=949d7
time="2023-11-03T13:52:27Z" level=info msg="kubectl label ns argocd-e2e--test-jsonnet-nested-dir-with-imports-rtkwr e2e.argoproj.io=true" dir= execID=c5836
time="2023-11-03T13:52:27Z" level=debug msg="namespace/argocd-e2e--test-jsonnet-nested-dir-with-imports-rtkwr labeled\n" duration=301.945745ms execID=c5836
time="2023-11-03T13:52:27Z" level=info msg="clean state" duration=2.781514117s id=TestJsonnetNestedDirWithImports-rtkwr name=TestJsonnetNestedDirWithImports password=password username=admin
time="2023-11-03T13:52:28Z" level=info msg="../../dist/argocd app create test-jsonnet-nested-dir-with-imports --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --directory-recurse --dest-server https://kubernetes.default.svc --path jsonnet-nested-dir-with-imports/apps --project default --dest-namespace argocd-e2e--test-jsonnet-nested-dir-with-imports-rtkwr --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk0NywibmJmIjoxNjk5MDE5NTQ3LCJpYXQiOjE2OTkwMTk1NDcsImp0aSI6IjJmMjg0ZTdmLWJjMmItNGNiNy04OWViLWU4ZmI1YmFlZTk5NyJ9.mG7vXniLlVTVQdirMx9C_-5iQKXMkBqxiTX0DbUhy9s --insecure" dir= execID=6a001
time="2023-11-03T13:52:29Z" level=debug msg="application 'test-jsonnet-nested-dir-with-imports' created\n" duration=243.587655ms execID=6a001
time="2023-11-03T13:52:29Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:52:29Z" level=info msg="../../dist/argocd app sync test-jsonnet-nested-dir-with-imports --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk0NywibmJmIjoxNjk5MDE5NTQ3LCJpYXQiOjE2OTkwMTk1NDcsImp0aSI6IjJmMjg0ZTdmLWJjMmItNGNiNy04OWViLWU4ZmI1YmFlZTk5NyJ9.mG7vXniLlVTVQdirMx9C_-5iQKXMkBqxiTX0DbUhy9s --insecure" dir= execID=33913
time="2023-11-03T13:52:29Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                  NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:52:29+00:00          Namespace                        hello-root  OutOfSync  Missing              \n2023-11-03T13:52:29+00:00          Namespace                       hello-world  OutOfSync  Missing              \n\nName:               argocd-e2e/test-jsonnet-nested-dir-with-imports\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-jsonnet-nested-dir-with-imports-rtkwr\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-jsonnet-nested-dir-with-imports\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               jsonnet-nested-dir-with-imports/apps\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (add2d96)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      add2d9664644b76feac730833835be1797f89ecc\nPhase:              Succeeded\nStart:              2023-11-03 13:52:29 +0000 UTC\nFinished:           2023-11-03 13:52:29 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                               NAME         STATUS   HEALTH  HOOK  MESSAGE\n       Namespace  argocd-e2e--test-jsonnet-nested-dir-with-imports-rtkwr  hello-world  Running  Synced        namespace/hello-world created\n       Namespace  argocd-e2e--test-jsonnet-nested-dir-with-imports-rtkwr  hello-root   Running  Synced        namespace/hello-root created\n       Namespace                                                          hello-root   Synced                 \n       Namespace                                                          hello-world  Synced                 \n" duration=623.936858ms execID=33913
time="2023-11-03T13:52:29Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:52:29Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:52:29Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:52:29Z" level=info msg="expectation succeeded: resource 'Namespace/hello-world' sync status should be Synced, is Synced"
time="2023-11-03T13:52:29Z" level=info msg="expectation succeeded: resource 'Namespace/hello-root' sync status should be Synced, is Synced"
time="2023-11-03T13:52:29Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestJsonnetNestedDirWithImports (4.68s)
=== RUN   TestKustomize2AppSource
time="2023-11-03T13:52:29Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=b8847
time="2023-11-03T13:52:30Z" level=debug msg="namespace \"argocd-e2e--test-jsonnet-nested-dir-with-imports-rtkwr\" deleted\n" duration=181.845062ms execID=b8847
time="2023-11-03T13:52:30Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=ea46c
time="2023-11-03T13:52:30Z" level=debug msg="No resources found\n" duration=483.154865ms execID=ea46c
time="2023-11-03T13:52:30Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=d0e51
time="2023-11-03T13:52:30Z" level=debug msg="No resources found\n" duration=282.050579ms execID=d0e51
time="2023-11-03T13:52:31Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:52:31Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk1MSwibmJmIjoxNjk5MDE5NTUxLCJpYXQiOjE2OTkwMTk1NTEsImp0aSI6IjVkNzQ0ZDY0LTAzOWEtNGU3Yy1hZDIyLWY5ZjhhNjMwOTQ4YiJ9.F63qnMDqDVkLaRGUaDoGBm3yAnT4sZQWwJ_0iuHZ02Q --insecure" dir= execID=ec441
time="2023-11-03T13:52:31Z" level=debug duration=78.170516ms execID=ec441
time="2023-11-03T13:52:31Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=79449
time="2023-11-03T13:52:31Z" level=debug duration=2.036395ms execID=79449
time="2023-11-03T13:52:31Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=0d7b0
time="2023-11-03T13:52:31Z" level=debug duration=1.506872ms execID=0d7b0
time="2023-11-03T13:52:31Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=c74b7
time="2023-11-03T13:52:31Z" level=debug duration=1.489484ms execID=c74b7
time="2023-11-03T13:52:31Z" level=info msg="pkill -9 gpg-agent" dir= execID=d4b9c
time="2023-11-03T13:52:31Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=17796
time="2023-11-03T13:52:31Z" level=debug duration=9.732616ms execID=17796
time="2023-11-03T13:52:31Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=05a31
time="2023-11-03T13:52:31Z" level=debug duration=34.333463ms execID=05a31
time="2023-11-03T13:52:31Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=f6034
time="2023-11-03T13:52:31Z" level=debug duration=1.511345ms execID=f6034
time="2023-11-03T13:52:31Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=3ec03
time="2023-11-03T13:52:31Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=18.120583ms execID=3ec03
time="2023-11-03T13:52:31Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=28408
time="2023-11-03T13:52:31Z" level=debug duration=26.959376ms execID=28408
time="2023-11-03T13:52:31Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=f0cfa
time="2023-11-03T13:52:31Z" level=debug duration=21.257527ms execID=f0cfa
time="2023-11-03T13:52:31Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=2089c
time="2023-11-03T13:52:31Z" level=debug duration=2.064516ms execID=2089c
time="2023-11-03T13:52:31Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=44370
Handling connection for 9081
time="2023-11-03T13:52:31Z" level=debug duration=87.800206ms execID=44370
time="2023-11-03T13:52:31Z" level=info msg="kubectl create ns argocd-e2e--test-kustomize2-app-source-lyjix" dir= execID=655d5
time="2023-11-03T13:52:32Z" level=debug msg="namespace/argocd-e2e--test-kustomize2-app-source-lyjix created\n" duration=105.45321ms execID=655d5
time="2023-11-03T13:52:32Z" level=info msg="kubectl label ns argocd-e2e--test-kustomize2-app-source-lyjix e2e.argoproj.io=true" dir= execID=a5944
time="2023-11-03T13:52:32Z" level=debug msg="namespace/argocd-e2e--test-kustomize2-app-source-lyjix labeled\n" duration=282.482879ms execID=a5944
time="2023-11-03T13:52:32Z" level=info msg="clean state" duration=2.525447153s id=TestKustomize2AppSource-lyjix name=TestKustomize2AppSource password=password username=admin
time="2023-11-03T13:52:33Z" level=info msg="../../dist/argocd app create test-kustomize2-app-source --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --nameprefix k2- --namesuffix -deploy1 --dest-namespace argocd-e2e--test-kustomize2-app-source-lyjix --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk1MSwibmJmIjoxNjk5MDE5NTUxLCJpYXQiOjE2OTkwMTk1NTEsImp0aSI6IjVkNzQ0ZDY0LTAzOWEtNGU3Yy1hZDIyLWY5ZjhhNjMwOTQ4YiJ9.F63qnMDqDVkLaRGUaDoGBm3yAnT4sZQWwJ_0iuHZ02Q --insecure" dir= execID=2bfad
time="2023-11-03T13:52:33Z" level=debug msg="application 'test-kustomize2-app-source' created\n" duration=310.527185ms execID=2bfad
time="2023-11-03T13:52:33Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:52:33Z" level=info msg="pending: sync status to be OutOfSync, is "
time="2023-11-03T13:52:36Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T13:52:36Z" level=info msg="../../dist/argocd app patch test-kustomize2-app-source --patch [\n\t\t\t{\n\t\t\t\t\"op\": \"replace\",\n\t\t\t\t\"path\": \"/spec/source/kustomize/namePrefix\",\n\t\t\t\t\"value\": \"k2-patched-\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"op\": \"add\",\n\t\t\t\t\"path\": \"/spec/source/kustomize/commonLabels\",\n\t\t\t\t\"value\": {\n\t\t\t\t\t\"patched-by\": \"argo-cd\"\n\t\t\t\t}\n\t\t\t}\n\t\t] --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk1MSwibmJmIjoxNjk5MDE5NTUxLCJpYXQiOjE2OTkwMTk1NTEsImp0aSI6IjVkNzQ0ZDY0LTAzOWEtNGU3Yy1hZDIyLWY5ZjhhNjMwOTQ4YiJ9.F63qnMDqDVkLaRGUaDoGBm3yAnT4sZQWwJ_0iuHZ02Q --insecure" dir= execID=b1b78
time="2023-11-03T13:52:36Z" level=debug msg="metadata:\n  creationTimestamp: \"2023-11-03T13:52:33Z\"\n  generation: 3\n  managedFields:\n  - apiVersion: argoproj.io/v1alpha1\n    fieldsType: FieldsV1\n    fieldsV1:\n      f:status:\n        f:health:\n          f:status: {}\n        f:reconciledAt: {}\n        f:resources: {}\n        f:sourceType: {}\n        f:sync:\n          f:comparedTo:\n            f:destination:\n              f:namespace: {}\n              f:server: {}\n            f:source:\n              f:kustomize:\n                .: {}\n                f:namePrefix: {}\n                f:nameSuffix: {}\n              f:path: {}\n              f:repoURL: {}\n          f:revision: {}\n          f:status: {}\n    manager: argocd-application-controller\n    operation: Update\n    time: \"2023-11-03T13:52:33Z\"\n  - apiVersion: argoproj.io/v1alpha1\n    fieldsType: FieldsV1\n    fieldsV1:\n      f:spec:\n        .: {}\n        f:destination:\n          .: {}\n          f:namespace: {}\n          f:server: {}\n        f:project: {}\n        f:source:\n          .: {}\n          f:kustomize:\n            .: {}\n            f:commonLabels:\n              .: {}\n              f:patched-by: {}\n            f:namePrefix: {}\n            f:nameSuffix: {}\n          f:path: {}\n          f:repoURL: {}\n      f:status:\n        .: {}\n        f:health: {}\n        f:summary: {}\n        f:sync:\n          .: {}\n          f:comparedTo:\n            .: {}\n            f:destination: {}\n            f:source: {}\n    manager: argocd-server\n    operation: Update\n    time: \"2023-11-03T13:52:36Z\"\n  name: test-kustomize2-app-source\n  namespace: argocd-e2e\n  resourceVersion: \"36288651\"\n  uid: c4942449-95df-407f-83ba-5d0eaef05224\nspec:\n  destination:\n    namespace: argocd-e2e--test-kustomize2-app-source-lyjix\n    server: https://kubernetes.default.svc\n  project: default\n  source:\n    kustomize:\n      commonLabels:\n        patched-by: argo-cd\n      namePrefix: k2-patched-\n      nameSuffix: -deploy1\n    path: guestbook\n    repoURL: http://argocd-e2e-server:9081/argo-e2e/testdata.git\nstatus:\n  health:\n    status: Missing\n  reconciledAt: \"2023-11-03T13:52:33Z\"\n  resources:\n  - health:\n      status: Missing\n    kind: Service\n    name: k2-guestbook-ui-deploy1\n    namespace: argocd-e2e--test-kustomize2-app-source-lyjix\n    status: OutOfSync\n    version: v1\n  - group: apps\n    health:\n      status: Missing\n    kind: Deployment\n    name: k2-guestbook-ui-deploy1\n    namespace: argocd-e2e--test-kustomize2-app-source-lyjix\n    status: OutOfSync\n    version: v1\n  sourceType: Kustomize\n  summary: {}\n  sync:\n    comparedTo:\n      destination:\n        namespace: argocd-e2e--test-kustomize2-app-source-lyjix\n        server: https://kubernetes.default.svc\n      source:\n        kustomize:\n          namePrefix: k2-\n          nameSuffix: -deploy1\n        path: guestbook\n        repoURL: http://argocd-e2e-server:9081/argo-e2e/testdata.git\n    revision: 9f4b0dd6c5be152c3747ea28e24b7b530146a6a3\n    status: OutOfSync\n\n" duration=293.005091ms execID=b1b78
time="2023-11-03T13:52:36Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:52:36Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:52:36Z" level=info msg="../../dist/argocd app sync test-kustomize2-app-source --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk1MSwibmJmIjoxNjk5MDE5NTUxLCJpYXQiOjE2OTkwMTk1NTEsImp0aSI6IjVkNzQ0ZDY0LTAzOWEtNGU3Yy1hZDIyLWY5ZjhhNjMwOTQ4YiJ9.F63qnMDqDVkLaRGUaDoGBm3yAnT4sZQWwJ_0iuHZ02Q --insecure" dir= execID=21825
time="2023-11-03T13:52:37Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                    NAME       STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:52:37+00:00            Service  argocd-e2e--test-kustomize2-app-source-lyjix  k2-guestbook-ui-deploy1  OutOfSync  Missing              \n2023-11-03T13:52:37+00:00   apps  Deployment  argocd-e2e--test-kustomize2-app-source-lyjix  k2-guestbook-ui-deploy1  OutOfSync  Missing              \n2023-11-03T13:52:37+00:00            Service  argocd-e2e--test-kustomize2-app-source-lyjix  k2-patched-guestbook-ui-deploy1  OutOfSync  Missing              \n2023-11-03T13:52:37+00:00   apps  Deployment  argocd-e2e--test-kustomize2-app-source-lyjix  k2-patched-guestbook-ui-deploy1  OutOfSync  Missing              \n2023-11-03T13:52:37+00:00            Service  argocd-e2e--test-kustomize2-app-source-lyjix  k2-patched-guestbook-ui-deploy1  OutOfSync  Missing              service/k2-patched-guestbook-ui-deploy1 created\n2023-11-03T13:52:37+00:00   apps  Deployment  argocd-e2e--test-kustomize2-app-source-lyjix  k2-patched-guestbook-ui-deploy1  OutOfSync  Missing              deployment.apps/k2-patched-guestbook-ui-deploy1 created\n2023-11-03T13:52:37+00:00            Service  argocd-e2e--test-kustomize2-app-source-lyjix  k2-patched-guestbook-ui-deploy1    Synced  Healthy              service/k2-patched-guestbook-ui-deploy1 created\n\nName:               argocd-e2e/test-kustomize2-app-source\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-kustomize2-app-source-lyjix\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-kustomize2-app-source\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nName Prefix:        k2-patched-\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (9f4b0dd)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      9f4b0dd6c5be152c3747ea28e24b7b530146a6a3\nPhase:              Succeeded\nStart:              2023-11-03 13:52:37 +0000 UTC\nFinished:           2023-11-03 13:52:37 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                     NAME                             STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-kustomize2-app-source-lyjix  k2-patched-guestbook-ui-deploy1  Synced  Healthy        service/k2-patched-guestbook-ui-deploy1 created\napps   Deployment  argocd-e2e--test-kustomize2-app-source-lyjix  k2-patched-guestbook-ui-deploy1  Synced  Healthy        deployment.apps/k2-patched-guestbook-ui-deploy1 created\n" duration=911.945062ms execID=21825
time="2023-11-03T13:52:37Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:52:37Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:52:37Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:52:37Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:52:37Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:52:37Z" level=info msg="kubectl -n=argocd-e2e--test-kustomize2-app-source-lyjix get Service k2-patched-guestbook-ui-deploy1 -ojsonpath={.metadata.labels.patched-by}" dir= execID=00a2f
time="2023-11-03T13:52:38Z" level=debug msg=argo-cd duration=239.239554ms execID=00a2f
time="2023-11-03T13:52:38Z" level=info msg="kubectl -n=argocd-e2e--test-kustomize2-app-source-lyjix get Deployment k2-patched-guestbook-ui-deploy1 -ojsonpath={.metadata.labels.patched-by}" dir= execID=16828
time="2023-11-03T13:52:38Z" level=debug msg=argo-cd duration=381.387496ms execID=16828
time="2023-11-03T13:52:38Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestKustomize2AppSource (8.70s)
=== RUN   TestSyncStatusOptionIgnore
time="2023-11-03T13:52:38Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=5c863
time="2023-11-03T13:52:38Z" level=debug msg="namespace \"argocd-e2e--test-kustomize2-app-source-lyjix\" deleted\n" duration=269.880747ms execID=5c863
time="2023-11-03T13:52:38Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=a4bee
time="2023-11-03T13:52:39Z" level=debug msg="No resources found\n" duration=444.279374ms execID=a4bee
time="2023-11-03T13:52:39Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=dbb0e
time="2023-11-03T13:52:39Z" level=debug msg="No resources found\n" duration=241.030185ms execID=dbb0e
time="2023-11-03T13:52:40Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:52:40Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk2MCwibmJmIjoxNjk5MDE5NTYwLCJpYXQiOjE2OTkwMTk1NjAsImp0aSI6ImYzOTFlODI0LTcwOTAtNDYzMS1iMmUzLTJlMTg2NzdiM2M4YiJ9.dhtKWqfNfuq8hnYNhh3mD5aEw-fPqLqHNGXMKFJvwVc --insecure" dir= execID=a5c66
time="2023-11-03T13:52:40Z" level=debug duration=120.196994ms execID=a5c66
time="2023-11-03T13:52:40Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=c9845
time="2023-11-03T13:52:40Z" level=debug duration=2.054401ms execID=c9845
time="2023-11-03T13:52:40Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=d0130
time="2023-11-03T13:52:40Z" level=debug duration=1.468928ms execID=d0130
time="2023-11-03T13:52:40Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=525de
time="2023-11-03T13:52:40Z" level=debug duration=1.463735ms execID=525de
time="2023-11-03T13:52:40Z" level=info msg="pkill -9 gpg-agent" dir= execID=e999b
time="2023-11-03T13:52:40Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=d5871
time="2023-11-03T13:52:40Z" level=debug duration=9.973903ms execID=d5871
time="2023-11-03T13:52:40Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=bf537
time="2023-11-03T13:52:40Z" level=debug duration=33.012366ms execID=bf537
time="2023-11-03T13:52:40Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=96ced
time="2023-11-03T13:52:40Z" level=debug duration=1.77918ms execID=96ced
time="2023-11-03T13:52:40Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=ee922
time="2023-11-03T13:52:40Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.919617ms execID=ee922
time="2023-11-03T13:52:40Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=839f2
time="2023-11-03T13:52:40Z" level=debug duration=27.272453ms execID=839f2
time="2023-11-03T13:52:40Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=f9888
time="2023-11-03T13:52:40Z" level=debug duration=20.998721ms execID=f9888
time="2023-11-03T13:52:40Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=43b94
time="2023-11-03T13:52:40Z" level=debug duration=2.284353ms execID=43b94
time="2023-11-03T13:52:40Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=beba6
Handling connection for 9081
time="2023-11-03T13:52:40Z" level=debug duration=80.534845ms execID=beba6
time="2023-11-03T13:52:40Z" level=info msg="kubectl create ns argocd-e2e--test-sync-status-option-ignore-jporu" dir= execID=7571e
time="2023-11-03T13:52:41Z" level=debug msg="namespace/argocd-e2e--test-sync-status-option-ignore-jporu created\n" duration=152.895314ms execID=7571e
time="2023-11-03T13:52:41Z" level=info msg="kubectl label ns argocd-e2e--test-sync-status-option-ignore-jporu e2e.argoproj.io=true" dir= execID=ba88b
time="2023-11-03T13:52:41Z" level=debug msg="namespace/argocd-e2e--test-sync-status-option-ignore-jporu labeled\n" duration=300.918414ms execID=ba88b
time="2023-11-03T13:52:41Z" level=info msg="clean state" duration=2.797579906s id=TestSyncStatusOptionIgnore-jporu name=TestSyncStatusOptionIgnore password=password username=admin
time="2023-11-03T13:52:42Z" level=info msg="../../dist/argocd app create test-sync-status-option-ignore --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path kustomize-cm-gen --project default --dest-namespace argocd-e2e--test-sync-status-option-ignore-jporu --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk2MCwibmJmIjoxNjk5MDE5NTYwLCJpYXQiOjE2OTkwMTk1NjAsImp0aSI6ImYzOTFlODI0LTcwOTAtNDYzMS1iMmUzLTJlMTg2NzdiM2M4YiJ9.dhtKWqfNfuq8hnYNhh3mD5aEw-fPqLqHNGXMKFJvwVc --insecure" dir= execID=05669
time="2023-11-03T13:52:42Z" level=debug msg="application 'test-sync-status-option-ignore' created\n" duration=279.365047ms execID=05669
time="2023-11-03T13:52:42Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:52:42Z" level=info msg="../../dist/argocd app sync test-sync-status-option-ignore --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk2MCwibmJmIjoxNjk5MDE5NTYwLCJpYXQiOjE2OTkwMTk1NjAsImp0aSI6ImYzOTFlODI0LTcwOTAtNDYzMS1iMmUzLTJlMTg2NzdiM2M4YiJ9.dhtKWqfNfuq8hnYNhh3mD5aEw-fPqLqHNGXMKFJvwVc --insecure" dir= execID=0949b
time="2023-11-03T13:52:43Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                        NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:52:42+00:00          ConfigMap  argocd-e2e--test-sync-status-option-ignore-jporu     my-map-798k5k7g9f  OutOfSync  Missing              \n2023-11-03T13:52:43+00:00          ConfigMap  argocd-e2e--test-sync-status-option-ignore-jporu     my-map-798k5k7g9f  OutOfSync  Missing              configmap/my-map-798k5k7g9f created\n2023-11-03T13:52:43+00:00          ConfigMap  argocd-e2e--test-sync-status-option-ignore-jporu     my-map-798k5k7g9f    Synced  Missing              configmap/my-map-798k5k7g9f created\n\nName:               argocd-e2e/test-sync-status-option-ignore\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-sync-status-option-ignore-jporu\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-sync-status-option-ignore\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               kustomize-cm-gen\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (815c155)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      815c15554098dd84d5097e5f0a9ecb876cd15d17\nPhase:              Succeeded\nStart:              2023-11-03 13:52:42 +0000 UTC\nFinished:           2023-11-03 13:52:43 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                         NAME               STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-sync-status-option-ignore-jporu  my-map-798k5k7g9f  Synced                configmap/my-map-798k5k7g9f created\n" duration=793.629753ms execID=0949b
time="2023-11-03T13:52:43Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:52:43Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:52:43Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:52:43Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:52:43Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/configMapGenerator/0/literals/0\", \"value\": \"foo=baz\"}]" path=kustomize-cm-gen/kustomization.yaml
time="2023-11-03T13:52:43Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:52:43Z" level=info msg=JSON bytes="{\"configMapGenerator\":[{\"literals\":[\"foo=bar\"],\"name\":\"my-map\"}],\"generatorOptions\":{\"annotations\":{\"argocd.argoproj.io/compare-options\":\"IgnoreExtraneous\",\"argocd.argoproj.io/sync-options\":\"Prune=false\"}},\"kind\":\"Kustomization\"}"
time="2023-11-03T13:52:43Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:52:43Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=cf33f
time="2023-11-03T13:52:43Z" level=debug msg="diff --git a/kustomize-cm-gen/kustomization.yaml b/kustomize-cm-gen/kustomization.yaml\nindex 5b47525..bea8cfe 100644\n--- a/kustomize-cm-gen/kustomization.yaml\n+++ b/kustomize-cm-gen/kustomization.yaml\n@@ -1,7 +1,7 @@\n configMapGenerator:\n-  - name: my-map\n-    literals:\n-      - foo=bar\n+- literals:\n+  - foo=baz\n+  name: my-map\n generatorOptions:\n   annotations:\n     argocd.argoproj.io/compare-options: IgnoreExtraneous\n" duration=4.901828ms execID=cf33f
time="2023-11-03T13:52:43Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=df722
time="2023-11-03T13:52:43Z" level=debug msg="[master 22a884e] patch\n 1 file changed, 3 insertions(+), 3 deletions(-)\n" duration=13.443065ms execID=df722
time="2023-11-03T13:52:43Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=db747
Handling connection for 9081
time="2023-11-03T13:52:43Z" level=debug duration=39.558092ms execID=db747
time="2023-11-03T13:52:43Z" level=info msg="../../dist/argocd app get test-sync-status-option-ignore --hard-refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk2MCwibmJmIjoxNjk5MDE5NTYwLCJpYXQiOjE2OTkwMTk1NjAsImp0aSI6ImYzOTFlODI0LTcwOTAtNDYzMS1iMmUzLTJlMTg2NzdiM2M4YiJ9.dhtKWqfNfuq8hnYNhh3mD5aEw-fPqLqHNGXMKFJvwVc --insecure" dir= execID=9bd82
time="2023-11-03T13:52:43Z" level=debug msg="Name:               argocd-e2e/test-sync-status-option-ignore\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-sync-status-option-ignore-jporu\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-sync-status-option-ignore\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               kustomize-cm-gen\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (22a884e)\nHealth Status:      Healthy\n\nGROUP  KIND       NAMESPACE                                         NAME               STATUS     HEALTH   HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-sync-status-option-ignore-jporu  my-map-798k5k7g9f  OutOfSync                 configmap/my-map-798k5k7g9f created\n       ConfigMap  argocd-e2e--test-sync-status-option-ignore-jporu  my-map-9922d695f7  OutOfSync  Missing        \n" duration=297.401588ms execID=9bd82
time="2023-11-03T13:52:43Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:52:43Z" level=info msg="../../dist/argocd app sync test-sync-status-option-ignore --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk2MCwibmJmIjoxNjk5MDE5NTYwLCJpYXQiOjE2OTkwMTk1NjAsImp0aSI6ImYzOTFlODI0LTcwOTAtNDYzMS1iMmUzLTJlMTg2NzdiM2M4YiJ9.dhtKWqfNfuq8hnYNhh3mD5aEw-fPqLqHNGXMKFJvwVc --insecure" dir= execID=2c4dc
time="2023-11-03T13:52:44Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                        NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:52:43+00:00          ConfigMap  argocd-e2e--test-sync-status-option-ignore-jporu     my-map-798k5k7g9f  OutOfSync                       \n2023-11-03T13:52:43+00:00          ConfigMap  argocd-e2e--test-sync-status-option-ignore-jporu     my-map-9922d695f7  OutOfSync  Missing              \n2023-11-03T13:52:44+00:00          ConfigMap  argocd-e2e--test-sync-status-option-ignore-jporu     my-map-798k5k7g9f  OutOfSync                       ignored (no prune)\n2023-11-03T13:52:44+00:00          ConfigMap  argocd-e2e--test-sync-status-option-ignore-jporu     my-map-9922d695f7  OutOfSync  Missing              configmap/my-map-9922d695f7 created\n2023-11-03T13:52:44+00:00          ConfigMap  argocd-e2e--test-sync-status-option-ignore-jporu     my-map-9922d695f7    Synced  Missing              configmap/my-map-9922d695f7 created\n\nName:               argocd-e2e/test-sync-status-option-ignore\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-sync-status-option-ignore-jporu\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-sync-status-option-ignore\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               kustomize-cm-gen\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (22a884e)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      22a884e46ca66120b931be42ca89b347aeacfbef\nPhase:              Succeeded\nStart:              2023-11-03 13:52:43 +0000 UTC\nFinished:           2023-11-03 13:52:44 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                         NAME               STATUS     HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-sync-status-option-ignore-jporu  my-map-798k5k7g9f  OutOfSync                ignored (no prune)\n       ConfigMap  argocd-e2e--test-sync-status-option-ignore-jporu  my-map-9922d695f7  Synced                   configmap/my-map-9922d695f7 created\n" duration=656.144371ms execID=2c4dc
time="2023-11-03T13:52:44Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:52:44Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:52:44Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:52:44Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:52:44Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestSyncStatusOptionIgnore (5.92s)
=== RUN   TestKustomizeSSHRemoteBase
time="2023-11-03T13:52:44Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=95ea6
time="2023-11-03T13:52:44Z" level=debug msg="namespace \"argocd-e2e--test-sync-status-option-ignore-jporu\" deleted\n" duration=258.059426ms execID=95ea6
time="2023-11-03T13:52:44Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=af03b
time="2023-11-03T13:52:45Z" level=debug msg="No resources found\n" duration=410.199815ms execID=af03b
time="2023-11-03T13:52:45Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=950f4
time="2023-11-03T13:52:45Z" level=debug msg="No resources found\n" duration=288.126371ms execID=950f4
time="2023-11-03T13:52:46Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:52:46Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk2NiwibmJmIjoxNjk5MDE5NTY2LCJpYXQiOjE2OTkwMTk1NjYsImp0aSI6IjM1MTlhYjViLTdiNmItNGExYS04NWFjLTkzZTQ4MGVjOTY2ZiJ9.dArq6acjmmQF354pbtC0rOquAxADEHoLvngk0LThRd0 --insecure" dir= execID=a5615
time="2023-11-03T13:52:46Z" level=debug duration=70.033327ms execID=a5615
time="2023-11-03T13:52:46Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=64e47
time="2023-11-03T13:52:46Z" level=debug duration=2.205189ms execID=64e47
time="2023-11-03T13:52:46Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=06f65
time="2023-11-03T13:52:46Z" level=debug duration=1.737414ms execID=06f65
time="2023-11-03T13:52:46Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=6ab1c
time="2023-11-03T13:52:46Z" level=debug duration=1.539719ms execID=6ab1c
time="2023-11-03T13:52:46Z" level=info msg="pkill -9 gpg-agent" dir= execID=f6d0f
time="2023-11-03T13:52:46Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=46ade
time="2023-11-03T13:52:46Z" level=debug duration=9.840927ms execID=46ade
time="2023-11-03T13:52:46Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=4c841
time="2023-11-03T13:52:46Z" level=debug duration=34.242709ms execID=4c841
time="2023-11-03T13:52:46Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=57010
time="2023-11-03T13:52:46Z" level=debug duration=2.167661ms execID=57010
time="2023-11-03T13:52:46Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=cb797
time="2023-11-03T13:52:46Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.213536ms execID=cb797
time="2023-11-03T13:52:46Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=74895
time="2023-11-03T13:52:46Z" level=debug duration=47.694844ms execID=74895
time="2023-11-03T13:52:46Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=5eb1e
time="2023-11-03T13:52:46Z" level=debug duration=23.152541ms execID=5eb1e
time="2023-11-03T13:52:46Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=71ccb
time="2023-11-03T13:52:46Z" level=debug duration=2.379528ms execID=71ccb
time="2023-11-03T13:52:46Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=00579
Handling connection for 9081
time="2023-11-03T13:52:46Z" level=debug duration=86.258801ms execID=00579
time="2023-11-03T13:52:46Z" level=info msg="kubectl create ns argocd-e2e--test-kustomize-ssh-remote-base-prcuk" dir= execID=26277
time="2023-11-03T13:52:46Z" level=debug msg="namespace/argocd-e2e--test-kustomize-ssh-remote-base-prcuk created\n" duration=123.939143ms execID=26277
time="2023-11-03T13:52:46Z" level=info msg="kubectl label ns argocd-e2e--test-kustomize-ssh-remote-base-prcuk e2e.argoproj.io=true" dir= execID=cbb3c
time="2023-11-03T13:52:47Z" level=debug msg="namespace/argocd-e2e--test-kustomize-ssh-remote-base-prcuk labeled\n" duration=350.285352ms execID=cbb3c
time="2023-11-03T13:52:47Z" level=info msg="clean state" duration=2.7752322s id=TestKustomizeSSHRemoteBase-prcuk name=TestKustomizeSSHRemoteBase password=password username=admin
time="2023-11-03T13:52:47Z" level=info msg="../../dist/argocd repo add ssh://root@argocd-e2e-server:2222/tmp/argo-e2e/testdata.git --ssh-private-key-path /argocd-e2e/argo-cd/test/fixture/testrepos/id_rsa --insecure-ignore-host-key --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk2NiwibmJmIjoxNjk5MDE5NTY2LCJpYXQiOjE2OTkwMTk1NjYsImp0aSI6IjM1MTlhYjViLTdiNmItNGExYS04NWFjLTkzZTQ4MGVjOTY2ZiJ9.dArq6acjmmQF354pbtC0rOquAxADEHoLvngk0LThRd0 --insecure" dir= execID=32269
time="2023-11-03T13:52:47Z" level=debug msg="Repository 'ssh://root@argocd-e2e-server:2222/tmp/argo-e2e/testdata.git' added\n" duration=418.877355ms execID=32269
time="2023-11-03T13:52:48Z" level=info msg="../../dist/argocd app create test-kustomize-ssh-remote-base --repo ssh://root@argocd-e2e-server:2222/tmp/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path ssh-kustomize-base/remote --project default --dest-namespace argocd-e2e--test-kustomize-ssh-remote-base-prcuk --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk2NiwibmJmIjoxNjk5MDE5NTY2LCJpYXQiOjE2OTkwMTk1NjYsImp0aSI6IjM1MTlhYjViLTdiNmItNGExYS04NWFjLTkzZTQ4MGVjOTY2ZiJ9.dArq6acjmmQF354pbtC0rOquAxADEHoLvngk0LThRd0 --insecure" dir= execID=5036b
time="2023-11-03T13:52:49Z" level=debug msg="application 'test-kustomize-ssh-remote-base' created\n" duration=859.464042ms execID=5036b
time="2023-11-03T13:52:49Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:52:49Z" level=info msg="../../dist/argocd app sync test-kustomize-ssh-remote-base --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk2NiwibmJmIjoxNjk5MDE5NTY2LCJpYXQiOjE2OTkwMTk1NjYsImp0aSI6IjM1MTlhYjViLTdiNmItNGExYS04NWFjLTkzZTQ4MGVjOTY2ZiJ9.dArq6acjmmQF354pbtC0rOquAxADEHoLvngk0LThRd0 --insecure" dir= execID=95af4
time="2023-11-03T13:52:50Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:52:50+00:00          ConfigMap  argocd-e2e--test-kustomize-ssh-remote-base-prcuk                my-map  OutOfSync  Missing              \n2023-11-03T13:52:50+00:00          ConfigMap  argocd-e2e--test-kustomize-ssh-remote-base-prcuk                my-map  OutOfSync  Missing              configmap/my-map created\n2023-11-03T13:52:50+00:00          ConfigMap  argocd-e2e--test-kustomize-ssh-remote-base-prcuk                my-map    Synced  Missing              configmap/my-map created\n\nName:               argocd-e2e/test-kustomize-ssh-remote-base\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-kustomize-ssh-remote-base-prcuk\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-kustomize-ssh-remote-base\nRepo:               ssh://root@argocd-e2e-server:2222/tmp/argo-e2e/testdata.git\nTarget:             \nPath:               ssh-kustomize-base/remote\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (6a8712c)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      6a8712c8ef422b1b897c5ffc750b95272a14993e\nPhase:              Succeeded\nStart:              2023-11-03 13:52:49 +0000 UTC\nFinished:           2023-11-03 13:52:50 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                         NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-kustomize-ssh-remote-base-prcuk  my-map  Synced                configmap/my-map created\n" duration=1.323848516s execID=95af4
time="2023-11-03T13:52:50Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:52:50Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:52:50Z" level=info msg="expectation succeeded: resource 'ConfigMap/my-map' sync status should be Synced, is Synced"
time="2023-11-03T13:52:50Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestKustomizeSSHRemoteBase (6.39s)
=== RUN   TestKustomizeDeclarativeInvalidApp
time="2023-11-03T13:52:50Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=66124
time="2023-11-03T13:52:51Z" level=debug msg="namespace \"argocd-e2e--test-kustomize-ssh-remote-base-prcuk\" deleted\n" duration=246.751059ms execID=66124
time="2023-11-03T13:52:51Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=5e96f
time="2023-11-03T13:52:51Z" level=debug msg="No resources found\n" duration=372.036694ms execID=5e96f
time="2023-11-03T13:52:51Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=3d505
time="2023-11-03T13:52:51Z" level=debug msg="No resources found\n" duration=305.088761ms execID=3d505
time="2023-11-03T13:52:52Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:52:52Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk3MiwibmJmIjoxNjk5MDE5NTcyLCJpYXQiOjE2OTkwMTk1NzIsImp0aSI6ImI3NmQ0YjE0LTVmZDItNGExMS1iZTMxLWY3NjFjZTI5YzU0NyJ9.6ko_yO2iy-pDzeZYV__Dpa3-7U75WegS1h1m3DkVdyo --insecure" dir= execID=26340
time="2023-11-03T13:52:52Z" level=debug duration=108.940508ms execID=26340
time="2023-11-03T13:52:52Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=df4b2
time="2023-11-03T13:52:52Z" level=debug duration=1.97895ms execID=df4b2
time="2023-11-03T13:52:52Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=33fb6
time="2023-11-03T13:52:52Z" level=debug duration=1.614462ms execID=33fb6
time="2023-11-03T13:52:52Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=4e1a9
time="2023-11-03T13:52:52Z" level=debug duration=1.697721ms execID=4e1a9
time="2023-11-03T13:52:52Z" level=info msg="pkill -9 gpg-agent" dir= execID=95299
time="2023-11-03T13:52:52Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=11c46
time="2023-11-03T13:52:52Z" level=debug duration=9.866538ms execID=11c46
time="2023-11-03T13:52:52Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=335e4
time="2023-11-03T13:52:52Z" level=debug duration=34.607237ms execID=335e4
time="2023-11-03T13:52:52Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=b4825
time="2023-11-03T13:52:52Z" level=debug duration=1.711644ms execID=b4825
time="2023-11-03T13:52:52Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=8c222
time="2023-11-03T13:52:52Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.953462ms execID=8c222
time="2023-11-03T13:52:52Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=561cf
time="2023-11-03T13:52:52Z" level=debug duration=33.03296ms execID=561cf
time="2023-11-03T13:52:52Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=b0158
time="2023-11-03T13:52:52Z" level=debug duration=22.903812ms execID=b0158
time="2023-11-03T13:52:52Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=c33ab
time="2023-11-03T13:52:52Z" level=debug duration=2.320264ms execID=c33ab
time="2023-11-03T13:52:52Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=5d593
Handling connection for 9081
time="2023-11-03T13:52:52Z" level=debug duration=76.328235ms execID=5d593
time="2023-11-03T13:52:52Z" level=info msg="kubectl create ns argocd-e2e--test-kustomize-declarative-invalid-app-oheam" dir= execID=aba32
time="2023-11-03T13:52:53Z" level=debug msg="namespace/argocd-e2e--test-kustomize-declarative-invalid-app-oheam created\n" duration=127.340251ms execID=aba32
time="2023-11-03T13:52:53Z" level=info msg="kubectl label ns argocd-e2e--test-kustomize-declarative-invalid-app-oheam e2e.argoproj.io=true" dir= execID=27d5a
time="2023-11-03T13:52:53Z" level=debug msg="namespace/argocd-e2e--test-kustomize-declarative-invalid-app-oheam labeled\n" duration=297.726253ms execID=27d5a
time="2023-11-03T13:52:53Z" level=info msg="clean state" duration=2.530107058s id=TestKustomizeDeclarativeInvalidApp-oheam name=TestKustomizeDeclarativeInvalidApp password=password username=admin
time="2023-11-03T13:52:54Z" level=info msg="kubectl -n argocd-e2e apply -f /tmp/48067262" dir= execID=97c72
time="2023-11-03T13:52:55Z" level=debug msg="application.argoproj.io/test-kustomize-declarative-invalid-app created\n" duration=1.159430594s execID=97c72
time="2023-11-03T13:52:55Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:52:55Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:52:55Z" level=info msg="pending: health to should Healthy, is "
time="2023-11-03T13:52:58Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:52:58Z" level=info msg="expectation succeeded: sync status to be Unknown, is Unknown"
time="2023-11-03T13:52:58Z" level=info msg="expectation succeeded: condition {ComparisonError invalid-kustomize/does-not-exist.yaml: no such file or directory} in [{ComparisonError rpc error: code = Unknown desc = `kustomize build .invalid-kustomize` failed exit status 1: Error: evalsymlink failure on '.invalid-kustomize/does-not-exist.yaml' : lstat .invalid-kustomize/does-not-exist.yaml: no such file or directory 2023-11-03 13:52:55 +0000 UTC}]"
time="2023-11-03T13:52:58Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestKustomizeDeclarativeInvalidApp (7.71s)
=== RUN   TestKustomizeBuildOptionsLoadRestrictor
time="2023-11-03T13:52:58Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=5bdbe
time="2023-11-03T13:52:58Z" level=debug msg="namespace \"argocd-e2e--test-kustomize-declarative-invalid-app-oheam\" deleted\n" duration=258.557014ms execID=5bdbe
time="2023-11-03T13:52:58Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=d8d30
time="2023-11-03T13:52:59Z" level=debug msg="No resources found\n" duration=562.023742ms execID=d8d30
time="2023-11-03T13:52:59Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=f95cb
time="2023-11-03T13:52:59Z" level=debug msg="No resources found\n" duration=228.425958ms execID=f95cb
time="2023-11-03T13:53:00Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:53:00Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk4MCwibmJmIjoxNjk5MDE5NTgwLCJpYXQiOjE2OTkwMTk1ODAsImp0aSI6IjI3ZGM5Njk5LTZlNmItNGVlOS05M2M4LTVjMTI4MmY2OTExYyJ9.jncLrgeXe84XS4VfcwmOHji5gu4s9LNGh6VbYfd18dw --insecure" dir= execID=c8fc0
time="2023-11-03T13:53:00Z" level=debug duration=86.754244ms execID=c8fc0
time="2023-11-03T13:53:00Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=21158
time="2023-11-03T13:53:00Z" level=debug duration=41.485982ms execID=21158
time="2023-11-03T13:53:00Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=b8136
time="2023-11-03T13:53:00Z" level=debug duration=1.929459ms execID=b8136
time="2023-11-03T13:53:00Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=06a2a
time="2023-11-03T13:53:00Z" level=debug duration=1.567871ms execID=06a2a
time="2023-11-03T13:53:00Z" level=info msg="pkill -9 gpg-agent" dir= execID=f8ea3
time="2023-11-03T13:53:00Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=0ee01
time="2023-11-03T13:53:00Z" level=debug duration=10.16265ms execID=0ee01
time="2023-11-03T13:53:00Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=544d3
time="2023-11-03T13:53:00Z" level=debug duration=35.88631ms execID=544d3
time="2023-11-03T13:53:00Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=0c238
time="2023-11-03T13:53:00Z" level=debug duration=1.850747ms execID=0c238
time="2023-11-03T13:53:00Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=70b44
time="2023-11-03T13:53:00Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.959812ms execID=70b44
time="2023-11-03T13:53:00Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=cdee2
time="2023-11-03T13:53:00Z" level=debug duration=27.669276ms execID=cdee2
time="2023-11-03T13:53:00Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=e68c5
time="2023-11-03T13:53:00Z" level=debug duration=23.468194ms execID=e68c5
time="2023-11-03T13:53:00Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=fb3cf
time="2023-11-03T13:53:00Z" level=debug duration=2.83191ms execID=fb3cf
time="2023-11-03T13:53:00Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=f71a7
Handling connection for 9081
time="2023-11-03T13:53:00Z" level=debug duration=62.176213ms execID=f71a7
time="2023-11-03T13:53:00Z" level=info msg="kubectl create ns argocd-e2e--test-kustomize-build-options-load-restrictor-qvuuc" dir= execID=6fa1f
time="2023-11-03T13:53:00Z" level=debug msg="namespace/argocd-e2e--test-kustomize-build-options-load-restrictor-qvuuc created\n" duration=177.637158ms execID=6fa1f
time="2023-11-03T13:53:00Z" level=info msg="kubectl label ns argocd-e2e--test-kustomize-build-options-load-restrictor-qvuuc e2e.argoproj.io=true" dir= execID=6f56e
time="2023-11-03T13:53:01Z" level=debug msg="namespace/argocd-e2e--test-kustomize-build-options-load-restrictor-qvuuc labeled\n" duration=347.730575ms execID=6f56e
time="2023-11-03T13:53:01Z" level=info msg="clean state" duration=2.57494396s id=TestKustomizeBuildOptionsLoadRestrictor-qvuuc name=TestKustomizeBuildOptionsLoadRestrictor password=password username=admin
time="2023-11-03T13:53:01Z" level=info msg="kubectl patch cm argocd-cm -n argocd-e2e -p { \"data\": { \"kustomize.buildOptions\": \"--load-restrictor LoadRestrictionsNone\" } }" dir= execID=c60e0
time="2023-11-03T13:53:01Z" level=debug msg="configmap/argocd-cm patched\n" duration=303.494663ms execID=c60e0
time="2023-11-03T13:53:02Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/resources/1\", \"value\": \"../guestbook_local/guestbook-ui-svc.yaml\"}]" path=guestbook/kustomization.yaml
time="2023-11-03T13:53:02Z" level=info msg="converting YAML to JSON"
time="2023-11-03T13:53:02Z" level=info msg=JSON bytes="{\"apiVersion\":\"kustomize.config.k8s.io/v1beta1\",\"kind\":\"Kustomization\",\"resources\":[\"./guestbook-ui-deployment.yaml\",\"./guestbook-ui-svc.yaml\"]}"
time="2023-11-03T13:53:02Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T13:53:02Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=3d1a8
time="2023-11-03T13:53:02Z" level=debug msg="diff --git a/guestbook/kustomization.yaml b/guestbook/kustomization.yaml\nindex ff46a36..504e855 100644\n--- a/guestbook/kustomization.yaml\n+++ b/guestbook/kustomization.yaml\n@@ -1,6 +1,5 @@\n apiVersion: kustomize.config.k8s.io/v1beta1\n kind: Kustomization\n-\n resources:\n-  - ./guestbook-ui-deployment.yaml\n-  - ./guestbook-ui-svc.yaml\n+- ./guestbook-ui-deployment.yaml\n+- ../guestbook_local/guestbook-ui-svc.yaml\n" duration=5.029918ms execID=3d1a8
time="2023-11-03T13:53:02Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=1f62a
time="2023-11-03T13:53:02Z" level=debug msg="[master bcab4c7] patch\n 1 file changed, 2 insertions(+), 3 deletions(-)\n" duration=12.96863ms execID=1f62a
time="2023-11-03T13:53:02Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=63045
Handling connection for 9081
time="2023-11-03T13:53:02Z" level=debug duration=37.814853ms execID=63045
time="2023-11-03T13:53:02Z" level=info msg="../../dist/argocd app create test-kustomize-build-options-load-restrictor --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-kustomize-build-options-load-restrictor-qvuuc --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk4MCwibmJmIjoxNjk5MDE5NTgwLCJpYXQiOjE2OTkwMTk1ODAsImp0aSI6IjI3ZGM5Njk5LTZlNmItNGVlOS05M2M4LTVjMTI4MmY2OTExYyJ9.jncLrgeXe84XS4VfcwmOHji5gu4s9LNGh6VbYfd18dw --insecure" dir= execID=cf5a7
time="2023-11-03T13:53:02Z" level=debug msg="application 'test-kustomize-build-options-load-restrictor' created\n" duration=275.511136ms execID=cf5a7
time="2023-11-03T13:53:02Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:53:02Z" level=info msg="../../dist/argocd app sync test-kustomize-build-options-load-restrictor --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk4MCwibmJmIjoxNjk5MDE5NTgwLCJpYXQiOjE2OTkwMTk1ODAsImp0aSI6IjI3ZGM5Njk5LTZlNmItNGVlOS05M2M4LTVjMTI4MmY2OTExYyJ9.jncLrgeXe84XS4VfcwmOHji5gu4s9LNGh6VbYfd18dw --insecure" dir= execID=96703
time="2023-11-03T13:53:03Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:53:02+00:00            Service  argocd-e2e--test-kustomize-build-options-load-restrictor-qvuuc          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:53:02+00:00   apps  Deployment  argocd-e2e--test-kustomize-build-options-load-restrictor-qvuuc          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:53:03+00:00            Service  argocd-e2e--test-kustomize-build-options-load-restrictor-qvuuc          guestbook-ui    Synced  Healthy              \n2023-11-03T13:53:03+00:00   apps  Deployment  argocd-e2e--test-kustomize-build-options-load-restrictor-qvuuc          guestbook-ui  OutOfSync  Missing              deployment.apps/guestbook-ui created\n2023-11-03T13:53:03+00:00            Service  argocd-e2e--test-kustomize-build-options-load-restrictor-qvuuc          guestbook-ui    Synced   Healthy              service/guestbook-ui created\n2023-11-03T13:53:03+00:00   apps  Deployment  argocd-e2e--test-kustomize-build-options-load-restrictor-qvuuc          guestbook-ui    Synced  Healthy              deployment.apps/guestbook-ui created\n\nName:               argocd-e2e/test-kustomize-build-options-load-restrictor\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-kustomize-build-options-load-restrictor-qvuuc\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-kustomize-build-options-load-restrictor\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (bcab4c7)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      bcab4c726a825ed254e06735b3d5f6c5b3be6c63\nPhase:              Succeeded\nStart:              2023-11-03 13:53:02 +0000 UTC\nFinished:           2023-11-03 13:53:03 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                                       NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-kustomize-build-options-load-restrictor-qvuuc  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-kustomize-build-options-load-restrictor-qvuuc  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=761.740663ms execID=96703
time="2023-11-03T13:53:03Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:53:03Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:53:03Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T13:53:03Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T13:53:03Z" level=info msg="kubectl patch cm argocd-cm -n argocd-e2e -p { \"data\": { \"kustomize.buildOptions\": \"\" } }" dir= execID=631a8
time="2023-11-03T13:53:03Z" level=debug msg="configmap/argocd-cm patched\n" duration=208.618557ms execID=631a8
time="2023-11-03T13:53:03Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestKustomizeBuildOptionsLoadRestrictor (5.20s)
=== RUN   TestKustomizeImages
time="2023-11-03T13:53:03Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=f8050
time="2023-11-03T13:53:04Z" level=debug msg="namespace \"argocd-e2e--test-kustomize-build-options-load-restrictor-qvuuc\" deleted\n" duration=272.418511ms execID=f8050
time="2023-11-03T13:53:04Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=10b5e
time="2023-11-03T13:53:04Z" level=debug msg="No resources found\n" duration=443.310063ms execID=10b5e
time="2023-11-03T13:53:04Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=2df5a
time="2023-11-03T13:53:04Z" level=debug msg="No resources found\n" duration=245.568564ms execID=2df5a
time="2023-11-03T13:53:05Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:53:05Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk4NSwibmJmIjoxNjk5MDE5NTg1LCJpYXQiOjE2OTkwMTk1ODUsImp0aSI6ImZlMDEzOGU4LTUwNWYtNGJjMi04MTZhLThhMzU5ODMzYTkyYyJ9.JqncmQzbS2Pc7nLhFDryELwPI6MwOTMZDJqDMA723_I --insecure" dir= execID=94c40
time="2023-11-03T13:53:05Z" level=debug duration=70.475763ms execID=94c40
time="2023-11-03T13:53:05Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=65f54
time="2023-11-03T13:53:05Z" level=debug duration=2.185553ms execID=65f54
time="2023-11-03T13:53:05Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=ca24b
time="2023-11-03T13:53:05Z" level=debug duration=1.739168ms execID=ca24b
time="2023-11-03T13:53:05Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=c8217
time="2023-11-03T13:53:05Z" level=debug duration=1.569016ms execID=c8217
time="2023-11-03T13:53:05Z" level=info msg="pkill -9 gpg-agent" dir= execID=8b499
time="2023-11-03T13:53:05Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=e212f
time="2023-11-03T13:53:05Z" level=debug duration=9.795895ms execID=e212f
time="2023-11-03T13:53:05Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=3b5f3
time="2023-11-03T13:53:05Z" level=debug duration=34.992026ms execID=3b5f3
time="2023-11-03T13:53:05Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=bf133
time="2023-11-03T13:53:05Z" level=debug duration=1.833587ms execID=bf133
time="2023-11-03T13:53:05Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=5719c
time="2023-11-03T13:53:05Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.777827ms execID=5719c
time="2023-11-03T13:53:05Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=677ad
time="2023-11-03T13:53:05Z" level=debug duration=27.289664ms execID=677ad
time="2023-11-03T13:53:05Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=73edd
time="2023-11-03T13:53:05Z" level=debug duration=25.446062ms execID=73edd
time="2023-11-03T13:53:05Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=bd3dd
time="2023-11-03T13:53:05Z" level=debug duration=2.794503ms execID=bd3dd
time="2023-11-03T13:53:05Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=29ceb
Handling connection for 9081
time="2023-11-03T13:53:06Z" level=debug duration=59.106912ms execID=29ceb
time="2023-11-03T13:53:06Z" level=info msg="kubectl create ns argocd-e2e--test-kustomize-images-cyefo" dir= execID=074d6
time="2023-11-03T13:53:06Z" level=debug msg="namespace/argocd-e2e--test-kustomize-images-cyefo created\n" duration=150.688251ms execID=074d6
time="2023-11-03T13:53:06Z" level=info msg="kubectl label ns argocd-e2e--test-kustomize-images-cyefo e2e.argoproj.io=true" dir= execID=81267
time="2023-11-03T13:53:06Z" level=debug msg="namespace/argocd-e2e--test-kustomize-images-cyefo labeled\n" duration=191.960739ms execID=81267
time="2023-11-03T13:53:06Z" level=info msg="clean state" duration=2.601279966s id=TestKustomizeImages-cyefo name=TestKustomizeImages password=password username=admin
time="2023-11-03T13:53:07Z" level=info msg="../../dist/argocd app create test-kustomize-images --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path kustomize --project default --dest-namespace argocd-e2e--test-kustomize-images-cyefo --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk4NSwibmJmIjoxNjk5MDE5NTg1LCJpYXQiOjE2OTkwMTk1ODUsImp0aSI6ImZlMDEzOGU4LTUwNWYtNGJjMi04MTZhLThhMzU5ODMzYTkyYyJ9.JqncmQzbS2Pc7nLhFDryELwPI6MwOTMZDJqDMA723_I --insecure" dir= execID=6a64c
time="2023-11-03T13:53:07Z" level=debug msg="application 'test-kustomize-images' created\n" duration=216.599496ms execID=6a64c
time="2023-11-03T13:53:07Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:53:07Z" level=info msg="../../dist/argocd app set test-kustomize-images --kustomize-image alpine:foo --kustomize-image alpine:bar --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk4NSwibmJmIjoxNjk5MDE5NTg1LCJpYXQiOjE2OTkwMTk1ODUsImp0aSI6ImZlMDEzOGU4LTUwNWYtNGJjMi04MTZhLThhMzU5ODMzYTkyYyJ9.JqncmQzbS2Pc7nLhFDryELwPI6MwOTMZDJqDMA723_I --insecure" dir= execID=e8bad
time="2023-11-03T13:53:07Z" level=debug duration=310.527912ms execID=e8bad
time="2023-11-03T13:53:07Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:53:07Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestKustomizeImages (4.13s)
=== RUN   TestKustomizeNameSuffix
time="2023-11-03T13:53:07Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=db969
time="2023-11-03T13:53:08Z" level=debug msg="namespace \"argocd-e2e--test-kustomize-images-cyefo\" deleted\n" duration=229.425478ms execID=db969
time="2023-11-03T13:53:08Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=750f0
time="2023-11-03T13:53:08Z" level=debug msg="No resources found\n" duration=506.292611ms execID=750f0
time="2023-11-03T13:53:08Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=46ed2
time="2023-11-03T13:53:08Z" level=debug msg="No resources found\n" duration=199.037308ms execID=46ed2
time="2023-11-03T13:53:09Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:53:09Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk4OSwibmJmIjoxNjk5MDE5NTg5LCJpYXQiOjE2OTkwMTk1ODksImp0aSI6ImY4ODdlZWFmLWRiNGYtNGFmMy1iYzI4LWYwNGQ1OWVkMTYxNSJ9.TJm5Vrco684Jf4CK0sn7vuY1sQxdkrA15F8Wydwseps --insecure" dir= execID=48e37
time="2023-11-03T13:53:10Z" level=debug duration=77.844101ms execID=48e37
time="2023-11-03T13:53:10Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=8f1b6
time="2023-11-03T13:53:10Z" level=debug duration=1.954517ms execID=8f1b6
time="2023-11-03T13:53:10Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=643bf
time="2023-11-03T13:53:10Z" level=debug duration=1.469647ms execID=643bf
time="2023-11-03T13:53:10Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=a3c52
time="2023-11-03T13:53:10Z" level=debug duration=1.632059ms execID=a3c52
time="2023-11-03T13:53:10Z" level=info msg="pkill -9 gpg-agent" dir= execID=4d7bd
time="2023-11-03T13:53:10Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=199b1
time="2023-11-03T13:53:10Z" level=debug duration=10.20005ms execID=199b1
time="2023-11-03T13:53:10Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=a62df
time="2023-11-03T13:53:10Z" level=debug duration=36.919406ms execID=a62df
time="2023-11-03T13:53:10Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=50178
time="2023-11-03T13:53:10Z" level=debug duration=12.180007ms execID=50178
time="2023-11-03T13:53:10Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=9758d
time="2023-11-03T13:53:10Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.202908ms execID=9758d
time="2023-11-03T13:53:10Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=8ba1d
time="2023-11-03T13:53:10Z" level=debug duration=28.311827ms execID=8ba1d
time="2023-11-03T13:53:10Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=39d0a
time="2023-11-03T13:53:10Z" level=debug duration=25.450666ms execID=39d0a
time="2023-11-03T13:53:10Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=d50fc
time="2023-11-03T13:53:10Z" level=debug duration=2.399314ms execID=d50fc
time="2023-11-03T13:53:10Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=7962c
Handling connection for 9081
time="2023-11-03T13:53:10Z" level=debug duration=86.042006ms execID=7962c
time="2023-11-03T13:53:10Z" level=info msg="kubectl create ns argocd-e2e--test-kustomize-name-suffix-urgqr" dir= execID=964ce
time="2023-11-03T13:53:10Z" level=debug msg="namespace/argocd-e2e--test-kustomize-name-suffix-urgqr created\n" duration=151.627672ms execID=964ce
time="2023-11-03T13:53:10Z" level=info msg="kubectl label ns argocd-e2e--test-kustomize-name-suffix-urgqr e2e.argoproj.io=true" dir= execID=48999
time="2023-11-03T13:53:10Z" level=debug msg="namespace/argocd-e2e--test-kustomize-name-suffix-urgqr labeled\n" duration=240.112222ms execID=48999
time="2023-11-03T13:53:10Z" level=info msg="clean state" duration=2.785104893s id=TestKustomizeNameSuffix-urgqr name=TestKustomizeNameSuffix password=password username=admin
time="2023-11-03T13:53:11Z" level=info msg="../../dist/argocd app create test-kustomize-name-suffix --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path kustomize --project default --dest-namespace argocd-e2e--test-kustomize-name-suffix-urgqr --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk4OSwibmJmIjoxNjk5MDE5NTg5LCJpYXQiOjE2OTkwMTk1ODksImp0aSI6ImY4ODdlZWFmLWRiNGYtNGFmMy1iYzI4LWYwNGQ1OWVkMTYxNSJ9.TJm5Vrco684Jf4CK0sn7vuY1sQxdkrA15F8Wydwseps --insecure" dir= execID=cd656
time="2023-11-03T13:53:11Z" level=debug msg="application 'test-kustomize-name-suffix' created\n" duration=271.828277ms execID=cd656
time="2023-11-03T13:53:11Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:53:11Z" level=info msg="../../dist/argocd app set test-kustomize-name-suffix --namesuffix -suf --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk4OSwibmJmIjoxNjk5MDE5NTg5LCJpYXQiOjE2OTkwMTk1ODksImp0aSI6ImY4ODdlZWFmLWRiNGYtNGFmMy1iYzI4LWYwNGQ1OWVkMTYxNSJ9.TJm5Vrco684Jf4CK0sn7vuY1sQxdkrA15F8Wydwseps --insecure" dir= execID=3e266
time="2023-11-03T13:53:12Z" level=debug duration=319.674375ms execID=3e266
time="2023-11-03T13:53:12Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:53:12Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestKustomizeNameSuffix (4.38s)
=== RUN   TestKustomizeUnsetOverride
time="2023-11-03T13:53:12Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=9cc6c
time="2023-11-03T13:53:12Z" level=debug msg="namespace \"argocd-e2e--test-kustomize-name-suffix-urgqr\" deleted\n" duration=324.290588ms execID=9cc6c
time="2023-11-03T13:53:12Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=d32ac
time="2023-11-03T13:53:13Z" level=debug msg="No resources found\n" duration=571.490976ms execID=d32ac
time="2023-11-03T13:53:13Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=73472
time="2023-11-03T13:53:13Z" level=debug msg="No resources found\n" duration=251.234131ms execID=73472
time="2023-11-03T13:53:14Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:53:14Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk5NCwibmJmIjoxNjk5MDE5NTk0LCJpYXQiOjE2OTkwMTk1OTQsImp0aSI6Ijg2YjY4ZTBmLWJjZDctNDY1Ny1hZTAwLTE4NWM1MzJiOTI3NyJ9.DijV1cZRhMsLUlnQVD-dy4FI4vO8ziobI7keHkrtbxA --insecure" dir= execID=12f9d
time="2023-11-03T13:53:14Z" level=debug duration=120.319463ms execID=12f9d
time="2023-11-03T13:53:14Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=49c10
time="2023-11-03T13:53:14Z" level=debug duration=2.092398ms execID=49c10
time="2023-11-03T13:53:14Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=c454b
time="2023-11-03T13:53:14Z" level=debug duration=1.670244ms execID=c454b
time="2023-11-03T13:53:14Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=bfd50
time="2023-11-03T13:53:14Z" level=debug duration=1.891328ms execID=bfd50
time="2023-11-03T13:53:14Z" level=info msg="pkill -9 gpg-agent" dir= execID=b7954
time="2023-11-03T13:53:14Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=0ef4e
time="2023-11-03T13:53:14Z" level=debug duration=9.763055ms execID=0ef4e
time="2023-11-03T13:53:14Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=77604
time="2023-11-03T13:53:14Z" level=debug duration=33.62739ms execID=77604
time="2023-11-03T13:53:14Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=bf525
time="2023-11-03T13:53:14Z" level=debug duration=8.462401ms execID=bf525
time="2023-11-03T13:53:14Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=13eac
time="2023-11-03T13:53:14Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.135789ms execID=13eac
time="2023-11-03T13:53:14Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=27fba
time="2023-11-03T13:53:14Z" level=debug duration=27.36045ms execID=27fba
time="2023-11-03T13:53:14Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=53eef
time="2023-11-03T13:53:14Z" level=debug duration=23.200529ms execID=53eef
time="2023-11-03T13:53:14Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=0ec1c
time="2023-11-03T13:53:14Z" level=debug duration=2.319914ms execID=0ec1c
time="2023-11-03T13:53:14Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=e2f5a
Handling connection for 9081
time="2023-11-03T13:53:14Z" level=debug duration=78.555061ms execID=e2f5a
time="2023-11-03T13:53:14Z" level=info msg="kubectl create ns argocd-e2e--test-kustomize-unset-override-zjdia" dir= execID=60c2d
time="2023-11-03T13:53:14Z" level=debug msg="namespace/argocd-e2e--test-kustomize-unset-override-zjdia created\n" duration=162.472649ms execID=60c2d
time="2023-11-03T13:53:14Z" level=info msg="kubectl label ns argocd-e2e--test-kustomize-unset-override-zjdia e2e.argoproj.io=true" dir= execID=0b8be
time="2023-11-03T13:53:15Z" level=debug msg="namespace/argocd-e2e--test-kustomize-unset-override-zjdia labeled\n" duration=302.879627ms execID=0b8be
time="2023-11-03T13:53:15Z" level=info msg="clean state" duration=2.76395869s id=TestKustomizeUnsetOverride-zjdia name=TestKustomizeUnsetOverride password=password username=admin
time="2023-11-03T13:53:16Z" level=info msg="../../dist/argocd app create test-kustomize-unset-override --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path kustomize --project default --dest-namespace argocd-e2e--test-kustomize-unset-override-zjdia --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk5NCwibmJmIjoxNjk5MDE5NTk0LCJpYXQiOjE2OTkwMTk1OTQsImp0aSI6Ijg2YjY4ZTBmLWJjZDctNDY1Ny1hZTAwLTE4NWM1MzJiOTI3NyJ9.DijV1cZRhMsLUlnQVD-dy4FI4vO8ziobI7keHkrtbxA --insecure" dir= execID=37681
time="2023-11-03T13:53:16Z" level=debug msg="application 'test-kustomize-unset-override' created\n" duration=309.345649ms execID=37681
time="2023-11-03T13:53:16Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:53:16Z" level=info msg="../../dist/argocd app set test-kustomize-unset-override --namesuffix -suf --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk5NCwibmJmIjoxNjk5MDE5NTk0LCJpYXQiOjE2OTkwMTk1OTQsImp0aSI6Ijg2YjY4ZTBmLWJjZDctNDY1Ny1hZTAwLTE4NWM1MzJiOTI3NyJ9.DijV1cZRhMsLUlnQVD-dy4FI4vO8ziobI7keHkrtbxA --insecure" dir= execID=f62b6
time="2023-11-03T13:53:16Z" level=debug duration=315.834492ms execID=f62b6
time="2023-11-03T13:53:16Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:53:16Z" level=info msg="../../dist/argocd app unset test-kustomize-unset-override --namesuffix --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk5NCwibmJmIjoxNjk5MDE5NTk0LCJpYXQiOjE2OTkwMTk1OTQsImp0aSI6Ijg2YjY4ZTBmLWJjZDctNDY1Ny1hZTAwLTE4NWM1MzJiOTI3NyJ9.DijV1cZRhMsLUlnQVD-dy4FI4vO8ziobI7keHkrtbxA --insecure" dir= execID=76c16
time="2023-11-03T13:53:16Z" level=debug duration=123.670998ms execID=76c16
time="2023-11-03T13:53:16Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:53:16Z" level=info msg="../../dist/argocd app set test-kustomize-unset-override --kustomize-image alpine:foo --kustomize-image alpine:bar --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk5NCwibmJmIjoxNjk5MDE5NTk0LCJpYXQiOjE2OTkwMTk1OTQsImp0aSI6Ijg2YjY4ZTBmLWJjZDctNDY1Ny1hZTAwLTE4NWM1MzJiOTI3NyJ9.DijV1cZRhMsLUlnQVD-dy4FI4vO8ziobI7keHkrtbxA --insecure" dir= execID=e4b1f
time="2023-11-03T13:53:17Z" level=debug duration=292.99488ms execID=e4b1f
time="2023-11-03T13:53:17Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:53:17Z" level=info msg="../../dist/argocd app unset test-kustomize-unset-override --kustomize-image alpine --kustomize-image alpine --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNTk5NCwibmJmIjoxNjk5MDE5NTk0LCJpYXQiOjE2OTkwMTk1OTQsImp0aSI6Ijg2YjY4ZTBmLWJjZDctNDY1Ny1hZTAwLTE4NWM1MzJiOTI3NyJ9.DijV1cZRhMsLUlnQVD-dy4FI4vO8ziobI7keHkrtbxA --insecure" dir= execID=f3364
time="2023-11-03T13:53:17Z" level=debug duration=98.718416ms execID=f3364
time="2023-11-03T13:53:17Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:53:17Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestKustomizeUnsetOverride (4.92s)
=== RUN   TestListMatrixGenerator
time="2023-11-03T13:53:17Z" level=info msg="mkdir -p /tmp/applicationset-e2e" dir= execID=1d9db
time="2023-11-03T13:53:17Z" level=debug duration=2.094089ms execID=1d9db
time="2023-11-03T13:53:17Z" level=info msg="clean state" duration=42.395412ms id= name=TestListMatrixGenerator password=password username=admin
time="2023-11-03T13:53:18Z" level=info msg="action: creating ApplicationSet 'matrix-generator'"
time="2023-11-03T13:53:18Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:53:18Z" level=info msg="expectation pending: missing app 'cluster1-kustomize-guestbook'"
time="2023-11-03T13:53:21Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:53:21Z" level=info msg="action: updating ApplicationSet 'matrix-generator'"
time="2023-11-03T13:53:21Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:53:21Z" level=info msg="expectation pending: apps are not equal: 'cluster1-kustomize-guestbook', diff: {\"spec\":{\"destination\":{\"namespace\":\"kustomize-guestbook\"}}}\n"
time="2023-11-03T13:53:24Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:53:24Z" level=info msg="action: updating ApplicationSet 'matrix-generator'"
time="2023-11-03T13:53:24Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:53:24Z" level=info msg="expectation pending: apps are not equal: 'cluster1-kustomize-guestbook', diff: {\"metadata\":{\"annotations\":null,\"labels\":null}}\n"
time="2023-11-03T13:53:27Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:53:27Z" level=info msg="action: Deleting ApplicationSet 'matrix-generator' <nil>"
time="2023-11-03T13:53:27Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:53:27Z" level=info msg="expectation pending: app 'cluster1-kustomize-guestbook' should no longer exist"
time="2023-11-03T13:53:30Z" level=info msg="expectation succeeded: all apps do not exist"
--- PASS: TestListMatrixGenerator (13.47s)
=== RUN   TestClusterMatrixGenerator
time="2023-11-03T13:53:30Z" level=info msg="mkdir -p /tmp/applicationset-e2e" dir= execID=dc0d1
time="2023-11-03T13:53:30Z" level=debug duration=31.222986ms execID=dc0d1
time="2023-11-03T13:53:30Z" level=info msg="clean state" duration=69.735124ms id= name=TestClusterMatrixGenerator password=password username=admin
time="2023-11-03T13:53:32Z" level=info msg="action: creating cluster Secret 'my-secret'"
time="2023-11-03T13:53:32Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:53:32Z" level=info msg="action: creating cluster Secret 'my-secret2'"
time="2023-11-03T13:53:32Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:53:32Z" level=info msg="action: creating ApplicationSet 'matrix-generator'"
time="2023-11-03T13:53:32Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:53:32Z" level=info msg="expectation pending: missing app 'cluster1-kustomize-guestbook'"
time="2023-11-03T13:53:35Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:53:35Z" level=info msg="action: updating ApplicationSet 'matrix-generator'"
time="2023-11-03T13:53:35Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:53:35Z" level=info msg="expectation pending: apps are not equal: 'cluster1-kustomize-guestbook', diff: {\"spec\":{\"destination\":{\"namespace\":\"kustomize-guestbook\"}}}\n"
time="2023-11-03T13:53:38Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:53:38Z" level=info msg="action: updating ApplicationSet 'matrix-generator'"
time="2023-11-03T13:53:38Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:53:39Z" level=info msg="expectation pending: apps are not equal: 'cluster1-kustomize-guestbook', diff: {\"metadata\":{\"annotations\":null,\"labels\":null}}\n"
time="2023-11-03T13:53:42Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:53:42Z" level=info msg="action: Deleting ApplicationSet 'matrix-generator' <nil>"
time="2023-11-03T13:53:42Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:53:42Z" level=info msg="expectation pending: app 'cluster1-kustomize-guestbook' should no longer exist"
time="2023-11-03T13:53:45Z" level=info msg="expectation succeeded: all apps do not exist"
--- PASS: TestClusterMatrixGenerator (14.50s)
=== RUN   TestListMergeGenerator
time="2023-11-03T13:53:45Z" level=info msg="mkdir -p /tmp/applicationset-e2e" dir= execID=e5269
time="2023-11-03T13:53:45Z" level=debug duration=2.336785ms execID=e5269
time="2023-11-03T13:53:45Z" level=info msg="clean state" duration=47.550195ms id= name=TestListMergeGenerator password=password username=admin
time="2023-11-03T13:53:46Z" level=info msg="action: creating ApplicationSet 'merge-generator'"
time="2023-11-03T13:53:46Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:53:46Z" level=info msg="expectation pending: missing app 'kustomize-guestbook-1'"
time="2023-11-03T13:53:49Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:53:49Z" level=info msg="action: updating ApplicationSet 'merge-generator'"
time="2023-11-03T13:53:49Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:53:49Z" level=info msg="expectation pending: apps are not equal: 'kustomize-guestbook-1', diff: {\"spec\":{\"destination\":{\"namespace\":\"kustomize-guestbook\"}}}\n"
time="2023-11-03T13:53:52Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:53:52Z" level=info msg="action: updating ApplicationSet 'merge-generator'"
time="2023-11-03T13:53:52Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:53:52Z" level=info msg="expectation pending: apps are not equal: 'kustomize-guestbook-1', diff: {\"metadata\":{\"annotations\":null,\"labels\":null}}\n"
time="2023-11-03T13:53:55Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:53:55Z" level=info msg="action: Deleting ApplicationSet 'merge-generator' <nil>"
time="2023-11-03T13:53:55Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:53:55Z" level=info msg="expectation pending: app 'kustomize-guestbook-1' should no longer exist"
time="2023-11-03T13:53:58Z" level=info msg="expectation succeeded: all apps do not exist"
--- PASS: TestListMergeGenerator (13.17s)
=== RUN   TestClusterMergeGenerator
time="2023-11-03T13:53:58Z" level=info msg="mkdir -p /tmp/applicationset-e2e" dir= execID=dfac7
time="2023-11-03T13:53:58Z" level=debug duration=2.135952ms execID=dfac7
time="2023-11-03T13:53:58Z" level=info msg="clean state" duration=33.920044ms id= name=TestClusterMergeGenerator password=password username=admin
time="2023-11-03T13:53:59Z" level=info msg="action: creating cluster Secret 'my-secret'"
time="2023-11-03T13:53:59Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:54:00Z" level=info msg="action: creating cluster Secret 'my-secret2'"
time="2023-11-03T13:54:00Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:54:00Z" level=info msg="action: creating ApplicationSet 'merge-generator'"
time="2023-11-03T13:54:00Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:54:00Z" level=info msg="expectation pending: missing app 'cluster1-kustomize-guestbook-1'"
time="2023-11-03T13:54:03Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:54:03Z" level=info msg="action: updating ApplicationSet 'merge-generator'"
time="2023-11-03T13:54:03Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:54:03Z" level=info msg="expectation pending: apps are not equal: 'cluster1-kustomize-guestbook-1', diff: {\"spec\":{\"destination\":{\"namespace\":\"kustomize-guestbook\"}}}\n"
time="2023-11-03T13:54:06Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:54:06Z" level=info msg="action: updating ApplicationSet 'merge-generator'"
time="2023-11-03T13:54:06Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:54:06Z" level=info msg="expectation pending: apps are not equal: 'cluster1-kustomize-guestbook-1', diff: {\"metadata\":{\"annotations\":null,\"labels\":null}}\n"
time="2023-11-03T13:54:09Z" level=info msg="expectation succeeded: all apps successfully found"
time="2023-11-03T13:54:09Z" level=info msg="action: Deleting ApplicationSet 'merge-generator' <nil>"
time="2023-11-03T13:54:09Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:54:09Z" level=info msg="expectation pending: app 'cluster1-kustomize-guestbook-1' should no longer exist"
time="2023-11-03T13:54:12Z" level=info msg="expectation succeeded: all apps do not exist"
--- PASS: TestClusterMergeGenerator (14.50s)
=== RUN   TestNotificationsListServices
time="2023-11-03T13:54:12Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=fbf79
time="2023-11-03T13:54:13Z" level=debug msg="namespace \"argocd-e2e--test-kustomize-unset-override-zjdia\" deleted\n" duration=217.711463ms execID=fbf79
time="2023-11-03T13:54:13Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=78f93
time="2023-11-03T13:54:13Z" level=debug msg="No resources found\n" duration=436.763437ms execID=78f93
time="2023-11-03T13:54:13Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=b6b2c
time="2023-11-03T13:54:13Z" level=debug msg="No resources found\n" duration=303.733598ms execID=b6b2c
time="2023-11-03T13:54:14Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:54:14Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA1NCwibmJmIjoxNjk5MDE5NjU0LCJpYXQiOjE2OTkwMTk2NTQsImp0aSI6IjE2N2E2ODQ3LWYwODYtNDZiMS1hYjVlLTA5MjVkYmI5NjI3YSJ9.77OiuL61vAC4tYpT0Fudvk6Mihtndcqv6siIHVHk_yw --insecure" dir= execID=fb087
time="2023-11-03T13:54:15Z" level=debug duration=90.922775ms execID=fb087
time="2023-11-03T13:54:15Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=ddaf8
time="2023-11-03T13:54:15Z" level=debug duration=2.108067ms execID=ddaf8
time="2023-11-03T13:54:15Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=de66a
time="2023-11-03T13:54:15Z" level=debug duration=1.671389ms execID=de66a
time="2023-11-03T13:54:15Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=bab5e
time="2023-11-03T13:54:15Z" level=debug duration=1.602788ms execID=bab5e
time="2023-11-03T13:54:15Z" level=info msg="pkill -9 gpg-agent" dir= execID=c9ff7
time="2023-11-03T13:54:15Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=20c9a
time="2023-11-03T13:54:15Z" level=debug duration=10.437642ms execID=20c9a
time="2023-11-03T13:54:15Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=401e9
time="2023-11-03T13:54:15Z" level=debug duration=68.757081ms execID=401e9
time="2023-11-03T13:54:15Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=7dc18
time="2023-11-03T13:54:15Z" level=debug duration=2.052555ms execID=7dc18
time="2023-11-03T13:54:15Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=f09d1
time="2023-11-03T13:54:15Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.155822ms execID=f09d1
time="2023-11-03T13:54:15Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=13e78
time="2023-11-03T13:54:15Z" level=debug duration=27.275544ms execID=13e78
time="2023-11-03T13:54:15Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=2f180
time="2023-11-03T13:54:15Z" level=debug duration=22.260576ms execID=2f180
time="2023-11-03T13:54:15Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=20b4f
time="2023-11-03T13:54:15Z" level=debug duration=2.138845ms execID=20b4f
time="2023-11-03T13:54:15Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=c4f3d
Handling connection for 9081
time="2023-11-03T13:54:15Z" level=debug duration=92.339768ms execID=c4f3d
time="2023-11-03T13:54:15Z" level=info msg="kubectl create ns argocd-e2e--test-notifications-list-services-gdrah" dir= execID=d610d
time="2023-11-03T13:54:15Z" level=debug msg="namespace/argocd-e2e--test-notifications-list-services-gdrah created\n" duration=195.353281ms execID=d610d
time="2023-11-03T13:54:15Z" level=info msg="kubectl label ns argocd-e2e--test-notifications-list-services-gdrah e2e.argoproj.io=true" dir= execID=c0c8a
time="2023-11-03T13:54:15Z" level=debug msg="namespace/argocd-e2e--test-notifications-list-services-gdrah labeled\n" duration=292.8229ms execID=c0c8a
time="2023-11-03T13:54:15Z" level=info msg="clean state" duration=3.019596964s id=TestNotificationsListServices-gdrah name=TestNotificationsListServices password=password username=admin
time="2023-11-03T13:54:16Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNotificationsListServices (4.04s)
=== RUN   TestNotificationsListTemplates
time="2023-11-03T13:54:16Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=7ff5e
time="2023-11-03T13:54:17Z" level=debug msg="namespace \"argocd-e2e--test-notifications-list-services-gdrah\" deleted\n" duration=295.250769ms execID=7ff5e
time="2023-11-03T13:54:17Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=0a6f1
time="2023-11-03T13:54:17Z" level=debug msg="No resources found\n" duration=391.205548ms execID=0a6f1
time="2023-11-03T13:54:17Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=64de3
time="2023-11-03T13:54:17Z" level=debug msg="No resources found\n" duration=312.110121ms execID=64de3
time="2023-11-03T13:54:18Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:54:18Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA1OCwibmJmIjoxNjk5MDE5NjU4LCJpYXQiOjE2OTkwMTk2NTgsImp0aSI6IjUwY2FjZDBjLTYxNWEtNDliMi1hZjBiLThiZjFkZDA1NzBjMSJ9.A2KeiLjKLfmnU-3SdUPd-cNst6cquE_da77rIa35r50 --insecure" dir= execID=82bd7
time="2023-11-03T13:54:18Z" level=debug duration=78.925579ms execID=82bd7
time="2023-11-03T13:54:18Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=c1b48
time="2023-11-03T13:54:18Z" level=debug duration=2.108633ms execID=c1b48
time="2023-11-03T13:54:18Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=d5d63
time="2023-11-03T13:54:18Z" level=debug duration=2.094123ms execID=d5d63
time="2023-11-03T13:54:18Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=eb185
time="2023-11-03T13:54:18Z" level=debug duration=1.574313ms execID=eb185
time="2023-11-03T13:54:18Z" level=info msg="pkill -9 gpg-agent" dir= execID=e11d2
time="2023-11-03T13:54:18Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=04755
time="2023-11-03T13:54:18Z" level=debug duration=9.649783ms execID=04755
time="2023-11-03T13:54:18Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=605ce
time="2023-11-03T13:54:18Z" level=debug duration=36.356982ms execID=605ce
time="2023-11-03T13:54:18Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=16d7b
time="2023-11-03T13:54:18Z" level=debug duration=1.965596ms execID=16d7b
time="2023-11-03T13:54:18Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=d3515
time="2023-11-03T13:54:18Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.940648ms execID=d3515
time="2023-11-03T13:54:18Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=5c26c
time="2023-11-03T13:54:18Z" level=debug duration=26.497997ms execID=5c26c
time="2023-11-03T13:54:18Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=288e6
time="2023-11-03T13:54:18Z" level=debug duration=23.300614ms execID=288e6
time="2023-11-03T13:54:18Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=a8f03
time="2023-11-03T13:54:18Z" level=debug duration=2.217689ms execID=a8f03
time="2023-11-03T13:54:18Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=aac48
Handling connection for 9081
time="2023-11-03T13:54:18Z" level=debug duration=82.483893ms execID=aac48
time="2023-11-03T13:54:18Z" level=info msg="kubectl create ns argocd-e2e--test-notifications-list-templates-ucwar" dir= execID=4c5eb
time="2023-11-03T13:54:19Z" level=debug msg="namespace/argocd-e2e--test-notifications-list-templates-ucwar created\n" duration=160.013289ms execID=4c5eb
time="2023-11-03T13:54:19Z" level=info msg="kubectl label ns argocd-e2e--test-notifications-list-templates-ucwar e2e.argoproj.io=true" dir= execID=59752
time="2023-11-03T13:54:19Z" level=debug msg="namespace/argocd-e2e--test-notifications-list-templates-ucwar labeled\n" duration=300.310959ms execID=59752
time="2023-11-03T13:54:19Z" level=info msg="clean state" duration=2.444490582s id=TestNotificationsListTemplates-ucwar name=TestNotificationsListTemplates password=password username=admin
time="2023-11-03T13:54:20Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNotificationsListTemplates (3.47s)
=== RUN   TestNotificationsListTriggers
time="2023-11-03T13:54:20Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=16824
time="2023-11-03T13:54:20Z" level=debug msg="namespace \"argocd-e2e--test-notifications-list-templates-ucwar\" deleted\n" duration=263.887333ms execID=16824
time="2023-11-03T13:54:20Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=08391
time="2023-11-03T13:54:21Z" level=debug msg="No resources found\n" duration=371.602051ms execID=08391
time="2023-11-03T13:54:21Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=29774
time="2023-11-03T13:54:21Z" level=debug msg="No resources found\n" duration=299.549243ms execID=29774
time="2023-11-03T13:54:21Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:54:21Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA2MSwibmJmIjoxNjk5MDE5NjYxLCJpYXQiOjE2OTkwMTk2NjEsImp0aSI6ImRhZGVhMTBjLWUzMzItNDRiZi1hYTIzLTllYWFiZWUzZmYzZCJ9.8wbFC5RjaGYMbXEqte2ThZ-xXJdoUeSq8gJpY8nMiXc --insecure" dir= execID=28cc4
time="2023-11-03T13:54:22Z" level=debug duration=77.158643ms execID=28cc4
time="2023-11-03T13:54:22Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=cf53c
time="2023-11-03T13:54:22Z" level=debug duration=2.205757ms execID=cf53c
time="2023-11-03T13:54:22Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=c3dcf
time="2023-11-03T13:54:22Z" level=debug duration=1.80456ms execID=c3dcf
time="2023-11-03T13:54:22Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=f286f
time="2023-11-03T13:54:22Z" level=debug duration=1.440914ms execID=f286f
time="2023-11-03T13:54:22Z" level=info msg="pkill -9 gpg-agent" dir= execID=ed383
time="2023-11-03T13:54:22Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=a69c7
time="2023-11-03T13:54:22Z" level=debug duration=10.461587ms execID=a69c7
time="2023-11-03T13:54:22Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=ee7c0
time="2023-11-03T13:54:22Z" level=debug duration=54.208511ms execID=ee7c0
time="2023-11-03T13:54:22Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=e7e96
time="2023-11-03T13:54:22Z" level=debug duration=2.286715ms execID=e7e96
time="2023-11-03T13:54:22Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=bca58
time="2023-11-03T13:54:22Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.55655ms execID=bca58
time="2023-11-03T13:54:22Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=5471c
time="2023-11-03T13:54:22Z" level=debug duration=28.564392ms execID=5471c
time="2023-11-03T13:54:22Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=74095
time="2023-11-03T13:54:22Z" level=debug duration=29.970337ms execID=74095
time="2023-11-03T13:54:22Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=6d4e1
time="2023-11-03T13:54:22Z" level=debug duration=2.285591ms execID=6d4e1
time="2023-11-03T13:54:22Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=3e9b4
Handling connection for 9081
time="2023-11-03T13:54:22Z" level=debug duration=85.195975ms execID=3e9b4
time="2023-11-03T13:54:22Z" level=info msg="kubectl create ns argocd-e2e--test-notifications-list-triggers-icsiv" dir= execID=4b793
time="2023-11-03T13:54:22Z" level=debug msg="namespace/argocd-e2e--test-notifications-list-triggers-icsiv created\n" duration=174.49845ms execID=4b793
time="2023-11-03T13:54:22Z" level=info msg="kubectl label ns argocd-e2e--test-notifications-list-triggers-icsiv e2e.argoproj.io=true" dir= execID=e2c09
time="2023-11-03T13:54:22Z" level=debug msg="namespace/argocd-e2e--test-notifications-list-triggers-icsiv labeled\n" duration=376.280208ms execID=e2c09
time="2023-11-03T13:54:22Z" level=info msg="clean state" duration=2.481055218s id=TestNotificationsListTriggers-icsiv name=TestNotificationsListTriggers password=password username=admin
time="2023-11-03T13:54:23Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestNotificationsListTriggers (3.54s)
=== RUN   TestProjectCreation
time="2023-11-03T13:54:23Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=17505
time="2023-11-03T13:54:24Z" level=debug msg="namespace \"argocd-e2e--test-notifications-list-triggers-icsiv\" deleted\n" duration=295.899987ms execID=17505
time="2023-11-03T13:54:24Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=42009
time="2023-11-03T13:54:24Z" level=debug msg="No resources found\n" duration=378.266288ms execID=42009
time="2023-11-03T13:54:24Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=44ce5
time="2023-11-03T13:54:24Z" level=debug msg="No resources found\n" duration=244.465377ms execID=44ce5
time="2023-11-03T13:54:25Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:54:25Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA2NSwibmJmIjoxNjk5MDE5NjY1LCJpYXQiOjE2OTkwMTk2NjUsImp0aSI6IjljNmU4OWEyLTFkODItNDYxMi1hMmUwLTM4ODMxMTU4MDM2ZiJ9.cwm7usJ9KpC_f31g_q-zjrlLO7TPX6yH6uyei06b-f8 --insecure" dir= execID=96d9c
time="2023-11-03T13:54:25Z" level=debug duration=90.518538ms execID=96d9c
time="2023-11-03T13:54:25Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=81b33
time="2023-11-03T13:54:25Z" level=debug duration=2.459587ms execID=81b33
time="2023-11-03T13:54:25Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=8420f
time="2023-11-03T13:54:25Z" level=debug duration=2.941132ms execID=8420f
time="2023-11-03T13:54:25Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=1095d
time="2023-11-03T13:54:25Z" level=debug duration=2.955043ms execID=1095d
time="2023-11-03T13:54:25Z" level=info msg="pkill -9 gpg-agent" dir= execID=fd601
time="2023-11-03T13:54:25Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=863d6
time="2023-11-03T13:54:25Z" level=debug duration=13.686482ms execID=863d6
time="2023-11-03T13:54:25Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=c8979
time="2023-11-03T13:54:25Z" level=debug duration=71.662243ms execID=c8979
time="2023-11-03T13:54:25Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=88b65
time="2023-11-03T13:54:25Z" level=debug duration=1.928765ms execID=88b65
time="2023-11-03T13:54:25Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=2fac1
time="2023-11-03T13:54:25Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.612347ms execID=2fac1
time="2023-11-03T13:54:25Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=b2893
time="2023-11-03T13:54:25Z" level=debug duration=29.7308ms execID=b2893
time="2023-11-03T13:54:25Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=8e8c3
time="2023-11-03T13:54:25Z" level=debug duration=22.899515ms execID=8e8c3
time="2023-11-03T13:54:25Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=256d8
time="2023-11-03T13:54:25Z" level=debug duration=2.459128ms execID=256d8
time="2023-11-03T13:54:25Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=1d8f2
Handling connection for 9081
time="2023-11-03T13:54:25Z" level=debug duration=67.115682ms execID=1d8f2
time="2023-11-03T13:54:25Z" level=info msg="kubectl create ns argocd-e2e--test-project-creation-qnick" dir= execID=2a212
time="2023-11-03T13:54:26Z" level=debug msg="namespace/argocd-e2e--test-project-creation-qnick created\n" duration=174.325341ms execID=2a212
time="2023-11-03T13:54:26Z" level=info msg="kubectl label ns argocd-e2e--test-project-creation-qnick e2e.argoproj.io=true" dir= execID=eabd9
time="2023-11-03T13:54:26Z" level=debug msg="namespace/argocd-e2e--test-project-creation-qnick labeled\n" duration=273.799229ms execID=eabd9
time="2023-11-03T13:54:26Z" level=info msg="clean state" duration=2.539579654s id=TestProjectCreation-qnick name=TestProjectCreation password=password username=admin
time="2023-11-03T13:54:26Z" level=info msg="../../dist/argocd proj create proj-test-project-creation --description Test description -d https://192.168.99.100:8443,default -d https://192.168.99.100:8443,service -s https://github.com/argoproj/argo-cd.git --orphaned-resources --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA2NSwibmJmIjoxNjk5MDE5NjY1LCJpYXQiOjE2OTkwMTk2NjUsImp0aSI6IjljNmU4OWEyLTFkODItNDYxMi1hMmUwLTM4ODMxMTU4MDM2ZiJ9.cwm7usJ9KpC_f31g_q-zjrlLO7TPX6yH6uyei06b-f8 --insecure" dir= execID=6fed8
time="2023-11-03T13:54:26Z" level=debug duration=136.045933ms execID=6fed8
time="2023-11-03T13:54:26Z" level=info msg="../../dist/argocd proj create -f - --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA2NSwibmJmIjoxNjk5MDE5NjY1LCJpYXQiOjE2OTkwMTk2NjUsImp0aSI6IjljNmU4OWEyLTFkODItNDYxMi1hMmUwLTM4ODMxMTU4MDM2ZiJ9.cwm7usJ9KpC_f31g_q-zjrlLO7TPX6yH6uyei06b-f8 --insecure" dir= execID=92787
time="2023-11-03T13:54:26Z" level=debug duration=73.940814ms execID=92787
time="2023-11-03T13:54:26Z" level=error msg="`../../dist/argocd proj create -f - --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA2NSwibmJmIjoxNjk5MDE5NjY1LCJpYXQiOjE2OTkwMTk2NjUsImp0aSI6IjljNmU4OWEyLTFkODItNDYxMi1hMmUwLTM4ODMxMTU4MDM2ZiJ9.cwm7usJ9KpC_f31g_q-zjrlLO7TPX6yH6uyei06b-f8 --insecure` failed exit status 20: time=\"2023-11-03T13:54:26Z\" level=fatal msg=\"rpc error: code = InvalidArgument desc = existing project spec is different; use upsert flag to force update; difference in keys \\\"Description\\\"\"" execID=92787
time="2023-11-03T13:54:26Z" level=info msg="../../dist/argocd proj create -f - --upsert --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA2NSwibmJmIjoxNjk5MDE5NjY1LCJpYXQiOjE2OTkwMTk2NjUsImp0aSI6IjljNmU4OWEyLTFkODItNDYxMi1hMmUwLTM4ODMxMTU4MDM2ZiJ9.cwm7usJ9KpC_f31g_q-zjrlLO7TPX6yH6uyei06b-f8 --insecure" dir= execID=5ea0c
time="2023-11-03T13:54:26Z" level=debug duration=149.983361ms execID=5ea0c
time="2023-11-03T13:54:26Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestProjectCreation (2.94s)
=== RUN   TestProjectDeletion
time="2023-11-03T13:54:26Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=5c532
time="2023-11-03T13:54:27Z" level=debug msg="namespace \"argocd-e2e--test-project-creation-qnick\" deleted\n" duration=234.738492ms execID=5c532
time="2023-11-03T13:54:27Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=5a791
time="2023-11-03T13:54:27Z" level=debug msg="No resources found\n" duration=492.495705ms execID=5a791
time="2023-11-03T13:54:27Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=78b74
time="2023-11-03T13:54:27Z" level=debug msg="No resources found\n" duration=229.88775ms execID=78b74
time="2023-11-03T13:54:28Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:54:28Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA2OCwibmJmIjoxNjk5MDE5NjY4LCJpYXQiOjE2OTkwMTk2NjgsImp0aSI6ImNhYmRhNGJiLTRiNjctNGFjZS1iYzI1LWE5OTAzZDM5NGU1NyJ9.pcYB5euWUc_zf0BKVWPahBU_FA0u250yj89eBJhAIOE --insecure" dir= execID=7ec33
time="2023-11-03T13:54:28Z" level=debug duration=66.557601ms execID=7ec33
time="2023-11-03T13:54:28Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=f1946
time="2023-11-03T13:54:28Z" level=debug duration=2.164342ms execID=f1946
time="2023-11-03T13:54:28Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=7e186
time="2023-11-03T13:54:28Z" level=debug duration=1.678641ms execID=7e186
time="2023-11-03T13:54:28Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=5ce60
time="2023-11-03T13:54:28Z" level=debug duration=1.524748ms execID=5ce60
time="2023-11-03T13:54:28Z" level=info msg="pkill -9 gpg-agent" dir= execID=31fd2
time="2023-11-03T13:54:28Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=cf29c
time="2023-11-03T13:54:28Z" level=debug duration=9.93004ms execID=cf29c
time="2023-11-03T13:54:28Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=384cc
time="2023-11-03T13:54:28Z" level=debug duration=47.258668ms execID=384cc
time="2023-11-03T13:54:28Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=a4e4a
time="2023-11-03T13:54:28Z" level=debug duration=1.904827ms execID=a4e4a
time="2023-11-03T13:54:28Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=2ed53
time="2023-11-03T13:54:28Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.041778ms execID=2ed53
time="2023-11-03T13:54:28Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=61abb
time="2023-11-03T13:54:28Z" level=debug duration=28.398504ms execID=61abb
time="2023-11-03T13:54:28Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=2a3de
time="2023-11-03T13:54:28Z" level=debug duration=21.26462ms execID=2a3de
time="2023-11-03T13:54:28Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=769a5
time="2023-11-03T13:54:28Z" level=debug duration=2.035317ms execID=769a5
time="2023-11-03T13:54:28Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=4bfe4
Handling connection for 9081
time="2023-11-03T13:54:28Z" level=debug duration=82.18182ms execID=4bfe4
time="2023-11-03T13:54:28Z" level=info msg="kubectl create ns argocd-e2e--test-project-deletion-vzrvu" dir= execID=2c508
time="2023-11-03T13:54:28Z" level=debug msg="namespace/argocd-e2e--test-project-deletion-vzrvu created\n" duration=110.874382ms execID=2c508
time="2023-11-03T13:54:28Z" level=info msg="kubectl label ns argocd-e2e--test-project-deletion-vzrvu e2e.argoproj.io=true" dir= execID=da61a
time="2023-11-03T13:54:29Z" level=debug msg="namespace/argocd-e2e--test-project-deletion-vzrvu labeled\n" duration=257.849523ms execID=da61a
time="2023-11-03T13:54:29Z" level=info msg="clean state" duration=2.309433958s id=TestProjectDeletion-vzrvu name=TestProjectDeletion password=password username=admin
time="2023-11-03T13:54:29Z" level=info msg="../../dist/argocd proj delete proj-1699019669 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA2OCwibmJmIjoxNjk5MDE5NjY4LCJpYXQiOjE2OTkwMTk2NjgsImp0aSI6ImNhYmRhNGJiLTRiNjctNGFjZS1iYzI1LWE5OTAzZDM5NGU1NyJ9.pcYB5euWUc_zf0BKVWPahBU_FA0u250yj89eBJhAIOE --insecure" dir= execID=dec25
time="2023-11-03T13:54:29Z" level=debug duration=132.757016ms execID=dec25
time="2023-11-03T13:54:29Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestProjectDeletion (2.49s)
=== RUN   TestSetProject
time="2023-11-03T13:54:29Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=b822a
time="2023-11-03T13:54:29Z" level=debug msg="namespace \"argocd-e2e--test-project-deletion-vzrvu\" deleted\n" duration=196.934216ms execID=b822a
time="2023-11-03T13:54:29Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=2eb66
time="2023-11-03T13:54:30Z" level=debug msg="No resources found\n" duration=538.358882ms execID=2eb66
time="2023-11-03T13:54:30Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=dce98
time="2023-11-03T13:54:30Z" level=debug msg="No resources found\n" duration=162.520446ms execID=dce98
time="2023-11-03T13:54:30Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:54:30Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA3MCwibmJmIjoxNjk5MDE5NjcwLCJpYXQiOjE2OTkwMTk2NzAsImp0aSI6ImRkZTAwZjFhLTQ0MjYtNDYyYi04YTdkLTczM2E4OGEyZjA1YyJ9.65Gik8GWVxQS1_wA5Lr4vckcjJQolhaYZuvLCKhnQVU --insecure" dir= execID=f2623
time="2023-11-03T13:54:31Z" level=debug duration=122.606146ms execID=f2623
time="2023-11-03T13:54:31Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=22ac0
time="2023-11-03T13:54:31Z" level=debug duration=2.11058ms execID=22ac0
time="2023-11-03T13:54:31Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=b4132
time="2023-11-03T13:54:31Z" level=debug duration=1.621129ms execID=b4132
time="2023-11-03T13:54:31Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=a367d
time="2023-11-03T13:54:31Z" level=debug duration=1.634905ms execID=a367d
time="2023-11-03T13:54:31Z" level=info msg="pkill -9 gpg-agent" dir= execID=f6b6f
time="2023-11-03T13:54:31Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=ab84d
time="2023-11-03T13:54:31Z" level=debug duration=10.310423ms execID=ab84d
time="2023-11-03T13:54:31Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=fc0c1
time="2023-11-03T13:54:31Z" level=debug duration=34.621869ms execID=fc0c1
time="2023-11-03T13:54:31Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=5a443
time="2023-11-03T13:54:31Z" level=debug duration=1.895035ms execID=5a443
time="2023-11-03T13:54:31Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=3a906
time="2023-11-03T13:54:31Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=10.477019ms execID=3a906
time="2023-11-03T13:54:31Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=92850
time="2023-11-03T13:54:31Z" level=debug duration=27.806746ms execID=92850
time="2023-11-03T13:54:31Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=0b39a
time="2023-11-03T13:54:31Z" level=debug duration=23.598987ms execID=0b39a
time="2023-11-03T13:54:31Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=3196d
time="2023-11-03T13:54:31Z" level=debug duration=2.957313ms execID=3196d
time="2023-11-03T13:54:31Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=e6106
Handling connection for 9081
time="2023-11-03T13:54:31Z" level=debug duration=82.738612ms execID=e6106
time="2023-11-03T13:54:31Z" level=info msg="kubectl create ns argocd-e2e--test-set-project-yeyxh" dir= execID=c4a32
time="2023-11-03T13:54:31Z" level=debug msg="namespace/argocd-e2e--test-set-project-yeyxh created\n" duration=111.776532ms execID=c4a32
time="2023-11-03T13:54:31Z" level=info msg="kubectl label ns argocd-e2e--test-set-project-yeyxh e2e.argoproj.io=true" dir= execID=17864
time="2023-11-03T13:54:31Z" level=debug msg="namespace/argocd-e2e--test-set-project-yeyxh labeled\n" duration=271.878517ms execID=17864
time="2023-11-03T13:54:31Z" level=info msg="clean state" duration=2.331473819s id=TestSetProject-yeyxh name=TestSetProject password=password username=admin
time="2023-11-03T13:54:31Z" level=info msg="../../dist/argocd proj set proj-1699019671 --description updated description -d https://192.168.99.100:8443,default -d https://192.168.99.100:8443,service --orphaned-resources-warn=false --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA3MCwibmJmIjoxNjk5MDE5NjcwLCJpYXQiOjE2OTkwMTk2NzAsImp0aSI6ImRkZTAwZjFhLTQ0MjYtNDYyYi04YTdkLTczM2E4OGEyZjA1YyJ9.65Gik8GWVxQS1_wA5Lr4vckcjJQolhaYZuvLCKhnQVU --insecure" dir= execID=b3aea
time="2023-11-03T13:54:31Z" level=debug duration=122.328665ms execID=b3aea
time="2023-11-03T13:54:31Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestSetProject (2.50s)
=== RUN   TestAddProjectDestination
time="2023-11-03T13:54:31Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=45f31
time="2023-11-03T13:54:32Z" level=debug msg="namespace \"argocd-e2e--test-set-project-yeyxh\" deleted\n" duration=166.322199ms execID=45f31
time="2023-11-03T13:54:32Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=a1c9a
time="2023-11-03T13:54:32Z" level=debug msg="No resources found\n" duration=457.526708ms execID=a1c9a
time="2023-11-03T13:54:32Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=0fb8e
time="2023-11-03T13:54:32Z" level=debug msg="No resources found\n" duration=169.495893ms execID=0fb8e
time="2023-11-03T13:54:33Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:54:33Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA3MywibmJmIjoxNjk5MDE5NjczLCJpYXQiOjE2OTkwMTk2NzMsImp0aSI6IjNhMzQ1M2U3LWQ2NWQtNDU5NC1iNmUyLWE0YTU1Yjg3ODNiMyJ9.o1PdXguNfcO55CIYOAyRyndNQZHm-lROyc4sg1Ft-BU --insecure" dir= execID=81365
time="2023-11-03T13:54:33Z" level=debug duration=81.008007ms execID=81365
time="2023-11-03T13:54:33Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=bc8da
time="2023-11-03T13:54:33Z" level=debug duration=2.140054ms execID=bc8da
time="2023-11-03T13:54:33Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=3a0bd
time="2023-11-03T13:54:33Z" level=debug duration=1.559159ms execID=3a0bd
time="2023-11-03T13:54:33Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=eab4f
time="2023-11-03T13:54:33Z" level=debug duration=1.538767ms execID=eab4f
time="2023-11-03T13:54:33Z" level=info msg="pkill -9 gpg-agent" dir= execID=41b7c
time="2023-11-03T13:54:33Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=e374d
time="2023-11-03T13:54:33Z" level=debug duration=10.08483ms execID=e374d
time="2023-11-03T13:54:33Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=c04ef
time="2023-11-03T13:54:33Z" level=debug duration=32.432496ms execID=c04ef
time="2023-11-03T13:54:33Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=01f7c
time="2023-11-03T13:54:33Z" level=debug duration=1.524344ms execID=01f7c
time="2023-11-03T13:54:33Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=a8fc1
time="2023-11-03T13:54:33Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=10.866878ms execID=a8fc1
time="2023-11-03T13:54:33Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=df9c7
time="2023-11-03T13:54:33Z" level=debug duration=26.276913ms execID=df9c7
time="2023-11-03T13:54:33Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=894c6
time="2023-11-03T13:54:33Z" level=debug duration=21.827061ms execID=894c6
time="2023-11-03T13:54:33Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=ac463
time="2023-11-03T13:54:33Z" level=debug duration=2.167599ms execID=ac463
time="2023-11-03T13:54:33Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=45136
Handling connection for 9081
time="2023-11-03T13:54:33Z" level=debug duration=83.614679ms execID=45136
time="2023-11-03T13:54:33Z" level=info msg="kubectl create ns argocd-e2e--test-add-project-destination-mbvaz" dir= execID=acbb7
time="2023-11-03T13:54:33Z" level=debug msg="namespace/argocd-e2e--test-add-project-destination-mbvaz created\n" duration=108.197116ms execID=acbb7
time="2023-11-03T13:54:33Z" level=info msg="kubectl label ns argocd-e2e--test-add-project-destination-mbvaz e2e.argoproj.io=true" dir= execID=d0131
time="2023-11-03T13:54:34Z" level=debug msg="namespace/argocd-e2e--test-add-project-destination-mbvaz labeled\n" duration=286.816401ms execID=d0131
time="2023-11-03T13:54:34Z" level=info msg="clean state" duration=2.237890724s id=TestAddProjectDestination-mbvaz name=TestAddProjectDestination password=password username=admin
time="2023-11-03T13:54:34Z" level=info msg="../../dist/argocd proj add-destination proj-1699019674 https://192.168.99.100:8443 test1 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA3MywibmJmIjoxNjk5MDE5NjczLCJpYXQiOjE2OTkwMTk2NzMsImp0aSI6IjNhMzQ1M2U3LWQ2NWQtNDU5NC1iNmUyLWE0YTU1Yjg3ODNiMyJ9.o1PdXguNfcO55CIYOAyRyndNQZHm-lROyc4sg1Ft-BU --insecure" dir= execID=fabff
time="2023-11-03T13:54:34Z" level=debug duration=155.079626ms execID=fabff
time="2023-11-03T13:54:34Z" level=info msg="../../dist/argocd proj add-destination proj-1699019674 https://192.168.99.100:8443 test1 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA3MywibmJmIjoxNjk5MDE5NjczLCJpYXQiOjE2OTkwMTk2NzMsImp0aSI6IjNhMzQ1M2U3LWQ2NWQtNDU5NC1iNmUyLWE0YTU1Yjg3ODNiMyJ9.o1PdXguNfcO55CIYOAyRyndNQZHm-lROyc4sg1Ft-BU --insecure" dir= execID=67f54
time="2023-11-03T13:54:34Z" level=debug duration=131.101867ms execID=67f54
time="2023-11-03T13:54:34Z" level=error msg="`../../dist/argocd proj add-destination proj-1699019674 https://192.168.99.100:8443 test1 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA3MywibmJmIjoxNjk5MDE5NjczLCJpYXQiOjE2OTkwMTk2NzMsImp0aSI6IjNhMzQ1M2U3LWQ2NWQtNDU5NC1iNmUyLWE0YTU1Yjg3ODNiMyJ9.o1PdXguNfcO55CIYOAyRyndNQZHm-lROyc4sg1Ft-BU --insecure` failed exit status 1: time=\"2023-11-03T13:54:34Z\" level=fatal msg=\"Specified destination is already defined in project\"" execID=67f54
time="2023-11-03T13:54:34Z" level=info msg="../../dist/argocd proj add-destination proj-1699019674 !* test1 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA3MywibmJmIjoxNjk5MDE5NjczLCJpYXQiOjE2OTkwMTk2NzMsImp0aSI6IjNhMzQ1M2U3LWQ2NWQtNDU5NC1iNmUyLWE0YTU1Yjg3ODNiMyJ9.o1PdXguNfcO55CIYOAyRyndNQZHm-lROyc4sg1Ft-BU --insecure" dir= execID=862ff
time="2023-11-03T13:54:34Z" level=debug duration=169.62011ms execID=862ff
time="2023-11-03T13:54:34Z" level=error msg="`../../dist/argocd proj add-destination proj-1699019674 !* test1 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA3MywibmJmIjoxNjk5MDE5NjczLCJpYXQiOjE2OTkwMTk2NzMsImp0aSI6IjNhMzQ1M2U3LWQ2NWQtNDU5NC1iNmUyLWE0YTU1Yjg3ODNiMyJ9.o1PdXguNfcO55CIYOAyRyndNQZHm-lROyc4sg1Ft-BU --insecure` failed exit status 20: time=\"2023-11-03T13:54:34Z\" level=fatal msg=\"rpc error: code = InvalidArgument desc = server has an invalid format, '!*'\"" execID=862ff
time="2023-11-03T13:54:34Z" level=info msg="../../dist/argocd proj add-destination proj-1699019674 https://192.168.99.100:8443 !* --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA3MywibmJmIjoxNjk5MDE5NjczLCJpYXQiOjE2OTkwMTk2NzMsImp0aSI6IjNhMzQ1M2U3LWQ2NWQtNDU5NC1iNmUyLWE0YTU1Yjg3ODNiMyJ9.o1PdXguNfcO55CIYOAyRyndNQZHm-lROyc4sg1Ft-BU --insecure" dir= execID=ca9d2
time="2023-11-03T13:54:34Z" level=debug duration=146.091545ms execID=ca9d2
time="2023-11-03T13:54:34Z" level=error msg="`../../dist/argocd proj add-destination proj-1699019674 https://192.168.99.100:8443 !* --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA3MywibmJmIjoxNjk5MDE5NjczLCJpYXQiOjE2OTkwMTk2NzMsImp0aSI6IjNhMzQ1M2U3LWQ2NWQtNDU5NC1iNmUyLWE0YTU1Yjg3ODNiMyJ9.o1PdXguNfcO55CIYOAyRyndNQZHm-lROyc4sg1Ft-BU --insecure` failed exit status 20: time=\"2023-11-03T13:54:34Z\" level=fatal msg=\"rpc error: code = InvalidArgument desc = namespace has an invalid format, '!*'\"" execID=ca9d2
time="2023-11-03T13:54:34Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestAddProjectDestination (2.92s)
=== RUN   TestAddProjectDestinationWithName
time="2023-11-03T13:54:34Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=5a3cf
time="2023-11-03T13:54:35Z" level=debug msg="namespace \"argocd-e2e--test-add-project-destination-mbvaz\" deleted\n" duration=230.992743ms execID=5a3cf
time="2023-11-03T13:54:35Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=63534
time="2023-11-03T13:54:35Z" level=debug msg="No resources found\n" duration=485.018497ms execID=63534
time="2023-11-03T13:54:35Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=58d36
time="2023-11-03T13:54:35Z" level=debug msg="No resources found\n" duration=311.271438ms execID=58d36
time="2023-11-03T13:54:36Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:54:36Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA3NiwibmJmIjoxNjk5MDE5Njc2LCJpYXQiOjE2OTkwMTk2NzYsImp0aSI6ImQyODM0ZDFiLTc2ODAtNDI0Yi04YThhLWQzOWI5OTUzMjU2MCJ9.r6QFNzazufBY-IdQDrZ2At_v2nESdL9L549F4TpWwhk --insecure" dir= execID=8bcc9
time="2023-11-03T13:54:36Z" level=debug duration=76.380649ms execID=8bcc9
time="2023-11-03T13:54:36Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=55b8d
time="2023-11-03T13:54:36Z" level=debug duration=2.035648ms execID=55b8d
time="2023-11-03T13:54:36Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=8e5b1
time="2023-11-03T13:54:36Z" level=debug duration=1.530864ms execID=8e5b1
time="2023-11-03T13:54:36Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=b91a4
time="2023-11-03T13:54:36Z" level=debug duration=1.650525ms execID=b91a4
time="2023-11-03T13:54:36Z" level=info msg="pkill -9 gpg-agent" dir= execID=751e6
time="2023-11-03T13:54:36Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=58e48
time="2023-11-03T13:54:36Z" level=debug duration=10.149839ms execID=58e48
time="2023-11-03T13:54:36Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=366f5
time="2023-11-03T13:54:36Z" level=debug duration=40.446782ms execID=366f5
time="2023-11-03T13:54:36Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=0a55f
time="2023-11-03T13:54:36Z" level=debug duration=1.982182ms execID=0a55f
time="2023-11-03T13:54:36Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=42fa1
time="2023-11-03T13:54:36Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.246661ms execID=42fa1
time="2023-11-03T13:54:36Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=a93e5
time="2023-11-03T13:54:36Z" level=debug duration=27.96525ms execID=a93e5
time="2023-11-03T13:54:36Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=0cee2
time="2023-11-03T13:54:36Z" level=debug duration=21.146672ms execID=0cee2
time="2023-11-03T13:54:36Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=f97eb
time="2023-11-03T13:54:36Z" level=debug duration=2.420935ms execID=f97eb
time="2023-11-03T13:54:36Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=0893f
Handling connection for 9081
time="2023-11-03T13:54:37Z" level=debug duration=85.418181ms execID=0893f
time="2023-11-03T13:54:37Z" level=info msg="kubectl create ns argocd-e2e--test-add-project-destination-with-name-kqmdj" dir= execID=f0faf
time="2023-11-03T13:54:37Z" level=debug msg="namespace/argocd-e2e--test-add-project-destination-with-name-kqmdj created\n" duration=161.513362ms execID=f0faf
time="2023-11-03T13:54:37Z" level=info msg="kubectl label ns argocd-e2e--test-add-project-destination-with-name-kqmdj e2e.argoproj.io=true" dir= execID=d54fe
time="2023-11-03T13:54:37Z" level=debug msg="namespace/argocd-e2e--test-add-project-destination-with-name-kqmdj labeled\n" duration=281.381809ms execID=d54fe
time="2023-11-03T13:54:37Z" level=info msg="clean state" duration=2.781996933s id=TestAddProjectDestinationWithName-kqmdj name=TestAddProjectDestinationWithName password=password username=admin
time="2023-11-03T13:54:37Z" level=info msg="../../dist/argocd proj add-destination proj-1699019677 in-cluster test1 --name --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA3NiwibmJmIjoxNjk5MDE5Njc2LCJpYXQiOjE2OTkwMTk2NzYsImp0aSI6ImQyODM0ZDFiLTc2ODAtNDI0Yi04YThhLWQzOWI5OTUzMjU2MCJ9.r6QFNzazufBY-IdQDrZ2At_v2nESdL9L549F4TpWwhk --insecure" dir= execID=f3571
time="2023-11-03T13:54:37Z" level=debug duration=137.52729ms execID=f3571
time="2023-11-03T13:54:37Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestAddProjectDestinationWithName (2.96s)
=== RUN   TestRemoveProjectDestination
time="2023-11-03T13:54:37Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=12a9a
time="2023-11-03T13:54:38Z" level=debug msg="namespace \"argocd-e2e--test-add-project-destination-with-name-kqmdj\" deleted\n" duration=369.123713ms execID=12a9a
time="2023-11-03T13:54:38Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=851c9
time="2023-11-03T13:54:38Z" level=debug msg="No resources found\n" duration=376.15561ms execID=851c9
time="2023-11-03T13:54:38Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=e39e6
time="2023-11-03T13:54:38Z" level=debug msg="No resources found\n" duration=223.591961ms execID=e39e6
time="2023-11-03T13:54:39Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:54:39Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA3OSwibmJmIjoxNjk5MDE5Njc5LCJpYXQiOjE2OTkwMTk2NzksImp0aSI6IjBlMzJiZTBjLTg4NjYtNGE2Mi1iMzk5LWY5YjdiNzkyMmY3YiJ9.5TEF89PhO-udz-Z8eyisxvkVVJE8ulrR_P3EJusKxvw --insecure" dir= execID=c4766
time="2023-11-03T13:54:39Z" level=debug duration=83.048367ms execID=c4766
time="2023-11-03T13:54:39Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=5c6e3
time="2023-11-03T13:54:39Z" level=debug duration=2.156663ms execID=5c6e3
time="2023-11-03T13:54:39Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=235b0
time="2023-11-03T13:54:39Z" level=debug duration=1.717535ms execID=235b0
time="2023-11-03T13:54:39Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=c87ad
time="2023-11-03T13:54:39Z" level=debug duration=1.527455ms execID=c87ad
time="2023-11-03T13:54:39Z" level=info msg="pkill -9 gpg-agent" dir= execID=a2986
time="2023-11-03T13:54:39Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=7bbee
time="2023-11-03T13:54:39Z" level=debug duration=11.114592ms execID=7bbee
time="2023-11-03T13:54:39Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=dcd25
time="2023-11-03T13:54:39Z" level=debug duration=37.466068ms execID=dcd25
time="2023-11-03T13:54:39Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=e920a
time="2023-11-03T13:54:39Z" level=debug duration=2.04167ms execID=e920a
time="2023-11-03T13:54:39Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=1bb5e
time="2023-11-03T13:54:39Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.939501ms execID=1bb5e
time="2023-11-03T13:54:39Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=2d0ba
time="2023-11-03T13:54:39Z" level=debug duration=34.344046ms execID=2d0ba
time="2023-11-03T13:54:39Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=dc088
time="2023-11-03T13:54:39Z" level=debug duration=23.288906ms execID=dc088
time="2023-11-03T13:54:39Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=04faf
time="2023-11-03T13:54:39Z" level=debug duration=2.774794ms execID=04faf
time="2023-11-03T13:54:39Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=bd1b6
Handling connection for 9081
time="2023-11-03T13:54:40Z" level=debug duration=62.205365ms execID=bd1b6
time="2023-11-03T13:54:40Z" level=info msg="kubectl create ns argocd-e2e--test-remove-project-destination-rfewy" dir= execID=fcdf3
time="2023-11-03T13:54:40Z" level=debug msg="namespace/argocd-e2e--test-remove-project-destination-rfewy created\n" duration=163.76983ms execID=fcdf3
time="2023-11-03T13:54:40Z" level=info msg="kubectl label ns argocd-e2e--test-remove-project-destination-rfewy e2e.argoproj.io=true" dir= execID=cf70c
time="2023-11-03T13:54:40Z" level=debug msg="namespace/argocd-e2e--test-remove-project-destination-rfewy labeled\n" duration=268.372749ms execID=cf70c
time="2023-11-03T13:54:40Z" level=info msg="clean state" duration=2.746330488s id=TestRemoveProjectDestination-rfewy name=TestRemoveProjectDestination password=password username=admin
time="2023-11-03T13:54:40Z" level=info msg="../../dist/argocd proj remove-destination proj-1699019680 https://192.168.99.100:8443 test --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA3OSwibmJmIjoxNjk5MDE5Njc5LCJpYXQiOjE2OTkwMTk2NzksImp0aSI6IjBlMzJiZTBjLTg4NjYtNGE2Mi1iMzk5LWY5YjdiNzkyMmY3YiJ9.5TEF89PhO-udz-Z8eyisxvkVVJE8ulrR_P3EJusKxvw --insecure" dir= execID=f3621
time="2023-11-03T13:54:40Z" level=debug duration=167.381842ms execID=f3621
time="2023-11-03T13:54:40Z" level=info msg="../../dist/argocd proj remove-destination proj-1699019680 https://192.168.99.100:8443 test1 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA3OSwibmJmIjoxNjk5MDE5Njc5LCJpYXQiOjE2OTkwMTk2NzksImp0aSI6IjBlMzJiZTBjLTg4NjYtNGE2Mi1iMzk5LWY5YjdiNzkyMmY3YiJ9.5TEF89PhO-udz-Z8eyisxvkVVJE8ulrR_P3EJusKxvw --insecure" dir= execID=19ab5
time="2023-11-03T13:54:40Z" level=debug duration=114.317552ms execID=19ab5
time="2023-11-03T13:54:40Z" level=error msg="`../../dist/argocd proj remove-destination proj-1699019680 https://192.168.99.100:8443 test1 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA3OSwibmJmIjoxNjk5MDE5Njc5LCJpYXQiOjE2OTkwMTk2NzksImp0aSI6IjBlMzJiZTBjLTg4NjYtNGE2Mi1iMzk5LWY5YjdiNzkyMmY3YiJ9.5TEF89PhO-udz-Z8eyisxvkVVJE8ulrR_P3EJusKxvw --insecure` failed exit status 1: time=\"2023-11-03T13:54:40Z\" level=fatal msg=\"Specified destination does not exist in project\"" execID=19ab5
time="2023-11-03T13:54:40Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestRemoveProjectDestination (3.07s)
=== RUN   TestAddProjectSource
time="2023-11-03T13:54:40Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=71122
time="2023-11-03T13:54:41Z" level=debug msg="namespace \"argocd-e2e--test-remove-project-destination-rfewy\" deleted\n" duration=245.620014ms execID=71122
time="2023-11-03T13:54:41Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=bb066
time="2023-11-03T13:54:41Z" level=debug msg="No resources found\n" duration=508.129541ms execID=bb066
time="2023-11-03T13:54:41Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=df7cf
time="2023-11-03T13:54:41Z" level=debug msg="No resources found\n" duration=251.871378ms execID=df7cf
time="2023-11-03T13:54:42Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:54:42Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA4MiwibmJmIjoxNjk5MDE5NjgyLCJpYXQiOjE2OTkwMTk2ODIsImp0aSI6IjJlNWI4NjBmLWI0MjItNDI1Ny05NGVhLTdiMjk2NGI0OWNlZSJ9.A0IwBse7Xs3bss6hS8WSP6EzKBDwyYbhIjuOtkdAaHQ --insecure" dir= execID=cb2cb
time="2023-11-03T13:54:42Z" level=debug duration=66.083483ms execID=cb2cb
time="2023-11-03T13:54:42Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=86664
time="2023-11-03T13:54:42Z" level=debug duration=2.059532ms execID=86664
time="2023-11-03T13:54:42Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=9fb51
time="2023-11-03T13:54:42Z" level=debug duration=1.611889ms execID=9fb51
time="2023-11-03T13:54:42Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=b1334
time="2023-11-03T13:54:42Z" level=debug duration=1.576113ms execID=b1334
time="2023-11-03T13:54:42Z" level=info msg="pkill -9 gpg-agent" dir= execID=e3be0
time="2023-11-03T13:54:42Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=94be9
time="2023-11-03T13:54:42Z" level=debug duration=9.734634ms execID=94be9
time="2023-11-03T13:54:42Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=36275
time="2023-11-03T13:54:42Z" level=debug duration=42.42245ms execID=36275
time="2023-11-03T13:54:42Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=d0920
time="2023-11-03T13:54:42Z" level=debug duration=1.857694ms execID=d0920
time="2023-11-03T13:54:42Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=7d227
time="2023-11-03T13:54:42Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.243084ms execID=7d227
time="2023-11-03T13:54:42Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=74418
time="2023-11-03T13:54:42Z" level=debug duration=26.188529ms execID=74418
time="2023-11-03T13:54:42Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=0f8a0
time="2023-11-03T13:54:42Z" level=debug duration=22.731177ms execID=0f8a0
time="2023-11-03T13:54:42Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=eec85
time="2023-11-03T13:54:42Z" level=debug duration=2.103347ms execID=eec85
time="2023-11-03T13:54:42Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=a4756
Handling connection for 9081
time="2023-11-03T13:54:43Z" level=debug duration=86.777139ms execID=a4756
time="2023-11-03T13:54:43Z" level=info msg="kubectl create ns argocd-e2e--test-add-project-source-hsajz" dir= execID=80298
time="2023-11-03T13:54:43Z" level=debug msg="namespace/argocd-e2e--test-add-project-source-hsajz created\n" duration=180.369235ms execID=80298
time="2023-11-03T13:54:43Z" level=info msg="kubectl label ns argocd-e2e--test-add-project-source-hsajz e2e.argoproj.io=true" dir= execID=ba4d9
time="2023-11-03T13:54:43Z" level=debug msg="namespace/argocd-e2e--test-add-project-source-hsajz labeled\n" duration=294.68289ms execID=ba4d9
time="2023-11-03T13:54:43Z" level=info msg="clean state" duration=2.770669077s id=TestAddProjectSource-hsajz name=TestAddProjectSource password=password username=admin
time="2023-11-03T13:54:43Z" level=info msg="../../dist/argocd proj add-source proj-1699019683 https://github.com/argoproj/argo-cd.git --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA4MiwibmJmIjoxNjk5MDE5NjgyLCJpYXQiOjE2OTkwMTk2ODIsImp0aSI6IjJlNWI4NjBmLWI0MjItNDI1Ny05NGVhLTdiMjk2NGI0OWNlZSJ9.A0IwBse7Xs3bss6hS8WSP6EzKBDwyYbhIjuOtkdAaHQ --insecure" dir= execID=2817a
time="2023-11-03T13:54:43Z" level=debug duration=141.103109ms execID=2817a
time="2023-11-03T13:54:43Z" level=info msg="../../dist/argocd proj add-source proj-1699019683 https://github.com/argoproj/argo-cd.git --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA4MiwibmJmIjoxNjk5MDE5NjgyLCJpYXQiOjE2OTkwMTk2ODIsImp0aSI6IjJlNWI4NjBmLWI0MjItNDI1Ny05NGVhLTdiMjk2NGI0OWNlZSJ9.A0IwBse7Xs3bss6hS8WSP6EzKBDwyYbhIjuOtkdAaHQ --insecure" dir= execID=b159a
time="2023-11-03T13:54:43Z" level=debug msg="Source repository 'https://github.com/argoproj/argo-cd.git' already allowed in project\n" duration=131.292402ms execID=b159a
time="2023-11-03T13:54:43Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestAddProjectSource (3.06s)
=== RUN   TestRemoveProjectSource
time="2023-11-03T13:54:43Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=6d872
time="2023-11-03T13:54:44Z" level=debug msg="namespace \"argocd-e2e--test-add-project-source-hsajz\" deleted\n" duration=257.099611ms execID=6d872
time="2023-11-03T13:54:44Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=f4f6a
time="2023-11-03T13:54:44Z" level=debug msg="No resources found\n" duration=542.567118ms execID=f4f6a
time="2023-11-03T13:54:44Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=724cc
time="2023-11-03T13:54:44Z" level=debug msg="No resources found\n" duration=271.765186ms execID=724cc
time="2023-11-03T13:54:45Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:54:45Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA4NSwibmJmIjoxNjk5MDE5Njg1LCJpYXQiOjE2OTkwMTk2ODUsImp0aSI6IjA1YjJmNzViLWRjMmQtNDRmZi04MmM0LTE0MzEzODcxYTFmNCJ9.whNNy71veJbw1FlBu3V4P2vgTXHUhqP5S2h2TGUUZvU --insecure" dir= execID=07f18
time="2023-11-03T13:54:45Z" level=debug duration=65.70231ms execID=07f18
time="2023-11-03T13:54:45Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=4af07
time="2023-11-03T13:54:45Z" level=debug duration=2.01236ms execID=4af07
time="2023-11-03T13:54:45Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=74b7e
time="2023-11-03T13:54:45Z" level=debug duration=1.910483ms execID=74b7e
time="2023-11-03T13:54:45Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=fb928
time="2023-11-03T13:54:45Z" level=debug duration=1.58459ms execID=fb928
time="2023-11-03T13:54:45Z" level=info msg="pkill -9 gpg-agent" dir= execID=0889d
time="2023-11-03T13:54:45Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=cf753
time="2023-11-03T13:54:45Z" level=debug duration=9.983938ms execID=cf753
time="2023-11-03T13:54:45Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=f04ab
time="2023-11-03T13:54:46Z" level=debug duration=31.712579ms execID=f04ab
time="2023-11-03T13:54:46Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=35bea
time="2023-11-03T13:54:46Z" level=debug duration=1.779959ms execID=35bea
time="2023-11-03T13:54:46Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=e87c7
time="2023-11-03T13:54:46Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.963861ms execID=e87c7
time="2023-11-03T13:54:46Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=bd74a
time="2023-11-03T13:54:46Z" level=debug duration=26.699382ms execID=bd74a
time="2023-11-03T13:54:46Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=e1d54
time="2023-11-03T13:54:46Z" level=debug duration=22.486814ms execID=e1d54
time="2023-11-03T13:54:46Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=0ddee
time="2023-11-03T13:54:46Z" level=debug duration=2.789046ms execID=0ddee
time="2023-11-03T13:54:46Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=be162
Handling connection for 9081
time="2023-11-03T13:54:46Z" level=debug duration=80.816964ms execID=be162
time="2023-11-03T13:54:46Z" level=info msg="kubectl create ns argocd-e2e--test-remove-project-source-nahem" dir= execID=74987
time="2023-11-03T13:54:46Z" level=debug msg="namespace/argocd-e2e--test-remove-project-source-nahem created\n" duration=120.214481ms execID=74987
time="2023-11-03T13:54:46Z" level=info msg="kubectl label ns argocd-e2e--test-remove-project-source-nahem e2e.argoproj.io=true" dir= execID=d582a
time="2023-11-03T13:54:46Z" level=debug msg="namespace/argocd-e2e--test-remove-project-source-nahem labeled\n" duration=344.79955ms execID=d582a
time="2023-11-03T13:54:46Z" level=info msg="clean state" duration=2.795367037s id=TestRemoveProjectSource-nahem name=TestRemoveProjectSource password=password username=admin
time="2023-11-03T13:54:46Z" level=info msg="../../dist/argocd proj remove-source proj-1699019686 https://github.com/argoproj/argo-cd.git --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA4NSwibmJmIjoxNjk5MDE5Njg1LCJpYXQiOjE2OTkwMTk2ODUsImp0aSI6IjA1YjJmNzViLWRjMmQtNDRmZi04MmM0LTE0MzEzODcxYTFmNCJ9.whNNy71veJbw1FlBu3V4P2vgTXHUhqP5S2h2TGUUZvU --insecure" dir= execID=cab08
time="2023-11-03T13:54:46Z" level=debug duration=160.576999ms execID=cab08
time="2023-11-03T13:54:46Z" level=info msg="../../dist/argocd proj remove-source proj-1699019686 https://github.com/argoproj/argo-cd.git --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA4NSwibmJmIjoxNjk5MDE5Njg1LCJpYXQiOjE2OTkwMTk2ODUsImp0aSI6IjA1YjJmNzViLWRjMmQtNDRmZi04MmM0LTE0MzEzODcxYTFmNCJ9.whNNy71veJbw1FlBu3V4P2vgTXHUhqP5S2h2TGUUZvU --insecure" dir= execID=0d48f
time="2023-11-03T13:54:46Z" level=debug msg="Source repository 'https://github.com/argoproj/argo-cd.git' does not exist in project\n" duration=150.152455ms execID=0d48f
time="2023-11-03T13:54:46Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestRemoveProjectSource (3.16s)
=== RUN   TestUseJWTToken
time="2023-11-03T13:54:47Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=84523
time="2023-11-03T13:54:47Z" level=debug msg="namespace \"argocd-e2e--test-remove-project-source-nahem\" deleted\n" duration=294.671976ms execID=84523
time="2023-11-03T13:54:47Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=8fadf
time="2023-11-03T13:54:47Z" level=debug msg="No resources found\n" duration=444.233571ms execID=8fadf
time="2023-11-03T13:54:47Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=338ee
time="2023-11-03T13:54:48Z" level=debug msg="No resources found\n" duration=258.017343ms execID=338ee
time="2023-11-03T13:54:48Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:54:48Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA4OCwibmJmIjoxNjk5MDE5Njg4LCJpYXQiOjE2OTkwMTk2ODgsImp0aSI6IjEyZGM5NmU5LTMyNjAtNDJmYy1hNjY0LTUxZjZjY2IzY2YxNiJ9.ZtmiUszl6zAR6ncfHPUI2yTUWVY5J64VjYqXbxKqU5Q --insecure" dir= execID=83280
time="2023-11-03T13:54:49Z" level=debug duration=100.347857ms execID=83280
time="2023-11-03T13:54:49Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=1b057
time="2023-11-03T13:54:49Z" level=debug duration=2.160418ms execID=1b057
time="2023-11-03T13:54:49Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=d43bd
time="2023-11-03T13:54:49Z" level=debug duration=1.772625ms execID=d43bd
time="2023-11-03T13:54:49Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=d85cf
time="2023-11-03T13:54:49Z" level=debug duration=1.756481ms execID=d85cf
time="2023-11-03T13:54:49Z" level=info msg="pkill -9 gpg-agent" dir= execID=a5b6b
time="2023-11-03T13:54:49Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=c1d1d
time="2023-11-03T13:54:49Z" level=debug duration=62.769797ms execID=c1d1d
time="2023-11-03T13:54:49Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=1bfc4
time="2023-11-03T13:54:49Z" level=debug duration=40.278439ms execID=1bfc4
time="2023-11-03T13:54:49Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=aeba3
time="2023-11-03T13:54:49Z" level=debug duration=2.016095ms execID=aeba3
time="2023-11-03T13:54:49Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=59ef0
time="2023-11-03T13:54:49Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.956067ms execID=59ef0
time="2023-11-03T13:54:49Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=f8fd6
time="2023-11-03T13:54:49Z" level=debug duration=26.117339ms execID=f8fd6
time="2023-11-03T13:54:49Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=b8208
time="2023-11-03T13:54:49Z" level=debug duration=24.267175ms execID=b8208
time="2023-11-03T13:54:49Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=e2d71
time="2023-11-03T13:54:49Z" level=debug duration=2.484013ms execID=e2d71
time="2023-11-03T13:54:49Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=8bc87
Handling connection for 9081
time="2023-11-03T13:54:49Z" level=debug duration=64.510682ms execID=8bc87
time="2023-11-03T13:54:49Z" level=info msg="kubectl create ns argocd-e2e--test-use-jwt-token-fcnbd" dir= execID=4907b
time="2023-11-03T13:54:49Z" level=debug msg="namespace/argocd-e2e--test-use-jwt-token-fcnbd created\n" duration=163.764345ms execID=4907b
time="2023-11-03T13:54:49Z" level=info msg="kubectl label ns argocd-e2e--test-use-jwt-token-fcnbd e2e.argoproj.io=true" dir= execID=0e820
time="2023-11-03T13:54:49Z" level=debug msg="namespace/argocd-e2e--test-use-jwt-token-fcnbd labeled\n" duration=265.938744ms execID=0e820
time="2023-11-03T13:54:49Z" level=info msg="clean state" duration=2.738210907s id=TestUseJWTToken-fcnbd name=TestUseJWTToken password=password username=admin
time="2023-11-03T13:54:49Z" level=info msg="../../dist/argocd proj role create proj-1699019689 roleTest --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA4OCwibmJmIjoxNjk5MDE5Njg4LCJpYXQiOjE2OTkwMTk2ODgsImp0aSI6IjEyZGM5NmU5LTMyNjAtNDJmYy1hNjY0LTUxZjZjY2IzY2YxNiJ9.ZtmiUszl6zAR6ncfHPUI2yTUWVY5J64VjYqXbxKqU5Q --insecure" dir= execID=aa4ff
time="2023-11-03T13:54:49Z" level=debug msg="Role 'roleTest' created\n" duration=151.964442ms execID=aa4ff
time="2023-11-03T13:54:49Z" level=info msg="../../dist/argocd proj role get proj-1699019689 roleTest --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA4OCwibmJmIjoxNjk5MDE5Njg4LCJpYXQiOjE2OTkwMTk2ODgsImp0aSI6IjEyZGM5NmU5LTMyNjAtNDJmYy1hNjY0LTUxZjZjY2IzY2YxNiJ9.ZtmiUszl6zAR6ncfHPUI2yTUWVY5J64VjYqXbxKqU5Q --insecure" dir= execID=a0e7e
time="2023-11-03T13:54:49Z" level=debug msg="Role Name:     roleTest\nDescription:   \nPolicies:\np, proj:proj-1699019689:roleTest, projects, get, proj-1699019689, allow\nJWT Tokens:\nID  ISSUED-AT  EXPIRES-AT\n" duration=69.599484ms execID=a0e7e
time="2023-11-03T13:54:49Z" level=info msg="../../dist/argocd proj role create-token proj-1699019689 roleTest --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA4OCwibmJmIjoxNjk5MDE5Njg4LCJpYXQiOjE2OTkwMTk2ODgsImp0aSI6IjEyZGM5NmU5LTMyNjAtNDJmYy1hNjY0LTUxZjZjY2IzY2YxNiJ9.ZtmiUszl6zAR6ncfHPUI2yTUWVY5J64VjYqXbxKqU5Q --insecure" dir= execID=cbbca
time="2023-11-03T13:54:50Z" level=debug msg="Create token succeeded for proj:proj-1699019689:roleTest.\n  ID: ab06b69e-71f9-4f67-8407-161c41458efd\n  Issued At: 2023-11-03T13:54:50Z\n  Expires At: Never\n  Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJwcm9qOnByb2otMTY5OTAxOTY4OTpyb2xlVGVzdCIsIm5iZiI6MTY5OTAxOTY5MCwiaWF0IjoxNjk5MDE5NjkwLCJqdGkiOiJhYjA2YjY5ZS03MWY5LTRmNjctODQwNy0xNjFjNDE0NThlZmQifQ.dsih27iVLAy3lQfUlR1WkwGXs_-gFyAMyt8fvjfsnNs\n" duration=132.27316ms execID=cbbca
time="2023-11-03T13:54:50Z" level=info msg="../../dist/argocd proj role add-policy proj-1699019689 roleTest -a get -o * -p allow --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA4OCwibmJmIjoxNjk5MDE5Njg4LCJpYXQiOjE2OTkwMTk2ODgsImp0aSI6IjEyZGM5NmU5LTMyNjAtNDJmYy1hNjY0LTUxZjZjY2IzY2YxNiJ9.ZtmiUszl6zAR6ncfHPUI2yTUWVY5J64VjYqXbxKqU5Q --insecure" dir= execID=b39b5
time="2023-11-03T13:54:50Z" level=debug duration=174.411381ms execID=b39b5
time="2023-11-03T13:54:50Z" level=info msg="../../dist/argocd proj role add-policy proj-1699019689 roleTest -a update -o * -p allow --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA4OCwibmJmIjoxNjk5MDE5Njg4LCJpYXQiOjE2OTkwMTk2ODgsImp0aSI6IjEyZGM5NmU5LTMyNjAtNDJmYy1hNjY0LTUxZjZjY2IzY2YxNiJ9.ZtmiUszl6zAR6ncfHPUI2yTUWVY5J64VjYqXbxKqU5Q --insecure" dir= execID=23f1b
time="2023-11-03T13:54:50Z" level=debug duration=112.801568ms execID=23f1b
time="2023-11-03T13:54:50Z" level=info msg="../../dist/argocd proj role add-policy proj-1699019689 roleTest -a sync -o * -p allow --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA4OCwibmJmIjoxNjk5MDE5Njg4LCJpYXQiOjE2OTkwMTk2ODgsImp0aSI6IjEyZGM5NmU5LTMyNjAtNDJmYy1hNjY0LTUxZjZjY2IzY2YxNiJ9.ZtmiUszl6zAR6ncfHPUI2yTUWVY5J64VjYqXbxKqU5Q --insecure" dir= execID=01ad4
time="2023-11-03T13:54:50Z" level=debug duration=141.262827ms execID=01ad4
time="2023-11-03T13:54:50Z" level=info msg="../../dist/argocd proj role add-policy proj-1699019689 roleTest -a create -o * -p allow --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA4OCwibmJmIjoxNjk5MDE5Njg4LCJpYXQiOjE2OTkwMTk2ODgsImp0aSI6IjEyZGM5NmU5LTMyNjAtNDJmYy1hNjY0LTUxZjZjY2IzY2YxNiJ9.ZtmiUszl6zAR6ncfHPUI2yTUWVY5J64VjYqXbxKqU5Q --insecure" dir= execID=e8f2b
time="2023-11-03T13:54:50Z" level=debug duration=150.416833ms execID=e8f2b
time="2023-11-03T13:54:50Z" level=info msg="../../dist/argocd proj role add-policy proj-1699019689 roleTest -a override -o * -p allow --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA4OCwibmJmIjoxNjk5MDE5Njg4LCJpYXQiOjE2OTkwMTk2ODgsImp0aSI6IjEyZGM5NmU5LTMyNjAtNDJmYy1hNjY0LTUxZjZjY2IzY2YxNiJ9.ZtmiUszl6zAR6ncfHPUI2yTUWVY5J64VjYqXbxKqU5Q --insecure" dir= execID=57d20
time="2023-11-03T13:54:50Z" level=debug duration=149.799319ms execID=57d20
time="2023-11-03T13:54:50Z" level=info msg="../../dist/argocd proj role add-policy proj-1699019689 roleTest -a * -o * -p allow --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA4OCwibmJmIjoxNjk5MDE5Njg4LCJpYXQiOjE2OTkwMTk2ODgsImp0aSI6IjEyZGM5NmU5LTMyNjAtNDJmYy1hNjY0LTUxZjZjY2IzY2YxNiJ9.ZtmiUszl6zAR6ncfHPUI2yTUWVY5J64VjYqXbxKqU5Q --insecure" dir= execID=393d0
time="2023-11-03T13:54:50Z" level=debug duration=143.08068ms execID=393d0
time="2023-11-03T13:54:50Z" level=info msg="../../dist/argocd proj role get proj-1699019689 roleTest --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA4OCwibmJmIjoxNjk5MDE5Njg4LCJpYXQiOjE2OTkwMTk2ODgsImp0aSI6IjEyZGM5NmU5LTMyNjAtNDJmYy1hNjY0LTUxZjZjY2IzY2YxNiJ9.ZtmiUszl6zAR6ncfHPUI2yTUWVY5J64VjYqXbxKqU5Q --insecure" dir= execID=21ddf
time="2023-11-03T13:54:51Z" level=debug msg="Role Name:     roleTest\nDescription:   \nPolicies:\np, proj:proj-1699019689:roleTest, projects, get, proj-1699019689, allow\np, proj:proj-1699019689:roleTest, applications, get, proj-1699019689/*, allow\np, proj:proj-1699019689:roleTest, applications, update, proj-1699019689/*, allow\np, proj:proj-1699019689:roleTest, applications, sync, proj-1699019689/*, allow\np, proj:proj-1699019689:roleTest, applications, create, proj-1699019689/*, allow\np, proj:proj-1699019689:roleTest, applications, override, proj-1699019689/*, allow\np, proj:proj-1699019689:roleTest, applications, *, proj-1699019689/*, allow\nJWT Tokens:\nID          ISSUED-AT                            EXPIRES-AT\n1699019690  2023-11-03T13:54:50Z (1 second ago)  <none>\n" duration=75.581024ms execID=21ddf
time="2023-11-03T13:54:51Z" level=info msg="../../dist/argocd proj role delete-token proj-1699019689 roleTest 1699019690 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA4OCwibmJmIjoxNjk5MDE5Njg4LCJpYXQiOjE2OTkwMTk2ODgsImp0aSI6IjEyZGM5NmU5LTMyNjAtNDJmYy1hNjY0LTUxZjZjY2IzY2YxNiJ9.ZtmiUszl6zAR6ncfHPUI2yTUWVY5J64VjYqXbxKqU5Q --insecure" dir= execID=a3de9
time="2023-11-03T13:54:51Z" level=debug duration=127.28755ms execID=a3de9
time="2023-11-03T13:54:51Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestUseJWTToken (4.20s)
=== RUN   TestAddOrphanedIgnore
time="2023-11-03T13:54:51Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=79edb
time="2023-11-03T13:54:51Z" level=debug msg="namespace \"argocd-e2e--test-use-jwt-token-fcnbd\" deleted\n" duration=289.916878ms execID=79edb
time="2023-11-03T13:54:51Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=f3611
time="2023-11-03T13:54:51Z" level=debug msg="No resources found\n" duration=438.108721ms execID=f3611
time="2023-11-03T13:54:51Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=b0208
time="2023-11-03T13:54:52Z" level=debug msg="No resources found\n" duration=258.659951ms execID=b0208
time="2023-11-03T13:54:53Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:54:53Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA5MywibmJmIjoxNjk5MDE5NjkzLCJpYXQiOjE2OTkwMTk2OTMsImp0aSI6IjM3Y2EyM2RiLWE4MTQtNDM5OC05NTgxLTA2NjM4ZDlmYTFkNSJ9.W_XcCKXEeF61TNtJ8IF_XiBNvKkdmdn9kPAEmKjTYLQ --insecure" dir= execID=26f75
time="2023-11-03T13:54:53Z" level=debug duration=125.96198ms execID=26f75
time="2023-11-03T13:54:53Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=a5467
time="2023-11-03T13:54:53Z" level=debug duration=2.059275ms execID=a5467
time="2023-11-03T13:54:53Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=55bfc
time="2023-11-03T13:54:53Z" level=debug duration=1.433086ms execID=55bfc
time="2023-11-03T13:54:53Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=35f45
time="2023-11-03T13:54:53Z" level=debug duration=1.459437ms execID=35f45
time="2023-11-03T13:54:53Z" level=info msg="pkill -9 gpg-agent" dir= execID=fc56d
time="2023-11-03T13:54:53Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=a8336
time="2023-11-03T13:54:53Z" level=debug duration=9.797588ms execID=a8336
time="2023-11-03T13:54:53Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=7670d
time="2023-11-03T13:54:53Z" level=debug duration=32.67755ms execID=7670d
time="2023-11-03T13:54:53Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=17b0e
time="2023-11-03T13:54:53Z" level=debug duration=1.772939ms execID=17b0e
time="2023-11-03T13:54:53Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=5d50b
time="2023-11-03T13:54:53Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.717873ms execID=5d50b
time="2023-11-03T13:54:53Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=edf9b
time="2023-11-03T13:54:53Z" level=debug duration=33.306882ms execID=edf9b
time="2023-11-03T13:54:53Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=3e8f6
time="2023-11-03T13:54:53Z" level=debug duration=23.978533ms execID=3e8f6
time="2023-11-03T13:54:53Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=c0460
time="2023-11-03T13:54:53Z" level=debug duration=2.321279ms execID=c0460
time="2023-11-03T13:54:53Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=4fa3f
Handling connection for 9081
time="2023-11-03T13:54:53Z" level=debug duration=59.765481ms execID=4fa3f
time="2023-11-03T13:54:53Z" level=info msg="kubectl create ns argocd-e2e--test-add-orphaned-ignore-cusor" dir= execID=7a15c
time="2023-11-03T13:54:53Z" level=debug msg="namespace/argocd-e2e--test-add-orphaned-ignore-cusor created\n" duration=201.541104ms execID=7a15c
time="2023-11-03T13:54:53Z" level=info msg="kubectl label ns argocd-e2e--test-add-orphaned-ignore-cusor e2e.argoproj.io=true" dir= execID=10410
time="2023-11-03T13:54:53Z" level=debug msg="namespace/argocd-e2e--test-add-orphaned-ignore-cusor labeled\n" duration=300.410388ms execID=10410
time="2023-11-03T13:54:53Z" level=info msg="clean state" duration=2.741336258s id=TestAddOrphanedIgnore-cusor name=TestAddOrphanedIgnore password=password username=admin
time="2023-11-03T13:54:53Z" level=info msg="../../dist/argocd proj add-orphaned-ignore proj-1699019693 group kind --name name --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA5MywibmJmIjoxNjk5MDE5NjkzLCJpYXQiOjE2OTkwMTk2OTMsImp0aSI6IjM3Y2EyM2RiLWE4MTQtNDM5OC05NTgxLTA2NjM4ZDlmYTFkNSJ9.W_XcCKXEeF61TNtJ8IF_XiBNvKkdmdn9kPAEmKjTYLQ --insecure" dir= execID=54dd1
time="2023-11-03T13:54:54Z" level=debug duration=139.271423ms execID=54dd1
time="2023-11-03T13:54:54Z" level=info msg="../../dist/argocd proj add-orphaned-ignore proj-1699019693 group kind --name name --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA5MywibmJmIjoxNjk5MDE5NjkzLCJpYXQiOjE2OTkwMTk2OTMsImp0aSI6IjM3Y2EyM2RiLWE4MTQtNDM5OC05NTgxLTA2NjM4ZDlmYTFkNSJ9.W_XcCKXEeF61TNtJ8IF_XiBNvKkdmdn9kPAEmKjTYLQ --insecure" dir= execID=1f5cb
time="2023-11-03T13:54:54Z" level=debug duration=88.194397ms execID=1f5cb
time="2023-11-03T13:54:54Z" level=error msg="`../../dist/argocd proj add-orphaned-ignore proj-1699019693 group kind --name name --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA5MywibmJmIjoxNjk5MDE5NjkzLCJpYXQiOjE2OTkwMTk2OTMsImp0aSI6IjM3Y2EyM2RiLWE4MTQtNDM5OC05NTgxLTA2NjM4ZDlmYTFkNSJ9.W_XcCKXEeF61TNtJ8IF_XiBNvKkdmdn9kPAEmKjTYLQ --insecure` failed exit status 1: time=\"2023-11-03T13:54:54Z\" level=fatal msg=\"Specified resource is already defined in the orphaned ignore list of project\"" execID=1f5cb
time="2023-11-03T13:54:54Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestAddOrphanedIgnore (3.02s)
=== RUN   TestRemoveOrphanedIgnore
time="2023-11-03T13:54:54Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=6416f
time="2023-11-03T13:54:54Z" level=debug msg="namespace \"argocd-e2e--test-add-orphaned-ignore-cusor\" deleted\n" duration=191.810771ms execID=6416f
time="2023-11-03T13:54:54Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=9d8f0
time="2023-11-03T13:54:54Z" level=debug msg="No resources found\n" duration=464.849499ms execID=9d8f0
time="2023-11-03T13:54:54Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=112f6
time="2023-11-03T13:54:55Z" level=debug msg="No resources found\n" duration=308.899689ms execID=112f6
time="2023-11-03T13:54:56Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:54:56Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA5NiwibmJmIjoxNjk5MDE5Njk2LCJpYXQiOjE2OTkwMTk2OTYsImp0aSI6IjNkZDJmZmE3LWJmNTQtNDRiZi1hNjM5LThkMmNkNWFiNjhlMiJ9.RYj0zIx3GBojTNxiZTIiGl1_dZUA4EPEzWDLyqD_jLU --insecure" dir= execID=80bcf
time="2023-11-03T13:54:56Z" level=debug duration=112.783727ms execID=80bcf
time="2023-11-03T13:54:56Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=41caf
time="2023-11-03T13:54:56Z" level=debug duration=2.228472ms execID=41caf
time="2023-11-03T13:54:56Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=56a67
time="2023-11-03T13:54:56Z" level=debug duration=1.536856ms execID=56a67
time="2023-11-03T13:54:56Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=831fb
time="2023-11-03T13:54:56Z" level=debug duration=1.311531ms execID=831fb
time="2023-11-03T13:54:56Z" level=info msg="pkill -9 gpg-agent" dir= execID=1d300
time="2023-11-03T13:54:56Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=c8ee3
time="2023-11-03T13:54:56Z" level=debug duration=9.726779ms execID=c8ee3
time="2023-11-03T13:54:56Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=268b4
time="2023-11-03T13:54:56Z" level=debug duration=33.191121ms execID=268b4
time="2023-11-03T13:54:56Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=ec40e
time="2023-11-03T13:54:56Z" level=debug duration=1.438296ms execID=ec40e
time="2023-11-03T13:54:56Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=68eb7
time="2023-11-03T13:54:56Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.554342ms execID=68eb7
time="2023-11-03T13:54:56Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=4b118
time="2023-11-03T13:54:56Z" level=debug duration=36.288018ms execID=4b118
time="2023-11-03T13:54:56Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=ece45
time="2023-11-03T13:54:56Z" level=debug duration=24.310482ms execID=ece45
time="2023-11-03T13:54:56Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=f911c
time="2023-11-03T13:54:56Z" level=debug duration=2.440751ms execID=f911c
time="2023-11-03T13:54:56Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=8a4df
Handling connection for 9081
time="2023-11-03T13:54:56Z" level=debug duration=83.366841ms execID=8a4df
time="2023-11-03T13:54:56Z" level=info msg="kubectl create ns argocd-e2e--test-remove-orphaned-ignore-rugfe" dir= execID=d9284
time="2023-11-03T13:54:56Z" level=debug msg="namespace/argocd-e2e--test-remove-orphaned-ignore-rugfe created\n" duration=119.844511ms execID=d9284
time="2023-11-03T13:54:56Z" level=info msg="kubectl label ns argocd-e2e--test-remove-orphaned-ignore-rugfe e2e.argoproj.io=true" dir= execID=b8582
time="2023-11-03T13:54:56Z" level=debug msg="namespace/argocd-e2e--test-remove-orphaned-ignore-rugfe labeled\n" duration=251.450115ms execID=b8582
time="2023-11-03T13:54:56Z" level=info msg="clean state" duration=2.616612418s id=TestRemoveOrphanedIgnore-rugfe name=TestRemoveOrphanedIgnore password=password username=admin
time="2023-11-03T13:54:56Z" level=info msg="../../dist/argocd proj remove-orphaned-ignore proj-1699019696 group kind --name name --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA5NiwibmJmIjoxNjk5MDE5Njk2LCJpYXQiOjE2OTkwMTk2OTYsImp0aSI6IjNkZDJmZmE3LWJmNTQtNDRiZi1hNjM5LThkMmNkNWFiNjhlMiJ9.RYj0zIx3GBojTNxiZTIiGl1_dZUA4EPEzWDLyqD_jLU --insecure" dir= execID=54973
time="2023-11-03T13:54:56Z" level=debug duration=141.472472ms execID=54973
time="2023-11-03T13:54:56Z" level=info msg="../../dist/argocd proj remove-orphaned-ignore proj-1699019696 group kind --name name --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA5NiwibmJmIjoxNjk5MDE5Njk2LCJpYXQiOjE2OTkwMTk2OTYsImp0aSI6IjNkZDJmZmE3LWJmNTQtNDRiZi1hNjM5LThkMmNkNWFiNjhlMiJ9.RYj0zIx3GBojTNxiZTIiGl1_dZUA4EPEzWDLyqD_jLU --insecure" dir= execID=0a46e
time="2023-11-03T13:54:57Z" level=debug duration=98.56749ms execID=0a46e
time="2023-11-03T13:54:57Z" level=error msg="`../../dist/argocd proj remove-orphaned-ignore proj-1699019696 group kind --name name --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA5NiwibmJmIjoxNjk5MDE5Njk2LCJpYXQiOjE2OTkwMTk2OTYsImp0aSI6IjNkZDJmZmE3LWJmNTQtNDRiZi1hNjM5LThkMmNkNWFiNjhlMiJ9.RYj0zIx3GBojTNxiZTIiGl1_dZUA4EPEzWDLyqD_jLU --insecure` failed exit status 1: time=\"2023-11-03T13:54:57Z\" level=fatal msg=\"Specified resource does not exist in the orphaned ignore of project\"" execID=0a46e
time="2023-11-03T13:54:57Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestRemoveOrphanedIgnore (2.91s)
=== RUN   TestGetVirtualProjectNoMatch
time="2023-11-03T13:54:57Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=15498
time="2023-11-03T13:54:57Z" level=debug msg="namespace \"argocd-e2e--test-remove-orphaned-ignore-rugfe\" deleted\n" duration=168.932145ms execID=15498
time="2023-11-03T13:54:57Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=a9ceb
time="2023-11-03T13:54:57Z" level=debug msg="No resources found\n" duration=362.95313ms execID=a9ceb
time="2023-11-03T13:54:57Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=620a9
time="2023-11-03T13:54:57Z" level=debug msg="No resources found\n" duration=258.989472ms execID=620a9
time="2023-11-03T13:54:58Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:54:58Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA5OCwibmJmIjoxNjk5MDE5Njk4LCJpYXQiOjE2OTkwMTk2OTgsImp0aSI6ImU4ZDlhY2RkLWY3NzktNGNlNS05N2QxLTgzNDEyYTNkMDlmMyJ9.Tbh-5vIqLzR3eWtaCawnHBRGXu_qVgHXhPK8KY_0evs --insecure" dir= execID=21b62
time="2023-11-03T13:54:58Z" level=debug duration=72.283646ms execID=21b62
time="2023-11-03T13:54:58Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=d1a19
time="2023-11-03T13:54:58Z" level=debug duration=2.075475ms execID=d1a19
time="2023-11-03T13:54:58Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=cbda0
time="2023-11-03T13:54:58Z" level=debug duration=23.713199ms execID=cbda0
time="2023-11-03T13:54:58Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=032d1
time="2023-11-03T13:54:58Z" level=debug duration=2.139004ms execID=032d1
time="2023-11-03T13:54:58Z" level=info msg="pkill -9 gpg-agent" dir= execID=686bc
time="2023-11-03T13:54:58Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=8ebfb
time="2023-11-03T13:54:58Z" level=debug duration=10.65871ms execID=8ebfb
time="2023-11-03T13:54:58Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=6de3d
time="2023-11-03T13:54:58Z" level=debug duration=37.076555ms execID=6de3d
time="2023-11-03T13:54:58Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=b68dd
time="2023-11-03T13:54:58Z" level=debug duration=2.043083ms execID=b68dd
time="2023-11-03T13:54:58Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=edf83
time="2023-11-03T13:54:58Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.021702ms execID=edf83
time="2023-11-03T13:54:58Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=1213c
time="2023-11-03T13:54:58Z" level=debug duration=27.035582ms execID=1213c
time="2023-11-03T13:54:58Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=22fe2
time="2023-11-03T13:54:58Z" level=debug duration=29.339551ms execID=22fe2
time="2023-11-03T13:54:58Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=0a627
time="2023-11-03T13:54:58Z" level=debug duration=2.904509ms execID=0a627
time="2023-11-03T13:54:58Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=4a268
Handling connection for 9081
time="2023-11-03T13:54:59Z" level=debug duration=62.659204ms execID=4a268
time="2023-11-03T13:54:59Z" level=info msg="kubectl create ns argocd-e2e--test-get-virtual-project-no-match-qrqro" dir= execID=bf1f8
time="2023-11-03T13:54:59Z" level=debug msg="namespace/argocd-e2e--test-get-virtual-project-no-match-qrqro created\n" duration=163.319348ms execID=bf1f8
time="2023-11-03T13:54:59Z" level=info msg="kubectl label ns argocd-e2e--test-get-virtual-project-no-match-qrqro e2e.argoproj.io=true" dir= execID=8351d
time="2023-11-03T13:54:59Z" level=debug msg="namespace/argocd-e2e--test-get-virtual-project-no-match-qrqro labeled\n" duration=292.695919ms execID=8351d
time="2023-11-03T13:54:59Z" level=info msg="clean state" duration=2.342215526s id=TestGetVirtualProjectNoMatch-qrqro name=TestGetVirtualProjectNoMatch password=password username=admin
time="2023-11-03T13:54:59Z" level=info msg="../../dist/argocd proj create proj-g-test-get-virtual-project-no-match --description Test description -d https://192.168.99.100:8443,default -d https://192.168.99.100:8443,service -s https://github.com/argoproj/argo-cd.git --orphaned-resources --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA5OCwibmJmIjoxNjk5MDE5Njk4LCJpYXQiOjE2OTkwMTk2OTgsImp0aSI6ImU4ZDlhY2RkLWY3NzktNGNlNS05N2QxLTgzNDEyYTNkMDlmMyJ9.Tbh-5vIqLzR3eWtaCawnHBRGXu_qVgHXhPK8KY_0evs --insecure" dir= execID=664a6
time="2023-11-03T13:54:59Z" level=debug duration=164.661808ms execID=664a6
time="2023-11-03T13:54:59Z" level=info msg="kubectl patch cm argocd-cm -n argocd-e2e -p data:\n  accounts.config-service: apiKey\n  globalProjects: |\n    - labelSelector:\n        matchExpressions:\n          - key: opt\n            operator: In\n            values:\n              - me\n              - you\n      projectName: proj-g-test-get-virtual-project-no-match" dir= execID=f68c0
time="2023-11-03T13:54:59Z" level=debug msg="configmap/argocd-cm patched\n" duration=288.218249ms execID=f68c0
time="2023-11-03T13:54:59Z" level=info msg="../../dist/argocd proj create proj-test-get-virtual-project-no-match --description Test description -d https://kubernetes.default.svc,* -s * --orphaned-resources --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA5OCwibmJmIjoxNjk5MDE5Njk4LCJpYXQiOjE2OTkwMTk2OTgsImp0aSI6ImU4ZDlhY2RkLWY3NzktNGNlNS05N2QxLTgzNDEyYTNkMDlmMyJ9.Tbh-5vIqLzR3eWtaCawnHBRGXu_qVgHXhPK8KY_0evs --insecure" dir= execID=70138
time="2023-11-03T13:55:00Z" level=debug duration=130.177986ms execID=70138
time="2023-11-03T13:55:00Z" level=info msg="../../dist/argocd app create test-get-virtual-project-no-match --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --path guestbook --project proj-test-get-virtual-project-no-match --dest-server https://kubernetes.default.svc --dest-namespace argocd-e2e--test-get-virtual-project-no-match-qrqro --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA5OCwibmJmIjoxNjk5MDE5Njk4LCJpYXQiOjE2OTkwMTk2OTgsImp0aSI6ImU4ZDlhY2RkLWY3NzktNGNlNS05N2QxLTgzNDEyYTNkMDlmMyJ9.Tbh-5vIqLzR3eWtaCawnHBRGXu_qVgHXhPK8KY_0evs --insecure" dir= execID=507bb
time="2023-11-03T13:55:00Z" level=debug msg="application 'test-get-virtual-project-no-match' created\n" duration=288.104927ms execID=507bb
time="2023-11-03T13:55:00Z" level=info msg="../../dist/argocd app sync test-get-virtual-project-no-match --resource apps:Deployment:guestbook-ui --timeout 10 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA5OCwibmJmIjoxNjk5MDE5Njk4LCJpYXQiOjE2OTkwMTk2OTgsImp0aSI6ImU4ZDlhY2RkLWY3NzktNGNlNS05N2QxLTgzNDEyYTNkMDlmMyJ9.Tbh-5vIqLzR3eWtaCawnHBRGXu_qVgHXhPK8KY_0evs --insecure" dir= execID=4c03b
time="2023-11-03T13:55:03Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T13:55:00+00:00   apps  Deployment  argocd-e2e--test-get-virtual-project-no-match-qrqro          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:55:02+00:00   apps  Deployment  argocd-e2e--test-get-virtual-project-no-match-qrqro          guestbook-ui  OutOfSync  Missing              deployment.apps/guestbook-ui created\n2023-11-03T13:55:02+00:00   apps  Deployment  argocd-e2e--test-get-virtual-project-no-match-qrqro          guestbook-ui    Synced  Progressing              deployment.apps/guestbook-ui created\n\nName:               argocd-e2e/test-get-virtual-project-no-match\nProject:            proj-test-get-virtual-project-no-match\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-get-virtual-project-no-match-qrqro\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-get-virtual-project-no-match\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (d9157a2)\nHealth Status:      Missing\n\nOperation:          Sync\nSync Revision:      d9157a294c77f4b69ed5ca5f2ca7052bd28f95f4\nPhase:              Succeeded\nStart:              2023-11-03 13:55:00 +0000 UTC\nFinished:           2023-11-03 13:55:02 +0000 UTC\nDuration:           2s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                            NAME          STATUS     HEALTH   HOOK  MESSAGE\napps   Deployment  argocd-e2e--test-get-virtual-project-no-match-qrqro  guestbook-ui  Synced     Healthy        deployment.apps/guestbook-ui created\n       Service     argocd-e2e--test-get-virtual-project-no-match-qrqro  guestbook-ui  OutOfSync  Missing        \n" duration=2.654041193s execID=4c03b
time="2023-11-03T13:55:03Z" level=info msg="../../dist/argocd app sync test-get-virtual-project-no-match --resource :Service:guestbook-ui --timeout 10 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjA5OCwibmJmIjoxNjk5MDE5Njk4LCJpYXQiOjE2OTkwMTk2OTgsImp0aSI6ImU4ZDlhY2RkLWY3NzktNGNlNS05N2QxLTgzNDEyYTNkMDlmMyJ9.Tbh-5vIqLzR3eWtaCawnHBRGXu_qVgHXhPK8KY_0evs --insecure" dir= execID=e4e52
time="2023-11-03T13:55:03Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                           NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:55:03+00:00            Service  argocd-e2e--test-get-virtual-project-no-match-qrqro          guestbook-ui  OutOfSync  Missing              \n2023-11-03T13:55:03+00:00            Service  argocd-e2e--test-get-virtual-project-no-match-qrqro          guestbook-ui  OutOfSync  Missing              service/guestbook-ui created\n2023-11-03T13:55:03+00:00            Service  argocd-e2e--test-get-virtual-project-no-match-qrqro          guestbook-ui    Synced  Healthy              service/guestbook-ui created\n\nName:               argocd-e2e/test-get-virtual-project-no-match\nProject:            proj-test-get-virtual-project-no-match\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-get-virtual-project-no-match-qrqro\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-get-virtual-project-no-match\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (d9157a2)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      d9157a294c77f4b69ed5ca5f2ca7052bd28f95f4\nPhase:              Succeeded\nStart:              2023-11-03 13:55:03 +0000 UTC\nFinished:           2023-11-03 13:55:03 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                            NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-get-virtual-project-no-match-qrqro  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-get-virtual-project-no-match-qrqro  guestbook-ui  Synced  Healthy        \n" duration=727.008388ms execID=e4e52
time="2023-11-03T13:55:03Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestGetVirtualProjectNoMatch (6.62s)
=== RUN   TestGetVirtualProjectMatch
time="2023-11-03T13:55:03Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=e3276
time="2023-11-03T13:55:04Z" level=debug msg="namespace \"argocd-e2e--test-get-virtual-project-no-match-qrqro\" deleted\n" duration=228.22157ms execID=e3276
time="2023-11-03T13:55:04Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=6c271
time="2023-11-03T13:55:04Z" level=debug msg="No resources found\n" duration=385.382407ms execID=6c271
time="2023-11-03T13:55:04Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=4d3a1
time="2023-11-03T13:55:04Z" level=debug msg="No resources found\n" duration=310.565648ms execID=4d3a1
time="2023-11-03T13:55:05Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:55:05Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjEwNSwibmJmIjoxNjk5MDE5NzA1LCJpYXQiOjE2OTkwMTk3MDUsImp0aSI6ImFlNWQyNmNjLWE2MWMtNDVhYy04NWRmLTViM2Q5ZGZmMDE3OCJ9.OWOVdCDV4yAPF4m6a3Yll4cDZ-S32BEppzDDLwfdoWk --insecure" dir= execID=fc358
time="2023-11-03T13:55:05Z" level=debug duration=72.358216ms execID=fc358
time="2023-11-03T13:55:05Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=4d95c
time="2023-11-03T13:55:05Z" level=debug duration=1.977398ms execID=4d95c
time="2023-11-03T13:55:05Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=320da
time="2023-11-03T13:55:05Z" level=debug duration=1.71836ms execID=320da
time="2023-11-03T13:55:05Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=d9bad
time="2023-11-03T13:55:05Z" level=debug duration=1.540739ms execID=d9bad
time="2023-11-03T13:55:05Z" level=info msg="pkill -9 gpg-agent" dir= execID=9e7db
time="2023-11-03T13:55:05Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=f49eb
time="2023-11-03T13:55:05Z" level=debug duration=10.226756ms execID=f49eb
time="2023-11-03T13:55:05Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=de415
time="2023-11-03T13:55:05Z" level=debug duration=34.255497ms execID=de415
time="2023-11-03T13:55:05Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=4e0a8
time="2023-11-03T13:55:05Z" level=debug duration=1.869785ms execID=4e0a8
time="2023-11-03T13:55:05Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=a0bc8
time="2023-11-03T13:55:05Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.867144ms execID=a0bc8
time="2023-11-03T13:55:05Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=d66cf
time="2023-11-03T13:55:05Z" level=debug duration=39.133639ms execID=d66cf
time="2023-11-03T13:55:05Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=64406
time="2023-11-03T13:55:05Z" level=debug duration=30.911836ms execID=64406
time="2023-11-03T13:55:05Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=47a0a
time="2023-11-03T13:55:05Z" level=debug duration=2.217755ms execID=47a0a
time="2023-11-03T13:55:05Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=5ea91
Handling connection for 9081
time="2023-11-03T13:55:05Z" level=debug duration=82.087968ms execID=5ea91
time="2023-11-03T13:55:05Z" level=info msg="kubectl create ns argocd-e2e--test-get-virtual-project-match-tciay" dir= execID=98859
time="2023-11-03T13:55:05Z" level=debug msg="namespace/argocd-e2e--test-get-virtual-project-match-tciay created\n" duration=132.455589ms execID=98859
time="2023-11-03T13:55:05Z" level=info msg="kubectl label ns argocd-e2e--test-get-virtual-project-match-tciay e2e.argoproj.io=true" dir= execID=8a010
time="2023-11-03T13:55:06Z" level=debug msg="namespace/argocd-e2e--test-get-virtual-project-match-tciay labeled\n" duration=274.815355ms execID=8a010
time="2023-11-03T13:55:06Z" level=info msg="clean state" duration=2.416326836s id=TestGetVirtualProjectMatch-tciay name=TestGetVirtualProjectMatch password=password username=admin
time="2023-11-03T13:55:06Z" level=info msg="../../dist/argocd proj create proj-g-test-get-virtual-project-match --description Test description -d https://192.168.99.100:8443,default -d https://192.168.99.100:8443,service -s https://github.com/argoproj/argo-cd.git --orphaned-resources --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjEwNSwibmJmIjoxNjk5MDE5NzA1LCJpYXQiOjE2OTkwMTk3MDUsImp0aSI6ImFlNWQyNmNjLWE2MWMtNDVhYy04NWRmLTViM2Q5ZGZmMDE3OCJ9.OWOVdCDV4yAPF4m6a3Yll4cDZ-S32BEppzDDLwfdoWk --insecure" dir= execID=5f33d
time="2023-11-03T13:55:06Z" level=debug duration=174.479286ms execID=5f33d
time="2023-11-03T13:55:06Z" level=info msg="kubectl patch cm argocd-cm -n argocd-e2e -p data:\n  accounts.config-service: apiKey\n  globalProjects: |\n    - labelSelector:\n        matchExpressions:\n          - key: opt\n            operator: In\n            values:\n              - me\n              - you\n      projectName: proj-g-test-get-virtual-project-match" dir= execID=36d5c
time="2023-11-03T13:55:06Z" level=debug msg="configmap/argocd-cm patched\n" duration=388.285598ms execID=36d5c
time="2023-11-03T13:55:06Z" level=info msg="../../dist/argocd proj create proj-test-get-virtual-project-match --description Test description -d https://kubernetes.default.svc,* -s * --orphaned-resources --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjEwNSwibmJmIjoxNjk5MDE5NzA1LCJpYXQiOjE2OTkwMTk3MDUsImp0aSI6ImFlNWQyNmNjLWE2MWMtNDVhYy04NWRmLTViM2Q5ZGZmMDE3OCJ9.OWOVdCDV4yAPF4m6a3Yll4cDZ-S32BEppzDDLwfdoWk --insecure" dir= execID=53ee7
time="2023-11-03T13:55:06Z" level=debug duration=133.199043ms execID=53ee7
time="2023-11-03T13:55:06Z" level=info msg="../../dist/argocd app create test-get-virtual-project-match --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --path guestbook --project proj-test-get-virtual-project-match --dest-server https://kubernetes.default.svc --dest-namespace argocd-e2e--test-get-virtual-project-match-tciay --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjEwNSwibmJmIjoxNjk5MDE5NzA1LCJpYXQiOjE2OTkwMTk3MDUsImp0aSI6ImFlNWQyNmNjLWE2MWMtNDVhYy04NWRmLTViM2Q5ZGZmMDE3OCJ9.OWOVdCDV4yAPF4m6a3Yll4cDZ-S32BEppzDDLwfdoWk --insecure" dir= execID=5b236
time="2023-11-03T13:55:07Z" level=debug msg="application 'test-get-virtual-project-match' created\n" duration=330.677329ms execID=5b236
time="2023-11-03T13:55:07Z" level=info msg="../../dist/argocd app sync test-get-virtual-project-match --resource apps:Deployment:guestbook-ui --timeout 10 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjEwNSwibmJmIjoxNjk5MDE5NzA1LCJpYXQiOjE2OTkwMTk3MDUsImp0aSI6ImFlNWQyNmNjLWE2MWMtNDVhYy04NWRmLTViM2Q5ZGZmMDE3OCJ9.OWOVdCDV4yAPF4m6a3Yll4cDZ-S32BEppzDDLwfdoWk --insecure" dir= execID=601a1
time="2023-11-03T13:55:07Z" level=debug duration=89.665909ms execID=601a1
time="2023-11-03T13:55:07Z" level=error msg="`../../dist/argocd app sync test-get-virtual-project-match --resource apps:Deployment:guestbook-ui --timeout 10 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjEwNSwibmJmIjoxNjk5MDE5NzA1LCJpYXQiOjE2OTkwMTk3MDUsImp0aSI6ImFlNWQyNmNjLWE2MWMtNDVhYy04NWRmLTViM2Q5ZGZmMDE3OCJ9.OWOVdCDV4yAPF4m6a3Yll4cDZ-S32BEppzDDLwfdoWk --insecure` failed exit status 20: time=\"2023-11-03T13:55:07Z\" level=fatal msg=\"rpc error: code = PermissionDenied desc = cannot sync: blocked by sync window\"" execID=601a1
time="2023-11-03T13:55:07Z" level=info msg="../../dist/argocd app sync test-get-virtual-project-match --resource :Service:guestbook-ui --timeout 10 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjEwNSwibmJmIjoxNjk5MDE5NzA1LCJpYXQiOjE2OTkwMTk3MDUsImp0aSI6ImFlNWQyNmNjLWE2MWMtNDVhYy04NWRmLTViM2Q5ZGZmMDE3OCJ9.OWOVdCDV4yAPF4m6a3Yll4cDZ-S32BEppzDDLwfdoWk --insecure" dir= execID=71968
time="2023-11-03T13:55:07Z" level=debug duration=167.668919ms execID=71968
time="2023-11-03T13:55:07Z" level=error msg="`../../dist/argocd app sync test-get-virtual-project-match --resource :Service:guestbook-ui --timeout 10 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjEwNSwibmJmIjoxNjk5MDE5NzA1LCJpYXQiOjE2OTkwMTk3MDUsImp0aSI6ImFlNWQyNmNjLWE2MWMtNDVhYy04NWRmLTViM2Q5ZGZmMDE3OCJ9.OWOVdCDV4yAPF4m6a3Yll4cDZ-S32BEppzDDLwfdoWk --insecure` failed exit status 20: time=\"2023-11-03T13:55:07Z\" level=fatal msg=\"rpc error: code = PermissionDenied desc = cannot sync: blocked by sync window\"" execID=71968
time="2023-11-03T13:55:07Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestGetVirtualProjectMatch (3.72s)
=== RUN   TestPruningRequired
time="2023-11-03T13:55:07Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=774ae
time="2023-11-03T13:55:07Z" level=debug msg="namespace \"argocd-e2e--test-get-virtual-project-match-tciay\" deleted\n" duration=305.106367ms execID=774ae
time="2023-11-03T13:55:07Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=b1570
time="2023-11-03T13:55:08Z" level=debug msg="No resources found\n" duration=381.527675ms execID=b1570
time="2023-11-03T13:55:08Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=08a01
time="2023-11-03T13:55:08Z" level=debug msg="No resources found\n" duration=256.908091ms execID=08a01
time="2023-11-03T13:55:09Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:55:09Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjEwOSwibmJmIjoxNjk5MDE5NzA5LCJpYXQiOjE2OTkwMTk3MDksImp0aSI6IjAyNmM5MjBjLTg0NWQtNDJkNi1iZWQwLTI5NTYzNGNmYTA2NiJ9.GcgTnBlH3kxtl_t9syvrgue4erDHC9uziRk2Ccn6oRk --insecure" dir= execID=1c6f5
time="2023-11-03T13:55:09Z" level=debug duration=109.66203ms execID=1c6f5
time="2023-11-03T13:55:09Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=24179
time="2023-11-03T13:55:09Z" level=debug duration=1.917683ms execID=24179
time="2023-11-03T13:55:09Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=18f92
time="2023-11-03T13:55:09Z" level=debug duration=1.661764ms execID=18f92
time="2023-11-03T13:55:09Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=a79f7
time="2023-11-03T13:55:09Z" level=debug duration=1.633942ms execID=a79f7
time="2023-11-03T13:55:09Z" level=info msg="pkill -9 gpg-agent" dir= execID=bd11e
time="2023-11-03T13:55:09Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=72815
time="2023-11-03T13:55:09Z" level=debug duration=89.277966ms execID=72815
time="2023-11-03T13:55:09Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=e74d6
time="2023-11-03T13:55:09Z" level=debug duration=33.9959ms execID=e74d6
time="2023-11-03T13:55:09Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=f9959
time="2023-11-03T13:55:09Z" level=debug duration=1.870906ms execID=f9959
time="2023-11-03T13:55:09Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=87760
time="2023-11-03T13:55:09Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.855606ms execID=87760
time="2023-11-03T13:55:09Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=08206
time="2023-11-03T13:55:09Z" level=debug duration=25.951342ms execID=08206
time="2023-11-03T13:55:09Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=eaa0f
time="2023-11-03T13:55:09Z" level=debug duration=22.811111ms execID=eaa0f
time="2023-11-03T13:55:09Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=0becf
time="2023-11-03T13:55:09Z" level=debug duration=2.219586ms execID=0becf
time="2023-11-03T13:55:09Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=fea25
Handling connection for 9081
time="2023-11-03T13:55:09Z" level=debug duration=70.340652ms execID=fea25
time="2023-11-03T13:55:09Z" level=info msg="kubectl create ns argocd-e2e--test-pruning-required-znhxu" dir= execID=87bcb
time="2023-11-03T13:55:09Z" level=debug msg="namespace/argocd-e2e--test-pruning-required-znhxu created\n" duration=133.665511ms execID=87bcb
time="2023-11-03T13:55:09Z" level=info msg="kubectl label ns argocd-e2e--test-pruning-required-znhxu e2e.argoproj.io=true" dir= execID=7e8e9
time="2023-11-03T13:55:09Z" level=debug msg="namespace/argocd-e2e--test-pruning-required-znhxu labeled\n" duration=298.817655ms execID=7e8e9
time="2023-11-03T13:55:09Z" level=info msg="clean state" duration=2.492948093s id=TestPruningRequired-znhxu name=TestPruningRequired password=password username=admin
time="2023-11-03T13:55:10Z" level=info msg="../../dist/argocd app create test-pruning-required --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path two-nice-pods --project default --dest-namespace argocd-e2e--test-pruning-required-znhxu --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjEwOSwibmJmIjoxNjk5MDE5NzA5LCJpYXQiOjE2OTkwMTk3MDksImp0aSI6IjAyNmM5MjBjLTg0NWQtNDJkNi1iZWQwLTI5NTYzNGNmYTA2NiJ9.GcgTnBlH3kxtl_t9syvrgue4erDHC9uziRk2Ccn6oRk --insecure" dir= execID=92692
time="2023-11-03T13:55:11Z" level=debug msg="application 'test-pruning-required' created\n" duration=291.761951ms execID=92692
time="2023-11-03T13:55:11Z" level=info msg="../../dist/argocd app sync test-pruning-required --timeout 30 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjEwOSwibmJmIjoxNjk5MDE5NzA5LCJpYXQiOjE2OTkwMTk3MDksImp0aSI6IjAyNmM5MjBjLTg0NWQtNDJkNi1iZWQwLTI5NTYzNGNmYTA2NiJ9.GcgTnBlH3kxtl_t9syvrgue4erDHC9uziRk2Ccn6oRk --insecure" dir= execID=8c612
time="2023-11-03T13:55:12Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                               NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T13:55:11+00:00                Pod  argocd-e2e--test-pruning-required-znhxu                 pod-1  OutOfSync  Missing              \n2023-11-03T13:55:11+00:00                Pod  argocd-e2e--test-pruning-required-znhxu                 pod-2  OutOfSync  Missing              \n\nName:               argocd-e2e/test-pruning-required\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-pruning-required-znhxu\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-pruning-required\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               two-nice-pods\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (2f34c47)\nHealth Status:      Progressing\n\nOperation:          Sync\nSync Revision:      2f34c4790ec506a5c3ff5b9db02f159959df4dd3\nPhase:              Succeeded\nStart:              2023-11-03 13:55:11 +0000 UTC\nFinished:           2023-11-03 13:55:11 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND  NAMESPACE                                NAME   STATUS  HEALTH       HOOK  MESSAGE\n       Pod   argocd-e2e--test-pruning-required-znhxu  pod-1  Synced  Progressing        pod/pod-1 created\n       Pod   argocd-e2e--test-pruning-required-znhxu  pod-2  Synced  Progressing        pod/pod-2 created\n" duration=915.722102ms execID=8c612
time="2023-11-03T13:55:12Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T13:55:12Z" level=info msg=deleting path=two-nice-pods/pod-2.yaml
time="2023-11-03T13:55:12Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=ca8ef
time="2023-11-03T13:55:12Z" level=debug msg="diff --git a/two-nice-pods/pod-2.yaml b/two-nice-pods/pod-2.yaml\ndeleted file mode 100644\nindex 588d281..0000000\n--- a/two-nice-pods/pod-2.yaml\n+++ /dev/null\n@@ -1,12 +0,0 @@\n-apiVersion: v1\n-kind: Pod\n-metadata:\n-  name: pod-2\n-spec:\n-  containers:\n-    - name: main\n-      image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-      imagePullPolicy: IfNotPresent\n-      command:\n-        - \"true\"\n-  restartPolicy: Never\n" duration=4.955056ms execID=ca8ef
time="2023-11-03T13:55:12Z" level=info msg="git commit -am delete" dir=/tmp/argo-e2e/testdata.git execID=4f050
time="2023-11-03T13:55:12Z" level=debug msg="[master addc01c] delete\n 1 file changed, 12 deletions(-)\n delete mode 100644 two-nice-pods/pod-2.yaml\n" duration=12.43849ms execID=4f050
time="2023-11-03T13:55:12Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=68ea3
Handling connection for 9081
time="2023-11-03T13:55:12Z" level=debug duration=41.115894ms execID=68ea3
time="2023-11-03T13:55:12Z" level=info msg="../../dist/argocd app sync test-pruning-required --timeout 30 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjEwOSwibmJmIjoxNjk5MDE5NzA5LCJpYXQiOjE2OTkwMTk3MDksImp0aSI6IjAyNmM5MjBjLTg0NWQtNDJkNi1iZWQwLTI5NTYzNGNmYTA2NiJ9.GcgTnBlH3kxtl_t9syvrgue4erDHC9uziRk2Ccn6oRk --insecure" dir= execID=f46ac
time="2023-11-03T13:55:13Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                               NAME    STATUS   HEALTH            HOOK  MESSAGE\n2023-11-03T13:55:12+00:00                Pod  argocd-e2e--test-pruning-required-znhxu                 pod-2    Synced  Progressing              \n2023-11-03T13:55:12+00:00                Pod  argocd-e2e--test-pruning-required-znhxu                 pod-1    Synced  Progressing              \n\nName:               argocd-e2e/test-pruning-required\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-pruning-required-znhxu\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-pruning-required\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               two-nice-pods\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (addc01c)\nHealth Status:      Progressing\n\nOperation:          Sync\nSync Revision:      addc01c510f817d149206545340f379b6d4bc966\nPhase:              Succeeded\nStart:              2023-11-03 13:55:12 +0000 UTC\nFinished:           2023-11-03 13:55:12 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND  NAMESPACE                                NAME   STATUS     HEALTH       HOOK  MESSAGE\n       Pod   argocd-e2e--test-pruning-required-znhxu  pod-2  OutOfSync  Progressing        ignored (requires pruning)\n       Pod   argocd-e2e--test-pruning-required-znhxu  pod-1  Synced     Progressing        pod/pod-1 unchanged\n" duration=782.344663ms execID=f46ac
time="2023-11-03T13:55:13Z" level=error msg="`../../dist/argocd app sync test-pruning-required --timeout 30 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjEwOSwibmJmIjoxNjk5MDE5NzA5LCJpYXQiOjE2OTkwMTk3MDksImp0aSI6IjAyNmM5MjBjLTg0NWQtNDJkNi1iZWQwLTI5NTYzNGNmYTA2NiJ9.GcgTnBlH3kxtl_t9syvrgue4erDHC9uziRk2Ccn6oRk --insecure` failed exit status 1: time=\"2023-11-03T13:55:13Z\" level=fatal msg=\"1 resources require pruning\"" execID=f46ac
time="2023-11-03T13:55:13Z" level=info msg="expectation succeeded: error ''"
time="2023-11-03T13:55:13Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestPruningRequired (5.55s)
=== RUN   TestCannotAddAppFromPrivateRepoWithoutCfg
time="2023-11-03T13:55:13Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=88ecf
time="2023-11-03T13:55:13Z" level=debug msg="namespace \"argocd-e2e--test-pruning-required-znhxu\" deleted\n" duration=282.131608ms execID=88ecf
time="2023-11-03T13:55:13Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=af24b
time="2023-11-03T13:55:13Z" level=debug msg="No resources found\n" duration=346.287197ms execID=af24b
time="2023-11-03T13:55:13Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=faa24
time="2023-11-03T13:55:13Z" level=debug msg="No resources found\n" duration=254.126427ms execID=faa24
time="2023-11-03T13:55:14Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:55:14Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjExNCwibmJmIjoxNjk5MDE5NzE0LCJpYXQiOjE2OTkwMTk3MTQsImp0aSI6ImViNzhmOTlmLWRhM2EtNGFlYi04MWM2LTY0Y2NlY2Q3YjU4OCJ9.9Q93pZD4XXpGedbH1x41roA9k0VeFhJTC7WNzIElAjY --insecure" dir= execID=0fb3a
time="2023-11-03T13:55:14Z" level=debug duration=73.528967ms execID=0fb3a
time="2023-11-03T13:55:14Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=79b4b
time="2023-11-03T13:55:14Z" level=debug duration=1.905294ms execID=79b4b
time="2023-11-03T13:55:14Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=cd894
time="2023-11-03T13:55:14Z" level=debug duration=1.58648ms execID=cd894
time="2023-11-03T13:55:14Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=f9265
time="2023-11-03T13:55:14Z" level=debug duration=1.478099ms execID=f9265
time="2023-11-03T13:55:14Z" level=info msg="pkill -9 gpg-agent" dir= execID=00c14
time="2023-11-03T13:55:14Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=e9214
time="2023-11-03T13:55:14Z" level=debug duration=9.976026ms execID=e9214
time="2023-11-03T13:55:14Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=50986
time="2023-11-03T13:55:15Z" level=debug duration=42.683475ms execID=50986
time="2023-11-03T13:55:15Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=3b44a
time="2023-11-03T13:55:15Z" level=debug duration=1.938457ms execID=3b44a
time="2023-11-03T13:55:15Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=d73de
time="2023-11-03T13:55:15Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.953314ms execID=d73de
time="2023-11-03T13:55:15Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=de47a
time="2023-11-03T13:55:15Z" level=debug duration=26.894356ms execID=de47a
time="2023-11-03T13:55:15Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=d2537
time="2023-11-03T13:55:15Z" level=debug duration=22.219114ms execID=d2537
time="2023-11-03T13:55:15Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=06df2
time="2023-11-03T13:55:15Z" level=debug duration=2.289531ms execID=06df2
time="2023-11-03T13:55:15Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=a674e
Handling connection for 9081
time="2023-11-03T13:55:15Z" level=debug duration=71.207517ms execID=a674e
time="2023-11-03T13:55:15Z" level=info msg="kubectl create ns argocd-e2e--test-cannot-add-app-from-private-repo-without-tqqgk" dir= execID=3d3fc
time="2023-11-03T13:55:15Z" level=debug msg="namespace/argocd-e2e--test-cannot-add-app-from-private-repo-without-tqqgk created\n" duration=180.020005ms execID=3d3fc
time="2023-11-03T13:55:15Z" level=info msg="kubectl label ns argocd-e2e--test-cannot-add-app-from-private-repo-without-tqqgk e2e.argoproj.io=true" dir= execID=362d8
time="2023-11-03T13:55:15Z" level=debug msg="namespace/argocd-e2e--test-cannot-add-app-from-private-repo-without-tqqgk labeled\n" duration=289.415748ms execID=362d8
time="2023-11-03T13:55:15Z" level=info msg="clean state" duration=2.631161997s id=TestCannotAddAppFromPrivateRepoWithoutCfg-tqqgk name=TestCannotAddAppFromPrivateRepoWithoutCfg password=password username=admin
time="2023-11-03T13:55:16Z" level=info msg="../../dist/argocd app create test-cannot-add-app-from-private-repo-without-cfg --repo https://argocd-e2e-server:9443/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-cannot-add-app-from-private-repo-without-tqqgk --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjExNCwibmJmIjoxNjk5MDE5NzE0LCJpYXQiOjE2OTkwMTk3MTQsImp0aSI6ImViNzhmOTlmLWRhM2EtNGFlYi04MWM2LTY0Y2NlY2Q3YjU4OCJ9.9Q93pZD4XXpGedbH1x41roA9k0VeFhJTC7WNzIElAjY --insecure" dir= execID=fbb06
time="2023-11-03T13:55:16Z" level=debug duration=111.742907ms execID=fbb06
time="2023-11-03T13:55:16Z" level=error msg="`../../dist/argocd app create test-cannot-add-app-from-private-repo-without-cfg --repo https://argocd-e2e-server:9443/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-cannot-add-app-from-private-repo-without-tqqgk --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjExNCwibmJmIjoxNjk5MDE5NzE0LCJpYXQiOjE2OTkwMTk3MTQsImp0aSI6ImViNzhmOTlmLWRhM2EtNGFlYi04MWM2LTY0Y2NlY2Q3YjU4OCJ9.9Q93pZD4XXpGedbH1x41roA9k0VeFhJTC7WNzIElAjY --insecure` failed exit status 20: time=\"2023-11-03T13:55:16Z\" level=fatal msg=\"rpc error: code = InvalidArgument desc = application spec for test-cannot-add-app-from-private-repo-without-cfg is invalid: InvalidSpecError: repository not accessible: repositories not accessible: &Repository{Repo: \\\"https://argocd-e2e-server:9443/argo-e2e/testdata.git\\\", Type: \\\"\\\", Name: \\\"\\\", Project: \\\"\\\"}: repo client error while testing repository: rpc error: code = Unknown desc = error testing repository connectivity: authentication required\"" execID=fbb06
time="2023-11-03T13:55:16Z" level=info msg="expectation succeeded: error ''"
time="2023-11-03T13:55:16Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCannotAddAppFromPrivateRepoWithoutCfg (3.74s)
=== RUN   TestCannotAddAppFromClientCertRepoWithoutCfg
time="2023-11-03T13:55:16Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=75b94
time="2023-11-03T13:55:17Z" level=debug msg="namespace \"argocd-e2e--test-cannot-add-app-from-private-repo-without-tqqgk\" deleted\n" duration=253.92679ms execID=75b94
time="2023-11-03T13:55:17Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=f2a71
time="2023-11-03T13:55:17Z" level=debug msg="No resources found\n" duration=362.898966ms execID=f2a71
time="2023-11-03T13:55:17Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=972a4
time="2023-11-03T13:55:17Z" level=debug msg="No resources found\n" duration=213.854475ms execID=972a4
time="2023-11-03T13:55:18Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:55:18Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjExOCwibmJmIjoxNjk5MDE5NzE4LCJpYXQiOjE2OTkwMTk3MTgsImp0aSI6ImNmM2QwZjE0LTI4OWMtNDVhMC05M2ZlLWQ0ZmEwMTc2MmIwZSJ9.4ERo6wJdkFBVGG6tiFiSau1tgEnzXB4xiOrEejZMdBA --insecure" dir= execID=5b39a
time="2023-11-03T13:55:18Z" level=debug duration=80.661827ms execID=5b39a
time="2023-11-03T13:55:18Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=5f8c7
time="2023-11-03T13:55:18Z" level=debug duration=2.066053ms execID=5f8c7
time="2023-11-03T13:55:18Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=20cd7
time="2023-11-03T13:55:18Z" level=debug duration=38.89199ms execID=20cd7
time="2023-11-03T13:55:18Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=20165
time="2023-11-03T13:55:18Z" level=debug duration=1.947513ms execID=20165
time="2023-11-03T13:55:18Z" level=info msg="pkill -9 gpg-agent" dir= execID=b09b0
time="2023-11-03T13:55:18Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=bb839
time="2023-11-03T13:55:18Z" level=debug duration=10.124967ms execID=bb839
time="2023-11-03T13:55:18Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=42695
time="2023-11-03T13:55:18Z" level=debug duration=36.372334ms execID=42695
time="2023-11-03T13:55:18Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=e6f78
time="2023-11-03T13:55:18Z" level=debug duration=1.959345ms execID=e6f78
time="2023-11-03T13:55:18Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=03ead
time="2023-11-03T13:55:18Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.510861ms execID=03ead
time="2023-11-03T13:55:18Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=48e8b
time="2023-11-03T13:55:18Z" level=debug duration=25.315648ms execID=48e8b
time="2023-11-03T13:55:18Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=1e74e
time="2023-11-03T13:55:18Z" level=debug duration=29.183408ms execID=1e74e
time="2023-11-03T13:55:18Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=7b220
time="2023-11-03T13:55:18Z" level=debug duration=2.382495ms execID=7b220
time="2023-11-03T13:55:18Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=a66f8
Handling connection for 9081
time="2023-11-03T13:55:18Z" level=debug duration=60.859836ms execID=a66f8
time="2023-11-03T13:55:18Z" level=info msg="kubectl create ns argocd-e2e--test-cannot-add-app-from-client-cert-repo-wit-kgcge" dir= execID=55bed
time="2023-11-03T13:55:19Z" level=debug msg="namespace/argocd-e2e--test-cannot-add-app-from-client-cert-repo-wit-kgcge created\n" duration=167.131454ms execID=55bed
time="2023-11-03T13:55:19Z" level=info msg="kubectl label ns argocd-e2e--test-cannot-add-app-from-client-cert-repo-wit-kgcge e2e.argoproj.io=true" dir= execID=f3250
time="2023-11-03T13:55:19Z" level=debug msg="namespace/argocd-e2e--test-cannot-add-app-from-client-cert-repo-wit-kgcge labeled\n" duration=357.950812ms execID=f3250
time="2023-11-03T13:55:19Z" level=info msg="clean state" duration=2.671392944s id=TestCannotAddAppFromClientCertRepoWithoutCfg-kgcge name=TestCannotAddAppFromClientCertRepoWithoutCfg password=password username=admin
time="2023-11-03T13:55:20Z" level=info msg="../../dist/argocd app create test-cannot-add-app-from-client-cert-repo-without-cfg --repo https://argocd-e2e-server:9444/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-cannot-add-app-from-client-cert-repo-wit-kgcge --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjExOCwibmJmIjoxNjk5MDE5NzE4LCJpYXQiOjE2OTkwMTk3MTgsImp0aSI6ImNmM2QwZjE0LTI4OWMtNDVhMC05M2ZlLWQ0ZmEwMTc2MmIwZSJ9.4ERo6wJdkFBVGG6tiFiSau1tgEnzXB4xiOrEejZMdBA --insecure" dir= execID=80d30
time="2023-11-03T13:55:20Z" level=debug duration=101.636226ms execID=80d30
time="2023-11-03T13:55:20Z" level=error msg="`../../dist/argocd app create test-cannot-add-app-from-client-cert-repo-without-cfg --repo https://argocd-e2e-server:9444/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-cannot-add-app-from-client-cert-repo-wit-kgcge --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjExOCwibmJmIjoxNjk5MDE5NzE4LCJpYXQiOjE2OTkwMTk3MTgsImp0aSI6ImNmM2QwZjE0LTI4OWMtNDVhMC05M2ZlLWQ0ZmEwMTc2MmIwZSJ9.4ERo6wJdkFBVGG6tiFiSau1tgEnzXB4xiOrEejZMdBA --insecure` failed exit status 20: time=\"2023-11-03T13:55:20Z\" level=fatal msg=\"rpc error: code = InvalidArgument desc = application spec for test-cannot-add-app-from-client-cert-repo-without-cfg is invalid: InvalidSpecError: repository not accessible: repositories not accessible: &Repository{Repo: \\\"https://argocd-e2e-server:9444/argo-e2e/testdata.git\\\", Type: \\\"\\\", Name: \\\"\\\", Project: \\\"\\\"}: repo client error while testing repository: rpc error: code = Unknown desc = error testing repository connectivity: unexpected client error: unexpected requesting \\\"https://argocd-e2e-server:9444/argo-e2e/testdata.git/info/refs?service=git-upload-pack\\\" status code: 400\"" execID=80d30
time="2023-11-03T13:55:20Z" level=info msg="expectation succeeded: error ''"
time="2023-11-03T13:55:20Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCannotAddAppFromClientCertRepoWithoutCfg (3.77s)
=== RUN   TestCanAddAppFromPrivateRepoWithRepoCfg
time="2023-11-03T13:55:20Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=684ea
time="2023-11-03T13:55:20Z" level=debug msg="namespace \"argocd-e2e--test-cannot-add-app-from-client-cert-repo-wit-kgcge\" deleted\n" duration=275.129288ms execID=684ea
time="2023-11-03T13:55:20Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=434d2
time="2023-11-03T13:55:21Z" level=debug msg="No resources found\n" duration=538.387927ms execID=434d2
time="2023-11-03T13:55:21Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=e0842
time="2023-11-03T13:55:21Z" level=debug msg="No resources found\n" duration=246.405963ms execID=e0842
time="2023-11-03T13:55:22Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:55:22Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjEyMiwibmJmIjoxNjk5MDE5NzIyLCJpYXQiOjE2OTkwMTk3MjIsImp0aSI6IjZiOTFlZTMzLTNjMzctNDkxOC1hNDMyLTM4MmQ5MmY5NjMxMSJ9.edVmQ87WzK8d14da9mJkZNtCRpuWYvCR-fFnnAmNWlY --insecure" dir= execID=4922d
time="2023-11-03T13:55:22Z" level=debug duration=74.705876ms execID=4922d
time="2023-11-03T13:55:22Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=c1f38
time="2023-11-03T13:55:22Z" level=debug duration=2.250953ms execID=c1f38
time="2023-11-03T13:55:22Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=2637b
time="2023-11-03T13:55:22Z" level=debug duration=1.581224ms execID=2637b
time="2023-11-03T13:55:22Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=342a5
time="2023-11-03T13:55:22Z" level=debug duration=1.714055ms execID=342a5
time="2023-11-03T13:55:22Z" level=info msg="pkill -9 gpg-agent" dir= execID=46f37
time="2023-11-03T13:55:22Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=d4592
time="2023-11-03T13:55:22Z" level=debug duration=10.309873ms execID=d4592
time="2023-11-03T13:55:22Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=e5c42
time="2023-11-03T13:55:22Z" level=debug duration=35.932246ms execID=e5c42
time="2023-11-03T13:55:22Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=e678d
time="2023-11-03T13:55:22Z" level=debug duration=1.974104ms execID=e678d
time="2023-11-03T13:55:22Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=b35a0
time="2023-11-03T13:55:22Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.896305ms execID=b35a0
time="2023-11-03T13:55:22Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=f876f
time="2023-11-03T13:55:22Z" level=debug duration=26.323784ms execID=f876f
time="2023-11-03T13:55:22Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=9f7a9
time="2023-11-03T13:55:22Z" level=debug duration=25.094855ms execID=9f7a9
time="2023-11-03T13:55:22Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=d389d
time="2023-11-03T13:55:22Z" level=debug duration=2.251541ms execID=d389d
time="2023-11-03T13:55:22Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=de27d
Handling connection for 9081
time="2023-11-03T13:55:22Z" level=debug duration=61.208026ms execID=de27d
time="2023-11-03T13:55:22Z" level=info msg="kubectl create ns argocd-e2e--test-can-add-app-from-private-repo-with-repo--jtbbj" dir= execID=49117
time="2023-11-03T13:55:22Z" level=debug msg="namespace/argocd-e2e--test-can-add-app-from-private-repo-with-repo--jtbbj created\n" duration=170.530933ms execID=49117
time="2023-11-03T13:55:22Z" level=info msg="kubectl label ns argocd-e2e--test-can-add-app-from-private-repo-with-repo--jtbbj e2e.argoproj.io=true" dir= execID=082eb
time="2023-11-03T13:55:23Z" level=debug msg="namespace/argocd-e2e--test-can-add-app-from-private-repo-with-repo--jtbbj labeled\n" duration=281.90457ms execID=082eb
time="2023-11-03T13:55:23Z" level=info msg="clean state" duration=2.631361683s id=TestCanAddAppFromPrivateRepoWithRepoCfg-jtbbj name=TestCanAddAppFromPrivateRepoWithRepoCfg password=password username=admin
time="2023-11-03T13:55:23Z" level=info msg="../../dist/argocd repo add https://argocd-e2e-server:9443/argo-e2e/testdata.git --username admin --password password --insecure-skip-server-verification --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjEyMiwibmJmIjoxNjk5MDE5NzIyLCJpYXQiOjE2OTkwMTk3MjIsImp0aSI6IjZiOTFlZTMzLTNjMzctNDkxOC1hNDMyLTM4MmQ5MmY5NjMxMSJ9.edVmQ87WzK8d14da9mJkZNtCRpuWYvCR-fFnnAmNWlY --insecure" dir= execID=4279d
time="2023-11-03T13:55:23Z" level=debug msg="Repository 'https://argocd-e2e-server:9443/argo-e2e/testdata.git' added\n" duration=272.913941ms execID=4279d
time="2023-11-03T13:55:24Z" level=info msg="../../dist/argocd app create test-can-add-app-from-private-repo-with-repo-cfg --repo https://argocd-e2e-server:9443/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path https-kustomize-base/remote --project default --dest-namespace argocd-e2e--test-can-add-app-from-private-repo-with-repo--jtbbj --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjEyMiwibmJmIjoxNjk5MDE5NzIyLCJpYXQiOjE2OTkwMTk3MjIsImp0aSI6IjZiOTFlZTMzLTNjMzctNDkxOC1hNDMyLTM4MmQ5MmY5NjMxMSJ9.edVmQ87WzK8d14da9mJkZNtCRpuWYvCR-fFnnAmNWlY --insecure" dir= execID=6ed2b
time="2023-11-03T13:55:25Z" level=debug msg="application 'test-can-add-app-from-private-repo-with-repo-cfg' created\n" duration=958.787911ms execID=6ed2b
time="2023-11-03T13:55:25Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:55:25Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:55:25Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCanAddAppFromPrivateRepoWithRepoCfg (4.87s)
=== RUN   TestCanAddAppFromInsecurePrivateRepoWithCredCfg
time="2023-11-03T13:55:25Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=446b6
time="2023-11-03T13:55:25Z" level=debug msg="namespace \"argocd-e2e--test-can-add-app-from-private-repo-with-repo--jtbbj\" deleted\n" duration=196.726269ms execID=446b6
time="2023-11-03T13:55:25Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=1a788
time="2023-11-03T13:55:26Z" level=debug msg="No resources found\n" duration=442.899342ms execID=1a788
time="2023-11-03T13:55:26Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=d7b15
time="2023-11-03T13:55:26Z" level=debug msg="No resources found\n" duration=234.889762ms execID=d7b15
time="2023-11-03T13:55:27Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:55:27Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjEyNywibmJmIjoxNjk5MDE5NzI3LCJpYXQiOjE2OTkwMTk3MjcsImp0aSI6IjJkY2RmMWJlLTg3NzMtNDYwYS1iNTIzLTdlMWM0MmNjNDc5NSJ9.Fqyh6IO00WPwJSyg_C6kAep2yHlat90VTbvyEW7a8nA --insecure" dir= execID=082fc
time="2023-11-03T13:55:27Z" level=debug duration=85.38886ms execID=082fc
time="2023-11-03T13:55:27Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=7d9ca
time="2023-11-03T13:55:27Z" level=debug duration=2.074991ms execID=7d9ca
time="2023-11-03T13:55:27Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=083d1
time="2023-11-03T13:55:27Z" level=debug duration=2.035615ms execID=083d1
time="2023-11-03T13:55:27Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=0943e
time="2023-11-03T13:55:27Z" level=debug duration=1.635124ms execID=0943e
time="2023-11-03T13:55:27Z" level=info msg="pkill -9 gpg-agent" dir= execID=05996
time="2023-11-03T13:55:27Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=069f7
time="2023-11-03T13:55:27Z" level=debug duration=9.536882ms execID=069f7
time="2023-11-03T13:55:27Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=87e5d
time="2023-11-03T13:55:27Z" level=debug duration=32.918221ms execID=87e5d
time="2023-11-03T13:55:27Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=cc784
time="2023-11-03T13:55:27Z" level=debug duration=1.554935ms execID=cc784
time="2023-11-03T13:55:27Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=9ac0d
time="2023-11-03T13:55:27Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=14.882641ms execID=9ac0d
time="2023-11-03T13:55:27Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=bffa8
time="2023-11-03T13:55:27Z" level=debug duration=27.627636ms execID=bffa8
time="2023-11-03T13:55:27Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=ca991
time="2023-11-03T13:55:27Z" level=debug duration=23.254726ms execID=ca991
time="2023-11-03T13:55:27Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=5fd35
time="2023-11-03T13:55:27Z" level=debug duration=2.218683ms execID=5fd35
time="2023-11-03T13:55:27Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=5218d
Handling connection for 9081
time="2023-11-03T13:55:27Z" level=debug duration=81.15435ms execID=5218d
time="2023-11-03T13:55:27Z" level=info msg="kubectl create ns argocd-e2e--test-can-add-app-from-insecure-private-repo-w-qlzrx" dir= execID=0e525
time="2023-11-03T13:55:27Z" level=debug msg="namespace/argocd-e2e--test-can-add-app-from-insecure-private-repo-w-qlzrx created\n" duration=184.994074ms execID=0e525
time="2023-11-03T13:55:27Z" level=info msg="kubectl label ns argocd-e2e--test-can-add-app-from-insecure-private-repo-w-qlzrx e2e.argoproj.io=true" dir= execID=cfe08
time="2023-11-03T13:55:27Z" level=debug msg="namespace/argocd-e2e--test-can-add-app-from-insecure-private-repo-w-qlzrx labeled\n" duration=303.707457ms execID=cfe08
time="2023-11-03T13:55:27Z" level=info msg="clean state" duration=2.558059108s id=TestCanAddAppFromInsecurePrivateRepoWithCredCfg-qlzrx name=TestCanAddAppFromInsecurePrivateRepoWithCredCfg password=password username=admin
time="2023-11-03T13:55:27Z" level=info msg="../../dist/argocd cert add-tls argocd-e2e-server --from /argocd-e2e/argo-cd/test/fixture/certs/argocd-test-ca.crt --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjEyNywibmJmIjoxNjk5MDE5NzI3LCJpYXQiOjE2OTkwMTk3MjcsImp0aSI6IjJkY2RmMWJlLTg3NzMtNDYwYS1iNTIzLTdlMWM0MmNjNDc5NSJ9.Fqyh6IO00WPwJSyg_C6kAep2yHlat90VTbvyEW7a8nA --insecure" dir= execID=c6c30
time="2023-11-03T13:55:28Z" level=debug msg="Reading TLS certificate data in PEM format from '/argocd-e2e/argo-cd/test/fixture/certs/argocd-test-ca.crt'\nCreated entry with 0 PEM certificates for repository server argocd-e2e-server\n" duration=110.14845ms execID=c6c30
time="2023-11-03T13:55:28Z" level=info msg="Waiting for API server to restart"
time="2023-11-03T13:55:28Z" level=info msg="kubectl rollout restart deployment argocd-test-server" dir= execID=d1315
time="2023-11-03T13:55:28Z" level=debug msg="deployment.apps/argocd-test-server restarted\n" duration=419.272461ms execID=d1315
time="2023-11-03T13:55:28Z" level=info msg="kubectl rollout status deployment argocd-test-server" dir= execID=be004
time="2023-11-03T13:55:58Z" level=debug msg="Waiting for deployment \"argocd-test-server\" rollout to finish: 1 old replicas are pending termination...\nWaiting for deployment \"argocd-test-server\" rollout to finish: 1 old replicas are pending termination...\ndeployment \"argocd-test-server\" successfully rolled out\n" duration=30.436838479s execID=be004
time="2023-11-03T13:55:58Z" level=info msg="Waiting for repo server to restart"
time="2023-11-03T13:55:58Z" level=info msg="kubectl rollout restart deployment argocd-test-repo-server" dir= execID=3fbeb
time="2023-11-03T13:55:59Z" level=debug msg="deployment.apps/argocd-test-repo-server restarted\n" duration=413.127877ms execID=3fbeb
time="2023-11-03T13:55:59Z" level=info msg="kubectl rollout status deployment argocd-test-repo-server" dir= execID=27c66
time="2023-11-03T13:56:09Z" level=debug msg="Waiting for deployment \"argocd-test-repo-server\" rollout to finish: 1 old replicas are pending termination...\nWaiting for deployment \"argocd-test-repo-server\" rollout to finish: 1 old replicas are pending termination...\ndeployment \"argocd-test-repo-server\" successfully rolled out\n" duration=10.400540551s execID=27c66
time="2023-11-03T13:56:19Z" level=info msg="kubectl create secret generic argocd-e2e-test-can-add-app-from-insecure-private-repo-with-cred-cfg --from-literal=username=admin --from-literal=password=password -n argocd-e2e" dir= execID=cff6f
time="2023-11-03T13:56:19Z" level=debug msg="secret/argocd-e2e-test-can-add-app-from-insecure-private-repo-with-cred-cfg created\n" duration=133.304477ms execID=cff6f
time="2023-11-03T13:56:19Z" level=info msg="kubectl label secret argocd-e2e-test-can-add-app-from-insecure-private-repo-with-cred-cfg e2e.argoproj.io=true -n argocd-e2e" dir= execID=dbd71
time="2023-11-03T13:56:20Z" level=debug msg="secret/argocd-e2e-test-can-add-app-from-insecure-private-repo-with-cred-cfg labeled\n" duration=305.476419ms execID=dbd71
time="2023-11-03T13:56:20Z" level=info msg="kubectl patch cm argocd-cm -n argocd-e2e -p {\"data\": {\"repository.credentials\": \"- passwordSecret:\\n    key: password\\n    name: argocd-e2e-test-can-add-app-from-insecure-private-repo-with-cred-cfg\\n  url: https://argocd-e2e-server:9443/argo-e2e/testdata.git\\n  insecure: true\\n  usernameSecret:\\n    key: username\\n    name: argocd-e2e-test-can-add-app-from-insecure-private-repo-with-cred-cfg\\n\"}}" dir= execID=35b67
time="2023-11-03T13:56:20Z" level=debug msg="configmap/argocd-cm patched\n" duration=307.352917ms execID=35b67
time="2023-11-03T13:56:21Z" level=info msg="../../dist/argocd app create test-can-add-app-from-insecure-private-repo-with-cred-cfg --repo https://argocd-e2e-server:9443/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path https-kustomize-base/remote --project default --dest-namespace argocd-e2e--test-can-add-app-from-insecure-private-repo-w-qlzrx --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjEyNywibmJmIjoxNjk5MDE5NzI3LCJpYXQiOjE2OTkwMTk3MjcsImp0aSI6IjJkY2RmMWJlLTg3NzMtNDYwYS1iNTIzLTdlMWM0MmNjNDc5NSJ9.Fqyh6IO00WPwJSyg_C6kAep2yHlat90VTbvyEW7a8nA --insecure" dir= execID=23432
time="2023-11-03T13:56:22Z" level=debug msg="application 'test-can-add-app-from-insecure-private-repo-with-cred-cfg' created\n" duration=597.215377ms execID=23432
time="2023-11-03T13:56:22Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:56:22Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:56:22Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCanAddAppFromInsecurePrivateRepoWithCredCfg (56.69s)
=== RUN   TestCanAddAppFromPrivateRepoWithCredCfg
time="2023-11-03T13:56:22Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=c5d95
time="2023-11-03T13:56:22Z" level=debug msg="namespace \"argocd-e2e--test-can-add-app-from-insecure-private-repo-w-qlzrx\" deleted\n" duration=291.422672ms execID=c5d95
time="2023-11-03T13:56:22Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=cd844
time="2023-11-03T13:56:22Z" level=debug msg="No resources found\n" duration=387.186332ms execID=cd844
time="2023-11-03T13:56:22Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=0c32a
time="2023-11-03T13:56:23Z" level=debug msg="No resources found\n" duration=249.906767ms execID=0c32a
time="2023-11-03T13:56:23Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:56:23Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjE4MywibmJmIjoxNjk5MDE5NzgzLCJpYXQiOjE2OTkwMTk3ODMsImp0aSI6IjQ4ZTIyN2U4LTVhMmMtNDdhYy04ZTczLWJkNjI3MzNmMGUwMCJ9.lDkDRYg_LRtwlk4nzlvwHjzkij--HNtQAHz4lXqNkgk --insecure" dir= execID=e9e7c
time="2023-11-03T13:56:23Z" level=debug duration=81.062322ms execID=e9e7c
time="2023-11-03T13:56:23Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=b2054
time="2023-11-03T13:56:23Z" level=debug duration=2.026404ms execID=b2054
time="2023-11-03T13:56:23Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=e7d21
time="2023-11-03T13:56:23Z" level=debug duration=1.660165ms execID=e7d21
time="2023-11-03T13:56:23Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=31f9d
time="2023-11-03T13:56:23Z" level=debug duration=1.555419ms execID=31f9d
time="2023-11-03T13:56:23Z" level=info msg="pkill -9 gpg-agent" dir= execID=2fdfc
time="2023-11-03T13:56:23Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=1cd3c
time="2023-11-03T13:56:23Z" level=debug duration=10.145042ms execID=1cd3c
time="2023-11-03T13:56:23Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=51295
time="2023-11-03T13:56:23Z" level=debug duration=34.906672ms execID=51295
time="2023-11-03T13:56:23Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=7d1e2
time="2023-11-03T13:56:23Z" level=debug duration=1.993357ms execID=7d1e2
time="2023-11-03T13:56:23Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=8736f
time="2023-11-03T13:56:23Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=10.372788ms execID=8736f
time="2023-11-03T13:56:23Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=bfc1c
time="2023-11-03T13:56:23Z" level=debug duration=26.748484ms execID=bfc1c
time="2023-11-03T13:56:23Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=6406d
time="2023-11-03T13:56:23Z" level=debug duration=21.132634ms execID=6406d
time="2023-11-03T13:56:23Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=718e3
time="2023-11-03T13:56:23Z" level=debug duration=2.114969ms execID=718e3
time="2023-11-03T13:56:23Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=7aa88
Handling connection for 9081
time="2023-11-03T13:56:24Z" level=debug duration=83.967955ms execID=7aa88
time="2023-11-03T13:56:24Z" level=info msg="kubectl create ns argocd-e2e--test-can-add-app-from-private-repo-with-cred--kdzii" dir= execID=60ddc
time="2023-11-03T13:56:24Z" level=debug msg="namespace/argocd-e2e--test-can-add-app-from-private-repo-with-cred--kdzii created\n" duration=164.821648ms execID=60ddc
time="2023-11-03T13:56:24Z" level=info msg="kubectl label ns argocd-e2e--test-can-add-app-from-private-repo-with-cred--kdzii e2e.argoproj.io=true" dir= execID=7238a
time="2023-11-03T13:56:24Z" level=debug msg="namespace/argocd-e2e--test-can-add-app-from-private-repo-with-cred--kdzii labeled\n" duration=304.032435ms execID=7238a
time="2023-11-03T13:56:24Z" level=info msg="clean state" duration=2.445298868s id=TestCanAddAppFromPrivateRepoWithCredCfg-kdzii name=TestCanAddAppFromPrivateRepoWithCredCfg password=password username=admin
time="2023-11-03T13:56:24Z" level=info msg="../../dist/argocd cert add-tls argocd-e2e-server --from /argocd-e2e/argo-cd/test/fixture/certs/argocd-test-ca.crt --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjE4MywibmJmIjoxNjk5MDE5NzgzLCJpYXQiOjE2OTkwMTk3ODMsImp0aSI6IjQ4ZTIyN2U4LTVhMmMtNDdhYy04ZTczLWJkNjI3MzNmMGUwMCJ9.lDkDRYg_LRtwlk4nzlvwHjzkij--HNtQAHz4lXqNkgk --insecure" dir= execID=13740
time="2023-11-03T13:56:24Z" level=debug msg="Reading TLS certificate data in PEM format from '/argocd-e2e/argo-cd/test/fixture/certs/argocd-test-ca.crt'\nCreated entry with 0 PEM certificates for repository server argocd-e2e-server\n" duration=129.986695ms execID=13740
time="2023-11-03T13:56:24Z" level=info msg="Waiting for API server to restart"
time="2023-11-03T13:56:24Z" level=info msg="kubectl rollout restart deployment argocd-test-server" dir= execID=60f4b
time="2023-11-03T13:56:24Z" level=debug msg="deployment.apps/argocd-test-server restarted\n" duration=286.726768ms execID=60f4b
time="2023-11-03T13:56:24Z" level=info msg="kubectl rollout status deployment argocd-test-server" dir= execID=a8984
time="2023-11-03T13:56:55Z" level=debug msg="Waiting for deployment \"argocd-test-server\" rollout to finish: 1 old replicas are pending termination...\nWaiting for deployment \"argocd-test-server\" rollout to finish: 1 old replicas are pending termination...\ndeployment \"argocd-test-server\" successfully rolled out\n" duration=30.435276274s execID=a8984
time="2023-11-03T13:56:55Z" level=info msg="Waiting for repo server to restart"
time="2023-11-03T13:56:55Z" level=info msg="kubectl rollout restart deployment argocd-test-repo-server" dir= execID=3d7e2
time="2023-11-03T13:56:55Z" level=debug msg="deployment.apps/argocd-test-repo-server restarted\n" duration=248.701044ms execID=3d7e2
time="2023-11-03T13:56:55Z" level=info msg="kubectl rollout status deployment argocd-test-repo-server" dir= execID=c7c94
time="2023-11-03T13:57:06Z" level=debug msg="Waiting for deployment \"argocd-test-repo-server\" rollout to finish: 1 old replicas are pending termination...\nWaiting for deployment \"argocd-test-repo-server\" rollout to finish: 1 old replicas are pending termination...\ndeployment \"argocd-test-repo-server\" successfully rolled out\n" duration=10.468818151s execID=c7c94
time="2023-11-03T13:57:16Z" level=info msg="../../dist/argocd repocreds add https://argocd-e2e-server:9443/argo-e2e/testdata.git --username admin --password password --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjE4MywibmJmIjoxNjk5MDE5NzgzLCJpYXQiOjE2OTkwMTk3ODMsImp0aSI6IjQ4ZTIyN2U4LTVhMmMtNDdhYy04ZTczLWJkNjI3MzNmMGUwMCJ9.lDkDRYg_LRtwlk4nzlvwHjzkij--HNtQAHz4lXqNkgk --insecure" dir= execID=8bc72
time="2023-11-03T13:57:16Z" level=debug msg="Repository credentials for 'https://argocd-e2e-server:9443/argo-e2e/testdata.git' added\n" duration=176.020243ms execID=8bc72
time="2023-11-03T13:57:16Z" level=info msg="../../dist/argocd repo add https://argocd-e2e-server:9443/argo-e2e/testdata.git --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjE4MywibmJmIjoxNjk5MDE5NzgzLCJpYXQiOjE2OTkwMTk3ODMsImp0aSI6IjQ4ZTIyN2U4LTVhMmMtNDdhYy04ZTczLWJkNjI3MzNmMGUwMCJ9.lDkDRYg_LRtwlk4nzlvwHjzkij--HNtQAHz4lXqNkgk --insecure" dir= execID=f79a3
time="2023-11-03T13:57:16Z" level=debug msg="Repository 'https://argocd-e2e-server:9443/argo-e2e/testdata.git' added\n" duration=222.855962ms execID=f79a3
time="2023-11-03T13:57:16Z" level=info msg="kubectl create secret generic argocd-e2e-test-can-add-app-from-private-repo-with-cred-cfg --from-literal=username=admin --from-literal=password=password -n argocd-e2e" dir= execID=b1659
time="2023-11-03T13:57:16Z" level=debug msg="secret/argocd-e2e-test-can-add-app-from-private-repo-with-cred-cfg created\n" duration=145.072638ms execID=b1659
time="2023-11-03T13:57:16Z" level=info msg="kubectl label secret argocd-e2e-test-can-add-app-from-private-repo-with-cred-cfg e2e.argoproj.io=true -n argocd-e2e" dir= execID=f5f9c
time="2023-11-03T13:57:16Z" level=debug msg="secret/argocd-e2e-test-can-add-app-from-private-repo-with-cred-cfg labeled\n" duration=300.158873ms execID=f5f9c
time="2023-11-03T13:57:16Z" level=info msg="kubectl patch cm argocd-cm -n argocd-e2e -p {\"data\": {\"repository.credentials\": \"- passwordSecret:\\n    key: password\\n    name: argocd-e2e-test-can-add-app-from-private-repo-with-cred-cfg\\n  url: https://argocd-e2e-server:9443/argo-e2e/testdata.git\\n  usernameSecret:\\n    key: username\\n    name: argocd-e2e-test-can-add-app-from-private-repo-with-cred-cfg\\n\"}}" dir= execID=16923
time="2023-11-03T13:57:17Z" level=debug msg="configmap/argocd-cm patched\n" duration=302.994615ms execID=16923
time="2023-11-03T13:57:18Z" level=info msg="../../dist/argocd app create test-can-add-app-from-private-repo-with-cred-cfg --repo https://argocd-e2e-server:9443/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path https-kustomize-base/remote --project default --dest-namespace argocd-e2e--test-can-add-app-from-private-repo-with-cred--kdzii --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjE4MywibmJmIjoxNjk5MDE5NzgzLCJpYXQiOjE2OTkwMTk3ODMsImp0aSI6IjQ4ZTIyN2U4LTVhMmMtNDdhYy04ZTczLWJkNjI3MzNmMGUwMCJ9.lDkDRYg_LRtwlk4nzlvwHjzkij--HNtQAHz4lXqNkgk --insecure" dir= execID=8909e
time="2023-11-03T13:57:19Z" level=debug msg="application 'test-can-add-app-from-private-repo-with-cred-cfg' created\n" duration=967.629173ms execID=8909e
time="2023-11-03T13:57:19Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:57:19Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:57:19Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCanAddAppFromPrivateRepoWithCredCfg (57.14s)
=== RUN   TestCanAddAppFromClientCertRepoWithCredCfg
time="2023-11-03T13:57:19Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=59677
time="2023-11-03T13:57:19Z" level=debug msg="namespace \"argocd-e2e--test-can-add-app-from-private-repo-with-cred--kdzii\" deleted\n" duration=174.613798ms execID=59677
time="2023-11-03T13:57:19Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=02ce7
time="2023-11-03T13:57:19Z" level=debug msg="No resources found\n" duration=453.94554ms execID=02ce7
time="2023-11-03T13:57:19Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=95391
time="2023-11-03T13:57:20Z" level=debug msg="No resources found\n" duration=235.774122ms execID=95391
time="2023-11-03T13:57:20Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:57:20Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjI0MCwibmJmIjoxNjk5MDE5ODQwLCJpYXQiOjE2OTkwMTk4NDAsImp0aSI6ImU0NDQ0YWUyLTgxYWItNGE5Ni1iN2EzLTU1NzhiNjRjNGNmMiJ9.dkUhSSq8KxWTGYaqCxvwpw-YuXhAunygPggD5cJpq-4 --insecure" dir= execID=6c5be
time="2023-11-03T13:57:20Z" level=debug duration=72.589933ms execID=6c5be
time="2023-11-03T13:57:21Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=48e27
time="2023-11-03T13:57:21Z" level=debug duration=2.586221ms execID=48e27
time="2023-11-03T13:57:21Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=57602
time="2023-11-03T13:57:21Z" level=debug duration=1.69827ms execID=57602
time="2023-11-03T13:57:21Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=32560
time="2023-11-03T13:57:21Z" level=debug duration=1.611828ms execID=32560
time="2023-11-03T13:57:21Z" level=info msg="pkill -9 gpg-agent" dir= execID=e52dc
time="2023-11-03T13:57:21Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=bf8ef
time="2023-11-03T13:57:21Z" level=debug duration=9.987585ms execID=bf8ef
time="2023-11-03T13:57:21Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=676d5
time="2023-11-03T13:57:21Z" level=debug duration=33.767798ms execID=676d5
time="2023-11-03T13:57:21Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=51589
time="2023-11-03T13:57:21Z" level=debug duration=1.777794ms execID=51589
time="2023-11-03T13:57:21Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=05ff8
time="2023-11-03T13:57:21Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.012866ms execID=05ff8
time="2023-11-03T13:57:21Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=bcd46
time="2023-11-03T13:57:21Z" level=debug duration=38.10461ms execID=bcd46
time="2023-11-03T13:57:21Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=2f3cc
time="2023-11-03T13:57:21Z" level=debug duration=23.446768ms execID=2f3cc
time="2023-11-03T13:57:21Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=5650f
time="2023-11-03T13:57:21Z" level=debug duration=2.236134ms execID=5650f
time="2023-11-03T13:57:21Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=7bd39
Handling connection for 9081
time="2023-11-03T13:57:21Z" level=debug duration=63.557157ms execID=7bd39
time="2023-11-03T13:57:21Z" level=info msg="kubectl create ns argocd-e2e--test-can-add-app-from-client-cert-repo-with-c-vwuzk" dir= execID=b74a7
time="2023-11-03T13:57:21Z" level=debug msg="namespace/argocd-e2e--test-can-add-app-from-client-cert-repo-with-c-vwuzk created\n" duration=156.394828ms execID=b74a7
time="2023-11-03T13:57:21Z" level=info msg="kubectl label ns argocd-e2e--test-can-add-app-from-client-cert-repo-with-c-vwuzk e2e.argoproj.io=true" dir= execID=18d0d
time="2023-11-03T13:57:21Z" level=debug msg="namespace/argocd-e2e--test-can-add-app-from-client-cert-repo-with-c-vwuzk labeled\n" duration=275.783354ms execID=18d0d
time="2023-11-03T13:57:21Z" level=info msg="clean state" duration=2.427451995s id=TestCanAddAppFromClientCertRepoWithCredCfg-vwuzk name=TestCanAddAppFromClientCertRepoWithCredCfg password=password username=admin
time="2023-11-03T13:57:21Z" level=info msg="../../dist/argocd cert add-tls argocd-e2e-server --from /argocd-e2e/argo-cd/test/fixture/certs/argocd-test-ca.crt --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjI0MCwibmJmIjoxNjk5MDE5ODQwLCJpYXQiOjE2OTkwMTk4NDAsImp0aSI6ImU0NDQ0YWUyLTgxYWItNGE5Ni1iN2EzLTU1NzhiNjRjNGNmMiJ9.dkUhSSq8KxWTGYaqCxvwpw-YuXhAunygPggD5cJpq-4 --insecure" dir= execID=1de88
time="2023-11-03T13:57:21Z" level=debug msg="Reading TLS certificate data in PEM format from '/argocd-e2e/argo-cd/test/fixture/certs/argocd-test-ca.crt'\nCreated entry with 0 PEM certificates for repository server argocd-e2e-server\n" duration=121.630499ms execID=1de88
time="2023-11-03T13:57:21Z" level=info msg="Waiting for API server to restart"
time="2023-11-03T13:57:21Z" level=info msg="kubectl rollout restart deployment argocd-test-server" dir= execID=7edde
time="2023-11-03T13:57:22Z" level=debug msg="deployment.apps/argocd-test-server restarted\n" duration=303.666847ms execID=7edde
time="2023-11-03T13:57:22Z" level=info msg="kubectl rollout status deployment argocd-test-server" dir= execID=25e41
time="2023-11-03T13:57:52Z" level=debug msg="Waiting for deployment \"argocd-test-server\" rollout to finish: 1 old replicas are pending termination...\nWaiting for deployment \"argocd-test-server\" rollout to finish: 1 old replicas are pending termination...\ndeployment \"argocd-test-server\" successfully rolled out\n" duration=30.459737642s execID=25e41
time="2023-11-03T13:57:52Z" level=info msg="Waiting for repo server to restart"
time="2023-11-03T13:57:52Z" level=info msg="kubectl rollout restart deployment argocd-test-repo-server" dir= execID=91930
time="2023-11-03T13:57:52Z" level=debug msg="deployment.apps/argocd-test-repo-server restarted\n" duration=308.171295ms execID=91930
time="2023-11-03T13:57:52Z" level=info msg="kubectl rollout status deployment argocd-test-repo-server" dir= execID=27365
time="2023-11-03T13:58:03Z" level=debug msg="Waiting for deployment \"argocd-test-repo-server\" rollout to finish: 1 old replicas are pending termination...\nWaiting for deployment \"argocd-test-repo-server\" rollout to finish: 1 old replicas are pending termination...\ndeployment \"argocd-test-repo-server\" successfully rolled out\n" duration=10.434676739s execID=27365
time="2023-11-03T13:58:13Z" level=info msg="../../dist/argocd repo add https://argocd-e2e-server:9444/argo-e2e/testdata.git --username admin --password password --tls-client-cert-path /argocd-e2e/argo-cd/test/fixture/certs/argocd-test-client.crt --tls-client-cert-key-path /argocd-e2e/argo-cd/test/fixture/certs/argocd-test-client.key --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjI0MCwibmJmIjoxNjk5MDE5ODQwLCJpYXQiOjE2OTkwMTk4NDAsImp0aSI6ImU0NDQ0YWUyLTgxYWItNGE5Ni1iN2EzLTU1NzhiNjRjNGNmMiJ9.dkUhSSq8KxWTGYaqCxvwpw-YuXhAunygPggD5cJpq-4 --insecure" dir= execID=c972a
time="2023-11-03T13:58:13Z" level=debug msg="Repository 'https://argocd-e2e-server:9444/argo-e2e/testdata.git' added\n" duration=227.832448ms execID=c972a
time="2023-11-03T13:58:13Z" level=info msg="kubectl create secret generic argocd-e2e-test-can-add-app-from-client-cert-repo-with-cred-cfg --from-literal=username=admin --from-literal=password=password -n argocd-e2e" dir= execID=f79a8
time="2023-11-03T13:58:13Z" level=debug msg="secret/argocd-e2e-test-can-add-app-from-client-cert-repo-with-cred-cfg created\n" duration=212.037672ms execID=f79a8
time="2023-11-03T13:58:13Z" level=info msg="kubectl label secret argocd-e2e-test-can-add-app-from-client-cert-repo-with-cred-cfg e2e.argoproj.io=true -n argocd-e2e" dir= execID=6aebc
time="2023-11-03T13:58:13Z" level=debug msg="secret/argocd-e2e-test-can-add-app-from-client-cert-repo-with-cred-cfg labeled\n" duration=229.693648ms execID=6aebc
time="2023-11-03T13:58:13Z" level=info msg="kubectl patch cm argocd-cm -n argocd-e2e -p {\"data\": {\"repository.credentials\": \"- passwordSecret:\\n    key: password\\n    name: argocd-e2e-test-can-add-app-from-client-cert-repo-with-cred-cfg\\n  url: https://argocd-e2e-server:9443/argo-e2e/testdata.git\\n  usernameSecret:\\n    key: username\\n    name: argocd-e2e-test-can-add-app-from-client-cert-repo-with-cred-cfg\\n\"}}" dir= execID=49c3e
time="2023-11-03T13:58:14Z" level=debug msg="configmap/argocd-cm patched\n" duration=394.440317ms execID=49c3e
time="2023-11-03T13:58:15Z" level=info msg="../../dist/argocd app create test-can-add-app-from-client-cert-repo-with-cred-cfg --repo https://argocd-e2e-server:9444/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path https-kustomize-base/remote --project default --dest-namespace argocd-e2e--test-can-add-app-from-client-cert-repo-with-c-vwuzk --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjI0MCwibmJmIjoxNjk5MDE5ODQwLCJpYXQiOjE2OTkwMTk4NDAsImp0aSI6ImU0NDQ0YWUyLTgxYWItNGE5Ni1iN2EzLTU1NzhiNjRjNGNmMiJ9.dkUhSSq8KxWTGYaqCxvwpw-YuXhAunygPggD5cJpq-4 --insecure" dir= execID=88a0c
time="2023-11-03T13:58:15Z" level=debug msg="application 'test-can-add-app-from-client-cert-repo-with-cred-cfg' created\n" duration=562.711166ms execID=88a0c
time="2023-11-03T13:58:15Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:58:15Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T13:58:15Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCanAddAppFromClientCertRepoWithCredCfg (56.69s)
=== RUN   TestAddRemovePublicRepo
time="2023-11-03T13:58:15Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=48b2c
time="2023-11-03T13:58:16Z" level=debug msg="namespace \"argocd-e2e--test-can-add-app-from-client-cert-repo-with-c-vwuzk\" deleted\n" duration=278.583289ms execID=48b2c
time="2023-11-03T13:58:16Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=18455
time="2023-11-03T13:58:16Z" level=debug msg="No resources found\n" duration=503.458911ms execID=18455
time="2023-11-03T13:58:16Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=e9bca
time="2023-11-03T13:58:17Z" level=debug msg="No resources found\n" duration=272.299475ms execID=e9bca
time="2023-11-03T13:58:18Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:58:18Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjI5OCwibmJmIjoxNjk5MDE5ODk4LCJpYXQiOjE2OTkwMTk4OTgsImp0aSI6IjhkMDMxZWVhLTVlNGItNDMzYS1hYzUxLWVkM2I4NDlmM2JmYyJ9.e1UxhbqjjwHikuZHuzEs0cX358RMGZiJod3VuDHU2VI --insecure" dir= execID=2266f
time="2023-11-03T13:58:18Z" level=debug duration=101.410456ms execID=2266f
time="2023-11-03T13:58:18Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=4042e
time="2023-11-03T13:58:18Z" level=debug duration=2.054092ms execID=4042e
time="2023-11-03T13:58:18Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=52857
time="2023-11-03T13:58:18Z" level=debug duration=1.537457ms execID=52857
time="2023-11-03T13:58:18Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=c2ba9
time="2023-11-03T13:58:18Z" level=debug duration=1.706247ms execID=c2ba9
time="2023-11-03T13:58:18Z" level=info msg="pkill -9 gpg-agent" dir= execID=e3ac7
time="2023-11-03T13:58:18Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=dbcb0
time="2023-11-03T13:58:18Z" level=debug duration=10.6375ms execID=dbcb0
time="2023-11-03T13:58:18Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=eb04a
time="2023-11-03T13:58:18Z" level=debug duration=33.840514ms execID=eb04a
time="2023-11-03T13:58:18Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=c6f38
time="2023-11-03T13:58:18Z" level=debug duration=1.694487ms execID=c6f38
time="2023-11-03T13:58:18Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=d486a
time="2023-11-03T13:58:18Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.851196ms execID=d486a
time="2023-11-03T13:58:18Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=0b1ef
time="2023-11-03T13:58:18Z" level=debug duration=31.486667ms execID=0b1ef
time="2023-11-03T13:58:18Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=a836b
time="2023-11-03T13:58:18Z" level=debug duration=23.422577ms execID=a836b
time="2023-11-03T13:58:18Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=16c5c
time="2023-11-03T13:58:18Z" level=debug duration=2.318166ms execID=16c5c
time="2023-11-03T13:58:18Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=612e3
Handling connection for 9081
time="2023-11-03T13:58:18Z" level=debug duration=82.437834ms execID=612e3
time="2023-11-03T13:58:18Z" level=info msg="kubectl create ns argocd-e2e--test-add-remove-public-repo-rnioo" dir= execID=c9280
time="2023-11-03T13:58:18Z" level=debug msg="namespace/argocd-e2e--test-add-remove-public-repo-rnioo created\n" duration=167.261686ms execID=c9280
time="2023-11-03T13:58:18Z" level=info msg="kubectl label ns argocd-e2e--test-add-remove-public-repo-rnioo e2e.argoproj.io=true" dir= execID=c06e6
time="2023-11-03T13:58:18Z" level=debug msg="namespace/argocd-e2e--test-add-remove-public-repo-rnioo labeled\n" duration=303.631467ms execID=c06e6
time="2023-11-03T13:58:18Z" level=info msg="clean state" duration=3.014942305s id=TestAddRemovePublicRepo-rnioo name=TestAddRemovePublicRepo password=password username=admin
time="2023-11-03T13:58:18Z" level=info msg="../../dist/argocd repo add http://argocd-e2e-server:9081/argo-e2e/testdata.git --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjI5OCwibmJmIjoxNjk5MDE5ODk4LCJpYXQiOjE2OTkwMTk4OTgsImp0aSI6IjhkMDMxZWVhLTVlNGItNDMzYS1hYzUxLWVkM2I4NDlmM2JmYyJ9.e1UxhbqjjwHikuZHuzEs0cX358RMGZiJod3VuDHU2VI --insecure" dir= execID=722cd
time="2023-11-03T13:58:19Z" level=debug msg="Repository 'http://argocd-e2e-server:9081/argo-e2e/testdata.git' added\n" duration=257.20896ms execID=722cd
time="2023-11-03T13:58:19Z" level=info msg="../../dist/argocd repo rm http://argocd-e2e-server:9081/argo-e2e/testdata.git --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjI5OCwibmJmIjoxNjk5MDE5ODk4LCJpYXQiOjE2OTkwMTk4OTgsImp0aSI6IjhkMDMxZWVhLTVlNGItNDMzYS1hYzUxLWVkM2I4NDlmM2JmYyJ9.e1UxhbqjjwHikuZHuzEs0cX358RMGZiJod3VuDHU2VI --insecure" dir= execID=4b6d0
time="2023-11-03T13:58:19Z" level=debug msg="Repository 'http://argocd-e2e-server:9081/argo-e2e/testdata.git' removed\n" duration=165.072994ms execID=4b6d0
time="2023-11-03T13:58:19Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestAddRemovePublicRepo (3.47s)
=== RUN   TestGetRepoWithInheritedCreds
time="2023-11-03T13:58:19Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=d8fa5
time="2023-11-03T13:58:19Z" level=debug msg="namespace \"argocd-e2e--test-add-remove-public-repo-rnioo\" deleted\n" duration=305.89658ms execID=d8fa5
time="2023-11-03T13:58:19Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=1b237
time="2023-11-03T13:58:20Z" level=debug msg="No resources found\n" duration=551.241576ms execID=1b237
time="2023-11-03T13:58:20Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=64185
time="2023-11-03T13:58:20Z" level=debug msg="No resources found\n" duration=350.764911ms execID=64185
time="2023-11-03T13:58:21Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:58:21Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjMwMSwibmJmIjoxNjk5MDE5OTAxLCJpYXQiOjE2OTkwMTk5MDEsImp0aSI6ImQ0YTVhNmI5LWY5ZGQtNDg0OC1hZjYxLWIwZTExMmFmNTExMSJ9.5d2QVKN9ME7VmlwReO-w2qaMfditfADobiIXX2PyMaA --insecure" dir= execID=a100e
time="2023-11-03T13:58:21Z" level=debug duration=69.231401ms execID=a100e
time="2023-11-03T13:58:21Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=526fe
time="2023-11-03T13:58:21Z" level=debug duration=2.013229ms execID=526fe
time="2023-11-03T13:58:21Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=7a714
time="2023-11-03T13:58:21Z" level=debug duration=24.131355ms execID=7a714
time="2023-11-03T13:58:21Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=b2424
time="2023-11-03T13:58:21Z" level=debug duration=1.754966ms execID=b2424
time="2023-11-03T13:58:21Z" level=info msg="pkill -9 gpg-agent" dir= execID=81945
time="2023-11-03T13:58:21Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=e6f30
time="2023-11-03T13:58:21Z" level=debug duration=10.094333ms execID=e6f30
time="2023-11-03T13:58:21Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=2ff28
time="2023-11-03T13:58:21Z" level=debug duration=35.595995ms execID=2ff28
time="2023-11-03T13:58:21Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=e9c85
time="2023-11-03T13:58:21Z" level=debug duration=1.906445ms execID=e9c85
time="2023-11-03T13:58:21Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=4943f
time="2023-11-03T13:58:21Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.476861ms execID=4943f
time="2023-11-03T13:58:21Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=47beb
time="2023-11-03T13:58:21Z" level=debug duration=25.547256ms execID=47beb
time="2023-11-03T13:58:21Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=3ae49
time="2023-11-03T13:58:21Z" level=debug duration=31.278213ms execID=3ae49
time="2023-11-03T13:58:21Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=8f33e
time="2023-11-03T13:58:21Z" level=debug duration=2.364654ms execID=8f33e
time="2023-11-03T13:58:21Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=e2b10
Handling connection for 9081
time="2023-11-03T13:58:21Z" level=debug duration=69.162602ms execID=e2b10
time="2023-11-03T13:58:21Z" level=info msg="kubectl create ns argocd-e2e--test-get-repo-with-inherited-creds-zehfp" dir= execID=0a00b
time="2023-11-03T13:58:22Z" level=debug msg="namespace/argocd-e2e--test-get-repo-with-inherited-creds-zehfp created\n" duration=147.94084ms execID=0a00b
time="2023-11-03T13:58:22Z" level=info msg="kubectl label ns argocd-e2e--test-get-repo-with-inherited-creds-zehfp e2e.argoproj.io=true" dir= execID=58cd7
time="2023-11-03T13:58:22Z" level=debug msg="namespace/argocd-e2e--test-get-repo-with-inherited-creds-zehfp labeled\n" duration=211.577777ms execID=58cd7
time="2023-11-03T13:58:22Z" level=info msg="clean state" duration=2.888621449s id=TestGetRepoWithInheritedCreds-zehfp name=TestGetRepoWithInheritedCreds password=password username=admin
time="2023-11-03T13:58:22Z" level=info msg="../../dist/argocd repocreds add https://localhost:9443/argo-e2e --github-app-id 2978632978 --github-app-installation-id 7893789433789 --github-app-private-key-path /argocd-e2e/argo-cd/test/fixture/certs/argocd-test-client.key --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjMwMSwibmJmIjoxNjk5MDE5OTAxLCJpYXQiOjE2OTkwMTk5MDEsImp0aSI6ImQ0YTVhNmI5LWY5ZGQtNDg0OC1hZjYxLWIwZTExMmFmNTExMSJ9.5d2QVKN9ME7VmlwReO-w2qaMfditfADobiIXX2PyMaA --insecure" dir= execID=e737a
time="2023-11-03T13:58:22Z" level=debug msg="Repository credentials for 'https://localhost:9443/argo-e2e' added\n" duration=217.879729ms execID=e737a
time="2023-11-03T13:58:22Z" level=info msg="../../dist/argocd repo add https://argocd-e2e-server:9443/argo-e2e/testdata.git --username admin --password password --insecure-skip-server-verification --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjMwMSwibmJmIjoxNjk5MDE5OTAxLCJpYXQiOjE2OTkwMTk5MDEsImp0aSI6ImQ0YTVhNmI5LWY5ZGQtNDg0OC1hZjYxLWIwZTExMmFmNTExMSJ9.5d2QVKN9ME7VmlwReO-w2qaMfditfADobiIXX2PyMaA --insecure" dir= execID=b61b4
time="2023-11-03T13:58:22Z" level=debug msg="Repository 'https://argocd-e2e-server:9443/argo-e2e/testdata.git' added\n" duration=194.9286ms execID=b61b4
time="2023-11-03T13:58:22Z" level=info msg="../../dist/argocd repo get https://argocd-e2e-server:9443/argo-e2e/testdata.git --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjMwMSwibmJmIjoxNjk5MDE5OTAxLCJpYXQiOjE2OTkwMTk5MDEsImp0aSI6ImQ0YTVhNmI5LWY5ZGQtNDg0OC1hZjYxLWIwZTExMmFmNTExMSJ9.5d2QVKN9ME7VmlwReO-w2qaMfditfADobiIXX2PyMaA --insecure" dir= execID=c0e42
time="2023-11-03T13:58:22Z" level=debug msg="TYPE  NAME  REPO                                                  INSECURE  OCI    LFS    CREDS  STATUS  MESSAGE                                                                                                                           PROJECT\ngit         https://argocd-e2e-server:9443/argo-e2e/testdata.git  false     false  false  false  Failed  Unable to connect to repository: rpc error: code = Unknown desc = error testing repository connectivity: authentication required  \n" duration=75.089123ms execID=c0e42
    repo_management_test.go:82: 
        	Error Trace:	/argocd-e2e/argo-cd/test/e2e/repo_management_test.go:82
        	            				/argocd-e2e/argo-cd/test/e2e/fixture/app/context.go:311
        	            				/argocd-e2e/argo-cd/test/e2e/repo_management_test.go:58
        	Error:      	"TYPE  NAME  REPO                                                  INSECURE  OCI    LFS    CREDS  STATUS  MESSAGE                                                                                                                           PROJECT\ngit         https://argocd-e2e-server:9443/argo-e2e/testdata.git  false     false  false  false  Failed  Unable to connect to repository: rpc error: code = Unknown desc = error testing repository connectivity: authentication required  " does not contain "inherited"
        	Test:       	TestGetRepoWithInheritedCreds
time="2023-11-03T13:58:22Z" level=info msg="../../dist/argocd repo rm https://argocd-e2e-server:9443/argo-e2e/testdata.git --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjMwMSwibmJmIjoxNjk5MDE5OTAxLCJpYXQiOjE2OTkwMTk5MDEsImp0aSI6ImQ0YTVhNmI5LWY5ZGQtNDg0OC1hZjYxLWIwZTExMmFmNTExMSJ9.5d2QVKN9ME7VmlwReO-w2qaMfditfADobiIXX2PyMaA --insecure" dir= execID=c24b5
time="2023-11-03T13:58:23Z" level=debug msg="Repository 'https://argocd-e2e-server:9443/argo-e2e/testdata.git' removed\n" duration=206.158411ms execID=c24b5
--- FAIL: TestGetRepoWithInheritedCreds (3.70s)
=== RUN   TestUpsertExistingRepo
time="2023-11-03T13:58:23Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=7dc15
time="2023-11-03T13:58:23Z" level=debug msg="namespace \"argocd-e2e--test-get-repo-with-inherited-creds-zehfp\" deleted\n" duration=217.477525ms execID=7dc15
time="2023-11-03T13:58:23Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=bcff7
time="2023-11-03T13:58:23Z" level=debug msg="No resources found\n" duration=445.040725ms execID=bcff7
time="2023-11-03T13:58:23Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=186cb
time="2023-11-03T13:58:24Z" level=debug msg="No resources found\n" duration=256.229116ms execID=186cb
time="2023-11-03T13:58:25Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:58:25Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjMwNSwibmJmIjoxNjk5MDE5OTA1LCJpYXQiOjE2OTkwMTk5MDUsImp0aSI6ImM3OGFhNmU2LTYwMDUtNDMyMS1hNjQ2LTgwYmY1MmIwMDdmMSJ9.wDSiQ2Q9dXrIU9Kyql2RHr5XffoynGuD_hDIwl1Cmlg --insecure" dir= execID=8fc8e
time="2023-11-03T13:58:25Z" level=debug duration=87.992984ms execID=8fc8e
time="2023-11-03T13:58:25Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=260d1
time="2023-11-03T13:58:25Z" level=debug duration=2.0687ms execID=260d1
time="2023-11-03T13:58:25Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=e08f6
time="2023-11-03T13:58:25Z" level=debug duration=1.720279ms execID=e08f6
time="2023-11-03T13:58:25Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=afc48
time="2023-11-03T13:58:25Z" level=debug duration=1.537807ms execID=afc48
time="2023-11-03T13:58:25Z" level=info msg="pkill -9 gpg-agent" dir= execID=15de0
time="2023-11-03T13:58:25Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=d68a2
time="2023-11-03T13:58:25Z" level=debug duration=10.0039ms execID=d68a2
time="2023-11-03T13:58:25Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=f15eb
time="2023-11-03T13:58:25Z" level=debug duration=67.374149ms execID=f15eb
time="2023-11-03T13:58:25Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=bcb34
time="2023-11-03T13:58:25Z" level=debug duration=1.922222ms execID=bcb34
time="2023-11-03T13:58:25Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=9b9e2
time="2023-11-03T13:58:25Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.274429ms execID=9b9e2
time="2023-11-03T13:58:25Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=28479
time="2023-11-03T13:58:25Z" level=debug duration=28.993559ms execID=28479
time="2023-11-03T13:58:25Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=bf06e
time="2023-11-03T13:58:25Z" level=debug duration=23.376271ms execID=bf06e
time="2023-11-03T13:58:25Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=41831
time="2023-11-03T13:58:25Z" level=debug duration=2.27678ms execID=41831
time="2023-11-03T13:58:25Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=2bb65
Handling connection for 9081
time="2023-11-03T13:58:25Z" level=debug duration=72.146869ms execID=2bb65
time="2023-11-03T13:58:25Z" level=info msg="kubectl create ns argocd-e2e--test-upsert-existing-repo-kijaa" dir= execID=5e5a1
time="2023-11-03T13:58:25Z" level=debug msg="namespace/argocd-e2e--test-upsert-existing-repo-kijaa created\n" duration=153.802197ms execID=5e5a1
time="2023-11-03T13:58:25Z" level=info msg="kubectl label ns argocd-e2e--test-upsert-existing-repo-kijaa e2e.argoproj.io=true" dir= execID=ebdb2
time="2023-11-03T13:58:25Z" level=debug msg="namespace/argocd-e2e--test-upsert-existing-repo-kijaa labeled\n" duration=303.101602ms execID=ebdb2
time="2023-11-03T13:58:25Z" level=info msg="clean state" duration=2.758258192s id=TestUpsertExistingRepo-kijaa name=TestUpsertExistingRepo password=password username=admin
time="2023-11-03T13:58:25Z" level=info msg="../../dist/argocd repo add http://argocd-e2e-server:9081/argo-e2e/testdata.git --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjMwNSwibmJmIjoxNjk5MDE5OTA1LCJpYXQiOjE2OTkwMTk5MDUsImp0aSI6ImM3OGFhNmU2LTYwMDUtNDMyMS1hNjQ2LTgwYmY1MmIwMDdmMSJ9.wDSiQ2Q9dXrIU9Kyql2RHr5XffoynGuD_hDIwl1Cmlg --insecure" dir= execID=17859
time="2023-11-03T13:58:25Z" level=debug msg="Repository 'http://argocd-e2e-server:9081/argo-e2e/testdata.git' added\n" duration=141.506ms execID=17859
time="2023-11-03T13:58:25Z" level=info msg="../../dist/argocd repo add http://argocd-e2e-server:9081/argo-e2e/testdata.git --username admin --password password --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjMwNSwibmJmIjoxNjk5MDE5OTA1LCJpYXQiOjE2OTkwMTk5MDUsImp0aSI6ImM3OGFhNmU2LTYwMDUtNDMyMS1hNjQ2LTgwYmY1MmIwMDdmMSJ9.wDSiQ2Q9dXrIU9Kyql2RHr5XffoynGuD_hDIwl1Cmlg --insecure" dir= execID=da2da
time="2023-11-03T13:58:26Z" level=debug duration=183.456793ms execID=da2da
time="2023-11-03T13:58:26Z" level=error msg="`../../dist/argocd repo add http://argocd-e2e-server:9081/argo-e2e/testdata.git --username admin --password password --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjMwNSwibmJmIjoxNjk5MDE5OTA1LCJpYXQiOjE2OTkwMTk5MDUsImp0aSI6ImM3OGFhNmU2LTYwMDUtNDMyMS1hNjQ2LTgwYmY1MmIwMDdmMSJ9.wDSiQ2Q9dXrIU9Kyql2RHr5XffoynGuD_hDIwl1Cmlg --insecure` failed exit status 20: time=\"2023-11-03T13:58:26Z\" level=fatal msg=\"rpc error: code = InvalidArgument desc = existing repository spec is different; use upsert flag to force update; difference in keys \\\"Username,Password\\\"\"" execID=da2da
time="2023-11-03T13:58:26Z" level=info msg="../../dist/argocd repo add http://argocd-e2e-server:9081/argo-e2e/testdata.git --upsert --username admin --password password --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjMwNSwibmJmIjoxNjk5MDE5OTA1LCJpYXQiOjE2OTkwMTk5MDUsImp0aSI6ImM3OGFhNmU2LTYwMDUtNDMyMS1hNjQ2LTgwYmY1MmIwMDdmMSJ9.wDSiQ2Q9dXrIU9Kyql2RHr5XffoynGuD_hDIwl1Cmlg --insecure" dir= execID=87340
time="2023-11-03T13:58:26Z" level=debug msg="Repository 'http://argocd-e2e-server:9081/argo-e2e/testdata.git' added\n" duration=221.417027ms execID=87340
time="2023-11-03T13:58:26Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestUpsertExistingRepo (3.32s)
=== RUN   TestAddRemoveHelmRepo
time="2023-11-03T13:58:26Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=5db2b
time="2023-11-03T13:58:26Z" level=debug msg="namespace \"argocd-e2e--test-upsert-existing-repo-kijaa\" deleted\n" duration=218.981832ms execID=5db2b
time="2023-11-03T13:58:26Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=5af5c
time="2023-11-03T13:58:27Z" level=debug msg="No resources found\n" duration=452.760292ms execID=5af5c
time="2023-11-03T13:58:27Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=f8e06
time="2023-11-03T13:58:27Z" level=debug msg="No resources found\n" duration=243.740312ms execID=f8e06
time="2023-11-03T13:58:28Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:58:28Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjMwOCwibmJmIjoxNjk5MDE5OTA4LCJpYXQiOjE2OTkwMTk5MDgsImp0aSI6IjI2YzQ4MzI5LTc1NmYtNDA4MS1iOTQ2LWI3YTZkOTM3ZmUyNiJ9.-hwYck_S5LiVTlzEuEsnFw_KUYa91k3O-iGhJAXJSKo --insecure" dir= execID=23da5
time="2023-11-03T13:58:28Z" level=debug duration=106.218419ms execID=23da5
time="2023-11-03T13:58:28Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=159f1
time="2023-11-03T13:58:28Z" level=debug duration=1.878985ms execID=159f1
time="2023-11-03T13:58:28Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=e51bd
time="2023-11-03T13:58:28Z" level=debug duration=1.591099ms execID=e51bd
time="2023-11-03T13:58:28Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=922ff
time="2023-11-03T13:58:28Z" level=debug duration=1.446261ms execID=922ff
time="2023-11-03T13:58:28Z" level=info msg="pkill -9 gpg-agent" dir= execID=7b253
time="2023-11-03T13:58:28Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=688f2
time="2023-11-03T13:58:28Z" level=debug duration=9.821465ms execID=688f2
time="2023-11-03T13:58:28Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=25b05
time="2023-11-03T13:58:28Z" level=debug duration=33.257698ms execID=25b05
time="2023-11-03T13:58:28Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=8a4e1
time="2023-11-03T13:58:28Z" level=debug duration=16.829113ms execID=8a4e1
time="2023-11-03T13:58:28Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=2ef0f
time="2023-11-03T13:58:28Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.119668ms execID=2ef0f
time="2023-11-03T13:58:28Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=008fb
time="2023-11-03T13:58:28Z" level=debug duration=29.198438ms execID=008fb
time="2023-11-03T13:58:28Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=d4abf
time="2023-11-03T13:58:28Z" level=debug duration=24.490304ms execID=d4abf
time="2023-11-03T13:58:28Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=bbc6c
time="2023-11-03T13:58:28Z" level=debug duration=2.814251ms execID=bbc6c
time="2023-11-03T13:58:28Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=25479
Handling connection for 9081
time="2023-11-03T13:58:28Z" level=debug duration=91.298289ms execID=25479
time="2023-11-03T13:58:28Z" level=info msg="kubectl create ns argocd-e2e--test-add-remove-helm-repo-oxyjq" dir= execID=9c5ca
time="2023-11-03T13:58:28Z" level=debug msg="namespace/argocd-e2e--test-add-remove-helm-repo-oxyjq created\n" duration=177.084125ms execID=9c5ca
time="2023-11-03T13:58:28Z" level=info msg="kubectl label ns argocd-e2e--test-add-remove-helm-repo-oxyjq e2e.argoproj.io=true" dir= execID=7f88b
time="2023-11-03T13:58:29Z" level=debug msg="namespace/argocd-e2e--test-add-remove-helm-repo-oxyjq labeled\n" duration=373.563464ms execID=7f88b
time="2023-11-03T13:58:29Z" level=info msg="clean state" duration=2.829797226s id=TestAddRemoveHelmRepo-oxyjq name=TestAddRemoveHelmRepo password=password username=admin
time="2023-11-03T13:58:29Z" level=info msg="../../dist/argocd cert add-tls argocd-e2e-server --from /argocd-e2e/argo-cd/test/fixture/certs/argocd-test-ca.crt --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjMwOCwibmJmIjoxNjk5MDE5OTA4LCJpYXQiOjE2OTkwMTk5MDgsImp0aSI6IjI2YzQ4MzI5LTc1NmYtNDA4MS1iOTQ2LWI3YTZkOTM3ZmUyNiJ9.-hwYck_S5LiVTlzEuEsnFw_KUYa91k3O-iGhJAXJSKo --insecure" dir= execID=140c3
time="2023-11-03T13:58:29Z" level=debug msg="Reading TLS certificate data in PEM format from '/argocd-e2e/argo-cd/test/fixture/certs/argocd-test-ca.crt'\nCreated entry with 0 PEM certificates for repository server argocd-e2e-server\n" duration=125.66738ms execID=140c3
time="2023-11-03T13:58:29Z" level=info msg="Waiting for API server to restart"
time="2023-11-03T13:58:29Z" level=info msg="kubectl rollout restart deployment argocd-test-server" dir= execID=1922d
time="2023-11-03T13:58:29Z" level=debug msg="deployment.apps/argocd-test-server restarted\n" duration=305.477269ms execID=1922d
time="2023-11-03T13:58:29Z" level=info msg="kubectl rollout status deployment argocd-test-server" dir= execID=7d455
time="2023-11-03T13:59:00Z" level=debug msg="Waiting for deployment \"argocd-test-server\" rollout to finish: 1 old replicas are pending termination...\nWaiting for deployment \"argocd-test-server\" rollout to finish: 1 old replicas are pending termination...\ndeployment \"argocd-test-server\" successfully rolled out\n" duration=30.446390999s execID=7d455
time="2023-11-03T13:59:00Z" level=info msg="Waiting for repo server to restart"
time="2023-11-03T13:59:00Z" level=info msg="kubectl rollout restart deployment argocd-test-repo-server" dir= execID=2602d
time="2023-11-03T13:59:00Z" level=debug msg="deployment.apps/argocd-test-repo-server restarted\n" duration=261.217637ms execID=2602d
time="2023-11-03T13:59:00Z" level=info msg="kubectl rollout status deployment argocd-test-repo-server" dir= execID=a5335
time="2023-11-03T13:59:10Z" level=debug msg="Waiting for deployment \"argocd-test-repo-server\" rollout to finish: 1 old replicas are pending termination...\nWaiting for deployment \"argocd-test-repo-server\" rollout to finish: 1 old replicas are pending termination...\ndeployment \"argocd-test-repo-server\" successfully rolled out\n" duration=10.454727566s execID=a5335
time="2023-11-03T13:59:20Z" level=info msg="../../dist/argocd repo add https://argocd-e2e-server:9444/helm-repo --name testrepo --type helm --username admin --password password --tls-client-cert-path /argocd-e2e/argo-cd/test/fixture/certs/argocd-test-client.crt --tls-client-cert-key-path /argocd-e2e/argo-cd/test/fixture/certs/argocd-test-client.key --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjMwOCwibmJmIjoxNjk5MDE5OTA4LCJpYXQiOjE2OTkwMTk5MDgsImp0aSI6IjI2YzQ4MzI5LTc1NmYtNDA4MS1iOTQ2LWI3YTZkOTM3ZmUyNiJ9.-hwYck_S5LiVTlzEuEsnFw_KUYa91k3O-iGhJAXJSKo --insecure" dir= execID=698f9
time="2023-11-03T13:59:21Z" level=debug msg="Repository 'https://argocd-e2e-server:9444/helm-repo' added\n" duration=230.031004ms execID=698f9
time="2023-11-03T13:59:21Z" level=info msg="../../dist/argocd repo rm https://argocd-e2e-server:9444/helm-repo --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjMwOCwibmJmIjoxNjk5MDE5OTA4LCJpYXQiOjE2OTkwMTk5MDgsImp0aSI6IjI2YzQ4MzI5LTc1NmYtNDA4MS1iOTQ2LWI3YTZkOTM3ZmUyNiJ9.-hwYck_S5LiVTlzEuEsnFw_KUYa91k3O-iGhJAXJSKo --insecure" dir= execID=02f40
time="2023-11-03T13:59:21Z" level=debug msg="Repository 'https://argocd-e2e-server:9444/helm-repo' removed\n" duration=183.338549ms execID=02f40
time="2023-11-03T13:59:21Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestAddRemoveHelmRepo (54.88s)
=== RUN   TestAddHelmRepoInsecureSkipVerify
time="2023-11-03T13:59:21Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=3c789
time="2023-11-03T13:59:21Z" level=debug msg="namespace \"argocd-e2e--test-add-remove-helm-repo-oxyjq\" deleted\n" duration=303.605804ms execID=3c789
time="2023-11-03T13:59:21Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=64683
time="2023-11-03T13:59:22Z" level=debug msg="No resources found\n" duration=516.575775ms execID=64683
time="2023-11-03T13:59:22Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=eb3c1
time="2023-11-03T13:59:22Z" level=debug msg="No resources found\n" duration=277.594079ms execID=eb3c1
time="2023-11-03T13:59:23Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:59:23Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjM2MywibmJmIjoxNjk5MDE5OTYzLCJpYXQiOjE2OTkwMTk5NjMsImp0aSI6IjFiYjQwZWVjLTI1NDEtNGU4My1iZWQxLTJhNTU5MGJlZDMwMCJ9.appUsd4eMAVbLP-zX1FEfvR9gAipeWVhpZZK_2Wy3Wc --insecure" dir= execID=74764
time="2023-11-03T13:59:23Z" level=debug duration=75.943405ms execID=74764
time="2023-11-03T13:59:23Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=fd616
time="2023-11-03T13:59:23Z" level=debug duration=1.989372ms execID=fd616
time="2023-11-03T13:59:23Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=69bbd
time="2023-11-03T13:59:23Z" level=debug duration=1.773981ms execID=69bbd
time="2023-11-03T13:59:23Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=92e2a
time="2023-11-03T13:59:23Z" level=debug duration=1.644139ms execID=92e2a
time="2023-11-03T13:59:23Z" level=info msg="pkill -9 gpg-agent" dir= execID=3eb95
time="2023-11-03T13:59:23Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=3e347
time="2023-11-03T13:59:23Z" level=debug duration=9.984763ms execID=3e347
time="2023-11-03T13:59:23Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=04bb1
time="2023-11-03T13:59:23Z" level=debug duration=45.163464ms execID=04bb1
time="2023-11-03T13:59:23Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=1d905
time="2023-11-03T13:59:23Z" level=debug duration=2.094499ms execID=1d905
time="2023-11-03T13:59:23Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=4bf59
time="2023-11-03T13:59:23Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.370308ms execID=4bf59
time="2023-11-03T13:59:23Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=66835
time="2023-11-03T13:59:23Z" level=debug duration=27.971483ms execID=66835
time="2023-11-03T13:59:23Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=16477
time="2023-11-03T13:59:23Z" level=debug duration=22.79601ms execID=16477
time="2023-11-03T13:59:23Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=f58fb
time="2023-11-03T13:59:23Z" level=debug duration=2.768704ms execID=f58fb
time="2023-11-03T13:59:23Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=801a1
Handling connection for 9081
time="2023-11-03T13:59:23Z" level=debug duration=79.869829ms execID=801a1
time="2023-11-03T13:59:23Z" level=info msg="kubectl create ns argocd-e2e--test-add-helm-repo-insecure-skip-verify-rjpac" dir= execID=0d7c0
time="2023-11-03T13:59:23Z" level=debug msg="namespace/argocd-e2e--test-add-helm-repo-insecure-skip-verify-rjpac created\n" duration=176.236474ms execID=0d7c0
time="2023-11-03T13:59:23Z" level=info msg="kubectl label ns argocd-e2e--test-add-helm-repo-insecure-skip-verify-rjpac e2e.argoproj.io=true" dir= execID=7b7b5
time="2023-11-03T13:59:24Z" level=debug msg="namespace/argocd-e2e--test-add-helm-repo-insecure-skip-verify-rjpac labeled\n" duration=370.134251ms execID=7b7b5
time="2023-11-03T13:59:24Z" level=info msg="clean state" duration=2.74941947s id=TestAddHelmRepoInsecureSkipVerify-rjpac name=TestAddHelmRepoInsecureSkipVerify password=password username=admin
time="2023-11-03T13:59:24Z" level=info msg="../../dist/argocd repo add https://argocd-e2e-server:9444/helm-repo --name testrepo --type helm --username admin --password password --insecure-skip-server-verification --tls-client-cert-path /argocd-e2e/argo-cd/test/fixture/certs/argocd-test-client.crt --tls-client-cert-key-path /argocd-e2e/argo-cd/test/fixture/certs/argocd-test-client.key --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjM2MywibmJmIjoxNjk5MDE5OTYzLCJpYXQiOjE2OTkwMTk5NjMsImp0aSI6IjFiYjQwZWVjLTI1NDEtNGU4My1iZWQxLTJhNTU5MGJlZDMwMCJ9.appUsd4eMAVbLP-zX1FEfvR9gAipeWVhpZZK_2Wy3Wc --insecure" dir= execID=809cd
time="2023-11-03T13:59:24Z" level=debug msg="Repository 'https://argocd-e2e-server:9444/helm-repo' added\n" duration=280.486253ms execID=809cd
time="2023-11-03T13:59:24Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestAddHelmRepoInsecureSkipVerify (3.06s)
=== RUN   TestCreateRepositoryWithProject
time="2023-11-03T13:59:24Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=15010
time="2023-11-03T13:59:24Z" level=debug msg="namespace \"argocd-e2e--test-add-helm-repo-insecure-skip-verify-rjpac\" deleted\n" duration=238.399002ms execID=15010
time="2023-11-03T13:59:24Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=752a1
time="2023-11-03T13:59:25Z" level=debug msg="No resources found\n" duration=526.827812ms execID=752a1
time="2023-11-03T13:59:25Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=d2327
time="2023-11-03T13:59:25Z" level=debug msg="No resources found\n" duration=299.278716ms execID=d2327
time="2023-11-03T13:59:26Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:59:26Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjM2NiwibmJmIjoxNjk5MDE5OTY2LCJpYXQiOjE2OTkwMTk5NjYsImp0aSI6ImExYjU1NDM0LTYwOWMtNGJhNC04YzhkLWYyZDA2OTY1ODRmYiJ9.cINf3Ph_weHsiiVDU-UH-WUSrh-n9B8UPREBrT1ePbg --insecure" dir= execID=27436
time="2023-11-03T13:59:26Z" level=debug duration=98.326081ms execID=27436
time="2023-11-03T13:59:26Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=b2868
time="2023-11-03T13:59:26Z" level=debug duration=2.040571ms execID=b2868
time="2023-11-03T13:59:26Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=0a83d
time="2023-11-03T13:59:26Z" level=debug duration=1.632293ms execID=0a83d
time="2023-11-03T13:59:26Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=a04db
time="2023-11-03T13:59:26Z" level=debug duration=1.555834ms execID=a04db
time="2023-11-03T13:59:26Z" level=info msg="pkill -9 gpg-agent" dir= execID=0a99c
time="2023-11-03T13:59:26Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=3823f
time="2023-11-03T13:59:26Z" level=debug duration=10.005061ms execID=3823f
time="2023-11-03T13:59:26Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=169b0
time="2023-11-03T13:59:26Z" level=debug duration=85.025605ms execID=169b0
time="2023-11-03T13:59:26Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=0214e
time="2023-11-03T13:59:26Z" level=debug duration=1.96184ms execID=0214e
time="2023-11-03T13:59:26Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=1b371
time="2023-11-03T13:59:26Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.979213ms execID=1b371
time="2023-11-03T13:59:26Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=9db56
time="2023-11-03T13:59:26Z" level=debug duration=26.399712ms execID=9db56
time="2023-11-03T13:59:26Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=665ed
time="2023-11-03T13:59:26Z" level=debug duration=22.09212ms execID=665ed
time="2023-11-03T13:59:26Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=e9f96
time="2023-11-03T13:59:26Z" level=debug duration=2.280635ms execID=e9f96
time="2023-11-03T13:59:26Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=5405a
Handling connection for 9081
time="2023-11-03T13:59:26Z" level=debug duration=66.430976ms execID=5405a
time="2023-11-03T13:59:26Z" level=info msg="kubectl create ns argocd-e2e--test-create-repository-with-project-lejpp" dir= execID=347b2
time="2023-11-03T13:59:26Z" level=debug msg="namespace/argocd-e2e--test-create-repository-with-project-lejpp created\n" duration=142.523418ms execID=347b2
time="2023-11-03T13:59:26Z" level=info msg="kubectl label ns argocd-e2e--test-create-repository-with-project-lejpp e2e.argoproj.io=true" dir= execID=fc00e
time="2023-11-03T13:59:27Z" level=debug msg="namespace/argocd-e2e--test-create-repository-with-project-lejpp labeled\n" duration=314.408477ms execID=fc00e
time="2023-11-03T13:59:27Z" level=info msg="clean state" duration=2.810745044s id=TestCreateRepositoryWithProject-lejpp name=TestCreateRepositoryWithProject password=password username=admin
time="2023-11-03T13:59:28Z" level=info msg="../../dist/argocd proj create argo-project --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjM2NiwibmJmIjoxNjk5MDE5OTY2LCJpYXQiOjE2OTkwMTk5NjYsImp0aSI6ImExYjU1NDM0LTYwOWMtNGJhNC04YzhkLWYyZDA2OTY1ODRmYiJ9.cINf3Ph_weHsiiVDU-UH-WUSrh-n9B8UPREBrT1ePbg --insecure" dir= execID=e48a7
time="2023-11-03T13:59:28Z" level=debug duration=82.163056ms execID=e48a7
time="2023-11-03T13:59:29Z" level=info msg="../../dist/argocd repo add https://github.com/argoproj/argo-cd.git --project argo-project --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjM2NiwibmJmIjoxNjk5MDE5OTY2LCJpYXQiOjE2OTkwMTk5NjYsImp0aSI6ImExYjU1NDM0LTYwOWMtNGJhNC04YzhkLWYyZDA2OTY1ODRmYiJ9.cINf3Ph_weHsiiVDU-UH-WUSrh-n9B8UPREBrT1ePbg --insecure" dir= execID=ec07d
time="2023-11-03T13:59:29Z" level=debug msg="Repository 'https://github.com/argoproj/argo-cd.git' added\n" duration=417.411884ms execID=ec07d
time="2023-11-03T13:59:29Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCreateRepositoryWithProject (5.53s)
=== RUN   TestCreateRepositoryNonAdminUserPermissionDenied
time="2023-11-03T13:59:29Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=75571
time="2023-11-03T13:59:30Z" level=debug msg="namespace \"argocd-e2e--test-create-repository-with-project-lejpp\" deleted\n" duration=237.985736ms execID=75571
time="2023-11-03T13:59:30Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=e7c84
time="2023-11-03T13:59:30Z" level=debug msg="No resources found\n" duration=626.765597ms execID=e7c84
time="2023-11-03T13:59:30Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=1b97c
time="2023-11-03T13:59:31Z" level=debug msg="No resources found\n" duration=275.453405ms execID=1b97c
time="2023-11-03T13:59:31Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:59:31Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjM3MSwibmJmIjoxNjk5MDE5OTcxLCJpYXQiOjE2OTkwMTk5NzEsImp0aSI6IjlmYWUzZTczLWJiMWUtNDliYi1iZDk3LWQ2NTRmYTk0YTdlNiJ9.LTQYy1YpIPLJ2cYp3gHby7Cimvb40DwcBYH-1mFZPNQ --insecure" dir= execID=91f81
time="2023-11-03T13:59:31Z" level=debug duration=92.129699ms execID=91f81
time="2023-11-03T13:59:31Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=404ba
time="2023-11-03T13:59:31Z" level=debug duration=2.19859ms execID=404ba
time="2023-11-03T13:59:31Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=a8a95
time="2023-11-03T13:59:31Z" level=debug duration=1.780014ms execID=a8a95
time="2023-11-03T13:59:31Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=4ade3
time="2023-11-03T13:59:31Z" level=debug duration=1.708911ms execID=4ade3
time="2023-11-03T13:59:31Z" level=info msg="pkill -9 gpg-agent" dir= execID=fd004
time="2023-11-03T13:59:31Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=78e77
time="2023-11-03T13:59:31Z" level=debug duration=10.521108ms execID=78e77
time="2023-11-03T13:59:31Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=1270c
time="2023-11-03T13:59:31Z" level=debug duration=67.555255ms execID=1270c
time="2023-11-03T13:59:31Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=1b56f
time="2023-11-03T13:59:31Z" level=debug duration=2.269276ms execID=1b56f
time="2023-11-03T13:59:31Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=cecfd
time="2023-11-03T13:59:31Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.981281ms execID=cecfd
time="2023-11-03T13:59:31Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=afd89
time="2023-11-03T13:59:31Z" level=debug duration=25.840918ms execID=afd89
time="2023-11-03T13:59:31Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=c3e5f
time="2023-11-03T13:59:32Z" level=debug duration=20.573371ms execID=c3e5f
time="2023-11-03T13:59:32Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=05656
time="2023-11-03T13:59:32Z" level=debug duration=2.273287ms execID=05656
time="2023-11-03T13:59:32Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=bc8f4
Handling connection for 9081
time="2023-11-03T13:59:32Z" level=debug duration=70.340997ms execID=bc8f4
time="2023-11-03T13:59:32Z" level=info msg="kubectl create ns argocd-e2e--test-create-repository-non-admin-user-permiss-sblgi" dir= execID=ef0ec
time="2023-11-03T13:59:32Z" level=debug msg="namespace/argocd-e2e--test-create-repository-non-admin-user-permiss-sblgi created\n" duration=146.990958ms execID=ef0ec
time="2023-11-03T13:59:32Z" level=info msg="kubectl label ns argocd-e2e--test-create-repository-non-admin-user-permiss-sblgi e2e.argoproj.io=true" dir= execID=d0022
time="2023-11-03T13:59:32Z" level=debug msg="namespace/argocd-e2e--test-create-repository-non-admin-user-permiss-sblgi labeled\n" duration=299.773184ms execID=d0022
time="2023-11-03T13:59:32Z" level=info msg="clean state" duration=2.659497428s id=TestCreateRepositoryNonAdminUserPermissionDenied-sblgi name=TestCreateRepositoryNonAdminUserPermissionDenied password=password username=admin
time="2023-11-03T13:59:33Z" level=info msg="../../dist/argocd account update-password --account test --current-password J3QcnyLs6kwTxhd50emMGrHPfBOUl2pj --new-password password --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjM3MSwibmJmIjoxNjk5MDE5OTcxLCJpYXQiOjE2OTkwMTk5NzEsImp0aSI6IjlmYWUzZTczLWJiMWUtNDliYi1iZDk3LWQ2NTRmYTk0YTdlNiJ9.LTQYy1YpIPLJ2cYp3gHby7Cimvb40DwcBYH-1mFZPNQ --insecure" dir= execID=293d3
time="2023-11-03T13:59:34Z" level=debug msg="Password updated\n" duration=1.151089422s execID=293d3
time="2023-11-03T13:59:35Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:59:36Z" level=info msg="../../dist/argocd repo add https://github.com/argoproj/argo-cd.git --project argo-project --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJ0ZXN0OmxvZ2luIiwiZXhwIjoxNjk5MTA2Mzc1LCJuYmYiOjE2OTkwMTk5NzUsImlhdCI6MTY5OTAxOTk3NSwianRpIjoiZGFjOTU1ZWQtMTNiOC00YmEwLWI5ZDYtMWFlMjZiNGExYjkxIn0.UgddI0_jLgOCcGfGNiAf8LOKL2QY9GBnFzlbgkST5no --insecure" dir= execID=c7787
time="2023-11-03T13:59:36Z" level=debug duration=58.799432ms execID=c7787
time="2023-11-03T13:59:36Z" level=error msg="`../../dist/argocd repo add https://github.com/argoproj/argo-cd.git --project argo-project --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJ0ZXN0OmxvZ2luIiwiZXhwIjoxNjk5MTA2Mzc1LCJuYmYiOjE2OTkwMTk5NzUsImlhdCI6MTY5OTAxOTk3NSwianRpIjoiZGFjOTU1ZWQtMTNiOC00YmEwLWI5ZDYtMWFlMjZiNGExYjkxIn0.UgddI0_jLgOCcGfGNiAf8LOKL2QY9GBnFzlbgkST5no --insecure` failed exit status 20: time=\"2023-11-03T13:59:36Z\" level=fatal msg=\"rpc error: code = PermissionDenied desc = permission denied: repositories, create, argo-project/https://github.com/argoproj/argo-cd.git, sub: test, iat: 2023-11-03T13:59:35Z\"" execID=c7787
time="2023-11-03T13:59:36Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCreateRepositoryNonAdminUserPermissionDenied (6.60s)
=== RUN   TestCreateRepositoryNonAdminUserWithWrongProject
time="2023-11-03T13:59:36Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=13497
time="2023-11-03T13:59:36Z" level=debug msg="namespace \"argocd-e2e--test-create-repository-non-admin-user-permiss-sblgi\" deleted\n" duration=258.845676ms execID=13497
time="2023-11-03T13:59:36Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=73374
time="2023-11-03T13:59:37Z" level=debug msg="No resources found\n" duration=573.698757ms execID=73374
time="2023-11-03T13:59:37Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=0d02c
time="2023-11-03T13:59:37Z" level=debug msg="No resources found\n" duration=291.310585ms execID=0d02c
time="2023-11-03T13:59:38Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:59:38Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjM3OCwibmJmIjoxNjk5MDE5OTc4LCJpYXQiOjE2OTkwMTk5NzgsImp0aSI6IjVlNjIxMTMwLThiYzQtNDMxOS1hYjNmLTJiYjhhYzlhYmViNSJ9.FuFQgfaooP1FV7RBlmsdFtnh96bfl_Qv_VZyxHYqe1U --insecure" dir= execID=758f7
time="2023-11-03T13:59:38Z" level=debug duration=107.615377ms execID=758f7
time="2023-11-03T13:59:38Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=d75ec
time="2023-11-03T13:59:38Z" level=debug duration=2.169319ms execID=d75ec
time="2023-11-03T13:59:38Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=8b2c1
time="2023-11-03T13:59:38Z" level=debug duration=1.56859ms execID=8b2c1
time="2023-11-03T13:59:38Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=48759
time="2023-11-03T13:59:38Z" level=debug duration=1.526841ms execID=48759
time="2023-11-03T13:59:38Z" level=info msg="pkill -9 gpg-agent" dir= execID=c278c
time="2023-11-03T13:59:38Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=ee207
time="2023-11-03T13:59:38Z" level=debug duration=10.096089ms execID=ee207
time="2023-11-03T13:59:38Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=6c2e5
time="2023-11-03T13:59:38Z" level=debug duration=41.453426ms execID=6c2e5
time="2023-11-03T13:59:38Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=8ddb0
time="2023-11-03T13:59:38Z" level=debug duration=1.618777ms execID=8ddb0
time="2023-11-03T13:59:38Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=eedb1
time="2023-11-03T13:59:38Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.910484ms execID=eedb1
time="2023-11-03T13:59:38Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=4b7ce
time="2023-11-03T13:59:38Z" level=debug duration=26.208499ms execID=4b7ce
time="2023-11-03T13:59:38Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=17818
time="2023-11-03T13:59:38Z" level=debug duration=21.028136ms execID=17818
time="2023-11-03T13:59:38Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=06bc8
time="2023-11-03T13:59:38Z" level=debug duration=2.001385ms execID=06bc8
time="2023-11-03T13:59:38Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=f3787
Handling connection for 9081
time="2023-11-03T13:59:38Z" level=debug duration=80.338619ms execID=f3787
time="2023-11-03T13:59:38Z" level=info msg="kubectl create ns argocd-e2e--test-create-repository-non-admin-user-with-wr-pboqd" dir= execID=54f82
time="2023-11-03T13:59:38Z" level=debug msg="namespace/argocd-e2e--test-create-repository-non-admin-user-with-wr-pboqd created\n" duration=160.728809ms execID=54f82
time="2023-11-03T13:59:38Z" level=info msg="kubectl label ns argocd-e2e--test-create-repository-non-admin-user-with-wr-pboqd e2e.argoproj.io=true" dir= execID=6c65b
time="2023-11-03T13:59:39Z" level=debug msg="namespace/argocd-e2e--test-create-repository-non-admin-user-with-wr-pboqd labeled\n" duration=235.429511ms execID=6c65b
time="2023-11-03T13:59:39Z" level=info msg="clean state" duration=2.596457701s id=TestCreateRepositoryNonAdminUserWithWrongProject-pboqd name=TestCreateRepositoryNonAdminUserWithWrongProject password=password username=admin
time="2023-11-03T13:59:40Z" level=info msg="../../dist/argocd account update-password --account test --current-password J3QcnyLs6kwTxhd50emMGrHPfBOUl2pj --new-password password --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjM3OCwibmJmIjoxNjk5MDE5OTc4LCJpYXQiOjE2OTkwMTk5NzgsImp0aSI6IjVlNjIxMTMwLThiYzQtNDMxOS1hYjNmLTJiYjhhYzlhYmViNSJ9.FuFQgfaooP1FV7RBlmsdFtnh96bfl_Qv_VZyxHYqe1U --insecure" dir= execID=e9f9f
time="2023-11-03T13:59:41Z" level=debug msg="Password updated\n" duration=1.152019659s execID=e9f9f
time="2023-11-03T13:59:42Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:59:43Z" level=info msg="../../dist/argocd repo add https://github.com/argoproj/argo-cd.git --project argo-project --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJ0ZXN0OmxvZ2luIiwiZXhwIjoxNjk5MTA2MzgyLCJuYmYiOjE2OTkwMTk5ODIsImlhdCI6MTY5OTAxOTk4MiwianRpIjoiNmE4MDRlMTQtOGQ4Yi00ZWRkLTk1M2QtZTE1ZTJiODlmNzkzIn0.91HGpF-CYg8VzX8vXaaIvzjlLzjBoFk3zaL0fiNdp4k --insecure" dir= execID=7cacc
time="2023-11-03T13:59:43Z" level=debug duration=64.402156ms execID=7cacc
time="2023-11-03T13:59:43Z" level=error msg="`../../dist/argocd repo add https://github.com/argoproj/argo-cd.git --project argo-project --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJ0ZXN0OmxvZ2luIiwiZXhwIjoxNjk5MTA2MzgyLCJuYmYiOjE2OTkwMTk5ODIsImlhdCI6MTY5OTAxOTk4MiwianRpIjoiNmE4MDRlMTQtOGQ4Yi00ZWRkLTk1M2QtZTE1ZTJiODlmNzkzIn0.91HGpF-CYg8VzX8vXaaIvzjlLzjBoFk3zaL0fiNdp4k --insecure` failed exit status 20: time=\"2023-11-03T13:59:43Z\" level=fatal msg=\"rpc error: code = PermissionDenied desc = permission denied: repositories, create, argo-project/https://github.com/argoproj/argo-cd.git, sub: test, iat: 2023-11-03T13:59:42Z\"" execID=7cacc
time="2023-11-03T13:59:43Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCreateRepositoryNonAdminUserWithWrongProject (6.66s)
=== RUN   TestDeleteRepositoryRbacAllowed
time="2023-11-03T13:59:43Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=d0a7e
time="2023-11-03T13:59:43Z" level=debug msg="namespace \"argocd-e2e--test-create-repository-non-admin-user-with-wr-pboqd\" deleted\n" duration=168.965451ms execID=d0a7e
time="2023-11-03T13:59:43Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=69f07
time="2023-11-03T13:59:43Z" level=debug msg="No resources found\n" duration=404.734285ms execID=69f07
time="2023-11-03T13:59:43Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=6962c
time="2023-11-03T13:59:44Z" level=debug msg="No resources found\n" duration=289.261656ms execID=6962c
time="2023-11-03T13:59:44Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:59:44Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjM4NCwibmJmIjoxNjk5MDE5OTg0LCJpYXQiOjE2OTkwMTk5ODQsImp0aSI6IjhhYTZhMmRiLWVjNWMtNGQ3Mi04OWE2LWM1ZDNjOTQzZjNiNSJ9.gpERYR1UbqfVM77BApoj31NlU6jVsQT7Za1E82wvgf8 --insecure" dir= execID=0382b
time="2023-11-03T13:59:44Z" level=debug duration=104.359168ms execID=0382b
time="2023-11-03T13:59:44Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=0daf6
time="2023-11-03T13:59:44Z" level=debug duration=1.952147ms execID=0daf6
time="2023-11-03T13:59:44Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=58b07
time="2023-11-03T13:59:44Z" level=debug duration=1.486018ms execID=58b07
time="2023-11-03T13:59:44Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=66c4c
time="2023-11-03T13:59:44Z" level=debug duration=1.386943ms execID=66c4c
time="2023-11-03T13:59:44Z" level=info msg="pkill -9 gpg-agent" dir= execID=50b54
time="2023-11-03T13:59:44Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=84c05
time="2023-11-03T13:59:44Z" level=debug duration=9.546611ms execID=84c05
time="2023-11-03T13:59:44Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=6e3a9
time="2023-11-03T13:59:45Z" level=debug duration=32.812482ms execID=6e3a9
time="2023-11-03T13:59:45Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=6629b
time="2023-11-03T13:59:45Z" level=debug duration=1.510934ms execID=6629b
time="2023-11-03T13:59:45Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=51096
time="2023-11-03T13:59:45Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.870667ms execID=51096
time="2023-11-03T13:59:45Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=914c6
time="2023-11-03T13:59:45Z" level=debug duration=43.463232ms execID=914c6
time="2023-11-03T13:59:45Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=e880c
time="2023-11-03T13:59:45Z" level=debug duration=21.88229ms execID=e880c
time="2023-11-03T13:59:45Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=c7825
time="2023-11-03T13:59:45Z" level=debug duration=3.029233ms execID=c7825
time="2023-11-03T13:59:45Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=0906d
Handling connection for 9081
time="2023-11-03T13:59:45Z" level=debug duration=78.462752ms execID=0906d
time="2023-11-03T13:59:45Z" level=info msg="kubectl create ns argocd-e2e--test-delete-repository-rbac-allowed-zwlwm" dir= execID=8b457
time="2023-11-03T13:59:45Z" level=debug msg="namespace/argocd-e2e--test-delete-repository-rbac-allowed-zwlwm created\n" duration=115.196081ms execID=8b457
time="2023-11-03T13:59:45Z" level=info msg="kubectl label ns argocd-e2e--test-delete-repository-rbac-allowed-zwlwm e2e.argoproj.io=true" dir= execID=84d07
time="2023-11-03T13:59:45Z" level=debug msg="namespace/argocd-e2e--test-delete-repository-rbac-allowed-zwlwm labeled\n" duration=281.259515ms execID=84d07
time="2023-11-03T13:59:45Z" level=info msg="clean state" duration=2.42740191s id=TestDeleteRepositoryRbacAllowed-zwlwm name=TestDeleteRepositoryRbacAllowed password=password username=admin
time="2023-11-03T13:59:46Z" level=info msg="../../dist/argocd account update-password --account test --current-password J3QcnyLs6kwTxhd50emMGrHPfBOUl2pj --new-password password --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjM4NCwibmJmIjoxNjk5MDE5OTg0LCJpYXQiOjE2OTkwMTk5ODQsImp0aSI6IjhhYTZhMmRiLWVjNWMtNGQ3Mi04OWE2LWM1ZDNjOTQzZjNiNSJ9.gpERYR1UbqfVM77BApoj31NlU6jVsQT7Za1E82wvgf8 --insecure" dir= execID=83296
time="2023-11-03T13:59:47Z" level=debug msg="Password updated\n" duration=1.246987268s execID=83296
time="2023-11-03T13:59:48Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:59:49Z" level=info msg="../../dist/argocd repo add https://github.com/argoproj/argo-cd.git --project argo-project --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJ0ZXN0OmxvZ2luIiwiZXhwIjoxNjk5MTA2Mzg4LCJuYmYiOjE2OTkwMTk5ODgsImlhdCI6MTY5OTAxOTk4OCwianRpIjoiYTQ4MjFlMzUtYzFiNC00MzBiLTg3MGUtY2MwYzU3YjEyNzJiIn0.Vv8CxbqHdxI59rOSzeaDBjOmEEDLn9wt2hV8XLk3TWc --insecure" dir= execID=1e274
time="2023-11-03T13:59:50Z" level=debug msg="Repository 'https://github.com/argoproj/argo-cd.git' added\n" duration=391.103967ms execID=1e274
time="2023-11-03T13:59:50Z" level=info msg="../../dist/argocd repo rm https://github.com/argoproj/argo-cd.git --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJ0ZXN0OmxvZ2luIiwiZXhwIjoxNjk5MTA2Mzg4LCJuYmYiOjE2OTkwMTk5ODgsImlhdCI6MTY5OTAxOTk4OCwianRpIjoiYTQ4MjFlMzUtYzFiNC00MzBiLTg3MGUtY2MwYzU3YjEyNzJiIn0.Vv8CxbqHdxI59rOSzeaDBjOmEEDLn9wt2hV8XLk3TWc --insecure" dir= execID=89bb9
time="2023-11-03T13:59:50Z" level=debug msg="Repository 'https://github.com/argoproj/argo-cd.git' removed\n" duration=170.765115ms execID=89bb9
time="2023-11-03T13:59:50Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestDeleteRepositoryRbacAllowed (7.14s)
=== RUN   TestDeleteRepositoryRbacDenied
time="2023-11-03T13:59:50Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=0891b
time="2023-11-03T13:59:50Z" level=debug msg="namespace \"argocd-e2e--test-delete-repository-rbac-allowed-zwlwm\" deleted\n" duration=249.851377ms execID=0891b
time="2023-11-03T13:59:50Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=f4436
time="2023-11-03T13:59:51Z" level=debug msg="No resources found\n" duration=506.370296ms execID=f4436
time="2023-11-03T13:59:51Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=70093
time="2023-11-03T13:59:51Z" level=debug msg="No resources found\n" duration=283.550125ms execID=70093
time="2023-11-03T13:59:52Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:59:52Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjM5MiwibmJmIjoxNjk5MDE5OTkyLCJpYXQiOjE2OTkwMTk5OTIsImp0aSI6ImY0YjkzMDY3LWVlNDktNGM3Ny05MGFiLWRmOTFjNTU4M2NjNiJ9.fveHF1ljN_4wXhzwdBaS8Km3_5T0oENlB9uUAvYeTCo --insecure" dir= execID=dba96
time="2023-11-03T13:59:52Z" level=debug duration=69.458207ms execID=dba96
time="2023-11-03T13:59:52Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=714d0
time="2023-11-03T13:59:52Z" level=debug duration=21.948126ms execID=714d0
time="2023-11-03T13:59:52Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=c23fb
time="2023-11-03T13:59:52Z" level=debug duration=1.827659ms execID=c23fb
time="2023-11-03T13:59:52Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=e831b
time="2023-11-03T13:59:52Z" level=debug duration=1.628767ms execID=e831b
time="2023-11-03T13:59:52Z" level=info msg="pkill -9 gpg-agent" dir= execID=88e6e
time="2023-11-03T13:59:52Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=23980
time="2023-11-03T13:59:52Z" level=debug duration=10.22496ms execID=23980
time="2023-11-03T13:59:52Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=162a2
time="2023-11-03T13:59:52Z" level=debug duration=118.474995ms execID=162a2
time="2023-11-03T13:59:52Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=99859
time="2023-11-03T13:59:52Z" level=debug duration=1.993766ms execID=99859
time="2023-11-03T13:59:52Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=4f7ec
time="2023-11-03T13:59:52Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.898259ms execID=4f7ec
time="2023-11-03T13:59:52Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=73aa3
time="2023-11-03T13:59:52Z" level=debug duration=24.984975ms execID=73aa3
time="2023-11-03T13:59:52Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=f2d28
time="2023-11-03T13:59:52Z" level=debug duration=19.92218ms execID=f2d28
time="2023-11-03T13:59:52Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=bda87
time="2023-11-03T13:59:52Z" level=debug duration=2.204181ms execID=bda87
time="2023-11-03T13:59:52Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=09f91
Handling connection for 9081
time="2023-11-03T13:59:52Z" level=debug duration=68.877159ms execID=09f91
time="2023-11-03T13:59:52Z" level=info msg="kubectl create ns argocd-e2e--test-delete-repository-rbac-denied-cjimr" dir= execID=f1661
time="2023-11-03T13:59:52Z" level=debug msg="namespace/argocd-e2e--test-delete-repository-rbac-denied-cjimr created\n" duration=142.185352ms execID=f1661
time="2023-11-03T13:59:52Z" level=info msg="kubectl label ns argocd-e2e--test-delete-repository-rbac-denied-cjimr e2e.argoproj.io=true" dir= execID=5e92c
time="2023-11-03T13:59:53Z" level=debug msg="namespace/argocd-e2e--test-delete-repository-rbac-denied-cjimr labeled\n" duration=246.973576ms execID=5e92c
time="2023-11-03T13:59:53Z" level=info msg="clean state" duration=2.807016142s id=TestDeleteRepositoryRbacDenied-cjimr name=TestDeleteRepositoryRbacDenied password=password username=admin
time="2023-11-03T13:59:54Z" level=info msg="../../dist/argocd account update-password --account test --current-password J3QcnyLs6kwTxhd50emMGrHPfBOUl2pj --new-password password --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjM5MiwibmJmIjoxNjk5MDE5OTkyLCJpYXQiOjE2OTkwMTk5OTIsImp0aSI6ImY0YjkzMDY3LWVlNDktNGM3Ny05MGFiLWRmOTFjNTU4M2NjNiJ9.fveHF1ljN_4wXhzwdBaS8Km3_5T0oENlB9uUAvYeTCo --insecure" dir= execID=7992e
time="2023-11-03T13:59:55Z" level=debug msg="Password updated\n" duration=1.233732262s execID=7992e
time="2023-11-03T13:59:56Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:59:57Z" level=info msg="../../dist/argocd repo add https://github.com/argoproj/argo-cd.git --project argo-project --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJ0ZXN0OmxvZ2luIiwiZXhwIjoxNjk5MTA2Mzk2LCJuYmYiOjE2OTkwMTk5OTYsImlhdCI6MTY5OTAxOTk5NiwianRpIjoiMTNjYzNlZWMtMzMwMy00ZDJmLWJmZjctNTQyZjJjN2YwM2ZjIn0.WtPTPRIxpukGJkczXnYWL63pSHu4gyowfJYH_ZmUC_M --insecure" dir= execID=c89e2
time="2023-11-03T13:59:57Z" level=debug msg="Repository 'https://github.com/argoproj/argo-cd.git' added\n" duration=406.8729ms execID=c89e2
time="2023-11-03T13:59:57Z" level=info msg="../../dist/argocd repo rm https://github.com/argoproj/argo-cd.git --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJ0ZXN0OmxvZ2luIiwiZXhwIjoxNjk5MTA2Mzk2LCJuYmYiOjE2OTkwMTk5OTYsImlhdCI6MTY5OTAxOTk5NiwianRpIjoiMTNjYzNlZWMtMzMwMy00ZDJmLWJmZjctNTQyZjJjN2YwM2ZjIn0.WtPTPRIxpukGJkczXnYWL63pSHu4gyowfJYH_ZmUC_M --insecure" dir= execID=1ea8b
time="2023-11-03T13:59:58Z" level=debug duration=56.94003ms execID=1ea8b
time="2023-11-03T13:59:58Z" level=error msg="`../../dist/argocd repo rm https://github.com/argoproj/argo-cd.git --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJ0ZXN0OmxvZ2luIiwiZXhwIjoxNjk5MTA2Mzk2LCJuYmYiOjE2OTkwMTk5OTYsImlhdCI6MTY5OTAxOTk5NiwianRpIjoiMTNjYzNlZWMtMzMwMy00ZDJmLWJmZjctNTQyZjJjN2YwM2ZjIn0.WtPTPRIxpukGJkczXnYWL63pSHu4gyowfJYH_ZmUC_M --insecure` failed exit status 20: time=\"2023-11-03T13:59:58Z\" level=fatal msg=\"rpc error: code = PermissionDenied desc = permission denied: repositories, delete, argo-project/https://github.com/argoproj/argo-cd.git, sub: test, iat: 2023-11-03T13:59:56Z\"" execID=1ea8b
time="2023-11-03T13:59:58Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestDeleteRepositoryRbacDenied (7.78s)
=== RUN   TestDeleteRepository
time="2023-11-03T13:59:58Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=0d285
time="2023-11-03T13:59:58Z" level=debug msg="namespace \"argocd-e2e--test-delete-repository-rbac-denied-cjimr\" deleted\n" duration=160.467508ms execID=0d285
time="2023-11-03T13:59:58Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=0e30b
time="2023-11-03T13:59:58Z" level=debug msg="No resources found\n" duration=354.416195ms execID=0e30b
time="2023-11-03T13:59:58Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=0d33f
time="2023-11-03T13:59:58Z" level=debug msg="No resources found\n" duration=218.10795ms execID=0d33f
time="2023-11-03T13:59:59Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T13:59:59Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjM5OSwibmJmIjoxNjk5MDE5OTk5LCJpYXQiOjE2OTkwMTk5OTksImp0aSI6IjRjYTdkNmE2LWUxODMtNGVjYi05ZWM3LTg1MTIyNWQyNGJkZSJ9.0vShG50n0dhfMCxHQYMj-OvTjH-cb0bXZ3t34OuAp4Q --insecure" dir= execID=b43e3
time="2023-11-03T13:59:59Z" level=debug duration=93.238688ms execID=b43e3
time="2023-11-03T13:59:59Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=28b29
time="2023-11-03T13:59:59Z" level=debug duration=2.005986ms execID=28b29
time="2023-11-03T13:59:59Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=fcf67
time="2023-11-03T13:59:59Z" level=debug duration=1.570271ms execID=fcf67
time="2023-11-03T13:59:59Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=cef95
time="2023-11-03T13:59:59Z" level=debug duration=1.478078ms execID=cef95
time="2023-11-03T13:59:59Z" level=info msg="pkill -9 gpg-agent" dir= execID=fa581
time="2023-11-03T13:59:59Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=ddbc6
time="2023-11-03T13:59:59Z" level=debug duration=9.85395ms execID=ddbc6
time="2023-11-03T13:59:59Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=64227
time="2023-11-03T13:59:59Z" level=debug duration=71.739481ms execID=64227
time="2023-11-03T13:59:59Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=90952
time="2023-11-03T13:59:59Z" level=debug duration=1.958473ms execID=90952
time="2023-11-03T13:59:59Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=d2ebe
time="2023-11-03T13:59:59Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.955213ms execID=d2ebe
time="2023-11-03T13:59:59Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=94418
time="2023-11-03T13:59:59Z" level=debug duration=26.542867ms execID=94418
time="2023-11-03T13:59:59Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=a4155
time="2023-11-03T13:59:59Z" level=debug duration=21.201181ms execID=a4155
time="2023-11-03T13:59:59Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=083d3
time="2023-11-03T13:59:59Z" level=debug duration=2.001329ms execID=083d3
time="2023-11-03T13:59:59Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=309b7
Handling connection for 9081
time="2023-11-03T13:59:59Z" level=debug duration=74.054673ms execID=309b7
time="2023-11-03T13:59:59Z" level=info msg="kubectl create ns argocd-e2e--test-delete-repository-ceiyt" dir= execID=e3f16
time="2023-11-03T13:59:59Z" level=debug msg="namespace/argocd-e2e--test-delete-repository-ceiyt created\n" duration=148.195925ms execID=e3f16
time="2023-11-03T13:59:59Z" level=info msg="kubectl label ns argocd-e2e--test-delete-repository-ceiyt e2e.argoproj.io=true" dir= execID=d8c56
time="2023-11-03T14:00:00Z" level=debug msg="namespace/argocd-e2e--test-delete-repository-ceiyt labeled\n" duration=230.153038ms execID=d8c56
time="2023-11-03T14:00:00Z" level=info msg="clean state" duration=2.113032657s id=TestDeleteRepository-ceiyt name=TestDeleteRepository password=password username=admin
time="2023-11-03T14:00:01Z" level=info msg="../../dist/argocd repo add https://github.com/argoproj/argo-cd.git --project argo-project --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjM5OSwibmJmIjoxNjk5MDE5OTk5LCJpYXQiOjE2OTkwMTk5OTksImp0aSI6IjRjYTdkNmE2LWUxODMtNGVjYi05ZWM3LTg1MTIyNWQyNGJkZSJ9.0vShG50n0dhfMCxHQYMj-OvTjH-cb0bXZ3t34OuAp4Q --insecure" dir= execID=46c2b
time="2023-11-03T14:00:01Z" level=debug msg="Repository 'https://github.com/argoproj/argo-cd.git' added\n" duration=505.931532ms execID=46c2b
time="2023-11-03T14:00:01Z" level=info msg="../../dist/argocd repo rm https://github.com/argoproj/argo-cd.git --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjM5OSwibmJmIjoxNjk5MDE5OTk5LCJpYXQiOjE2OTkwMTk5OTksImp0aSI6IjRjYTdkNmE2LWUxODMtNGVjYi05ZWM3LTg1MTIyNWQyNGJkZSJ9.0vShG50n0dhfMCxHQYMj-OvTjH-cb0bXZ3t34OuAp4Q --insecure" dir= execID=7510f
time="2023-11-03T14:00:01Z" level=debug msg="Repository 'https://github.com/argoproj/argo-cd.git' removed\n" duration=186.630344ms execID=7510f
time="2023-11-03T14:00:01Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestDeleteRepository (3.83s)
=== RUN   TestListRepoCLIOutput
time="2023-11-03T14:00:01Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=3d485
time="2023-11-03T14:00:02Z" level=debug msg="namespace \"argocd-e2e--test-delete-repository-ceiyt\" deleted\n" duration=314.718998ms execID=3d485
time="2023-11-03T14:00:02Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=ec860
time="2023-11-03T14:00:02Z" level=debug msg="No resources found\n" duration=450.898387ms execID=ec860
time="2023-11-03T14:00:02Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=932e1
time="2023-11-03T14:00:03Z" level=debug msg="No resources found\n" duration=347.731105ms execID=932e1
time="2023-11-03T14:00:04Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T14:00:04Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjQwMywibmJmIjoxNjk5MDIwMDAzLCJpYXQiOjE2OTkwMjAwMDMsImp0aSI6ImFhZjRhOTEyLTgxMTAtNDY1Yi1iZTExLTlkMTI3ZWNkYzUwOCJ9.vG36B1jnDMBBttojZ2uYm7Y9KHd9u1_Py2i4PRebITY --insecure" dir= execID=1bee7
time="2023-11-03T14:00:04Z" level=debug duration=194.614223ms execID=1bee7
time="2023-11-03T14:00:04Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=867e2
time="2023-11-03T14:00:04Z" level=debug duration=1.968325ms execID=867e2
time="2023-11-03T14:00:04Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=e94ab
time="2023-11-03T14:00:04Z" level=debug duration=1.771789ms execID=e94ab
time="2023-11-03T14:00:04Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=d5b50
time="2023-11-03T14:00:04Z" level=debug duration=1.625832ms execID=d5b50
time="2023-11-03T14:00:04Z" level=info msg="pkill -9 gpg-agent" dir= execID=fba59
time="2023-11-03T14:00:04Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=968fc
time="2023-11-03T14:00:04Z" level=debug duration=17.647735ms execID=968fc
time="2023-11-03T14:00:04Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=dcdb5
time="2023-11-03T14:00:04Z" level=debug duration=58.362153ms execID=dcdb5
time="2023-11-03T14:00:04Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=355cf
time="2023-11-03T14:00:04Z" level=debug duration=1.869183ms execID=355cf
time="2023-11-03T14:00:04Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=070d4
time="2023-11-03T14:00:04Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.613746ms execID=070d4
time="2023-11-03T14:00:04Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=aced0
time="2023-11-03T14:00:04Z" level=debug duration=28.412584ms execID=aced0
time="2023-11-03T14:00:04Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=a4fa4
time="2023-11-03T14:00:04Z" level=debug duration=35.553406ms execID=a4fa4
time="2023-11-03T14:00:04Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=51298
time="2023-11-03T14:00:04Z" level=debug duration=2.295557ms execID=51298
time="2023-11-03T14:00:04Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=83925
Handling connection for 9081
time="2023-11-03T14:00:04Z" level=debug duration=66.975287ms execID=83925
time="2023-11-03T14:00:04Z" level=info msg="kubectl create ns argocd-e2e--test-list-repo-cli-output-lnggs" dir= execID=fbc24
time="2023-11-03T14:00:04Z" level=debug msg="namespace/argocd-e2e--test-list-repo-cli-output-lnggs created\n" duration=148.885442ms execID=fbc24
time="2023-11-03T14:00:04Z" level=info msg="kubectl label ns argocd-e2e--test-list-repo-cli-output-lnggs e2e.argoproj.io=true" dir= execID=d0928
time="2023-11-03T14:00:04Z" level=debug msg="namespace/argocd-e2e--test-list-repo-cli-output-lnggs labeled\n" duration=297.345161ms execID=d0928
time="2023-11-03T14:00:04Z" level=info msg="clean state" duration=3.079262185s id=TestListRepoCLIOutput-lnggs name=TestListRepoCLIOutput password=password username=admin
time="2023-11-03T14:00:05Z" level=info msg="../../dist/argocd repo add https://github.com/argoproj/argo-cd.git --project argo-project --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjQwMywibmJmIjoxNjk5MDIwMDAzLCJpYXQiOjE2OTkwMjAwMDMsImp0aSI6ImFhZjRhOTEyLTgxMTAtNDY1Yi1iZTExLTlkMTI3ZWNkYzUwOCJ9.vG36B1jnDMBBttojZ2uYm7Y9KHd9u1_Py2i4PRebITY --insecure" dir= execID=9bbc9
time="2023-11-03T14:00:06Z" level=debug msg="Repository 'https://github.com/argoproj/argo-cd.git' added\n" duration=477.442396ms execID=9bbc9
time="2023-11-03T14:00:06Z" level=info msg="../../dist/argocd repo list --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjQwMywibmJmIjoxNjk5MDIwMDAzLCJpYXQiOjE2OTkwMjAwMDMsImp0aSI6ImFhZjRhOTEyLTgxMTAtNDY1Yi1iZTExLTlkMTI3ZWNkYzUwOCJ9.vG36B1jnDMBBttojZ2uYm7Y9KHd9u1_Py2i4PRebITY --insecure" dir= execID=5061c
time="2023-11-03T14:00:06Z" level=debug msg="TYPE  NAME  REPO                                     INSECURE  OCI    LFS    CREDS  STATUS      MESSAGE  PROJECT\ngit         https://github.com/argoproj/argo-cd.git  false     false  false  false  Successful           argo-project\n" duration=378.196767ms execID=5061c
time="2023-11-03T14:00:06Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestListRepoCLIOutput (4.94s)
=== RUN   TestGetRepoCLIOutput
time="2023-11-03T14:00:06Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=4318f
time="2023-11-03T14:00:07Z" level=debug msg="namespace \"argocd-e2e--test-list-repo-cli-output-lnggs\" deleted\n" duration=259.925012ms execID=4318f
time="2023-11-03T14:00:07Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=a7063
time="2023-11-03T14:00:07Z" level=debug msg="No resources found\n" duration=474.575495ms execID=a7063
time="2023-11-03T14:00:07Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=ef7e2
time="2023-11-03T14:00:07Z" level=debug msg="No resources found\n" duration=223.753136ms execID=ef7e2
time="2023-11-03T14:00:08Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T14:00:08Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjQwOCwibmJmIjoxNjk5MDIwMDA4LCJpYXQiOjE2OTkwMjAwMDgsImp0aSI6ImRiMjhiOGEzLTYxN2YtNGRlNi04NGFlLTY2MzBkMDZjN2FjZSJ9.kSPEpiaUsbZ1tHiQh80fGkV1wDUyRXyrfdUXBh1fPqA --insecure" dir= execID=ff0de
time="2023-11-03T14:00:09Z" level=debug duration=128.145765ms execID=ff0de
time="2023-11-03T14:00:09Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=12c07
time="2023-11-03T14:00:09Z" level=debug duration=2.317249ms execID=12c07
time="2023-11-03T14:00:09Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=51e30
time="2023-11-03T14:00:09Z" level=debug duration=1.701568ms execID=51e30
time="2023-11-03T14:00:09Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=0ed96
time="2023-11-03T14:00:09Z" level=debug duration=1.486866ms execID=0ed96
time="2023-11-03T14:00:09Z" level=info msg="pkill -9 gpg-agent" dir= execID=72c1c
time="2023-11-03T14:00:09Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=1a038
time="2023-11-03T14:00:09Z" level=debug duration=10.132136ms execID=1a038
time="2023-11-03T14:00:09Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=d615f
time="2023-11-03T14:00:09Z" level=debug duration=36.57794ms execID=d615f
time="2023-11-03T14:00:09Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=a4b65
time="2023-11-03T14:00:09Z" level=debug duration=1.982973ms execID=a4b65
time="2023-11-03T14:00:09Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=e34bd
time="2023-11-03T14:00:09Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.237957ms execID=e34bd
time="2023-11-03T14:00:09Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=c6b9a
time="2023-11-03T14:00:09Z" level=debug duration=35.404809ms execID=c6b9a
time="2023-11-03T14:00:09Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=8b00a
time="2023-11-03T14:00:09Z" level=debug duration=31.15822ms execID=8b00a
time="2023-11-03T14:00:09Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=c49e2
time="2023-11-03T14:00:09Z" level=debug duration=2.605591ms execID=c49e2
time="2023-11-03T14:00:09Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=ca5e6
Handling connection for 9081
time="2023-11-03T14:00:09Z" level=debug duration=89.420435ms execID=ca5e6
time="2023-11-03T14:00:09Z" level=info msg="kubectl create ns argocd-e2e--test-get-repo-cli-output-vblqo" dir= execID=8b8b2
time="2023-11-03T14:00:09Z" level=debug msg="namespace/argocd-e2e--test-get-repo-cli-output-vblqo created\n" duration=167.064452ms execID=8b8b2
time="2023-11-03T14:00:09Z" level=info msg="kubectl label ns argocd-e2e--test-get-repo-cli-output-vblqo e2e.argoproj.io=true" dir= execID=fa70d
time="2023-11-03T14:00:09Z" level=debug msg="namespace/argocd-e2e--test-get-repo-cli-output-vblqo labeled\n" duration=312.727161ms execID=fa70d
time="2023-11-03T14:00:09Z" level=info msg="clean state" duration=2.94867348s id=TestGetRepoCLIOutput-vblqo name=TestGetRepoCLIOutput password=password username=admin
time="2023-11-03T14:00:10Z" level=info msg="../../dist/argocd repo add https://github.com/argoproj/argo-cd.git --project argo-project --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjQwOCwibmJmIjoxNjk5MDIwMDA4LCJpYXQiOjE2OTkwMjAwMDgsImp0aSI6ImRiMjhiOGEzLTYxN2YtNGRlNi04NGFlLTY2MzBkMDZjN2FjZSJ9.kSPEpiaUsbZ1tHiQh80fGkV1wDUyRXyrfdUXBh1fPqA --insecure" dir= execID=12566
time="2023-11-03T14:00:11Z" level=debug msg="Repository 'https://github.com/argoproj/argo-cd.git' added\n" duration=428.948503ms execID=12566
time="2023-11-03T14:00:11Z" level=info msg="../../dist/argocd repo get https://github.com/argoproj/argo-cd.git --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjQwOCwibmJmIjoxNjk5MDIwMDA4LCJpYXQiOjE2OTkwMjAwMDgsImp0aSI6ImRiMjhiOGEzLTYxN2YtNGRlNi04NGFlLTY2MzBkMDZjN2FjZSJ9.kSPEpiaUsbZ1tHiQh80fGkV1wDUyRXyrfdUXBh1fPqA --insecure" dir= execID=a0c3e
time="2023-11-03T14:00:11Z" level=debug msg="TYPE  NAME  REPO                                     INSECURE  OCI    LFS    CREDS  STATUS      MESSAGE  PROJECT\ngit         https://github.com/argoproj/argo-cd.git  false     false  false  false  Successful           argo-project\n" duration=60.186355ms execID=a0c3e
time="2023-11-03T14:00:11Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestGetRepoCLIOutput (4.44s)
=== RUN   TestSelectiveSync
time="2023-11-03T14:00:11Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=dc0fd
time="2023-11-03T14:00:11Z" level=debug msg="namespace \"argocd-e2e--test-get-repo-cli-output-vblqo\" deleted\n" duration=372.272557ms execID=dc0fd
time="2023-11-03T14:00:11Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=00c6a
time="2023-11-03T14:00:12Z" level=debug msg="No resources found\n" duration=419.574873ms execID=00c6a
time="2023-11-03T14:00:12Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=90e08
time="2023-11-03T14:00:12Z" level=debug msg="No resources found\n" duration=338.551197ms execID=90e08
time="2023-11-03T14:00:13Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T14:00:13Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjQxMywibmJmIjoxNjk5MDIwMDEzLCJpYXQiOjE2OTkwMjAwMTMsImp0aSI6ImMzZjlmYWE4LTY4ZDUtNDA3NC05MjQ1LWQ4YWE2NTQ0OTkyNCJ9.tEYcp8MS8fA5-7UXzBiW5KmuqDENhnV4E3HaI8gRi9Y --insecure" dir= execID=4fd59
time="2023-11-03T14:00:13Z" level=debug duration=79.92471ms execID=4fd59
time="2023-11-03T14:00:13Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=00447
time="2023-11-03T14:00:13Z" level=debug duration=1.794814ms execID=00447
time="2023-11-03T14:00:13Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=59877
time="2023-11-03T14:00:13Z" level=debug duration=1.643678ms execID=59877
time="2023-11-03T14:00:13Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=75ea1
time="2023-11-03T14:00:13Z" level=debug duration=1.513312ms execID=75ea1
time="2023-11-03T14:00:13Z" level=info msg="pkill -9 gpg-agent" dir= execID=d40d2
time="2023-11-03T14:00:13Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=ecfe7
time="2023-11-03T14:00:13Z" level=debug duration=9.898664ms execID=ecfe7
time="2023-11-03T14:00:13Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=f98b2
time="2023-11-03T14:00:13Z" level=debug duration=86.577821ms execID=f98b2
time="2023-11-03T14:00:13Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=ecd62
time="2023-11-03T14:00:13Z" level=debug duration=79.598978ms execID=ecd62
time="2023-11-03T14:00:13Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=0d8f5
time="2023-11-03T14:00:13Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.734545ms execID=0d8f5
time="2023-11-03T14:00:13Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=88d31
time="2023-11-03T14:00:13Z" level=debug duration=32.022677ms execID=88d31
time="2023-11-03T14:00:13Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=196df
time="2023-11-03T14:00:13Z" level=debug duration=22.732358ms execID=196df
time="2023-11-03T14:00:13Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=71a7d
time="2023-11-03T14:00:13Z" level=debug duration=2.151193ms execID=71a7d
time="2023-11-03T14:00:13Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=fac96
Handling connection for 9081
time="2023-11-03T14:00:13Z" level=debug duration=79.826345ms execID=fac96
time="2023-11-03T14:00:13Z" level=info msg="kubectl create ns argocd-e2e--test-selective-sync-tlfqf" dir= execID=29b2e
time="2023-11-03T14:00:13Z" level=debug msg="namespace/argocd-e2e--test-selective-sync-tlfqf created\n" duration=156.530011ms execID=29b2e
time="2023-11-03T14:00:13Z" level=info msg="kubectl label ns argocd-e2e--test-selective-sync-tlfqf e2e.argoproj.io=true" dir= execID=d9d61
time="2023-11-03T14:00:14Z" level=debug msg="namespace/argocd-e2e--test-selective-sync-tlfqf labeled\n" duration=226.906685ms execID=d9d61
time="2023-11-03T14:00:14Z" level=info msg="clean state" duration=2.804125116s id=TestSelectiveSync-tlfqf name=TestSelectiveSync password=password username=admin
time="2023-11-03T14:00:15Z" level=info msg="../../dist/argocd app create test-selective-sync --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook --project default --dest-namespace argocd-e2e--test-selective-sync-tlfqf --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjQxMywibmJmIjoxNjk5MDIwMDEzLCJpYXQiOjE2OTkwMjAwMTMsImp0aSI6ImMzZjlmYWE4LTY4ZDUtNDA3NC05MjQ1LWQ4YWE2NTQ0OTkyNCJ9.tEYcp8MS8fA5-7UXzBiW5KmuqDENhnV4E3HaI8gRi9Y --insecure" dir= execID=f023e
time="2023-11-03T14:00:15Z" level=debug msg="application 'test-selective-sync' created\n" duration=670.533463ms execID=f023e
time="2023-11-03T14:00:15Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T14:00:15Z" level=info msg="../../dist/argocd app sync test-selective-sync --timeout 30 --prune --resource :Service:guestbook-ui --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjQxMywibmJmIjoxNjk5MDIwMDEzLCJpYXQiOjE2OTkwMjAwMTMsImp0aSI6ImMzZjlmYWE4LTY4ZDUtNDA3NC05MjQ1LWQ4YWE2NTQ0OTkyNCJ9.tEYcp8MS8fA5-7UXzBiW5KmuqDENhnV4E3HaI8gRi9Y --insecure" dir= execID=20a23
time="2023-11-03T14:00:16Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T14:00:15+00:00            Service  argocd-e2e--test-selective-sync-tlfqf          guestbook-ui  OutOfSync  Missing              \n2023-11-03T14:00:16+00:00            Service  argocd-e2e--test-selective-sync-tlfqf          guestbook-ui  OutOfSync  Missing              service/guestbook-ui created\n2023-11-03T14:00:16+00:00            Service  argocd-e2e--test-selective-sync-tlfqf          guestbook-ui    Synced  Healthy              service/guestbook-ui created\n\nName:               argocd-e2e/test-selective-sync\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-selective-sync-tlfqf\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-selective-sync\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (9c79238)\nHealth Status:      Missing\n\nOperation:          Sync\nSync Revision:      9c79238a27d451aca7086cd075516d95a77ec311\nPhase:              Succeeded\nStart:              2023-11-03 14:00:15 +0000 UTC\nFinished:           2023-11-03 14:00:16 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                              NAME          STATUS     HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-selective-sync-tlfqf  guestbook-ui  Synced     Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-selective-sync-tlfqf  guestbook-ui  OutOfSync  Missing        \n" duration=838.035857ms execID=20a23
time="2023-11-03T14:00:16Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T14:00:16Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T14:00:16Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T14:00:16Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T14:00:16Z" level=info msg="expectation succeeded: resource 'Service/guestbook-ui' health should be Healthy, is Healthy"
time="2023-11-03T14:00:16Z" level=info msg="expectation succeeded: resource 'Deployment/guestbook-ui' health should be Missing, is Missing"
time="2023-11-03T14:00:16Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestSelectiveSync (5.34s)
=== RUN   TestSelectiveSyncDoesNotRunHooks
time="2023-11-03T14:00:16Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=fb7ce
time="2023-11-03T14:00:16Z" level=debug msg="namespace \"argocd-e2e--test-selective-sync-tlfqf\" deleted\n" duration=225.653213ms execID=fb7ce
time="2023-11-03T14:00:16Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=52a55
time="2023-11-03T14:00:17Z" level=debug msg="No resources found\n" duration=457.330834ms execID=52a55
time="2023-11-03T14:00:17Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=b8c62
time="2023-11-03T14:00:17Z" level=debug msg="No resources found\n" duration=309.773497ms execID=b8c62
time="2023-11-03T14:00:18Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T14:00:18Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjQxOCwibmJmIjoxNjk5MDIwMDE4LCJpYXQiOjE2OTkwMjAwMTgsImp0aSI6IjcxNWZhNTI2LTUwZWEtNDVhMC05NjFhLTQ2NzdkMGQzMDRjYiJ9.8lmVzL7t77uJQiVRmIRRy1Sa7NlE8o4tXLMrqwMiv0k --insecure" dir= execID=a5e40
time="2023-11-03T14:00:18Z" level=debug duration=93.859047ms execID=a5e40
time="2023-11-03T14:00:18Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=3ae2a
time="2023-11-03T14:00:18Z" level=debug duration=64.196302ms execID=3ae2a
time="2023-11-03T14:00:18Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=07cd9
time="2023-11-03T14:00:18Z" level=debug duration=98.716941ms execID=07cd9
time="2023-11-03T14:00:18Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=4a95c
time="2023-11-03T14:00:18Z" level=debug duration=2.513009ms execID=4a95c
time="2023-11-03T14:00:18Z" level=info msg="pkill -9 gpg-agent" dir= execID=d6cf0
time="2023-11-03T14:00:18Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=e10e7
time="2023-11-03T14:00:18Z" level=debug duration=10.715434ms execID=e10e7
time="2023-11-03T14:00:18Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=4c8ff
time="2023-11-03T14:00:18Z" level=debug duration=121.695091ms execID=4c8ff
time="2023-11-03T14:00:18Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=70910
time="2023-11-03T14:00:18Z" level=debug duration=2.040756ms execID=70910
time="2023-11-03T14:00:18Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=a9cea
time="2023-11-03T14:00:18Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.215138ms execID=a9cea
time="2023-11-03T14:00:18Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=75fd8
time="2023-11-03T14:00:18Z" level=debug duration=30.30875ms execID=75fd8
time="2023-11-03T14:00:18Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=5ecc8
time="2023-11-03T14:00:19Z" level=debug duration=23.588916ms execID=5ecc8
time="2023-11-03T14:00:19Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=19225
time="2023-11-03T14:00:19Z" level=debug duration=4.185158ms execID=19225
time="2023-11-03T14:00:19Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=7bf35
Handling connection for 9081
time="2023-11-03T14:00:19Z" level=debug duration=66.394179ms execID=7bf35
time="2023-11-03T14:00:19Z" level=info msg="kubectl create ns argocd-e2e--test-selective-sync-does-not-run-hooks-fuvjl" dir= execID=b1caa
time="2023-11-03T14:00:19Z" level=debug msg="namespace/argocd-e2e--test-selective-sync-does-not-run-hooks-fuvjl created\n" duration=163.86854ms execID=b1caa
time="2023-11-03T14:00:19Z" level=info msg="kubectl label ns argocd-e2e--test-selective-sync-does-not-run-hooks-fuvjl e2e.argoproj.io=true" dir= execID=dd769
time="2023-11-03T14:00:19Z" level=debug msg="namespace/argocd-e2e--test-selective-sync-does-not-run-hooks-fuvjl labeled\n" duration=370.161412ms execID=dd769
time="2023-11-03T14:00:19Z" level=info msg="clean state" duration=3.042586598s id=TestSelectiveSyncDoesNotRunHooks-fuvjl name=TestSelectiveSyncDoesNotRunHooks password=password username=admin
time="2023-11-03T14:00:20Z" level=info msg="../../dist/argocd app create test-selective-sync-does-not-run-hooks --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path hook --project default --dest-namespace argocd-e2e--test-selective-sync-does-not-run-hooks-fuvjl --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjQxOCwibmJmIjoxNjk5MDIwMDE4LCJpYXQiOjE2OTkwMjAwMTgsImp0aSI6IjcxNWZhNTI2LTUwZWEtNDVhMC05NjFhLTQ2NzdkMGQzMDRjYiJ9.8lmVzL7t77uJQiVRmIRRy1Sa7NlE8o4tXLMrqwMiv0k --insecure" dir= execID=47fe5
time="2023-11-03T14:00:20Z" level=debug msg="application 'test-selective-sync-does-not-run-hooks' created\n" duration=240.777141ms execID=47fe5
time="2023-11-03T14:00:20Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T14:00:20Z" level=info msg="../../dist/argocd app sync test-selective-sync-does-not-run-hooks --timeout 30 --prune --resource :Pod:pod --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjQxOCwibmJmIjoxNjk5MDIwMDE4LCJpYXQiOjE2OTkwMjAwMTgsImp0aSI6IjcxNWZhNTI2LTUwZWEtNDVhMC05NjFhLTQ2NzdkMGQzMDRjYiJ9.8lmVzL7t77uJQiVRmIRRy1Sa7NlE8o4tXLMrqwMiv0k --insecure" dir= execID=be0e8
time="2023-11-03T14:00:21Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                                NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T14:00:21+00:00                Pod  argocd-e2e--test-selective-sync-does-not-run-hooks-fuvjl                   pod  OutOfSync  Missing              \n\nName:               argocd-e2e/test-selective-sync-does-not-run-hooks\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-selective-sync-does-not-run-hooks-fuvjl\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-selective-sync-does-not-run-hooks\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               hook\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (01aec22)\nHealth Status:      Progressing\n\nOperation:          Sync\nSync Revision:      01aec22b6a8f091c024f3e67f8725d1a26911570\nPhase:              Succeeded\nStart:              2023-11-03 14:00:20 +0000 UTC\nFinished:           2023-11-03 14:00:21 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND  NAMESPACE                                                 NAME  STATUS  HEALTH       HOOK  MESSAGE\n       Pod   argocd-e2e--test-selective-sync-does-not-run-hooks-fuvjl  pod   Synced  Progressing        pod/pod created\n" duration=649.958987ms execID=be0e8
time="2023-11-03T14:00:21Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T14:00:21Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T14:00:21Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T14:00:21Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T14:00:21Z" level=info msg="pending: health to should Healthy, is Progressing"
time="2023-11-03T14:00:24Z" level=info msg="pending: health to should Healthy, is Progressing"
time="2023-11-03T14:00:27Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T14:00:27Z" level=info msg="expectation succeeded: resource 'Pod/pod' health should be Healthy, is Healthy"
time="2023-11-03T14:00:27Z" level=info msg="expectation succeeded: right number of results, want 1, got 1"
time="2023-11-03T14:00:27Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestSelectiveSyncDoesNotRunHooks (10.98s)
=== RUN   TestSelectiveSyncWithoutNamespace
time="2023-11-03T14:00:27Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=7cc43
time="2023-11-03T14:00:27Z" level=debug msg="namespace \"argocd-e2e--test-selective-sync-does-not-run-hooks-fuvjl\" deleted\n" duration=270.826406ms execID=7cc43
time="2023-11-03T14:00:27Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=d418c
time="2023-11-03T14:00:28Z" level=debug msg="No resources found\n" duration=483.940499ms execID=d418c
time="2023-11-03T14:00:28Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=240ed
time="2023-11-03T14:00:28Z" level=debug msg="No resources found\n" duration=291.667672ms execID=240ed
time="2023-11-03T14:00:29Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T14:00:29Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjQyOSwibmJmIjoxNjk5MDIwMDI5LCJpYXQiOjE2OTkwMjAwMjksImp0aSI6IjBlZTM5ZmVhLTg1NDItNDNhMS1hZWYxLTBmMGRkNGQ5M2MyMSJ9.OX8zbQ2y2CLC1EKVnTFxh_35iXLJkZvsazSeNe4ogec --insecure" dir= execID=b87d1
time="2023-11-03T14:00:29Z" level=debug duration=111.750012ms execID=b87d1
time="2023-11-03T14:00:29Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=a1ddf
time="2023-11-03T14:00:29Z" level=debug duration=2.107016ms execID=a1ddf
time="2023-11-03T14:00:29Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=ccdde
time="2023-11-03T14:00:29Z" level=debug duration=1.59422ms execID=ccdde
time="2023-11-03T14:00:29Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=c21e0
time="2023-11-03T14:00:29Z" level=debug duration=1.669738ms execID=c21e0
time="2023-11-03T14:00:29Z" level=info msg="pkill -9 gpg-agent" dir= execID=59d97
time="2023-11-03T14:00:29Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=7544e
time="2023-11-03T14:00:29Z" level=debug duration=10.293367ms execID=7544e
time="2023-11-03T14:00:29Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=2f401
time="2023-11-03T14:00:29Z" level=debug duration=58.596561ms execID=2f401
time="2023-11-03T14:00:29Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=9b768
time="2023-11-03T14:00:29Z" level=debug duration=1.898475ms execID=9b768
time="2023-11-03T14:00:29Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=5239c
time="2023-11-03T14:00:29Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.043991ms execID=5239c
time="2023-11-03T14:00:29Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=d4ad9
time="2023-11-03T14:00:29Z" level=debug duration=27.752068ms execID=d4ad9
time="2023-11-03T14:00:29Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=13f0c
time="2023-11-03T14:00:29Z" level=debug duration=23.063274ms execID=13f0c
time="2023-11-03T14:00:29Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=63aa8
time="2023-11-03T14:00:29Z" level=debug duration=2.321478ms execID=63aa8
time="2023-11-03T14:00:29Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=d19eb
Handling connection for 9081
time="2023-11-03T14:00:30Z" level=debug duration=83.900117ms execID=d19eb
time="2023-11-03T14:00:30Z" level=info msg="kubectl create ns argocd-e2e--test-selective-sync-without-namespace-rrdva" dir= execID=24d3d
time="2023-11-03T14:00:30Z" level=debug msg="namespace/argocd-e2e--test-selective-sync-without-namespace-rrdva created\n" duration=201.629066ms execID=24d3d
time="2023-11-03T14:00:30Z" level=info msg="kubectl label ns argocd-e2e--test-selective-sync-without-namespace-rrdva e2e.argoproj.io=true" dir= execID=fe11c
time="2023-11-03T14:00:30Z" level=debug msg="namespace/argocd-e2e--test-selective-sync-without-namespace-rrdva labeled\n" duration=348.769497ms execID=fe11c
time="2023-11-03T14:00:30Z" level=info msg="clean state" duration=3.069010915s id=TestSelectiveSyncWithoutNamespace-rrdva name=TestSelectiveSyncWithoutNamespace password=password username=admin
time="2023-11-03T14:00:30Z" level=info msg="kubectl create namespace argocd-e2e-test-selective-sync-without-namespace-hkxkf" dir= execID=bc0b2
time="2023-11-03T14:00:30Z" level=debug msg="namespace/argocd-e2e-test-selective-sync-without-namespace-hkxkf created\n" duration=196.312967ms execID=bc0b2
time="2023-11-03T14:00:31Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/metadata/namespace\", \"value\": \"argocd-e2e-test-selective-sync-without-namespace-hkxkf\"}]" path=guestbook-with-namespace/guestbook-ui-deployment-ns.yaml
time="2023-11-03T14:00:31Z" level=info msg="converting YAML to JSON"
time="2023-11-03T14:00:31Z" level=info msg=JSON bytes="{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"name\":\"guestbook-ui\",\"namespace\":\"namespace\"},\"spec\":{\"replicas\":0,\"revisionHistoryLimit\":3,\"selector\":{\"matchLabels\":{\"app\":\"guestbook-ui\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"guestbook-ui\"}},\"spec\":{\"containers\":[{\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"guestbook-ui\",\"ports\":[{\"containerPort\":80}]}]}}}}"
time="2023-11-03T14:00:31Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T14:00:31Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=6e138
time="2023-11-03T14:00:31Z" level=debug msg="diff --git a/guestbook-with-namespace/guestbook-ui-deployment-ns.yaml b/guestbook-with-namespace/guestbook-ui-deployment-ns.yaml\nindex dba5806..2d0365c 100644\n--- a/guestbook-with-namespace/guestbook-ui-deployment-ns.yaml\n+++ b/guestbook-with-namespace/guestbook-ui-deployment-ns.yaml\n@@ -2,7 +2,7 @@ apiVersion: apps/v1\n kind: Deployment\n metadata:\n   name: guestbook-ui\n-  namespace: namespace\n+  namespace: argocd-e2e-test-selective-sync-without-namespace-hkxkf\n spec:\n   replicas: 0\n   revisionHistoryLimit: 3\n" duration=5.687074ms execID=6e138
time="2023-11-03T14:00:31Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=41e44
time="2023-11-03T14:00:31Z" level=debug msg="[master f735bd5] patch\n 1 file changed, 1 insertion(+), 1 deletion(-)\n" duration=13.702403ms execID=41e44
time="2023-11-03T14:00:31Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=85696
Handling connection for 9081
time="2023-11-03T14:00:31Z" level=debug duration=40.111093ms execID=85696
time="2023-11-03T14:00:31Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/metadata/namespace\", \"value\": \"argocd-e2e-test-selective-sync-without-namespace-hkxkf\"}]" path=guestbook-with-namespace/guestbook-ui-svc-ns.yaml
time="2023-11-03T14:00:31Z" level=info msg="converting YAML to JSON"
time="2023-11-03T14:00:31Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Service\",\"metadata\":{\"name\":\"guestbook-ui\",\"namespace\":\"namespace\"},\"spec\":{\"ports\":[{\"port\":80,\"targetPort\":80}],\"selector\":{\"app\":\"guestbook-ui\"}}}"
time="2023-11-03T14:00:31Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T14:00:31Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=fdf05
time="2023-11-03T14:00:31Z" level=debug msg="diff --git a/guestbook-with-namespace/guestbook-ui-svc-ns.yaml b/guestbook-with-namespace/guestbook-ui-svc-ns.yaml\nindex c1b2bc3..39d84ea 100644\n--- a/guestbook-with-namespace/guestbook-ui-svc-ns.yaml\n+++ b/guestbook-with-namespace/guestbook-ui-svc-ns.yaml\n@@ -2,10 +2,10 @@ apiVersion: v1\n kind: Service\n metadata:\n   name: guestbook-ui\n-  namespace: namespace\n+  namespace: argocd-e2e-test-selective-sync-without-namespace-hkxkf\n spec:\n   ports:\n-    - port: 80\n-      targetPort: 80\n+  - port: 80\n+    targetPort: 80\n   selector:\n     app: guestbook-ui\n" duration=3.36121ms execID=fdf05
time="2023-11-03T14:00:31Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=04d5e
time="2023-11-03T14:00:31Z" level=debug msg="[master 275b11f] patch\n 1 file changed, 3 insertions(+), 3 deletions(-)\n" duration=7.256654ms execID=04d5e
time="2023-11-03T14:00:31Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=13e77
Handling connection for 9081
time="2023-11-03T14:00:31Z" level=debug duration=38.302641ms execID=13e77
time="2023-11-03T14:00:31Z" level=info msg="../../dist/argocd app create test-selective-sync-without-namespace --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook-with-namespace --project default --dest-namespace argocd-e2e--test-selective-sync-without-namespace-rrdva --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjQyOSwibmJmIjoxNjk5MDIwMDI5LCJpYXQiOjE2OTkwMjAwMjksImp0aSI6IjBlZTM5ZmVhLTg1NDItNDNhMS1hZWYxLTBmMGRkNGQ5M2MyMSJ9.OX8zbQ2y2CLC1EKVnTFxh_35iXLJkZvsazSeNe4ogec --insecure" dir= execID=1ee70
time="2023-11-03T14:00:32Z" level=debug msg="application 'test-selective-sync-without-namespace' created\n" duration=301.380533ms execID=1ee70
time="2023-11-03T14:00:32Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T14:00:32Z" level=info msg="../../dist/argocd app sync test-selective-sync-without-namespace --timeout 30 --prune --resource apps:Deployment:guestbook-ui --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjQyOSwibmJmIjoxNjk5MDIwMDI5LCJpYXQiOjE2OTkwMjAwMjksImp0aSI6IjBlZTM5ZmVhLTg1NDItNDNhMS1hZWYxLTBmMGRkNGQ5M2MyMSJ9.OX8zbQ2y2CLC1EKVnTFxh_35iXLJkZvsazSeNe4ogec --insecure" dir= execID=150de
time="2023-11-03T14:00:32Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                               NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T14:00:32+00:00   apps  Deployment  argocd-e2e--test-selective-sync-without-namespace-rrdva          guestbook-ui  OutOfSync  Missing              \n2023-11-03T14:00:32+00:00   apps  Deployment  argocd-e2e-test-selective-sync-without-namespace-hkxkf           guestbook-ui  OutOfSync  Missing              \n\nName:               argocd-e2e/test-selective-sync-without-namespace\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-selective-sync-without-namespace-rrdva\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-selective-sync-without-namespace\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook-with-namespace\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (275b11f)\nHealth Status:      Missing\n\nOperation:          Sync\nSync Revision:      275b11fa9df8774a28d9f39e49c59641304c5f23\nPhase:              Succeeded\nStart:              2023-11-03 14:00:32 +0000 UTC\nFinished:           2023-11-03 14:00:32 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                                NAME          STATUS     HEALTH   HOOK  MESSAGE\napps   Deployment  argocd-e2e-test-selective-sync-without-namespace-hkxkf   guestbook-ui  Synced     Healthy        deployment.apps/guestbook-ui created\napps   Deployment  argocd-e2e--test-selective-sync-without-namespace-rrdva  guestbook-ui  Synced     Healthy        deployment.apps/guestbook-ui created\n       Service     argocd-e2e--test-selective-sync-without-namespace-rrdva  guestbook-ui  OutOfSync  Missing        \n       Service     argocd-e2e-test-selective-sync-without-namespace-hkxkf   guestbook-ui  OutOfSync  Missing        \n" duration=699.657034ms execID=150de
time="2023-11-03T14:00:32Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T14:00:32Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T14:00:32Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T14:00:32Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T14:00:32Z" level=info msg="expectation succeeded: resource 'Deployment/guestbook-ui' health should be Healthy, is Healthy"
time="2023-11-03T14:00:32Z" level=info msg="expectation succeeded: resource 'Deployment/guestbook-ui' health should be Healthy, is Healthy"
time="2023-11-03T14:00:32Z" level=info msg="expectation succeeded: resource 'Deployment/guestbook-ui' sync status should be Synced, is Synced"
time="2023-11-03T14:00:32Z" level=info msg="expectation succeeded: resource 'Deployment/guestbook-ui' sync status should be Synced, is Synced"
time="2023-11-03T14:00:32Z" level=info msg="kubectl delete namespace argocd-e2e-test-selective-sync-without-namespace-hkxkf" dir= execID=cf721
time="2023-11-03T14:00:39Z" level=debug msg="namespace \"argocd-e2e-test-selective-sync-without-namespace-hkxkf\" deleted\n" duration=6.118044936s execID=cf721
time="2023-11-03T14:00:39Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestSelectiveSyncWithoutNamespace (11.52s)
=== RUN   TestSelectiveSyncWithNamespace
time="2023-11-03T14:00:39Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=50ff4
time="2023-11-03T14:00:39Z" level=debug msg="namespace \"argocd-e2e--test-selective-sync-without-namespace-rrdva\" deleted\n" duration=295.012382ms execID=50ff4
time="2023-11-03T14:00:39Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=343be
time="2023-11-03T14:00:39Z" level=debug msg="No resources found\n" duration=503.859187ms execID=343be
time="2023-11-03T14:00:39Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=c66df
time="2023-11-03T14:00:40Z" level=debug msg="No resources found\n" duration=324.373838ms execID=c66df
time="2023-11-03T14:00:40Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T14:00:40Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjQ0MCwibmJmIjoxNjk5MDIwMDQwLCJpYXQiOjE2OTkwMjAwNDAsImp0aSI6IjIwYTdiNDQzLTRiNjgtNDhjZC04NDkwLTRmMThlZmJkMDE4ZiJ9.9fEYp56XQkxHVTfqCRyBTVsMVvimo5X-UVyDCpGcjBA --insecure" dir= execID=1e727
time="2023-11-03T14:00:41Z" level=debug duration=118.626361ms execID=1e727
time="2023-11-03T14:00:41Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=1ea0f
time="2023-11-03T14:00:41Z" level=debug duration=2.795547ms execID=1ea0f
time="2023-11-03T14:00:41Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=28b96
time="2023-11-03T14:00:41Z" level=debug duration=1.616463ms execID=28b96
time="2023-11-03T14:00:41Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=c9062
time="2023-11-03T14:00:41Z" level=debug duration=1.561669ms execID=c9062
time="2023-11-03T14:00:41Z" level=info msg="pkill -9 gpg-agent" dir= execID=07266
time="2023-11-03T14:00:41Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=eddc5
time="2023-11-03T14:00:41Z" level=debug duration=10.294312ms execID=eddc5
time="2023-11-03T14:00:41Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=d20e7
time="2023-11-03T14:00:41Z" level=debug duration=34.480117ms execID=d20e7
time="2023-11-03T14:00:41Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=dce2c
time="2023-11-03T14:00:41Z" level=debug duration=2.031506ms execID=dce2c
time="2023-11-03T14:00:41Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=4498e
time="2023-11-03T14:00:41Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=11.1168ms execID=4498e
time="2023-11-03T14:00:41Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=8413a
time="2023-11-03T14:00:41Z" level=debug duration=27.54004ms execID=8413a
time="2023-11-03T14:00:41Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=be392
time="2023-11-03T14:00:41Z" level=debug duration=22.387877ms execID=be392
time="2023-11-03T14:00:41Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=fc873
time="2023-11-03T14:00:41Z" level=debug duration=2.224128ms execID=fc873
time="2023-11-03T14:00:41Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=f0b3c
Handling connection for 9081
time="2023-11-03T14:00:41Z" level=debug duration=77.759566ms execID=f0b3c
time="2023-11-03T14:00:41Z" level=info msg="kubectl create ns argocd-e2e--test-selective-sync-with-namespace-mjbzs" dir= execID=62e13
time="2023-11-03T14:00:41Z" level=debug msg="namespace/argocd-e2e--test-selective-sync-with-namespace-mjbzs created\n" duration=125.025599ms execID=62e13
time="2023-11-03T14:00:41Z" level=info msg="kubectl label ns argocd-e2e--test-selective-sync-with-namespace-mjbzs e2e.argoproj.io=true" dir= execID=d448e
time="2023-11-03T14:00:41Z" level=debug msg="namespace/argocd-e2e--test-selective-sync-with-namespace-mjbzs labeled\n" duration=282.127917ms execID=d448e
time="2023-11-03T14:00:41Z" level=info msg="clean state" duration=2.580181939s id=TestSelectiveSyncWithNamespace-mjbzs name=TestSelectiveSyncWithNamespace password=password username=admin
time="2023-11-03T14:00:41Z" level=info msg="kubectl create namespace argocd-e2e-test-selective-sync-with-namespace-tossk" dir= execID=5b575
time="2023-11-03T14:00:41Z" level=debug msg="namespace/argocd-e2e-test-selective-sync-with-namespace-tossk created\n" duration=188.571398ms execID=5b575
time="2023-11-03T14:00:42Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/metadata/namespace\", \"value\": \"argocd-e2e-test-selective-sync-with-namespace-tossk\"}]" path=guestbook-with-namespace/guestbook-ui-deployment-ns.yaml
time="2023-11-03T14:00:42Z" level=info msg="converting YAML to JSON"
time="2023-11-03T14:00:42Z" level=info msg=JSON bytes="{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"name\":\"guestbook-ui\",\"namespace\":\"namespace\"},\"spec\":{\"replicas\":0,\"revisionHistoryLimit\":3,\"selector\":{\"matchLabels\":{\"app\":\"guestbook-ui\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"guestbook-ui\"}},\"spec\":{\"containers\":[{\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"guestbook-ui\",\"ports\":[{\"containerPort\":80}]}]}}}}"
time="2023-11-03T14:00:42Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T14:00:42Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=895bb
time="2023-11-03T14:00:42Z" level=debug msg="diff --git a/guestbook-with-namespace/guestbook-ui-deployment-ns.yaml b/guestbook-with-namespace/guestbook-ui-deployment-ns.yaml\nindex dba5806..82a33e1 100644\n--- a/guestbook-with-namespace/guestbook-ui-deployment-ns.yaml\n+++ b/guestbook-with-namespace/guestbook-ui-deployment-ns.yaml\n@@ -2,7 +2,7 @@ apiVersion: apps/v1\n kind: Deployment\n metadata:\n   name: guestbook-ui\n-  namespace: namespace\n+  namespace: argocd-e2e-test-selective-sync-with-namespace-tossk\n spec:\n   replicas: 0\n   revisionHistoryLimit: 3\n" duration=5.160884ms execID=895bb
time="2023-11-03T14:00:42Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=f80cd
time="2023-11-03T14:00:42Z" level=debug msg="[master 5618ebe] patch\n 1 file changed, 1 insertion(+), 1 deletion(-)\n" duration=12.471144ms execID=f80cd
time="2023-11-03T14:00:42Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=f8d05
Handling connection for 9081
time="2023-11-03T14:00:42Z" level=debug duration=41.511421ms execID=f8d05
time="2023-11-03T14:00:42Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/metadata/namespace\", \"value\": \"argocd-e2e-test-selective-sync-with-namespace-tossk\"}]" path=guestbook-with-namespace/guestbook-ui-svc-ns.yaml
time="2023-11-03T14:00:42Z" level=info msg="converting YAML to JSON"
time="2023-11-03T14:00:42Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"Service\",\"metadata\":{\"name\":\"guestbook-ui\",\"namespace\":\"namespace\"},\"spec\":{\"ports\":[{\"port\":80,\"targetPort\":80}],\"selector\":{\"app\":\"guestbook-ui\"}}}"
time="2023-11-03T14:00:42Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T14:00:42Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=cd623
time="2023-11-03T14:00:42Z" level=debug msg="diff --git a/guestbook-with-namespace/guestbook-ui-svc-ns.yaml b/guestbook-with-namespace/guestbook-ui-svc-ns.yaml\nindex c1b2bc3..e09177e 100644\n--- a/guestbook-with-namespace/guestbook-ui-svc-ns.yaml\n+++ b/guestbook-with-namespace/guestbook-ui-svc-ns.yaml\n@@ -2,10 +2,10 @@ apiVersion: v1\n kind: Service\n metadata:\n   name: guestbook-ui\n-  namespace: namespace\n+  namespace: argocd-e2e-test-selective-sync-with-namespace-tossk\n spec:\n   ports:\n-    - port: 80\n-      targetPort: 80\n+  - port: 80\n+    targetPort: 80\n   selector:\n     app: guestbook-ui\n" duration=2.812379ms execID=cd623
time="2023-11-03T14:00:42Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=4b9bf
time="2023-11-03T14:00:42Z" level=debug msg="[master 6c2628a] patch\n 1 file changed, 3 insertions(+), 3 deletions(-)\n" duration=6.939478ms execID=4b9bf
time="2023-11-03T14:00:42Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=05a8f
Handling connection for 9081
time="2023-11-03T14:00:42Z" level=debug duration=43.678743ms execID=05a8f
time="2023-11-03T14:00:42Z" level=info msg="../../dist/argocd app create test-selective-sync-with-namespace --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path guestbook-with-namespace --project default --dest-namespace argocd-e2e--test-selective-sync-with-namespace-mjbzs --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjQ0MCwibmJmIjoxNjk5MDIwMDQwLCJpYXQiOjE2OTkwMjAwNDAsImp0aSI6IjIwYTdiNDQzLTRiNjgtNDhjZC04NDkwLTRmMThlZmJkMDE4ZiJ9.9fEYp56XQkxHVTfqCRyBTVsMVvimo5X-UVyDCpGcjBA --insecure" dir= execID=ab433
time="2023-11-03T14:00:43Z" level=debug msg="application 'test-selective-sync-with-namespace' created\n" duration=629.851243ms execID=ab433
time="2023-11-03T14:00:43Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T14:00:43Z" level=info msg="../../dist/argocd app sync test-selective-sync-with-namespace --timeout 30 --prune --resource apps:Deployment:argocd-e2e-test-selective-sync-with-namespace-tossk/guestbook-ui --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjQ0MCwibmJmIjoxNjk5MDIwMDQwLCJpYXQiOjE2OTkwMjAwNDAsImp0aSI6IjIwYTdiNDQzLTRiNjgtNDhjZC04NDkwLTRmMThlZmJkMDE4ZiJ9.9fEYp56XQkxHVTfqCRyBTVsMVvimo5X-UVyDCpGcjBA --insecure" dir= execID=24878
time="2023-11-03T14:00:44Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                           NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T14:00:43+00:00   apps  Deployment  argocd-e2e-test-selective-sync-with-namespace-tossk          guestbook-ui  OutOfSync  Missing              \n2023-11-03T14:00:44+00:00   apps  Deployment  argocd-e2e-test-selective-sync-with-namespace-tossk          guestbook-ui  OutOfSync  Missing              deployment.apps/guestbook-ui created\n2023-11-03T14:00:44+00:00   apps  Deployment  argocd-e2e-test-selective-sync-with-namespace-tossk          guestbook-ui    Synced  Progressing              deployment.apps/guestbook-ui created\n\nName:               argocd-e2e/test-selective-sync-with-namespace\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-selective-sync-with-namespace-mjbzs\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-selective-sync-with-namespace\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook-with-namespace\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (6c2628a)\nHealth Status:      Missing\n\nOperation:          Sync\nSync Revision:      6c2628ad24bef768d9bbe091c6a6433e265e7b8e\nPhase:              Succeeded\nStart:              2023-11-03 14:00:43 +0000 UTC\nFinished:           2023-11-03 14:00:44 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                             NAME          STATUS     HEALTH   HOOK  MESSAGE\napps   Deployment  argocd-e2e-test-selective-sync-with-namespace-tossk   guestbook-ui  Synced     Healthy        deployment.apps/guestbook-ui created\n       Service     argocd-e2e--test-selective-sync-with-namespace-mjbzs  guestbook-ui  OutOfSync  Missing        \n       Service     argocd-e2e-test-selective-sync-with-namespace-tossk   guestbook-ui  OutOfSync  Missing        \napps   Deployment  argocd-e2e--test-selective-sync-with-namespace-mjbzs  guestbook-ui  OutOfSync  Missing        \n" duration=796.751673ms execID=24878
time="2023-11-03T14:00:44Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T14:00:44Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T14:00:44Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T14:00:44Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T14:00:44Z" level=info msg="expectation succeeded: resource 'Deployment/guestbook-ui' health should be Healthy, is Healthy"
time="2023-11-03T14:00:44Z" level=info msg="expectation succeeded: resource 'Deployment/guestbook-ui' health should be Missing, is Missing"
time="2023-11-03T14:00:44Z" level=info msg="expectation succeeded: resource 'Deployment/guestbook-ui' sync status should be Synced, is Synced"
time="2023-11-03T14:00:44Z" level=info msg="expectation succeeded: resource 'Deployment/guestbook-ui' sync status should be OutOfSync, is OutOfSync"
time="2023-11-03T14:00:44Z" level=info msg="kubectl delete namespace argocd-e2e-test-selective-sync-with-namespace-tossk" dir= execID=df934
time="2023-11-03T14:00:50Z" level=debug msg="namespace \"argocd-e2e-test-selective-sync-with-namespace-tossk\" deleted\n" duration=6.103255731s execID=df934
time="2023-11-03T14:00:50Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestSelectiveSyncWithNamespace (11.44s)
=== RUN   TestCanAccessInsecureSSHRepo
time="2023-11-03T14:00:50Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=cf55c
time="2023-11-03T14:00:50Z" level=debug msg="namespace \"argocd-e2e--test-selective-sync-with-namespace-mjbzs\" deleted\n" duration=232.711053ms execID=cf55c
time="2023-11-03T14:00:50Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=6bdcf
time="2023-11-03T14:00:51Z" level=debug msg="No resources found\n" duration=694.277837ms execID=6bdcf
time="2023-11-03T14:00:51Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=57bd3
time="2023-11-03T14:00:51Z" level=debug msg="No resources found\n" duration=208.626573ms execID=57bd3
time="2023-11-03T14:00:52Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T14:00:52Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjQ1MiwibmJmIjoxNjk5MDIwMDUyLCJpYXQiOjE2OTkwMjAwNTIsImp0aSI6Ijg5YzViMzg2LTJmZDQtNDA4Yy1iYmFmLTdhYzJmMTliMDk3OCJ9.snzhvhXtVABgTW3iS7XgnGkF3OO5tRkUpdgTNwz1NBc --insecure" dir= execID=693af
time="2023-11-03T14:00:52Z" level=debug duration=80.106321ms execID=693af
time="2023-11-03T14:00:52Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=67b65
time="2023-11-03T14:00:52Z" level=debug duration=2.016256ms execID=67b65
time="2023-11-03T14:00:52Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=c46cd
time="2023-11-03T14:00:52Z" level=debug duration=1.689181ms execID=c46cd
time="2023-11-03T14:00:52Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=2cfc4
time="2023-11-03T14:00:52Z" level=debug duration=1.43814ms execID=2cfc4
time="2023-11-03T14:00:52Z" level=info msg="pkill -9 gpg-agent" dir= execID=a890d
time="2023-11-03T14:00:52Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=a8013
time="2023-11-03T14:00:52Z" level=debug duration=9.658188ms execID=a8013
time="2023-11-03T14:00:52Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=58c61
time="2023-11-03T14:00:52Z" level=debug duration=39.707738ms execID=58c61
time="2023-11-03T14:00:52Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=11ccb
time="2023-11-03T14:00:52Z" level=debug duration=1.785666ms execID=11ccb
time="2023-11-03T14:00:52Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=018fd
time="2023-11-03T14:00:52Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.008479ms execID=018fd
time="2023-11-03T14:00:52Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=a2dee
time="2023-11-03T14:00:52Z" level=debug duration=28.351484ms execID=a2dee
time="2023-11-03T14:00:52Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=61f1e
time="2023-11-03T14:00:52Z" level=debug duration=23.584734ms execID=61f1e
time="2023-11-03T14:00:52Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=fdf96
time="2023-11-03T14:00:52Z" level=debug duration=3.594254ms execID=fdf96
time="2023-11-03T14:00:52Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=48d72
Handling connection for 9081
time="2023-11-03T14:00:52Z" level=debug duration=86.452781ms execID=48d72
time="2023-11-03T14:00:52Z" level=info msg="kubectl create ns argocd-e2e--test-can-access-insecure-ssh-repo-dawry" dir= execID=9c206
time="2023-11-03T14:00:52Z" level=debug msg="namespace/argocd-e2e--test-can-access-insecure-ssh-repo-dawry created\n" duration=126.028179ms execID=9c206
time="2023-11-03T14:00:52Z" level=info msg="kubectl label ns argocd-e2e--test-can-access-insecure-ssh-repo-dawry e2e.argoproj.io=true" dir= execID=b1bbb
time="2023-11-03T14:00:53Z" level=debug msg="namespace/argocd-e2e--test-can-access-insecure-ssh-repo-dawry labeled\n" duration=350.161436ms execID=b1bbb
time="2023-11-03T14:00:53Z" level=info msg="clean state" duration=2.699221419s id=TestCanAccessInsecureSSHRepo-dawry name=TestCanAccessInsecureSSHRepo password=password username=admin
time="2023-11-03T14:00:53Z" level=info msg="../../dist/argocd repo add ssh://root@argocd-e2e-server:2222/tmp/argo-e2e/testdata.git --ssh-private-key-path /argocd-e2e/argo-cd/test/fixture/testrepos/id_rsa --insecure-ignore-host-key --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjQ1MiwibmJmIjoxNjk5MDIwMDUyLCJpYXQiOjE2OTkwMjAwNTIsImp0aSI6Ijg5YzViMzg2LTJmZDQtNDA4Yy1iYmFmLTdhYzJmMTliMDk3OCJ9.snzhvhXtVABgTW3iS7XgnGkF3OO5tRkUpdgTNwz1NBc --insecure" dir= execID=c3580
time="2023-11-03T14:00:53Z" level=debug msg="Repository 'ssh://root@argocd-e2e-server:2222/tmp/argo-e2e/testdata.git' added\n" duration=432.693476ms execID=c3580
time="2023-11-03T14:00:54Z" level=info msg="../../dist/argocd app create test-can-access-insecure-ssh-repo --repo ssh://root@argocd-e2e-server:2222/tmp/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path config-map --project default --dest-namespace argocd-e2e--test-can-access-insecure-ssh-repo-dawry --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjQ1MiwibmJmIjoxNjk5MDIwMDUyLCJpYXQiOjE2OTkwMjAwNTIsImp0aSI6Ijg5YzViMzg2LTJmZDQtNDA4Yy1iYmFmLTdhYzJmMTliMDk3OCJ9.snzhvhXtVABgTW3iS7XgnGkF3OO5tRkUpdgTNwz1NBc --insecure" dir= execID=edaa1
time="2023-11-03T14:00:55Z" level=debug msg="application 'test-can-access-insecure-ssh-repo' created\n" duration=517.415927ms execID=edaa1
time="2023-11-03T14:00:55Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T14:00:55Z" level=info msg="../../dist/argocd app sync test-can-access-insecure-ssh-repo --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjQ1MiwibmJmIjoxNjk5MDIwMDUyLCJpYXQiOjE2OTkwMjAwNTIsImp0aSI6Ijg5YzViMzg2LTJmZDQtNDA4Yy1iYmFmLTdhYzJmMTliMDk3OCJ9.snzhvhXtVABgTW3iS7XgnGkF3OO5tRkUpdgTNwz1NBc --insecure" dir= execID=2a224
time="2023-11-03T14:00:56Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T14:00:55+00:00          ConfigMap  argocd-e2e--test-can-access-insecure-ssh-repo-dawry                my-map  OutOfSync  Missing              \n\nName:               argocd-e2e/test-can-access-insecure-ssh-repo\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-can-access-insecure-ssh-repo-dawry\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-can-access-insecure-ssh-repo\nRepo:               ssh://root@argocd-e2e-server:2222/tmp/argo-e2e/testdata.git\nTarget:             \nPath:               config-map\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (74219bd)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      74219bd86e2ce0c9174c565c9912d8917e393810\nPhase:              Succeeded\nStart:              2023-11-03 14:00:55 +0000 UTC\nFinished:           2023-11-03 14:00:55 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                            NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-can-access-insecure-ssh-repo-dawry  my-map  Synced                configmap/my-map created\n" duration=907.69876ms execID=2a224
time="2023-11-03T14:00:56Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T14:00:56Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T14:00:56Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCanAccessInsecureSSHRepo (5.57s)
=== RUN   TestCanAccessSSHRepo
time="2023-11-03T14:00:56Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=aa0ce
time="2023-11-03T14:00:56Z" level=debug msg="namespace \"argocd-e2e--test-can-access-insecure-ssh-repo-dawry\" deleted\n" duration=222.197708ms execID=aa0ce
time="2023-11-03T14:00:56Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=3ccc5
time="2023-11-03T14:00:56Z" level=debug msg="No resources found\n" duration=411.151176ms execID=3ccc5
time="2023-11-03T14:00:56Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=a52c0
time="2023-11-03T14:00:57Z" level=debug msg="No resources found\n" duration=254.779857ms execID=a52c0
time="2023-11-03T14:00:57Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T14:00:58Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjQ1NywibmJmIjoxNjk5MDIwMDU3LCJpYXQiOjE2OTkwMjAwNTcsImp0aSI6Ijg1M2RjNDA3LWE3MzEtNDViNi1hYzBmLTdhODZmMWQzM2M3NCJ9.K6dxdwum_e308zpGLpys7mr4fQIvbVjvdhiVNKL1J_E --insecure" dir= execID=bf4d2
time="2023-11-03T14:00:58Z" level=debug duration=77.349007ms execID=bf4d2
time="2023-11-03T14:00:58Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=531ef
time="2023-11-03T14:00:58Z" level=debug duration=2.156247ms execID=531ef
time="2023-11-03T14:00:58Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=b89d0
time="2023-11-03T14:00:58Z" level=debug duration=1.466679ms execID=b89d0
time="2023-11-03T14:00:58Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=7463b
time="2023-11-03T14:00:58Z" level=debug duration=1.330942ms execID=7463b
time="2023-11-03T14:00:58Z" level=info msg="pkill -9 gpg-agent" dir= execID=ad842
time="2023-11-03T14:00:58Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=af9fc
time="2023-11-03T14:00:58Z" level=debug duration=9.765485ms execID=af9fc
time="2023-11-03T14:00:58Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=b4a48
time="2023-11-03T14:00:58Z" level=debug duration=34.95829ms execID=b4a48
time="2023-11-03T14:00:58Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=c7c10
time="2023-11-03T14:00:58Z" level=debug duration=2.061352ms execID=c7c10
time="2023-11-03T14:00:58Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=c9fee
time="2023-11-03T14:00:58Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.019317ms execID=c9fee
time="2023-11-03T14:00:58Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=09a0f
time="2023-11-03T14:00:58Z" level=debug duration=36.940985ms execID=09a0f
time="2023-11-03T14:00:58Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=9c4ee
time="2023-11-03T14:00:58Z" level=debug duration=24.16394ms execID=9c4ee
time="2023-11-03T14:00:58Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=033f1
time="2023-11-03T14:00:58Z" level=debug duration=2.63995ms execID=033f1
time="2023-11-03T14:00:58Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=d3349
Handling connection for 9081
time="2023-11-03T14:00:58Z" level=debug duration=124.491719ms execID=d3349
time="2023-11-03T14:00:58Z" level=info msg="kubectl create ns argocd-e2e--test-can-access-ssh-repo-hdhpo" dir= execID=a2c8f
time="2023-11-03T14:00:58Z" level=debug msg="namespace/argocd-e2e--test-can-access-ssh-repo-hdhpo created\n" duration=100.774522ms execID=a2c8f
time="2023-11-03T14:00:58Z" level=info msg="kubectl label ns argocd-e2e--test-can-access-ssh-repo-hdhpo e2e.argoproj.io=true" dir= execID=bf37a
time="2023-11-03T14:00:58Z" level=debug msg="namespace/argocd-e2e--test-can-access-ssh-repo-hdhpo labeled\n" duration=341.192503ms execID=bf37a
time="2023-11-03T14:00:58Z" level=info msg="clean state" duration=2.733326921s id=TestCanAccessSSHRepo-hdhpo name=TestCanAccessSSHRepo password=password username=admin
time="2023-11-03T14:00:58Z" level=info msg="../../dist/argocd cert add-ssh --upsert --batch --from /argocd-e2e/argo-cd/test/fixture/testrepos/ssh_known_hosts --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjQ1NywibmJmIjoxNjk5MDIwMDU3LCJpYXQiOjE2OTkwMjAwNTcsImp0aSI6Ijg1M2RjNDA3LWE3MzEtNDViNi1hYzBmLTdhODZmMWQzM2M3NCJ9.K6dxdwum_e308zpGLpys7mr4fQIvbVjvdhiVNKL1J_E --insecure" dir= execID=486c7
time="2023-11-03T14:00:59Z" level=debug msg="Reading SSH known hosts entries from file '/argocd-e2e/argo-cd/test/fixture/testrepos/ssh_known_hosts'\nSuccessfully created 6 SSH known host entries\n" duration=227.748611ms execID=486c7
time="2023-11-03T14:00:59Z" level=info msg="Waiting for API server to restart"
time="2023-11-03T14:00:59Z" level=info msg="kubectl rollout restart deployment argocd-test-server" dir= execID=174ca
time="2023-11-03T14:00:59Z" level=debug msg="deployment.apps/argocd-test-server restarted\n" duration=272.465201ms execID=174ca
time="2023-11-03T14:00:59Z" level=info msg="kubectl rollout status deployment argocd-test-server" dir= execID=9e69d
time="2023-11-03T14:01:29Z" level=debug msg="Waiting for deployment \"argocd-test-server\" rollout to finish: 1 old replicas are pending termination...\nWaiting for deployment \"argocd-test-server\" rollout to finish: 1 old replicas are pending termination...\ndeployment \"argocd-test-server\" successfully rolled out\n" duration=30.372561217s execID=9e69d
time="2023-11-03T14:01:29Z" level=info msg="Waiting for repo server to restart"
time="2023-11-03T14:01:29Z" level=info msg="kubectl rollout restart deployment argocd-test-repo-server" dir= execID=1e9ce
time="2023-11-03T14:01:30Z" level=debug msg="deployment.apps/argocd-test-repo-server restarted\n" duration=326.652045ms execID=1e9ce
time="2023-11-03T14:01:30Z" level=info msg="kubectl rollout status deployment argocd-test-repo-server" dir= execID=dcaf9
time="2023-11-03T14:01:40Z" level=debug msg="Waiting for deployment \"argocd-test-repo-server\" rollout to finish: 1 old replicas are pending termination...\nWaiting for deployment \"argocd-test-repo-server\" rollout to finish: 1 old replicas are pending termination...\ndeployment \"argocd-test-repo-server\" successfully rolled out\n" duration=10.380697161s execID=dcaf9
time="2023-11-03T14:01:50Z" level=info msg="../../dist/argocd repo add ssh://root@argocd-e2e-server:2222/tmp/argo-e2e/testdata.git --ssh-private-key-path /argocd-e2e/argo-cd/test/fixture/testrepos/id_rsa --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjQ1NywibmJmIjoxNjk5MDIwMDU3LCJpYXQiOjE2OTkwMjAwNTcsImp0aSI6Ijg1M2RjNDA3LWE3MzEtNDViNi1hYzBmLTdhODZmMWQzM2M3NCJ9.K6dxdwum_e308zpGLpys7mr4fQIvbVjvdhiVNKL1J_E --insecure" dir= execID=412b9
time="2023-11-03T14:01:50Z" level=debug msg="Repository 'ssh://root@argocd-e2e-server:2222/tmp/argo-e2e/testdata.git' added\n" duration=393.516735ms execID=412b9
time="2023-11-03T14:01:51Z" level=info msg="../../dist/argocd app create test-can-access-ssh-repo --repo ssh://root@argocd-e2e-server:2222/tmp/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path config-map --project default --dest-namespace argocd-e2e--test-can-access-ssh-repo-hdhpo --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjQ1NywibmJmIjoxNjk5MDIwMDU3LCJpYXQiOjE2OTkwMjAwNTcsImp0aSI6Ijg1M2RjNDA3LWE3MzEtNDViNi1hYzBmLTdhODZmMWQzM2M3NCJ9.K6dxdwum_e308zpGLpys7mr4fQIvbVjvdhiVNKL1J_E --insecure" dir= execID=8b674
time="2023-11-03T14:01:52Z" level=debug msg="application 'test-can-access-ssh-repo' created\n" duration=501.870851ms execID=8b674
time="2023-11-03T14:01:52Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T14:01:52Z" level=info msg="../../dist/argocd app sync test-can-access-ssh-repo --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjQ1NywibmJmIjoxNjk5MDIwMDU3LCJpYXQiOjE2OTkwMjAwNTcsImp0aSI6Ijg1M2RjNDA3LWE3MzEtNDViNi1hYzBmLTdhODZmMWQzM2M3NCJ9.K6dxdwum_e308zpGLpys7mr4fQIvbVjvdhiVNKL1J_E --insecure" dir= execID=5b626
time="2023-11-03T14:01:53Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T14:01:52+00:00          ConfigMap  argocd-e2e--test-can-access-ssh-repo-hdhpo                my-map  OutOfSync  Missing              \n2023-11-03T14:01:53+00:00          ConfigMap  argocd-e2e--test-can-access-ssh-repo-hdhpo                my-map  OutOfSync  Missing              configmap/my-map created\n2023-11-03T14:01:53+00:00          ConfigMap  argocd-e2e--test-can-access-ssh-repo-hdhpo                my-map    Synced  Missing              configmap/my-map created\n\nName:               argocd-e2e/test-can-access-ssh-repo\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-can-access-ssh-repo-hdhpo\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-can-access-ssh-repo\nRepo:               ssh://root@argocd-e2e-server:2222/tmp/argo-e2e/testdata.git\nTarget:             \nPath:               config-map\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (3b069f4)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      3b069f41152fddf99fd1a10deac61b03434c0eb1\nPhase:              Succeeded\nStart:              2023-11-03 14:01:52 +0000 UTC\nFinished:           2023-11-03 14:01:53 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                   NAME    STATUS  HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-can-access-ssh-repo-hdhpo  my-map  Synced                configmap/my-map created\n" duration=993.440395ms execID=5b626
time="2023-11-03T14:01:53Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T14:01:53Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T14:01:53Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestCanAccessSSHRepo (57.21s)
=== RUN   TestSyncOptionsValidateFalse
time="2023-11-03T14:01:53Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=14fca
time="2023-11-03T14:01:53Z" level=debug msg="namespace \"argocd-e2e--test-can-access-ssh-repo-hdhpo\" deleted\n" duration=201.399733ms execID=14fca
time="2023-11-03T14:01:53Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=1ff1c
time="2023-11-03T14:01:54Z" level=debug msg="No resources found\n" duration=459.50512ms execID=1ff1c
time="2023-11-03T14:01:54Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=17115
time="2023-11-03T14:01:54Z" level=debug msg="No resources found\n" duration=233.636633ms execID=17115
time="2023-11-03T14:01:54Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T14:01:54Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjUxNCwibmJmIjoxNjk5MDIwMTE0LCJpYXQiOjE2OTkwMjAxMTQsImp0aSI6IjIzNjQ0ZTdmLTZiMjAtNDk1Ny1hZjkyLTdjYmZlY2Y3MDE0ZCJ9.qh7aVrHVpJiOgSg9gcERAXktSKh622siPogEUCrp0_g --insecure" dir= execID=958c0
time="2023-11-03T14:01:54Z" level=debug duration=75.140023ms execID=958c0
time="2023-11-03T14:01:55Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=04083
time="2023-11-03T14:01:55Z" level=debug duration=2.10051ms execID=04083
time="2023-11-03T14:01:55Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=4258e
time="2023-11-03T14:01:55Z" level=debug duration=1.482066ms execID=4258e
time="2023-11-03T14:01:55Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=fd725
time="2023-11-03T14:01:55Z" level=debug duration=1.378085ms execID=fd725
time="2023-11-03T14:01:55Z" level=info msg="pkill -9 gpg-agent" dir= execID=d9098
time="2023-11-03T14:01:55Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=6cf5d
time="2023-11-03T14:01:55Z" level=debug duration=9.799209ms execID=6cf5d
time="2023-11-03T14:01:55Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=55864
time="2023-11-03T14:01:55Z" level=debug duration=36.438155ms execID=55864
time="2023-11-03T14:01:55Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=e8d25
time="2023-11-03T14:01:55Z" level=debug duration=1.370818ms execID=e8d25
time="2023-11-03T14:01:55Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=111ac
time="2023-11-03T14:01:55Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.74303ms execID=111ac
time="2023-11-03T14:01:55Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=a9717
time="2023-11-03T14:01:55Z" level=debug duration=24.870529ms execID=a9717
time="2023-11-03T14:01:55Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=8f432
time="2023-11-03T14:01:55Z" level=debug duration=21.480235ms execID=8f432
time="2023-11-03T14:01:55Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=a0aab
time="2023-11-03T14:01:55Z" level=debug duration=2.161583ms execID=a0aab
time="2023-11-03T14:01:55Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=b0261
Handling connection for 9081
time="2023-11-03T14:01:55Z" level=debug duration=72.84634ms execID=b0261
time="2023-11-03T14:01:55Z" level=info msg="kubectl create ns argocd-e2e--test-sync-options-validate-false-fowwm" dir= execID=7be75
time="2023-11-03T14:01:55Z" level=debug msg="namespace/argocd-e2e--test-sync-options-validate-false-fowwm created\n" duration=118.759545ms execID=7be75
time="2023-11-03T14:01:55Z" level=info msg="kubectl label ns argocd-e2e--test-sync-options-validate-false-fowwm e2e.argoproj.io=true" dir= execID=fefe3
time="2023-11-03T14:01:55Z" level=debug msg="namespace/argocd-e2e--test-sync-options-validate-false-fowwm labeled\n" duration=222.146517ms execID=fefe3
time="2023-11-03T14:01:55Z" level=info msg="clean state" duration=2.245865687s id=TestSyncOptionsValidateFalse-fowwm name=TestSyncOptionsValidateFalse password=password username=admin
time="2023-11-03T14:01:56Z" level=info msg="../../dist/argocd app create test-sync-options-validate-false --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path sync-options-validate-false --project default --dest-namespace argocd-e2e--test-sync-options-validate-false-fowwm --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjUxNCwibmJmIjoxNjk5MDIwMTE0LCJpYXQiOjE2OTkwMjAxMTQsImp0aSI6IjIzNjQ0ZTdmLTZiMjAtNDk1Ny1hZjkyLTdjYmZlY2Y3MDE0ZCJ9.qh7aVrHVpJiOgSg9gcERAXktSKh622siPogEUCrp0_g --insecure" dir= execID=81817
time="2023-11-03T14:01:56Z" level=debug msg="application 'test-sync-options-validate-false' created\n" duration=214.467052ms execID=81817
time="2023-11-03T14:01:56Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T14:01:56Z" level=info msg="../../dist/argocd app sync test-sync-options-validate-false --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjUxNCwibmJmIjoxNjk5MDIwMTE0LCJpYXQiOjE2OTkwMjAxMTQsImp0aSI6IjIzNjQ0ZTdmLTZiMjAtNDk1Ny1hZjkyLTdjYmZlY2Y3MDE0ZCJ9.qh7aVrHVpJiOgSg9gcERAXktSKh622siPogEUCrp0_g --insecure" dir= execID=f9cd6
time="2023-11-03T14:01:57Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                          NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T14:01:56+00:00          ConfigMap  argocd-e2e--test-sync-options-validate-false-fowwm            invalid-cm  OutOfSync  Missing              \n\nName:               argocd-e2e/test-sync-options-validate-false\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-sync-options-validate-false-fowwm\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-sync-options-validate-false\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               sync-options-validate-false\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (4a141e8)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      4a141e8e0bc4ab2654e0e96247cda6874e59544a\nPhase:              Succeeded\nStart:              2023-11-03 14:01:56 +0000 UTC\nFinished:           2023-11-03 14:01:56 +0000 UTC\nDuration:           0s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                           NAME        STATUS     HEALTH  HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-sync-options-validate-false-fowwm  invalid-cm  OutOfSync                configmap/invalid-cm created\n" duration=284.067719ms execID=f9cd6
time="2023-11-03T14:01:57Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T14:01:57Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T14:01:57Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestSyncOptionsValidateFalse (3.75s)
=== RUN   TestSyncOptionsValidateTrue
--- SKIP: TestSyncOptionsValidateTrue (0.00s)
=== RUN   TestSyncWithStatusIgnored
time="2023-11-03T14:01:57Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=f0da0
time="2023-11-03T14:01:57Z" level=debug msg="namespace \"argocd-e2e--test-sync-options-validate-false-fowwm\" deleted\n" duration=244.214758ms execID=f0da0
time="2023-11-03T14:01:57Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=e05b4
time="2023-11-03T14:01:57Z" level=debug msg="No resources found\n" duration=580.426105ms execID=e05b4
time="2023-11-03T14:01:57Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=33569
time="2023-11-03T14:01:58Z" level=debug msg="No resources found\n" duration=285.079376ms execID=33569
time="2023-11-03T14:01:59Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T14:01:59Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjUxOSwibmJmIjoxNjk5MDIwMTE5LCJpYXQiOjE2OTkwMjAxMTksImp0aSI6ImRkYWVlN2M4LWI4MmMtNDQwMy05MzU1LWVmZWNhMmM4NjNmNiJ9.p_3b4cEdO_1oKUxcXvb8rU-U875cAMg4OhI84gJS4ww --insecure" dir= execID=ed166
time="2023-11-03T14:01:59Z" level=debug duration=92.161018ms execID=ed166
time="2023-11-03T14:01:59Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=c87dc
time="2023-11-03T14:01:59Z" level=debug duration=2.049872ms execID=c87dc
time="2023-11-03T14:01:59Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=a72a6
time="2023-11-03T14:01:59Z" level=debug duration=1.645667ms execID=a72a6
time="2023-11-03T14:01:59Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=cebc4
time="2023-11-03T14:01:59Z" level=debug duration=1.68591ms execID=cebc4
time="2023-11-03T14:01:59Z" level=info msg="pkill -9 gpg-agent" dir= execID=7c9d0
time="2023-11-03T14:01:59Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=95fe2
time="2023-11-03T14:01:59Z" level=debug duration=9.672037ms execID=95fe2
time="2023-11-03T14:01:59Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=a0768
time="2023-11-03T14:01:59Z" level=debug duration=32.135909ms execID=a0768
time="2023-11-03T14:01:59Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=9b768
time="2023-11-03T14:01:59Z" level=debug duration=2.02751ms execID=9b768
time="2023-11-03T14:01:59Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=ac5b5
time="2023-11-03T14:01:59Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.883013ms execID=ac5b5
time="2023-11-03T14:01:59Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=35622
time="2023-11-03T14:01:59Z" level=debug duration=38.413337ms execID=35622
time="2023-11-03T14:01:59Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=1cd28
time="2023-11-03T14:01:59Z" level=debug duration=22.911276ms execID=1cd28
time="2023-11-03T14:01:59Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=c5c33
time="2023-11-03T14:01:59Z" level=debug duration=2.307962ms execID=c5c33
time="2023-11-03T14:01:59Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=f26a2
Handling connection for 9081
time="2023-11-03T14:01:59Z" level=debug duration=82.082149ms execID=f26a2
time="2023-11-03T14:01:59Z" level=info msg="kubectl create ns argocd-e2e--test-sync-with-status-ignored-tbgtc" dir= execID=664e5
time="2023-11-03T14:01:59Z" level=debug msg="namespace/argocd-e2e--test-sync-with-status-ignored-tbgtc created\n" duration=171.489354ms execID=664e5
time="2023-11-03T14:01:59Z" level=info msg="kubectl label ns argocd-e2e--test-sync-with-status-ignored-tbgtc e2e.argoproj.io=true" dir= execID=c8f85
time="2023-11-03T14:02:00Z" level=debug msg="namespace/argocd-e2e--test-sync-with-status-ignored-tbgtc labeled\n" duration=299.908043ms execID=c8f85
time="2023-11-03T14:02:00Z" level=info msg="clean state" duration=2.968571008s id=TestSyncWithStatusIgnored-tbgtc name=TestSyncWithStatusIgnored password=password username=admin
time="2023-11-03T14:02:01Z" level=info msg="../../dist/argocd app create -f /tmp/1609169301 --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjUxOSwibmJmIjoxNjk5MDIwMTE5LCJpYXQiOjE2OTkwMjAxMTksImp0aSI6ImRkYWVlN2M4LWI4MmMtNDQwMy05MzU1LWVmZWNhMmM4NjNmNiJ9.p_3b4cEdO_1oKUxcXvb8rU-U875cAMg4OhI84gJS4ww --insecure" dir= execID=7a18e
time="2023-11-03T14:02:01Z" level=debug msg="application 'test-sync-with-status-ignored' created\n" duration=233.893776ms execID=7a18e
time="2023-11-03T14:02:01Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T14:02:01Z" level=info msg="pending: sync status to be Synced, is "
time="2023-11-03T14:02:04Z" level=info msg="pending: sync status to be Synced, is "
time="2023-11-03T14:02:07Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T14:02:07Z" level=info msg=patching jsonPatch="[{ \"op\": \"add\", \"path\": \"/status\", \"value\": { \"observedGeneration\": 1 }}]" path=guestbook/guestbook-ui-deployment.yaml
time="2023-11-03T14:02:07Z" level=info msg="converting YAML to JSON"
time="2023-11-03T14:02:07Z" level=info msg=JSON bytes="{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"test\":\"true\"},\"name\":\"guestbook-ui\"},\"spec\":{\"replicas\":0,\"revisionHistoryLimit\":3,\"selector\":{\"matchLabels\":{\"app\":\"guestbook-ui\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"guestbook-ui\"}},\"spec\":{\"containers\":[{\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"guestbook-ui\",\"ports\":[{\"containerPort\":80}]}]}}}}"
time="2023-11-03T14:02:07Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T14:02:07Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=02318
time="2023-11-03T14:02:07Z" level=debug msg="diff --git a/guestbook/guestbook-ui-deployment.yaml b/guestbook/guestbook-ui-deployment.yaml\nindex bf33756..3725956 100644\n--- a/guestbook/guestbook-ui-deployment.yaml\n+++ b/guestbook/guestbook-ui-deployment.yaml\n@@ -1,9 +1,9 @@\n apiVersion: apps/v1\n kind: Deployment\n metadata:\n-  name: guestbook-ui\n   labels:\n     test: \"true\"\n+  name: guestbook-ui\n spec:\n   replicas: 0\n   revisionHistoryLimit: 3\n@@ -21,3 +21,5 @@ spec:\n         name: guestbook-ui\n         ports:\n         - containerPort: 80\n+status:\n+  observedGeneration: 1\n" duration=5.285007ms execID=02318
time="2023-11-03T14:02:07Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=a0e5a
time="2023-11-03T14:02:07Z" level=debug msg="[master da15696] patch\n 1 file changed, 3 insertions(+), 1 deletion(-)\n" duration=11.889378ms execID=a0e5a
time="2023-11-03T14:02:07Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=f7f8e
Handling connection for 9081
time="2023-11-03T14:02:07Z" level=debug duration=36.381636ms execID=f7f8e
time="2023-11-03T14:02:07Z" level=info msg="../../dist/argocd app get test-sync-with-status-ignored --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjUxOSwibmJmIjoxNjk5MDIwMTE5LCJpYXQiOjE2OTkwMjAxMTksImp0aSI6ImRkYWVlN2M4LWI4MmMtNDQwMy05MzU1LWVmZWNhMmM4NjNmNiJ9.p_3b4cEdO_1oKUxcXvb8rU-U875cAMg4OhI84gJS4ww --insecure" dir= execID=17b22
time="2023-11-03T14:02:07Z" level=debug msg="Name:               argocd-e2e/test-sync-with-status-ignored\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-sync-with-status-ignored-tbgtc\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-sync-with-status-ignored\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               guestbook\nSyncWindow:         Sync Allowed\nSync Policy:        Automated\nSync Status:        Synced to  (da15696)\nHealth Status:      Healthy\n\nGROUP  KIND        NAMESPACE                                        NAME          STATUS  HEALTH   HOOK  MESSAGE\n       Service     argocd-e2e--test-sync-with-status-ignored-tbgtc  guestbook-ui  Synced  Healthy        service/guestbook-ui created\napps   Deployment  argocd-e2e--test-sync-with-status-ignored-tbgtc  guestbook-ui  Synced  Healthy        deployment.apps/guestbook-ui created\n" duration=243.144001ms execID=17b22
time="2023-11-03T14:02:07Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T14:02:07Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T14:02:07Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T14:02:07Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestSyncWithStatusIgnored (10.56s)
=== RUN   TestSyncWithSkipHook
    fixture.go:901: 
--- SKIP: TestSyncWithSkipHook (0.00s)
=== RUN   TestFixingDegradedApp
time="2023-11-03T14:02:07Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=6cbf4
time="2023-11-03T14:02:07Z" level=debug msg="namespace \"argocd-e2e--test-sync-with-status-ignored-tbgtc\" deleted\n" duration=265.182975ms execID=6cbf4
time="2023-11-03T14:02:07Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=eca9c
time="2023-11-03T14:02:08Z" level=debug msg="No resources found\n" duration=387.025304ms execID=eca9c
time="2023-11-03T14:02:08Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=a9858
time="2023-11-03T14:02:08Z" level=debug msg="No resources found\n" duration=212.814235ms execID=a9858
time="2023-11-03T14:02:09Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T14:02:09Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjUyOSwibmJmIjoxNjk5MDIwMTI5LCJpYXQiOjE2OTkwMjAxMjksImp0aSI6IjFkNTM3ZDA5LTE1M2QtNDJlNy04MzQ0LTM2NmIxOWJiNzY5MyJ9.OyGmsQ8mm_4epm938H4TV6OJPwQcDS2DxRL2qFji2KE --insecure" dir= execID=0a308
time="2023-11-03T14:02:09Z" level=debug duration=93.365475ms execID=0a308
time="2023-11-03T14:02:09Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=9d50f
time="2023-11-03T14:02:09Z" level=debug duration=2.013074ms execID=9d50f
time="2023-11-03T14:02:09Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=a3d31
time="2023-11-03T14:02:09Z" level=debug duration=1.731017ms execID=a3d31
time="2023-11-03T14:02:09Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=e678d
time="2023-11-03T14:02:09Z" level=debug duration=1.618517ms execID=e678d
time="2023-11-03T14:02:09Z" level=info msg="pkill -9 gpg-agent" dir= execID=a8238
time="2023-11-03T14:02:09Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=abea1
time="2023-11-03T14:02:09Z" level=debug duration=9.735971ms execID=abea1
time="2023-11-03T14:02:09Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=ef76c
time="2023-11-03T14:02:09Z" level=debug duration=54.063977ms execID=ef76c
time="2023-11-03T14:02:09Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=8ddae
time="2023-11-03T14:02:09Z" level=debug duration=1.863444ms execID=8ddae
time="2023-11-03T14:02:09Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=bc6ff
time="2023-11-03T14:02:09Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.102333ms execID=bc6ff
time="2023-11-03T14:02:09Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=3e410
time="2023-11-03T14:02:09Z" level=debug duration=27.473437ms execID=3e410
time="2023-11-03T14:02:09Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=abd6f
time="2023-11-03T14:02:09Z" level=debug duration=21.261816ms execID=abd6f
time="2023-11-03T14:02:09Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=0d950
time="2023-11-03T14:02:09Z" level=debug duration=2.906125ms execID=0d950
time="2023-11-03T14:02:09Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=51ada
Handling connection for 9081
time="2023-11-03T14:02:09Z" level=debug duration=73.285951ms execID=51ada
time="2023-11-03T14:02:09Z" level=info msg="kubectl create ns argocd-e2e--test-fixing-degraded-app-lmptw" dir= execID=a0ec0
time="2023-11-03T14:02:09Z" level=debug msg="namespace/argocd-e2e--test-fixing-degraded-app-lmptw created\n" duration=163.098812ms execID=a0ec0
time="2023-11-03T14:02:09Z" level=info msg="kubectl label ns argocd-e2e--test-fixing-degraded-app-lmptw e2e.argoproj.io=true" dir= execID=2f968
time="2023-11-03T14:02:10Z" level=debug msg="namespace/argocd-e2e--test-fixing-degraded-app-lmptw labeled\n" duration=224.281941ms execID=2f968
time="2023-11-03T14:02:10Z" level=info msg="clean state" duration=2.43732038s id=TestFixingDegradedApp-lmptw name=TestFixingDegradedApp password=password username=admin
time="2023-11-03T14:02:11Z" level=info msg="../../dist/argocd app create test-fixing-degraded-app --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path sync-waves --project default --dest-namespace argocd-e2e--test-fixing-degraded-app-lmptw --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjUyOSwibmJmIjoxNjk5MDIwMTI5LCJpYXQiOjE2OTkwMjAxMjksImp0aSI6IjFkNTM3ZDA5LTE1M2QtNDJlNy04MzQ0LTM2NmIxOWJiNzY5MyJ9.OyGmsQ8mm_4epm938H4TV6OJPwQcDS2DxRL2qFji2KE --insecure" dir= execID=f5cde
time="2023-11-03T14:02:11Z" level=debug msg="application 'test-fixing-degraded-app' created\n" duration=214.76051ms execID=f5cde
time="2023-11-03T14:02:11Z" level=info msg="../../dist/argocd app sync test-fixing-degraded-app --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjUyOSwibmJmIjoxNjk5MDIwMTI5LCJpYXQiOjE2OTkwMjAxMjksImp0aSI6IjFkNTM3ZDA5LTE1M2QtNDJlNy04MzQ0LTM2NmIxOWJiNzY5MyJ9.OyGmsQ8mm_4epm938H4TV6OJPwQcDS2DxRL2qFji2KE --insecure" dir= execID=56b96
time="2023-11-03T14:02:21Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T14:02:18+00:00          ConfigMap  argocd-e2e--test-fixing-degraded-app-lmptw                  cm-1  OutOfSync  Missing              \n2023-11-03T14:02:18+00:00          ConfigMap  argocd-e2e--test-fixing-degraded-app-lmptw                  cm-2  OutOfSync  Missing              \n2023-11-03T14:02:19+00:00          ConfigMap  argocd-e2e--test-fixing-degraded-app-lmptw                  cm-1    Synced  Degraded              \n2023-11-03T14:02:21+00:00          ConfigMap  argocd-e2e--test-fixing-degraded-app-lmptw                  cm-1    Synced  Degraded              configmap/cm-1 created\n\nName:               argocd-e2e/test-fixing-degraded-app\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-fixing-degraded-app-lmptw\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-fixing-degraded-app\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               sync-waves\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (9575b47)\nHealth Status:      Degraded\n\nOperation:          Sync\nSync Revision:      9575b47e8509d2ee9da72a6825981dba2fe5f578\nPhase:              Failed\nStart:              2023-11-03 14:02:11 +0000 UTC\nFinished:           2023-11-03 14:02:21 +0000 UTC\nDuration:           10s\nMessage:            one or more synchronization tasks completed unsuccessfully\n\nGROUP  KIND       NAMESPACE                                   NAME  STATUS     HEALTH    HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-fixing-degraded-app-lmptw  cm-1  Synced     Degraded        configmap/cm-1 created\n       ConfigMap  argocd-e2e--test-fixing-degraded-app-lmptw  cm-2  OutOfSync  Missing         \n" duration=10.196080218s execID=56b96
time="2023-11-03T14:02:21Z" level=error msg="`../../dist/argocd app sync test-fixing-degraded-app --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjUyOSwibmJmIjoxNjk5MDIwMTI5LCJpYXQiOjE2OTkwMjAxMjksImp0aSI6IjFkNTM3ZDA5LTE1M2QtNDJlNy04MzQ0LTM2NmIxOWJiNzY5MyJ9.OyGmsQ8mm_4epm938H4TV6OJPwQcDS2DxRL2qFji2KE --insecure` failed exit status 1: time=\"2023-11-03T14:02:21Z\" level=fatal msg=\"Operation has completed with phase: Failed\"" execID=56b96
time="2023-11-03T14:02:21Z" level=info msg="expectation succeeded: operation phase should be Failed, is Failed"
time="2023-11-03T14:02:21Z" level=info msg="expectation succeeded: sync status to be OutOfSync, is OutOfSync"
time="2023-11-03T14:02:21Z" level=info msg="expectation succeeded: health to should Degraded, is Degraded"
time="2023-11-03T14:02:21Z" level=info msg="expectation succeeded: right number of results, want 1, got 1"
time="2023-11-03T14:02:21Z" level=info msg="expectation succeeded: resource 'ConfigMap/cm-1' sync status should be Synced, is Synced"
time="2023-11-03T14:02:21Z" level=info msg="expectation succeeded: resource 'ConfigMap/cm-1' health should be Degraded, is Degraded"
time="2023-11-03T14:02:21Z" level=info msg="expectation succeeded: resource 'ConfigMap/cm-2' sync status should be OutOfSync, is OutOfSync"
time="2023-11-03T14:02:21Z" level=info msg="expectation succeeded: resource 'ConfigMap/cm-2' health should be Missing, is Missing"
time="2023-11-03T14:02:21Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/metadata/annotations/health\", \"value\": \"Healthy\"}]" path=sync-waves/cm-1.yaml
time="2023-11-03T14:02:21Z" level=info msg="converting YAML to JSON"
time="2023-11-03T14:02:21Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"ConfigMap\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/sync-wave\":\"1\"},\"name\":\"cm-1\"}}"
time="2023-11-03T14:02:21Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T14:02:21Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=f5645
time="2023-11-03T14:02:21Z" level=debug msg="diff --git a/sync-waves/cm-1.yaml b/sync-waves/cm-1.yaml\nindex 26a0b27..243958c 100644\n--- a/sync-waves/cm-1.yaml\n+++ b/sync-waves/cm-1.yaml\n@@ -1,6 +1,7 @@\n apiVersion: v1\n kind: ConfigMap\n metadata:\n-  name: cm-1\n   annotations:\n-    argocd.argoproj.io/sync-wave: \"1\"\n\\ No newline at end of file\n+    argocd.argoproj.io/sync-wave: \"1\"\n+    health: Healthy\n+  name: cm-1\n" duration=5.124572ms execID=f5645
time="2023-11-03T14:02:21Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=2701d
time="2023-11-03T14:02:21Z" level=debug msg="[master 0017613] patch\n 1 file changed, 3 insertions(+), 2 deletions(-)\n" duration=12.365035ms execID=2701d
time="2023-11-03T14:02:21Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=bdd4e
Handling connection for 9081
time="2023-11-03T14:02:21Z" level=debug duration=40.472477ms execID=bdd4e
time="2023-11-03T14:02:21Z" level=info msg=patching jsonPatch="[{\"op\": \"replace\", \"path\": \"/metadata/annotations/health\", \"value\": \"Healthy\"}]" path=sync-waves/cm-2.yaml
time="2023-11-03T14:02:21Z" level=info msg="converting YAML to JSON"
time="2023-11-03T14:02:21Z" level=info msg=JSON bytes="{\"apiVersion\":\"v1\",\"kind\":\"ConfigMap\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/sync-wave\":\"2\"},\"name\":\"cm-2\"}}"
time="2023-11-03T14:02:21Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T14:02:21Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=22837
time="2023-11-03T14:02:21Z" level=debug msg="diff --git a/sync-waves/cm-2.yaml b/sync-waves/cm-2.yaml\nindex 3d2f28f..cdc61f9 100644\n--- a/sync-waves/cm-2.yaml\n+++ b/sync-waves/cm-2.yaml\n@@ -1,6 +1,7 @@\n apiVersion: v1\n kind: ConfigMap\n metadata:\n-  name: cm-2\n   annotations:\n-    argocd.argoproj.io/sync-wave: \"2\"\n\\ No newline at end of file\n+    argocd.argoproj.io/sync-wave: \"2\"\n+    health: Healthy\n+  name: cm-2\n" duration=3.245064ms execID=22837
time="2023-11-03T14:02:21Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=11d0a
time="2023-11-03T14:02:21Z" level=debug msg="[master ab11b64] patch\n 1 file changed, 3 insertions(+), 2 deletions(-)\n" duration=40.788679ms execID=11d0a
time="2023-11-03T14:02:21Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=83f7b
Handling connection for 9081
time="2023-11-03T14:02:21Z" level=debug duration=37.425121ms execID=83f7b
time="2023-11-03T14:02:21Z" level=info msg="../../dist/argocd app get test-fixing-degraded-app --refresh --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjUyOSwibmJmIjoxNjk5MDIwMTI5LCJpYXQiOjE2OTkwMjAxMjksImp0aSI6IjFkNTM3ZDA5LTE1M2QtNDJlNy04MzQ0LTM2NmIxOWJiNzY5MyJ9.OyGmsQ8mm_4epm938H4TV6OJPwQcDS2DxRL2qFji2KE --insecure" dir= execID=10352
time="2023-11-03T14:02:21Z" level=debug msg="Name:               argocd-e2e/test-fixing-degraded-app\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-fixing-degraded-app-lmptw\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-fixing-degraded-app\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               sync-waves\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        OutOfSync from  (ab11b64)\nHealth Status:      Degraded\n\nGROUP  KIND       NAMESPACE                                   NAME  STATUS     HEALTH    HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-fixing-degraded-app-lmptw  cm-1  OutOfSync  Degraded        configmap/cm-1 created\n       ConfigMap  argocd-e2e--test-fixing-degraded-app-lmptw  cm-2  OutOfSync  Missing         \n" duration=239.556322ms execID=10352
time="2023-11-03T14:02:21Z" level=info msg="expectation succeeded: resource 'ConfigMap/cm-1' sync status should be OutOfSync, is OutOfSync"
time="2023-11-03T14:02:21Z" level=info msg="../../dist/argocd app sync test-fixing-degraded-app --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjUyOSwibmJmIjoxNjk5MDIwMTI5LCJpYXQiOjE2OTkwMjAxMjksImp0aSI6IjFkNTM3ZDA5LTE1M2QtNDJlNy04MzQ0LTM2NmIxOWJiNzY5MyJ9.OyGmsQ8mm_4epm938H4TV6OJPwQcDS2DxRL2qFji2KE --insecure" dir= execID=0dfc8
time="2023-11-03T14:02:25Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                  NAME    STATUS    HEALTH         HOOK  MESSAGE\n2023-11-03T14:02:22+00:00          ConfigMap  argocd-e2e--test-fixing-degraded-app-lmptw                  cm-2  OutOfSync  Missing               \n2023-11-03T14:02:22+00:00          ConfigMap  argocd-e2e--test-fixing-degraded-app-lmptw                  cm-1  OutOfSync  Degraded              \n2023-11-03T14:02:22+00:00          ConfigMap  argocd-e2e--test-fixing-degraded-app-lmptw                  cm-1    Synced  Healthy              \n2023-11-03T14:02:24+00:00          ConfigMap  argocd-e2e--test-fixing-degraded-app-lmptw                  cm-1    Synced  Healthy              configmap/cm-1 configured\n2023-11-03T14:02:25+00:00          ConfigMap  argocd-e2e--test-fixing-degraded-app-lmptw                  cm-2  OutOfSync  Missing              configmap/cm-2 created\n2023-11-03T14:02:25+00:00          ConfigMap  argocd-e2e--test-fixing-degraded-app-lmptw                  cm-2    Synced  Healthy              configmap/cm-2 created\n\nName:               argocd-e2e/test-fixing-degraded-app\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-fixing-degraded-app-lmptw\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-fixing-degraded-app\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               sync-waves\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (ab11b64)\nHealth Status:      Healthy\n\nOperation:          Sync\nSync Revision:      ab11b6443c55586cb8fcfe5e31adfad5d8d41067\nPhase:              Succeeded\nStart:              2023-11-03 14:02:22 +0000 UTC\nFinished:           2023-11-03 14:02:24 +0000 UTC\nDuration:           2s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND       NAMESPACE                                   NAME  STATUS  HEALTH   HOOK  MESSAGE\n       ConfigMap  argocd-e2e--test-fixing-degraded-app-lmptw  cm-1  Synced  Healthy        configmap/cm-1 configured\n       ConfigMap  argocd-e2e--test-fixing-degraded-app-lmptw  cm-2  Synced  Healthy        configmap/cm-2 created\n" duration=3.229260614s execID=0dfc8
time="2023-11-03T14:02:25Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T14:02:25Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T14:02:25Z" level=info msg="expectation succeeded: health to should Healthy, is Healthy"
time="2023-11-03T14:02:25Z" level=info msg="expectation succeeded: right number of results, want 2, got 2"
time="2023-11-03T14:02:25Z" level=info msg="expectation succeeded: resource 'ConfigMap/cm-1' sync status should be Synced, is Synced"
time="2023-11-03T14:02:25Z" level=info msg="expectation succeeded: resource 'ConfigMap/cm-1' health should be Healthy, is Healthy"
time="2023-11-03T14:02:25Z" level=info msg="expectation succeeded: resource 'ConfigMap/cm-2' sync status should be Synced, is Synced"
time="2023-11-03T14:02:25Z" level=info msg="expectation succeeded: resource 'ConfigMap/cm-2' health should be Healthy, is Healthy"
time="2023-11-03T14:02:25Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestFixingDegradedApp (17.57s)
=== RUN   TestOneProgressingDeploymentIsSucceededAndSynced
time="2023-11-03T14:02:25Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=14e65
time="2023-11-03T14:02:25Z" level=debug msg="namespace \"argocd-e2e--test-fixing-degraded-app-lmptw\" deleted\n" duration=243.607896ms execID=14e65
time="2023-11-03T14:02:25Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=293cf
time="2023-11-03T14:02:26Z" level=debug msg="No resources found\n" duration=468.901744ms execID=293cf
time="2023-11-03T14:02:26Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=63abb
time="2023-11-03T14:02:26Z" level=debug msg="No resources found\n" duration=234.079408ms execID=63abb
time="2023-11-03T14:02:26Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T14:02:27Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjU0NiwibmJmIjoxNjk5MDIwMTQ2LCJpYXQiOjE2OTkwMjAxNDYsImp0aSI6IjdjOWY1MzNkLTc1MmUtNDRmYS05OTk3LTNhMWRhY2I4ZGUzOSJ9.gqeFtjEGa_fAErYgFOwpiQqAj4n25w-h1Y2Am9eZNZM --insecure" dir= execID=dabc4
time="2023-11-03T14:02:27Z" level=debug duration=110.82347ms execID=dabc4
time="2023-11-03T14:02:27Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=d8bf7
time="2023-11-03T14:02:27Z" level=debug duration=9.003272ms execID=d8bf7
time="2023-11-03T14:02:27Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=eefb2
time="2023-11-03T14:02:27Z" level=debug duration=3.104969ms execID=eefb2
time="2023-11-03T14:02:27Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=21ee1
time="2023-11-03T14:02:27Z" level=debug duration=3.967191ms execID=21ee1
time="2023-11-03T14:02:27Z" level=info msg="pkill -9 gpg-agent" dir= execID=e521b
time="2023-11-03T14:02:27Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=239e8
time="2023-11-03T14:02:27Z" level=debug duration=12.539443ms execID=239e8
time="2023-11-03T14:02:27Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=60dbf
time="2023-11-03T14:02:27Z" level=debug duration=52.777878ms execID=60dbf
time="2023-11-03T14:02:27Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=79939
time="2023-11-03T14:02:27Z" level=debug duration=2.731365ms execID=79939
time="2023-11-03T14:02:27Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=9608e
time="2023-11-03T14:02:27Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=3.805046ms execID=9608e
time="2023-11-03T14:02:27Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=46072
time="2023-11-03T14:02:27Z" level=debug duration=26.758134ms execID=46072
time="2023-11-03T14:02:27Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=74b94
time="2023-11-03T14:02:27Z" level=debug duration=22.042625ms execID=74b94
time="2023-11-03T14:02:27Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=883f9
time="2023-11-03T14:02:27Z" level=debug duration=2.385617ms execID=883f9
time="2023-11-03T14:02:27Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=7d6fd
Handling connection for 9081
time="2023-11-03T14:02:27Z" level=debug duration=79.290478ms execID=7d6fd
time="2023-11-03T14:02:27Z" level=info msg="kubectl create ns argocd-e2e--test-one-progressing-deployment-is-succeeded--yeqwl" dir= execID=09cd1
time="2023-11-03T14:02:27Z" level=debug msg="namespace/argocd-e2e--test-one-progressing-deployment-is-succeeded--yeqwl created\n" duration=98.809773ms execID=09cd1
time="2023-11-03T14:02:27Z" level=info msg="kubectl label ns argocd-e2e--test-one-progressing-deployment-is-succeeded--yeqwl e2e.argoproj.io=true" dir= execID=90c40
time="2023-11-03T14:02:27Z" level=debug msg="namespace/argocd-e2e--test-one-progressing-deployment-is-succeeded--yeqwl labeled\n" duration=280.29772ms execID=90c40
time="2023-11-03T14:02:27Z" level=info msg="clean state" duration=2.575180064s id=TestOneProgressingDeploymentIsSucceededAndSynced-yeqwl name=TestOneProgressingDeploymentIsSucceededAndSynced password=password username=admin
time="2023-11-03T14:02:28Z" level=info msg=patching jsonPatch="[\n    {\n        \"op\": \"replace\",\n        \"path\": \"/spec/template/spec/containers/0/image\",\n        \"value\": \"alpine:ops!\"\n    }\n]" path=one-deployment/deployment.yaml
time="2023-11-03T14:02:28Z" level=info msg="converting YAML to JSON"
time="2023-11-03T14:02:28Z" level=info msg=JSON bytes="{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"name\":\"main\"},\"spec\":{\"progressDeadlineSeconds\":10,\"replicas\":1,\"selector\":{\"matchLabels\":{\"my-label\":\"whatever\"}},\"template\":{\"metadata\":{\"labels\":{\"my-label\":\"whatever\"}},\"spec\":{\"containers\":[{\"command\":[\"sleep\",\"999\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}]}}}}"
time="2023-11-03T14:02:28Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T14:02:28Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=a82c6
time="2023-11-03T14:02:28Z" level=debug msg="diff --git a/one-deployment/deployment.yaml b/one-deployment/deployment.yaml\nindex 9ddf4a4..12f6395 100644\n--- a/one-deployment/deployment.yaml\n+++ b/one-deployment/deployment.yaml\n@@ -3,8 +3,8 @@ kind: Deployment\n metadata:\n   name: main\n spec:\n-  replicas: 1\n   progressDeadlineSeconds: 10\n+  replicas: 1\n   selector:\n     matchLabels:\n       my-label: whatever\n@@ -14,8 +14,9 @@ spec:\n         my-label: whatever\n     spec:\n       containers:\n-        - name: main\n-          command: [\"sleep\", \"999\"]\n-          image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-          imagePullPolicy: IfNotPresent\n-\n+      - command:\n+        - sleep\n+        - \"999\"\n+        image: alpine:ops!\n+        imagePullPolicy: IfNotPresent\n+        name: main\n" duration=4.801676ms execID=a82c6
time="2023-11-03T14:02:28Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=f757c
time="2023-11-03T14:02:28Z" level=debug msg="[master 84eec94] patch\n 1 file changed, 7 insertions(+), 6 deletions(-)\n" duration=11.797677ms execID=f757c
time="2023-11-03T14:02:28Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=8f730
Handling connection for 9081
time="2023-11-03T14:02:28Z" level=debug duration=38.925112ms execID=8f730
time="2023-11-03T14:02:28Z" level=info msg="../../dist/argocd app create test-one-progressing-deployment-is-succeeded-and-synced --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path one-deployment --project default --dest-namespace argocd-e2e--test-one-progressing-deployment-is-succeeded--yeqwl --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjU0NiwibmJmIjoxNjk5MDIwMTQ2LCJpYXQiOjE2OTkwMjAxNDYsImp0aSI6IjdjOWY1MzNkLTc1MmUtNDRmYS05OTk3LTNhMWRhY2I4ZGUzOSJ9.gqeFtjEGa_fAErYgFOwpiQqAj4n25w-h1Y2Am9eZNZM --insecure" dir= execID=23198
time="2023-11-03T14:02:29Z" level=debug msg="application 'test-one-progressing-deployment-is-succeeded-and-synced' created\n" duration=295.445027ms execID=23198
time="2023-11-03T14:02:29Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T14:02:29Z" level=info msg="../../dist/argocd app sync test-one-progressing-deployment-is-succeeded-and-synced --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjU0NiwibmJmIjoxNjk5MDIwMTQ2LCJpYXQiOjE2OTkwMjAxNDYsImp0aSI6IjdjOWY1MzNkLTc1MmUtNDRmYS05OTk3LTNhMWRhY2I4ZGUzOSJ9.gqeFtjEGa_fAErYgFOwpiQqAj4n25w-h1Y2Am9eZNZM --insecure" dir= execID=fae6c
time="2023-11-03T14:02:33Z" level=debug msg="TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE\n2023-11-03T14:02:32+00:00   apps  Deployment  argocd-e2e--test-one-progressing-deployment-is-succeeded--yeqwl                  main  OutOfSync  Missing              \n2023-11-03T14:02:33+00:00   apps  Deployment  argocd-e2e--test-one-progressing-deployment-is-succeeded--yeqwl                  main  OutOfSync  Missing              deployment.apps/main created\n2023-11-03T14:02:33+00:00   apps  Deployment  argocd-e2e--test-one-progressing-deployment-is-succeeded--yeqwl                  main    Synced  Progressing              deployment.apps/main created\n\nName:               argocd-e2e/test-one-progressing-deployment-is-succeeded-and-synced\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-one-progressing-deployment-is-succeeded--yeqwl\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-one-progressing-deployment-is-succeeded-and-synced\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               one-deployment\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (84eec94)\nHealth Status:      Progressing\n\nOperation:          Sync\nSync Revision:      84eec9480b73ccb8ec4b211178f3e8af26329e4c\nPhase:              Succeeded\nStart:              2023-11-03 14:02:29 +0000 UTC\nFinished:           2023-11-03 14:02:33 +0000 UTC\nDuration:           4s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                                        NAME  STATUS  HEALTH       HOOK  MESSAGE\napps   Deployment  argocd-e2e--test-one-progressing-deployment-is-succeeded--yeqwl  main  Synced  Progressing        deployment.apps/main created\n" duration=4.337183388s execID=fae6c
time="2023-11-03T14:02:33Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T14:02:33Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T14:02:33Z" level=info msg="expectation succeeded: health to should Progressing, is Progressing"
time="2023-11-03T14:02:33Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T14:02:33Z" level=info msg="expectation succeeded: right number of results, want 1, got 1"
time="2023-11-03T14:02:33Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestOneProgressingDeploymentIsSucceededAndSynced (8.28s)
=== RUN   TestDegradedDeploymentIsSucceededAndSynced
time="2023-11-03T14:02:33Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=9d3ff
time="2023-11-03T14:02:33Z" level=debug msg="namespace \"argocd-e2e--test-one-progressing-deployment-is-succeeded--yeqwl\" deleted\n" duration=314.778381ms execID=9d3ff
time="2023-11-03T14:02:33Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=c6e1e
time="2023-11-03T14:02:34Z" level=debug msg="No resources found\n" duration=367.78136ms execID=c6e1e
time="2023-11-03T14:02:34Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=bc74d
time="2023-11-03T14:02:34Z" level=debug msg="No resources found\n" duration=232.65681ms execID=bc74d
time="2023-11-03T14:02:35Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T14:02:35Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjU1NSwibmJmIjoxNjk5MDIwMTU1LCJpYXQiOjE2OTkwMjAxNTUsImp0aSI6IjE5NWJlYWVhLTk2MjctNDExYy05NTdjLTIyY2U3ZGU1ZTQxZSJ9.lYIx9fgLcqilhmxMZyxvDLYub90qaOfkcoAsvGbi0Uc --insecure" dir= execID=e7f07
time="2023-11-03T14:02:35Z" level=debug duration=74.002102ms execID=e7f07
time="2023-11-03T14:02:35Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=0e6bd
time="2023-11-03T14:02:35Z" level=debug duration=2.151558ms execID=0e6bd
time="2023-11-03T14:02:35Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=b2e81
time="2023-11-03T14:02:35Z" level=debug duration=1.779774ms execID=b2e81
time="2023-11-03T14:02:35Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=f4634
time="2023-11-03T14:02:35Z" level=debug duration=1.566132ms execID=f4634
time="2023-11-03T14:02:35Z" level=info msg="pkill -9 gpg-agent" dir= execID=57079
time="2023-11-03T14:02:35Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=f5f4a
time="2023-11-03T14:02:35Z" level=debug duration=30.860186ms execID=f5f4a
time="2023-11-03T14:02:35Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=5a852
time="2023-11-03T14:02:35Z" level=debug duration=34.41019ms execID=5a852
time="2023-11-03T14:02:35Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=783b6
time="2023-11-03T14:02:35Z" level=debug duration=1.928755ms execID=783b6
time="2023-11-03T14:02:35Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=7ccd8
time="2023-11-03T14:02:35Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.332344ms execID=7ccd8
time="2023-11-03T14:02:35Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=dda19
time="2023-11-03T14:02:35Z" level=debug duration=29.155401ms execID=dda19
time="2023-11-03T14:02:35Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=3f4b7
time="2023-11-03T14:02:35Z" level=debug duration=35.380916ms execID=3f4b7
time="2023-11-03T14:02:35Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=01dc6
time="2023-11-03T14:02:35Z" level=debug duration=2.352676ms execID=01dc6
time="2023-11-03T14:02:35Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=8c57e
Handling connection for 9081
time="2023-11-03T14:02:35Z" level=debug duration=61.07738ms execID=8c57e
time="2023-11-03T14:02:35Z" level=info msg="kubectl create ns argocd-e2e--test-degraded-deployment-is-succeeded-and-syn-ivoie" dir= execID=ede5b
time="2023-11-03T14:02:35Z" level=debug msg="namespace/argocd-e2e--test-degraded-deployment-is-succeeded-and-syn-ivoie created\n" duration=184.008501ms execID=ede5b
time="2023-11-03T14:02:35Z" level=info msg="kubectl label ns argocd-e2e--test-degraded-deployment-is-succeeded-and-syn-ivoie e2e.argoproj.io=true" dir= execID=7729a
time="2023-11-03T14:02:36Z" level=debug msg="namespace/argocd-e2e--test-degraded-deployment-is-succeeded-and-syn-ivoie labeled\n" duration=247.768934ms execID=7729a
time="2023-11-03T14:02:36Z" level=info msg="clean state" duration=2.65793788s id=TestDegradedDeploymentIsSucceededAndSynced-ivoie name=TestDegradedDeploymentIsSucceededAndSynced password=password username=admin
time="2023-11-03T14:02:37Z" level=info msg=patching jsonPatch="[\n    {\n        \"op\": \"replace\",\n        \"path\": \"/spec/progressDeadlineSeconds\",\n        \"value\": 1\n    },\n    {\n        \"op\": \"replace\",\n        \"path\": \"/spec/template/spec/containers/0/image\",\n        \"value\": \"alpine:ops!\"\n    }\n]" path=one-deployment/deployment.yaml
time="2023-11-03T14:02:37Z" level=info msg="converting YAML to JSON"
time="2023-11-03T14:02:37Z" level=info msg=JSON bytes="{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"name\":\"main\"},\"spec\":{\"progressDeadlineSeconds\":10,\"replicas\":1,\"selector\":{\"matchLabels\":{\"my-label\":\"whatever\"}},\"template\":{\"metadata\":{\"labels\":{\"my-label\":\"whatever\"}},\"spec\":{\"containers\":[{\"command\":[\"sleep\",\"999\"],\"image\":\"quay.io/argoprojlabs/argocd-e2e-container:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"main\"}]}}}}"
time="2023-11-03T14:02:37Z" level=info msg="converting JSON back to YAML"
time="2023-11-03T14:02:37Z" level=info msg="git diff" dir=/tmp/argo-e2e/testdata.git execID=e2628
time="2023-11-03T14:02:37Z" level=debug msg="diff --git a/one-deployment/deployment.yaml b/one-deployment/deployment.yaml\nindex 9ddf4a4..c805aa8 100644\n--- a/one-deployment/deployment.yaml\n+++ b/one-deployment/deployment.yaml\n@@ -3,8 +3,8 @@ kind: Deployment\n metadata:\n   name: main\n spec:\n+  progressDeadlineSeconds: 1\n   replicas: 1\n-  progressDeadlineSeconds: 10\n   selector:\n     matchLabels:\n       my-label: whatever\n@@ -14,8 +14,9 @@ spec:\n         my-label: whatever\n     spec:\n       containers:\n-        - name: main\n-          command: [\"sleep\", \"999\"]\n-          image: quay.io/argoprojlabs/argocd-e2e-container:0.1\n-          imagePullPolicy: IfNotPresent\n-\n+      - command:\n+        - sleep\n+        - \"999\"\n+        image: alpine:ops!\n+        imagePullPolicy: IfNotPresent\n+        name: main\n" duration=4.97421ms execID=e2628
time="2023-11-03T14:02:37Z" level=info msg="git commit -am patch" dir=/tmp/argo-e2e/testdata.git execID=827f9
time="2023-11-03T14:02:37Z" level=debug msg="[master e6e4592] patch\n 1 file changed, 7 insertions(+), 6 deletions(-)\n" duration=12.739779ms execID=827f9
time="2023-11-03T14:02:37Z" level=info msg="git push -f origin master" dir=/tmp/argo-e2e/testdata.git execID=20f0e
Handling connection for 9081
time="2023-11-03T14:02:37Z" level=debug duration=38.628686ms execID=20f0e
time="2023-11-03T14:02:37Z" level=info msg="../../dist/argocd app create test-degraded-deployment-is-succeeded-and-synced --repo http://argocd-e2e-server:9081/argo-e2e/testdata.git --dest-server https://kubernetes.default.svc --path one-deployment --project default --dest-namespace argocd-e2e--test-degraded-deployment-is-succeeded-and-syn-ivoie --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjU1NSwibmJmIjoxNjk5MDIwMTU1LCJpYXQiOjE2OTkwMjAxNTUsImp0aSI6IjE5NWJlYWVhLTk2MjctNDExYy05NTdjLTIyY2U3ZGU1ZTQxZSJ9.lYIx9fgLcqilhmxMZyxvDLYub90qaOfkcoAsvGbi0Uc --insecure" dir= execID=0ea97
time="2023-11-03T14:02:37Z" level=debug msg="application 'test-degraded-deployment-is-succeeded-and-synced' created\n" duration=281.462858ms execID=0ea97
time="2023-11-03T14:02:37Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T14:02:37Z" level=info msg="../../dist/argocd app sync test-degraded-deployment-is-succeeded-and-synced --timeout 30 --prune --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjU1NSwibmJmIjoxNjk5MDIwMTU1LCJpYXQiOjE2OTkwMjAxNTUsImp0aSI6IjE5NWJlYWVhLTk2MjctNDExYy05NTdjLTIyY2U3ZGU1ZTQxZSJ9.lYIx9fgLcqilhmxMZyxvDLYub90qaOfkcoAsvGbi0Uc --insecure" dir= execID=bc348
time="2023-11-03T14:02:38Z" level=debug msg="TIMESTAMP                  GROUP        KIND   NAMESPACE                                                                       NAME    STATUS    HEALTH        HOOK  MESSAGE\n2023-11-03T14:02:37+00:00   apps  Deployment  argocd-e2e--test-degraded-deployment-is-succeeded-and-syn-ivoie                  main  OutOfSync  Missing              \n2023-11-03T14:02:38+00:00   apps  Deployment  argocd-e2e--test-degraded-deployment-is-succeeded-and-syn-ivoie                  main  OutOfSync  Missing              deployment.apps/main created\n2023-11-03T14:02:38+00:00   apps  Deployment  argocd-e2e--test-degraded-deployment-is-succeeded-and-syn-ivoie                  main    Synced  Progressing              deployment.apps/main created\n\nName:               argocd-e2e/test-degraded-deployment-is-succeeded-and-synced\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          argocd-e2e--test-degraded-deployment-is-succeeded-and-syn-ivoie\nURL:                https://argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com/applications/test-degraded-deployment-is-succeeded-and-synced\nRepo:               http://argocd-e2e-server:9081/argo-e2e/testdata.git\nTarget:             \nPath:               one-deployment\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to  (e6e4592)\nHealth Status:      Progressing\n\nOperation:          Sync\nSync Revision:      e6e4592ce007cb69f74b75a7bc81a1ba8a5a3975\nPhase:              Succeeded\nStart:              2023-11-03 14:02:37 +0000 UTC\nFinished:           2023-11-03 14:02:38 +0000 UTC\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE                                                        NAME  STATUS  HEALTH       HOOK  MESSAGE\napps   Deployment  argocd-e2e--test-degraded-deployment-is-succeeded-and-syn-ivoie  main  Synced  Progressing        deployment.apps/main created\n" duration=726.242634ms execID=bc348
time="2023-11-03T14:02:38Z" level=info msg="expectation succeeded: no error and output contained ''"
time="2023-11-03T14:02:38Z" level=info msg="expectation succeeded: operation phase should be Succeeded, is Succeeded"
time="2023-11-03T14:02:38Z" level=info msg="pending: health to should Degraded, is Progressing"
time="2023-11-03T14:02:41Z" level=info msg="expectation succeeded: health to should Degraded, is Degraded"
time="2023-11-03T14:02:41Z" level=info msg="expectation succeeded: sync status to be Synced, is Synced"
time="2023-11-03T14:02:41Z" level=info msg="expectation succeeded: right number of results, want 1, got 1"
time="2023-11-03T14:02:41Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestDegradedDeploymentIsSucceededAndSynced (7.75s)
=== RUN   TestUserInfo
time="2023-11-03T14:02:41Z" level=info msg="kubectl delete ns -l e2e.argoproj.io=true --field-selector status.phase=Active --wait=false" dir= execID=d1f8e
time="2023-11-03T14:02:41Z" level=debug msg="namespace \"argocd-e2e--test-degraded-deployment-is-succeeded-and-syn-ivoie\" deleted\n" duration=194.688553ms execID=d1f8e
time="2023-11-03T14:02:41Z" level=info msg="kubectl delete crd -l e2e.argoproj.io=true --wait=false" dir= execID=997ee
time="2023-11-03T14:02:41Z" level=debug msg="No resources found\n" duration=431.593802ms execID=997ee
time="2023-11-03T14:02:41Z" level=info msg="kubectl delete clusterroles -l e2e.argoproj.io=true --wait=false" dir= execID=23488
time="2023-11-03T14:02:42Z" level=debug msg="No resources found\n" duration=286.804293ms execID=23488
time="2023-11-03T14:02:43Z" level=warning msg="Failed to invoke grpc call. Use flag --grpc-web in grpc calls. To avoid this warning message, use flag --grpc-web."
time="2023-11-03T14:02:43Z" level=info msg="../../dist/argocd proj create gpg --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjU2MywibmJmIjoxNjk5MDIwMTYzLCJpYXQiOjE2OTkwMjAxNjMsImp0aSI6IjhiZWI4ZjdiLTI5ZDEtNGQ0Ny1iMmQ5LTdlYTllNzZiNjA4MCJ9.PSjR1qtUTvW01uu4-87wnHNFoOyfpF9HH8KBaw_ZRUI --insecure" dir= execID=92337
time="2023-11-03T14:02:43Z" level=debug duration=83.114312ms execID=92337
time="2023-11-03T14:02:43Z" level=info msg="mkdir -p /tmp/argo-e2e" dir= execID=3d5b4
time="2023-11-03T14:02:43Z" level=debug duration=1.957696ms execID=3d5b4
time="2023-11-03T14:02:43Z" level=info msg="mkdir -p /tmp/argo-e2e/gpg" dir= execID=99499
time="2023-11-03T14:02:43Z" level=debug duration=1.50228ms execID=99499
time="2023-11-03T14:02:43Z" level=info msg="chmod 0700 /tmp/argo-e2e/gpg" dir= execID=654bc
time="2023-11-03T14:02:43Z" level=debug duration=1.540715ms execID=654bc
time="2023-11-03T14:02:43Z" level=info msg="pkill -9 gpg-agent" dir= execID=41117
time="2023-11-03T14:02:43Z" level=info msg="gpg --import ../fixture/gpg/signingkey.asc" dir= execID=a94d5
time="2023-11-03T14:02:43Z" level=debug duration=10.166464ms execID=a94d5
time="2023-11-03T14:02:43Z" level=info msg="cp -Rf testdata /tmp/argo-e2e/testdata.git" dir= execID=8f2b3
time="2023-11-03T14:02:43Z" level=debug duration=57.05613ms execID=8f2b3
time="2023-11-03T14:02:43Z" level=info msg="chmod 777 ." dir=/tmp/argo-e2e/testdata.git execID=0b2c6
time="2023-11-03T14:02:43Z" level=debug duration=2.103959ms execID=0b2c6
time="2023-11-03T14:02:43Z" level=info msg="git init" dir=/tmp/argo-e2e/testdata.git execID=c9445
time="2023-11-03T14:02:43Z" level=debug msg="Initialized empty Git repository in /tmp/argo-e2e/testdata.git/.git/\n" duration=4.085773ms execID=c9445
time="2023-11-03T14:02:43Z" level=info msg="git add ." dir=/tmp/argo-e2e/testdata.git execID=e2043
time="2023-11-03T14:02:43Z" level=debug duration=27.499155ms execID=e2043
time="2023-11-03T14:02:43Z" level=info msg="git commit -q -m initial commit" dir=/tmp/argo-e2e/testdata.git execID=d4388
time="2023-11-03T14:02:43Z" level=debug duration=22.2431ms execID=d4388
time="2023-11-03T14:02:43Z" level=info msg="git remote add origin http://127.0.0.1:9081/argo-e2e/testdata.git" dir=/tmp/argo-e2e/testdata.git execID=340ea
time="2023-11-03T14:02:43Z" level=debug duration=2.277608ms execID=340ea
time="2023-11-03T14:02:43Z" level=info msg="git push origin master -f" dir=/tmp/argo-e2e/testdata.git execID=1bafb
Handling connection for 9081
time="2023-11-03T14:02:43Z" level=debug duration=68.471543ms execID=1bafb
time="2023-11-03T14:02:43Z" level=info msg="kubectl create ns argocd-e2e--test-user-info-ezvux" dir= execID=8d278
time="2023-11-03T14:02:43Z" level=debug msg="namespace/argocd-e2e--test-user-info-ezvux created\n" duration=144.006261ms execID=8d278
time="2023-11-03T14:02:43Z" level=info msg="kubectl label ns argocd-e2e--test-user-info-ezvux e2e.argoproj.io=true" dir= execID=59443
time="2023-11-03T14:02:43Z" level=debug msg="namespace/argocd-e2e--test-user-info-ezvux labeled\n" duration=298.063258ms execID=59443
time="2023-11-03T14:02:43Z" level=info msg="clean state" duration=2.706785286s id=TestUserInfo-ezvux name=TestUserInfo password=password username=admin
time="2023-11-03T14:02:43Z" level=info msg="../../dist/argocd account get-user-info --server argocd-test-server-argocd-e2e.apps.psi-413.ocp-gitops-qe.com --auth-token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcmdvY2QiLCJzdWIiOiJhZG1pbjpsb2dpbiIsImV4cCI6MTY5OTEwNjU2MywibmJmIjoxNjk5MDIwMTYzLCJpYXQiOjE2OTkwMjAxNjMsImp0aSI6IjhiZWI4ZjdiLTI5ZDEtNGQ0Ny1iMmQ5LTdlYTllNzZiNjA4MCJ9.PSjR1qtUTvW01uu4-87wnHNFoOyfpF9HH8KBaw_ZRUI --insecure" dir= execID=ef31c
time="2023-11-03T14:02:44Z" level=debug msg="Logged In: true\nUsername: admin\nIssuer: argocd\nGroups: \n" duration=124.451649ms execID=ef31c
time="2023-11-03T14:02:44Z" level=info msg="Registering test execution at /argocd-e2e/argocd_e2e_record"
--- PASS: TestUserInfo (2.83s)
FAIL
FAIL	github.com/argoproj/argo-cd/v2/test/e2e	3177.455s
FAIL
+ report
+ set -eux -o pipefail
+ go-junit-report
make[1]: *** [Makefile:409: test-e2e-local] Error 1
make[1]: Leaving directory '/argocd-e2e/argo-cd'
+ cleanup
+ '[' -n 694 ']'
+ sudo kill 694
sudo: unable to send audit message: Operation not permitted
+ oc patch argocd.argoproj.io/argocd-test -n argocd-e2e --type json '--patch=[ { "op": "remove", "path": "/metadata/finalizers" } ]'
argocd.argoproj.io/argocd-test patched
+ oc -n openshift-operators scale deployment --replicas=1 gitops-operator-controller-manager
deployment.apps/gitops-operator-controller-manager scaled
+ oc delete project argocd-e2e --timeout=300s --ignore-not-found
project.project.openshift.io "argocd-e2e" deleted
+ oc delete project argocd-e2e-external --timeout=300s --ignore-not-found
project.project.openshift.io "argocd-e2e-external" deleted
make: *** [Makefile:62: argocd-e2e-tests] Error 2
+ failed=1
+ [[ -f argo-cd/test-results/test.out ]]
+ grep -e '--- PASS:' argo-cd/test-results/test.out
+ grep -e '--- FAIL:' argo-cd/test-results/test.out
+ grep -e '--- SKIP:' argo-cd/test-results/test.out
++ cat argo-cd/test-results/tests-passed.log
++ wc -l
+ tests_passed_count=265
++ cat argo-cd/test-results/tests-failed.log
++ wc -l
+ tests_failed_count=20
++ cat argo-cd/test-results/tests-skipped.log
++ wc -l
+ tests_skipped_count=44
+ echo 'Tests Passed: 265'
Tests Passed: 265
Tests Failed: 20
+ echo 'Tests Failed: 20'
+ echo 'Tests Skipped: 44'
Tests Skipped: 44
+ [[ 265 -lt 270 ]]
Found new test failures or the expected number of passed tests were not found
+ echo 'Found new test failures or the expected number of passed tests were not found'
+ clean
+ set -x
Uploading test results...
+ echo 'Uploading test results...'
+ ls -l argo-cd/test-results
total 5568
-rw-r--r--. 1 root root 2733448 Nov  3 14:02 junit.xml
-rw-r--r--. 1 root root 2705886 Nov  3 14:02 test.out
-rw-r--r--. 1 root root     944 Nov  3 14:03 tests-failed.log
-rw-r--r--. 1 root root   12790 Nov  3 14:03 tests-passed.log
-rw-r--r--. 1 root root    2166 Nov  3 14:03 tests-skipped.log
+ upload ./argo-cd/test-results/junit.xml argocd-e2e-test.xml
+ ls -l ./argo-cd/test-results/junit.xml
-rw-r--r--. 1 root root 2733448 Nov  3 14:02 ./argo-cd/test-results/junit.xml
+ dest=argocd-e2e-test.xml
+ curl -f -k -s -u pipelinesci:pipelinesci -F path=CI/argocd-e2e-tests/231103-124637/argocd-e2e-test.xml -F file=@./argo-cd/test-results/junit.xml http://uploader-devtools-gitops-services.apps.ocp-c1.prod.psi.redhat.com/upload

+ echo
+ upload ./argo-cd/test-results/test.out argocd-e2e-test.log
+ ls -l ./argo-cd/test-results/test.out
-rw-r--r--. 1 root root 2705886 Nov  3 14:02 ./argo-cd/test-results/test.out
+ dest=argocd-e2e-test.log
+ curl -f -k -s -u pipelinesci:pipelinesci -F path=CI/argocd-e2e-tests/231103-124637/argocd-e2e-test.log -F file=@./argo-cd/test-results/test.out http://uploader-devtools-gitops-services.apps.ocp-c1.prod.psi.redhat.com/upload
+ echo

+ upload ./argo-cd/test-results/tests-passed.log argocd-e2e-tests-passed.log
+ ls -l ./argo-cd/test-results/tests-passed.log
-rw-r--r--. 1 root root 12790 Nov  3 14:03 ./argo-cd/test-results/tests-passed.log
+ dest=argocd-e2e-tests-passed.log
+ curl -f -k -s -u pipelinesci:pipelinesci -F path=CI/argocd-e2e-tests/231103-124637/argocd-e2e-tests-passed.log -F file=@./argo-cd/test-results/tests-passed.log http://uploader-devtools-gitops-services.apps.ocp-c1.prod.psi.redhat.com/upload
File has been uploaded to CI/argocd-e2e-tests/231103-124637/argocd-e2e-tests-passed.log 🚀
+ echo

+ upload ./argo-cd/test-results/tests-failed.log argocd-e2e-tests-failed.log
+ ls -l ./argo-cd/test-results/tests-failed.log
-rw-r--r--. 1 root root 944 Nov  3 14:03 ./argo-cd/test-results/tests-failed.log
+ dest=argocd-e2e-tests-failed.log
+ curl -f -k -s -u pipelinesci:pipelinesci -F path=CI/argocd-e2e-tests/231103-124637/argocd-e2e-tests-failed.log -F file=@./argo-cd/test-results/tests-failed.log http://uploader-devtools-gitops-services.apps.ocp-c1.prod.psi.redhat.com/upload
File has been uploaded to CI/argocd-e2e-tests/231103-124637/argocd-e2e-tests-failed.log 🚀
+ echo

+ upload ./argo-cd/test-results/tests-skipped.log argocd-e2e-tests-skipped.log
+ ls -l ./argo-cd/test-results/tests-skipped.log
-rw-r--r--. 1 root root 2166 Nov  3 14:03 ./argo-cd/test-results/tests-skipped.log
+ dest=argocd-e2e-tests-skipped.log
+ curl -f -k -s -u pipelinesci:pipelinesci -F path=CI/argocd-e2e-tests/231103-124637/argocd-e2e-tests-skipped.log -F file=@./argo-cd/test-results/tests-skipped.log http://uploader-devtools-gitops-services.apps.ocp-c1.prod.psi.redhat.com/upload
File has been uploaded to CI/argocd-e2e-tests/231103-124637/argocd-e2e-tests-skipped.log 🚀
+ echo

Updating artifacts path to results
+ echo 'Updating artifacts path to results'
+ echo -n http://uploader-devtools-gitops-services.apps.ocp-c1.prod.psi.redhat.com/CI/argocd-e2e-tests/231103-124637/argocd-e2e-test.xml
+ tee /tekton/results/artifacts
http://uploader-devtools-gitops-services.apps.ocp-c1.prod.psi.redhat.com/CI/argocd-e2e-tests/231103-124637/argocd-e2e-test.xml+ exit 1
